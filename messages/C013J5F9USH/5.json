{"cursor": 4, "messages": [{"client_msg_id":"d78d1885-2992-48d6-95e5-65dc5f5e31b3","type":"message","text":"<@U6BNE7LTZ> quick question: I just had a look at the env watching functionality. I'm wondering whether a much easier implementation might be to just add manifest files here <https://github.com/julia-vscode/julia-vscode/blob/master/src/extension.ts#L202>, and then handle all the rest in the LS via the standard LSP messages for file change notifications?","user":"U68UUUFPS","ts":"1611949884.147900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U8Hq","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6BNE7LTZ"},{"type":"text","text":" quick question: I just had a look at the env watching functionality. I'm wondering whether a much easier implementation might be to just add manifest files here "},{"type":"link","url":"https://github.com/julia-vscode/julia-vscode/blob/master/src/extension.ts#L202"},{"type":"text","text":", and then handle all the rest in the LS via the standard LSP messages for file change notifications?"}]}]}]},{"client_msg_id":"a1874d58-dba6-4319-9f74-ddaed58135b6","type":"message","text":"Another benefit of that would be that things would work with non VS Code clients as well, potentially","user":"U68UUUFPS","ts":"1611949904.148500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8qMgv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Another benefit of that would be that things would work with non VS Code clients as well, potentially"}]}]}]},{"client_msg_id":"dc73bddb-32ad-47ed-adb1-00e3d124ae06","type":"message","text":"Or was there a specific reason for the current design?","user":"U68UUUFPS","ts":"1611949922.149100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uPIH3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or was there a specific reason for the current design?"}]}]}]},{"client_msg_id":"769772c8-b3da-4830-a869-89ec6e02d752","type":"message","text":"Last I checked you can only watch files in the workspace with that method","user":"U6BNE7LTZ","ts":"1611949930.149400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mnn/U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Last I checked you can only watch files in the workspace with that method"}]}]}]},{"client_msg_id":"05bcec43-cc85-480b-8191-b66da90e80d2","type":"message","text":"Ah, yes","user":"U68UUUFPS","ts":"1611949940.149800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uH4CW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, yes"}]}]}]},{"client_msg_id":"a380fe26-8fa2-4369-a91a-fc1af263139b","type":"message","text":"which the global Manifest usually isn't","user":"U6BNE7LTZ","ts":"1611949942.150000","team":"T68168MUP","edited":{"user":"U6BNE7LTZ","ts":"1611949944.000000"},"blocks":[{"type":"rich_text","block_id":"MEI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which the global Manifest usually isn't"}]}]}]},{"client_msg_id":"1eb1f858-c291-416a-8a3b-0ee18f8f959c","type":"message","text":"I think that is true","user":"U68UUUFPS","ts":"1611949943.150100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IMJ6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think that is true"}]}]}]},{"client_msg_id":"17752b77-4b68-4305-9f5c-b5976c2acaeb","type":"message","text":"Yep","user":"U68UUUFPS","ts":"1611949948.150400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rDe0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yep"}]}]}]},{"client_msg_id":"b0760be0-018e-4788-9387-51ce6b36db06","type":"message","text":"I wonder whether we could still use standard `'workspace/didChangeWatchedFiles'` notifications instead of our own notification type, though.","user":"U68UUUFPS","ts":"1611950203.151100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lg8zP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I wonder whether we could still use standard "},{"type":"text","text":"'workspace/didChangeWatchedFiles'","style":{"code":true}},{"type":"text","text":" notifications instead of our own notification type, though."}]}]}]},{"client_msg_id":"9bc75fc6-0da0-4029-9e31-df4405501121","type":"message","text":"Not important, but I think that probably would work.","user":"U68UUUFPS","ts":"1611950210.151400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SvAr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not important, but I think that probably would work."}]}]}]},{"client_msg_id":"e27ed28a-bb76-478f-b28e-a2eb8267fffe","type":"message","text":"And would allow non VS Code clients to more easily integrate with this","user":"U68UUUFPS","ts":"1611950225.151800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w2UZb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And would allow non VS Code clients to more easily integrate with this"}]}]}]},{"client_msg_id":"2f21cc0e-359f-4f8a-86ce-e33d53f3bd07","type":"message","text":"Here is another new (I think) crash: <https://portal.azure.com/#blade/AppInsightsExtension/DetailsV2Blade/ComponentId/%7B%22SubscriptionId%22%3A%226803c4ed-bcb4-41d4-bceb-7faf5e7a3469%22%2C%22ResourceGroup%22%3A%22Default%22%2C%22Name%22%3A%22julia-vscode-insider%22%2C%22LinkedApplicationType%22%3A0%2C%22ResourceId%22%3A%22%2Fsubscriptions%2F6803c4ed-bcb4-41d4-bceb-7faf5e7a3469%2FresourceGroups%2FDefault%2Fproviders%2Fmicrosoft.insights%2Fcomponents%2Fjulia-vscode-insider%22%2C%22ResourceType%22%3A%22microsoft.insights%2Fcomponents%22%2C%22IsAzureFirst%22%3Afalse%7D/DataModel/%7B%22eventId%22%3A%22b1e78e81-628f-11eb-8da9-15e45b00148f%22%2C%22timestamp%22%3A%222021-01-30T00%3A11%3A26.715Z%22%2C%22cacheId%22%3A%2250a9eb12-ef0f-441a-a833-236294a84131%22%2C%22eventTable%22%3A%22exceptions%22%7D|https://portal.azure.com/#blade/AppInsightsExtension/DetailsV2Blade/ComponentId/%7B%2[…]833-236294a84131%22%2C%22eventTable%22%3A%22exceptions%22%7D>","user":"U68UUUFPS","ts":"1612033661.152900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"im6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here is another new (I think) crash: "},{"type":"link","url":"https://portal.azure.com/#blade/AppInsightsExtension/DetailsV2Blade/ComponentId/%7B%22SubscriptionId%22%3A%226803c4ed-bcb4-41d4-bceb-7faf5e7a3469%22%2C%22ResourceGroup%22%3A%22Default%22%2C%22Name%22%3A%22julia-vscode-insider%22%2C%22LinkedApplicationType%22%3A0%2C%22ResourceId%22%3A%22%2Fsubscriptions%2F6803c4ed-bcb4-41d4-bceb-7faf5e7a3469%2FresourceGroups%2FDefault%2Fproviders%2Fmicrosoft.insights%2Fcomponents%2Fjulia-vscode-insider%22%2C%22ResourceType%22%3A%22microsoft.insights%2Fcomponents%22%2C%22IsAzureFirst%22%3Afalse%7D/DataModel/%7B%22eventId%22%3A%22b1e78e81-628f-11eb-8da9-15e45b00148f%22%2C%22timestamp%22%3A%222021-01-30T00%3A11%3A26.715Z%22%2C%22cacheId%22%3A%2250a9eb12-ef0f-441a-a833-236294a84131%22%2C%22eventTable%22%3A%22exceptions%22%7D","text":"https://portal.azure.com/#blade/AppInsightsExtension/DetailsV2Blade/ComponentId/%7B%2[…]833-236294a84131%22%2C%22eventTable%22%3A%22exceptions%22%7D"}]}]}]},{"client_msg_id":"3b24ab3d-9bed-416c-b1f7-ac3acaba2ed1","type":"message","text":"That seems an odd one to me, it doesn't look like we should be getting a null/nothing there (<https://microsoft.github.io/language-server-protocol/specification#textDocument_completion>)","user":"U6A7NFP62","ts":"1612035248.153600","team":"T68168MUP","attachments":[{"title":"Specification","title_link":"https://microsoft.github.io/language-server-protocol/specification#textDocument_completion","text":"Language Server Protocol documentation and specification page.","fallback":"Specification","from_url":"https://microsoft.github.io/language-server-protocol/specification#textDocument_completion","service_icon":"https://microsoft.github.io/language-server-protocol/img/favicon.png","service_name":"microsoft.github.io","id":1,"original_url":"https://microsoft.github.io/language-server-protocol/specification#textDocument_completion"}],"blocks":[{"type":"rich_text","block_id":"PmV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That seems an odd one to me, it doesn't look like we should be getting a null/nothing there ("},{"type":"link","url":"https://microsoft.github.io/language-server-protocol/specification#textDocument_completion"},{"type":"text","text":")"}]}]}]},{"client_msg_id":"7d298418-4fa4-49e2-86f1-d28ba83c02eb","type":"message","text":"Hm, agreed, `\n```triggerCharacter```\nshould either be present and then a string, or just not be there, I think?","user":"U68UUUFPS","ts":"1612036192.154200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sTfx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hm, agreed, `\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"triggerCharacter"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"should either be present and then a string, or just not be there, I think?"}]}]}]},{"client_msg_id":"de8b9c82-b5d3-437f-8895-9b2aea3932a9","type":"message","text":"Although, that error could I guess also come from something other than the conversion of the value from the dict...","user":"U68UUUFPS","ts":"1612036433.154800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Gq=Oa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Although, that error could I guess also come from something other than the conversion of the value from the dict..."}]}]}]},{"client_msg_id":"3ea241b0-2a50-4391-a0de-719643871ea5","type":"message","text":"We don't really have good stack traces in that macro...","user":"U68UUUFPS","ts":"1612036441.155200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=MLC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We don't really have good stack traces in that macro..."}]}]}]},{"client_msg_id":"7a3db245-3034-49bc-8e70-0dfd87a962c2","type":"message","text":"the method error points to the constructor though, no?","user":"U6BNE7LTZ","ts":"1612036469.155500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+GJ49","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the method error points to the constructor though, no?"}]}]}]},{"client_msg_id":"c98bbacc-f2c6-4102-84c0-70629394e292","type":"message","text":"Yes, but I think the constructor code gets assembled in the macro and might have quite a lot of lines and stuff in it, and not entirely clear _which_ part of the constructed constructor fails, maybe?","user":"U68UUUFPS","ts":"1612036604.156200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mgd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, but I think the constructor code gets assembled in the macro and might have quite a lot of lines and stuff in it, and not entirely clear "},{"type":"text","text":"which","style":{"italic":true}},{"type":"text","text":" part of the constructed constructor fails, maybe?"}]}]}]},{"client_msg_id":"2fcc7637-769a-4533-af4d-d3c3065edcda","type":"message","text":"I mean, it could also just be that the message we are receiving doesn't conform to the schema...","user":"U68UUUFPS","ts":"1612036619.156600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z/Q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I mean, it could also just be that the message we are receiving doesn't conform to the schema..."}]}]}]},{"client_msg_id":"aed19d57-4f8e-40fb-ac6b-4737937fb33e","type":"message","text":"mhmm","user":"U6BNE7LTZ","ts":"1612036630.157100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"to5k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"mhmm"}]}]}]},{"client_msg_id":"7df267ae-4fa6-4b2f-9f04-62e583112699","type":"message","text":"I noticed that our middleware kicks in right before we get the error","user":"U6BNE7LTZ","ts":"1612036641.157600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zO59","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I noticed that our middleware kicks in right before we get the error"}]}]}]},{"client_msg_id":"c81e8d17-9c30-4b99-b1b5-ddc00681ea2e","type":"message","text":"We should probably add some logic to the constructor code that checks whether the dict that gets passed conforms to the schema that is encoded in our types, and then throws informative errors what is wrong.","user":"U68UUUFPS","ts":"1612036663.158100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yIdfb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We should probably add some logic to the constructor code that checks whether the dict that gets passed conforms to the schema that is encoded in our types, and then throws informative errors what is wrong."}]}]}]},{"client_msg_id":"4137c4cb-38cc-4be7-9f89-42d77c9a5c92","type":"message","text":"although not consistently","user":"U6BNE7LTZ","ts":"1612036666.158200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DI8Z3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"although not consistently"}]}]}]},{"client_msg_id":"c8b67785-35b2-44a1-b5de-08769b60edc0","type":"message","text":"yes","user":"U6BNE7LTZ","ts":"1612036672.158400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SAC+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}]},{"client_msg_id":"9a55dc04-39f4-4a15-8f92-bf4586429f5e","type":"message","text":"That whole `dict_readable` is not ideal :slightly_smiling_face: I think it would also be better to construct the entire return expression via interpolation, I think we might get some more line numbers that way. Not sure though...","user":"U68UUUFPS","ts":"1612036807.159300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=RTpE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That whole "},{"type":"text","text":"dict_readable","style":{"code":true}},{"type":"text","text":" is not ideal "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" I think it would also be better to construct the entire return expression via interpolation, I think we might get some more line numbers that way. Not sure though..."}]}]}]},{"client_msg_id":"bc4166d6-b56b-4af5-8cc1-91dfeb025b4d","type":"message","text":"I hate writing macros.","user":"U68UUUFPS","ts":"1612036836.159500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Awy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I hate writing macros."}]}]}]},{"client_msg_id":"d9982bc6-69b7-4de3-b3ce-db93ad58385a","type":"message","text":"<https://github.com/julia-vscode/julia-vscode/pull/1898> is (for us) a pretty new idea. Not sure whether it is even in principle done correctly or not...","user":"U68UUUFPS","ts":"1612036878.160300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iru","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/julia-vscode/julia-vscode/pull/1898"},{"type":"text","text":" is (for us) a pretty new idea. Not sure whether it is even in principle done correctly or not..."}]}]}]},{"client_msg_id":"040ed312-c1b3-444c-a034-46aedfca3e34","type":"message","text":"it might be a bit easier to just debounce those functions with e.g. undersorce.js","user":"U6BNE7LTZ","ts":"1612037004.161300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tjcj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it might be a bit easier to just debounce those functions with e.g. undersorce.js"}]}]}]},{"client_msg_id":"f4205ca5-9475-400c-a39f-162eed4ee3b4","type":"message","text":"I _though_ that the events were debounced, but apparently that's not the case","user":"U6BNE7LTZ","ts":"1612037023.161700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qtGl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I "},{"type":"text","text":"though","style":{"italic":true}},{"type":"text","text":" that the events were debounced, but apparently that's not the case"}]}]}]},{"client_msg_id":"f5828c77-eb1a-4beb-b77b-fdc109e13588","type":"message","text":"but the implementation in #1898 seems correct to me","user":"U6BNE7LTZ","ts":"1612037174.162500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7P7c","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but the implementation in #1898 seems correct to me"}]}]}]},{"client_msg_id":"88FBFEB8-5C0B-407F-989F-9045E8E203EB","type":"message","text":"I don’t know denouncing is :)","user":"U68UUUFPS","ts":"1612037243.163100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SQP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t know denouncing is :)"}]}]}]},{"client_msg_id":"F54472A2-4CC3-49F0-9182-B55039E2ECFA","type":"message","text":"Ah, Google told me","user":"U68UUUFPS","ts":"1612037292.164000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PASsH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, Google told me"}]}]}]},{"client_msg_id":"8617a0af-b793-48fa-8193-40c7ff02c87f","type":"message","text":"<https://underscorejs.org/#debounce> -- basically we'd only make the request of no change has occured for a certain amount of time","user":"U6BNE7LTZ","ts":"1612037305.164300","team":"T68168MUP","edited":{"user":"U6BNE7LTZ","ts":"1612037309.000000"},"blocks":[{"type":"rich_text","block_id":"a=YmD","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://underscorejs.org/#debounce"},{"type":"text","text":" -- basically we'd only make the request of no change has occured for a certain amount of time"}]}]}]},{"client_msg_id":"24F34FA7-D1FA-4B44-A3AD-A73C0C0E47A3","type":"message","text":"This whole combination of async code with two locations that keep state synchronized via messages is really, really complicated...","user":"U68UUUFPS","ts":"1612037392.166100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xpM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This whole combination of async code with two locations that keep state synchronized via messages is really, really complicated..."}]}]}]},{"client_msg_id":"247025b5-ddb5-43a8-bb83-6948782f3903","type":"message","text":"I'm still convinced we can't expect the text document to be synced relative to our own request ever","user":"U6BNE7LTZ","ts":"1612037480.167800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TnnxU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm still convinced we can't expect the text document to be synced relative to our own request ever"}]}]}]},{"client_msg_id":"42559e60-3bef-4a7e-b13e-43bd32a5977f","type":"message","text":"so we really shouldn't be throwing hard errors there","user":"U6BNE7LTZ","ts":"1612037490.168300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ula","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so we really shouldn't be throwing hard errors there"}]}]}]},{"client_msg_id":"bd442042-0a9c-4a4e-b098-042691173b94","type":"message","text":"and instead just return an error token or default position or whatnot","user":"U6BNE7LTZ","ts":"1612037503.168800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A8DQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and instead just return an error token or default position or whatnot"}]}]}],"reactions":[{"name":"+1","users":["U6A7NFP62"],"count":1}]},{"client_msg_id":"5611F3FA-A15C-4D66-B44A-EEBA188A307F","type":"message","text":"Yes, I’m (slowly) starting to agree ","user":"U68UUUFPS","ts":"1612037522.169400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iJ=b","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, I’m (slowly) starting to agree "}]}]}]},{"client_msg_id":"B1D91283-1477-44EF-A8CF-A1F5228AB503","type":"message","text":"Or rather, you are clearly right. ","user":"U68UUUFPS","ts":"1612037550.169800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HtT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or rather, you are clearly right. "}]}]}]},{"client_msg_id":"6A13C7D1-73C5-4239-A19C-A22537AAAF9E","type":"message","text":"This cancel business might help a bit, but won’t solve the problem ","user":"U68UUUFPS","ts":"1612037568.170500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"woz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This cancel business might help a bit, but won’t solve the problem "}]}]}]},{"client_msg_id":"7ea317d7-b1e4-4f86-89c7-494adfc19c5a","type":"message","text":"Is the correct response to an error where the LS has an older doc version than the extension to retry?","user":"U68UUUFPS","ts":"1612037666.170900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uLs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is the correct response to an error where the LS has an older doc version than the extension to retry?"}]}]}]},{"client_msg_id":"75e50aa6-0f4d-4a00-b9d0-dbd502bdb9dd","type":"message","text":"And hope that in the meantime the doc update notifications have been sent and processed by the LS?","user":"U68UUUFPS","ts":"1612037680.171300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NndJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And hope that in the meantime the doc update notifications have been sent and processed by the LS?"}]}]}]},{"client_msg_id":"adc4d10e-4679-4010-a1a7-930aed1dea15","type":"message","text":"that sounds sane","user":"U6BNE7LTZ","ts":"1612037692.171600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bGST3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that sounds sane"}]}]}]},{"client_msg_id":"76979abb-02d1-4c92-b5ec-b6945c0bb041","type":"message","text":"Probably should have a timeout, or a max number of tries, or something like that...","user":"U68UUUFPS","ts":"1612037738.172500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5xn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Probably should have a timeout, or a max number of tries, or something like that..."}]}]}]},{"client_msg_id":"6a9e8fe0-fb87-4ad9-95dd-9dc784e3d394","type":"message","text":"And between retries the code could check whether things were cancelled, so that should also help.","user":"U68UUUFPS","ts":"1612037799.173400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5gF7h","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And between retries the code could check whether things were cancelled, so that should also help."}]}]}]},{"client_msg_id":"32a1d464-2272-46d8-84d7-38284013f61c","type":"message","text":"I think one proper difficult situation is this: user presses Alt+Enter, and then immediately edits the file. In that case I think we could just end up in a situation where we \"miss\" the small window during which the LS has the doc version that was true when Alt+Enter was pressed.","user":"U68UUUFPS","ts":"1612037860.174800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ctpY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think one proper difficult situation is this: user presses Alt+Enter, and then immediately edits the file. In that case I think we could just end up in a situation where we \"miss\" the small window during which the LS has the doc version that was true when Alt+Enter was pressed."}]}]}],"thread_ts":"1612037860.174800","reply_count":1,"reply_users_count":1,"latest_reply":"1612038037.178000","reply_users":["U68UUUFPS"],"subscribed":false},{"client_msg_id":"1f706e14-f9a9-4e7f-ab68-8214587f058c","type":"message","text":"Let me whip up an alternative to #1878 real quick that does this","user":"U6BNE7LTZ","ts":"1612037862.174900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+9P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Let me whip up an alternative to #1878 real quick that does this"}]}]}]},{"client_msg_id":"268abf48-2870-49d1-adad-d3b09b60f828","type":"message","text":"I almost think that we should do both #1878 _and_ the retry thing?","user":"U68UUUFPS","ts":"1612037883.175800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kGYg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I almost think that we should do both #1878 "},{"type":"text","text":"and","style":{"italic":true}},{"type":"text","text":" the retry thing?"}]}]}]},{"client_msg_id":"987770c9-eaca-429e-b3a3-8ef668a3d01b","type":"message","text":"I think the more common failure case is when the user rapidly deletes code for example","user":"U6BNE7LTZ","ts":"1612037887.176000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u2xFN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the more common failure case is when the user rapidly deletes code for example"}]}]}]},{"client_msg_id":"90a4cfc3-bad8-4a84-9887-151c9538ea26","type":"message","text":"mh the cancellation stuff is basically debouncing, except more verbose","user":"U6BNE7LTZ","ts":"1612037914.176800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E30/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"mh the cancellation stuff is basically debouncing, except more verbose"}]}]}]},{"client_msg_id":"4923b40c-7266-4db6-aed7-d902ce497898","type":"message","text":"Also true...","user":"U68UUUFPS","ts":"1612037937.177200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uRI0q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also true..."}]}]}]},{"client_msg_id":"08fcf527-869e-459e-9c18-8d7ae6c86a6d","type":"message","text":"Is there a debouncing implementation that layers on top of the VS Code cancel token infrastructure?","user":"U68UUUFPS","ts":"1612037963.177700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wK3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a debouncing implementation that layers on top of the VS Code cancel token infrastructure?"}]}]}]},{"client_msg_id":"6251150f-1d9f-4b10-8539-c440b832432f","type":"message","text":"not as far as I'm aware","user":"U6BNE7LTZ","ts":"1612037992.177900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PNc0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not as far as I'm aware"}]}]}]},{"client_msg_id":"5fdd912b-9811-4e40-934a-9fa9b8b104f0","type":"message","text":"I also saw that javascript now has its own (I think official) cancel token infrastructure `AbortController` or something like that.","user":"U68UUUFPS","ts":"1612038086.178700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F88N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I also saw that javascript now has its own (I think official) cancel token infrastructure "},{"type":"text","text":"AbortController","style":{"code":true}},{"type":"text","text":" or something like that."}]}]}]},{"client_msg_id":"9bb9d2af-56b4-4c8d-8425-b246ebe6a910","type":"message","text":"I think I need to read a bit more about the relationship of debouncing and cancel token/abortcontroller stuff.","user":"U68UUUFPS","ts":"1612038186.179100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x5PA0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think I need to read a bit more about the relationship of debouncing and cancel token/abortcontroller stuff."}]}]}]},{"client_msg_id":"5075a813-962e-413c-b9c6-ce498d80723a","type":"message","text":"<https://www.codetinkerer.com/2019/01/14/cancel-async-requests-pattern.html> seems to suggest that debouncing is not super general...","user":"U68UUUFPS","ts":"1612038201.179400","team":"T68168MUP","attachments":[{"service_name":"codetinkerer.com","title":"A Pattern For Cancelling Fetch API Requests","title_link":"https://www.codetinkerer.com/2019/01/14/cancel-async-requests-pattern.html","text":"There is a fairly reproducible bug in <http://outlook.office.com|outlook.office.com> that occurs when you quickly switch back and forth between Calendar and Mail while everything is still loading in: Outlook thinks you are in the Calendar when actually it is the Mail section that loaded in last. The navigation basically stops working at that point. I’m picking on Outlook because it is a major web application that presumably has a large quality assurance team behind it. But once you start to look for these out-of-order execution bugs, you can see them pop up in just about every JavaScript application.","fallback":"codetinkerer.com: A Pattern For Cancelling Fetch API Requests","ts":1547445600,"from_url":"https://www.codetinkerer.com/2019/01/14/cancel-async-requests-pattern.html","id":1,"original_url":"https://www.codetinkerer.com/2019/01/14/cancel-async-requests-pattern.html"}],"blocks":[{"type":"rich_text","block_id":"exK5","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://www.codetinkerer.com/2019/01/14/cancel-async-requests-pattern.html"},{"type":"text","text":" seems to suggest that debouncing is not super general..."}]}]}]},{"client_msg_id":"6290b7c6-1d1a-4c1e-bb48-34ba23b27925","type":"message","text":"Have to run now, fun stuff :slightly_smiling_face:","user":"U68UUUFPS","ts":"1612038210.179700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bQK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Have to run now, fun stuff "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"reactions":[{"name":"+1","users":["U6BNE7LTZ"],"count":1}]},{"client_msg_id":"af2e0195-50ac-4bf9-865b-fd27a30765dc","type":"message","text":"In any case, I think we should probably not merge any of this for the initial 1.1 release on the release channel, I don't think any of this is a regression, so I would say we fix this a little later.","user":"U68UUUFPS","ts":"1612058807.181200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ijX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In any case, I think we should probably not merge any of this for the initial 1.1 release on the release channel, I don't think any of this is a regression, so I would say we fix this a little later."}]}]}]},{"client_msg_id":"5d381c93-ad46-44af-aac0-68879c57d2e4","type":"message","text":"I just tagged a new insider release. I think we're getting _very_ close to having something we can release?","user":"U68UUUFPS","ts":"1612058821.181600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qKR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I just tagged a new insider release. I think we're getting "},{"type":"text","text":"very","style":{"italic":true}},{"type":"text","text":" close to having something we can release?"}]}]}]},{"client_msg_id":"d8f6f416-b46a-42d0-82b1-e5ec697921d9","type":"message","text":"<https://github.com/julia-vscode/julia-vscode/issues/1900> is annoying, but I'm tempted to maybe just disable that feature temporarily if we can't figure out a fix very soon, so that this doesn't slow down our 1.1 release. I also don't want to ship as is because the errors just pop up too frequently.","user":"U68UUUFPS","ts":"1612058878.182700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iTR","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/julia-vscode/julia-vscode/issues/1900"},{"type":"text","text":" is annoying, but I'm tempted to maybe just disable that feature temporarily if we can't figure out a fix very soon, so that this doesn't slow down our 1.1 release. I also don't want to ship as is because the errors just pop up too frequently."}]}]}]},{"client_msg_id":"895e3b41-7643-442b-a091-841590b4d395","type":"message","text":"So my plan right now would be: we see how 1.1.11 does on the insider channel for 1-2 days, and if during that time we manage to fix the live testing problems, we include that, otherwise we disable it for now. And then I think we might be able to ship.","user":"U68UUUFPS","ts":"1612058940.183800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WdZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So my plan right now would be: we see how 1.1.11 does on the insider channel for 1-2 days, and if during that time we manage to fix the live testing problems, we include that, otherwise we disable it for now. And then I think we might be able to ship."}]}]}]},{"client_msg_id":"c4a359e9-479b-44fe-a392-5be57c0f7e38","type":"message","text":"My current thinking is that I tag a new insider build after we merged the following three PRs:\n• <https://github.com/julia-vscode/CSTParser.jl/pull/239> (<@U6A7NFP62> needs to fix tests at the moment)\n• <https://github.com/julia-vscode/LanguageServer.jl/pull/877> (someone needs to approve)\n• <https://github.com/julia-vscode/julia-vscode/pull/1902> (someone needs to approve)\nBeyond that we don't have anything pending, right?","user":"U68UUUFPS","ts":"1612215744.185600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jyY2k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My current thinking is that I tag a new insider build after we merged the following three PRs:\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/julia-vscode/CSTParser.jl/pull/239"},{"type":"text","text":" ("},{"type":"user","user_id":"U6A7NFP62"},{"type":"text","text":" needs to fix tests at the moment)"}]},{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/julia-vscode/LanguageServer.jl/pull/877"},{"type":"text","text":" (someone needs to approve)"}]},{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/julia-vscode/julia-vscode/pull/1902"},{"type":"text","text":" (someone needs to approve)"}]}],"style":"bullet","indent":0},{"type":"rich_text_section","elements":[{"type":"text","text":"Beyond that we don't have anything pending, right?"}]}]}]},{"client_msg_id":"d4d92a4c-527f-4a1d-b236-d1d23dfa98ca","type":"message","text":"I think we just need a new tag on Tokenize (and update deps) to fix the CSTParser one","user":"U6A7NFP62","ts":"1612216588.186700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0X8B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think we just need a new tag on Tokenize (and update deps) to fix the CSTParser one"}]}]}]},{"client_msg_id":"11204b0b-a07e-4362-b4bc-b8869fa14e8c","type":"message","text":"I've forgotten how...","user":"U6A7NFP62","ts":"1612216600.187000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Sgwn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I've forgotten how..."}]}]}]},{"client_msg_id":"8d5be36f-1a9a-4840-9a64-454914754352","type":"message","text":"Well, you could use the latest extension build and use the new package tagging functionality :slightly_smiling_face:","user":"U68UUUFPS","ts":"1612216755.187300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bSlA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, you could use the latest extension build and use the new package tagging functionality "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"10e34daa-becd-4487-b7fe-11ef478b4bd3","type":"message","text":"That might work or not, who knows.","user":"U68UUUFPS","ts":"1612216777.187700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+NF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That might work or not, who knows."}]}]}]},{"client_msg_id":"b753444e-3054-4ab2-b1ff-724362ed6ea3","type":"message","text":"Oh yes! Here goes...","user":"U6A7NFP62","ts":"1612216839.187900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cxouL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh yes! Here goes..."}]}]}]},{"client_msg_id":"6a973519-4d10-4899-a977-2370c36c74a1","type":"message","text":"It say's I need to fork it to my account but It already is - maybe doesn't play well with multiple orgs on your github account?","user":"U6A7NFP62","ts":"1612216990.188800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QTq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It say's I need to fork it to my account but It already is - maybe doesn't play well with multiple orgs on your github account?"}]}]}]},{"client_msg_id":"8926ef86-d4bc-4966-a315-94b1e4892059","type":"message","text":"Hm...","user":"U68UUUFPS","ts":"1612217063.189000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oil","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hm..."}]}]}]},{"client_msg_id":"046bfab8-13bb-4d7d-9f07-3ba9ee8b7adb","type":"message","text":"What is the `origin` remote pointing to?","user":"U68UUUFPS","ts":"1612217072.189300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"T2qQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What is the "},{"type":"text","text":"origin","style":{"code":true}},{"type":"text","text":" remote pointing to?"}]}]}]},{"client_msg_id":"31646466-5d6c-4127-b705-7fae66377d1c","type":"message","text":"on your local system?","user":"U68UUUFPS","ts":"1612217077.189500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XR0Mu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"on your local system?"}]}]}]},{"client_msg_id":"33622c47-2832-4bfb-9bb5-214acd241273","type":"message","text":"It should work with multiple orgs/accounts, I use it that way all the time.","user":"U68UUUFPS","ts":"1612217090.189800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N5am9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It should work with multiple orgs/accounts, I use it that way all the time."}]}]}]},{"client_msg_id":"ff14ee3f-60e5-482b-a251-44dfb7ed1f16","type":"message","text":"But it might have some expectations about forks vs origin remotes, that right now I can't remember :slightly_smiling_face:","user":"U68UUUFPS","ts":"1612217134.190500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NMXi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But it might have some expectations about forks vs origin remotes, that right now I can't remember "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"3a9183e4-8e1b-4442-ba3f-958b911b5b24","type":"message","text":"Origin is set to the JuliaLang repo","user":"U6A7NFP62","ts":"1612217165.191100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RhT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Origin is set to the JuliaLang repo"}]}]}]},{"client_msg_id":"15452eed-3258-4628-bb73-ca13f31d0da1","type":"message","text":"Hm, ok, let me check quickly.","user":"U68UUUFPS","ts":"1612217182.191600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pxCb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hm, ok, let me check quickly."}]}]}]},{"client_msg_id":"85df4271-4414-4e96-8590-a615ebfe54cc","type":"message","text":"```  Downloaded artifact: libsodium\n\n14 dependencies successfully precompiled in 9 seconds (12 already precompiled)\nERROR: You need to have a fork of the registry in your github account.\nStacktrace:\n [1] error(s::String)\n   @ Base ./error.jl:33\n [2] tag_internal(package_name::String, pkg_uuid::String, pkg_path::String, version::Symbol; registry::Nothing, release_notes::Nothing, credentials::String, github_username::String)\n   @ PkgDev ~/.julia/packages/PkgDev/jqw0f/src/tag.jl:101\n [3] tag(package_path::FilePathsBase.PosixPath, version::Symbol; kwargs::Base.Iterators.Pairs{Symbol, String, Tuple{Symbol, Symbol}, NamedTuple{(:credentials, :github_username), Tuple{String, String}}})\n   @ PkgDev ~/.julia/packages/PkgDev/jqw0f/src/tag.jl:32\n [4] top-level scope\n   @ ~/.vscode/extensions/julialang.language-julia-insider-1.1.11/scripts/packagedev/tagnewpackageversion.jl:23\nFINISHED```","user":"U6A7NFP62","ts":"1612217200.192200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ChS/","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"  Downloaded artifact: libsodium\n\n14 dependencies successfully precompiled in 9 seconds (12 already precompiled)\nERROR: You need to have a fork of the registry in your github account.\nStacktrace:\n [1] error(s::String)\n   @ Base ./error.jl:33\n [2] tag_internal(package_name::String, pkg_uuid::String, pkg_path::String, version::Symbol; registry::Nothing, release_notes::Nothing, credentials::String, github_username::String)\n   @ PkgDev ~/.julia/packages/PkgDev/jqw0f/src/tag.jl:101\n [3] tag(package_path::FilePathsBase.PosixPath, version::Symbol; kwargs::Base.Iterators.Pairs{Symbol, String, Tuple{Symbol, Symbol}, NamedTuple{(:credentials, :github_username), Tuple{String, String}}})\n   @ PkgDev ~/.julia/packages/PkgDev/jqw0f/src/tag.jl:32\n [4] top-level scope\n   @ ~/.vscode/extensions/julialang.language-julia-insider-1.1.11/scripts/packagedev/tagnewpackageversion.jl:23\nFINISHED"}]}]}]},{"client_msg_id":"aee1cab1-3dd5-44b9-a7d7-5eec7e50711e","type":"message","text":"Ah, that is for the registry!","user":"U68UUUFPS","ts":"1612217250.192500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EbSB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, that is for the registry!"}]}]}]},{"client_msg_id":"0066fc6c-bac2-435d-813b-060b7fe5258d","type":"message","text":"You need to fork <https://github.com/JuliaRegistries/General/>","user":"U68UUUFPS","ts":"1612217267.192700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+Vb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You need to fork "},{"type":"link","url":"https://github.com/JuliaRegistries/General/"}]}]}]},{"client_msg_id":"4f5e3e9d-3966-4b4b-805f-c7061f32d47d","type":"message","text":"Although I'm now realizing that this check doesn't make any sense anymore","user":"U68UUUFPS","ts":"1612217284.193000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IGGJT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Although I'm now realizing that this check doesn't make any sense anymore"}]}]}]},{"client_msg_id":"83922bd8-58d1-4408-b752-20f6c6c0d0eb","type":"message","text":"Because I am no longer using that fork for anything, actually :slightly_smiling_face:","user":"U68UUUFPS","ts":"1612217293.193500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NcC=C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Because I am no longer using that fork for anything, actually "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"a67267f9-d225-4a5d-90c0-b492562de59f","type":"message","text":"Ah right, I should read things","user":"U6A7NFP62","ts":"1612217298.193800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G7Um0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah right, I should read things"}]}]}]},{"client_msg_id":"cf130cdd-9bc7-4869-abe6-dee0795d224c","type":"message","text":"Who does :wink:","user":"U68UUUFPS","ts":"1612217303.194000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B3F4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Who does "},{"type":"emoji","name":"wink"}]}]}]},{"client_msg_id":"85b59d34-8190-4e03-ba27-6708668c6a85","type":"message","text":":slightly_smiling_face:","user":"U6A7NFP62","ts":"1612217306.194200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ip1","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"8b517c29-7746-4d6d-b840-697027e0c40e","type":"message","text":"```ERROR: type `VersionNumber` is not a valid TOML type, pass a conversion function to `TOML.print`\nStacktrace:\n  [1] error(s::String)\n    @ Base ./error.jl:33\n  [2] printvalue(f::Nothing, io::IOStream, value::VersionNumber; sorted::Bool)\n    @ TOML.Internals.Printer ~/julia/usr/share/julia/stdlib/v1.7/TOML/src/print.jl:38\n  [3] _print(f::Nothing, io::IOStream, a::Dict{String, Any}, ks::Vector{String}; indent::Int64, first_block::Bool, sorted::Bool, by::Function)\n    @ TOML.Internals.Printer ~/julia/usr/share/julia/stdlib/v1.7/TOML/src/print.jl:88\n  [4] #print#16\n    @ ~/julia/usr/share/julia/stdlib/v1.7/TOML/src/print.jl:131 [inlined]\n  [5] print(io::IOStream, a::Dict{String, Any})\n    @ TOML.Internals.Printer ~/julia/usr/share/julia/stdlib/v1.7/TOML/src/print.jl:131\n  [6] (::PkgDev.var\"#6#13\")(f::IOStream)\n    @ PkgDev ~/.julia/packages/PkgDev/jqw0f/src/tag.jl:158\n  [7] open(::PkgDev.var\"#6#13\", ::String, ::Vararg{String}; kwargs::Base.Iterators.Pairs{Union{}, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})\n    @ Base ./io.jl:330\n  [8] open\n    @ ./io.jl:328 [inlined]\n  [9] tag_internal(package_name::String, pkg_uuid::String, pkg_path::String, version::Symbol; registry::Nothing, release_notes::Nothing, credentials::String, github_username::String)\n    @ PkgDev ~/.julia/packages/PkgDev/jqw0f/src/tag.jl:157\n [10] tag(package_path::FilePathsBase.PosixPath, version::Symbol; kwargs::Base.Iterators.Pairs{Symbol, String, Tuple{Symbol, Symbol}, NamedTuple{(:credentials, :github_username), Tuple{String, String}}})\n    @ PkgDev ~/.julia/packages/PkgDev/jqw0f/src/tag.jl:32\n [11] top-level scope\n    @ ~/.vscode/extensions/julialang.language-julia-insider-1.1.11/scripts/packagedev/tagnewpackageversion.jl:23\nFINISHED```","user":"U6A7NFP62","ts":"1612217383.194500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Nj1nX","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ERROR: type `VersionNumber` is not a valid TOML type, pass a conversion function to `TOML.print`\nStacktrace:\n  [1] error(s::String)\n    @ Base ./error.jl:33\n  [2] printvalue(f::Nothing, io::IOStream, value::VersionNumber; sorted::Bool)\n    @ TOML.Internals.Printer ~/julia/usr/share/julia/stdlib/v1.7/TOML/src/print.jl:38\n  [3] _print(f::Nothing, io::IOStream, a::Dict{String, Any}, ks::Vector{String}; indent::Int64, first_block::Bool, sorted::Bool, by::Function)\n    @ TOML.Internals.Printer ~/julia/usr/share/julia/stdlib/v1.7/TOML/src/print.jl:88\n  [4] #print#16\n    @ ~/julia/usr/share/julia/stdlib/v1.7/TOML/src/print.jl:131 [inlined]\n  [5] print(io::IOStream, a::Dict{String, Any})\n    @ TOML.Internals.Printer ~/julia/usr/share/julia/stdlib/v1.7/TOML/src/print.jl:131\n  [6] (::PkgDev.var\"#6#13\")(f::IOStream)\n    @ PkgDev ~/.julia/packages/PkgDev/jqw0f/src/tag.jl:158\n  [7] open(::PkgDev.var\"#6#13\", ::String, ::Vararg{String}; kwargs::Base.Iterators.Pairs{Union{}, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})\n    @ Base ./io.jl:330\n  [8] open\n    @ ./io.jl:328 [inlined]\n  [9] tag_internal(package_name::String, pkg_uuid::String, pkg_path::String, version::Symbol; registry::Nothing, release_notes::Nothing, credentials::String, github_username::String)\n    @ PkgDev ~/.julia/packages/PkgDev/jqw0f/src/tag.jl:157\n [10] tag(package_path::FilePathsBase.PosixPath, version::Symbol; kwargs::Base.Iterators.Pairs{Symbol, String, Tuple{Symbol, Symbol}, NamedTuple{(:credentials, :github_username), Tuple{String, String}}})\n    @ PkgDev ~/.julia/packages/PkgDev/jqw0f/src/tag.jl:32\n [11] top-level scope\n    @ ~/.vscode/extensions/julialang.language-julia-insider-1.1.11/scripts/packagedev/tagnewpackageversion.jl:23\nFINISHED"}]}]}]},{"client_msg_id":"bfec8b13-24ca-4e39-a855-cea74308d451","type":"message","text":"I'll look at that in a moment, but in the meantime I could also just chip `Tokenize#master`","user":"U68UUUFPS","ts":"1612217456.194900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"460","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'll look at that in a moment, but in the meantime I could also just chip "},{"type":"text","text":"Tokenize#master","style":{"code":true}}]}]}]},{"client_msg_id":"1d760c6b-5132-418b-bcf7-d1f7d72b1676","type":"message","text":"For the extension, at least.","user":"U68UUUFPS","ts":"1612217460.195100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CXE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For the extension, at least."}]}]}]},{"client_msg_id":"cf1a8ff7-3db5-49ea-83d8-2bf1910540b4","type":"message","text":"We need it for the CSTParser PR (though I'm happy for it to be merged with current tests failing as they're unrelated to the PR)","user":"U6A7NFP62","ts":"1612217527.196200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7E+B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We need it for the CSTParser PR (though I'm happy for it to be merged with current tests failing as they're unrelated to the PR)"}]}]}]},{"client_msg_id":"346cca88-0ddd-48e8-974d-5150b8754af4","type":"message","text":"Oh, got it. Ok, let me fix one other thing first, then I'll try to see what is going wrong there.","user":"U68UUUFPS","ts":"1612217753.196600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GhF/b","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, got it. Ok, let me fix one other thing first, then I'll try to see what is going wrong there."}]}]}]},{"client_msg_id":"71d435c5-99bf-4244-be65-387fac4c3943","type":"message","text":"No worries","user":"U6A7NFP62","ts":"1612217771.196800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cf=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No worries"}]}]}]},{"client_msg_id":"468ccbc0-36e1-4013-a4ce-dda9f802ed5b","type":"message","text":"What version of Julia are you on?","user":"U68UUUFPS","ts":"1612217835.197000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"47E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What version of Julia are you on?"}]}]}]},{"client_msg_id":"1f6c0ba3-fc0d-4ad7-acf7-322d02837844","type":"message","text":"master, a couple weeks old","user":"U6A7NFP62","ts":"1612217857.197500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/Zs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"master, a couple weeks old"}]}]}]},{"client_msg_id":"d9a3027e-e404-44fd-8478-0309f14807e8","type":"message","text":"possibly related","user":"U6A7NFP62","ts":"1612217865.198000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/CaI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"possibly related"}]}]}]},{"client_msg_id":"ee4f2325-039e-4956-a148-0ff48494462f","type":"message","text":"Yes, I think so","user":"U68UUUFPS","ts":"1612217868.198200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ssu4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, I think so"}]}]}]},{"client_msg_id":"b862ba1e-b59d-41e5-bcea-ee549842a139","type":"message","text":"This breaks at `Pkg.TOML.print(f, pkg_toml_content)`","user":"U68UUUFPS","ts":"1612217882.198500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wuY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This breaks at "},{"type":"text","text":"Pkg.TOML.print(f, pkg_toml_content)","style":{"code":true}}]}]}]},{"client_msg_id":"ec701653-f6fa-4a56-8d3b-50f494807ae8","type":"message","text":"Looks to me like `TOML` used to be able to just print out `VersionNumber`, and now maybe doesn't anymore?","user":"U68UUUFPS","ts":"1612217913.199100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CitA1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looks to me like "},{"type":"text","text":"TOML","style":{"code":true}},{"type":"text","text":" used to be able to just print out "},{"type":"text","text":"VersionNumber","style":{"code":true}},{"type":"text","text":", and now maybe doesn't anymore?"}]}]}]},{"client_msg_id":"2e4fbaad-258f-4cb8-bc62-bb7d54321a54","type":"message","text":"Kristoffer has tagged a new ver, let me downgrade and test it on something new","user":"U6A7NFP62","ts":"1612217954.199600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WeT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Kristoffer has tagged a new ver, let me downgrade and test it on something new"}]}]}]},{"client_msg_id":"5a5ca2c9-2a62-42a0-8c0c-7370a7875dd5","type":"message","text":"I think the newer version of TOML seems to require us to do something like\n```TOML.print(Dict(\"foo\" =&gt; MyStruct(5, \"bar\"))) do x\n           x isa MyStruct &amp;&amp; return [x.a, x.b]\n           error(\"unhandled type $(typeof(x))\")\n       end```","user":"U68UUUFPS","ts":"1612217994.200000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cEsLu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the newer version of TOML seems to require us to do something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"TOML.print(Dict(\"foo\" => MyStruct(5, \"bar\"))) do x\n           x isa MyStruct && return [x.a, x.b]\n           error(\"unhandled type $(typeof(x))\")\n       end"}]}]}]},{"client_msg_id":"84b10a7e-ce41-454d-be22-f7222febc572","type":"message","text":"To support custom structs.","user":"U68UUUFPS","ts":"1612217998.200200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RlsBG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"To support custom structs."}]}]}]},{"client_msg_id":"9a92cdd9-4981-49fb-9d86-fede83dea400","type":"message","text":"Whereas the version of TOML that ships as part of Pkg.jl in 1.5.3 seems to just write out `VersionNumber` structs fine","user":"U68UUUFPS","ts":"1612218040.201000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P4Jpz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Whereas the version of TOML that ships as part of Pkg.jl in 1.5.3 seems to just write out "},{"type":"text","text":"VersionNumber","style":{"code":true}},{"type":"text","text":" structs fine"}]}]}]},{"client_msg_id":"848ecc30-3b68-4408-b047-e04a7db69e1f","type":"message","text":"hmm","user":"U6A7NFP62","ts":"1612218089.201200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"m+fHc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm"}]}]}]}]}