{"cursor": 0, "messages": [{"client_msg_id":"c7ee22ec-6f70-438c-926b-7e00dcbfa3a5","type":"message","text":"I'm not sure it's actually a network problem between MIT and AWS. We see the same issues on the mac bots running in my living room","user":"U674T3KB3","ts":"1607969225.470200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BwK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure it's actually a network problem between MIT and AWS. We see the same issues on the mac bots running in my living room"}]}]}]},{"client_msg_id":"593a229c-5833-400d-aa65-21efd299ade8","type":"message","text":"<@U66GD0880> you said you had some httpbingo insights to report?","user":"U674T3KB3","ts":"1608061255.470500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3h7S","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U66GD0880"},{"type":"text","text":" you said you had some httpbingo insights to report?"}]}]}]},{"client_msg_id":"7b7ba7c0-9ba1-4fda-955c-91a897f574bf","type":"message","text":"I saw some errors from `nginx` saying that it had run out of `worker_connections`","user":"U66GD0880","ts":"1608062878.470800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"czKc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I saw some errors from "},{"type":"text","text":"nginx","style":{"code":true}},{"type":"text","text":" saying that it had run out of "},{"type":"text","text":"worker_connections","style":{"code":true}}]}]}]},{"client_msg_id":"1ee4e5e1-d704-4d70-a7b6-3f71912b42d5","type":"message","text":"I believe this could be the case if we have many long-lasting connections","user":"U66GD0880","ts":"1608062892.471100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"S4QU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I believe this could be the case if we have many long-lasting connections"}]}]}]},{"client_msg_id":"7357b9b0-d7b2-4984-bd20-abd0a9882e14","type":"message","text":"because we have the `/delay` and `/drip` endpoints, I can see a possible situation where `nginx` runs out of connections (it defaults to 512 connections, but since it needs connections to the upstream as well, it’s actually just an effective 256 simultaneous streams).","user":"U66GD0880","ts":"1608063035.472700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nRMVR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"because we have the "},{"type":"text","text":"/delay","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"/drip","style":{"code":true}},{"type":"text","text":" endpoints, I can see a possible situation where "},{"type":"text","text":"nginx","style":{"code":true}},{"type":"text","text":" runs out of connections (it defaults to 512 connections, but since it needs connections to the upstream as well, it’s actually just an effective 256 simultaneous streams)."}]}]}]},{"client_msg_id":"424f0b8d-6d0e-47ba-8e46-ee94566e4801","type":"message","text":"The errors only started ~one week ago","user":"U66GD0880","ts":"1608063053.473000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AILU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The errors only started ~one week ago"}]}]}]},{"client_msg_id":"9c88d537-a9ec-4c4d-ac26-1e4115e08e8d","type":"message","text":"which I find somewhat suspicious","user":"U66GD0880","ts":"1608063058.473200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+0o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which I find somewhat suspicious"}]}]}]},{"client_msg_id":"0132cfa6-39f3-4231-b2e5-18dc256dbf56","type":"message","text":"perhaps because we finally hit the critical mass of enough simultaneous buildbots doing the Downloads tests","user":"U66GD0880","ts":"1608063085.473800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hclh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"perhaps because we finally hit the critical mass of enough simultaneous buildbots doing the Downloads tests"}]}]}]},{"client_msg_id":"5fb56c88-2dcd-4846-b7fc-d824e747af36","type":"message","text":"In any case, I have bumped the limit up from 512 to 8196","user":"U66GD0880","ts":"1608063092.474100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Utq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In any case, I have bumped the limit up from 512 to 8196"}]}]}]},{"client_msg_id":"812da0e9-2af4-41e0-99f4-88feb6970f56","type":"message","text":"That seems likely, I think generally we had queues on all buildbots the last week","user":"U67BJLYCS","ts":"1608063791.474800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wmU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That seems likely, I think generally we had queues on all buildbots the last week"}]}]}]},{"client_msg_id":"6dc3f33c-e253-4c1a-b1a6-8dbe4eb2c1ab","type":"message","text":"I’ve just deployed a significant update to the PkgServers","user":"U66GD0880","ts":"1609103492.476600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h29","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’ve just deployed a significant update to the PkgServers"}]}]}]},{"client_msg_id":"6a053b30-5f5d-4962-9ff9-13f2929f8e3b","type":"message","text":"please keep an eye out for strange failures, but if all goes well, this should significantly increase performance and decrease failures, as we’re offloading the majority of happy-path requests to nginx.","user":"U66GD0880","ts":"1609103526.477400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"byA8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"please keep an eye out for strange failures, but if all goes well, this should significantly increase performance and decrease failures, as we’re offloading the majority of happy-path requests to nginx."}]}]}]},{"client_msg_id":"97ae3f37-1d13-4192-b615-1b37780499aa","type":"message","text":"Over the past few weeks I’ve also done a lot of work on the StorageServers, so (fingers crossed) we should be in a good place, reliability-wise.  Time will tell of course, and the next project is to increase visibility into the failures of these by having a logging dashboard where we can see what proportion of requests to the PkgServers are failing (previously it was quite high at ~3%)","user":"U66GD0880","ts":"1609103611.478900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yXBY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Over the past few weeks I’ve also done a lot of work on the StorageServers, so (fingers crossed) we should be in a good place, reliability-wise.  Time will tell of course, and the next project is to increase visibility into the failures of these by having a logging dashboard where we can see what proportion of requests to the PkgServers are failing (previously it was quite high at ~3%)"}]}]}]},{"client_msg_id":"9C19130A-33EF-4287-8424-D4636138D164","type":"message","text":"Is it time for a third Pkg server in the US East? us-east2 had been having a hard time recently.","user":"U7THT3TM3","ts":"1609553618.481300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DrlJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it time for a third Pkg server in the US East? us-east2 had been having a hard time recently."}]}]}]}]}