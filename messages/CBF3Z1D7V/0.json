{"cursor": 2, "messages": [{"client_msg_id":"A1520CDB-BDA5-4FFC-BC0D-850F3E2197F0","type":"message","text":"We’ve seen 3 reports of the ReadOnlyMemoryError during precomp on windows, which seems to be fixed by ~halving the number of tasks. \n\nThe question is, is that enough of a reason to limit all windows precomp in 1.6 to half the possible tasks?\n\n<https://github.com/JuliaLang/Pkg.jl/issues/2323|https://github.com/JuliaLang/Pkg.jl/issues/2323>","user":"U8MPCDJAY","ts":"1611854417.045300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PvoC/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We’ve seen 3 reports of the ReadOnlyMemoryError during precomp on windows, which seems to be fixed by ~halving the number of tasks. \n"},{"type":"text","text":"\n"},{"type":"text","text":"The question is, is that enough of a reason to limit all windows precomp in 1.6 to half the possible tasks?\n"},{"type":"text","text":"\n"},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/issues/2323","text":"https://github.com/JuliaLang/Pkg.jl/issues/2323"}]}]}]},{"client_msg_id":"E2358F84-388F-4073-880C-8C0E75E8FBB4","type":"message","text":"I don’t think we can catch it","user":"U8MPCDJAY","ts":"1611854484.045700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/oN3I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t think we can catch it"}]}]}]},{"client_msg_id":"fa965798-cace-4800-b608-25daee5e25b8","type":"message","text":"A fix/patch given this has become an RC1 blocker <https://github.com/JuliaLang/Pkg.jl/pull/2366>","user":"U8MPCDJAY","ts":"1611868964.048100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oPgT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"A fix/patch given this has become an RC1 blocker "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2366"}]}]}]},{"client_msg_id":"4e463775-a4e9-436d-adf7-668af0b5a8dc","type":"message","text":"Yeah, windows.. file exists, then doesn’t exist next line :+1::ok_hand::ok_hand::ok_hand:\n<https://github.com/JuliaLang/Pkg.jl/pull/2374#issuecomment-770243725>","user":"U8MPCDJAY","ts":"1612026245.049900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xP+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, windows.. file exists, then doesn’t exist next line "},{"type":"emoji","name":"+1"},{"type":"emoji","name":"ok_hand"},{"type":"emoji","name":"ok_hand"},{"type":"emoji","name":"ok_hand"},{"type":"text","text":"\n"},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2374#issuecomment-770243725"}]}]}],"reactions":[{"name":"windows96","users":["UDB26738Q","U7THT3TM3","U6C5KSWAC"],"count":3}]},{"client_msg_id":"fc868493-0a3a-4a7a-a817-c9044a37e71c","type":"message","text":"Actually, the file didn’t exist, I misread the log\nBut it looks like the issue is a hash mismatch <https://github.com/JuliaLang/Pkg.jl/pull/2374#issuecomment-770268865>","user":"U8MPCDJAY","ts":"1612035589.050900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E276x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Actually, the file didn’t exist, I misread the log\nBut it looks like the issue is a hash mismatch "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2374#issuecomment-770268865"}]}]}]},{"client_msg_id":"50a14069-bf62-4715-9043-bebb8d99779e","type":"message","text":"asking here since most many people here are somewhat familiar with LibGit2: the example in this docstring doesn't make much sense to me <https://docs.julialang.org/en/v1/stdlib/LibGit2/#LibGit2.GitRevWalker>  what are those `oid` and `by` keyword arguments to `count`?","user":"UDB26738Q","ts":"1612050211.052100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ntq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"asking here since most many people here are somewhat familiar with LibGit2: the example in this docstring doesn't make much sense to me "},{"type":"link","url":"https://docs.julialang.org/en/v1/stdlib/LibGit2/#LibGit2.GitRevWalker"},{"type":"text","text":"  what are those "},{"type":"text","text":"oid","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"by","style":{"code":true}},{"type":"text","text":" keyword arguments to "},{"type":"text","text":"count","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1612050211.052100","reply_count":2,"reply_users_count":1,"latest_reply":"1612050592.052400","reply_users":["UDB26738Q"],"subscribed":false},{"client_msg_id":"dce94aca-864f-401b-9464-56b78a8a5671","type":"message","text":"So I’ve tracked down some of our Windows Pkg issues","user":"U66GD0880","ts":"1612214150.053200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CAeo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So I’ve tracked down some of our Windows Pkg issues"}]}]}]},{"client_msg_id":"9ba5c35f-51bd-415f-b8d1-f39313866bbf","type":"message","text":"One big one is that libuv doesn’t support relative symlinks to directories","user":"U66GD0880","ts":"1612214166.053600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vrvFp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"One big one is that libuv doesn’t support relative symlinks to directories"}]}]}]},{"client_msg_id":"c670c1b1-2761-4e12-a2f5-f978f32fbc81","type":"message","text":"<https://github.com/JuliaLang/libuv/blob/julia-uv2-1.39.0/src/win/fs.c#L2793-L2797>","user":"U66GD0880","ts":"1612214181.053800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fgW","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/libuv/blob/julia-uv2-1.39.0/src/win/fs.c#L2793-L2797"}]}]}]},{"client_msg_id":"d30bffa5-1924-4521-833f-ba349f93fe0b","type":"message","text":"I don’t think it would be _too_ hard to add support for that","user":"U66GD0880","ts":"1612214195.054100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xCGBT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t think it would be "},{"type":"text","text":"too","style":{"italic":true}},{"type":"text","text":" hard to add support for that"}]}]}]},{"client_msg_id":"c44b367a-4b6d-4ed4-85a2-ec6735d91f8f","type":"message","text":"but this causes all sorts of weirdness like the following:\n\n```julia&gt; mktempdir() do dir\n       mkdir(joinpath(dir, \"foo\"))\n       symlink(\"foo\", joinpath(dir, \"link\"))\n       stat(joinpath(dir, \"link\"))\n       end\nERROR: IOError: stat(\"C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\jl_WyiDxs\\\\link\"): permission denied (EACCES)\nStacktrace:\n [1] uv_error\n   @ .\\libuv.jl:97 [inlined]\n [2] stat(path::String)\n   @ Base.Filesystem .\\stat.jl:69\n [3] (::var\"#1#2\")(dir::String)\n   @ Main .\\REPL[2]:4\n [4] mktempdir(fn::var\"#1#2\", parent::String; prefix::String)\n   @ Base.Filesystem .\\file.jl:729\n [5] mktempdir(fn::Function, parent::String)\n   @ Base.Filesystem .\\file.jl:727\n [6] top-level scope\n   @ REPL[2]:1```","user":"U66GD0880","ts":"1612214231.055000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EhF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but this causes all sorts of weirdness like the following:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> mktempdir() do dir\n       mkdir(joinpath(dir, \"foo\"))\n       symlink(\"foo\", joinpath(dir, \"link\"))\n       stat(joinpath(dir, \"link\"))\n       end\nERROR: IOError: stat(\"C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\jl_WyiDxs\\\\link\"): permission denied (EACCES)\nStacktrace:\n [1] uv_error\n   @ .\\libuv.jl:97 [inlined]\n [2] stat(path::String)\n   @ Base.Filesystem .\\stat.jl:69\n [3] (::var\"#1#2\")(dir::String)\n   @ Main .\\REPL[2]:4\n [4] mktempdir(fn::var\"#1#2\", parent::String; prefix::String)\n   @ Base.Filesystem .\\file.jl:729\n [5] mktempdir(fn::Function, parent::String)\n   @ Base.Filesystem .\\file.jl:727\n [6] top-level scope\n   @ REPL[2]:1"}]}]}]},{"client_msg_id":"35ce642b-1082-45ef-816a-5f5db5d136a3","type":"message","text":"Oh, that's why my test is failing?","user":"UDB26738Q","ts":"1612214236.055300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"C==X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, that's why my test is failing?"}]}]}]},{"client_msg_id":"4edca2c0-7399-4a9d-9dfa-912b7a71cd28","type":"message","text":"Possibly; I’m not sure which test you’re referring to","user":"U66GD0880","ts":"1612214258.055700","team":"T68168MUP","edited":{"user":"U66GD0880","ts":"1612214263.000000"},"blocks":[{"type":"rich_text","block_id":"cKl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Possibly; I’m not sure which test you’re referring to"}]}]}],"thread_ts":"1612214258.055700","reply_count":13,"reply_users_count":2,"latest_reply":"1612215616.065900","reply_users":["UDB26738Q","U66GD0880"],"subscribed":false},{"client_msg_id":"44c41b32-751d-4aa8-beb8-8b21d3ddf11d","type":"message","text":"I believe the reason we’re seeing this raise its ugly head now is because we’ve moved more fully over to using `Tar.jl` to extract things, which is using Julia’s native `symlink()` which in turn triggers this issue if there are any relative-directory symlinks.  What’s worse, if the directory you’re trying to create a relative symlink to is in the current directory, it will transparently be converted into an absolute symlink, dodging the issue:\n\n<https://github.com/JuliaLang/julia/blob/master/base/file.jl#L999-L1004>","user":"U66GD0880","ts":"1612214377.057700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3Ym","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I believe the reason we’re seeing this raise its ugly head now is because we’ve moved more fully over to using "},{"type":"text","text":"Tar.jl","style":{"code":true}},{"type":"text","text":" to extract things, which is using Julia’s native "},{"type":"text","text":"symlink()","style":{"code":true}},{"type":"text","text":" which in turn triggers this issue if there are any relative-directory symlinks.  What’s worse, if the directory you’re trying to create a relative symlink to is in the current directory, it will transparently be converted into an absolute symlink, dodging the issue:\n\n"},{"type":"link","url":"https://github.com/JuliaLang/julia/blob/master/base/file.jl#L999-L1004"}]}]}]},{"client_msg_id":"31eef47d-6ad6-4489-91f5-6db76ee6c6d9","type":"message","text":"So I think we need to do one of three things:\n\n* Fix libuv, preferably before 1.6 final\n* Use `mklink /d` instead of `jl_fs_symlink()` on windows\n* Avoid generating symlinks to directories at all","user":"U66GD0880","ts":"1612214447.058700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+kb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So I think we need to do one of three things:\n\n* Fix libuv, preferably before 1.6 final\n* Use "},{"type":"text","text":"mklink /d","style":{"code":true}},{"type":"text","text":" instead of "},{"type":"text","text":"jl_fs_symlink()","style":{"code":true}},{"type":"text","text":" on windows\n* Avoid generating symlinks to directories at all"}]}]}],"thread_ts":"1612214447.058700","reply_count":2,"reply_users_count":2,"latest_reply":"1612220389.068500","reply_users":["U66GD0880","U8MPCDJAY"],"subscribed":false},{"client_msg_id":"97154be3-cb83-4385-a84f-7e29bcbec456","type":"message","text":"I’m in favor of the first option, but I’d like to hear what others have to say","user":"U66GD0880","ts":"1612214465.059300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WNHo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m in favor of the first option, but I’d like to hear what others have to say"}]}]}]},{"client_msg_id":"8ba2909e-7f85-4985-949d-35c33a446bef","type":"message","text":"wouldn’t this only manifest when running as admin? since otherwise Tar.jl should detect that it cannot symlink at all and create copies instead","user":"U6795JH6H","ts":"1612214679.061100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VL3D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"wouldn’t this only manifest when running as admin? since otherwise Tar.jl should detect that it cannot symlink at all and create copies instead"}]}]}],"thread_ts":"1612214679.061100","reply_count":15,"reply_users_count":4,"latest_reply":"1612222754.068900","reply_users":["U66GD0880","U8MPCDJAY","U67D54KS8","U6795JH6H"],"subscribed":false},{"client_msg_id":"8bf30c4b-49c8-4471-b6a1-af8bf6ce3a0d","type":"message","text":"Okay, I think Ian and I have converged to a good fix: <https://github.com/JuliaLang/julia/pull/39491>","user":"U66GD0880","ts":"1612295375.069700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OeBNv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Okay, I think Ian and I have converged to a good fix: "},{"type":"link","url":"https://github.com/JuliaLang/julia/pull/39491"}]}]}],"thread_ts":"1612295375.069700","reply_count":8,"reply_users_count":2,"latest_reply":"1612378954.079900","reply_users":["U8MPCDJAY","U66GD0880"],"subscribed":false,"reactions":[{"name":"+1","users":["U7THT3TM3","U8MPCDJAY"],"count":2}]},{"client_msg_id":"8a43c378-dd11-45d9-9839-008e3b975cb1","type":"message","text":"Mosè and I finally figured out why the BB CI never updated its registry: it’s because if you disable the PkgServer (e.g. `JULIA_PKG_SERVER=\"\"`) which we did to work around things halting a lot back when CI was really unstable in November.  It might be worthwhile having `Pkg` complain that it’s in non-PkgServer mode but the registry isn’t a git repo; right now it silently skips, but I think it should at least warn the user, as if they’ve disabled the PkgServer they probably want to get a git-clone version of their registry as well.","user":"U66GD0880","ts":"1612321138.074300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LnKf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Mosè and I finally figured out why the BB CI never updated its registry: it’s because if you disable the PkgServer (e.g. "},{"type":"text","text":"JULIA_PKG_SERVER=\"\"","style":{"code":true}},{"type":"text","text":") which we did to work around things halting a lot back when CI was really unstable in November.  It might be worthwhile having "},{"type":"text","text":"Pkg","style":{"code":true}},{"type":"text","text":" complain that it’s in non-PkgServer mode but the registry isn’t a git repo; right now it silently skips, but I think it should at least warn the user, as if they’ve disabled the PkgServer they probably want to get a git-clone version of their registry as well."}]}]}],"reactions":[{"name":"+1","users":["UDB26738Q","U6A936746","U7THT3TM3"],"count":3}]},{"client_msg_id":"321fc0c1-3766-4338-8129-2b78763df36a","type":"message","text":"Looks like there are new Pkg bugs (with jll packages?) introduced after the beta","user":"U67SCG4HG","ts":"1612357224.075300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XWbp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looks like there are new Pkg bugs (with jll packages?) introduced after the beta"}]}]}]},{"client_msg_id":"a84ab485-7caa-46c1-aba8-f5958187ebe7","type":"message","text":"In the RC?","user":"U67D54KS8","ts":"1612357239.075500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TKurE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In the RC?"}]}]}]},{"client_msg_id":"ab533c1d-8232-4173-95d4-d425286d1ffd","type":"message","text":"or.. the RC branch?","user":"U67D54KS8","ts":"1612357246.075700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vbcc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"or.. the RC branch?"}]}]}]},{"client_msg_id":"76d0b84c-5522-425d-867c-fa778c8e4285","type":"message","text":"tip of release-1.6","user":"U67SCG4HG","ts":"1612357303.076100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nxHmP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"tip of release-1.6"}]}]}]},{"client_msg_id":"8cc1f824-0202-4df4-b81d-f9cad7f12588","type":"message","text":"what's the bug? any issue?","user":"U67D54KS8","ts":"1612357318.076300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s22o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what's the bug? any issue?"}]}]}]},{"client_msg_id":"db9d599e-04ed-45d5-9609-1cfd0e2b203b","type":"message","text":"Oh, `Zlib_jll` is a stdlib now? Man the number of stdlibs have exploded.","user":"U67SCG4HG","ts":"1612357425.076900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZYIkq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, "},{"type":"text","text":"Zlib_jll","style":{"code":true}},{"type":"text","text":" is a stdlib now? Man the number of stdlibs have exploded."}]}]}],"reactions":[{"name":"boom","users":["UDB26738Q","U67D54KS8","U6A936746","U6795JH6H","U680THK2S","UH108BJB1"],"count":6}]},{"client_msg_id":"a8805b29-4111-435b-a5f1-ba16b41bc656","type":"message","text":"anyway, it shouldn't fail like this:","user":"U67SCG4HG","ts":"1612357431.077100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TPOCS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"anyway, it shouldn't fail like this:"}]}]}]},{"client_msg_id":"ce44913a-1aba-4a40-bae1-9be4c84eae99","type":"message","text":"```$ JULIA_LOAD_PATH=$PWD/Project.toml:@stdlib julia -e 'using Pkg; Pkg.add(\"Zlib_jll\")'\n   Resolving package versions...\n    Updating `/tmp/tmp.bkf5IJvGou/Project.toml`\n  [83775a58] + Zlib_jll\n    Updating `/tmp/tmp.bkf5IJvGou/Manifest.toml`\n  [8f399da3] + Libdl\n  [83775a58] + Zlib_jll\n[fredrik@erebor:/tmp/tmp.bkf5IJvGou]$ JULIA_LOAD_PATH=$PWD/Project.toml julia -e 'using Zlib_jll'\nERROR: ArgumentError: Package Zlib_jll [83775a58-1f1d-513f-b197-d71354ab007a] is required but does not seem to be installed:```","user":"U67SCG4HG","ts":"1612357686.077300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hEbpH","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"$ JULIA_LOAD_PATH=$PWD/Project.toml:@stdlib julia -e 'using Pkg; Pkg.add(\"Zlib_jll\")'\n   Resolving package versions...\n    Updating `/tmp/tmp.bkf5IJvGou/Project.toml`\n  [83775a58] + Zlib_jll\n    Updating `/tmp/tmp.bkf5IJvGou/Manifest.toml`\n  [8f399da3] + Libdl\n  [83775a58] + Zlib_jll\n[fredrik@erebor:/tmp/tmp.bkf5IJvGou]$ JULIA_LOAD_PATH=$PWD/Project.toml julia -e 'using Zlib_jll'\nERROR: ArgumentError: Package Zlib_jll [83775a58-1f1d-513f-b197-d71354ab007a] is required but does not seem to be installed:"}]}]}]},{"client_msg_id":"e95935c5-aba1-4a0d-86b8-22df0fc12c10","type":"message","text":"Doesn't happen with other (non-jll) stdlibs","user":"U67SCG4HG","ts":"1612357863.077600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pGj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Doesn't happen with other (non-jll) stdlibs"}]}]}]},{"client_msg_id":"678427ca-3feb-4677-8d33-7889e39439b9","type":"message","text":"<https://github.com/JuliaLang/julia/issues/39504>","user":"U67SCG4HG","ts":"1612358144.078000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bPcG","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/julia/issues/39504"}]}]}]},{"client_msg_id":"51620620-c550-4099-b227-a2601e2f5168","type":"message","text":"<@U67SCG4HG>: would it be possible to add the “how old is the registry that this is serving” monitoring thing to the status page?","user":"U6795JH6H","ts":"1612383011.080900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NSOI","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U67SCG4HG"},{"type":"text","text":": would it be possible to add the “how old is the registry that this is serving” monitoring thing to the status page?"}]}]}],"thread_ts":"1612383011.080900","reply_count":7,"reply_users_count":3,"latest_reply":"1612383928.082200","reply_users":["U67SCG4HG","U6795JH6H","U66GD0880"],"subscribed":false,"reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"2c887f6f-1d5e-42b7-85e8-46e8d57588dc","type":"message","text":"did Julia v1.5 used to fix permissions of executables in artifacts (something like an automatic `chmod +x`)?","user":"UDB26738Q","ts":"1612549611.083300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z1dB4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"did Julia v1.5 used to fix permissions of executables in artifacts (something like an automatic "},{"type":"text","text":"chmod +x","style":{"code":true}},{"type":"text","text":")?"}]}]}]},{"client_msg_id":"b8f063e5-0547-4c69-92ae-d7d8b7581db9","type":"message","text":"`Plotly.jl` is broken with Julia v1.6 on Windows because their artifact has an executable which isn't executable and they say this is complicated to fix (:shrug:).  the fact is that this used to work before","user":"UDB26738Q","ts":"1612549704.084700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pBr6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Plotly.jl","style":{"code":true}},{"type":"text","text":" is broken with Julia v1.6 on Windows because their artifact has an executable which isn't executable and they say this is complicated to fix ("},{"type":"emoji","name":"shrug"},{"type":"text","text":").  the fact is that this used to work before"}]}]}],"thread_ts":"1612549704.084700","reply_count":4,"reply_users_count":2,"latest_reply":"1612550344.085400","reply_users":["U66GD0880","UDB26738Q"],"subscribed":false},{"client_msg_id":"C3F38D49-1EA7-4CA6-89D7-A5158C8CCBBB","type":"message","text":"For 1.6, should we default to cloning the General registry over Git (assuming that JULIA_PKG_SERVER is not set)? Since we are still having Pkg server/storage server issues that result in people having outdated registries.\n\nWe already do this for Windows, so I'm just suggesting that we do it for all platforms. We can change it in 1.7 or once the outdated registry issue is resolved on the infrastructure side.","user":"U7THT3TM3","ts":"1612569208.089500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JvN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For 1.6, should we default to cloning the General registry over Git (assuming that JULIA_PKG_SERVER is not set)? Since we are still having Pkg server/storage server issues that result in people having outdated registries.\n"},{"type":"text","text":"\n"},{"type":"text","text":"We already do this for Windows, so I'm just suggesting that we do it for all platforms. We can change it in 1.7 or once the outdated registry issue is resolved on the infrastructure side."}]}]}]},{"client_msg_id":"D74C53F4-D0FC-4292-8DD1-7AF570D86353","type":"message","text":"Having the General registry cloned over Git means that if someone wants a version that is registered in General but is not yet available in the Pkg server, the Pkg client falls back to obtaining the package version from GitHub.\n\nIn contrast, if the registry is obtained from the Pkg server, then if the Pkg server is out of date, there is no easy way for the user to get the desired package version.","user":"U7THT3TM3","ts":"1612569406.092300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tLSh=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Having the General registry cloned over Git means that if someone wants a version that is registered in General but is not yet available in the Pkg server, the Pkg client falls back to obtaining the package version from GitHub.\n"},{"type":"text","text":"\n"},{"type":"text","text":"In contrast, if the registry is obtained from the Pkg server, then if the Pkg server is out of date, there is no easy way for the user to get the desired package version."}]}]}]},{"client_msg_id":"99362f60-3914-411f-aacb-3a79a101ffef","type":"message","text":"this is probably a stupid question, but we all agree this needs to be fully resolved before a 1.6 RC right?  Silently missing 48 hours of package updates will be fairly disruptive","user":"U9VG1AYSG","ts":"1612569584.093000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fZHI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is probably a stupid question, but we all agree this needs to be fully resolved before a 1.6 RC right?  Silently missing 48 hours of package updates will be fairly disruptive"}]}]}]},{"client_msg_id":"16134c9d-89d4-44f7-b47c-3c75d2401a7a","type":"message","text":"oh, I was misunderstanding... it seems worse than that, this seems even to be a problem on 1.5, I have CI/CD breaking right now from this","user":"U9VG1AYSG","ts":"1612569717.093500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hyg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, I was misunderstanding... it seems worse than that, this seems even to be a problem on 1.5, I have CI/CD breaking right now from this"}]}]}],"thread_ts":"1612569717.093500","reply_count":25,"reply_users_count":3,"latest_reply":"1612571048.107000","reply_users":["UDB26738Q","U9VG1AYSG","U7THT3TM3"],"subscribed":false},{"client_msg_id":"D756897A-600A-4752-9490-285948EA5D01","type":"message","text":"I've opened this PR to discuss my suggestion above: <https://github.com/JuliaLang/Pkg.jl/pull/2377|https://github.com/JuliaLang/Pkg.jl/pull/2377>","user":"U7THT3TM3","ts":"1612569900.094200","team":"T68168MUP","edited":{"user":"U7THT3TM3","ts":"1612569968.000000"},"blocks":[{"type":"rich_text","block_id":"/h5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I've opened this PR to discuss my suggestion above: "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2377","text":"https://github.com/JuliaLang/Pkg.jl/pull/2377"}]}]}]},{"client_msg_id":"9ae70c55-632c-4ea7-a58c-938b2d0e4d7f","type":"message","text":"it's really weird though, because I was using 1.5 at work all day and had no problems updating.  Guess it was talking to a different server instance","user":"U9VG1AYSG","ts":"1612569943.096200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Nzc8I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's really weird though, because I was using 1.5 at work all day and had no problems updating.  Guess it was talking to a different server instance"}]}]}]},{"client_msg_id":"a56ae5e7-d54a-4bea-8acb-9409ec3d608c","type":"message","text":"The pkg server registry is currently &gt;20 minutes behind github. It would be nice to get <https://github.com/JuliaLang/Pkg.jl/pull/2377> finalized and merged, at least for nightlies","user":"U8MPCDJAY","ts":"1612799709.109900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BvQ5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The pkg server registry is currently >20 minutes behind github. It would be nice to get "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2377"},{"type":"text","text":" finalized and merged, at least for nightlies"}]}]}],"thread_ts":"1612799709.109900","reply_count":2,"reply_users_count":1,"latest_reply":"1612803318.112000","reply_users":["U8MPCDJAY"],"subscribed":false},{"client_msg_id":"15a32d9c-ca69-4708-a525-e46b2d76b1d7","type":"message","text":"related to that, how hard is to implement this check: <https://julialang.slack.com/archives/CBF3Z1D7V/p1612321138074300>?  it's really confusing trying to update a registry that can't possibly be updated","user":"UDB26738Q","ts":"1612800526.110500","team":"T68168MUP","attachments":[{"from_url":"https://julialang.slack.com/archives/CBF3Z1D7V/p1612321138074300","fallback":"[February 2nd, 2021 6:58 PM] staticfloat: Mosè and I finally figured out why the BB CI never updated its registry: it’s because if you disable the PkgServer (e.g. `JULIA_PKG_SERVER=\"\"`) which we did to work around things halting a lot back when CI was really unstable in November.  It might be worthwhile having `Pkg` complain that it’s in non-PkgServer mode but the registry isn’t a git repo; right now it silently skips, but I think it should at least warn the user, as if they’ve disabled the PkgServer they probably want to get a git-clone version of their registry as well.","ts":"1612321138.074300","author_id":"U66GD0880","author_subname":"Elliot Saba","channel_id":"CBF3Z1D7V","channel_name":"pkg-dev","is_msg_unfurl":true,"text":"Mosè and I finally figured out why the BB CI never updated its registry: it’s because if you disable the PkgServer (e.g. `JULIA_PKG_SERVER=\"\"`) which we did to work around things halting a lot back when CI was really unstable in November.  It might be worthwhile having `Pkg` complain that it’s in non-PkgServer mode but the registry isn’t a git repo; right now it silently skips, but I think it should at least warn the user, as if they’ve disabled the PkgServer they probably want to get a git-clone version of their registry as well.","author_name":"Elliot Saba","author_link":"https://julialang.slack.com/team/U66GD0880","author_icon":"https://secure.gravatar.com/avatar/002ccfd8ee9e135f0dfb5650c292052d.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-48.png","mrkdwn_in":["text"],"id":1,"original_url":"https://julialang.slack.com/archives/CBF3Z1D7V/p1612321138074300","footer":"Posted in #pkg-dev"}],"blocks":[{"type":"rich_text","block_id":"nOU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"related to that, how hard is to implement this check: "},{"type":"link","url":"https://julialang.slack.com/archives/CBF3Z1D7V/p1612321138074300"},{"type":"text","text":"?  it's really confusing trying to update a registry that can't possibly be updated"}]}]}]},{"client_msg_id":"352b9e9e-c68a-42d3-a62c-226f904248e9","type":"message","text":"(or is that what the PR already does?)","user":"UDB26738Q","ts":"1612800555.110900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h0N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(or is that what the PR already does?)"}]}]}]},{"client_msg_id":"5229277f-d037-4ebd-85a7-995b9e994330","type":"message","text":"(reading the code and the further comments, I think the warning is already there?)","user":"UDB26738Q","ts":"1612801539.111300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"50da0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(reading the code and the further comments, I think the warning is already there?)"}]}]}],"thread_ts":"1612801539.111300","reply_count":1,"reply_users_count":1,"latest_reply":"1612802832.111700","reply_users":["U8MPCDJAY"],"subscribed":false},{"client_msg_id":"CD19F092-3CE0-4AD4-A1D1-F692EBF6F7B7","type":"message","text":"Yeah if you set `JULIA_PKG_SERVER` to `\"\"` but you still have a Pkg server registry, my PR will print a warning","user":"U7THT3TM3","ts":"1612807200.113900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7c7U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah if you set "},{"type":"text","text":"JULIA_PKG_SERVER","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"\"\"","style":{"code":true}},{"type":"text","text":" but you still have a Pkg server registry, my PR will print a warning"}]}]}]},{"client_msg_id":"2C99ADAA-B4A4-4501-8CD5-F26061B939C2","type":"message","text":"It's worth noting that it is just a warning. It's not an error.","user":"U7THT3TM3","ts":"1612811992.114700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eYMd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's worth noting that it is just a warning. It's not an error."}]}]}]},{"client_msg_id":"0A6327A3-827B-429B-BF7A-468B0ED3A5A7","type":"message","text":"So in an automated script, you wouldn't notice it unless you looked at the logs.","user":"U7THT3TM3","ts":"1612812041.115500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=lbgG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So in an automated script, you wouldn't notice it unless you looked at the logs."}]}]}],"thread_ts":"1612812041.115500","reply_count":1,"reply_users_count":1,"latest_reply":"1612812085.115600","reply_users":["UDB26738Q"],"subscribed":false},{"client_msg_id":"d4cb1057-80ba-458b-ad1b-f3af2f4537de","type":"message","text":"what's the process if I have an automerge to general registry that was blocked?  Am I supposed to do anything, or is some human being supposed to come along and merge it evenutally?","user":"U9VG1AYSG","ts":"1612830262.116700","team":"T68168MUP","edited":{"user":"U9VG1AYSG","ts":"1612830273.000000"},"blocks":[{"type":"rich_text","block_id":"+KHkB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what's the process if I have an automerge to general registry that was blocked?  Am I supposed to do anything, or is some human being supposed to come along and merge it evenutally?"}]}]}],"thread_ts":"1612830262.116700","reply_count":4,"reply_users_count":3,"latest_reply":"1612830789.117700","reply_users":["UDB26738Q","U9VG1AYSG","UM30MT6RF"],"subscribed":false},{"client_msg_id":"f855c588-7208-458a-8af6-154f0e54b7db","type":"message","text":"<https://twitter.com/lpfeed/status/1359519523234283521?s=19|https://twitter.com/lpfeed/status/1359519523234283521?s=19>","user":"UDGT4PM41","ts":"1612971227.118600","team":"T68168MUP","attachments":[{"fallback":"<https://twitter.com/lpfeed|@lpfeed>: Large class of vulnerabilities found in build and package management systems:\n\n<https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610>\n\nSeems that Julia’s package system could be similarly vulnerable.\n\n#JuliaLang #opsec","ts":1612969687,"author_name":"Lee Phillips","author_link":"https://twitter.com/lpfeed/status/1359519523234283521","author_icon":"https://pbs.twimg.com/profile_images/988784165498839040/5fivrT82_normal.jpg","author_subname":"@lpfeed","text":"Large class of vulnerabilities found in build and package management systems:\n\n<https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610>\n\nSeems that Julia’s package system could be similarly vulnerable.\n\n#JuliaLang #opsec","service_name":"twitter","service_url":"https://twitter.com/","from_url":"https://twitter.com/lpfeed/status/1359519523234283521?s=19","id":1,"original_url":"https://twitter.com/lpfeed/status/1359519523234283521?s=19","footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png"}],"blocks":[{"type":"rich_text","block_id":"z6Ka+","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://twitter.com/lpfeed/status/1359519523234283521?s=19","text":"https://twitter.com/lpfeed/status/1359519523234283521?s=19"}]}]}]},{"client_msg_id":"A71B5EBB-B991-4BFC-8A64-1B9A446DB97B","type":"message","text":"Yeah see the discussion in <#CED4U82BC|pkg-trust> ","user":"U7THT3TM3","ts":"1612972048.119100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7toke","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah see the discussion in "},{"type":"channel","channel_id":"CED4U82BC"},{"type":"text","text":" "}]}]}]},{"client_msg_id":"F2F0140B-457E-4A49-A546-74ABB22D74E3","type":"message","text":"And the issue that resulted from the discussion: <https://github.com/JuliaLang/Pkg.jl/issues/2393|https://github.com/JuliaLang/Pkg.jl/issues/2393>","user":"U7THT3TM3","ts":"1612972077.119700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+tbR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And the issue that resulted from the discussion: "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/issues/2393","text":"https://github.com/JuliaLang/Pkg.jl/issues/2393"}]}]}]},{"client_msg_id":"bfabb983-c259-40a2-93a3-313223292c98","type":"message","text":"When doing `pkg&gt; test Gadfly` with *Julia 1.5*, it outputs the following error but then successfully completes all tests:\n```    Testing Gadfly\n┌ Error: Pkg.Resolve.ResolverError(\"Unsatisfiable requirements detected for package DataFrames [a93c6f00]:\\n DataFrames [a93c6f00] log:\\n ├─possible versions are: [0.11.7, 0.12.0, 0.13.0-0.13.1, 0.14.0-0.14.1, 0.15.0-0.15.2, 0.16.0, 0.17.0-0.17.1, 0.18.0-0.18.4, 0.19.0-0.19.4, 0.20.0-0.20.2, 0.21.0-0.21.8, 0.22.0-0.22.5] or uninstalled\\n ├─restricted to versions 0.21 by an explicit requirement, leaving only versions 0.21.0-0.21.8\\n └─restricted by compatibility requirements with Reexport [189a3867] to versions: 0.22.3-0.22.5 or uninstalled — no versions left\\n   └─Reexport [189a3867] log:\\n     ├─possible versions are: [0.2.0, 1.0.0] or uninstalled\\n     └─restricted to versions 1.0.0 by an explicit requirement, leaving only versions 1.0.0\", nothing)\n└ @ Pkg.Operations /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v1.5/Pkg/src/Operations.jl:1427```\nWith *Julia 1.6* it outputs the following warning and also successfully completes all test:\n```     Testing Gadfly\n┌ Warning: Could not use exact versions of packages in manifest, re-resolving```\nDo I  interpret this right that already in Julia 1.5, the Pkg manager does a *re-resolving* and everything is fine - only instead of the error message, we should have a warning as it seems implemented in Julia 1.6?\nThanks for confirming as I am currently revising our stacked environment setup and would like to be sure to understand what is happening here!","user":"UMCPULMA7","ts":"1613055897.128900","team":"T68168MUP","edited":{"user":"UMCPULMA7","ts":"1613056066.000000"},"blocks":[{"type":"rich_text","block_id":"UDr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When doing "},{"type":"text","text":"pkg> test Gadfly","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"Julia 1.5","style":{"bold":true}},{"type":"text","text":", it outputs the following error but then successfully completes all tests:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"    Testing Gadfly\n┌ Error: Pkg.Resolve.ResolverError(\"Unsatisfiable requirements detected for package DataFrames [a93c6f00]:\\n DataFrames [a93c6f00] log:\\n ├─possible versions are: [0.11.7, 0.12.0, 0.13.0-0.13.1, 0.14.0-0.14.1, 0.15.0-0.15.2, 0.16.0, 0.17.0-0.17.1, 0.18.0-0.18.4, 0.19.0-0.19.4, 0.20.0-0.20.2, 0.21.0-0.21.8, 0.22.0-0.22.5] or uninstalled\\n ├─restricted to versions 0.21 by an explicit requirement, leaving only versions 0.21.0-0.21.8\\n └─restricted by compatibility requirements with Reexport [189a3867] to versions: 0.22.3-0.22.5 or uninstalled — no versions left\\n   └─Reexport [189a3867] log:\\n     ├─possible versions are: [0.2.0, 1.0.0] or uninstalled\\n     └─restricted to versions 1.0.0 by an explicit requirement, leaving only versions 1.0.0\", nothing)\n└ @ Pkg.Operations /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v1.5/Pkg/src/Operations.jl:1427"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"With "},{"type":"text","text":"Julia 1.6","style":{"bold":true}},{"type":"text","text":" it outputs the following warning and also successfully completes all test:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"     Testing Gadfly\n┌ Warning: Could not use exact versions of packages in manifest, re-resolving"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Do I  interpret this right that already in Julia 1.5, the Pkg manager does a"},{"type":"text","text":" re-resolving","style":{"bold":true}},{"type":"text","text":" and everything is fine - only instead of the error message, we should have a warning as it seems implemented in Julia 1.6?\nThanks for confirming as I am currently revising our stacked environment setup and would like to be sure to understand what is happening here!"}]}]}]},{"client_msg_id":"9c074071-5dc6-43a1-996a-0fe4b9952b1a","type":"message","text":"It means that the test specific dependencies are not compatible with the manifest Pkg generates without them so it needs to re-resolve.","user":"U67D54KS8","ts":"1613060188.130000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gII7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It means that the test specific dependencies are not compatible with the manifest Pkg generates without them so it needs to re-resolve."}]}]}]},{"client_msg_id":"433afe20-1d5e-45cd-9222-c5fb08828269","type":"message","text":"thanks for the reply <@U67D54KS8>!","user":"UMCPULMA7","ts":"1613061908.132600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p+=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks for the reply "},{"type":"user","user_id":"U67D54KS8"},{"type":"text","text":"!"}]}]}]},{"client_msg_id":"a66873fd-2f59-438a-9821-60af54822cb7","type":"message","text":"&gt; It means that the test specific dependencies are not compatible with the manifest Pkg generates without them so it needs to re-resolve.\nAre you referring to the error message obtained with Julia 1.5 ( `Error: Pkg.Resolve.ResolverError(...` ) ? So, did I conclude right that this error message means that it had to do a re-resolve and it is no big deal?","user":"UMCPULMA7","ts":"1613061939.132900","team":"T68168MUP","edited":{"user":"UMCPULMA7","ts":"1613062347.000000"},"blocks":[{"type":"rich_text","block_id":"K75GA","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"It means that the test specific dependencies are not compatible with the manifest Pkg generates without them so it needs to re-resolve."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Are you referring to the error message obtained with Julia 1.5 ( "},{"type":"text","text":"Error: Pkg.Resolve.ResolverError(...","style":{"code":true}},{"type":"text","text":" ) ? So, did I conclude right that this error message means that it had to do a re-resolve and it is no big deal?"}]}]}]},{"client_msg_id":"5bcfd673-57d9-4670-8cec-b430a4721701","type":"message","text":"Yes, that's why on 1.6 it was made less alarming","user":"U67D54KS8","ts":"1613066260.133500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5=+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, that's why on 1.6 it was made less alarming"}]}]}],"reactions":[{"name":"rotating_light","users":["U680THK2S"],"count":1},{"name":"loud_sound","users":["U680THK2S"],"count":1}]},{"client_msg_id":"2631fbd7-7d75-4fa2-811c-b6f19769fe00","type":"message","text":"OK, great, then it is all good and all clear. Thanks!","user":"UMCPULMA7","ts":"1613067903.134300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ef31C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK, great, then it is all good and all clear. Thanks!"}]}]}]},{"client_msg_id":"afd096ec-aa3a-414a-b684-2e9673d27c67","type":"message","text":"I know there was some docs or a blog post or something that explained how a PkgServer and the storage servers work and interact.","user":"U6A936746","ts":"1613226255.135900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GXIhi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I know there was some docs or a blog post or something that explained how a PkgServer and the storage servers work and interact."}]}]}],"thread_ts":"1613226255.135900","reply_count":1,"reply_users_count":1,"latest_reply":"1613226274.136000","reply_users":["U6A936746"],"subscribed":false},{"client_msg_id":"62965940-4bef-4cbb-a684-55dad64fabb7","type":"message","text":"I'm trying to play with caching the registry in GitHub Actions, especially on Windows, but the cache is a tarball, so now instead of julia taking forever to clone the repository I have GitHub taking forever to unpack a tarball on Windows.  looks like a good trade-off","user":"UDB26738Q","ts":"1613434894.138400","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1613434972.000000"},"blocks":[{"type":"rich_text","block_id":"=5c=s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm trying to play with caching the registry in GitHub Actions, especially on Windows, but the cache is a tarball, so now instead of julia taking forever to clone the repository I have GitHub taking forever to unpack a tarball on Windows.  looks like a good trade-off"}]}]}]},{"client_msg_id":"36D705AF-3945-4505-BDEB-9F95B48CE0F1","type":"message","text":"Is there an efficient way to check if a Manifest.toml is a valid resolve of a given Project.toml? It seems Pkg precomp can get confused when a checked-in manifest has diverged from the Project. Re-resolving isn’t an option as we want to respect the checked in manifest\n\nSee thread <https://julialang.slack.com/archives/C6A044SQH/p1613403740352000|https://julialang.slack.com/archives/C6A044SQH/p1613403740352000>","user":"U8MPCDJAY","ts":"1613444304.141000","team":"T68168MUP","attachments":[{"from_url":"https://julialang.slack.com/archives/C6A044SQH/p1613403740352000","fallback":"[February 15th, 2021 7:42 AM] jacobszelko: Loving 1.6 rc so far, but question: should I be able to see _what_ dependencies errored here?","ts":"1613403740.352000","author_id":"US64J0NPQ","author_subname":"Jacob Zelko","channel_id":"C6A044SQH","channel_name":"helpdesk","is_msg_unfurl":true,"is_thread_root_unfurl":true,"text":"Loving 1.6 rc so far, but question: should I be able to see _what_ dependencies errored here?","author_name":"Jacob Zelko","author_link":"https://julialang.slack.com/team/US64J0NPQ","author_icon":"https://avatars.slack-edge.com/2020-08-19/1335070787968_c2d19b436f7207704a90_48.png","mrkdwn_in":["text"],"files":[{"id":"F01NUTMDNP2","created":1613403734,"timestamp":1613403734,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"US64J0NPQ","editable":false,"size":27057,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01NUTMDNP2/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01NUTMDNP2/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01NUTMDNP2-9e365f8b68/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01NUTMDNP2-9e365f8b68/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01NUTMDNP2-9e365f8b68/image_360.png","thumb_360_w":360,"thumb_360_h":88,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01NUTMDNP2-9e365f8b68/image_480.png","thumb_480_w":480,"thumb_480_h":117,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01NUTMDNP2-9e365f8b68/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01NUTMDNP2-9e365f8b68/image_720.png","thumb_720_w":720,"thumb_720_h":176,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01NUTMDNP2-9e365f8b68/image_800.png","thumb_800_w":800,"thumb_800_h":195,"original_w":819,"original_h":200,"thumb_tiny":"AwALADCpg0EcdqcAM01gNx+tACfgKPwFGBRgUAGPpSYxS4FGBQB//9k=","permalink":"https://julialang.slack.com/files/US64J0NPQ/F01NUTMDNP2/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01NUTMDNP2-bd727ecf76","has_rich_preview":false}],"id":1,"original_url":"https://julialang.slack.com/archives/C6A044SQH/p1613403740352000","footer":"Thread in #helpdesk"}],"blocks":[{"type":"rich_text","block_id":"nLlk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there an efficient way to check if a Manifest.toml is a valid resolve of a given Project.toml? It seems Pkg precomp can get confused when a checked-in manifest has diverged from the Project. Re-resolving isn’t an option as we want to respect the checked in manifest\n\nSee thread "},{"type":"link","url":"https://julialang.slack.com/archives/C6A044SQH/p1613403740352000","text":"https://julialang.slack.com/archives/C6A044SQH/p1613403740352000"}]}]}]},{"client_msg_id":"DF35B90B-14FF-4757-899B-500574258E3B","type":"message","text":"I can’t figure out an automatic way to avoid this..","user":"U8MPCDJAY","ts":"1613444321.141800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jxj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can’t figure out an automatic way to avoid this.."}]}]}]},{"client_msg_id":"0c6e0fed-27d8-4304-879e-eb4e519cca1a","type":"message","text":"We used to have a “preview” mode where `resolve()` wouldn’t write anything out","user":"U66GD0880","ts":"1613495253.142600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DCx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We used to have a “preview” mode where "},{"type":"text","text":"resolve()","style":{"code":true}},{"type":"text","text":" wouldn’t write anything out"}]}]}]},{"client_msg_id":"2a9560a7-9a76-4ec2-99dd-16d32859f03b","type":"message","text":"do we not have that anymore?","user":"U66GD0880","ts":"1613495256.142900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fYq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"do we not have that anymore?"}]}]}]},{"client_msg_id":"a74d7967-6fe7-4efe-8011-363775742b70","type":"message","text":"Nope, we have `undo` and `redo` instead","user":"U67D54KS8","ts":"1613495272.143100","team":"T68168MUP","edited":{"user":"U67D54KS8","ts":"1613495282.000000"},"blocks":[{"type":"rich_text","block_id":"lC/W","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nope, we have "},{"type":"text","text":"undo","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"redo","style":{"code":true}},{"type":"text","text":" instead"}]}]}]},{"client_msg_id":"2b8f0d9d-066c-4145-a2a7-5b17a2c255b5","type":"message","text":"Perhaps a nice-to-have would be a field in the Manifest.toml for the hash of the Project.toml that it was resolved from","user":"U8MPCDJAY","ts":"1613497445.144100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tjVGL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Perhaps a nice-to-have would be a field in the Manifest.toml for the hash of the Project.toml that it was resolved from"}]}]}]},{"client_msg_id":"833935e3-c5eb-4401-95e3-86ea94fe6d15","type":"message","text":"Adding fields to the manifest is blocked until 2.0, right?","user":"U8MPCDJAY","ts":"1613512486.144600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VWb9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Adding fields to the manifest is blocked until 2.0, right?"}]}]}]},{"client_msg_id":"9323fb8b-87be-496a-b495-3b8ff067de23","type":"message","text":"Don't think so","user":"U67D54KS8","ts":"1613515553.144900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5=y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Don't think so"}]}]}]},{"client_msg_id":"040c55c1-db78-4e5a-bf38-8686ea2bd5c0","type":"message","text":"oh, I thought that was the reason we don’t put the julia version number in the manifest yet","user":"U8MPCDJAY","ts":"1613517999.145400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vBs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, I thought that was the reason we don’t put the julia version number in the manifest yet"}]}]}]},{"client_msg_id":"024a69b2-fdf2-43a3-99a0-365eff04663f","type":"message","text":"I miss preview.\nIt could tell me how much space `gc` would free.","user":"U6A936746","ts":"1613527017.146900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ScXFA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I miss preview.\nIt could tell me how much space "},{"type":"text","text":"gc ","style":{"code":true}},{"type":"text","text":"would free."}]}]}]},{"client_msg_id":"cbe8ef7f-2e14-4106-be46-1538c49f22bd","type":"message","text":"But `gc` itself does that? If the time to take out the garbage is the same as checking how much garbage you have, might a well take it out?","user":"U67D54KS8","ts":"1613547544.150300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+gSeQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But "},{"type":"text","text":"gc","style":{"code":true}},{"type":"text","text":" itself does that? If the time to take out the garbage is the same as checking how much garbage you have, might a well take it out?"}]}]}]},{"client_msg_id":"b7f13435-5b6e-4498-9fc9-15f04e2935c8","type":"message","text":"Not necessarily. If there is not too much garbage I likely want to keep it. Because odds are high (relative to cost of hard drive) that I will install those versions of those packages again.\n(And in the before times I used Julia on a train and plane often)","user":"U6A936746","ts":"1613556973.153300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UZcR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not necessarily. If there is not too much garbage I likely want to keep it. Because odds are high (relative to cost of hard drive) that I will install those versions of those packages again.\n(And in the before times I used Julia on a train and plane often)"}]}]}]},{"client_msg_id":"e3f16ab7-8cec-4148-ae88-818974fdce78","type":"message","text":"This is why default `gc` doesn’t clear _everything_; objects have a lifetime unless you run `pkg&gt; gc --all`","user":"U66GD0880","ts":"1613582139.154200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PtN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This is why default "},{"type":"text","text":"gc","style":{"code":true}},{"type":"text","text":" doesn’t clear "},{"type":"text","text":"everything","style":{"italic":true}},{"type":"text","text":"; objects have a lifetime unless you run "},{"type":"text","text":"pkg> gc --all","style":{"code":true}}]}]}]},{"client_msg_id":"b2282046-979d-4593-8316-de38bb17715e","type":"message","text":"Is `pkg&gt; gc --all` different from `using Pkg, Dates; Pkg.gc(collect_delay=Second(0))`?","user":"U680THK2S","ts":"1613586529.155200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hAb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is "},{"type":"text","text":"pkg> gc --all","style":{"code":true}},{"type":"text","text":" different from "},{"type":"text","text":"using Pkg, Dates; Pkg.gc(collect_delay=Second(0))","style":{"code":true}},{"type":"text","text":"?"}]}]}]},{"client_msg_id":"4FC98737-BDE7-4C03-83C2-AD35F41990CA","type":"message","text":"Nope.","user":"U7THT3TM3","ts":"1613586610.155400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2=NR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nope."}]}]}],"reactions":[{"name":"+1","users":["U680THK2S"],"count":1}]},{"client_msg_id":"9C48BB4C-8F90-4033-A8FB-6A150F39EC08","type":"message","text":"<https://github.com/JuliaLang/Pkg.jl/blob/8cbd11723f27ce2feef229aaf944924ab355d864/src/REPLMode/command_declarations.jl#L359|https://github.com/JuliaLang/Pkg.jl/blob/8cbd11723f27ce2feef229aaf944924ab355d864/src/REPLMode/command_declarations.jl#L359>","user":"U7THT3TM3","ts":"1613586611.155600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ChBUH","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/blob/8cbd11723f27ce2feef229aaf944924ab355d864/src/REPLMode/command_declarations.jl#L359","text":"https://github.com/JuliaLang/Pkg.jl/blob/8cbd11723f27ce2feef229aaf944924ab355d864/src/REPLMode/command_declarations.jl#L359"}]}]}]},{"client_msg_id":"ee67d588-8938-49d9-986d-76a1bc5ad50b","type":"message","text":"Is there a recommended way to add/remove dependencies to a test environment without downloading or precompiling anything, just to get the resolved versions?","user":"UUTL3EKN3","ts":"1614192091.002700","team":"T68168MUP","edited":{"user":"UUTL3EKN3","ts":"1614192113.000000"},"blocks":[{"type":"rich_text","block_id":"tSN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a recommended way to add/remove dependencies to a test environment without downloading or precompiling anything, just to get the resolved versions?"}]}]}]},{"client_msg_id":"4b81f8ce-b918-4fd3-8679-2358201ff4a1","type":"message","text":"(and is this the right channel to ask this type of question? :relaxed:)","user":"UUTL3EKN3","ts":"1614192189.003000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1QD4q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(and is this the right channel to ask this type of question? "},{"type":"emoji","name":"relaxed"},{"type":"text","text":")"}]}]}],"reactions":[{"name":"+1","users":["U66GD0880"],"count":1}]},{"client_msg_id":"8e2c71a5-bea8-46d8-9d19-5fdbe43acf07","type":"message","text":"Not right now, but we should refractor things so that is possible","user":"U67D54KS8","ts":"1614196110.005700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MJr9j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not right now, but we should refractor things so that is possible"}]}]}]},{"client_msg_id":"362b3305-79b1-44bc-b72c-1bbecd4822e5","type":"message","text":"How big is the registry download? While I’m very excited for the recent debugging developments in <https://github.com/JuliaLang/Downloads.jl/issues/99#issuecomment-785931186>, I’m also a bit puzzled why it’s not possible to download the registry within the time limit.","user":"U680T6770","ts":"1614329343.007600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ykF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How big is the registry download? While I’m very excited for the recent debugging developments in "},{"type":"link","url":"https://github.com/JuliaLang/Downloads.jl/issues/99#issuecomment-785931186"},{"type":"text","text":", I’m also a bit puzzled why it’s not possible to download the registry within the time limit."}]}]}],"thread_ts":"1614329343.007600","reply_count":9,"reply_users_count":2,"latest_reply":"1614331195.009300","reply_users":["U67SCG4HG","U680T6770"],"subscribed":false},{"client_msg_id":"775CFEBA-CE42-4CD0-A03F-0F862F7C2438","type":"message","text":"So, on the master branch of Pkg.jl, the version number is `1.5.0`. Is that problematic? Is that version number used for anything?","user":"U7THT3TM3","ts":"1614626157.013300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vgEIc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So, on the master branch of Pkg.jl, the version number is "},{"type":"text","text":"1.5.0","style":{"code":true}},{"type":"text","text":". Is that problematic? Is that version number used for anything?"}]}]}]},{"client_msg_id":"b7eddd44-13e2-409b-b504-2959a67b90cf","type":"message","text":"no","user":"U67SCG4HG","ts":"1614626671.013500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"alGvv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no"}]}]}],"reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"034C664E-8BBA-4FD9-B4A9-CE6F15C80BA6","type":"message","text":"Could we just remove the `version` field from the Pkg.jl `Project.toml` file?","user":"U7THT3TM3","ts":"1614626866.014500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V/vv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could we just remove the "},{"type":"text","text":"version","style":{"code":true}},{"type":"text","text":" field from the Pkg.jl "},{"type":"text","text":"Project.toml","style":{"code":true}},{"type":"text","text":" file?"}]}]}]},{"client_msg_id":"9A9849D9-6242-450B-A617-717B7A95A3C7","type":"message","text":"Can we have a Pkg call tomorrow to discuss the AutoMerge license check, including the proposed `license` field in the `Project.toml` file? PR for context: <https://github.com/JuliaRegistries/RegistryCI.jl/pull/344|https://github.com/JuliaRegistries/RegistryCI.jl/pull/344>\n\nA call might be a better way than GitHub to hash this out and come to a final decision. \n\nI know that Stefan can't make it, but are others able to join? It would be tomorrow at 2pm Eastern Time, I believe.","user":"U7THT3TM3","ts":"1614641440.017700","team":"T68168MUP","edited":{"user":"U7THT3TM3","ts":"1614641665.000000"},"blocks":[{"type":"rich_text","block_id":"Qnsn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can we have a Pkg call tomorrow to discuss the AutoMerge license check, including the proposed "},{"type":"text","text":"license","style":{"code":true}},{"type":"text","text":" field in the "},{"type":"text","text":"Project.toml","style":{"code":true}},{"type":"text","text":" file? PR for context: "},{"type":"link","url":"https://github.com/JuliaRegistries/RegistryCI.jl/pull/344","text":"https://github.com/JuliaRegistries/RegistryCI.jl/pull/344"},{"type":"text","text":"\n\nA call might be a better way than GitHub to hash this out and come to a final decision. \n\nI know that Stefan can't make it, but are others able to join? It would be tomorrow at 2pm Eastern Time, I believe."}]}]}]},{"client_msg_id":"E0F24E4B-17EF-4CCE-AEA9-A202F9AE8B83","type":"message","text":"<@UCZ7VBGUD> I believe you said you can probably join?","user":"U7THT3TM3","ts":"1614642853.018200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QN6","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UCZ7VBGUD"},{"type":"text","text":" I believe you said you can probably join?"}]}]}],"reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"9FEC60F6-6FBB-4FE4-9B90-7E1DF9F01C4A","type":"message","text":"<@U67SCG4HG> <@U6A936746> <@U67D54KS8> would you be available?","user":"U7THT3TM3","ts":"1614642885.018800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MwRO","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U67SCG4HG"},{"type":"text","text":" "},{"type":"user","user_id":"U6A936746"},{"type":"text","text":" "},{"type":"user","user_id":"U67D54KS8"},{"type":"text","text":" would you be available?"}]}]}]},{"client_msg_id":"38bdf6e2-4598-483e-adcd-dff628ec57ce","type":"message","text":"Not interested","user":"U6A936746","ts":"1614642914.019400","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1614643039.000000"},"blocks":[{"type":"rich_text","block_id":"eFFY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not interested"}]}]}]},{"client_msg_id":"aec77133-d3bf-4443-a346-1c39ed4b1bc6","type":"message","text":"Go on without me","user":"U6A936746","ts":"1614642920.019700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/rlIU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Go on without me"}]}]}]},{"client_msg_id":"0c3d7cc6-88eb-4691-8d46-f4a8bcd86f22","type":"message","text":"I have said my piece.\nI have nothing to add.\nI don't care enough to defend it more.\nThe current proposal isn't my fav, but I don't loath it.\nIt's decent\n\nI have unsubscribed from that issue like 5 times.\n:slightly_smiling_face:","user":"U6A936746","ts":"1614643031.022400","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1614643065.000000"},"blocks":[{"type":"rich_text","block_id":"dzQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have said my piece.\nI have nothing to add.\nI don't care enough to defend it more.\nThe current proposal isn't my fav, but I don't loath it.\nIt's decent\n\nI have unsubscribed from that issue like 5 times.\n"},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"cad969ec-bd9e-4eaa-ba0c-2fae6119e111","type":"message","text":"I think it would be good to make sure whoever needs to do manual merging have a say. I think that’s those you tagged Dilum, plus yourself, <@UDB26738Q>, and any others? The reason being that adding a new check means whoever is doing manual triage has more work.\n\nI think the requirement to have an OSI license itself is uncontroversial I believe, so it comes down to the implementation and the tradeoff between strict enforcement and manual work for maintainers and registrees and what’s the best way to strike a balance there. (I think registrees are actually a stakeholder here too, so we could consider soliciting feedback on discourse, although that might not yield a super productive thread)","user":"UCZ7VBGUD","ts":"1614643513.027900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oDC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think it would be good to make sure whoever needs to do manual merging have a say. I think that’s those you tagged Dilum, plus yourself, "},{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":", and any others? The reason being that adding a new check means whoever is doing manual triage has more work.\n\nI think the requirement to have an OSI license itself is uncontroversial I believe, so it comes down to the implementation and the tradeoff between strict enforcement and manual work for maintainers and registrees and what’s the best way to strike a balance there. (I think registrees are actually a stakeholder here too, so we could consider soliciting feedback on discourse, although that might not yield a super productive thread)"}]}]}],"thread_ts":"1614643513.027900","reply_count":1,"reply_users_count":1,"latest_reply":"1614644846.029000","reply_users":["U7THT3TM3"],"subscribed":false,"reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"E82FC2B8-1BE2-4D4D-89EB-DC1C35A08AB2","type":"message","text":"I also think that we all agree that some kind of override mechanism is necessary for registrees whose packages fail the license autodetection.\n\nWe just disagree on the specific details of what that override mechanism should look like, which is what I'd like to discuss in the call.","user":"U7THT3TM3","ts":"1614644934.031600","team":"T68168MUP","edited":{"user":"U7THT3TM3","ts":"1614644937.000000"},"blocks":[{"type":"rich_text","block_id":"3Rtis","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I also think that we all agree that some kind of override mechanism is necessary for registrees whose packages fail the license autodetection.\n\nWe just disagree on the specific details of what that override mechanism should look like, which is what I'd like to discuss in the call."}]}]}]},{"client_msg_id":"FB764004-A4CC-4531-957D-C2C6F746878A","type":"message","text":"But I think big picture we agree that some kind of override is needed.","user":"U7THT3TM3","ts":"1614644952.032200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tdH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But I think big picture we agree that some kind of override is needed."}]}]}]},{"client_msg_id":"ceeee4bf-8111-449c-b21e-7064e3be6dcb","type":"message","text":"Hi all, I'm seeing strange runtime performance from running the Pkg tests versus just running directly in REPL/in a script. My `runtests.jl` file essentially just contains a call to an ODE solver (i.e. `solve(someODEProblem, someSolver)` ) which I'm timing using `@elapsed` and just printing that:\n\n```&gt;&gt; julia --project=. --check-bounds=yes test/runtests.jl\n[ Info: Running solve() took 0.0047697 seconds\n\n&gt;&gt; julia --project=. --check-bounds=yes -e \"using Pkg; Pkg.test()\"\n[ Info: Running solve() took 40.930306 seconds```\nI'm seeing this same behaviour even if using BenchmarkTools' `@benchmark` and running the solve at least once before to compile it.\n\nDoes anyone have any insights into why I'm seeing such a huge difference in performance between Pkg.test and just running a script?","user":"U013L06JN15","ts":"1614691523.037400","team":"T68168MUP","edited":{"user":"U013L06JN15","ts":"1614691725.000000"},"blocks":[{"type":"rich_text","block_id":"Hv8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi all, I'm seeing strange runtime performance from running the Pkg tests versus just running directly in REPL/in a script. My "},{"type":"text","text":"runtests.jl","style":{"code":true}},{"type":"text","text":" file essentially just contains a call to an ODE solver (i.e. "},{"type":"text","text":"solve(someODEProblem, someSolver)","style":{"code":true}},{"type":"text","text":" ) which I'm timing using "},{"type":"text","text":"@elapsed","style":{"code":true}},{"type":"text","text":" and just printing that:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":">> julia --project=. --check-bounds=yes test/runtests.jl\n[ Info: Running solve() took 0.0047697 seconds\n\n>> julia --project=. --check-bounds=yes -e \"using Pkg; Pkg.test()\"\n[ Info: Running solve() took 40.930306 seconds"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI'm seeing this same behaviour even if using BenchmarkTools' "},{"type":"text","text":"@benchmark","style":{"code":true}},{"type":"text","text":" and running the solve at least once before to compile it.\n\nDoes anyone have any insights into why I'm seeing such a huge difference in performance between Pkg.test and just running a script?"}]}]}]},{"client_msg_id":"7DA72A60-3CFA-49B9-A289-63B1C80239E7","type":"message","text":"`Pkg.test()` also enables code coverage generation","user":"U8MPCDJAY","ts":"1614691654.038200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dajt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Pkg.test()","style":{"code":true}},{"type":"text","text":" also enables code coverage generation"}]}]}],"thread_ts":"1614691654.038200","reply_count":2,"reply_users_count":2,"latest_reply":"1614691687.039100","reply_users":["U67SCG4HG","U8MPCDJAY"],"subscribed":false},{"client_msg_id":"868eadfa-8392-48d0-aa7f-1da8a7ff7636","type":"message","text":"From what I understand, the default `julia` command-line also includes code-coverage=user and track-allocations=user, no?","user":"U013L06JN15","ts":"1614691685.039000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WHG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"From what I understand, the default "},{"type":"text","text":"julia","style":{"code":true}},{"type":"text","text":" command-line also includes code-coverage=user and track-allocations=user, no?"}]}]}]},{"client_msg_id":"55CC0E09-E860-448D-971A-91EF47E7E8A8","type":"message","text":"Do the manifests agree?","user":"U8MPCDJAY","ts":"1614691756.039800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hrW3z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do the manifests agree?"}]}]}]},{"client_msg_id":"397FCDAD-2C00-4CDA-851D-43A92FED054E","type":"message","text":"The first you’re running in your project environment. The 2nd Pkg is setting up a separate test environment","user":"U8MPCDJAY","ts":"1614691800.041300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"o/t13","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The first you’re running in your project environment. The 2nd Pkg is setting up a separate test environment"}]}]}]},{"client_msg_id":"bc590bf7-380c-4a7b-9776-045f31a90bda","type":"message","text":"Hmm","user":"U013L06JN15","ts":"1614691807.041500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GVn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm"}]}]}]},{"client_msg_id":"3323aaa0-c6bb-4bc8-8ae9-ac84ab3e532d","type":"message","text":"Let me try updating the test one and get back to you","user":"U013L06JN15","ts":"1614691833.041800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jrPM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Let me try updating the test one and get back to you"}]}]}]},{"client_msg_id":"bbb63e1f-c0c7-409f-97ae-5a5f87560151","type":"message","text":"Forced bounds checking is turned on for the tests as well","user":"U67D54KS8","ts":"1614691942.042300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cdUq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Forced bounds checking is turned on for the tests as well"}]}]}]},{"client_msg_id":"dd3f2ec4-77f8-4ef8-91a1-d0c5493c132a","type":"message","text":"But that seems like a bit too big difference for that","user":"U67D54KS8","ts":"1614691952.042700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fZmSM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But that seems like a bit too big difference for that"}]}]}]},{"client_msg_id":"cd5e5a5c-7bf0-43a5-87c8-73a30192fd63","type":"message","text":"Yeah I'm setting --check-bounds=yes to test that as well --^","user":"U013L06JN15","ts":"1614691956.042900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NWjY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah I'm setting --check-bounds=yes to test that as well --^"}]}]}]},{"client_msg_id":"fdecadfc-9edc-4aff-ae7d-f230188941bc","type":"message","text":"Easiest might be to `@profile` it and see what is actually slow","user":"U67D54KS8","ts":"1614691971.043200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NKP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Easiest might be to "},{"type":"text","text":"@profile","style":{"code":true}},{"type":"text","text":" it and see what is actually slow"}]}]}]},{"client_msg_id":"a752439d-dba3-4ad0-94a1-1287177c9114","type":"message","text":"Environments seem to be pretty much the same, and still ~40s on the Pkg.test() case","user":"U013L06JN15","ts":"1614692494.043600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sKfCU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Environments seem to be pretty much the same, and still ~40s on the Pkg.test() case"}]}]}]},{"client_msg_id":"d554edbc-4e0a-49d0-8490-d384711ff1ca","type":"message","text":"I'm also seeing the same thing (long runtime from Pkg.test) on a Github action (running it in an Ubuntu container, whereas locally I'm running on Windows).","user":"U013L06JN15","ts":"1614692783.044700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OGXOQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm also seeing the same thing (long runtime from Pkg.test) on a Github action (running it in an Ubuntu container, whereas locally I'm running on Windows)."}]}]}]},{"client_msg_id":"81B526F2-58EC-4700-827A-61255BF7C045","type":"message","text":"When you run `Pkg.test()` how long does it take before the tests start?","user":"U8MPCDJAY","ts":"1614693012.045700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cQtTD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When you run "},{"type":"text","text":"Pkg.test()","style":{"code":true}},{"type":"text","text":" how long does it take before the tests start?"}]}]}]},{"client_msg_id":"E2AFCB02-5DD0-4973-A1D4-51538E64AD70","type":"message","text":"You might want to insert a print right at the start of tests, if the first test is long","user":"U8MPCDJAY","ts":"1614693039.046600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KHGrq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You might want to insert a print right at the start of tests, if the first test is long"}]}]}]},{"client_msg_id":"af16b177-0bd6-451a-8874-e0b0f39e9321","type":"message","text":"<@U8MPCDJAY> runtimes below. The Pkg.test case also gets a depwarn, though I don't expect that would have a huge runtime cost?\n```&gt;&gt; julia --project=. --check-bounds=yes test/runtests.jl\n[ Info: (DateTime(\"2021-03-02T22:54:36.629\"), \"Loading packages (using ...)\")\n[ Info: (DateTime(\"2021-03-02T22:55:13.776\"), \"Setting up the test!\")\n[ Info: (DateTime(\"2021-03-02T22:56:33.847\"), \"Calling solve()...\")\n[ Info: (DateTime(\"2021-03-02T22:56:49.158\"), \"Calling @elapsed solve()\")\n[ Info: (DateTime(\"2021-03-02T22:56:49.177\"), \"Result of @elapsed solve() = 0.0061909 seconds\")\n\n&gt;&gt; julia --project=. --check-bounds=yes -e \"using Pkg; Pkg.test()\"\n     Testing Running tests...\n[ Info: (DateTime(\"2021-03-02T22:57:10.177\"), \"Loading packages (using ...)\")\n[ Info: (DateTime(\"2021-03-02T22:57:45.884\"), \"Setting up the test!\")\n[ Info: (DateTime(\"2021-03-02T22:59:12.858\"), \"Calling solve()...\")\n┌ Warning: `sys.name` like `sys.ode_f` is deprecated. Use getters like `get_ode_f` instead.\n│   caller = ip:0x0\n└ @ Core :-1\n[ Info: (DateTime(\"2021-03-02T23:00:11.003\"), \"Calling @elapsed solve()\")\n[ Info: (DateTime(\"2021-03-02T23:00:50.270\"), \"Result of @elapsed solve() = 39.252652 seconds\")```\n","user":"U013L06JN15","ts":"1614693705.048100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KVK","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U8MPCDJAY"},{"type":"text","text":" runtimes below. The Pkg.test case also gets a depwarn, though I don't expect that would have a huge runtime cost?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":">> julia --project=. --check-bounds=yes test/runtests.jl\n[ Info: (DateTime(\"2021-03-02T22:54:36.629\"), \"Loading packages (using ...)\")\n[ Info: (DateTime(\"2021-03-02T22:55:13.776\"), \"Setting up the test!\")\n[ Info: (DateTime(\"2021-03-02T22:56:33.847\"), \"Calling solve()...\")\n[ Info: (DateTime(\"2021-03-02T22:56:49.158\"), \"Calling @elapsed solve()\")\n[ Info: (DateTime(\"2021-03-02T22:56:49.177\"), \"Result of @elapsed solve() = 0.0061909 seconds\")\n\n>> julia --project=. --check-bounds=yes -e \"using Pkg; Pkg.test()\"\n     Testing Running tests...\n[ Info: (DateTime(\"2021-03-02T22:57:10.177\"), \"Loading packages (using ...)\")\n[ Info: (DateTime(\"2021-03-02T22:57:45.884\"), \"Setting up the test!\")\n[ Info: (DateTime(\"2021-03-02T22:59:12.858\"), \"Calling solve()...\")\n┌ Warning: `sys.name` like `sys.ode_f` is deprecated. Use getters like `get_ode_f` instead.\n│   caller = ip:0x0\n└ @ Core :-1\n[ Info: (DateTime(\"2021-03-02T23:00:11.003\"), \"Calling @elapsed solve()\")\n[ Info: (DateTime(\"2021-03-02T23:00:50.270\"), \"Result of @elapsed solve() = 39.252652 seconds\")"}]},{"type":"rich_text_section","elements":[]}]}]},{"client_msg_id":"9b7a2cad-95cf-4437-ab3c-1ea14272c687","type":"message","text":"(I'm running the script version with --depwarn=yes now to check that too)","user":"U013L06JN15","ts":"1614693872.048500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qtqhI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(I'm running the script version with --depwarn=yes now to check that too)"}]}]}]},{"client_msg_id":"68683a88-773c-440a-b874-81b05361ec99","type":"message","text":"Depwarns can indeed have a huge runtime cost (if they get into tight code)","user":"U67D54KS8","ts":"1614693993.048800","team":"T68168MUP","edited":{"user":"U67D54KS8","ts":"1614694010.000000"},"blocks":[{"type":"rich_text","block_id":"yM3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Depwarns can indeed have a huge runtime cost (if they get into tight code)"}]}]}],"reactions":[{"name":"raised_hands","users":["U013L06JN15"],"count":1}]},{"client_msg_id":"7628d03b-5d04-49f5-b083-3951eff3710c","type":"message","text":"Yep that looks like it's it","user":"U013L06JN15","ts":"1614694064.049200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4Ude","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yep that looks like it's it"}]}]}]},{"client_msg_id":"3d3c91af-0d06-4125-a41e-0e8e2e0df118","type":"message","text":"with --depwarn=yes\n[ Info: (DateTime(\"2021-03-02T23:07:51.415\"), \"Result of @elapsed solve() = 36.4861737 seconds\")","user":"U013L06JN15","ts":"1614694079.049400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Gfn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"with --depwarn=yes\n[ Info: (DateTime(\"2021-03-02T23:07:51.415\"), \"Result of @elapsed solve() = 36.4861737 seconds\")"}]}]}]},{"client_msg_id":"e14b8878-173f-4866-8d19-9be9c87f6e7c","type":"message","text":"That is hugely surprising to me, but thanks <@U8MPCDJAY> and <@U67D54KS8> for your debugging help!!","user":"U013L06JN15","ts":"1614694106.049800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x/5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That is hugely surprising to me, but thanks "},{"type":"user","user_id":"U8MPCDJAY"},{"type":"text","text":" and "},{"type":"user","user_id":"U67D54KS8"},{"type":"text","text":" for your debugging help!!"}]}]}],"reactions":[{"name":"+1","users":["U8MPCDJAY"],"count":1}]},{"client_msg_id":"9e80594d-8041-429b-927b-f3a52f4478e6","type":"message","text":"Every time a depwarn has the possibility of showing, Julia  needs to look at the callstack to see if the depwarn has already been printed there. Collecting the callstack is slow.","user":"U67D54KS8","ts":"1614694701.050400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/AxR/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Every time a depwarn has the possibility of showing, Julia  needs to look at the callstack to see if the depwarn has already been printed there. Collecting the callstack is slow."}]}]}]},{"client_msg_id":"704bb72c-c909-4689-ac16-804fb0f71935","type":"message","text":"That makes sense, thanks for clarifying! I'm partly surprised I was calling that depwarn apparently so often as well, but it was fortunately a very easy fix. :slightly_smiling_face:","user":"U013L06JN15","ts":"1614694919.051200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QSx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That makes sense, thanks for clarifying! I'm partly surprised I was calling that depwarn apparently so often as well, but it was fortunately a very easy fix. "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"FAC0F1FE-8476-42DA-8083-FC55D2DFBD0B","type":"message","text":"Do we have enough people for a Pkg call today (2pm Eastern Time)? No point in having a call with only 2-3 people.\n\nReact with a thumbs up if you can attend today.","user":"U7THT3TM3","ts":"1614703426.053200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u+V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do we have enough people for a Pkg call today (2pm Eastern Time)? No point in having a call with only 2-3 people.\n"},{"type":"text","text":"\nReact with a thumbs up if you can attend today."}]}]}],"reactions":[{"name":"+1","users":["U7THT3TM3","UCZ7VBGUD"],"count":2}]},{"client_msg_id":"6849d759-171c-47f6-87a6-879d99da7eb2","type":"message","text":"Looks like we only have 3 people. Let's cancel today's call, and plan on doing it in a future week.","user":"U7THT3TM3","ts":"1614710047.054600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=+Re9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looks like we only have 3 people. Let's cancel today's call, and plan on doing it in a future week."}]}]}],"reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]},{"type":"message","text":"If you are a member of JuliaRegistries, see below: (cross-post from <#C6M4DQA5P|pkg-registration>)","user":"U7THT3TM3","ts":"1615245439.054800","team":"T68168MUP","edited":{"user":"U7THT3TM3","ts":"1615245636.000000"},"attachments":[{"fallback":"[March 8th, 2021 6:16 PM] dilum: Hey everyone, I'm trying to clean up the permissions in the JuliaRegistries organization. I've been organizing the repos into teams, and then putting people on teams. Unfortunately, when you add someone to a team, GitHub likes to automatically \"watch\" all of those repos. So if you are a JuliaRegistries member, you may find that you have suddenly been \"subscribed\" to multiple JuliaRegistries repos that you weren't previously watching.\n\nUnfortunately you will need to manually click \"unwatch\" from any repo that you don't want to subscribe to.\n\nSorry about this inconvenience! I don't know of any way that I can disable this in GitHub.","ts":"1615245412.098100","author_id":"U7THT3TM3","author_subname":"Dilum Aluthge","channel_id":"C6M4DQA5P","channel_name":"pkg-registration","is_msg_unfurl":true,"text":"Hey everyone, I'm trying to clean up the permissions in the JuliaRegistries organization. I've been organizing the repos into teams, and then putting people on teams. Unfortunately, when you add someone to a team, GitHub likes to automatically \"watch\" all of those repos. So if you are a JuliaRegistries member, you may find that you have suddenly been \"subscribed\" to multiple JuliaRegistries repos that you weren't previously watching.\n\nUnfortunately you will need to manually click \"unwatch\" from any repo that you don't want to subscribe to.\n\nSorry about this inconvenience! I don't know of any way that I can disable this in GitHub.","author_name":"Dilum Aluthge","author_link":"https://julialang.slack.com/team/U7THT3TM3","author_icon":"https://secure.gravatar.com/avatar/16aeca0a435d95b33fbca08d6cfc2787.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0009-48.png","mrkdwn_in":["text"],"color":"D0D0D0","from_url":"https://julialang.slack.com/archives/C6M4DQA5P/p1615245412098100","is_share":true,"footer":"Posted in #pkg-registration"}],"blocks":[{"type":"rich_text","block_id":"5Pfub","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you are a member of JuliaRegistries, see below: (cross-post from "},{"type":"channel","channel_id":"C6M4DQA5P"},{"type":"text","text":")"}]}]}]},{"client_msg_id":"36637eea-ebd0-4d4f-9835-fe2844520f55","type":"message","text":"<https://daniel.haxx.se/blog/2021/03/09/half-of-curls-vulnerabilities-are-c-mistakes/|https://daniel.haxx.se/blog/2021/03/09/half-of-curls-vulnerabilities-are-c-mistakes/>","user":"UDB26738Q","ts":"1615285608.055100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Tu=4","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://daniel.haxx.se/blog/2021/03/09/half-of-curls-vulnerabilities-are-c-mistakes/","text":"https://daniel.haxx.se/blog/2021/03/09/half-of-curls-vulnerabilities-are-c-mistakes/"}]}]}]},{"client_msg_id":"46b5b435-b260-4429-9058-9270ee8ff2cc","type":"message","text":"If I remember correctly, someone wanted to have a Pkg call this week?","user":"U66GD0880","ts":"1615316727.055400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JfJO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If I remember correctly, someone wanted to have a Pkg call this week?"}]}]}],"reactions":[{"name":"call_me_hand","users":["UDB26738Q","U7THT3TM3"],"count":2}]},{"client_msg_id":"4179b089-ed3d-4685-a049-63d2adc63890","type":"message","text":"I’ll hop on at 11:15 Pacific, if someone has something to discuss we can do so, otherwise after 15 minutes or so I’ll hop back off. :slightly_smiling_face:","user":"U66GD0880","ts":"1615316798.056600","team":"T68168MUP","edited":{"user":"U66GD0880","ts":"1615316805.000000"},"blocks":[{"type":"rich_text","block_id":"HBo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’ll hop on at 11:15 Pacific, if someone has something to discuss we can do so, otherwise after 15 minutes or so I’ll hop back off. "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"cae7dee9-8a9f-49fd-918e-099b015eb638","type":"message","text":"I'll join as well. <@UDB26738Q> and <@UCZ7VBGUD> are you available?","user":"U7THT3TM3","ts":"1615317114.057000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ezu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'll join as well. "},{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":" and "},{"type":"user","user_id":"UCZ7VBGUD"},{"type":"text","text":" are you available?"}]}]}],"thread_ts":"1615317114.057000","reply_count":2,"reply_users_count":2,"latest_reply":"1615317134.057500","reply_users":["UDB26738Q","UCZ7VBGUD"],"subscribed":false},{"client_msg_id":"40ebb62f-34e2-4c6b-9feb-70b1817ceab2","type":"message","text":"I’ve written down the results of the pkg call discussion here: <https://github.com/JuliaRegistries/RegistryCI.jl/issues/352>","user":"UCZ7VBGUD","ts":"1615320631.058500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4I8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’ve written down the results of the pkg call discussion here: "},{"type":"link","url":"https://github.com/JuliaRegistries/RegistryCI.jl/issues/352"}]}]}],"reactions":[{"name":"heart","users":["UDB26738Q"],"count":1}]},{"client_msg_id":"85ea4e86-635d-459b-90c7-72b46116b4bb","type":"message","text":"A number of times I’ve wanted `pkg&gt; rm --all`.. Worth adding?","user":"U8MPCDJAY","ts":"1615422776.060100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3/OV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"A number of times I’ve wanted "},{"type":"text","text":"pkg> rm --all","style":{"code":true}},{"type":"text","text":".. Worth adding?"}]}]}],"reactions":[{"name":"booom","users":["UDB26738Q"],"count":1}]},{"client_msg_id":"9366c496-6f66-4cfa-b887-59b584b81fe9","type":"message","text":"you can just delete the `Project` file, but yeah I guess it would be slightly nice to have in the API","user":"U9VG1AYSG","ts":"1615423149.060900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yrwJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you can just delete the "},{"type":"text","text":"Project","style":{"code":true}},{"type":"text","text":" file, but yeah I guess it would be slightly nice to have in the API"}]}]}]},{"client_msg_id":"e30af28f-1f92-40f1-aa85-882c317abcf1","type":"message","text":"Does storage servers still provide `/registry/$uuid/$hash` tarballs?\n\n```bash-3.2$ server=<https://us-east.storage.julialang.org>\nbash-3.2$ wget $server$(curl -sSfL $server/registries)\n--2021-03-11 23:38:28--  <https://us-east.storage.julialang.org/registry/23338594-aafe-5451-b93e-139f81909106/5bc87d3fd5facd9877ad0adfd9feba7c8caaee9b>\nResolving <http://us-east.storage.julialang.org|us-east.storage.julialang.org> (<http://us-east.storage.julialang.org|us-east.storage.julialang.org>)... 198.18.7.136\nConnecting to <http://us-east.storage.julialang.org|us-east.storage.julialang.org> (<http://us-east.storage.julialang.org|us-east.storage.julialang.org>)|198.18.7.136|:443... connected.\nHTTP request sent, awaiting response... 301 Moved Permanently\nLocation: <https://us-east.storage.juliahub.com/registry/23338594-aafe-5451-b93e-139f81909106/5bc87d3fd5facd9877ad0adfd9feba7c8caaee9b> [following]\n--2021-03-11 23:38:29--  <https://us-east.storage.juliahub.com/registry/23338594-aafe-5451-b93e-139f81909106/5bc87d3fd5facd9877ad0adfd9feba7c8caaee9b>\nResolving <http://us-east.storage.juliahub.com|us-east.storage.juliahub.com> (<http://us-east.storage.juliahub.com|us-east.storage.juliahub.com>)... 198.18.7.133\nConnecting to <http://us-east.storage.juliahub.com|us-east.storage.juliahub.com> (<http://us-east.storage.juliahub.com|us-east.storage.juliahub.com>)|198.18.7.133|:443... connected.\nHTTP request sent, awaiting response... 500 Internal Server Error\n2021-03-11 23:38:30 ERROR 500: Internal Server Error.```\nThis works for `<https://us-east.pkg.julialang.org>`","user":"UH108BJB1","ts":"1615477127.063000","team":"T68168MUP","edited":{"user":"UH108BJB1","ts":"1615477205.000000"},"blocks":[{"type":"rich_text","block_id":"4kBfF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does storage servers still provide "},{"type":"text","text":"/registry/$uuid/$hash","style":{"code":true}},{"type":"text","text":" tarballs?\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"bash-3.2$ server="},{"type":"link","url":"https://us-east.storage.julialang.org"},{"type":"text","text":"\nbash-3.2$ wget $server$(curl -sSfL $server/registries)\n--2021-03-11 23:38:28--  "},{"type":"link","url":"https://us-east.storage.julialang.org/registry/23338594-aafe-5451-b93e-139f81909106/5bc87d3fd5facd9877ad0adfd9feba7c8caaee9b"},{"type":"text","text":"\nResolving us-east.storage.julialang.org (us-east.storage.julialang.org)... 198.18.7.136\nConnecting to us-east.storage.julialang.org (us-east.storage.julialang.org)|198.18.7.136|:443... connected.\nHTTP request sent, awaiting response... 301 Moved Permanently\nLocation: "},{"type":"link","url":"https://us-east.storage.juliahub.com/registry/23338594-aafe-5451-b93e-139f81909106/5bc87d3fd5facd9877ad0adfd9feba7c8caaee9b"},{"type":"text","text":" [following]\n--2021-03-11 23:38:29--  "},{"type":"link","url":"https://us-east.storage.juliahub.com/registry/23338594-aafe-5451-b93e-139f81909106/5bc87d3fd5facd9877ad0adfd9feba7c8caaee9b"},{"type":"text","text":"\nResolving us-east.storage.juliahub.com (us-east.storage.juliahub.com)... 198.18.7.133\nConnecting to us-east.storage.juliahub.com (us-east.storage.juliahub.com)|198.18.7.133|:443... connected.\nHTTP request sent, awaiting response... 500 Internal Server Error\n2021-03-11 23:38:30 ERROR 500: Internal Server Error."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nThis works for "},{"type":"link","url":"https://us-east.pkg.julialang.org","style":{"code":true}}]}]}]},{"client_msg_id":"e0b8b892-5b75-471d-8c35-74233ee2bb23","type":"message","text":"Can you try again Johnny?","user":"U66GD0880","ts":"1615481163.063400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jseF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can you try again Johnny?"}]}]}]},{"client_msg_id":"00321c6f-7b56-4294-92b1-33b1695b6c9a","type":"message","text":"Still 500 error.","user":"UH108BJB1","ts":"1615482362.063600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"I9j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Still 500 error."}]}]}]},{"client_msg_id":"779f7bf2-296f-4d11-b2ff-c68cad019186","type":"message","text":"Seems to be a network issue in China. I can successfully download the tarball via a proxy.","user":"UH108BJB1","ts":"1615482594.064700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/8IaQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Seems to be a network issue in China. I can successfully download the tarball via a proxy."}]}]}],"thread_ts":"1615482594.064700","reply_count":12,"reply_users_count":2,"latest_reply":"1615483288.068900","reply_users":["U66GD0880","UH108BJB1"],"subscribed":false},{"client_msg_id":"cf44420f-99e5-4f5f-a4ed-ff287a731775","type":"message","text":"what about the korean server?","user":"U66GD0880","ts":"1615482702.064900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mx9Kp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what about the korean server?"}]}]}]},{"client_msg_id":"353303e8-8051-406a-a1a6-86362d6c3285","type":"message","text":"I tried also `/package/$uuid/$hash`. Both of the two servers return 500 error except for `/registries`.","user":"UH108BJB1","ts":"1615482837.066200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hKBEP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tried also "},{"type":"text","text":"/package/$uuid/$hash","style":{"code":true}},{"type":"text","text":". Both of the two servers return 500 error except for "},{"type":"text","text":"/registries","style":{"code":true}},{"type":"text","text":"."}]}]}]},{"client_msg_id":"d26040f8-f083-4ca9-8228-937198dfd1ee","type":"message","text":"Does anyone know of a way to disable the notifications of CompatHelper workflows on Github? This never happened, but since a week or two I'm notified of every succesfull run.","user":"U88813859","ts":"1615742170.073400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7emx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does anyone know of a way to disable the notifications of CompatHelper workflows on Github? This never happened, but since a week or two I'm notified of every succesfull run."}]}]}]},{"client_msg_id":"a2f4ba01-5b24-41f2-8346-0e861a6bc0e8","type":"message","text":"Hmmm","user":"U7THT3TM3","ts":"1615742195.073600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SKd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmmm"}]}]}]},{"client_msg_id":"fa38f172-88ac-4639-940a-4a6b029a5676","type":"message","text":"<https://github.com/settings/notifications> maybe?","user":"U7THT3TM3","ts":"1615742209.073800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f0H0L","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/settings/notifications"},{"type":"text","text":" maybe?"}]}]}]},{"client_msg_id":"69764a09-a0d8-4c2f-b939-ee860d4dadcd","type":"message","text":"Scroll down to \"GitHub Actions\"","user":"U7THT3TM3","ts":"1615742215.074000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d5Rt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Scroll down to \"GitHub Actions\""}]}]}]},{"client_msg_id":"b39c8c29-bb9d-46bd-a7a4-7ba74d852925","type":"message","text":"Thanks, the check \"only notify on failed workflow\" wasn't enabled. I think this should solve it.  :slightly_smiling_face:","user":"U88813859","ts":"1615754837.075100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OM1Fa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks, the check \"only notify on failed workflow\" wasn't enabled. I think this should solve it.  "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"783c07f9-3b5d-4c10-9edc-c718fedc19ee","type":"message","text":"Does anyone know what happened to Pkg.Display?","user":"U69BL50BF","ts":"1615838116.075700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lKSs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does anyone know what happened to Pkg.Display?"}]}]}]},{"client_msg_id":"c4ab85e9-f601-4e6e-90d2-cde31fed02ec","type":"message","text":"<https://github.com/SciML/SciMLTutorials.jl/issues/377>","user":"U69BL50BF","ts":"1615838117.075900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8=Bfb","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/SciML/SciMLTutorials.jl/issues/377"}]}]}]},{"client_msg_id":"87c76862-1ba6-45aa-8d0c-6a237edecba1","type":"message","text":"<https://github.com/JuliaLang/Pkg.jl/pull/1621>, which is first available in 1.5.0.","user":"U7THT3TM3","ts":"1615838401.076200","team":"T68168MUP","edited":{"user":"U7THT3TM3","ts":"1615838576.000000"},"blocks":[{"type":"rich_text","block_id":"tNvu","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/1621"},{"type":"text","text":", which is first available in 1.5.0."}]}]}]},{"client_msg_id":"33c24980-45ee-48a0-8c9b-d30561cd25b4","type":"message","text":"Just out of curiosity, what were you using `Pkg.Display.status` for?","user":"U7THT3TM3","ts":"1615838445.076600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oCL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Just out of curiosity, what were you using "},{"type":"text","text":"Pkg.Display.status","style":{"code":true}},{"type":"text","text":" for?"}]}]}]},{"client_msg_id":"b6887b9d-25c4-4fe8-bf17-de88007dc26b","type":"message","text":"For <https://github.com/SciML/SciMLBenchmarks.jl/blob/master/markdown/NonStiffODE/RigidBody_wpd.md#appendix>","user":"U69BL50BF","ts":"1615838719.077100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GFad","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For "},{"type":"link","url":"https://github.com/SciML/SciMLBenchmarks.jl/blob/master/markdown/NonStiffODE/RigidBody_wpd.md#appendix"}]}]}],"reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"3B629611-138E-433A-946E-2F31D1D2F4FB","type":"message","text":"I think what you could do is to make an IOBuffer, set `<http://ctx.io|ctx.io>` to that IOBuffer, and then call `Pkg.status`, and then read the IOBuffer out into a string","user":"U7THT3TM3","ts":"1615839023.079300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BhiG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think what you could do is to make an IOBuffer, set "},{"type":"link","url":"http://ctx.io","text":"ctx.io","style":{"code":true}},{"type":"text","text":" to that IOBuffer, and then call "},{"type":"text","text":"Pkg.status","style":{"code":true}},{"type":"text","text":", and then read the IOBuffer out into a string"}]}]}]},{"client_msg_id":"5d845b2d-13e2-400d-8fd4-156159dae463","type":"message","text":"Or use `sprint`","user":"U67D54KS8","ts":"1615839353.079500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IQv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or use "},{"type":"text","text":"sprint","style":{"code":true}}]}]}],"reactions":[{"name":"+1","users":["U7THT3TM3","U680THK2S","U6A936746"],"count":3},{"name":"runner","users":["U680THK2S","U7THT3TM3","UDB26738Q","U6A936746"],"count":4}]},{"client_msg_id":"8dd6936a-cbeb-4334-904f-40c69ef020cb","type":"message","text":"Will `sprint` work with `Pkg.status`? I though that `sprint` expects the function to have a first positional argument of the form `io::IO`. But that's not the case for `Pkg.status`, which can either take an `io` as a keyword argument, or it can get the `io` from the context.","user":"U7THT3TM3","ts":"1615839665.082000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EdVYN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Will "},{"type":"text","text":"sprint","style":{"code":true}},{"type":"text","text":" work with "},{"type":"text","text":"Pkg.status","style":{"code":true}},{"type":"text","text":"? I though that "},{"type":"text","text":"sprint","style":{"code":true}},{"type":"text","text":" expects the function to have a first positional argument of the form "},{"type":"text","text":"io::IO","style":{"code":true}},{"type":"text","text":". But that's not the case for "},{"type":"text","text":"Pkg.status","style":{"code":true}},{"type":"text","text":", which can either take an "},{"type":"text","text":"io","style":{"code":true}},{"type":"text","text":" as a keyword argument, or it can get the "},{"type":"text","text":"io","style":{"code":true}},{"type":"text","text":" from the context."}]}]}]},{"client_msg_id":"1b77a532-e5d4-4ead-a75e-53865f1eca34","type":"message","text":"`sprint(io -&gt; Pkg.status(; io=io))`","user":"U67SCG4HG","ts":"1615839863.083000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"m7L","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sprint(io -> Pkg.status(; io=io))","style":{"code":true}}]}]}],"thread_ts":"1615839863.083000","reply_count":1,"reply_users_count":1,"latest_reply":"1615839872.083100","reply_users":["U7THT3TM3"],"subscribed":false,"reactions":[{"name":"+1","users":["U7THT3TM3","U680THK2S","U6A936746"],"count":3}]},{"client_msg_id":"21881729-cdf5-4ddf-be95-c8614dee5137","type":"message","text":"Hey Pkg devs! A few months ago I talked with <@U66GD0880> and <@U6795JH6H> about Pluto’s upcoming built-in package management. By now the base feature set is done, and I am looking for feedback! I made a 6 min video showing the main points: <https://youtu.be/jQEZTZM1GXE> Maybe I can join the next Pkg call to discuss?","user":"UUTL3EKN3","ts":"1616001172.004200","team":"T68168MUP","attachments":[{"service_name":"YouTube","service_url":"https://www.youtube.com/","title":"PlutoPkg demo","title_link":"https://youtu.be/jQEZTZM1GXE","author_name":"Fons van der Plas","author_link":"https://www.youtube.com/c/FonsvanderPlas0","thumb_url":"https://i.ytimg.com/vi/jQEZTZM1GXE/hqdefault.jpg","thumb_width":480,"thumb_height":360,"fallback":"YouTube Video: PlutoPkg demo","video_html":"<iframe width=\"400\" height=\"225\" src=\"https://www.youtube.com/embed/jQEZTZM1GXE?feature=oembed&autoplay=1&iv_load_policy=3\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>","video_html_width":400,"video_html_height":225,"from_url":"https://youtu.be/jQEZTZM1GXE","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/youtube.png","id":1,"original_url":"https://youtu.be/jQEZTZM1GXE"}],"blocks":[{"type":"rich_text","block_id":"CWDsl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey Pkg devs! A few months ago I talked with "},{"type":"user","user_id":"U66GD0880"},{"type":"text","text":" and "},{"type":"user","user_id":"U6795JH6H"},{"type":"text","text":" about Pluto’s upcoming built-in package management. By now the base feature set is done, and I am looking for feedback! I made a 6 min video showing the main points: "},{"type":"link","url":"https://youtu.be/jQEZTZM1GXE"},{"type":"text","text":" Maybe I can join the next Pkg call to discuss?"}]}]}],"reactions":[{"name":"call_me_hand","users":["UDB26738Q","U7THT3TM3","U6795JH6H","U8MPCDJAY","U66GD0880"],"count":5}]},{"client_msg_id":"a0e9eead-e219-41ad-ab52-047f8354832e","type":"message","text":"Looks great! Feel free to open issues about various API improvements you would want to Pkg so we can make those solid and tested, so we're not risking breaking this with various Pkg refactorings.","user":"U67D54KS8","ts":"1616013711.006000","team":"T68168MUP","edited":{"user":"U67D54KS8","ts":"1616013798.000000"},"blocks":[{"type":"rich_text","block_id":"xFz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looks great! Feel free to open issues about various API improvements you would want to Pkg so we can make those solid and tested, so we're not risking breaking this with various Pkg refactorings."}]}]}],"thread_ts":"1616013711.006000","reply_count":1,"reply_users_count":1,"latest_reply":"1616015662.007300","reply_users":["UUTL3EKN3"],"subscribed":false},{"type":"message","subtype":"thread_broadcast","text":"That’s really nice to hear, thanks!\n\nSo far, everything has been easy to do with Pkg internals, so my requests would mostly be about making API public","user":"UUTL3EKN3","ts":"1616015662.007300","thread_ts":"1616013711.006000","root":{"client_msg_id":"a0e9eead-e219-41ad-ab52-047f8354832e","type":"message","text":"Looks great! Feel free to open issues about various API improvements you would want to Pkg so we can make those solid and tested, so we're not risking breaking this with various Pkg refactorings.","user":"U67D54KS8","ts":"1616013711.006000","team":"T68168MUP","edited":{"user":"U67D54KS8","ts":"1616013798.000000"},"blocks":[{"type":"rich_text","block_id":"xFz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looks great! Feel free to open issues about various API improvements you would want to Pkg so we can make those solid and tested, so we're not risking breaking this with various Pkg refactorings."}]}]}],"thread_ts":"1616013711.006000","reply_count":1,"reply_users_count":1,"latest_reply":"1616015662.007300","reply_users":["UUTL3EKN3"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"Fipy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That’s really nice to hear, thanks!\n\nSo far, everything has been easy to do with Pkg internals, so my requests would mostly be about making API public"}]}]}],"client_msg_id":"0b75dd31-ecb1-4d0a-a564-0c39695ecd6f"},{"client_msg_id":"964c6322-593a-49e5-9ced-10c88ec1527a","type":"message","text":"This is really great Fons.  It feels really natural, and I love how simple it looks.  Nice work!","user":"U66GD0880","ts":"1616025573.008600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dsY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This is really great Fons.  It feels really natural, and I love how simple it looks.  Nice work!"}]}]}]},{"client_msg_id":"df79500e-a3ff-4b8f-bbd1-d48eb2363821","type":"message","text":"Are there any additional review comments on <https://github.com/JuliaLang/Pkg.jl/pull/2176>? (\"Add the `force_latest_compat` keyword argument to `Pkg.test`\".)\n\nIf not, I'm inclined to wait a little bit, and then merge that PR so we can get it into 1.7.","user":"U7THT3TM3","ts":"1616171228.014900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wbzub","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Are there any additional review comments on "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2176"},{"type":"text","text":"? (\"Add the "},{"type":"text","text":"force_latest_compat","style":{"code":true}},{"type":"text","text":" keyword argument to "},{"type":"text","text":"Pkg.test","style":{"code":true}},{"type":"text","text":"\".)\n\nIf not, I'm inclined to wait a little bit, and then merge that PR so we can get it into 1.7."}]}]}]}]}