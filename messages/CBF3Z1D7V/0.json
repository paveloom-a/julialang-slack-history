{"cursor": 2, "messages": [{"client_msg_id":"A1520CDB-BDA5-4FFC-BC0D-850F3E2197F0","type":"message","text":"We’ve seen 3 reports of the ReadOnlyMemoryError during precomp on windows, which seems to be fixed by ~halving the number of tasks. \n\nThe question is, is that enough of a reason to limit all windows precomp in 1.6 to half the possible tasks?\n\n<https://github.com/JuliaLang/Pkg.jl/issues/2323|https://github.com/JuliaLang/Pkg.jl/issues/2323>","user":"U8MPCDJAY","ts":"1611854417.045300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PvoC/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We’ve seen 3 reports of the ReadOnlyMemoryError during precomp on windows, which seems to be fixed by ~halving the number of tasks. \n"},{"type":"text","text":"\n"},{"type":"text","text":"The question is, is that enough of a reason to limit all windows precomp in 1.6 to half the possible tasks?\n"},{"type":"text","text":"\n"},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/issues/2323","text":"https://github.com/JuliaLang/Pkg.jl/issues/2323"}]}]}]},{"client_msg_id":"E2358F84-388F-4073-880C-8C0E75E8FBB4","type":"message","text":"I don’t think we can catch it","user":"U8MPCDJAY","ts":"1611854484.045700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/oN3I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t think we can catch it"}]}]}]},{"client_msg_id":"fa965798-cace-4800-b608-25daee5e25b8","type":"message","text":"A fix/patch given this has become an RC1 blocker <https://github.com/JuliaLang/Pkg.jl/pull/2366>","user":"U8MPCDJAY","ts":"1611868964.048100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oPgT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"A fix/patch given this has become an RC1 blocker "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2366"}]}]}]},{"client_msg_id":"4e463775-a4e9-436d-adf7-668af0b5a8dc","type":"message","text":"Yeah, windows.. file exists, then doesn’t exist next line :+1::ok_hand::ok_hand::ok_hand:\n<https://github.com/JuliaLang/Pkg.jl/pull/2374#issuecomment-770243725>","user":"U8MPCDJAY","ts":"1612026245.049900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xP+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, windows.. file exists, then doesn’t exist next line "},{"type":"emoji","name":"+1"},{"type":"emoji","name":"ok_hand"},{"type":"emoji","name":"ok_hand"},{"type":"emoji","name":"ok_hand"},{"type":"text","text":"\n"},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2374#issuecomment-770243725"}]}]}],"reactions":[{"name":"windows96","users":["UDB26738Q","U7THT3TM3","U6C5KSWAC"],"count":3}]},{"client_msg_id":"fc868493-0a3a-4a7a-a817-c9044a37e71c","type":"message","text":"Actually, the file didn’t exist, I misread the log\nBut it looks like the issue is a hash mismatch <https://github.com/JuliaLang/Pkg.jl/pull/2374#issuecomment-770268865>","user":"U8MPCDJAY","ts":"1612035589.050900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E276x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Actually, the file didn’t exist, I misread the log\nBut it looks like the issue is a hash mismatch "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2374#issuecomment-770268865"}]}]}]},{"client_msg_id":"50a14069-bf62-4715-9043-bebb8d99779e","type":"message","text":"asking here since most many people here are somewhat familiar with LibGit2: the example in this docstring doesn't make much sense to me <https://docs.julialang.org/en/v1/stdlib/LibGit2/#LibGit2.GitRevWalker>  what are those `oid` and `by` keyword arguments to `count`?","user":"UDB26738Q","ts":"1612050211.052100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ntq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"asking here since most many people here are somewhat familiar with LibGit2: the example in this docstring doesn't make much sense to me "},{"type":"link","url":"https://docs.julialang.org/en/v1/stdlib/LibGit2/#LibGit2.GitRevWalker"},{"type":"text","text":"  what are those "},{"type":"text","text":"oid","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"by","style":{"code":true}},{"type":"text","text":" keyword arguments to "},{"type":"text","text":"count","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1612050211.052100","reply_count":2,"reply_users_count":1,"latest_reply":"1612050592.052400","reply_users":["UDB26738Q"],"subscribed":false},{"client_msg_id":"dce94aca-864f-401b-9464-56b78a8a5671","type":"message","text":"So I’ve tracked down some of our Windows Pkg issues","user":"U66GD0880","ts":"1612214150.053200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CAeo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So I’ve tracked down some of our Windows Pkg issues"}]}]}]},{"client_msg_id":"9ba5c35f-51bd-415f-b8d1-f39313866bbf","type":"message","text":"One big one is that libuv doesn’t support relative symlinks to directories","user":"U66GD0880","ts":"1612214166.053600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vrvFp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"One big one is that libuv doesn’t support relative symlinks to directories"}]}]}]},{"client_msg_id":"c670c1b1-2761-4e12-a2f5-f978f32fbc81","type":"message","text":"<https://github.com/JuliaLang/libuv/blob/julia-uv2-1.39.0/src/win/fs.c#L2793-L2797>","user":"U66GD0880","ts":"1612214181.053800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fgW","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/libuv/blob/julia-uv2-1.39.0/src/win/fs.c#L2793-L2797"}]}]}]},{"client_msg_id":"d30bffa5-1924-4521-833f-ba349f93fe0b","type":"message","text":"I don’t think it would be _too_ hard to add support for that","user":"U66GD0880","ts":"1612214195.054100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xCGBT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t think it would be "},{"type":"text","text":"too","style":{"italic":true}},{"type":"text","text":" hard to add support for that"}]}]}]},{"client_msg_id":"c44b367a-4b6d-4ed4-85a2-ec6735d91f8f","type":"message","text":"but this causes all sorts of weirdness like the following:\n\n```julia&gt; mktempdir() do dir\n       mkdir(joinpath(dir, \"foo\"))\n       symlink(\"foo\", joinpath(dir, \"link\"))\n       stat(joinpath(dir, \"link\"))\n       end\nERROR: IOError: stat(\"C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\jl_WyiDxs\\\\link\"): permission denied (EACCES)\nStacktrace:\n [1] uv_error\n   @ .\\libuv.jl:97 [inlined]\n [2] stat(path::String)\n   @ Base.Filesystem .\\stat.jl:69\n [3] (::var\"#1#2\")(dir::String)\n   @ Main .\\REPL[2]:4\n [4] mktempdir(fn::var\"#1#2\", parent::String; prefix::String)\n   @ Base.Filesystem .\\file.jl:729\n [5] mktempdir(fn::Function, parent::String)\n   @ Base.Filesystem .\\file.jl:727\n [6] top-level scope\n   @ REPL[2]:1```","user":"U66GD0880","ts":"1612214231.055000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EhF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but this causes all sorts of weirdness like the following:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> mktempdir() do dir\n       mkdir(joinpath(dir, \"foo\"))\n       symlink(\"foo\", joinpath(dir, \"link\"))\n       stat(joinpath(dir, \"link\"))\n       end\nERROR: IOError: stat(\"C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\jl_WyiDxs\\\\link\"): permission denied (EACCES)\nStacktrace:\n [1] uv_error\n   @ .\\libuv.jl:97 [inlined]\n [2] stat(path::String)\n   @ Base.Filesystem .\\stat.jl:69\n [3] (::var\"#1#2\")(dir::String)\n   @ Main .\\REPL[2]:4\n [4] mktempdir(fn::var\"#1#2\", parent::String; prefix::String)\n   @ Base.Filesystem .\\file.jl:729\n [5] mktempdir(fn::Function, parent::String)\n   @ Base.Filesystem .\\file.jl:727\n [6] top-level scope\n   @ REPL[2]:1"}]}]}]},{"client_msg_id":"35ce642b-1082-45ef-816a-5f5db5d136a3","type":"message","text":"Oh, that's why my test is failing?","user":"UDB26738Q","ts":"1612214236.055300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"C==X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, that's why my test is failing?"}]}]}]},{"client_msg_id":"4edca2c0-7399-4a9d-9dfa-912b7a71cd28","type":"message","text":"Possibly; I’m not sure which test you’re referring to","user":"U66GD0880","ts":"1612214258.055700","team":"T68168MUP","edited":{"user":"U66GD0880","ts":"1612214263.000000"},"blocks":[{"type":"rich_text","block_id":"cKl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Possibly; I’m not sure which test you’re referring to"}]}]}],"thread_ts":"1612214258.055700","reply_count":13,"reply_users_count":2,"latest_reply":"1612215616.065900","reply_users":["UDB26738Q","U66GD0880"],"subscribed":false},{"client_msg_id":"44c41b32-751d-4aa8-beb8-8b21d3ddf11d","type":"message","text":"I believe the reason we’re seeing this raise its ugly head now is because we’ve moved more fully over to using `Tar.jl` to extract things, which is using Julia’s native `symlink()` which in turn triggers this issue if there are any relative-directory symlinks.  What’s worse, if the directory you’re trying to create a relative symlink to is in the current directory, it will transparently be converted into an absolute symlink, dodging the issue:\n\n<https://github.com/JuliaLang/julia/blob/master/base/file.jl#L999-L1004>","user":"U66GD0880","ts":"1612214377.057700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3Ym","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I believe the reason we’re seeing this raise its ugly head now is because we’ve moved more fully over to using "},{"type":"text","text":"Tar.jl","style":{"code":true}},{"type":"text","text":" to extract things, which is using Julia’s native "},{"type":"text","text":"symlink()","style":{"code":true}},{"type":"text","text":" which in turn triggers this issue if there are any relative-directory symlinks.  What’s worse, if the directory you’re trying to create a relative symlink to is in the current directory, it will transparently be converted into an absolute symlink, dodging the issue:\n\n"},{"type":"link","url":"https://github.com/JuliaLang/julia/blob/master/base/file.jl#L999-L1004"}]}]}]},{"client_msg_id":"31eef47d-6ad6-4489-91f5-6db76ee6c6d9","type":"message","text":"So I think we need to do one of three things:\n\n* Fix libuv, preferably before 1.6 final\n* Use `mklink /d` instead of `jl_fs_symlink()` on windows\n* Avoid generating symlinks to directories at all","user":"U66GD0880","ts":"1612214447.058700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+kb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So I think we need to do one of three things:\n\n* Fix libuv, preferably before 1.6 final\n* Use "},{"type":"text","text":"mklink /d","style":{"code":true}},{"type":"text","text":" instead of "},{"type":"text","text":"jl_fs_symlink()","style":{"code":true}},{"type":"text","text":" on windows\n* Avoid generating symlinks to directories at all"}]}]}],"thread_ts":"1612214447.058700","reply_count":2,"reply_users_count":2,"latest_reply":"1612220389.068500","reply_users":["U66GD0880","U8MPCDJAY"],"subscribed":false},{"client_msg_id":"97154be3-cb83-4385-a84f-7e29bcbec456","type":"message","text":"I’m in favor of the first option, but I’d like to hear what others have to say","user":"U66GD0880","ts":"1612214465.059300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WNHo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m in favor of the first option, but I’d like to hear what others have to say"}]}]}]},{"client_msg_id":"8ba2909e-7f85-4985-949d-35c33a446bef","type":"message","text":"wouldn’t this only manifest when running as admin? since otherwise Tar.jl should detect that it cannot symlink at all and create copies instead","user":"U6795JH6H","ts":"1612214679.061100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VL3D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"wouldn’t this only manifest when running as admin? since otherwise Tar.jl should detect that it cannot symlink at all and create copies instead"}]}]}],"thread_ts":"1612214679.061100","reply_count":15,"reply_users_count":4,"latest_reply":"1612222754.068900","reply_users":["U66GD0880","U8MPCDJAY","U67D54KS8","U6795JH6H"],"subscribed":false},{"client_msg_id":"8bf30c4b-49c8-4471-b6a1-af8bf6ce3a0d","type":"message","text":"Okay, I think Ian and I have converged to a good fix: <https://github.com/JuliaLang/julia/pull/39491>","user":"U66GD0880","ts":"1612295375.069700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OeBNv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Okay, I think Ian and I have converged to a good fix: "},{"type":"link","url":"https://github.com/JuliaLang/julia/pull/39491"}]}]}],"thread_ts":"1612295375.069700","reply_count":8,"reply_users_count":2,"latest_reply":"1612378954.079900","reply_users":["U8MPCDJAY","U66GD0880"],"subscribed":false,"reactions":[{"name":"+1","users":["U7THT3TM3","U8MPCDJAY"],"count":2}]},{"client_msg_id":"8a43c378-dd11-45d9-9839-008e3b975cb1","type":"message","text":"Mosè and I finally figured out why the BB CI never updated its registry: it’s because if you disable the PkgServer (e.g. `JULIA_PKG_SERVER=\"\"`) which we did to work around things halting a lot back when CI was really unstable in November.  It might be worthwhile having `Pkg` complain that it’s in non-PkgServer mode but the registry isn’t a git repo; right now it silently skips, but I think it should at least warn the user, as if they’ve disabled the PkgServer they probably want to get a git-clone version of their registry as well.","user":"U66GD0880","ts":"1612321138.074300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LnKf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Mosè and I finally figured out why the BB CI never updated its registry: it’s because if you disable the PkgServer (e.g. "},{"type":"text","text":"JULIA_PKG_SERVER=\"\"","style":{"code":true}},{"type":"text","text":") which we did to work around things halting a lot back when CI was really unstable in November.  It might be worthwhile having "},{"type":"text","text":"Pkg","style":{"code":true}},{"type":"text","text":" complain that it’s in non-PkgServer mode but the registry isn’t a git repo; right now it silently skips, but I think it should at least warn the user, as if they’ve disabled the PkgServer they probably want to get a git-clone version of their registry as well."}]}]}],"reactions":[{"name":"+1","users":["UDB26738Q","U6A936746","U7THT3TM3"],"count":3}]},{"client_msg_id":"321fc0c1-3766-4338-8129-2b78763df36a","type":"message","text":"Looks like there are new Pkg bugs (with jll packages?) introduced after the beta","user":"U67SCG4HG","ts":"1612357224.075300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XWbp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looks like there are new Pkg bugs (with jll packages?) introduced after the beta"}]}]}]},{"client_msg_id":"a84ab485-7caa-46c1-aba8-f5958187ebe7","type":"message","text":"In the RC?","user":"U67D54KS8","ts":"1612357239.075500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TKurE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In the RC?"}]}]}]},{"client_msg_id":"ab533c1d-8232-4173-95d4-d425286d1ffd","type":"message","text":"or.. the RC branch?","user":"U67D54KS8","ts":"1612357246.075700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vbcc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"or.. the RC branch?"}]}]}]},{"client_msg_id":"76d0b84c-5522-425d-867c-fa778c8e4285","type":"message","text":"tip of release-1.6","user":"U67SCG4HG","ts":"1612357303.076100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nxHmP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"tip of release-1.6"}]}]}]},{"client_msg_id":"8cc1f824-0202-4df4-b81d-f9cad7f12588","type":"message","text":"what's the bug? any issue?","user":"U67D54KS8","ts":"1612357318.076300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s22o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what's the bug? any issue?"}]}]}]},{"client_msg_id":"db9d599e-04ed-45d5-9609-1cfd0e2b203b","type":"message","text":"Oh, `Zlib_jll` is a stdlib now? Man the number of stdlibs have exploded.","user":"U67SCG4HG","ts":"1612357425.076900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZYIkq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, "},{"type":"text","text":"Zlib_jll","style":{"code":true}},{"type":"text","text":" is a stdlib now? Man the number of stdlibs have exploded."}]}]}],"reactions":[{"name":"boom","users":["UDB26738Q","U67D54KS8","U6A936746","U6795JH6H","U680THK2S","UH108BJB1"],"count":6}]},{"client_msg_id":"a8805b29-4111-435b-a5f1-ba16b41bc656","type":"message","text":"anyway, it shouldn't fail like this:","user":"U67SCG4HG","ts":"1612357431.077100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TPOCS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"anyway, it shouldn't fail like this:"}]}]}]},{"client_msg_id":"ce44913a-1aba-4a40-bae1-9be4c84eae99","type":"message","text":"```$ JULIA_LOAD_PATH=$PWD/Project.toml:@stdlib julia -e 'using Pkg; Pkg.add(\"Zlib_jll\")'\n   Resolving package versions...\n    Updating `/tmp/tmp.bkf5IJvGou/Project.toml`\n  [83775a58] + Zlib_jll\n    Updating `/tmp/tmp.bkf5IJvGou/Manifest.toml`\n  [8f399da3] + Libdl\n  [83775a58] + Zlib_jll\n[fredrik@erebor:/tmp/tmp.bkf5IJvGou]$ JULIA_LOAD_PATH=$PWD/Project.toml julia -e 'using Zlib_jll'\nERROR: ArgumentError: Package Zlib_jll [83775a58-1f1d-513f-b197-d71354ab007a] is required but does not seem to be installed:```","user":"U67SCG4HG","ts":"1612357686.077300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hEbpH","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"$ JULIA_LOAD_PATH=$PWD/Project.toml:@stdlib julia -e 'using Pkg; Pkg.add(\"Zlib_jll\")'\n   Resolving package versions...\n    Updating `/tmp/tmp.bkf5IJvGou/Project.toml`\n  [83775a58] + Zlib_jll\n    Updating `/tmp/tmp.bkf5IJvGou/Manifest.toml`\n  [8f399da3] + Libdl\n  [83775a58] + Zlib_jll\n[fredrik@erebor:/tmp/tmp.bkf5IJvGou]$ JULIA_LOAD_PATH=$PWD/Project.toml julia -e 'using Zlib_jll'\nERROR: ArgumentError: Package Zlib_jll [83775a58-1f1d-513f-b197-d71354ab007a] is required but does not seem to be installed:"}]}]}]},{"client_msg_id":"e95935c5-aba1-4a0d-86b8-22df0fc12c10","type":"message","text":"Doesn't happen with other (non-jll) stdlibs","user":"U67SCG4HG","ts":"1612357863.077600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pGj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Doesn't happen with other (non-jll) stdlibs"}]}]}]},{"client_msg_id":"678427ca-3feb-4677-8d33-7889e39439b9","type":"message","text":"<https://github.com/JuliaLang/julia/issues/39504>","user":"U67SCG4HG","ts":"1612358144.078000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bPcG","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/julia/issues/39504"}]}]}]},{"client_msg_id":"51620620-c550-4099-b227-a2601e2f5168","type":"message","text":"<@U67SCG4HG>: would it be possible to add the “how old is the registry that this is serving” monitoring thing to the status page?","user":"U6795JH6H","ts":"1612383011.080900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NSOI","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U67SCG4HG"},{"type":"text","text":": would it be possible to add the “how old is the registry that this is serving” monitoring thing to the status page?"}]}]}],"thread_ts":"1612383011.080900","reply_count":7,"reply_users_count":3,"latest_reply":"1612383928.082200","reply_users":["U67SCG4HG","U6795JH6H","U66GD0880"],"subscribed":false,"reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"2c887f6f-1d5e-42b7-85e8-46e8d57588dc","type":"message","text":"did Julia v1.5 used to fix permissions of executables in artifacts (something like an automatic `chmod +x`)?","user":"UDB26738Q","ts":"1612549611.083300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z1dB4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"did Julia v1.5 used to fix permissions of executables in artifacts (something like an automatic "},{"type":"text","text":"chmod +x","style":{"code":true}},{"type":"text","text":")?"}]}]}]},{"client_msg_id":"b8f063e5-0547-4c69-92ae-d7d8b7581db9","type":"message","text":"`Plotly.jl` is broken with Julia v1.6 on Windows because their artifact has an executable which isn't executable and they say this is complicated to fix (:shrug:).  the fact is that this used to work before","user":"UDB26738Q","ts":"1612549704.084700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pBr6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Plotly.jl","style":{"code":true}},{"type":"text","text":" is broken with Julia v1.6 on Windows because their artifact has an executable which isn't executable and they say this is complicated to fix ("},{"type":"emoji","name":"shrug"},{"type":"text","text":").  the fact is that this used to work before"}]}]}],"thread_ts":"1612549704.084700","reply_count":4,"reply_users_count":2,"latest_reply":"1612550344.085400","reply_users":["U66GD0880","UDB26738Q"],"subscribed":false},{"client_msg_id":"C3F38D49-1EA7-4CA6-89D7-A5158C8CCBBB","type":"message","text":"For 1.6, should we default to cloning the General registry over Git (assuming that JULIA_PKG_SERVER is not set)? Since we are still having Pkg server/storage server issues that result in people having outdated registries.\n\nWe already do this for Windows, so I'm just suggesting that we do it for all platforms. We can change it in 1.7 or once the outdated registry issue is resolved on the infrastructure side.","user":"U7THT3TM3","ts":"1612569208.089500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JvN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For 1.6, should we default to cloning the General registry over Git (assuming that JULIA_PKG_SERVER is not set)? Since we are still having Pkg server/storage server issues that result in people having outdated registries.\n"},{"type":"text","text":"\n"},{"type":"text","text":"We already do this for Windows, so I'm just suggesting that we do it for all platforms. We can change it in 1.7 or once the outdated registry issue is resolved on the infrastructure side."}]}]}]},{"client_msg_id":"D74C53F4-D0FC-4292-8DD1-7AF570D86353","type":"message","text":"Having the General registry cloned over Git means that if someone wants a version that is registered in General but is not yet available in the Pkg server, the Pkg client falls back to obtaining the package version from GitHub.\n\nIn contrast, if the registry is obtained from the Pkg server, then if the Pkg server is out of date, there is no easy way for the user to get the desired package version.","user":"U7THT3TM3","ts":"1612569406.092300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tLSh=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Having the General registry cloned over Git means that if someone wants a version that is registered in General but is not yet available in the Pkg server, the Pkg client falls back to obtaining the package version from GitHub.\n"},{"type":"text","text":"\n"},{"type":"text","text":"In contrast, if the registry is obtained from the Pkg server, then if the Pkg server is out of date, there is no easy way for the user to get the desired package version."}]}]}]},{"client_msg_id":"99362f60-3914-411f-aacb-3a79a101ffef","type":"message","text":"this is probably a stupid question, but we all agree this needs to be fully resolved before a 1.6 RC right?  Silently missing 48 hours of package updates will be fairly disruptive","user":"U9VG1AYSG","ts":"1612569584.093000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fZHI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is probably a stupid question, but we all agree this needs to be fully resolved before a 1.6 RC right?  Silently missing 48 hours of package updates will be fairly disruptive"}]}]}]},{"client_msg_id":"16134c9d-89d4-44f7-b47c-3c75d2401a7a","type":"message","text":"oh, I was misunderstanding... it seems worse than that, this seems even to be a problem on 1.5, I have CI/CD breaking right now from this","user":"U9VG1AYSG","ts":"1612569717.093500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hyg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, I was misunderstanding... it seems worse than that, this seems even to be a problem on 1.5, I have CI/CD breaking right now from this"}]}]}],"thread_ts":"1612569717.093500","reply_count":25,"reply_users_count":3,"latest_reply":"1612571048.107000","reply_users":["UDB26738Q","U9VG1AYSG","U7THT3TM3"],"subscribed":false},{"client_msg_id":"D756897A-600A-4752-9490-285948EA5D01","type":"message","text":"I've opened this PR to discuss my suggestion above: <https://github.com/JuliaLang/Pkg.jl/pull/2377|https://github.com/JuliaLang/Pkg.jl/pull/2377>","user":"U7THT3TM3","ts":"1612569900.094200","team":"T68168MUP","edited":{"user":"U7THT3TM3","ts":"1612569968.000000"},"blocks":[{"type":"rich_text","block_id":"/h5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I've opened this PR to discuss my suggestion above: "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2377","text":"https://github.com/JuliaLang/Pkg.jl/pull/2377"}]}]}]},{"client_msg_id":"9ae70c55-632c-4ea7-a58c-938b2d0e4d7f","type":"message","text":"it's really weird though, because I was using 1.5 at work all day and had no problems updating.  Guess it was talking to a different server instance","user":"U9VG1AYSG","ts":"1612569943.096200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Nzc8I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's really weird though, because I was using 1.5 at work all day and had no problems updating.  Guess it was talking to a different server instance"}]}]}]},{"client_msg_id":"a56ae5e7-d54a-4bea-8acb-9409ec3d608c","type":"message","text":"The pkg server registry is currently &gt;20 minutes behind github. It would be nice to get <https://github.com/JuliaLang/Pkg.jl/pull/2377> finalized and merged, at least for nightlies","user":"U8MPCDJAY","ts":"1612799709.109900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BvQ5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The pkg server registry is currently >20 minutes behind github. It would be nice to get "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2377"},{"type":"text","text":" finalized and merged, at least for nightlies"}]}]}],"thread_ts":"1612799709.109900","reply_count":2,"reply_users_count":1,"latest_reply":"1612803318.112000","reply_users":["U8MPCDJAY"],"subscribed":false},{"client_msg_id":"15a32d9c-ca69-4708-a525-e46b2d76b1d7","type":"message","text":"related to that, how hard is to implement this check: <https://julialang.slack.com/archives/CBF3Z1D7V/p1612321138074300>?  it's really confusing trying to update a registry that can't possibly be updated","user":"UDB26738Q","ts":"1612800526.110500","team":"T68168MUP","attachments":[{"from_url":"https://julialang.slack.com/archives/CBF3Z1D7V/p1612321138074300","fallback":"[February 2nd, 2021 6:58 PM] staticfloat: Mosè and I finally figured out why the BB CI never updated its registry: it’s because if you disable the PkgServer (e.g. `JULIA_PKG_SERVER=\"\"`) which we did to work around things halting a lot back when CI was really unstable in November.  It might be worthwhile having `Pkg` complain that it’s in non-PkgServer mode but the registry isn’t a git repo; right now it silently skips, but I think it should at least warn the user, as if they’ve disabled the PkgServer they probably want to get a git-clone version of their registry as well.","ts":"1612321138.074300","author_id":"U66GD0880","author_subname":"Elliot Saba","channel_id":"CBF3Z1D7V","channel_name":"pkg-dev","is_msg_unfurl":true,"text":"Mosè and I finally figured out why the BB CI never updated its registry: it’s because if you disable the PkgServer (e.g. `JULIA_PKG_SERVER=\"\"`) which we did to work around things halting a lot back when CI was really unstable in November.  It might be worthwhile having `Pkg` complain that it’s in non-PkgServer mode but the registry isn’t a git repo; right now it silently skips, but I think it should at least warn the user, as if they’ve disabled the PkgServer they probably want to get a git-clone version of their registry as well.","author_name":"Elliot Saba","author_link":"https://julialang.slack.com/team/U66GD0880","author_icon":"https://secure.gravatar.com/avatar/002ccfd8ee9e135f0dfb5650c292052d.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-48.png","mrkdwn_in":["text"],"id":1,"original_url":"https://julialang.slack.com/archives/CBF3Z1D7V/p1612321138074300","footer":"Posted in #pkg-dev"}],"blocks":[{"type":"rich_text","block_id":"nOU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"related to that, how hard is to implement this check: "},{"type":"link","url":"https://julialang.slack.com/archives/CBF3Z1D7V/p1612321138074300"},{"type":"text","text":"?  it's really confusing trying to update a registry that can't possibly be updated"}]}]}]},{"client_msg_id":"352b9e9e-c68a-42d3-a62c-226f904248e9","type":"message","text":"(or is that what the PR already does?)","user":"UDB26738Q","ts":"1612800555.110900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h0N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(or is that what the PR already does?)"}]}]}]},{"client_msg_id":"5229277f-d037-4ebd-85a7-995b9e994330","type":"message","text":"(reading the code and the further comments, I think the warning is already there?)","user":"UDB26738Q","ts":"1612801539.111300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"50da0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(reading the code and the further comments, I think the warning is already there?)"}]}]}],"thread_ts":"1612801539.111300","reply_count":1,"reply_users_count":1,"latest_reply":"1612802832.111700","reply_users":["U8MPCDJAY"],"subscribed":false},{"client_msg_id":"CD19F092-3CE0-4AD4-A1D1-F692EBF6F7B7","type":"message","text":"Yeah if you set `JULIA_PKG_SERVER` to `\"\"` but you still have a Pkg server registry, my PR will print a warning","user":"U7THT3TM3","ts":"1612807200.113900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7c7U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah if you set "},{"type":"text","text":"JULIA_PKG_SERVER","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"\"\"","style":{"code":true}},{"type":"text","text":" but you still have a Pkg server registry, my PR will print a warning"}]}]}]},{"client_msg_id":"2C99ADAA-B4A4-4501-8CD5-F26061B939C2","type":"message","text":"It's worth noting that it is just a warning. It's not an error.","user":"U7THT3TM3","ts":"1612811992.114700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eYMd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's worth noting that it is just a warning. It's not an error."}]}]}]},{"client_msg_id":"0A6327A3-827B-429B-BF7A-468B0ED3A5A7","type":"message","text":"So in an automated script, you wouldn't notice it unless you looked at the logs.","user":"U7THT3TM3","ts":"1612812041.115500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=lbgG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So in an automated script, you wouldn't notice it unless you looked at the logs."}]}]}],"thread_ts":"1612812041.115500","reply_count":1,"reply_users_count":1,"latest_reply":"1612812085.115600","reply_users":["UDB26738Q"],"subscribed":false},{"client_msg_id":"d4cb1057-80ba-458b-ad1b-f3af2f4537de","type":"message","text":"what's the process if I have an automerge to general registry that was blocked?  Am I supposed to do anything, or is some human being supposed to come along and merge it evenutally?","user":"U9VG1AYSG","ts":"1612830262.116700","team":"T68168MUP","edited":{"user":"U9VG1AYSG","ts":"1612830273.000000"},"blocks":[{"type":"rich_text","block_id":"+KHkB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what's the process if I have an automerge to general registry that was blocked?  Am I supposed to do anything, or is some human being supposed to come along and merge it evenutally?"}]}]}],"thread_ts":"1612830262.116700","reply_count":4,"reply_users_count":3,"latest_reply":"1612830789.117700","reply_users":["UDB26738Q","U9VG1AYSG","UM30MT6RF"],"subscribed":false},{"client_msg_id":"f855c588-7208-458a-8af6-154f0e54b7db","type":"message","text":"<https://twitter.com/lpfeed/status/1359519523234283521?s=19|https://twitter.com/lpfeed/status/1359519523234283521?s=19>","user":"UDGT4PM41","ts":"1612971227.118600","team":"T68168MUP","attachments":[{"fallback":"<https://twitter.com/lpfeed|@lpfeed>: Large class of vulnerabilities found in build and package management systems:\n\n<https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610>\n\nSeems that Julia’s package system could be similarly vulnerable.\n\n#JuliaLang #opsec","ts":1612969687,"author_name":"Lee Phillips","author_link":"https://twitter.com/lpfeed/status/1359519523234283521","author_icon":"https://pbs.twimg.com/profile_images/988784165498839040/5fivrT82_normal.jpg","author_subname":"@lpfeed","text":"Large class of vulnerabilities found in build and package management systems:\n\n<https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610>\n\nSeems that Julia’s package system could be similarly vulnerable.\n\n#JuliaLang #opsec","service_name":"twitter","service_url":"https://twitter.com/","from_url":"https://twitter.com/lpfeed/status/1359519523234283521?s=19","id":1,"original_url":"https://twitter.com/lpfeed/status/1359519523234283521?s=19","footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png"}],"blocks":[{"type":"rich_text","block_id":"z6Ka+","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://twitter.com/lpfeed/status/1359519523234283521?s=19","text":"https://twitter.com/lpfeed/status/1359519523234283521?s=19"}]}]}]},{"client_msg_id":"A71B5EBB-B991-4BFC-8A64-1B9A446DB97B","type":"message","text":"Yeah see the discussion in <#CED4U82BC|pkg-trust> ","user":"U7THT3TM3","ts":"1612972048.119100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7toke","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah see the discussion in "},{"type":"channel","channel_id":"CED4U82BC"},{"type":"text","text":" "}]}]}]},{"client_msg_id":"F2F0140B-457E-4A49-A546-74ABB22D74E3","type":"message","text":"And the issue that resulted from the discussion: <https://github.com/JuliaLang/Pkg.jl/issues/2393|https://github.com/JuliaLang/Pkg.jl/issues/2393>","user":"U7THT3TM3","ts":"1612972077.119700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+tbR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And the issue that resulted from the discussion: "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/issues/2393","text":"https://github.com/JuliaLang/Pkg.jl/issues/2393"}]}]}]},{"client_msg_id":"bfabb983-c259-40a2-93a3-313223292c98","type":"message","text":"When doing `pkg&gt; test Gadfly` with *Julia 1.5*, it outputs the following error but then successfully completes all tests:\n```    Testing Gadfly\n┌ Error: Pkg.Resolve.ResolverError(\"Unsatisfiable requirements detected for package DataFrames [a93c6f00]:\\n DataFrames [a93c6f00] log:\\n ├─possible versions are: [0.11.7, 0.12.0, 0.13.0-0.13.1, 0.14.0-0.14.1, 0.15.0-0.15.2, 0.16.0, 0.17.0-0.17.1, 0.18.0-0.18.4, 0.19.0-0.19.4, 0.20.0-0.20.2, 0.21.0-0.21.8, 0.22.0-0.22.5] or uninstalled\\n ├─restricted to versions 0.21 by an explicit requirement, leaving only versions 0.21.0-0.21.8\\n └─restricted by compatibility requirements with Reexport [189a3867] to versions: 0.22.3-0.22.5 or uninstalled — no versions left\\n   └─Reexport [189a3867] log:\\n     ├─possible versions are: [0.2.0, 1.0.0] or uninstalled\\n     └─restricted to versions 1.0.0 by an explicit requirement, leaving only versions 1.0.0\", nothing)\n└ @ Pkg.Operations /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v1.5/Pkg/src/Operations.jl:1427```\nWith *Julia 1.6* it outputs the following warning and also successfully completes all test:\n```     Testing Gadfly\n┌ Warning: Could not use exact versions of packages in manifest, re-resolving```\nDo I  interpret this right that already in Julia 1.5, the Pkg manager does a *re-resolving* and everything is fine - only instead of the error message, we should have a warning as it seems implemented in Julia 1.6?\nThanks for confirming as I am currently revising our stacked environment setup and would like to be sure to understand what is happening here!","user":"UMCPULMA7","ts":"1613055897.128900","team":"T68168MUP","edited":{"user":"UMCPULMA7","ts":"1613056066.000000"},"blocks":[{"type":"rich_text","block_id":"UDr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When doing "},{"type":"text","text":"pkg> test Gadfly","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"Julia 1.5","style":{"bold":true}},{"type":"text","text":", it outputs the following error but then successfully completes all tests:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"    Testing Gadfly\n┌ Error: Pkg.Resolve.ResolverError(\"Unsatisfiable requirements detected for package DataFrames [a93c6f00]:\\n DataFrames [a93c6f00] log:\\n ├─possible versions are: [0.11.7, 0.12.0, 0.13.0-0.13.1, 0.14.0-0.14.1, 0.15.0-0.15.2, 0.16.0, 0.17.0-0.17.1, 0.18.0-0.18.4, 0.19.0-0.19.4, 0.20.0-0.20.2, 0.21.0-0.21.8, 0.22.0-0.22.5] or uninstalled\\n ├─restricted to versions 0.21 by an explicit requirement, leaving only versions 0.21.0-0.21.8\\n └─restricted by compatibility requirements with Reexport [189a3867] to versions: 0.22.3-0.22.5 or uninstalled — no versions left\\n   └─Reexport [189a3867] log:\\n     ├─possible versions are: [0.2.0, 1.0.0] or uninstalled\\n     └─restricted to versions 1.0.0 by an explicit requirement, leaving only versions 1.0.0\", nothing)\n└ @ Pkg.Operations /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v1.5/Pkg/src/Operations.jl:1427"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"With "},{"type":"text","text":"Julia 1.6","style":{"bold":true}},{"type":"text","text":" it outputs the following warning and also successfully completes all test:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"     Testing Gadfly\n┌ Warning: Could not use exact versions of packages in manifest, re-resolving"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Do I  interpret this right that already in Julia 1.5, the Pkg manager does a"},{"type":"text","text":" re-resolving","style":{"bold":true}},{"type":"text","text":" and everything is fine - only instead of the error message, we should have a warning as it seems implemented in Julia 1.6?\nThanks for confirming as I am currently revising our stacked environment setup and would like to be sure to understand what is happening here!"}]}]}]},{"client_msg_id":"9c074071-5dc6-43a1-996a-0fe4b9952b1a","type":"message","text":"It means that the test specific dependencies are not compatible with the manifest Pkg generates without them so it needs to re-resolve.","user":"U67D54KS8","ts":"1613060188.130000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gII7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It means that the test specific dependencies are not compatible with the manifest Pkg generates without them so it needs to re-resolve."}]}]}]},{"client_msg_id":"433afe20-1d5e-45cd-9222-c5fb08828269","type":"message","text":"thanks for the reply <@U67D54KS8>!","user":"UMCPULMA7","ts":"1613061908.132600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p+=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks for the reply "},{"type":"user","user_id":"U67D54KS8"},{"type":"text","text":"!"}]}]}]},{"client_msg_id":"a66873fd-2f59-438a-9821-60af54822cb7","type":"message","text":"&gt; It means that the test specific dependencies are not compatible with the manifest Pkg generates without them so it needs to re-resolve.\nAre you referring to the error message obtained with Julia 1.5 ( `Error: Pkg.Resolve.ResolverError(...` ) ? So, did I conclude right that this error message means that it had to do a re-resolve and it is no big deal?","user":"UMCPULMA7","ts":"1613061939.132900","team":"T68168MUP","edited":{"user":"UMCPULMA7","ts":"1613062347.000000"},"blocks":[{"type":"rich_text","block_id":"K75GA","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"It means that the test specific dependencies are not compatible with the manifest Pkg generates without them so it needs to re-resolve."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Are you referring to the error message obtained with Julia 1.5 ( "},{"type":"text","text":"Error: Pkg.Resolve.ResolverError(...","style":{"code":true}},{"type":"text","text":" ) ? So, did I conclude right that this error message means that it had to do a re-resolve and it is no big deal?"}]}]}]},{"client_msg_id":"5bcfd673-57d9-4670-8cec-b430a4721701","type":"message","text":"Yes, that's why on 1.6 it was made less alarming","user":"U67D54KS8","ts":"1613066260.133500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5=+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, that's why on 1.6 it was made less alarming"}]}]}],"reactions":[{"name":"rotating_light","users":["U680THK2S"],"count":1},{"name":"loud_sound","users":["U680THK2S"],"count":1}]}]}