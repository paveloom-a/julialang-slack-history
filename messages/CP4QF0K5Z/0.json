{"cursor": 0, "messages": [{"client_msg_id":"6870804e-ebd2-44c0-8421-e25e679f11f7","type":"message","text":"I noticed that in our `Stiefel` manifold, we use a lot of allocations when it comes to `project!` and `inner` as well as `retract!`(for QR). Any ideas how to reduce these?","user":"UPJ6Q2SQY","ts":"1608572298.230800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A0JZM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I noticed that in our "},{"type":"text","text":"Stiefel","style":{"code":true}},{"type":"text","text":" manifold, we use a lot of allocations when it comes to "},{"type":"text","text":"project!","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"inner","style":{"code":true}},{"type":"text","text":" as well as "},{"type":"text","text":"retract!","style":{"code":true}},{"type":"text","text":"(for QR). Any ideas how to reduce these?"}]}]}]},{"client_msg_id":"1b1f048c-a16b-412e-b4c0-b2df3bb1671f","type":"message","text":"especially I do not understand our `qrfac_to_q` stuff","user":"UPJ6Q2SQY","ts":"1608572333.231300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PPB+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"especially I do not understand our "},{"type":"text","text":"qrfac_to_q","style":{"code":true}},{"type":"text","text":" stuff"}]}]}]},{"client_msg_id":"74600243-5135-4b42-b233-a5f225ce7605","type":"message","text":"(oh to be precise project of tangents)","user":"UPJ6Q2SQY","ts":"1608572373.231600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/ynJL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(oh to be precise project of tangents)"}]}]}]},{"client_msg_id":"1e84760e-38ee-4035-aa1a-444609c37a1f","type":"message","text":"ok might not have been the main issue in my memory allocations; still, if we see to reduce that, my new code is still a factor of 6-10 off to the paper with c code and its numbers","user":"UPJ6Q2SQY","ts":"1608581013.232400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SRX4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok might not have been the main issue in my memory allocations; still, if we see to reduce that, my new code is still a factor of 6-10 off to the paper with c code and its numbers"}]}]}]},{"client_msg_id":"09284085-c1f3-40cc-ba04-72ba6eab3fbd","type":"message","text":"QR retraction doesn't allocate (at least for StaticArrays) for me","user":"U9AHT3YM7","ts":"1608631589.233000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wpI2T","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"QR retraction doesn't allocate (at least for StaticArrays) for me"}]}]}]},{"client_msg_id":"b2eaf6b9-5a2d-4729-a23e-4cd05ae784ac","type":"message","text":"You can uncomment `return mul!(q, _qrfac_to_q(qrfac), D)` now that we use StaticArrays 1.0 and then retraction on `Stiefel(3, 2)` takes about 33 ns on my computer","user":"U9AHT3YM7","ts":"1608631654.233800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rpps","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can uncomment "},{"type":"text","text":"return mul!(q, _qrfac_to_q(qrfac), D)","style":{"code":true}},{"type":"text","text":" now that we use StaticArrays 1.0 and then retraction on "},{"type":"text","text":"Stiefel(3, 2)","style":{"code":true}},{"type":"text","text":" takes about 33 ns on my computer"}]}]}]},{"client_msg_id":"024f880f-df6d-450d-b4b9-fd8232c7f924","type":"message","text":"`_qrfac_to_q` IIRC is there because some multiplication method was missing? I'm not sure","user":"U9AHT3YM7","ts":"1608631720.234500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f3kg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"_qrfac_to_q","style":{"code":true}},{"type":"text","text":" IIRC is there because some multiplication method was missing? I'm not sure"}]}]}]},{"client_msg_id":"50c200dd-d75b-46d9-8291-16e548e746f2","type":"message","text":"anyway, for static arrays it doesn't do anything","user":"U9AHT3YM7","ts":"1608631740.234800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"72l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"anyway, for static arrays it doesn't do anything"}]}]}]},{"client_msg_id":"ab03c67e-d314-4342-b417-61fb838f0baa","type":"message","text":"`inner` on Stiefel is the same as on `Euclidean` and should be fast and non-allocating","user":"U9AHT3YM7","ts":"1608631811.235800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U0B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"inner","style":{"code":true}},{"type":"text","text":" on Stiefel is the same as on "},{"type":"text","text":"Euclidean","style":{"code":true}},{"type":"text","text":" and should be fast and non-allocating"}]}]}]},{"client_msg_id":"f507af55-2ba6-444a-8bd0-9cbb45ee9783","type":"message","text":"I will try that locally, thanks. I think my remaining main issue currently is, that `get_gradient` does not yet have an inplace variant in `Manopt.jl``","user":"UPJ6Q2SQY","ts":"1608631821.236100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oPtR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I will try that locally, thanks. I think my remaining main issue currently is, that "},{"type":"text","text":"get_gradient","style":{"code":true}},{"type":"text","text":" does not yet have an inplace variant in `Manopt.jl``"}]}]}]},{"client_msg_id":"283bd4b1-baad-411c-b4fe-b5e0c46529eb","type":"message","text":"yes for inner I was mistaken","user":"UPJ6Q2SQY","ts":"1608631831.236300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gQGvT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes for inner I was mistaken"}]}]}]},{"client_msg_id":"64a4cc60-2398-4893-9776-f2cbec2429c3","type":"message","text":"Yesterday I brought an algorithm for Quasi Newton (the current algorithm(s) we develop) from 150 seconds down to 10, where a paper mentions, in C its about 2 seconds","user":"UPJ6Q2SQY","ts":"1608631876.237500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7a/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yesterday I brought an algorithm for Quasi Newton (the current algorithm(s) we develop) from 150 seconds down to 10, where a paper mentions, in C its about 2 seconds"}]}]}]},{"client_msg_id":"c3fdaf91-2e46-445f-88d6-5fc6213d47cb","type":"message","text":"ok, `Manopt` definitely lacks some inplace variants of different functions","user":"U9AHT3YM7","ts":"1608631880.237600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mey","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, "},{"type":"text","text":"Manopt","style":{"code":true}},{"type":"text","text":" definitely lacks some inplace variants of different functions"}]}]}]},{"client_msg_id":"9b56e285-28df-4e6e-8c78-24474dafd95a","type":"message","text":"ok, nice :slightly_smiling_face: I think we should be even faster then 10 s","user":"U9AHT3YM7","ts":"1608631909.238400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iFgL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, nice "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" I think we should be even faster then 10 s"}]}]}]},{"client_msg_id":"ef08d30e-fc3a-4912-9222-8e28323879ac","type":"message","text":"For the gradients its for example also a design question, since thats a function the user provides","user":"UPJ6Q2SQY","ts":"1608631912.238500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ujGtu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For the gradients its for example also a design question, since thats a function the user provides"}]}]}]},{"client_msg_id":"bc529552-c449-4bd8-a4f6-e6b3094d733f","type":"message","text":"well my investigation yields that the very most allocations are not in computing (newly allocating) the gradient","user":"UPJ6Q2SQY","ts":"1608631944.239400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XNBTw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well my investigation yields that the very most allocations are not in computing (newly allocating) the gradient"}]}]}]},{"client_msg_id":"6a5a081a-4ede-441c-9a5f-34d9073e5468","type":"message","text":"if you have the code somewhere I can take a look if I can improve something","user":"U9AHT3YM7","ts":"1608631949.239600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7P8G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you have the code somewhere I can take a look if I can improve something"}]}]}]},{"client_msg_id":"ab23191b-1cbe-42db-87d4-9e3c8fc68d3f","type":"message","text":"In short this branch <https://github.com/JuliaManifolds/Manopt.jl/tree/quasiNewton>","user":"UPJ6Q2SQY","ts":"1608631980.239900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vRyk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In short this branch "},{"type":"link","url":"https://github.com/JuliaManifolds/Manopt.jl/tree/quasiNewton"}]}]}]},{"client_msg_id":"465162d2-bd6f-41d2-a1f2-db528cd1ee58","type":"message","text":"let me check a few detailed files","user":"UPJ6Q2SQY","ts":"1608631991.240200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l7V7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"let me check a few detailed files"}]}]}]},{"client_msg_id":"3da887ac-71dd-467d-9c2e-8f0a0622f4ff","type":"message","text":"ok, it would also be helpful to have the code you use to benchmark","user":"U9AHT3YM7","ts":"1608632011.240800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"X9jC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, it would also be helpful to have the code you use to benchmark"}]}]}]},{"client_msg_id":"615f0874-1ab0-4f9a-a118-1575dec40b3d","type":"message","text":"the inplace/nonlimitedmemory one is fine so far, the limited one, ...","user":"UPJ6Q2SQY","ts":"1608632022.241000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ydu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the inplace/nonlimitedmemory one is fine so far, the limited one, ..."}]}]}]},{"client_msg_id":"26907d4f-0832-4d2c-936e-3e255bb78f31","type":"message","text":"... is this example <https://github.com/JuliaManifolds/Manopt.jl/blob/quasiNewton/examples/Quasi_Newton/Brockett_Benchmark.jl>","user":"UPJ6Q2SQY","ts":"1608632040.241200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"abE5Q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"... is this example "},{"type":"link","url":"https://github.com/JuliaManifolds/Manopt.jl/blob/quasiNewton/examples/Quasi_Newton/Brockett_Benchmark.jl"}]}]}]},{"client_msg_id":"48ee5977-a57f-49e0-9b71-b81cf645b0ed","type":"message","text":"(oh let me push my recent changes from yesterday first :smile:","user":"UPJ6Q2SQY","ts":"1608632058.241500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ixW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(oh let me push my recent changes from yesterday first "},{"type":"emoji","name":"smile"}]}]}]},{"client_msg_id":"0a8ad489-d61f-497c-ad0f-e621513802b4","type":"message","text":"sure :slightly_smiling_face:","user":"U9AHT3YM7","ts":"1608632090.241700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vgQTT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"b9de4157-855e-423f-8d7d-0deaecb90873","type":"message","text":"hm, these are some relatively high dimensional Stiefel manifolds","user":"U9AHT3YM7","ts":"1608632115.242200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pzk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hm, these are some relatively high dimensional Stiefel manifolds"}]}]}]},{"client_msg_id":"be811720-dc75-43e2-b8b9-d9eb0c0c98d4","type":"message","text":"so now. It works with cautious update and the limited memory structure <https://github.com/JuliaManifolds/Manopt.jl/blob/265ab2e2b2a7b221e3977aa9ef7216c40413b7c6/src/solvers/quasi_Newton.jl#L189>","user":"UPJ6Q2SQY","ts":"1608632121.242400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CRsv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so now. It works with cautious update and the limited memory structure "},{"type":"link","url":"https://github.com/JuliaManifolds/Manopt.jl/blob/265ab2e2b2a7b221e3977aa9ef7216c40413b7c6/src/solvers/quasi_Newton.jl#L189"}]}]}]},{"client_msg_id":"4062b552-4ca8-4c69-9605-bd70ba0979f1","type":"message","text":"yes the 32,32, ones are fine, there we are at 1.5x slower than C++","user":"UPJ6Q2SQY","ts":"1608632145.242900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BFC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes the 32,32, ones are fine, there we are at 1.5x slower than C++"}]}]}]},{"client_msg_id":"f01a3626-1b9e-46c4-b625-2eba5631324e","type":"message","text":"the 1000,2-Stiefel is most off (factor 8 on my machine) 1000,5 cloest for them (factor 2.9 slower)","user":"UPJ6Q2SQY","ts":"1608632179.243600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6Z8Aq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the 1000,2-Stiefel is most off (factor 8 on my machine) 1000,5 cloest for them (factor 2.9 slower)"}]}]}]},{"client_msg_id":"cbdf92af-b512-4f35-9507-525986b543be","type":"message","text":"and I think the main part is to get a nice interface for mutating gradient functions (so that it's compatible for start-users who still want to use gradients without inplace computation)","user":"UPJ6Q2SQY","ts":"1608632225.244500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q5pz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and I think the main part is to get a nice interface for mutating gradient functions (so that it's compatible for start-users who still want to use gradients without inplace computation)"}]}]}]},{"client_msg_id":"98234621-d9a6-417f-bf97-163117928ace","type":"message","text":"The data structure for limited memory is now this one <https://github.com/JuliaManifolds/Manopt.jl/blob/265ab2e2b2a7b221e3977aa9ef7216c40413b7c6/src/plans/gradient_plan.jl#L1106>","user":"UPJ6Q2SQY","ts":"1608632307.244800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KBM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The data structure for limited memory is now this one "},{"type":"link","url":"https://github.com/JuliaManifolds/Manopt.jl/blob/265ab2e2b2a7b221e3977aa9ef7216c40413b7c6/src/plans/gradient_plan.jl#L1106"}]}]}]},{"client_msg_id":"50238112-6892-41be-9c07-dd0b0b48e04e","type":"message","text":"and should be quite nice already, since it uses a CircularQueue already","user":"UPJ6Q2SQY","ts":"1608632329.245200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NmFiU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and should be quite nice already, since it uses a CircularQueue already"}]}]}]},{"client_msg_id":"15b86f87-b08a-4ffb-8f58-e3e511cd5aff","type":"message","text":"and for the gradient, a mutating variant would be nice, but I am missing a nice backward-compatible interface idea","user":"UPJ6Q2SQY","ts":"1608632378.245900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bpg6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and for the gradient, a mutating variant would be nice, but I am missing a nice backward-compatible interface idea"}]}]}]},{"client_msg_id":"7c1d3b91-8c3e-49df-9540-9c1b96ac37c6","type":"message","text":"ok, I can see a few separate issues here","user":"U9AHT3YM7","ts":"1608632417.246800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q6eu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, I can see a few separate issues here"}]}]}]},{"client_msg_id":"fe67a24a-4968-46a0-883c-157c5cb28853","type":"message","text":"(since both a `gradF` as well as a `gradF!` are the same type of function when looking at it as a parameter)","user":"UPJ6Q2SQY","ts":"1608632424.247100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bcr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(since both a "},{"type":"text","text":"gradF","style":{"code":true}},{"type":"text","text":" as well as a "},{"type":"text","text":"gradF!","style":{"code":true}},{"type":"text","text":" are the same type of function when looking at it as a parameter)"}]}]}]},{"client_msg_id":"935c8ea5-304f-4230-836c-615291933c9c","type":"message","text":"I need to investigate a few things here","user":"U9AHT3YM7","ts":"1608632461.247900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lSGG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I need to investigate a few things here"}]}]}]},{"client_msg_id":"6728d0df-9b9b-405b-9d12-d7cbbe0d5a55","type":"message","text":"oh, nice! I worked on that a whole day (well a few more, started Thursday to revise my students code, he finished his Bachelor Friday :tada:)","user":"UPJ6Q2SQY","ts":"1608632470.248100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2rE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, nice! I worked on that a whole day (well a few more, started Thursday to revise my students code, he finished his Bachelor Friday "},{"type":"emoji","name":"tada"},{"type":"text","text":")"}]}]}]},{"client_msg_id":"cece6dc7-5fe6-4c11-ac56-80febea1bc98","type":"message","text":"thanks for taking a look :slightly_smiling_face:","user":"UPJ6Q2SQY","ts":"1608632482.248500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oMC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks for taking a look "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"042f3762-c423-4c2e-9c73-4bcc6ee72573","type":"message","text":"cool :slightly_smiling_face: , congratulations :tada:","user":"U9AHT3YM7","ts":"1608632503.248800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wFzE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cool "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" , congratulations "},{"type":"emoji","name":"tada"}]}]}]},{"client_msg_id":"e1a3a36b-643d-4497-b31a-6e2998fdfb27","type":"message","text":"Yes, and he did most of the BFGS variants in his thesis, and coded that on the branch (I just divided that in a few structures to be more flexible and include for example DFP &amp; Broyden in the future)","user":"UPJ6Q2SQY","ts":"1608632585.250000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"siSUD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, and he did most of the BFGS variants in his thesis, and coded that on the branch (I just divided that in a few structures to be more flexible and include for example DFP & Broyden in the future)"}]}]}]},{"client_msg_id":"c7d48632-b27b-4cb0-9bed-407d070ca126","type":"message","text":"that's an impressive work for a Bachelor degree","user":"U9AHT3YM7","ts":"1608632679.250300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1A9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's an impressive work for a Bachelor degree"}]}]}]},{"client_msg_id":"a2733027-eb77-4222-bfda-b6a44b40b37c","type":"message","text":"yes, definetly","user":"UPJ6Q2SQY","ts":"1608632706.250500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ujZ9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, definetly"}]}]}]},{"client_msg_id":"92283f48-f0bb-4d7b-8e71-2c25a31c0f0f","type":"message","text":"my goal was to get a first plain inverseBFGS quasi newton and we ended up with Cautious updates and limited memory and such, really wuite nice (ok the thesis is also about 80 pages, was a lot to read for me then)","user":"UPJ6Q2SQY","ts":"1608632751.251400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jHu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"my goal was to get a first plain inverseBFGS quasi newton and we ended up with Cautious updates and limited memory and such, really wuite nice (ok the thesis is also about 80 pages, was a lot to read for me then)"}]}]}],"reactions":[{"name":"+1","users":["U9AHT3YM7"],"count":1}]},{"client_msg_id":"d1c99c24-5629-4db6-87a7-d032a4d2a598","type":"message","text":"the Wolfe backtracking seems to be sometimes slow, too; but for so much work he did quite well (and my main fix to spare a factor of 10 yesterday was to rearrange a matrix multiplicaion on Stiefel (1000,x) :smile: )","user":"UPJ6Q2SQY","ts":"1608632901.252400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=+ku4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the Wolfe backtracking seems to be sometimes slow, too; but for so much work he did quite well (and my main fix to spare a factor of 10 yesterday was to rearrange a matrix multiplicaion on Stiefel (1000,x) "},{"type":"emoji","name":"smile"},{"type":"text","text":" )"}]}]}]},{"client_msg_id":"c0ced6c8-a4fe-44e0-89b3-a698bc907661","type":"message","text":"Maybe it would be easiest to do a different Problem type for the mutating gradient?","user":"UPJ6Q2SQY","ts":"1608633116.252900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lgCz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe it would be easiest to do a different Problem type for the mutating gradient?"}]}]}]},{"client_msg_id":"56413c35-c3bc-4ef5-9e54-56d06dbe8ea0","type":"message","text":"does not yet 100% help for the hich level interface, but would make the internal path easiest","user":"UPJ6Q2SQY","ts":"1608633157.253400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9Aa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does not yet 100% help for the hich level interface, but would make the internal path easiest"}]}]}]},{"client_msg_id":"3d87cf5f-25f4-44a5-9b86-960a6f837595","type":"message","text":"the hich level interface could have an optional argument (keyword argument) `mutating_gradient=true`","user":"UPJ6Q2SQY","ts":"1608633189.254100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l8/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the hich level interface could have an optional argument (keyword argument) "},{"type":"text","text":"mutating_gradient=true","style":{"code":true}}]}]}]},{"client_msg_id":"adcd1e14-ad5a-40eb-aa10-05f6d832d681","type":"message","text":"The first thing here is, would you internally use the mutating gradient? For `copyto!`-able things you can turn the non-mutating gradient into a mutating gradient","user":"U9AHT3YM7","ts":"1608633354.255500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tGi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The first thing here is, would you internally use the mutating gradient? For "},{"type":"text","text":"copyto!","style":{"code":true}},{"type":"text","text":"-able things you can turn the non-mutating gradient into a mutating gradient"}]}]}]},{"client_msg_id":"2e8214a8-faf0-4146-9e7e-4a27680a0e7b","type":"message","text":"sure I would","user":"UPJ6Q2SQY","ts":"1608633441.256200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+u=5E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure I would"}]}]}]},{"client_msg_id":"659e4cf9-ceb4-4dfc-8f5b-8faf0e7b9ee6","type":"message","text":"ok","user":"U9AHT3YM7","ts":"1608633446.256400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uOh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok"}]}]}]},{"client_msg_id":"cd1724ea-a24f-4459-b388-b5e408e90bd0","type":"message","text":"my current profiling of above mentioned brocket problem says most allocations are required to get the gradient","user":"UPJ6Q2SQY","ts":"1608633465.256900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=EvN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"my current profiling of above mentioned brocket problem says most allocations are required to get the gradient"}]}]}]},{"client_msg_id":"6a1296c8-cafb-45f7-8c26-e411b336581d","type":"message","text":"since I evaluate that every iteration at least once (+ a few times for the stepsize for example when doing Armijo or Wolfe)","user":"UPJ6Q2SQY","ts":"1608633503.257500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q6S1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"since I evaluate that every iteration at least once (+ a few times for the stepsize for example when doing Armijo or Wolfe)"}]}]}]},{"client_msg_id":"23ca25d3-0a3f-4742-8aa5-0e4272aeef18","type":"message","text":"You mean this gradient: <https://github.com/JuliaManifolds/Manopt.jl/blob/9b9c0ba6216e39aa91e03377668c19fe1afc1ec5/examples/Quasi_Newton/Brockett_Benchmark.jl#L12> ?","user":"U9AHT3YM7","ts":"1608633535.257900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SQqF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You mean this gradient: "},{"type":"link","url":"https://github.com/JuliaManifolds/Manopt.jl/blob/9b9c0ba6216e39aa91e03377668c19fe1afc1ec5/examples/Quasi_Newton/Brockett_Benchmark.jl#L12"},{"type":"text","text":" ?"}]}]}]},{"client_msg_id":"2fc8ceeb-9834-4e75-8f7f-db25f6b79ecb","type":"message","text":"but yes I am also not yet 100% sure how to do that nicely for the end user","user":"UPJ6Q2SQY","ts":"1608633544.258200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qSh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but yes I am also not yet 100% sure how to do that nicely for the end user"}]}]}]},{"client_msg_id":"c2e9d075-eee5-4a3a-b428-ab16a856e5c7","type":"message","text":"exactly that line","user":"UPJ6Q2SQY","ts":"1608633556.258400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ygz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"exactly that line"}]}]}]},{"client_msg_id":"24ec8c46-c0aa-4c20-93cb-b29c3502daf7","type":"message","text":"the `()` are the reduction by 10x in time but still it does the majority of allocations in that line currently.","user":"UPJ6Q2SQY","ts":"1608633603.259100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6q/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the "},{"type":"text","text":"()","style":{"code":true}},{"type":"text","text":" are the reduction by 10x in time but still it does the majority of allocations in that line currently."}]}]}]},{"client_msg_id":"ad197a0b-f467-4f2b-9017-b1d88ee1342a","type":"message","text":"it computes the same matrix products more than once","user":"U9AHT3YM7","ts":"1608633629.259400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pO6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it computes the same matrix products more than once"}]}]}]},{"client_msg_id":"b9aeeaf7-ebfc-402b-a47f-5e4ce3e32e39","type":"message","text":"For a start you could compute any product at most once","user":"U9AHT3YM7","ts":"1608633668.259800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UT1r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For a start you could compute any product at most once"}]}]}]},{"client_msg_id":"1a84b975-fffa-483f-b177-b521b77fd240","type":"message","text":"sure that might also already help","user":"UPJ6Q2SQY","ts":"1608633680.260100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=vU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure that might also already help"}]}]}]},{"client_msg_id":"aa67d65e-11a9-47f1-9570-4d08da247063","type":"message","text":"in practice you probably should write that gradient as a functor that has a local buffer for intermediate results and uses `mul!` to multiply matrices in a non-allocating way","user":"U9AHT3YM7","ts":"1608633769.261200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qYSLY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in practice you probably should write that gradient as a functor that has a local buffer for intermediate results and uses "},{"type":"text","text":"mul!","style":{"code":true}},{"type":"text","text":" to multiply matrices in a non-allocating way"}]}]}]},{"client_msg_id":"bba96f3e-82f9-4a14-b011-dac9118f47da","type":"message","text":"yes that might be best (and store X'AX intermediate","user":"UPJ6Q2SQY","ts":"1608633825.261600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xz7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes that might be best (and store X'AX intermediate"}]}]}]},{"client_msg_id":"a86ca9df-a607-4e00-88dc-b70a60a7aed8","type":"message","text":"Also, `N` should be a Diagonal{Float64}(k : -1: 1)","user":"U9AHT3YM7","ts":"1608634118.262200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BeYd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also, "},{"type":"text","text":"N","style":{"code":true}},{"type":"text","text":" should be a Diagonal{Float64}(k : -1: 1)"}]}]}]},{"client_msg_id":"dec76066-aa25-428d-8429-2fb060640d27","type":"message","text":"yes, sure, saw that, too, already","user":"UPJ6Q2SQY","ts":"1608634271.262500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1+j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, sure, saw that, too, already"}]}]}]},{"client_msg_id":"035651ce-974b-4f1a-8194-c13e465a47b6","type":"message","text":"my current functor only stores a vector","user":"UPJ6Q2SQY","ts":"1608634286.262800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KKAy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"my current functor only stores a vector"}]}]}],"reactions":[{"name":"+1","users":["U9AHT3YM7"],"count":1}]},{"client_msg_id":"816029dd-71de-474e-986c-44841d4dea81","type":"message","text":"just a few bugs left somewhere, but thanks for the idea to store in a functor let's see what that brings ones I got my types right","user":"UPJ6Q2SQY","ts":"1608634592.263500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"935","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"just a few bugs left somewhere, but thanks for the idea to store in a functor let's see what that brings ones I got my types right"}]}]}]},{"client_msg_id":"678ab714-37d3-461d-a370-22e3100e006d","type":"message","text":"(still have a knot in my brain where I think I get a matrix bu I get a float, slightly confused how large matrix multiplication interims results are now floats and not matrices... but I've been looking at this code yesterrday for a whole day straight already, so ... wlll)","user":"UPJ6Q2SQY","ts":"1608634735.264700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WLxEG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(still have a knot in my brain where I think I get a matrix bu I get a float, slightly confused how large matrix multiplication interims results are now floats and not matrices... but I've been looking at this code yesterrday for a whole day straight already, so ... wlll)"}]}]}]},{"client_msg_id":"2affc6d2-d32a-48a4-80db-c11ed73bac56","type":"message","text":"floats instead of matrices? well, that sounds like a problem :slightly_smiling_face:","user":"U9AHT3YM7","ts":"1608634789.265100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QtNU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"floats instead of matrices? well, that sounds like a problem "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"5ac1f713-f0ee-4fb4-a189-80f9881b5b84","type":"message","text":"yea some types still wrong I'll try","user":"UPJ6Q2SQY","ts":"1608634867.265400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6l7vV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yea some types still wrong I'll try"}]}]}]},{"client_msg_id":"6e063797-de60-42fa-8bc7-a4cdac9f6908","type":"message","text":"ok more like a problem is of course that the whole manopt code does not work if you pass a functor instead of a function","user":"UPJ6Q2SQY","ts":"1608634900.265900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jru","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok more like a problem is of course that the whole manopt code does not work if you pass a functor instead of a function"}]}]}]},{"client_msg_id":"bfd9ee68-f1bd-4255-b2ce-7a13d893cc26","type":"message","text":"so while your idea is good it will require a major rework of manopt?","user":"UPJ6Q2SQY","ts":"1608634918.266300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E4Das","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so while your idea is good it will require a major rework of manopt?"}]}]}]},{"client_msg_id":"cacbfb86-ef26-4e7a-8d4c-6c95488dc128","type":"message","text":"yes, I think Manopt.jl should be modified to accept functors","user":"U9AHT3YM7","ts":"1608634986.266800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oCiqn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, I think Manopt.jl should be modified to accept functors"}]}]}]},{"client_msg_id":"db08e300-5c1c-4baf-ac56-9f4257cebe40","type":"message","text":"that's a useful thing to have","user":"U9AHT3YM7","ts":"1608634991.267000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qTtX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's a useful thing to have"}]}]}]},{"client_msg_id":"dc00bf1a-949c-46d1-92c9-6e635a960ae3","type":"message","text":"sure but before doing that I would like to also think about mutating gradients then","user":"UPJ6Q2SQY","ts":"1608635010.267500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LIBhw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure but before doing that I would like to also think about mutating gradients then"}]}]}]},{"client_msg_id":"cbe91192-f190-4eb3-818b-9f165f2f3904","type":"message","text":"just in case, we already have mutating gradients in Manifolds.jl :slightly_smiling_face:","user":"U9AHT3YM7","ts":"1608635030.268000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pey","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"just in case, we already have mutating gradients in Manifolds.jl "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"99ac3f27-7b76-445b-b3f2-35e55443d604","type":"message","text":"I have to check, yes, it's more llike _how_ to model it, I think","user":"UPJ6Q2SQY","ts":"1608635054.268400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ptq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have to check, yes, it's more llike "},{"type":"text","text":"how","style":{"italic":true}},{"type":"text","text":" to model it, I think"}]}]}]},{"client_msg_id":"12cf31c8-77bd-42f7-8dcf-ef4cee2756fc","type":"message","text":"maybe like the question how to “recognize” whether its mutating or not (different problem structs?) and how to change the interfaces","user":"UPJ6Q2SQY","ts":"1608635138.270300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kEib","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"maybe like the question how to “recognize” whether its mutating or not (different problem structs?) and how to change the interfaces"}]}]}]},{"client_msg_id":"8800a47e-7a5e-4f78-b276-cb086a319ab9","type":"message","text":"sure, it's a complex thing -- sometimes you have a ready formula, sometimes you want to use AD for example","user":"U9AHT3YM7","ts":"1608635143.270400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=R+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure, it's a complex thing -- sometimes you have a ready formula, sometimes you want to use AD for example"}]}]}]},{"client_msg_id":"aa65fe1a-3e68-4eea-879e-44d7a5d3e9c5","type":"message","text":"I did some benchmarking in that Brockett problem and it looks like actual matmuls take most of the time there","user":"U9AHT3YM7","ts":"1608635143.270500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"msbmm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I did some benchmarking in that Brockett problem and it looks like actual matmuls take most of the time there"}]}]}]},{"client_msg_id":"711676a7-f691-4636-9d7b-5813cdb92373","type":"message","text":"Yes, probably either a different problem struct or maybe a type parameter that tells which one it is?","user":"U9AHT3YM7","ts":"1608635187.271000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ywOSY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, probably either a different problem struct or maybe a type parameter that tells which one it is?"}]}]}]},{"client_msg_id":"c84d6a9b-4017-487f-9c2a-b6acd95f8722","type":"message","text":"and then maybe a kwarg that tells which one it is, like you wrote earlier","user":"U9AHT3YM7","ts":"1608635223.271600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"R=i=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and then maybe a kwarg that tells which one it is, like you wrote earlier"}]}]}]},{"client_msg_id":"cbc6d2ca-dd9b-4c19-8054-b2f7826e4e88","type":"message","text":"my idea would be internally do different structs and in the high level functions (`quasi_nrewon*) i do a keyword to specify the type of gradient function","user":"UPJ6Q2SQY","ts":"1608635370.272400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6XXLK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"my idea would be internally do different structs and in the high level functions (`quasi_nrewon*) i do a keyword to specify the type of gradient function"}]}]}]},{"client_msg_id":"b34e663d-5f12-488d-ac66-98a63ed8d9ad","type":"message","text":"yes the mat muls might be the slowest, still reducing the allocations will maybe be a good idea","user":"UPJ6Q2SQY","ts":"1608635426.272900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AvY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes the mat muls might be the slowest, still reducing the allocations will maybe be a good idea"}]}]}]},{"client_msg_id":"40e77878-8358-4578-aa19-c170a63cbe7d","type":"message","text":"at this level allocations would make very little difference","user":"U9AHT3YM7","ts":"1608635462.273300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Bn+C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"at this level allocations would make very little difference"}]}]}]},{"client_msg_id":"a8713193-8875-4f02-aa11-4a77cb649e64","type":"message","text":"a simple A*X multiplication in that problem takes about 200 microseconds","user":"U9AHT3YM7","ts":"1608635492.273700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pm=J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"a simple A*X multiplication in that problem takes about 200 microseconds"}]}]}]},{"client_msg_id":"a51dea86-06d1-4563-8e95-5499a8f63f63","type":"message","text":"and a single allocation is on the order of 50 ns","user":"U9AHT3YM7","ts":"1608635506.274100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"snkW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and a single allocation is on the order of 50 ns"}]}]}]},{"client_msg_id":"b34e9c18-f284-485a-b9b0-f81d9d97a83a","type":"message","text":"sometimes more, sometimes less, depending on many things","user":"U9AHT3YM7","ts":"1608635520.274400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iCYib","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sometimes more, sometimes less, depending on many things"}]}]}]},{"client_msg_id":"f025f7c1-422f-4e11-a087-54f9a2a71c03","type":"message","text":"yes, sure. I am also already quite fine with being a factor 5 slower than ROPTLIB, since our code is more general","user":"UPJ6Q2SQY","ts":"1608635798.275400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LJVB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, sure. I am also already quite fine with being a factor 5 slower than ROPTLIB, since our code is more general"}]}]}]},{"client_msg_id":"70e8913b-4a96-454e-802f-085c1cacfb3d","type":"message","text":"that's a decent result but it would still be nice to know which part is slower :slightly_smiling_face:","user":"U9AHT3YM7","ts":"1608636049.276000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TzqT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's a decent result but it would still be nice to know which part is slower "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"2bc6b2cf-59bd-4773-b2f2-bb459e1b59b5","type":"message","text":"here is my code for the functor BTW:\n```struct DF\n    A::Matrix{Float64}\n    N::Diagonal{Float64,Vector{Float64}}\nend\n\nfunction (df::DF)(X::Array{Float64,2})\n\n    AX = df.A*X\n    XpAX = X' * AX\n    return 2 .* AX * df.N .- X * XpAX * df.N .- X * df.N * XpAX\nend```","user":"U9AHT3YM7","ts":"1608636063.276400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oqJi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"here is my code for the functor BTW:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"struct DF\n    A::Matrix{Float64}\n    N::Diagonal{Float64,Vector{Float64}}\nend\n\nfunction (df::DF)(X::Array{Float64,2})\n\n    AX = df.A*X\n    XpAX = X' * AX\n    return 2 .* AX * df.N .- X * XpAX * df.N .- X * df.N * XpAX\nend"}]}]}]},{"client_msg_id":"30e8543e-e6c5-45f3-852b-8bd5db6059ad","type":"message","text":"maybe it could be slightly faster but anyway it's limited by matrix multiplication time","user":"U9AHT3YM7","ts":"1608636114.277100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zkjLP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"maybe it could be slightly faster but anyway it's limited by matrix multiplication time"}]}]}]},{"client_msg_id":"e8536d98-f31c-4cac-b06d-d1591e8500e2","type":"message","text":"mine also stored XpAX in DF, but despite that is similar, and then I have to refacotr Manopt. Before doing that I would like to fix hot to also model the mutating gradient stuff in a nice way (i.e. without many duplicates in code for the two variants)","user":"UPJ6Q2SQY","ts":"1608636276.278400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AnPje","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"mine also stored XpAX in DF, but despite that is similar, and then I have to refacotr Manopt. Before doing that I would like to fix hot to also model the mutating gradient stuff in a nice way (i.e. without many duplicates in code for the two variants)"}]}]}]},{"client_msg_id":"9a0a69ea-943a-41e8-929b-8ea99c273d59","type":"message","text":"and surely for functors a common supertype would also be good i think","user":"UPJ6Q2SQY","ts":"1608636381.278800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mD/lg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and surely for functors a common supertype would also be good i think"}]}]}]},{"client_msg_id":"db75b604-8bd3-4013-950e-ed00b2f5da96","type":"message","text":"Yes, why not, it could make updating Manopt easier","user":"U9AHT3YM7","ts":"1608637425.279100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2HxRl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, why not, it could make updating Manopt easier"}]}]}]},{"client_msg_id":"79393bc3-f100-4cea-b4b2-ed1aeb9c4677","type":"message","text":"And one can still restrict the field type to be Function or that abstract Gradient Functor. Or maybe even always be a functor and encapsulate any function into a functor. I will think about that","user":"UPJ6Q2SQY","ts":"1608637617.280000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZSt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And one can still restrict the field type to be Function or that abstract Gradient Functor. Or maybe even always be a functor and encapsulate any function into a functor. I will think about that"}]}]}]},{"client_msg_id":"fbdf6bc9-34f2-450e-a254-dad9223ee32d","type":"message","text":"Something like\n```abstract type AbstractGradient end\n\nstruct Gradient &lt;: AbstractGradient\n\tgradF::Function\nend\n\nstruct MutatingGradient &lt;: AbstractGradient\n\tgradF::Function\nend```\nI think I like this approach","user":"UPJ6Q2SQY","ts":"1608637741.280600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RcaEJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"abstract type AbstractGradient end\n\nstruct Gradient <: AbstractGradient\n\tgradF::Function\nend\n\nstruct MutatingGradient <: AbstractGradient\n\tgradF::Function\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I think I like this approach"}]}]}]},{"client_msg_id":"fb246624-0de4-4d3c-ba3b-e51c19cdcd12","type":"message","text":"Ha, but before doing that, I noticed it was just my student typing the interface a little too tight; Manopt i.e. the problem structure) can surely already handle gradient functors.","user":"UPJ6Q2SQY","ts":"1608638831.281400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w3Kli","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ha, but before doing that, I noticed it was just my student typing the interface a little too tight; Manopt i.e. the problem structure) can surely already handle gradient functors."}]}]}]},{"client_msg_id":"a594f98d-b72d-4e81-aea2-41885790b247","type":"message","text":"ah cool, now we are on par with ROPTLIB roughly :+1: thanks for the idea with the functor","user":"UPJ6Q2SQY","ts":"1608639611.282400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kuw23","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah cool, now we are on par with ROPTLIB roughly "},{"type":"emoji","name":"+1"},{"type":"text","text":" thanks for the idea with the functor"}]}]}],"reactions":[{"name":"tada","users":["U9AHT3YM7"],"count":1}]},{"client_msg_id":"2cc42e5a-3567-4235-bdd7-f9295854b04f","type":"message","text":"I will do the redesign for the mutating gradient in another PR for sure and maybe after christmas","user":"UPJ6Q2SQY","ts":"1608639932.283000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dOP6u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I will do the redesign for the mutating gradient in another PR for sure and maybe after christmas"}]}]}]},{"client_msg_id":"d24d3f85-b6aa-4ab2-805d-d0e1315cd556","type":"message","text":"Can someone help me with a reference or an explanation in terms of the limitations there are with manifold optimization over real valued positive semi-definite matrices ? The case I have in mind is estimating a covariance matrix in a maximum likelihood context.","user":"U6CJRSR63","ts":"1608640092.284700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZuQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can someone help me with a reference or an explanation in terms of the limitations there are with manifold optimization over real valued positive semi-definite matrices ? The case I have in mind is estimating a covariance matrix in a maximum likelihood context."}]}]}]},{"client_msg_id":"22ca4b70-c12a-4c2c-b959-3fc523fb3315","type":"message","text":"Is it possible? Or do I have to restrict them somehow","user":"U6CJRSR63","ts":"1608640140.285300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iCA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it possible? Or do I have to restrict them somehow"}]}]}]},{"client_msg_id":"4d2f009c-0ad9-42a0-9a0f-5937d837a866","type":"message","text":"Can you elaborate a little more? The first point I see is that covariance matrices are only semidefinite which is not a manifold (positive definite is)","user":"UPJ6Q2SQY","ts":"1608640157.285700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lA6F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can you elaborate a little more? The first point I see is that covariance matrices are only semidefinite which is not a manifold (positive definite is)"}]}]}]},{"client_msg_id":"b9aca80f-72c3-489a-a035-c433640e1783","type":"message","text":"(at least I don't have a metric in mind that turns semidefinite matrices into a manifold)","user":"UPJ6Q2SQY","ts":"1608640228.286100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"84cK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(at least I don't have a metric in mind that turns semidefinite matrices into a manifold)"}]}]}]},{"client_msg_id":"7bc1b45d-5674-4efa-9905-3dc728535c04","type":"message","text":"Yeah, let me see if I can come up with an actual example...","user":"U6CJRSR63","ts":"1608640424.286600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kHP5H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, let me see if I can come up with an actual example..."}]}]}]},{"client_msg_id":"82b65e1d-444c-4e65-b49c-21a5debc852a","type":"message","text":"Cool. If you can ensure, that 0 (and 1) are excluded, you can surely use SPDs :slightly_smiling_face:","user":"UPJ6Q2SQY","ts":"1608640598.287000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"php","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Cool. If you can ensure, that 0 (and 1) are excluded, you can surely use SPDs "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"d23058ce-dbb9-4493-bc49-e7a995ce062c","type":"message","text":"then the only disadvantage is, that exp/log are more expensive then +/- but since you can use an unconstrained algorithm, that might improve your speed again","user":"UPJ6Q2SQY","ts":"1608640636.287900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DXHM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"then the only disadvantage is, that exp/log are more expensive then +/- but since you can use an unconstrained algorithm, that might improve your speed again"}]}]}]},{"client_msg_id":"58d075fe-a866-4923-a19d-02567c8975d0","type":"message","text":"is that S for symmetric then? :slightly_smiling_face:","user":"U6CJRSR63","ts":"1608640639.288000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZFkgN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is that S for symmetric then? "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"38f289aa-c9b1-4ad1-8223-b377df90c85c","type":"message","text":"ah yes","user":"UPJ6Q2SQY","ts":"1608640649.288300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OrUw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah yes"}]}]}]},{"client_msg_id":"eaf2f457-c060-4e3d-92c5-36da133e9e0c","type":"message","text":"Good","user":"U6CJRSR63","ts":"1608640652.288500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wcrn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Good"}]}]}]},{"client_msg_id":"a4bc2556-015c-4e6d-8c89-3c798d655f75","type":"message","text":"I was almost confused there :smile:","user":"U6CJRSR63","ts":"1608640659.288900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N6I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was almost confused there "},{"type":"emoji","name":"smile"}]}]}]},{"client_msg_id":"b213c130-98d5-4978-8cac-56057caad0f6","type":"message","text":"you'Re right it might be mistaken with semi, but no its symmetric :smile:","user":"UPJ6Q2SQY","ts":"1608640669.289200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wRRH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you'Re right it might be mistaken with semi, but no its symmetric "},{"type":"emoji","name":"smile"}]}]}]},{"client_msg_id":"ed5487aa-2a1b-4087-81a3-71c06ba7c964","type":"message","text":"I never noticed :wink:","user":"UPJ6Q2SQY","ts":"1608640676.289400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qJn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I never noticed "},{"type":"emoji","name":"wink"}]}]}]},{"client_msg_id":"e244e52d-867b-4287-af3b-0cf5f7197382","type":"message","text":"I just have a bunch of parameters in a maximum likelihood problem and some of them are covariance matrices so I was wondering if I could use manifold techniques. Right now I'm transforming it to an unconstrained domain and using unconstrained optimization which is probably.. not too good for the geometry of the problem, so I'd like to use a more direct approach, treating the restrictions directly as a domain restriction (manifold optimization) or some other constrained optimization approach","user":"U6CJRSR63","ts":"1608641058.292600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i8V=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I just have a bunch of parameters in a maximum likelihood problem and some of them are covariance matrices so I was wondering if I could use manifold techniques. Right now I'm transforming it to an unconstrained domain and using unconstrained optimization which is probably.. not too good for the geometry of the problem, so I'd like to use a more direct approach, treating the restrictions directly as a domain restriction (manifold optimization) or some other constrained optimization approach"}]}]}]},{"client_msg_id":"d92611f6-d863-4b2f-922f-3b11aa4e8245","type":"message","text":"When I search for different approachs I mostly get stuff on CMA-ES :face_with_raised_eyebrow:","user":"U6CJRSR63","ts":"1608641147.293200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qnzu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When I search for different approachs I mostly get stuff on CMA-ES "},{"type":"emoji","name":"face_with_raised_eyebrow"}]}]}]},{"client_msg_id":"1ac45439-fa7a-4eef-8923-f6506fdea17d","type":"message","text":"So if you assume that they are positive definite, which I also have done for a few papers already, you can surely use optim on SPDs","user":"UPJ6Q2SQY","ts":"1608641223.294000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9px","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So if you assume that they are positive definite, which I also have done for a few papers already, you can surely use optim on SPDs"}]}]}]},{"client_msg_id":"3bde6856-dfa8-4e8e-b59b-105650746d33","type":"message","text":"If not – then you might have to use a constrained approach","user":"UPJ6Q2SQY","ts":"1608641249.294600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"T5q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If not – then you might have to use a constrained approach"}]}]}]},{"client_msg_id":"9d707a36-568e-4821-9ce9-630628a28771","type":"message","text":"Right now I'm using the Cholesky parametrization like here <https://www.researchgate.net/profile/Douglas_Bates2/publication/227279675_Unconstrained_parametrizations_for_variance-covariance_matrices/links/00b4953b4106067e73000000/Unconstrained-parametrizations-for-variance-covariance-matrices.pdf|https://www.researchgate.net/profile/Douglas_Bates2/publication/227279675_Unconstrained[…]ined-parametrizations-for-variance-covariance-matrices.pdf> (and it's also in the NLME context that inspired that paper, so it's not a coincidence)","user":"U6CJRSR63","ts":"1608641296.295400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WpZx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right now I'm using the Cholesky parametrization like here "},{"type":"link","url":"https://www.researchgate.net/profile/Douglas_Bates2/publication/227279675_Unconstrained_parametrizations_for_variance-covariance_matrices/links/00b4953b4106067e73000000/Unconstrained-parametrizations-for-variance-covariance-matrices.pdf","text":"https://www.researchgate.net/profile/Douglas_Bates2/publication/227279675_Unconstrained[…]ined-parametrizations-for-variance-covariance-matrices.pdf"},{"type":"text","text":" (and it's also in the NLME context that inspired that paper, so it's not a coincidence)"}]}]}]},{"client_msg_id":"ff0c4dba-c642-40b9-8cf6-4efdd2aa1880","type":"message","text":"log Chlesky is a metric that we have in Manifolds for SPDs, I wasn't aware that it works for the semi case, too","user":"UPJ6Q2SQY","ts":"1608641423.296000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ju7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"log Chlesky is a metric that we have in Manifolds for SPDs, I wasn't aware that it works for the semi case, too"}]}]}]},{"client_msg_id":"0430d461-57cc-4770-abe6-814d5df5588a","type":"message","text":"so I will check :slightly_smiling_face:","user":"UPJ6Q2SQY","ts":"1608641432.296200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uxF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so I will check "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"fb356f8f-8950-4cee-9c2e-6fa260c14061","type":"message","text":"Ah! :smile: Section 2 starts with: Let M be positive definite ;=","user":"UPJ6Q2SQY","ts":"1608641474.296600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ugS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah! "},{"type":"emoji","name":"smile"},{"type":"text","text":" Section 2 starts with: Let M be positive definite ;="}]}]}]},{"client_msg_id":"bc7f989c-4c95-4496-9735-037b0c9acff1","type":"message","text":"So the difference in Manifolds/Manopt is, that you would not parametrize but take the SPDs as they are and you need a gradient wrt the corresponding metric, but then you can use a gradient descent (or if you are adventorous the just above mentioned, not yet tested LRBFGS).","user":"UPJ6Q2SQY","ts":"1608641591.298000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1vm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So the difference in Manifolds/Manopt is, that you would not parametrize but take the SPDs as they are and you need a gradient wrt the corresponding metric, but then you can use a gradient descent (or if you are adventorous the just above mentioned, not yet tested LRBFGS)."}]}]}]},{"client_msg_id":"abc0140c-2906-480b-823c-b518274022f3","type":"message","text":"Right, I just saw the same, I had missed the missing semi- :slightly_smiling_face:","user":"U6CJRSR63","ts":"1608642236.298500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5DINY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right, I just saw the same, I had missed the missing semi- "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"38400ccb-6c39-4956-8ab5-1342db099d6a","type":"message","text":"So following their approach you can surely use Optimization on SPDs and have an unconstrained problem","user":"UPJ6Q2SQY","ts":"1608642301.299100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tAp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So following their approach you can surely use Optimization on SPDs and have an unconstrained problem"}]}]}]},{"client_msg_id":"36223bdc-b192-4694-8531-f60ac1dab7b3","type":"message","text":"the only interesting part / challenging part might be to compute the gradient","user":"UPJ6Q2SQY","ts":"1608642324.299500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KNpx/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the only interesting part / challenging part might be to compute the gradient"}]}]}]},{"client_msg_id":"509980d0-dfbe-454c-9060-8576836b565e","type":"message","text":"BTW, if you need to deal with the \"semi-\" part, maybe applying some regularization of the initial point would help: <https://github.com/mateuszbaran/CovarianceEstimation.jl>","user":"U9AHT3YM7","ts":"1608642474.301000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lOEJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"BTW, if you need to deal with the \"semi-\" part, maybe applying some regularization of the initial point would help: "},{"type":"link","url":"https://github.com/mateuszbaran/CovarianceEstimation.jl"}]}]}]},{"client_msg_id":"4e16f3fd-5c7c-4136-841b-06eaa014f696","type":"message","text":"so are you saying there's nothing significantly better than parametrizing by the cholesky factor and optimizing unconstrained?","user":"UMDEUKM29","ts":"1608642477.301100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3XZzE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so are you saying there's nothing significantly better than parametrizing by the cholesky factor and optimizing unconstrained?"}]}]}]},{"client_msg_id":"63adf99d-bc6c-4d3c-b252-9ba9fe6ffae0","type":"message","text":"(I have never done SPD optimization, just curious)","user":"UMDEUKM29","ts":"1608642485.301400","team":"T68168MUP","edited":{"user":"UMDEUKM29","ts":"1608642492.000000"},"blocks":[{"type":"rich_text","block_id":"obS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(I have never done SPD optimization, just curious)"}]}]}]},{"client_msg_id":"2a89be6f-81ac-4162-9f32-226cfb9f831d","type":"message","text":"well the metric is different, maybe? Otherwise I am not sure, since I never factorized and did the unconstrained (euclidean) approach on the parameters","user":"UPJ6Q2SQY","ts":"1608642540.302300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w3z2m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well the metric is different, maybe? Otherwise I am not sure, since I never factorized and did the unconstrained (euclidean) approach on the parameters"}]}]}]},{"client_msg_id":"06437dad-8857-4f85-89ab-90e64fda2a47","type":"message","text":"I think it should be similar to doing log(M,I,d) for all data points d and optimize in the tangent space?","user":"UPJ6Q2SQY","ts":"1608642573.303000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8vQ8Q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think it should be similar to doing log(M,I,d) for all data points d and optimize in the tangent space?"}]}]}]},{"client_msg_id":"0acfb2f8-0591-46d9-9a69-2c5287bae28c","type":"message","text":"the operational research people I know swear by cone programming, I guess it depends which part of problem space you're in, optim-style or jump-style","user":"UMDEUKM29","ts":"1608642634.304000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jpiS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the operational research people I know swear by cone programming, I guess it depends which part of problem space you're in, optim-style or jump-style"}]}]}]},{"client_msg_id":"5f8618e6-b044-48cb-a82f-3beb496abf88","type":"message","text":"cone (if you include the bondary) is how to handle the semi part, which is then included","user":"UPJ6Q2SQY","ts":"1608642704.304500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RqLG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cone (if you include the bondary) is how to handle the semi part, which is then included"}]}]}]},{"client_msg_id":"a92a42ad-b736-4d3b-a082-a30cb5054519","type":"message","text":"and conceptually you don't have to read all diffgeo-stuff, so I can understand their approaches for sure","user":"UPJ6Q2SQY","ts":"1608642744.305300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+gr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and conceptually you don't have to read all diffgeo-stuff, so I can understand their approaches for sure"}]}]}]},{"client_msg_id":"5101d6fd-e2c4-462b-9ebf-4c019ff547a3","type":"message","text":"Yes, I am aware of conic solvers, but my objective is generally not convex, so I'm not sure how applicable that is. I think it's mostly used in the convex objective conic constraints case, right?","user":"U6CJRSR63","ts":"1608642818.306300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zccct","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, I am aware of conic solvers, but my objective is generally not convex, so I'm not sure how applicable that is. I think it's mostly used in the convex objective conic constraints case, right?"}]}]}]},{"client_msg_id":"15008416-340e-4d69-9ae3-966ca97aa325","type":"message","text":"at least as far as my not-that-deep knowledge in that area is, yes.","user":"UPJ6Q2SQY","ts":"1608642854.306800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/DM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"at least as far as my not-that-deep knowledge in that area is, yes."}]}]}]},{"client_msg_id":"412a015a-c3ff-4e1e-8ca8-33cda5c5df6b","type":"message","text":"So another interesting question: If you take the right metric (i.e. right geodesics) might it be convex on a certain SPD-manifold (with that chosen metric)?","user":"UPJ6Q2SQY","ts":"1608642891.308100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nSJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So another interesting question: If you take the right metric (i.e. right geodesics) might it be convex on a certain SPD-manifold (with that chosen metric)?"}]}]}]},{"client_msg_id":"1d7b77e8-d0a0-459c-924a-5b57dc87dcc9","type":"message","text":"what does convexity have to do with metric?","user":"UMDEUKM29","ts":"1608642912.308400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gaMrf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what does convexity have to do with metric?"}]}]}]},{"client_msg_id":"a24b81a3-f93a-432d-bbc3-600cbc56d63d","type":"message","text":"ah I see","user":"UMDEUKM29","ts":"1608642937.308800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XkHbW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah I see"}]}]}]},{"client_msg_id":"877363cd-1098-4f06-be46-b3d62916a94d","type":"message","text":"geodesic convexity :slightly_smiling_face:","user":"UPJ6Q2SQY","ts":"1608642942.309000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+1MM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"geodesic convexity "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"1b058d84-5546-4e36-9bcb-ac95a4d9713c","type":"message","text":"I would have to check but the Brazilians (the group of Orizon Ferreira) has collected in one of their papers functions that are nonconvex in the euclidean sense but convex on manifolds","user":"UPJ6Q2SQY","ts":"1608643003.309800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x06","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would have to check but the Brazilians (the group of Orizon Ferreira) has collected in one of their papers functions that are nonconvex in the euclidean sense but convex on manifolds"}]}]}]},{"client_msg_id":"257d0db7-9eec-4a8e-9eb3-de5be7f097d1","type":"message","text":"Funny how things go sometimes. I had not looked at my github notifications yet, but just did. Dan Spielman ( <http://www.cs.yale.edu/homes/spielman/> ) mentioned PSD matrices on a PR 19 hours ago :laughing:","user":"U6CJRSR63","ts":"1608662774.311800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Eem2c","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Funny how things go sometimes. I had not looked at my github notifications yet, but just did. Dan Spielman ( "},{"type":"link","url":"http://www.cs.yale.edu/homes/spielman/"},{"type":"text","text":" ) mentioned PSD matrices on a PR 19 hours ago "},{"type":"emoji","name":"laughing"}]}]}],"reactions":[{"name":"sunglasses","users":["UPJ6Q2SQY"],"count":1}]},{"client_msg_id":"99abb175-bb9e-428f-a8b9-864487e1be06","type":"message","text":"<https://github.com/JuliaNLSolvers/Optim.jl/pull/872> btw","user":"U6CJRSR63","ts":"1608663767.312100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vhO","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaNLSolvers/Optim.jl/pull/872"},{"type":"text","text":" btw"}]}]}]},{"client_msg_id":"e7eac1d2-7739-4469-8edd-cffa9acb6f7f","type":"message","text":"cc: <@UBSFQB5DK>","user":"U6CJRSR63","ts":"1608663993.312500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hL4Q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cc: "},{"type":"user","user_id":"UBSFQB5DK"}]}]}]},{"type":"message","subtype":"channel_join","ts":"1608664002.312700","user":"UBSFQB5DK","text":"<@UBSFQB5DK> has joined the channel","inviter":"U6CJRSR63"},{"client_msg_id":"da9f206e-5418-4f6a-91f2-112b19ee9d5c","type":"message","text":"If my calculations are correct – there will be an update of `Manopt.jl`today introducing BFGS/inverseBFS/FDP/InverseDFP/Broyden/InverseBroyden/SR1/InverseSR1 quasi Newton as well as LBFGS (2-loop-recursion) :tada: as well as a 2 WolfePowell Linesearches","user":"UPJ6Q2SQY","ts":"1611675390.002100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xUY+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If my calculations are correct – there will be an update of "},{"type":"text","text":"Manopt.jl","style":{"code":true}},{"type":"text","text":"today introducing BFGS/inverseBFS/FDP/InverseDFP/Broyden/InverseBroyden/SR1/InverseSR1 quasi Newton as well as LBFGS (2-loop-recursion) "},{"type":"emoji","name":"tada"},{"type":"text","text":" as well as a 2 WolfePowell Linesearches"}]}]}],"reactions":[{"name":"tada","users":["U9AHT3YM7","UC6LC14MA"],"count":2}]},{"client_msg_id":"15dd0dbe-9f4f-4e05-839c-683e7fbddc25","type":"message","text":"That's great!","user":"U9AHT3YM7","ts":"1611678550.002400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6Uv/V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's great!"}]}]}]},{"client_msg_id":"09ece152-8abb-41f8-b9fb-5624951dad68","type":"message","text":"It's online! <https://manoptjl.org/stable/solvers/quasi_Newton.html>","user":"UPJ6Q2SQY","ts":"1611678855.002600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JMHn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's online! "},{"type":"link","url":"https://manoptjl.org/stable/solvers/quasi_Newton.html"}]}]}]},{"client_msg_id":"622c6055-a86d-4ae8-838b-b6a04875f975","type":"message","text":"And in other news: Manifolds.jl got its 100th :star: recently, yay!","user":"UPJ6Q2SQY","ts":"1611680736.003100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j=nL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And in other news: Manifolds.jl got its 100th "},{"type":"emoji","name":"star"},{"type":"text","text":" recently, yay!"}]}]}],"reactions":[{"name":"tada","users":["UM8JUNJG7","U9AHT3YM7","U82RE6STE","UHDQQ4GN6"],"count":4}]},{"client_msg_id":"ca78ed32-2604-42f2-b26c-bb37737d29ae","type":"message","text":"I noticed a little inconsistency in `Manopt.jl` yesterday: Currently gradients are functions `p -&gt; ...` depending on a point while Hessians are `(M,p,X) -&gt; ...`  depend on the point (of course a direction X) but especially also on the manifold. I think that is reasonable, since one often needs the manifold internally. But defining gradients at `(M,x) -&gt; ...` yields the question: Maybe the cost function could be defined that way too? or none of them?","user":"UPJ6Q2SQY","ts":"1611841958.006500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q4p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I noticed a little inconsistency in "},{"type":"text","text":"Manopt.jl","style":{"code":true}},{"type":"text","text":" yesterday: Currently gradients are functions "},{"type":"text","text":"p -> ...","style":{"code":true}},{"type":"text","text":" depending on a point while Hessians are "},{"type":"text","text":"(M,p,X) -> ...","style":{"code":true}},{"type":"text","text":"  depend on the point (of course a direction X) but especially also on the manifold. I think that is reasonable, since one often needs the manifold internally. But defining gradients at "},{"type":"text","text":"(M,x) -> ...","style":{"code":true}},{"type":"text","text":" yields the question: Maybe the cost function could be defined that way too? or none of them?"}]}]}]},{"client_msg_id":"b336104f-9c12-4f26-b178-8d62e4fd1eb5","type":"message","text":"I think, looking at the usual gradients that I have, having `M` without the need to bulid a functor would be nice, also for the cost.","user":"UPJ6Q2SQY","ts":"1611842022.007200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AqA8d","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think, looking at the usual gradients that I have, having "},{"type":"text","text":"M","style":{"code":true}},{"type":"text","text":" without the need to bulid a functor would be nice, also for the cost."}]}]}]},{"client_msg_id":"a020bff3-25e4-4a21-ae22-f620b671139f","type":"message","text":"(also having `M` as a parameter seems to reduce the allocations in the benchmark :wink: )","user":"UPJ6Q2SQY","ts":"1611842076.007800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YTo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(also having "},{"type":"text","text":"M","style":{"code":true}},{"type":"text","text":" as a parameter seems to reduce the allocations in the benchmark "},{"type":"emoji","name":"wink"},{"type":"text","text":" )"}]}]}]},{"client_msg_id":"0a4b27bd-ecd8-4f8c-9c1b-0e98727230df","type":"message","text":"Additionally there cost/gradient/hessian are stored in the problem, where the manifold is stored anyways, so while internally they often need the manifold, it is already stored directly besides anyways","user":"UPJ6Q2SQY","ts":"1611842806.008900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kQDTz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Additionally there cost/gradient/hessian are stored in the problem, where the manifold is stored anyways, so while internally they often need the manifold, it is already stored directly besides anyways"}]}]}]}]}