{"cursor": 0, "messages": [{"client_msg_id":"54D4457C-6CD6-42A3-B1AF-77FE9B05DC14","type":"message","text":":birthday: <https://twitter.com/FFmpeg/status/1340698413143224320|https://twitter.com/FFmpeg/status/1340698413143224320>","user":"U8MPCDJAY","ts":"1608501702.058800","team":"T68168MUP","attachments":[{"fallback":"<https://twitter.com/FFmpeg|@FFmpeg>: This is probably as close to a 20th Birthday as we can get.\n\nHere's to 20 more years of open source multimedia! :tada: <https://pbs.twimg.com/media/EpsdMUQU8AAA7ZI.png>","ts":1608482385,"author_name":"FFmpeg","author_link":"https://twitter.com/FFmpeg/status/1340698413143224320","author_icon":"https://pbs.twimg.com/profile_images/961052733510893568/wbWiekmv_normal.jpg","author_subname":"@FFmpeg","text":"This is probably as close to a 20th Birthday as we can get.\n\nHere's to 20 more years of open source multimedia! :tada: <https://pbs.twimg.com/media/EpsdMUQU8AAA7ZI.png>","service_name":"twitter","service_url":"https://twitter.com/","from_url":"https://twitter.com/FFmpeg/status/1340698413143224320","image_url":"https://pbs.twimg.com/media/EpsdMUQU8AAA7ZI.png","image_width":856,"image_height":210,"image_bytes":12839,"id":1,"original_url":"https://twitter.com/FFmpeg/status/1340698413143224320","footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png"}],"blocks":[{"type":"rich_text","block_id":"ijEl","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"birthday"},{"type":"text","text":" "},{"type":"link","url":"https://twitter.com/FFmpeg/status/1340698413143224320","text":"https://twitter.com/FFmpeg/status/1340698413143224320"}]}]}],"reactions":[{"name":"birthday","users":["UDB26738Q","U7PGB5DU3","US64J0NPQ"],"count":3}]},{"client_msg_id":"ac3b0f9f-5d76-425a-be20-ca59e52e86ee","type":"message","text":"When recording videos from a camera, is there a way to deal with temporal inconsistencies with the incoming frames? For instance, the next frame might be delayed because of other processes hogging the CPU, and a frame is encoded with the wrong time-stamp. What's the best way to deal with something like this?","user":"U7PGB5DU3","ts":"1613400204.003600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cJ0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When recording videos from a camera, is there a way to deal with temporal inconsistencies with the incoming frames? For instance, the next frame might be delayed because of other processes hogging the CPU, and a frame is encoded with the wrong time-stamp. What's the best way to deal with something like this?"}]}]}]},{"client_msg_id":"273dac8d-51ff-4410-a137-7e60034c9622","type":"message","text":"Your camera is not timestamping the frames itself?  What kind of camera are you talking about?","user":"U66GD0880","ts":"1613423732.004100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6sA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Your camera is not timestamping the frames itself?  What kind of camera are you talking about?"}]}]}]},{"client_msg_id":"e0206378-4286-46c9-aeae-38a5305e64dd","type":"message","text":"This is a picam on a raspberry pi. But I'm referring to the <https://juliaio.github.io/VideoIO.jl/stable/writing/#Iterative-Encoding|Iterative Encoding> VideoIO does. It only takes the frame and it's index, not its timestamp. And when sequentially reading frames off of a camera I have no control over the amount of time that passes from one read and the next.","user":"U7PGB5DU3","ts":"1613425093.007400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wLk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This is a picam on a raspberry pi. But I'm referring to the "},{"type":"link","url":"https://juliaio.github.io/VideoIO.jl/stable/writing/#Iterative-Encoding","text":"Iterative Encoding"},{"type":"text","text":" VideoIO does. It only takes the frame and it's index, not its timestamp. And when sequentially reading frames off of a camera I have no control over the amount of time that passes from one read and the next."}]}]}]},{"client_msg_id":"a7d22992-fe87-4e6d-a891-259ce0b8b00c","type":"message","text":"Right, another attack angle: say I have a pipe that streams video (from some system call to ffmpeg or raspivid), is there a way for VideoIO to accept that as a AVInput?","user":"U7PGB5DU3","ts":"1613476846.010000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"34wZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right, another attack angle: say I have a pipe that streams video (from some system call to ffmpeg or raspivid), is there a way for VideoIO to accept that as a AVInput?"}]}]}]},{"type":"message","text":"Turns out VideoIO and ImageInTerminal play nicely together..","files":[{"id":"F01NQJ31QQH","created":1613538950,"timestamp":1613538950,"name":"Screen Recording 2021-02-17 at 12.12.13 AM.mov","title":"Screen Recording 2021-02-17 at 12.12.13 AM.mov","mimetype":"video/quicktime","filetype":"mov","pretty_type":"QuickTime Movie","user":"U8MPCDJAY","editable":false,"size":88681679,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01NQJ31QQH/screen_recording_2021-02-17_at_12.12.13_am.mov","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01NQJ31QQH/download/screen_recording_2021-02-17_at_12.12.13_am.mov","thumb_video":"https://files.slack.com/files-tmb/T68168MUP-F01NQJ31QQH-257e0a0d4c/screen_recording_2021-02-17_at_12.12.13_am_thumb_video.jpeg","permalink":"https://julialang.slack.com/files/U8MPCDJAY/F01NQJ31QQH/screen_recording_2021-02-17_at_12.12.13_am.mov","permalink_public":"https://slack-files.com/T68168MUP-F01NQJ31QQH-8f4ba3c206","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"aeSc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Turns out VideoIO and ImageInTerminal play nicely together.."}]}]}],"user":"U8MPCDJAY","display_as_bot":false,"ts":"1613539138.011000"},{"type":"message","subtype":"thread_broadcast","text":"this u right <https://ianbtw.com/#music>","user":"UM8JUNJG7","ts":"1613622308.017600","thread_ts":"1613539138.011000","root":{"type":"message","text":"Turns out VideoIO and ImageInTerminal play nicely together..\n\n<https://github.com/IanButterworth/VideoInTerminal.jl>","files":[{"id":"F01NQJ31QQH","created":1613538950,"timestamp":1613538950,"name":"Screen Recording 2021-02-17 at 12.12.13 AM.mov","title":"Screen Recording 2021-02-17 at 12.12.13 AM.mov","mimetype":"video/quicktime","filetype":"mov","pretty_type":"QuickTime Movie","user":"U8MPCDJAY","editable":false,"size":88681679,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01NQJ31QQH/screen_recording_2021-02-17_at_12.12.13_am.mov","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01NQJ31QQH/download/screen_recording_2021-02-17_at_12.12.13_am.mov","thumb_video":"https://files.slack.com/files-tmb/T68168MUP-F01NQJ31QQH-257e0a0d4c/screen_recording_2021-02-17_at_12.12.13_am_thumb_video.jpeg","permalink":"https://julialang.slack.com/files/U8MPCDJAY/F01NQJ31QQH/screen_recording_2021-02-17_at_12.12.13_am.mov","permalink_public":"https://slack-files.com/T68168MUP-F01NQJ31QQH-8f4ba3c206","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"a47Q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Turns out VideoIO and ImageInTerminal play nicely together..\n\n"},{"type":"link","url":"https://github.com/IanButterworth/VideoInTerminal.jl"}]}]}],"user":"U8MPCDJAY","display_as_bot":false,"ts":"1613539138.011000","edited":{"user":"U8MPCDJAY","ts":"1613542421.000000"},"thread_ts":"1613539138.011000","reply_count":35,"reply_users_count":2,"latest_reply":"1613622413.019600","reply_users":["UM8JUNJG7","U8MPCDJAY"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"EMfZc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this u right "},{"type":"link","url":"https://ianbtw.com/#music"}]}]}],"client_msg_id":"4a8ad916-5256-49c5-9876-e15ea2b2e90c","edited":{"user":"UM8JUNJG7","ts":"1613622315.000000"}},{"client_msg_id":"6deb79f8-29e4-46a5-83c0-1ba04aea4aae","type":"message","text":"How can I use FFMPEG_jll or FFMPEG to pipe a ffmpeg command?\nUsing the system's ffmpeg I'd do something like this:\n```io = open(`ffmpeg -i ... `)```\nbut how would I do that without using the system's ffmpeg?","user":"U7PGB5DU3","ts":"1613657697.023200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VMAq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How can I use FFMPEG_jll or FFMPEG to pipe a ffmpeg command?\nUsing the system's ffmpeg I'd do something like this:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"io = open(`ffmpeg -i ... `)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"but how would I do that without using the system's ffmpeg?"}]}]}]},{"client_msg_id":"87512cee-d5fe-40c5-9bb9-afd75424eadc","type":"message","text":"<https://docs.binarybuilder.org/dev/jll/#ExecutableProduct>","user":"UDB26738Q","ts":"1613657746.023400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zr2vG","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://docs.binarybuilder.org/dev/jll/#ExecutableProduct"}]}]}]},{"client_msg_id":"B48434D1-71E4-4AEB-88C6-C2DF7BC1DA1F","type":"message","text":"Also, there are demos on the FFMPEG.jl readme ","user":"U8MPCDJAY","ts":"1613657804.024000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z+0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also, there are demos on the FFMPEG.jl readme "}]}]}]},{"client_msg_id":"8F695541-A574-4883-AE25-22DB7E7F225E","type":"message","text":"Could I ask a favor. I’d love if a few people could test out the camera mode here\n```pkg&gt; add <https://github.com/IanButterworth/VideoInTerminal.jl|https://github.com/IanButterworth/VideoInTerminal.jl>\njulia&gt; using VideoInTerminal\njulia&gt; showcam()```","user":"U8MPCDJAY","ts":"1613839268.002200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nhBDS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could I ask a favor. I’d love if a few people could test out the camera mode here\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"pkg> add "},{"type":"link","url":"https://github.com/IanButterworth/VideoInTerminal.jl","text":"https://github.com/IanButterworth/VideoInTerminal.jl"},{"type":"text","text":"\n"},{"type":"text","text":"julia> using VideoInTerminal\n"},{"type":"text","text":"julia> showcam()"}]}]}],"thread_ts":"1613839268.002200","reply_count":35,"reply_users_count":2,"latest_reply":"1613841000.019100","reply_users":["UDB26738Q","U8MPCDJAY"],"subscribed":false},{"client_msg_id":"A4B5F97C-54D3-44B1-8F67-D9855EC58CB9","type":"message","text":"On my Mac that works first time, but the second time the camera can’t be loaded. I think it’s a new MacOS bug","user":"U8MPCDJAY","ts":"1613839308.003300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pJs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"On my Mac that works first time, but the second time the camera can’t be loaded. I think it’s a new MacOS bug"}]}]}]},{"client_msg_id":"c91aac01-9e02-49a0-8583-483723cf68c8","type":"message","text":"The following updates an image file once a second with the latest frame from some source:\n```ffmpeg ... -r 1 -update 1 image.jpg```\nIs there a way for me to pipe something like that into *a buffer that gets automatically overwritten each time a new frame comes out*?\n\nWhile this\n```ffmpeg ... -r 1 -update 1 -vcodec png -```\nwill pipe a stream of png images, it seems to fill some internal buffer, which means that fetching frames from that pipe doesn't always result in the *current* last frame, but the frame that was last a few seconds ago (so it looks like there is considerable lag going on).","user":"U7PGB5DU3","ts":"1614325866.030800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jxBJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The following updates an image file once a second with the latest frame from some source:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ffmpeg ... -r 1 -update 1 image.jpg"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way for me to pipe something like that into "},{"type":"text","text":"a buffer that gets automatically overwritten each time a new frame comes out","style":{"bold":true}},{"type":"text","text":"?\n\nWhile this\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ffmpeg ... -r 1 -update 1 -vcodec png -"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"will pipe a stream of png images, it seems to fill some internal buffer, which means that fetching frames from that pipe doesn't always result in the "},{"type":"text","text":"current","style":{"bold":true}},{"type":"text","text":" last frame, but the frame that was last a few seconds ago (so it looks like there is considerable lag going on)."}]}]}]},{"client_msg_id":"C1FE0A24-1E14-4407-96C8-6AF7F2BA1AF2","type":"message","text":"Thanks to some awesome work by <@UC6V0FAJW> in improving the robustness of the VideoIO encoder (just look at how much was fixed in <https://github.com/JuliaIO/VideoIO.jl/pull/279|https://github.com/JuliaIO/VideoIO.jl/pull/279>), we’re also taking the opportunity to streamline the encoder API. \n\nIt would be great if some VideoIO users could review the changelog, and perhaps even try out master before we release v0.9\n\nFeedback very much welcomed\n\n<https://github.com/JuliaIO/VideoIO.jl/blob/master/CHANGELOG.md|https://github.com/JuliaIO/VideoIO.jl/blob/master/CHANGELOG.md>","user":"U8MPCDJAY","ts":"1616244249.003500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2PHO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks to some awesome work by "},{"type":"user","user_id":"UC6V0FAJW"},{"type":"text","text":" in improving the robustness of the VideoIO encoder (just look at how much was fixed in "},{"type":"link","url":"https://github.com/JuliaIO/VideoIO.jl/pull/279","text":"https://github.com/JuliaIO/VideoIO.jl/pull/279"},{"type":"text","text":"), we’re also taking the opportunity to streamline the encoder API. \n"},{"type":"text","text":"\nIt would be great if some VideoIO users could review the changelog, and perhaps even try out master before we release v0.9\n\nFeedback very much welcomed\n\n"},{"type":"link","url":"https://github.com/JuliaIO/VideoIO.jl/blob/master/CHANGELOG.md","text":"https://github.com/JuliaIO/VideoIO.jl/blob/master/CHANGELOG.md"}]}]}],"reactions":[{"name":"heart","users":["U73KWSUGN"],"count":1}]},{"client_msg_id":"b334ed3f-0887-4c77-808b-012ecf59374f","type":"message","text":"I suspect this has nothing to do with the wonderful work that <@UC6V0FAJW> did, but on a Raspberry with a Pi Cam connected, I get a fps of ~3.8 with:\n```using VideoIO, Statistics\ncam = VideoIO.opencamera(;transcode=false)\nimg = read(cam)\nf(_) = @elapsed read!(cam, img)\nx = map(f, 1:50)\n1/mean(x[40:50])```\nthis is on:\n```(jl_2nE2oz) pkg&gt; st\nStatus `/tmp/jl_2nE2oz/Project.toml`\n  [d6d074c3] VideoIO v0.9.0-DEV `<https://github.com/JuliaIO/VideoIO.jl.git#master>````","user":"U7PGB5DU3","ts":"1616488242.006300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mQyO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I suspect this has nothing to do with the wonderful work that "},{"type":"user","user_id":"UC6V0FAJW"},{"type":"text","text":" did, but on a Raspberry with a Pi Cam connected, I get a fps of ~3.8 with:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using VideoIO, Statistics\ncam = VideoIO.opencamera(;transcode=false)\nimg = read(cam)\nf(_) = @elapsed read!(cam, img)\nx = map(f, 1:50)\n1/mean(x[40:50])"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"this is on:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"(jl_2nE2oz) pkg> st\nStatus `/tmp/jl_2nE2oz/Project.toml`\n  [d6d074c3] VideoIO v0.9.0-DEV `"},{"type":"link","url":"https://github.com/JuliaIO/VideoIO.jl.git#master"},{"type":"text","text":"`"}]}]}]},{"type":"message","subtype":"channel_join","ts":"1616488248.006500","user":"UC6V0FAJW","text":"<@UC6V0FAJW> has joined the channel","inviter":"U7PGB5DU3"},{"client_msg_id":"3e0e7c3c-01db-4fed-8f75-4cc9eadad74e","type":"message","text":"It was my pleasure to hack on such a great package","user":"UC6V0FAJW","ts":"1616709346.006900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eG7AT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It was my pleasure to hack on such a great package"}]}]}],"reactions":[{"name":"+1","users":["U8MPCDJAY"],"count":1}]},{"client_msg_id":"fed1af31-59e9-417a-97df-e6500a55c041","type":"message","text":"<@U7PGB5DU3> I've actually never tried the `opencamera` and related functions, but that's definitely not a great fps","user":"UC6V0FAJW","ts":"1616709411.007000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9TruY","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U7PGB5DU3"},{"type":"text","text":" I've actually never tried the "},{"type":"text","text":"opencamera","style":{"code":true}},{"type":"text","text":" and related functions, but that's definitely not a great fps"}]}]}]}]}