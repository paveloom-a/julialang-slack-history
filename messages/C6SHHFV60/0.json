{"cursor": 0, "messages": [{"client_msg_id":"7d31a952-bbae-412b-bc7a-fd7814a22885","type":"message","text":"does anyone know if there are tricks / issues with the number of BLAS threads on ARM ? We have a server where a given function seems to use one thread for blas operations, when the same code uses multiple threads on an intel architecture","user":"U82RE6STE","ts":"1610365728.017000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"osH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does anyone know if there are tricks / issues with the number of BLAS threads on ARM ? We have a server where a given function seems to use one thread for blas operations, when the same code uses multiple threads on an intel architecture"}]}]}]},{"client_msg_id":"186d3fd6-cc79-4ba2-b51e-b88587ab2fe2","type":"message","text":"This will be up to BLAS’s internal threading decision-making","user":"U66GD0880","ts":"1610391933.017400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z6/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This will be up to BLAS’s internal threading decision-making"}]}]}]},{"client_msg_id":"3d11531e-a842-487f-8ff7-cf386eae263e","type":"message","text":"I’m assuming you’re using OpenBLAS","user":"U66GD0880","ts":"1610391950.017600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yrilG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m assuming you’re using OpenBLAS"}]}]}]},{"client_msg_id":"bd0e9ccc-8973-4cc4-b2af-e8501fcf56a3","type":"message","text":"for e.g. `gemm` the threading/no threading calculation is basically this:","user":"U66GD0880","ts":"1610392016.018200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LuYz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for e.g. "},{"type":"text","text":"gemm","style":{"code":true}},{"type":"text","text":" the threading/no threading calculation is basically this:"}]}]}]},{"client_msg_id":"61adff2f-70c0-4c1c-83a4-4e870147c80c","type":"message","text":"<https://github.com/xianyi/OpenBLAS/blob/f6e4cf2f9dac6f90b36f49659d883767d63791f5/interface/gemm.c#L423-L427>","user":"U66GD0880","ts":"1610392017.018400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SYlOs","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/xianyi/OpenBLAS/blob/f6e4cf2f9dac6f90b36f49659d883767d63791f5/interface/gemm.c#L423-L427"}]}]}]},{"client_msg_id":"69a60a5f-defa-43dc-9536-a5c3e74b76ff","type":"message","text":"`MNK` should be the same across platforms, but `GEMM_MULTITHREAD_THRESHOLD` will change from system to system","user":"U66GD0880","ts":"1610392041.018900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v4TE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"MNK","style":{"code":true}},{"type":"text","text":" should be the same across platforms, but "},{"type":"text","text":"GEMM_MULTITHREAD_THRESHOLD","style":{"code":true}},{"type":"text","text":" will change from system to system"}]}]}]},{"client_msg_id":"9e7a0db8-d16f-4ff5-8287-c659bc3af22b","type":"message","text":"Sadly, there’s not an easy way to figure out what the threshold has been baked into the library as","user":"U66GD0880","ts":"1610392253.019500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3U8Cs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sadly, there’s not an easy way to figure out what the threshold has been baked into the library as"}]}]}]},{"client_msg_id":"d7e71315-fe30-44ab-96c5-2e863550d061","type":"message","text":"you’d need to look at some cmake status files while building OpenBLAS to see what value its bootstrapping program decided upon","user":"U66GD0880","ts":"1610392276.020000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xzC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you’d need to look at some cmake status files while building OpenBLAS to see what value its bootstrapping program decided upon"}]}]}]},{"client_msg_id":"3907c4fb-103e-400c-93c5-dcc0fd2a463c","type":"message","text":"it’s possible that it’s not tuned correctly","user":"U66GD0880","ts":"1610392283.020300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FLU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it’s possible that it’s not tuned correctly"}]}]}]},{"client_msg_id":"bc5fe243-aa6c-4029-9d1c-61f4ea97e46a","type":"message","text":"if you’d like to chase this down, I can help guide you :slightly_smiling_face:","user":"U66GD0880","ts":"1610392284.020500","team":"T68168MUP","edited":{"user":"U66GD0880","ts":"1610392291.000000"},"blocks":[{"type":"rich_text","block_id":"lEE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you’d like to chase this down, I can help guide you "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]}]}