{"cursor": 0, "messages": [{"client_msg_id":"0a0bdba8-1945-4f14-a1e4-a1556427dbae","type":"message","text":"I am using PackageCompiler to generate a sysimage that is packaged in a Docker container and run on an EC2 instance. I can launch the container fine locally, but on EC2 I get this error: `ERROR: Unable to find compatible target in system image.` From a review of some GitHub issues, I understand that this may be because the sysimage is being generated for my exact cpu arch and therefore cannot transfer to the EC2 instance. How do I get PackageCompiler to generate a sysimage for a more general x86_64 target?","user":"U01537M2E9W","ts":"1608059092.270800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"phEKe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am using PackageCompiler to generate a sysimage that is packaged in a Docker container and run on an EC2 instance. I can launch the container fine locally, but on EC2 I get this error: "},{"type":"text","text":"ERROR: Unable to find compatible target in system image.","style":{"code":true}},{"type":"text","text":" From a review of some GitHub issues, I understand that this may be because the sysimage is being generated for my exact cpu arch and therefore cannot transfer to the EC2 instance. How do I get PackageCompiler to generate a sysimage for a more general x86_64 target?"}]}]}]},{"client_msg_id":"0f1363f5-ffa1-4756-bade-da73610813f3","type":"message","text":"There is the `cpu_target` keyword argument","user":"U67D54KS8","ts":"1608059309.271500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Sj/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There is the "},{"type":"text","text":"cpu_target","style":{"code":true}},{"type":"text","text":" keyword argument"}]}]}]},{"client_msg_id":"71a9615f-a72c-4430-972b-a38e0a88f751","type":"message","text":"You can set it to <https://github.com/JuliaLang/PackageCompiler.jl/blob/2d8010d8be72d65269d114b037be35081ec7f303/src/PackageCompiler.jl#L18|https://github.com/JuliaLang/PackageCompiler.jl/blob/2d8010d8be72d65269d114b037be35081ec7f303/src/PackageCompiler.jl#L18>","user":"U67D54KS8","ts":"1608059347.271800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NuH58","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can set it to "},{"type":"link","url":"https://github.com/JuliaLang/PackageCompiler.jl/blob/2d8010d8be72d65269d114b037be35081ec7f303/src/PackageCompiler.jl#L18","text":"https://github.com/JuliaLang/PackageCompiler.jl/blob/2d8010d8be72d65269d114b037be35081ec7f303/src/PackageCompiler.jl#L18"}]}]}]},{"client_msg_id":"650e1733-0f16-4d7f-8e92-7000d9e7887e","type":"message","text":"Oh, I missed that one. Thanks, I will try that.\nEdit: That worked","user":"U01537M2E9W","ts":"1608059449.272300","team":"T68168MUP","edited":{"user":"U01537M2E9W","ts":"1608062103.000000"},"blocks":[{"type":"rich_text","block_id":"kAvv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, I missed that one. Thanks, I will try that.\nEdit: That worked"}]}]}]},{"type":"message","subtype":"channel_join","ts":"1608063322.278000","user":"U6BQL000Z","text":"<@U6BQL000Z> has joined the channel","inviter":"UDGT4PM41"},{"client_msg_id":"cc8e994a-4b6d-455b-b89e-a8eded5df060","type":"message","text":"Hello everyone,\nWhen using PackageCompiler.jl for creating a custom sysimage, where do you usually store your new sysimage on a Linux system?","user":"U7R243N1W","ts":"1608421441.281000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jlxh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hello everyone,\nWhen using PackageCompiler.jl for creating a custom sysimage, where do you usually store your new sysimage on a Linux system?"}]}]}],"thread_ts":"1608421441.281000","reply_count":3,"reply_users_count":2,"latest_reply":"1608429673.283000","reply_users":["UC6SUUPRC","U7R243N1W"],"subscribed":false},{"client_msg_id":"a5b75b67-bee0-4edf-bf67-b4c18b11a57f","type":"message","text":"I'm looking into building a static app using PackageCompiler, and I was initially hoping to be able to have a single self-contained binary file that I could run. It appears that I get a directory instead, with a lib folder etc. Could someone please help me understand what role all of this plays, and whether or not any of it can be discarded? Having a single binary (statically linked) is much nicer to distribute and run than a folder.","user":"UCNPT22MQ","ts":"1610129228.293300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bxuM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm looking into building a static app using PackageCompiler, and I was initially hoping to be able to have a single self-contained binary file that I could run. It appears that I get a directory instead, with a lib folder etc. Could someone please help me understand what role all of this plays, and whether or not any of it can be discarded? Having a single binary (statically linked) is much nicer to distribute and run than a folder."}]}]}]},{"type":"message","subtype":"channel_join","ts":"1611349297.008500","user":"U67461GUB","text":"<@U67461GUB> has joined the channel","inviter":"U66GD0880"},{"client_msg_id":"18cf4dd2-8956-478c-9c7a-f4e2a92a1e87","type":"message","text":"is there any special requirement to make a Dash app with `PackageCompiler`? I get the following warnings and then I realized that my package depends on my ~/.julia\n```┌ Warning: PlotlyJS has a dependency on Requires.jl, code in `@require` will not be run\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:513\n┌ Warning: PlotlyBase has a dependency on Requires.jl, code in `@require` will not be run\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:513\n┌ Warning: WebIO has a dependency on Requires.jl, code in `@require` will not be run\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:513\n┌ Warning: Package Blink has a build script, this might indicate that it is not relocatable\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:526\n┌ Warning: Package PlotlyJS has a build script, this might indicate that it is not relocatable\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:526\n┌ Warning: Package WebIO has a build script, this might indicate that it is not relocatable\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:526\n┌ Warning: Package SLEEFPirates has a build script, this might indicate that it is not relocatable\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:526```","user":"U013V2CFZAN","ts":"1611515913.026700","team":"T68168MUP","edited":{"user":"U013V2CFZAN","ts":"1611515948.000000"},"blocks":[{"type":"rich_text","block_id":"ecv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there any special requirement to make a Dash app with "},{"type":"text","text":"PackageCompiler","style":{"code":true}},{"type":"text","text":"? I get the following warnings and then I realized that my package depends on my ~/.julia\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"┌ Warning: PlotlyJS has a dependency on Requires.jl, code in `@require` will not be run\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:513\n┌ Warning: PlotlyBase has a dependency on Requires.jl, code in `@require` will not be run\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:513\n┌ Warning: WebIO has a dependency on Requires.jl, code in `@require` will not be run\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:513\n┌ Warning: Package Blink has a build script, this might indicate that it is not relocatable\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:526\n┌ Warning: Package PlotlyJS has a build script, this might indicate that it is not relocatable\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:526\n┌ Warning: Package WebIO has a build script, this might indicate that it is not relocatable\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:526\n┌ Warning: Package SLEEFPirates has a build script, this might indicate that it is not relocatable\n└ @ PackageCompiler C:\\Users\\jvieyras\\.julia\\packages\\PackageCompiler\\AerNj\\src\\PackageCompiler.jl:526"}]}]}]},{"client_msg_id":"289af571-ca5f-4bd2-aa6a-a39816d3a052","type":"message","text":"hmm... not sure if here is the correct place to ask. What is the differences between `@ccallable` and `@cfunction`?","user":"U013V2CFZAN","ts":"1612820268.033300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qSWXw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm... not sure if here is the correct place to ask. What is the differences between "},{"type":"text","text":"@ccallable","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"@cfunction","style":{"code":true}},{"type":"text","text":"?"}]}]}]},{"client_msg_id":"31A5C4A3-1087-45BF-9A20-711F34610EF1","type":"message","text":"The first one is to create an unmangled symbol in the sysimage so you can call it from c after linking with the library, the second one is so you can pass that function to a c function expecting a callback.","user":"U67D54KS8","ts":"1612820394.035200","team":"T68168MUP","edited":{"user":"U67D54KS8","ts":"1612820424.000000"},"blocks":[{"type":"rich_text","block_id":"/f06","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The first one is to create an unmangled symbol in the sysimage so you can call it from c after linking with the library, the second one is so you can pass that function to a c function expecting a callback."}]}]}]},{"client_msg_id":"566dc080-2863-421f-adfb-8a4899754edb","type":"message","text":"What Kristoffer just said :wink: `@ccallable` is equivalent to `@cfunction` + an exported name.","user":"U67BJLYCS","ts":"1612820483.036300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lBrP+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What Kristoffer just said "},{"type":"emoji","name":"wink"},{"type":"text","text":" "},{"type":"text","text":"@ccallable","style":{"code":true}},{"type":"text","text":" is equivalent to "},{"type":"text","text":"@cfunction","style":{"code":true}},{"type":"text","text":" + an exported name."}]}]}]},{"client_msg_id":"3329704f-d175-47f5-ae12-ebdb953084b8","type":"message","text":"Thanks for the answers, I was able to find `@cfunction` but not `@ccallable` on the documentation","user":"U013V2CFZAN","ts":"1612861424.037200","team":"T68168MUP","edited":{"user":"U013V2CFZAN","ts":"1612861443.000000"},"blocks":[{"type":"rich_text","block_id":"PrkX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for the answers, I was able to find "},{"type":"text","text":"@cfunction","style":{"code":true}},{"type":"text","text":" but not "},{"type":"text","text":"@ccallable","style":{"code":true}},{"type":"text","text":" on the documentation"}]}]}]},{"client_msg_id":"eb0158d1-b60d-4d6c-9988-f50a5d416b99","type":"message","text":"<@U67D54KS8> and <@U67BJLYCS> Where I can ask questions for calling Julia functions from C/C++? there is an <#C774S8M0B|embedded> channel, but it's kind of inactive. The Julia documentation is fine, but it is incomplete. I could help expanding it with my findings.","user":"U013V2CFZAN","ts":"1612865138.039900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NjTQz","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U67D54KS8"},{"type":"text","text":" and "},{"type":"user","user_id":"U67BJLYCS"},{"type":"text","text":" Where I can ask questions for calling Julia functions from C/C++? there is an "},{"type":"channel","channel_id":"C774S8M0B"},{"type":"text","text":" channel, but it's kind of inactive. The Julia documentation is fine, but it is incomplete. I could help expanding it with my findings."}]}]}]},{"client_msg_id":"0aac9d95-de91-4c09-9a30-336b8851852b","type":"message","text":"Maybe discourse?","user":"U67D54KS8","ts":"1612865163.040100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Xpqn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe discourse?"}]}]}]},{"client_msg_id":"48549c25-2538-4ade-8ddc-9912242f64df","type":"message","text":"I think that that will be the only option","user":"U013V2CFZAN","ts":"1612866311.040500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dtE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think that that will be the only option"}]}]}]},{"client_msg_id":"3f32f7d0-6e08-4d5a-9388-317c4f99f113","type":"message","text":"I was hoping for something more lively ... I prefer to chat will people here than to post messages :slightly_smiling_face:","user":"U013V2CFZAN","ts":"1612866397.041700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XgC0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was hoping for something more lively ... I prefer to chat will people here than to post messages "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"fd09b676-ee66-4d5a-9378-3fc6a1464272","type":"message","text":"stupid questions ... can I guarantee that `PackageCompiler.jl` compiles all the functions and that I need and never call JIT generation? is this possible?","user":"U013V2CFZAN","ts":"1612867451.043200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wz7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"stupid questions ... can I guarantee that "},{"type":"text","text":"PackageCompiler.jl","style":{"code":true}},{"type":"text","text":" compiles all the functions and that I need and never call JIT generation? is this possible?"}]}]}]},{"client_msg_id":"3a5856da-145e-4a86-a4f5-9a5412eeb011","type":"message","text":"There is no guarantee of that right now.","user":"U67D54KS8","ts":"1612868090.043500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GA9G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There is no guarantee of that right now."}]}]}]},{"client_msg_id":"bdcdbfa1-0c58-41c7-8a94-abf3c0d7738c","type":"message","text":"is there a way to minimize it? for example, using `SnoopCompile.jl`?","user":"U013V2CFZAN","ts":"1612868244.044300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Szy4Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there a way to minimize it? for example, using "},{"type":"text","text":"SnoopCompile.jl","style":{"code":true}},{"type":"text","text":"?"}]}]}]},{"client_msg_id":"bae58ba1-23a4-4254-b7b2-fa91ad69e23d","type":"message","text":"You can use `SnoopCompile`, generate a precompile file and give it as `precompile_statements_file`, or you have a representative workload and give it as `precompile_execution_file` as shown in e.g. <https://julialang.github.io/PackageCompiler.jl/dev/examples/plots/>.","user":"U67D54KS8","ts":"1612869187.045200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Gsc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can use "},{"type":"text","text":"SnoopCompile","style":{"code":true}},{"type":"text","text":", generate a precompile file and give it as "},{"type":"text","text":"precompile_statements_file","style":{"code":true}},{"type":"text","text":", or you have a representative workload and give it as "},{"type":"text","text":"precompile_execution_file","style":{"code":true}},{"type":"text","text":" as shown in e.g. "},{"type":"link","url":"https://julialang.github.io/PackageCompiler.jl/dev/examples/plots/"},{"type":"text","text":"."}]}]}]},{"client_msg_id":"d17c2ba1-29e6-43ed-978b-53dabd9204d1","type":"message","text":"yes thanks! I have read those sections already, however as you mentioned that can't guarantee that all the functions are compiled. I am looking for \"extra things\" that I could do to minimize that.","user":"U013V2CFZAN","ts":"1612873885.047100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CYy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes thanks! I have read those sections already, however as you mentioned that can't guarantee that all the functions are compiled. I am looking for \"extra things\" that I could do to minimize that."}]}]}]},{"client_msg_id":"f6b9b792-de43-4413-9b41-3f059bc1a2fb","type":"message","text":"the problem is that I am trying to embed a Julia algorithm on a C/C++ system.","user":"U013V2CFZAN","ts":"1612873949.047900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OspE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the problem is that I am trying to embed a Julia algorithm on a C/C++ system."}]}]}]},{"client_msg_id":"92d8fe4a-d95f-4e1e-b7ff-5ea713f9c57d","type":"message","text":"What is a C/C++ system and how is it related to not allowing any JIT whatsoever?","user":"U67D54KS8","ts":"1612874455.048600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YlOQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What is a C/C++ system and how is it related to not allowing any JIT whatsoever?"}]}]}]},{"client_msg_id":"ce9577f9-3909-4224-8d89-283879354121","type":"message","text":"GH is having some issues right now, but my PR <https://github.com/JuliaLang/julia/pull/39129> will eventually make it possible to disable codegen entirely <@U013V2CFZAN>","user":"U6A0PD8CR","ts":"1612887205.049600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nQA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"GH is having some issues right now, but my PR "},{"type":"link","url":"https://github.com/JuliaLang/julia/pull/39129"},{"type":"text","text":" will eventually make it possible to disable codegen entirely "},{"type":"user","user_id":"U013V2CFZAN"}]}]}]},{"client_msg_id":"cf2d46ed-63fc-4774-b025-e9384265261b","type":"message","text":"Confirming that your code will never *need* to JIT compile, and will still function properly, is a much harder question to answer","user":"U6A0PD8CR","ts":"1612887395.052600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/cfq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Confirming that your code will never "},{"type":"text","text":"need","style":{"bold":true}},{"type":"text","text":" to JIT compile, and will still function properly, is a much harder question to answer"}]}]}]},{"client_msg_id":"c918c07a-27ed-4453-b43f-f0653e457b5c","type":"message","text":"<@U67D54KS8> it is a high throughput \"robotics\" system, basically a motorized stage. Many calculations need to be done beforehand and having consistent timings is mandatory. There could be small variations though","user":"U013V2CFZAN","ts":"1612887949.054400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AVC","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U67D54KS8"},{"type":"text","text":" it is a high throughput \"robotics\" system, basically a motorized stage. Many calculations need to be done beforehand and having consistent timings is mandatory. There could be small variations though"}]}]}]},{"client_msg_id":"6127f175-13ae-4635-8613-7766e63a204d","type":"message","text":"<@U6A0PD8CR> I am very curious on how would that evolve. I still have on my TODO list to try the static code generation PoC that you showed me last time","user":"U013V2CFZAN","ts":"1612888308.056000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Bglg","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6A0PD8CR"},{"type":"text","text":" I am very curious on how would that evolve. I still have on my TODO list to try the static code generation PoC that you showed me last time"}]}]}],"thread_ts":"1612888308.056000","reply_count":9,"reply_users_count":3,"latest_reply":"1612891699.061700","reply_users":["U6A0PD8CR","UH24GRBLL","U013V2CFZAN"],"subscribed":false},{"client_msg_id":"3d5a8e73-e3fb-43e0-8dae-5929d29ff858","type":"message","text":"Question for PackageCompiler maintainers: how would you feel about my adding a (potentially optional) dependency on GPUCompiler to PackageCompiler, and modifying `create_app` to get \"static\" codegen support? It would only support code signatures that don't do dynamic dispatch, at the moment.","user":"U6A0PD8CR","ts":"1612889003.058400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DixM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Question for PackageCompiler maintainers: how would you feel about my adding a (potentially optional) dependency on GPUCompiler to PackageCompiler, and modifying "},{"type":"text","text":"create_app","style":{"code":true}},{"type":"text","text":" to get \"static\" codegen support? It would only support code signatures that don't do dynamic dispatch, at the moment."}]}]}]},{"client_msg_id":"72c5e624-af9d-4582-b7e9-43f8c8abbf90","type":"message","text":"The static codegen variant of `create_app` would be opt-in, of course","user":"U6A0PD8CR","ts":"1612889139.058900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TO8uh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The static codegen variant of "},{"type":"text","text":"create_app","style":{"code":true}},{"type":"text","text":" would be opt-in, of course"}]}]}]},{"client_msg_id":"3576dbea-5922-4b33-909d-cdfecf88f3c3","type":"message","text":"Or it could be a different function altogether","user":"U6A0PD8CR","ts":"1612889149.059200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dN/m1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or it could be a different function altogether"}]}]}]},{"client_msg_id":"3fc01427-e816-4ed3-9342-7e9d5b847ac0","type":"message","text":"I think to start with, it would be better to have that as a separate package. Once that has proven itself to be stable and useful, it can be brought into PackageCompiler","user":"U67D54KS8","ts":"1612889340.059900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3WFf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think to start with, it would be better to have that as a separate package. Once that has proven itself to be stable and useful, it can be brought into PackageCompiler"}]}]}]},{"client_msg_id":"c3a38dd1-da87-4cf5-bfd5-081e48872cb5","type":"message","text":"Sounds good!","user":"U6A0PD8CR","ts":"1612889539.060100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XP0M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sounds good!"}]}]}]},{"client_msg_id":"b472739a-0d8c-40c6-8271-a64df3db6d1d","type":"message","text":"stupid question... Why can't we just get the LLVM IR from a julia script and compile it statically via LLVM?Is it because of all the dependancies?","user":"UPUBAM63X","ts":"1614726729.002300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zxZHt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"stupid question... Why can't we just get the LLVM IR from a julia script and compile it statically via LLVM?Is it because of all the dependancies?"}]}]}]},{"client_msg_id":"741644fd-dd23-4c32-a620-4a64c3c44ca4","type":"message","text":"we do in GPUCompiler.jl","user":"U69BL50BF","ts":"1614726757.002500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=BE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"we do in GPUCompiler.jl"}]}]}]},{"client_msg_id":"352c5742-1f46-49bd-839e-d9e40b03336a","type":"message","text":"the issue is dynamism","user":"U69BL50BF","ts":"1614726764.002800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IHZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the issue is dynamism"}]}]}]},{"client_msg_id":"c0433eff-097c-4ba6-8bbe-90171f452479","type":"message","text":"dynamism can hit libjulia for the JIT if it ends up calling a new method","user":"U69BL50BF","ts":"1614726781.003300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y=/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"dynamism can hit libjulia for the JIT if it ends up calling a new method"}]}]}]},{"client_msg_id":"0546a479-025e-4d4b-96a4-5ac3e3dce455","type":"message","text":"which is why GPU code cannot be dynamic: it cannot compile new code on the fly on the GPU","user":"U69BL50BF","ts":"1614726798.003800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/0u60","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which is why GPU code cannot be dynamic: it cannot compile new code on the fly on the GPU"}]}]}]},{"client_msg_id":"8c89d1f7-be44-4a37-8557-e46d4a235bb5","type":"message","text":"so static compilation either needs to have libjulia bound to it, or it needs to have no dynamic dispatching in order to ensure that it only hits the available methods.","user":"U69BL50BF","ts":"1614726826.004400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P8QMO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so static compilation either needs to have libjulia bound to it, or it needs to have no dynamic dispatching in order to ensure that it only hits the available methods."}]}]}]},{"client_msg_id":"625083b3-3469-483b-99b6-74d79c7143ec","type":"message","text":"Or you could do something very fancy where you store only a list of available methods and somehow the LLVM IR encodes this and ... and that's the hard solution :rolling_on_the_floor_laughing:","user":"U69BL50BF","ts":"1614726849.005200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x/j+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or you could do something very fancy where you store only a list of available methods and somehow the LLVM IR encodes this and ... and that's the hard solution "},{"type":"emoji","name":"rolling_on_the_floor_laughing"}]}]}]},{"client_msg_id":"e31cb31e-bc82-402a-960b-107db73f2c27","type":"message","text":"I would be 100% okay with static dispatch for what I'm trying to do.  :)","user":"UPUBAM63X","ts":"1614726873.005600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EeJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would be 100% okay with static dispatch for what I'm trying to do.  :)"}]}]}]},{"client_msg_id":"890bb137-0fe5-4ae7-a3b8-2424f0840212","type":"message","text":"but the LLVM IR thing sounds cool","user":"UPUBAM63X","ts":"1614726896.006000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ee9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but the LLVM IR thing sounds cool"}]}]}]},{"client_msg_id":"486cea1e-392d-4693-b72a-241cf0996ca6","type":"message","text":"so use the GPUCompiler and make it not output to .ptx and you're good","user":"U69BL50BF","ts":"1614726907.006300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cw8n","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so use the GPUCompiler and make it not output to .ptx and you're good"}]}]}]},{"client_msg_id":"545213d4-bea6-4d97-b9b0-d3f25abf492c","type":"message","text":"cool! thanks","user":"UPUBAM63X","ts":"1614726916.006500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FTOi2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cool! thanks"}]}]}]},{"client_msg_id":"7204e02b-9b2d-43b4-90da-5d7f58c6da4e","type":"message","text":"<https://docs.google.com/document/d/1rLpZf-HK6b9uYPDT_piUza4LUhtIrLbUftGa_YaXGKQ/edit?usp=sharing|https://docs.google.com/document/d/1rLpZf-HK6b9uYPDT_piUza4LUhtIrLbUftGa_YaXGKQ/edit?usp=sharing> <@UPUBAM63X>","user":"UDGT4PM41","ts":"1614727056.006800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tRF4","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://docs.google.com/document/d/1rLpZf-HK6b9uYPDT_piUza4LUhtIrLbUftGa_YaXGKQ/edit?usp=sharing","text":"https://docs.google.com/document/d/1rLpZf-HK6b9uYPDT_piUza4LUhtIrLbUftGa_YaXGKQ/edit?usp=sharing"},{"type":"text","text":" "},{"type":"user","user_id":"UPUBAM63X"}]}]}]},{"client_msg_id":"67a4f955-adcb-4ab9-ab40-bebd981ec462","type":"message","text":"it looks like a lot of the pieces are already there... but the reason it isn't being done likely means there's something way over my head missing :sweat_smile:","user":"UPUBAM63X","ts":"1614727582.007600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pkF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it looks like a lot of the pieces are already there... but the reason it isn't being done likely means there's something way over my head missing "},{"type":"emoji","name":"sweat_smile"}]}]}],"thread_ts":"1614727582.007600","reply_count":4,"reply_users_count":2,"latest_reply":"1614729083.009200","reply_users":["UDGT4PM41","UPUBAM63X"],"subscribed":false},{"client_msg_id":"0bfbdacc-01e7-4cb1-a742-8d52920a9a3b","type":"message","text":"for some reason going the way of LLVM IR sounds easier... contingent on a lot of ifs","user":"UPUBAM63X","ts":"1614727863.008100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oh6B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for some reason going the way of LLVM IR sounds easier... contingent on a lot of ifs"}]}]}]},{"client_msg_id":"aed59aa3-acac-4145-85c4-ca6cdf62aa78","type":"message","text":"<https://github.com/JuliaLang/julia/blob/788b2c77c10c2160f4794a4d4b6b81a95a90940c/base/loading.jl#L1240-L1247>","user":"UPUBAM63X","ts":"1614728361.008400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UA7","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/julia/blob/788b2c77c10c2160f4794a4d4b6b81a95a90940c/base/loading.jl#L1240-L1247"}]}]}]},{"type":"message","subtype":"thread_broadcast","text":"More likely that <@U6A0PD8CR> is super busy","user":"UDGT4PM41","ts":"1614728612.008500","thread_ts":"1614727582.007600","root":{"client_msg_id":"67a4f955-adcb-4ab9-ab40-bebd981ec462","type":"message","text":"it looks like a lot of the pieces are already there... but the reason it isn't being done likely means there's something way over my head missing :sweat_smile:","user":"UPUBAM63X","ts":"1614727582.007600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pkF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it looks like a lot of the pieces are already there... but the reason it isn't being done likely means there's something way over my head missing "},{"type":"emoji","name":"sweat_smile"}]}]}],"thread_ts":"1614727582.007600","reply_count":4,"reply_users_count":2,"latest_reply":"1614729083.009200","reply_users":["UDGT4PM41","UPUBAM63X"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"NzgZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"More likely that "},{"type":"user","user_id":"U6A0PD8CR"},{"type":"text","text":" is super busy"}]}]}],"client_msg_id":"1ec9fd2e-66bb-4d83-ae8b-da621e4ceaf7"},{"client_msg_id":"72cc9e02-499c-4bb5-af54-bbcb05f46aff","type":"message","text":"hypothetically couldn't you call cthulu.jl and lower everything to LLVM recursively?","user":"UPUBAM63X","ts":"1614729553.009800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZGN88","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hypothetically couldn't you call cthulu.jl and lower everything to LLVM recursively?"}]}]}]},{"client_msg_id":"f6c19a05-b1e3-413a-a710-bed479eebd5b","type":"message","text":"what do you do if inference can't figure out the types","user":"U674T3KB3","ts":"1614729687.010100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wJrx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what do you do if inference can't figure out the types"}]}]}],"thread_ts":"1614729687.010100","reply_count":5,"reply_users_count":2,"latest_reply":"1614730215.011000","reply_users":["UPUBAM63X","U674T3KB3"],"subscribed":false},{"client_msg_id":"e28c9045-d01b-423e-81c4-2643e5e23c1d","type":"message","text":"I apologize if I asked this before, but can we cross-compile a Windows system image as target from a Linux host using `PackageCompiler.jl` ?","user":"U013V2CFZAN","ts":"1614851247.001400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/GnXC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I apologize if I asked this before, but can we cross-compile a Windows system image as target from a Linux host using "},{"type":"text","text":"PackageCompiler.jl","style":{"code":true}},{"type":"text","text":" ?"}]}]}]}]}