{"cursor": 11, "messages": [{"client_msg_id":"a0ac04fa-b8af-4ab9-baf4-0a07e1b606c5","type":"message","text":"that's on the edge. Maybe forward there if you do all of the pre-allocation tricks","user":"U69BL50BF","ts":"1612432808.261600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sBa0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's on the edge. Maybe forward there if you do all of the pre-allocation tricks"}]}]}]},{"client_msg_id":"08112467-10fb-4723-97e4-253bb6afdff2","type":"message","text":"stiff?","user":"U69BL50BF","ts":"1612432829.261800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fxG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"stiff?"}]}]}]},{"client_msg_id":"804d4a05-5832-4b37-9849-dd16c1ee404c","type":"message","text":"yes","user":"U01H36BUDJB","ts":"1612432843.262000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MMlJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}]},{"client_msg_id":"be2cfe53-e32d-49d1-937a-ac99a19ffa57","type":"message","text":"well partially... heat equation w/ phase change, so it's stiff during phase change, but I think it's non-stiff otherwise","user":"U01H36BUDJB","ts":"1612432888.262700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1PeY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well partially... heat equation w/ phase change, so it's stiff during phase change, but I think it's non-stiff otherwise"}]}]}]},{"client_msg_id":"69f3a11a-86f4-42e2-8b8e-6a27e481b378","type":"message","text":"was gonna use the auto-switching solvers","user":"U01H36BUDJB","ts":"1612432899.263000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uGPY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"was gonna use the auto-switching solvers"}]}]}]},{"client_msg_id":"b3f834b0-159a-4c72-8a14-ab588c82b533","type":"message","text":"I think forward mode then","user":"U69BL50BF","ts":"1612432908.263200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tuf6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think forward mode then"}]}]}]},{"client_msg_id":"78e74138-ca15-4fbe-885d-8c07912624f1","type":"message","text":"for reasons explained in a submission due tomorrow","user":"U69BL50BF","ts":"1612432919.263500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7K63A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for reasons explained in a submission due tomorrow"}]}]}]},{"client_msg_id":"e86466d4-1faa-4e38-9967-ae57cd14a361","type":"message","text":"oof, ok I'll stop bothering you then","user":"U01H36BUDJB","ts":"1612432936.263800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WTcTI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oof, ok I'll stop bothering you then"}]}]}]},{"client_msg_id":"89c844ca-8a89-430c-9a5d-76c5899e622d","type":"message","text":"though QuadratureAdjoint would likely give it a run for the money","user":"U69BL50BF","ts":"1612432943.264100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KoH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"though QuadratureAdjoint would likely give it a run for the money"}]}]}]},{"client_msg_id":"e40d913e-bf02-44e5-af16-95a2de079c85","type":"message","text":"no, the submissions are fine","user":"U69BL50BF","ts":"1612432947.264300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P=FO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, the submissions are fine"}]}]}]},{"client_msg_id":"63d14ce8-568e-4794-8802-8a0d3b0ec718","type":"message","text":"doing 3 this week but it's mostly tidying up now.","user":"U69BL50BF","ts":"1612432963.264600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y10XQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"doing 3 this week but it's mostly tidying up now."}]}]}]},{"client_msg_id":"84a1ac5c-aa50-41ec-b0ce-a457ae1752a5","type":"message","text":"Slack says it's like 5 AM your time. Are you not in North America?","user":"U01H36BUDJB","ts":"1612432995.264900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6uv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Slack says it's like 5 AM your time. Are you not in North America?"}]}]}]},{"client_msg_id":"ef3a6e8d-23f7-4871-b61e-4aabeef0d5c9","type":"message","text":"I am","user":"U69BL50BF","ts":"1612433001.265100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AUvP+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am"}]}]}]},{"client_msg_id":"cd2ba686-0eb7-4edc-aa1f-36b2eb63cb0d","type":"message","text":":sweat_smile:","user":"U01H36BUDJB","ts":"1612433011.265300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ha=","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"sweat_smile"}]}]}]},{"client_msg_id":"af86079f-5ea1-4eee-a863-14a1feb46666","type":"message","text":"so the solution to having pre-allocated arrays with forward-diff is `get_tmp` and `dualcache`?","user":"U01H36BUDJB","ts":"1612433991.265900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WD8Bw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so the solution to having pre-allocated arrays with forward-diff is "},{"type":"text","text":"get_tmp","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"dualcache","style":{"code":true}},{"type":"text","text":"?"}]}]}]},{"client_msg_id":"3f9c41d2-f8ac-4bc3-b558-3d67fa21c812","type":"message","text":"yes","user":"U69BL50BF","ts":"1612434932.266100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tzx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}]},{"type":"message","subtype":"bot_message","text":"&gt; Hi.. First trial on diffeqpy here, and struggling a bit. Installed julia 1.6.0, but the demo-code at <https://github.com/SciML/diffeqpy> , inserted, seems to take forever... not getting out of prob = de.ODEProblem(f, u0, tspan)... &gt; No errors/warnings.. Any suggestions? &gt;  &gt;   With downgrading to version 1.5.3 for julia gave a clear improvement (thanks for suggestion). My normal development cycle is still somewhat hampered though.. Using PyCharm to single-step through the code, any interactive use at a breakpoint seems to be impossible.. Even before any de call to de.xx has been done, just a simple \" tv=np.arange(0.,1,0.1) takes forever... and returns nothing. Is this \"normal\"?  ","ts":"1612435118.266200","username":"[gitter] <peroveh>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"&gt; Hi.. First trial on diffeqpy here, and struggling a bit. Installed julia 1.6.0, but the demo-code at <https://github.com/SciML/diffeqpy> , inserted, seems to take forever... not getting out of prob = de.ODEProblem(f, u0, tspan)...\n&gt; No errors/warnings.. Any suggestions?\n&gt; \n&gt;  \nWith downgrading to version 1.5.3 for julia gave a clear improvement (thanks for suggestion). My normal development cycle is still somewhat hampered though.. Using PyCharm to single-step through the code, any interactive use at a breakpoint seems to be impossible.. Even before any de call to de.xx has been done, just a simple \" tv=np.arange(0.,1,0.1) takes forever... and returns nothing. Is this \"normal\"?\n\n","verbatim":false}}]},{"client_msg_id":"b85a7cc4-8240-406f-8568-75a092d0131f","type":"message","text":"I'm not sure what you're referring to with `tv=np.arange(0.,1,0.1)`","user":"U69BL50BF","ts":"1612435311.266500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Rx4aS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure what you're referring to with "},{"type":"text","text":"tv=np.arange(0.,1,0.1)","style":{"code":true}}]}]}]},{"client_msg_id":"42cc909c-16da-4abb-9768-ab26c59f92f9","type":"message","text":"that's not in any of the examples?","user":"U69BL50BF","ts":"1612435317.266700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"amw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's not in any of the examples?"}]}]}]},{"client_msg_id":"81da19f0-363e-4137-861f-cbe9b37618fe","type":"message","text":"<@U69BL50BF> I don't think the example in the docs with `get_tmp` and `dualcache` works with `DiffEqFlux` because then the contents of `p` are also instances of `Dual` during forward differentiation.","user":"U01H36BUDJB","ts":"1612436274.268100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UTi","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" I don't think the example in the docs with "},{"type":"text","text":"get_tmp","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"dualcache","style":{"code":true}},{"type":"text","text":" works with "},{"type":"text","text":"DiffEqFlux","style":{"code":true}},{"type":"text","text":" because then the contents of "},{"type":"text","text":"p","style":{"code":true}},{"type":"text","text":" are also instances of "},{"type":"text","text":"Dual","style":{"code":true}},{"type":"text","text":" during forward differentiation."}]}]}]},{"client_msg_id":"ecd8eca9-2f15-40a9-8054-de245c76b8f2","type":"message","text":"i.e. then `mul!(tmp,A,u)` doesn't type check anymore because `tmp = get_tmp(tmp,u)` reinterprets as the original array type.","user":"U01H36BUDJB","ts":"1612436334.269200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"taONT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"i.e. then "},{"type":"text","text":"mul!(tmp,A,u)","style":{"code":true}},{"type":"text","text":" doesn't type check anymore because "},{"type":"text","text":"tmp = get_tmp(tmp,u)","style":{"code":true}},{"type":"text","text":" reinterprets as the original array type."}]}]}]},{"client_msg_id":"0ebd47b8-f5d9-49b3-955c-25e539b17b39","type":"message","text":"you just need to make sure the chunksizes align.","user":"U69BL50BF","ts":"1612436367.269700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RaP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you just need to make sure the chunksizes align."}]}]}]},{"client_msg_id":"6f06cb98-c3ce-4b95-a0e6-c7662f9610bb","type":"message","text":"ah, because `p` and `u` are different lengths","user":"U01H36BUDJB","ts":"1612436391.270000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k/E5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, because "},{"type":"text","text":"p","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"u","style":{"code":true}},{"type":"text","text":" are different lengths"}]}]}]},{"client_msg_id":"dad11260-92e2-4ff4-bf48-0f86ed9bd675","type":"message","text":"so the automatic chunking would be different","user":"U01H36BUDJB","ts":"1612436400.270200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"T4J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so the automatic chunking would be different"}]}]}]},{"client_msg_id":"5f38530e-7dfc-46b9-8b92-afda82642900","type":"message","text":"how do you control the chunking when calling `sciml_train` ? I don't see a kwarg for that.","user":"U01H36BUDJB","ts":"1612436468.270500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DnR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how do you control the chunking when calling "},{"type":"text","text":"sciml_train","style":{"code":true}},{"type":"text","text":" ? I don't see a kwarg for that."}]}]}]},{"client_msg_id":"88d5700f-9b5d-4980-af59-ebb747e58b01","type":"message","text":"there isn't an argument for it","user":"U69BL50BF","ts":"1612436481.270700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s=9i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there isn't an argument for it"}]}]}]},{"type":"message","subtype":"bot_message","text":"&gt; [slack] &lt;chrisrackauckas&gt; that's not in any of the examples?  I am just creating an array to plot the solution at a finer time grid... plt.plot(tv,sol(tv)) ","ts":"1612436485.270900","username":"[gitter] <peroveh>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"&gt; [slack] &lt;chrisrackauckas&gt; that's not in any of the examples?\n\nI am just creating an array to plot the solution at a finer time grid... plt.plot(tv,sol(tv)) ","verbatim":false}}]},{"client_msg_id":"2858f196-72e5-4d01-a1f3-546b86b5d4ae","type":"message","text":"I'd have to dig in to see how it's heuristically doing it","user":"U69BL50BF","ts":"1612436491.271100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s=uf5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd have to dig in to see how it's heuristically doing it"}]}]}]},{"client_msg_id":"25aa442e-bbc7-4cc9-ab93-14b13dd9dd3e","type":"message","text":"ah wait ``ForwardDiffSensitivity`` has a chunk size argument","user":"U01H36BUDJB","ts":"1612436528.271500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wM2aa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah wait `"},{"type":"text","text":"ForwardDiffSensitivity","style":{"code":true}},{"type":"text","text":"` has a chunk size argument"}]}]}]},{"client_msg_id":"62633f33-3614-4642-8815-f8b059d19b9d","type":"message","text":"@peroveh are you running it in a REPL or IDE? The initialization of the packages may take a bit but once all of the instances are running it should be good.","user":"U69BL50BF","ts":"1612436596.272300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TsUDj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@peroveh are you running it in a REPL or IDE? The initialization of the packages may take a bit but once all of the instances are running it should be good."}]}]}]},{"type":"message","subtype":"bot_message","text":"<@U69BL50BF> Yes...i note the time for initialization... (from diffeqpy import de etc).. But this appears to be an issue with PyCharm after the initialization... When at any breakpoint, it does not appear to behave as for normal programs in python when i single step these.. For others i can create new variables, inspect them, plot them etc.. But now i cannot get this to work... The simple interactive test te=np.arange(0.,1,0.1) to create a new time vector takes forever, returns nothing.. whereas the same statement explicit in the code does behave as expected.. It thus appear that it is the debug functionality in PyCharm which somehow is \"wrecked\".. Here i have stopped after tl is created... but no interaction appears possible..","ts":"1612437176.272400","username":"[gitter] <peroveh>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"<@U69BL50BF> Yes...i note the time for initialization... (from diffeqpy import de etc).. But this appears to be an issue with PyCharm after the initialization... When at any breakpoint, it does not appear to behave as for normal programs in python when i single step these.. For others i can create new variables, inspect them, plot them etc.. But now i cannot get this to work... The simple interactive test te=np.arange(0.,1,0.1) to create a new time vector takes forever, returns nothing.. whereas the same statement explicit in the code does behave as expected.. It thus appear that it is the debug functionality in PyCharm which somehow is \"wrecked\".. Here i have stopped after tl is created... but no interaction appears possible..","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"[![image.png](<https://files.gitter.im/57bf79b040f3a6eec0615ecf/pHFp/thumb/image.png>)](<https://files.gitter.im/57bf79b040f3a6eec0615ecf/pHFp/image.png>)","ts":"1612437176.272500","username":"[gitter] <peroveh>","bot_id":"B795XHD0X","attachments":[{"fallback":"250x164px image","image_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/pHFp/thumb/image.png","image_width":250,"image_height":164,"image_bytes":29374,"from_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/pHFp/thumb/image.png","id":1,"original_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/pHFp/thumb/image.png"},{"fallback":"895x588px image","image_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/pHFp/image.png","image_width":895,"image_height":588,"image_bytes":77700,"from_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/pHFp/image.png","id":2,"original_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/pHFp/image.png"}],"blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"[![image.png](<https://files.gitter.im/57bf79b040f3a6eec0615ecf/pHFp/thumb/image.png>)](<https://files.gitter.im/57bf79b040f3a6eec0615ecf/pHFp/image.png>)","verbatim":false}}],"edited":{"user":"B795XHD0X","ts":"1612437177.000000"}},{"client_msg_id":"fdd88c85-a960-474e-b1dc-622128b8b621","type":"message","text":"I am not sure how PyCharm breakpoints are going to interact with the Julia calls","user":"U69BL50BF","ts":"1612437207.273000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5a1R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am not sure how PyCharm breakpoints are going to interact with the Julia calls"}]}]}]},{"client_msg_id":"95612c11-8a4d-40f1-9827-12d08c3926b1","type":"message","text":"that's a question for the pyjulia devs","user":"U69BL50BF","ts":"1612437214.273300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y13","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's a question for the pyjulia devs"}]}]}]},{"client_msg_id":"10de1440-f9cc-4e60-b79b-167c598d341b","type":"message","text":"<@U69BL50BF> I'm 90% sure at this point that `dualcache` just doesn't work with `DiffEqFlux` since the parameter vector `p` has to be a flat array. It fails if there's any other kind of structure, including `DualCache` .","user":"U01H36BUDJB","ts":"1612448742.274700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k4hJk","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" I'm 90% sure at this point that "},{"type":"text","text":"dualcache","style":{"code":true}},{"type":"text","text":" just doesn't work with "},{"type":"text","text":"DiffEqFlux","style":{"code":true}},{"type":"text","text":" since the parameter vector "},{"type":"text","text":"p","style":{"code":true}},{"type":"text","text":" has to be a flat array. It fails if there's any other kind of structure, including "},{"type":"text","text":"DualCache","style":{"code":true}},{"type":"text","text":" ."}]}]}]},{"client_msg_id":"cf4fa890-f8f0-4c16-8441-17c8da791a99","type":"message","text":"I've been messing around with it for a while now.","user":"U01H36BUDJB","ts":"1612448758.275000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gTd9U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I've been messing around with it for a while now."}]}]}]},{"client_msg_id":"c61e4a1c-13cb-4681-a0f9-7ded7bda0411","type":"message","text":"you'dhave to global it.","user":"U69BL50BF","ts":"1612453867.275400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iCK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you'dhave to global it."}]}]}]},{"client_msg_id":"f37c2a2c-4b80-4ac1-b733-e07d33126ac4","type":"message","text":"unrelated question, are there any major drawbacks to using MultiScaleArrays? performance penalties or something?","user":"U01H36BUDJB","ts":"1612454923.275900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wKq=o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"unrelated question, are there any major drawbacks to using MultiScaleArrays? performance penalties or something?"}]}]}]},{"client_msg_id":"c8fd7389-0070-4b8c-956e-eb0c9d75d5b9","type":"message","text":"yes, it's discontiguous","user":"U69BL50BF","ts":"1612456323.276100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qej","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, it's discontiguous"}]}]}]},{"client_msg_id":"df6396db-3455-4e15-82e1-c6cdcb341e03","type":"message","text":"hmm. well the alternative in my problem domain would be to have a single contiguous state array but possibly with large sections that have zero derivatives, if that particular layer does not implement the variable","user":"U01H36BUDJB","ts":"1612457507.277400","team":"T68168MUP","edited":{"user":"U01H36BUDJB","ts":"1612457583.000000"},"blocks":[{"type":"rich_text","block_id":"rGO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm. well the alternative in my problem domain would be to have a single contiguous state array but possibly with large sections that have zero derivatives, if that particular layer does not implement the variable"}]}]}]},{"client_msg_id":"f62b057b-e956-4b43-bd6a-66607ba4f070","type":"message","text":"so I guess how efficient that is depends on how well the solvers handle sparsity and/or zero derivatives","user":"U01H36BUDJB","ts":"1612457528.277900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sqXoZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so I guess how efficient that is depends on how well the solvers handle sparsity and/or zero derivatives"}]}]}]},{"client_msg_id":"72767238-0794-44d2-8571-439914fe0133","type":"message","text":"I saw something on this slack recently but don't remember what it said exactly. If I have a large system, but I am primarily interested in just the linear combination of some of the state variables (for instance, an age structured model where I want to measure the total population), is there a method that will get me that more efficiently than solving for all the state variables?","user":"U011V2YN59N","ts":"1612459229.279700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y8Q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I saw something on this slack recently but don't remember what it said exactly. If I have a large system, but I am primarily interested in just the linear combination of some of the state variables (for instance, an age structured model where I want to measure the total population), is there a method that will get me that more efficiently than solving for all the state variables?"}]}]}]},{"client_msg_id":"c90b1c5d-6ec5-41c0-be27-2c56b5208b30","type":"message","text":"not in general. In general, you need to solve the nonlinear function to linearly combine.","user":"U69BL50BF","ts":"1612459338.280100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CM3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not in general. In general, you need to solve the nonlinear function to linearly combine."}]}]}]},{"client_msg_id":"6e497ff9-a7e7-4146-a670-f9d930c92eb8","type":"message","text":"Right ok, I'm not sure what it was that I was thinking about then. Thanks!","user":"U011V2YN59N","ts":"1612459680.280700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vONW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right ok, I'm not sure what it was that I was thinking about then. Thanks!"}]}]}]},{"client_msg_id":"0b44f85b-b305-4255-9261-9c6622583183","type":"message","text":"is there documentation somewhere on how `solve` determines when it needs to allocate new instances of `u`? I guess it's at least partially solver dependent.","user":"U01H36BUDJB","ts":"1612463376.283100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Gdje","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there documentation somewhere on how "},{"type":"text","text":"solve","style":{"code":true}},{"type":"text","text":" determines when it needs to allocate new instances of "},{"type":"text","text":"u","style":{"code":true}},{"type":"text","text":"? I guess it's at least partially solver dependent."}]}]}]},{"client_msg_id":"82ec9c8c-091f-4132-bccd-7864fb448ec4","type":"message","text":"Any advice on profiling solving differential equations on the GPU? The profiler utilities in Julia confuse me","user":"UPM0H43C7","ts":"1612467195.284500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9soa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Any advice on profiling solving differential equations on the GPU? The profiler utilities in Julia confuse me"}]}]}]},{"client_msg_id":"69d05f41-780c-4f2f-91b0-e24824cc5211","type":"message","text":"<https://juliagpu.gitlab.io/CUDA.jl/development/profiling/>","user":"U67BJLYCS","ts":"1612467376.284700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lXayK","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://juliagpu.gitlab.io/CUDA.jl/development/profiling/"}]}]}],"thread_ts":"1612467376.284700","reply_count":2,"reply_users_count":2,"latest_reply":"1612467745.285100","reply_users":["UPM0H43C7","U9MD78Z9N"],"subscribed":false,"reactions":[{"name":"+1","users":["UPM0H43C7"],"count":1}]},{"client_msg_id":"aaafacdb-a4db-4672-aa58-eae94fa80a1c","type":"message","text":"PresetTimeCallback vs ContinousCallback\nwhich one should I use if I want to have callbacks at preset times but I desire high accuracy of the callback execution. I know that PresetTimeCallback &lt;: DiscreteCallback so perhaps there is no rootfinding, is it true? My question what is the fundamental difference between PresetTimeCallback and ContinousCallback for event time accuracy.","user":"UR7P24FRC","ts":"1612503798.288700","team":"T68168MUP","edited":{"user":"UR7P24FRC","ts":"1612503837.000000"},"blocks":[{"type":"rich_text","block_id":"vbr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"PresetTimeCallback vs ContinousCallback\nwhich one should I use if I want to have callbacks at preset times but I desire high accuracy of the callback execution. I know that PresetTimeCallback <: DiscreteCallback so perhaps there is no rootfinding, is it true? My question what is the fundamental difference between PresetTimeCallback and ContinousCallback for event time accuracy."}]}]}],"thread_ts":"1612503798.288700","reply_count":5,"reply_users_count":2,"latest_reply":"1612505736.289700","reply_users":["UR7P24FRC","U69BL50BF"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Hi again..diffeqpy..Usage.  If i understand correctly diffeqpy uses the main \"toolbox?\" DifferentialEquations\"? Does it also facilitate using the diffeqflux package and zygote? I would like to do parameter optimization with AD over the ode solution given a ode system model (thermal cooling system with heat exhcangers, delays, controllers etc)..  OR is direct Julia coding the only answer to the problem. I noticed that even the test for dde's created a Julia function by sending a text string to julia (so  it appears that one will have to learn the Julia syntax in any case..)  But since the function now is in Julia, maybe zygote etc works? Even from Python interface?","ts":"1612522715.289900","username":"[gitter] <peroveh>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"Hi again..diffeqpy..Usage.  If i understand correctly diffeqpy uses the main \"toolbox?\" DifferentialEquations\"? Does it also facilitate using the diffeqflux package and zygote? I would like to do parameter optimization with AD over the ode solution given a ode system model (thermal cooling system with heat exhcangers, delays, controllers etc)..  OR is direct Julia coding the only answer to the problem. I noticed that even the test for dde's created a Julia function by sending a text string to julia (so  it appears that one will have to learn the Julia syntax in any case..)  But since the function now is in Julia, maybe zygote etc works? Even from Python interface?","verbatim":false}}]},{"client_msg_id":"f12de649-38d6-497d-895c-4878da416aa3","type":"message","text":"<@U69BL50BF> have you submitted a Dynamics BoF session for the upcoming JuliaCon? I think we should host another one. If you haven't submitted it let me know and I'll do it.","user":"U8J1KET6K","ts":"1612523798.290500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/TKD","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" have you submitted a Dynamics BoF session for the upcoming JuliaCon? I think we should host another one. If you haven't submitted it let me know and I'll do it."}]}]}],"thread_ts":"1612523798.290500","reply_count":3,"reply_users_count":2,"latest_reply":"1612525487.291600","reply_users":["UUTEK2XTM","U69BL50BF"],"subscribed":false,"reactions":[{"name":"+1","users":["UUTEK2XTM"],"count":1}]},{"client_msg_id":"aed1a39d-7389-4a8d-b859-37f327e2d995","type":"message","text":"&gt; Does it also facilitate using the diffeqflux package and zygote?\nNot yet. Doing differentiation through both languages together is possible but not setup yet.","user":"U69BL50BF","ts":"1612525476.291300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7dS","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Does it also facilitate using the diffeqflux package and zygote?"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Not yet. Doing differentiation through both languages together is possible but not setup yet."}]}]}]},{"client_msg_id":"abc55f62-f949-4539-bd1d-d75dcc1963a9","type":"message","text":"Hey all, I have a continuous ODE system `A[N, B, C, t]; B[A, C, t]; C[A, B, t]`  where N is an externally set constant. I'd like to make N follow a Weiner process (from some given start position and sometimes bounded).  Am I better off keeping this system as an ODE with N sampling from a distribution, or convert to an `SDEProblem` with diagonal noise?","user":"UUTEK2XTM","ts":"1612542158.296400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1sH2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey all, I have a continuous ODE system "},{"type":"text","text":"A[N, B, C, t]; B[A, C, t]; C[A, B, t]","style":{"code":true}},{"type":"text","text":"  where N is an externally set constant. I'd like to make N follow a Weiner process (from some given start position and sometimes bounded).  Am I better off keeping this system as an ODE with N sampling from a distribution, or convert to an "},{"type":"text","text":"SDEProblem","style":{"code":true}},{"type":"text","text":" with diagonal noise?"}]}]}]},{"client_msg_id":"4ffa6da2-81a8-4f14-a522-422e3049016d","type":"message","text":"Are there any examples on how to register Flux layers in MTK, and get derivatives? I'm trying to do something like:\n```using ModelingToolkit\nusing DiffEqFlux\nu = [3.0, 0.25, 7.0]\nt = 0.0\nn_u = length(u)\ncontrol_network = FastChain(FastDense(n_u+1, 50, tanh),FastDense(50, 1))\ncontrol_network(vcat(u,t), initial_params(control_network))\nQ(state_time,x) = control_network(state_time,x)\n@register Q(state_time,x)\nModelingToolkit.derivative(::typeof(Q,...) = ... # need derivatives towards u```\nAn even more basic question, can you register vector valued functions?","user":"UQEDP1Q5V","ts":"1612550585.298200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uCE8g","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Are there any examples on how to register Flux layers in MTK, and get derivatives? I'm trying to do something like:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using ModelingToolkit\nusing DiffEqFlux\nu = [3.0, 0.25, 7.0]\nt = 0.0\nn_u = length(u)\ncontrol_network = FastChain(FastDense(n_u+1, 50, tanh),FastDense(50, 1))\ncontrol_network(vcat(u,t), initial_params(control_network))\nQ(state_time,x) = control_network(state_time,x)\n@register Q(state_time,x)\nModelingToolkit.derivative(::typeof(Q,...) = ... # need derivatives towards u"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"An even more basic question, can you register vector valued functions?"}]}]}]},{"client_msg_id":"954f2914-2604-406a-a360-332f995950be","type":"message","text":"non-scalar stuff is still a bit away in MTK","user":"U69BL50BF","ts":"1612551090.298700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0D2t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"non-scalar stuff is still a bit away in MTK"}]}]}]},{"client_msg_id":"c29684cb-6236-4e5e-aad7-c5b98f42a9da","type":"message","text":"but there is an example IIRC in Catalyst.jl","user":"U69BL50BF","ts":"1612551100.299000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oHp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but there is an example IIRC in Catalyst.jl"}]}]}]},{"client_msg_id":"7a88f2fe-f485-4aaf-9327-d4c5ea76f6f0","type":"message","text":"the issues has one.","user":"U69BL50BF","ts":"1612551102.299200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1zxW4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the issues has one."}]}]}]},{"client_msg_id":"4a1113f0-a896-4571-8752-095598fc3132","type":"message","text":"<https://github.com/SciML/Catalyst.jl/issues/248> ?  Why can `S, I, R` not be an array in the input, but p can?\nAnd quite a bit of allocations for `[S, I, R]` , I'm guessing.","user":"UQEDP1Q5V","ts":"1612552676.301800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yVFP","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/SciML/Catalyst.jl/issues/248"},{"type":"text","text":" ?  Why can "},{"type":"text","text":"S, I, R ","style":{"code":true}},{"type":"text","text":"not be an array in the input, but p can?\nAnd quite a bit of allocations for"},{"type":"text","text":" [S, I, R]","style":{"code":true}},{"type":"text","text":" , I'm guessing."}]}]}]},{"client_msg_id":"b0b5d6d9-d227-4687-a9c5-9a4f78927086","type":"message","text":"it's still somewhat sample code","user":"U69BL50BF","ts":"1612552723.302000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J40F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's still somewhat sample code"}]}]}]},{"client_msg_id":"211a27b6-f2e9-4523-b162-b79c151bf09f","type":"message","text":"we don't have quite a good way of representing vectors symbolically right now","user":"U69BL50BF","ts":"1612552734.302300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A370","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"we don't have quite a good way of representing vectors symbolically right now"}]}]}]},{"client_msg_id":"8fc31192-c7eb-4581-aaad-8ac83de65161","type":"message","text":"but that's coming soon","user":"U69BL50BF","ts":"1612552737.302600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L5Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but that's coming soon"}]}]}]},{"client_msg_id":"d89de65e-5601-4a02-9939-cb7715f07e68","type":"message","text":"Does the UniversalDiffEq paper have a publication in a journal?","user":"U6P4UPP9D","ts":"1612570690.303900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dxf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does the UniversalDiffEq paper have a publication in a journal?"}]}]}]},{"type":"message","subtype":"bot_message","text":"Looks like there's a new release of Modia out. See TinyModia at <https://github.com/ModiaSim/TinyModia.jl>. Looks like composition of objects is simpler. No more macros. I wonder how it compares to ModelingToolkit or if there are possibilities to convert between models.  ","ts":"1612572318.304000","username":"[gitter] <tshort>","icons":{"image_48":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2021-02-06/1721696784674_48.png"},"bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"Looks like there's a new release of Modia out. See TinyModia at <https://github.com/ModiaSim/TinyModia.jl>. Looks like composition of objects is simpler. No more macros. I wonder how it compares to ModelingToolkit or if there are possibilities to convert between models.  ","verbatim":false}}]},{"client_msg_id":"b72222f0-a85f-48b6-81cf-06642fbc89e7","type":"message","text":"&gt; Timeline:\n&gt; \n&gt; *Deadline for Proposal Submission: March 5, 2021*\n&gt; Projects will be Notified: April 15, 2021 (or sooner)\n&gt; \n&gt; Available Funding:\n&gt; \n&gt; Up to $5,000 per proposal\n&gt; \n&gt; Eligibility:\n&gt; \n&gt; Any NumFOCUS Fiscally Sponsored or Affiliated project may submit 1 proposal on behalf of the project per grant cycle.\n&gt; If you wish to solicit proposal ideas from your project community, the project leaders must organize their own review process to select the proposal that the leadership will put forward to NumFOCUS.\n&gt; Funding can be used for: code development; documentation work; website updates; workshops and sprints; educational, sustainability, and diversity initiatives; or other types of projects.\n&gt; Proposed work must be achievable within the 12 months following the award.\n&gt; The call is open to applicants from any nationality and can be performed at any university, institute, or business worldwide (US export laws permitting).\n&gt; \n&gt; Funding Distribution:\n&gt; For fiscally sponsored projects only, NumFOCUS can *deposit the grant funding directly into the project’s account*. The project would then submit invoices through the normal channels (i.e. Rocket) to pay the grant expenses.\n&gt; NumFOCUS can set up an *independent contractor agreement* with an individual or company.\n&gt; NumFOCUS can award the money as a *grant or subcontract to a student or postdoc at a university* (depending on the rules of the university).\n&gt; NumFOCUS can *directly pay for expenses* associated with the grant (e.g. booking flights on behalf of project leaders to attend a workshop, per diems for travel days)","user":"U69BL50BF","ts":"1612593002.305100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k8Z/A","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Timeline:\n\n"},{"type":"text","text":"Deadline for Proposal Submission: March 5, 2021","style":{"bold":true}},{"type":"text","text":"\nProjects will be Notified: April 15, 2021 (or sooner)\n\nAvailable Funding:\n\nUp to $5,000 per proposal\n\nEligibility:\n\nAny NumFOCUS Fiscally Sponsored or Affiliated project may submit 1 proposal on behalf of the project per grant cycle.\nIf you wish to solicit proposal ideas from your project community, the project leaders must organize their own review process to select the proposal that the leadership will put forward to NumFOCUS.\nFunding can be used for: code development; documentation work; website updates; workshops and sprints; educational, sustainability, and diversity initiatives; or other types of projects.\nProposed work must be achievable within the 12 months following the award.\nThe call is open to applicants from any nationality and can be performed at any university, institute, or business worldwide (US export laws permitting).\n\nFunding Distribution:\nFor fiscally sponsored projects only, NumFOCUS can "},{"type":"text","text":"deposit the grant funding directly into the project’s account","style":{"bold":true}},{"type":"text","text":". The project would then submit invoices through the normal channels (i.e. Rocket) to pay the grant expenses.\nNumFOCUS can set up an "},{"type":"text","text":"independent contractor agreement","style":{"bold":true}},{"type":"text","text":" with an individual or company.\nNumFOCUS can award the money as a "},{"type":"text","text":"grant or subcontract to a student or postdoc at a university","style":{"bold":true}},{"type":"text","text":" (depending on the rules of the university).\nNumFOCUS can "},{"type":"text","text":"directly pay for expenses","style":{"bold":true}},{"type":"text","text":" associated with the grant (e.g. booking flights on behalf of project leaders to attend a workshop, per diems for travel days)"}]}]}]},{"client_msg_id":"654c55a7-d953-458c-a9f0-2bf45084b50a","type":"message","text":"Two questions: (1) I'm seeing a performance drop of almost 50x when using ArrayPartition as the state variable, even with no problems from @code_warntype. Is this normal/expected? And (2) Is there a standard, performant way to couple PDEs together when the discretized grid sizes are different?","user":"U01H36BUDJB","ts":"1612645291.309100","team":"T68168MUP","edited":{"user":"U01H36BUDJB","ts":"1612645364.000000"},"blocks":[{"type":"rich_text","block_id":"+=8F0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Two questions: (1) I'm seeing a performance drop of almost 50x when using ArrayPartition as the state variable, even with no problems from @code_warntype. Is this normal/expected? And (2) Is there a standard, performant way to couple PDEs together when the discretized grid sizes are different?"}]}]}]},{"client_msg_id":"f9102d84-93d7-46ca-9d11-5eecdf48b20e","type":"message","text":"If I have a non-vector-shaped state, what indexing should I use if I want a manual jacobian through `ODEFunction` ?","user":"UMC2RHKLZ","ts":"1612652261.311400","team":"T68168MUP","edited":{"user":"UMC2RHKLZ","ts":"1612652268.000000"},"blocks":[{"type":"rich_text","block_id":"fVo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If I have a non-vector-shaped state, what indexing should I use if I want a manual jacobian through "},{"type":"text","text":"ODEFunction","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1612652261.311400","reply_count":3,"reply_users_count":2,"latest_reply":"1612653210.312600","reply_users":["U69BL50BF","UMC2RHKLZ"],"subscribed":false},{"client_msg_id":"7d565e7a-faa4-45e3-a751-833849bf9c8e","type":"message","text":"Is there any way to to use `Expectation` (with Koopman) from `DiffEqUncertainty`  for an objective that depends not only on the states but also on sensitivity states, which come from `ODELocalSensitivityProblem` or another AD method.","user":"UQEDP1Q5V","ts":"1612713292.331900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jUxM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there any way to to use "},{"type":"text","text":"Expectation","style":{"code":true}},{"type":"text","text":" (with Koopman) from "},{"type":"text","text":"DiffEqUncertainty","style":{"code":true}},{"type":"text","text":"  for an objective that depends not only on the states but also on sensitivity states, which come from "},{"type":"text","text":"ODELocalSensitivityProblem","style":{"code":true}},{"type":"text","text":" or another AD method."}]}]}]},{"client_msg_id":"78a4bf5b-37c6-4cde-b5ab-72ee07b5259d","type":"message","text":":thinking_face: `ODELocalSensitivityProblem` is an AbstractODEProblem","user":"U69BL50BF","ts":"1612713411.332200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6gQ4","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"thinking_face"},{"type":"text","text":" "},{"type":"text","text":"ODELocalSensitivityProblem","style":{"code":true}},{"type":"text","text":" is an AbstractODEProblem"}]}]}]},{"client_msg_id":"1b787103-54dc-4795-9027-f6f97247936e","type":"message","text":"maybe it can just work?","user":"U69BL50BF","ts":"1612713415.332400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zGO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"maybe it can just work?"}]}]}]},{"client_msg_id":"208edde4-a618-4b11-b460-b0b190a08275","type":"message","text":"I think the interface currently wants a `ODEProblem`. But if the type is loosened to `AbstractODEProblem` it might still work.","user":"UQEDP1Q5V","ts":"1612713728.334200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qe=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the interface currently wants a "},{"type":"text","text":"ODEProblem","style":{"code":true}},{"type":"text","text":". But if the type is loosened to "},{"type":"text","text":"AbstractODEProblem","style":{"code":true}},{"type":"text","text":" it might still work."}]}]}]},{"client_msg_id":"26fdae25-cd30-40b3-aac3-89d377cd6482","type":"message","text":"yeah try it","user":"U69BL50BF","ts":"1612713762.334400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DH40","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah try it"}]}]}]},{"client_msg_id":"f8ccc39b-979e-45ce-a7fe-7c979a0b2346","type":"message","text":"What is the default value of `save_idxs` for `solve`? (I'm really asking the actual default value in code). I'm trying to find the default values, can someone share where in DiffEqBase.jl are the defaults defined? I couldn't find them in `common_defaults.jl` or `solve.jl`.","user":"U8J1KET6K","ts":"1612788017.338000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4e0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What is the default value of "},{"type":"text","text":"save_idxs","style":{"code":true}},{"type":"text","text":" for "},{"type":"text","text":"solve","style":{"code":true}},{"type":"text","text":"? (I'm really asking the actual default value in code). I'm trying to find the default values, can someone share where in DiffEqBase.jl are the defaults defined? I couldn't find them in "},{"type":"text","text":"common_defaults.jl","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"solve.jl","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1612788017.338000","reply_count":2,"reply_users_count":2,"latest_reply":"1612788827.338300","reply_users":["UUTEK2XTM","U8J1KET6K"],"subscribed":false},{"client_msg_id":"db21951c-d8cf-48a0-b2fc-a92426bf16b2","type":"message","text":"Quick question: what are `(x, p)` arguments here?\n```optfunc = GalacticOptim.OptimizationFunction((x, p) -&gt; loss_rd(x), GalacticOptim.AutoForwardDiff())```\nBecause when I look at a `loss` example:\n```function loss_rd(p)\n  sum(abs2,x-1 for x in predict_rd(p))\nend\n\nfunction predict_rd(p)\n  Array(solve(prob,Tsit5(),p=p,saveat=0.1,reltol=1e-4))\nend```\nlook like it receives parameters `p` . So in the OptimizationFunction function argument `(x, p) -&gt; loss_rd(x)` , `x` refers to the parameters? And what is `p` then?","user":"U01658MJH3P","ts":"1612791897.341400","team":"T68168MUP","edited":{"user":"U01658MJH3P","ts":"1612792036.000000"},"blocks":[{"type":"rich_text","block_id":"Xq9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Quick question: what are "},{"type":"text","text":"(x, p)","style":{"code":true}},{"type":"text","text":" arguments here?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"optfunc = GalacticOptim.OptimizationFunction((x, p) -> loss_rd(x), GalacticOptim.AutoForwardDiff())"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Because when I look at a "},{"type":"text","text":"loss","style":{"code":true}},{"type":"text","text":" example:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function loss_rd(p)\n  sum(abs2,x-1 for x in predict_rd(p))\nend\n\nfunction predict_rd(p)\n  Array(solve(prob,Tsit5(),p=p,saveat=0.1,reltol=1e-4))\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"look like it receives parameters "},{"type":"text","text":"p","style":{"code":true}},{"type":"text","text":" . So in the OptimizationFunction function argument "},{"type":"text","text":"(x, p) -> loss_rd(x)","style":{"code":true}},{"type":"text","text":" , "},{"type":"text","text":"x","style":{"code":true}},{"type":"text","text":" refers to the parameters? And what is "},{"type":"text","text":"p","style":{"code":true}},{"type":"text","text":" then?"}]}]}]},{"client_msg_id":"6ed82049-7011-4dd0-a19d-15b1d2cfd9f5","type":"message","text":"`x` is the state of the optimization","user":"U69BL50BF","ts":"1612792610.341700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XRT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"x","style":{"code":true}},{"type":"text","text":" is the state of the optimization"}]}]}]},{"client_msg_id":"1bc5c12b-7830-4786-af04-08d3f358b1d6","type":"message","text":"`p` are the parameters of the optimization","user":"U69BL50BF","ts":"1612792614.341900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uJVS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"p","style":{"code":true}},{"type":"text","text":" are the parameters of the optimization"}]}]}]},{"client_msg_id":"f739ad65-a664-44a9-8cd9-e662d06d3afe","type":"message","text":"if you're saying you're optimizing the parameters of the differential equation","user":"U69BL50BF","ts":"1612792628.342300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"20T","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you're saying you're optimizing the parameters of the differential equation"}]}]}]},{"client_msg_id":"e7403d69-687e-4273-9e37-00df365383d8","type":"message","text":"`x` are the parameters of the differential equation","user":"U69BL50BF","ts":"1612792641.342700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yjM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"x","style":{"code":true}},{"type":"text","text":" are the parameters of the differential equation"}]}]}]},{"client_msg_id":"78d0bbd2-01e0-4637-8b2e-916c6f1fa984","type":"message","text":"and `p` are hyperparameters you could have","user":"U69BL50BF","ts":"1612792647.343000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DaL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and "},{"type":"text","text":"p","style":{"code":true}},{"type":"text","text":" are hyperparameters you could have"}]}]}]},{"client_msg_id":"75c6ef15-63ad-4e8c-a7a1-dd8040b7680e","type":"message","text":"and in theory you would be able to differentiate w.r.t. those hyperparameters (soon)","user":"U69BL50BF","ts":"1612792661.343400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P0k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and in theory you would be able to differentiate w.r.t. those hyperparameters (soon)"}]}]}]},{"client_msg_id":"265766f3-4bac-4d15-8bd8-10201667cb4c","type":"message","text":"Perfect, let me check if I understood correctly. The parameters of the optimization are given here?\n```optprob = GalacticOptim.OptimizationProblem(optfunc, p)```\n`p` are the parameters of the optimization?","user":"U01658MJH3P","ts":"1612793225.346100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j5e","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Perfect, let me check if I understood correctly. The parameters of the optimization are given here?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"optprob = GalacticOptim.OptimizationProblem(optfunc, p)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"p","style":{"code":true}},{"type":"text","text":" are the parameters of the optimization?"}]}]}]},{"client_msg_id":"368d084a-e082-41e9-8b39-ca2378dfe10d","type":"message","text":"hmm, not sure, `p` is the initial state of the optimization, right?","user":"U01658MJH3P","ts":"1612793421.346700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AWE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm, not sure, "},{"type":"text","text":"p","style":{"code":true}},{"type":"text","text":" is the initial state of the optimization, right?"}]}]}]},{"client_msg_id":"a9fa91da-43a9-4fa9-acb6-196d2b7e97cc","type":"message","text":"yes","user":"U69BL50BF","ts":"1612793827.346900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8=c4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}]},{"client_msg_id":"e81091b2-bfec-4845-89f3-41d6f3e0b8f4","type":"message","text":"that looks right","user":"U69BL50BF","ts":"1612793829.347100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AKNnw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that looks right"}]}]}]},{"client_msg_id":"29a3dfe0-e192-4198-b324-e9485534ceee","type":"message","text":"perfect, so `p` there is the initial state of the optimization. I get it.","user":"U01658MJH3P","ts":"1612793976.347700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2Drav","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"perfect, so "},{"type":"text","text":"p","style":{"code":true}},{"type":"text","text":" there is the initial state of the optimization. I get it."}]}]}]},{"client_msg_id":"4251f529-3286-436a-8871-022ca244eedb","type":"message","text":"Is it possible to connect simple least squares using LsqFit with GalacticOptim? In LsqFit says:\n_“The basic functionality was originaly in <https://github.com/JuliaNLSolvers/Optim.jl|Optim.jl>…”_\nSo I was wondering if this was possible because GalacticOptim has Optim as a dependence","user":"U01658MJH3P","ts":"1612794098.349000","team":"T68168MUP","edited":{"user":"U01658MJH3P","ts":"1612794273.000000"},"blocks":[{"type":"rich_text","block_id":"zPk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it possible to connect simple least squares using LsqFit with GalacticOptim? In LsqFit says:\n"},{"type":"text","text":"“The basic functionality was originaly in ","style":{"italic":true}},{"type":"link","url":"https://github.com/JuliaNLSolvers/Optim.jl","text":"Optim.jl","style":{"italic":true}},{"type":"text","text":"…”","style":{"italic":true}},{"type":"text","text":"\nSo I was wondering if this was possible because GalacticOptim has Optim as a dependence"}]}]}]},{"client_msg_id":"9f6b5392-6a69-4a76-b7f1-1acf0e0dada3","type":"message","text":"LsqFit requires a specific loss function","user":"U69BL50BF","ts":"1612794296.349400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"T08","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"LsqFit requires a specific loss function"}]}]}]},{"client_msg_id":"82cb2a92-eee6-4896-81e2-14861e09f66f","type":"message","text":"it could get setup","user":"U69BL50BF","ts":"1612794298.349600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9jSc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it could get setup"}]}]}]},{"client_msg_id":"cdda7d34-3aac-4e99-9e3c-aa31a1377c1f","type":"message","text":"Excellent. And a final question, for now :smile:\n\nI want to fit something of the form `a + b * x + c * x^2` . In that case, I must define a layer:\n```layer = TensorLayer([PolynomialBasis(3)], 1)```\nOr there is another way? With this approach it works correctly but I was wondering if this is the simplest way to work with this simple example","user":"U01658MJH3P","ts":"1612794903.351900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CB1v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Excellent. And a final question, for now "},{"type":"emoji","name":"smile"},{"type":"text","text":"\n\nI want to fit something of the form "},{"type":"text","text":"a + b * x + c * x^2","style":{"code":true}},{"type":"text","text":" . In that case, I must define a layer:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"layer = TensorLayer([PolynomialBasis(3)], 1)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Or there is another way? With this approach it works correctly but I was wondering if this is the simplest way to work with this simple example"}]}]}]},{"client_msg_id":"e343d35d-6289-4e4c-840c-21c21fad586e","type":"message","text":"you could also just write it out by hand","user":"U69BL50BF","ts":"1612794928.352200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0+p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you could also just write it out by hand"}]}]}]},{"client_msg_id":"9a031013-d11b-4186-ad4c-6e8d55e06c65","type":"message","text":"but yeah, that's the library way to do it.","user":"U69BL50BF","ts":"1612794933.352400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oosx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but yeah, that's the library way to do it."}]}]}]},{"client_msg_id":"badd7e79-2891-4be5-ad86-25ab83ade7ec","type":"message","text":"sorry for the questions, I just started using DiffEqFlux. Every time I face a new problem to solve I get a way to solve it from one SciML package. The ecosystem is just great. Thank you!","user":"U01658MJH3P","ts":"1612795039.353600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tUUP/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sorry for the questions, I just started using DiffEqFlux. Every time I face a new problem to solve I get a way to solve it from one SciML package. The ecosystem is just great. Thank you!"}]}]}],"reactions":[{"name":"+1","users":["U01H36BUDJB"],"count":1}]},{"client_msg_id":"ff3a2527-2e05-4642-9447-d551d3f387e5","type":"message","text":"<@U01658MJH3P> I have the same feeling. I spend some time trying to solve something and then I realize SciML (or someone else) already has a package for it :sweat_smile:","user":"U01H36BUDJB","ts":"1612795105.354600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9Zw","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U01658MJH3P"},{"type":"text","text":" I have the same feeling. I spend some time trying to solve something and then I realize SciML (or someone else) already has a package for it "},{"type":"emoji","name":"sweat_smile"}]}]}],"reactions":[{"name":"point_up_2","users":["U01658MJH3P"],"count":1},{"name":"+1","users":["U01658MJH3P"],"count":1}]},{"client_msg_id":"f61c39a4-abd2-4803-a6a6-41e49a4a8abb","type":"message","text":"<@U69BL50BF> I am adding callbacks to BifurcationKit.jl in order to compute codim2 bifurcation curves. I have the continuous callback working but I need something like a discrete callback. Looking at your discrete callback, does it find the precise time of switching false -&gt; true?","user":"U7GQE9JP9","ts":"1612796359.356400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8VO1","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" I am adding callbacks to BifurcationKit.jl in order to compute codim2 bifurcation curves. I have the continuous callback working but I need something like a discrete callback. Looking at your discrete callback, does it find the precise time of switching false -> true?"}]}]}],"thread_ts":"1612796359.356400","reply_count":3,"reply_users_count":1,"latest_reply":"1612797213.356900","reply_users":["U69BL50BF"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Hi, I am hoping someone can help me with setting up `diffeqr`. I am not able to successfully run `diffeq_setup`. ```  library(diffeqr) de &lt;- diffeqr::diffeq_setup() #&gt; Julia version 1.5.3 at location /Applications/Julia-1.5.app/Contents/Resources/julia/bin will be used. #&gt; Loading setup script for JuliaCall... #&gt; Finish loading setup script for JuliaCall. #&gt; Error: Error happens in Julia. #&gt; UndefVarError: AbstractDDESolution not defined #&gt; Stacktrace: #&gt;  [1] getproperty(::Module, ::Symbol) at ./Base.jl:26 #&gt;  [2] top-level scope at none:1 #&gt;  [3] eval(::Module, ::Any) at ./boot.jl:331 #&gt;  [4] top-level scope at none:1 #&gt;  [5] eval(::Module, ::Any) at ./boot.jl:331 #&gt;  [6] eval_string(::String) at /Users/damon/Library/R/4.0/library/JuliaCall/julia/setup.jl:203 #&gt;  [7] docall(::Ptr{Nothing}) at /Users/damon/Library/R/4.0/library/JuliaCall/julia/setup.jl:176 sessionInfo() #&gt; R version 4.0.3 (2020-10-10) #&gt; Platform: x86_64-apple-darwin17.0 (64-bit) #&gt; Running under: macOS Big Sur 10.16 #&gt;  #&gt; Matrix products: default #&gt; BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib #&gt; LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib #&gt;  #&gt; locale: #&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #&gt;  #&gt; attached base packages: #&gt; [1] stats     graphics  grDevices utils     datasets  methods   base      #&gt;  #&gt; other attached packages: #&gt; [1] diffeqr_1.1.0 #&gt;  #&gt; loaded via a namespace (and not attached): #&gt;  [1] Rcpp_1.0.6            JuliaCall_0.17.2.9000 crayon_1.4.0          #&gt;  [4] digest_0.6.27         backports_1.2.1       lifecycle_0.2.0       #&gt;  [7] reprex_1.0.0          magrittr_2.0.1        evaluate_0.14         #&gt; [10] pillar_1.4.7          highr_0.8             stringi_1.5.3         #&gt; [13] rlang_0.4.10          fs_1.5.0              vctrs_0.3.6           #&gt; [16] ellipsis_0.3.1        rmarkdown_2.6         styler_1.3.2          #&gt; [19] tools_4.0.3           stringr_1.4.0         purrr_0.3.4           #&gt; [22] xfun_0.20             yaml_2.2.1            compiler_4.0.3        #&gt; [25] pkgconfig_2.0.3       htmltools_0.5.1.1     knitr_1.31            #&gt; [28] tibble_3.0.6 ```","ts":"1612814166.357300","username":"[gitter] <damonbayer>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"Hi, I am hoping someone can help me with setting up `diffeqr`. I am not able to successfully run `diffeq_setup`.\n```\n library(diffeqr)\nde &lt;- diffeqr::diffeq_setup()\n#&gt; Julia version 1.5.3 at location /Applications/Julia-1.5.app/Contents/Resources/julia/bin will be used.\n#&gt; Loading setup script for JuliaCall...\n#&gt; Finish loading setup script for JuliaCall.\n#&gt; Error: Error happens in Julia.\n#&gt; UndefVarError: AbstractDDESolution not defined\n#&gt; Stacktrace:\n#&gt;  [1] getproperty(::Module, ::Symbol) at ./Base.jl:26\n#&gt;  [2] top-level scope at none:1\n#&gt;  [3] eval(::Module, ::Any) at ./boot.jl:331\n#&gt;  [4] top-level scope at none:1\n#&gt;  [5] eval(::Module, ::Any) at ./boot.jl:331\n#&gt;  [6] eval_string(::String) at /Users/damon/Library/R/4.0/library/JuliaCall/julia/setup.jl:203\n#&gt;  [7] docall(::Ptr{Nothing}) at /Users/damon/Library/R/4.0/library/JuliaCall/julia/setup.jl:176\nsessionInfo()\n#&gt; R version 4.0.3 (2020-10-10)\n#&gt; Platform: x86_64-apple-darwin17.0 (64-bit)\n#&gt; Running under: macOS Big Sur 10.16\n#&gt; \n#&gt; Matrix products: default\n#&gt; BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib\n#&gt; LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib\n#&gt; \n#&gt; locale:\n#&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n#&gt; \n#&gt; attached base packages:\n#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     \n#&gt; \n#&gt; other attached packages:\n#&gt; [1] diffeqr_1.1.0\n#&gt; \n#&gt; loaded via a namespace (and not attached):\n#&gt;  [1] Rcpp_1.0.6            JuliaCall_0.17.2.9000 crayon_1.4.0         \n#&gt;  [4] digest_0.6.27         backports_1.2.1       lifecycle_0.2.0      \n#&gt;  [7] reprex_1.0.0          magrittr_2.0.1        evaluate_0.14        \n#&gt; [10] pillar_1.4.7          highr_0.8             stringi_1.5.3        \n#&gt; [13] rlang_0.4.10          fs_1.5.0              vctrs_0.3.6          \n#&gt; [16] ellipsis_0.3.1        rmarkdown_2.6         styler_1.3.2         \n#&gt; [19] tools_4.0.3           stringr_1.4.0         purrr_0.3.4          \n#&gt; [22] xfun_0.20             yaml_2.2.1            compiler_4.0.3       \n#&gt; [25] pkgconfig_2.0.3       htmltools_0.5.1.1     knitr_1.31           \n#&gt; [28] tibble_3.0.6\n```","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"I am trying to use diffeqpy to solve a large stiff system. But I constantly get Julia exception: MethodError: no method matching unsafe_convert(::Type{Float64}, ::ForwardDiff.Dual{Nothing,Float64,1}) Closest candidates are: ","ts":"1612814421.357400","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"I am trying to use diffeqpy to solve a large stiff system. But I constantly get Julia exception: MethodError: no method matching unsafe_convert(::Type{Float64}, ::ForwardDiff.Dual{Nothing,Float64,1})\nClosest candidates are: ","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"when I use Rosenbrock23() to solve it. I am able to solve it with TSIT5","ts":"1612814454.357500","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"when I use Rosenbrock23() to solve it. I am able to solve it with TSIT5","verbatim":false}}]},{"client_msg_id":"838a6a10-2422-40e4-9691-2da5cd260300","type":"message","text":"Yeah it cannot use AD on Python systems @sibyjackgrove","user":"U69BL50BF","ts":"1612814772.357800","team":"T68168MUP","edited":{"user":"U69BL50BF","ts":"1612814984.000000"},"blocks":[{"type":"rich_text","block_id":"zGjVt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah it cannot use AD on Python systems @sibyjackgrove"}]}]}]},{"client_msg_id":"9ff10dc3-ea00-4e2a-a4cd-49c1183703d7","type":"message","text":"so just do","user":"U69BL50BF","ts":"1612814774.358100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5oD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so just do"}]}]}]},{"client_msg_id":"6d3567bc-849c-4b43-9ea0-79668cb904fc","type":"message","text":"`Rosenbrock23(autodiff=false)`","user":"U69BL50BF","ts":"1612814785.358400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nNHu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Rosenbrock23(autodiff=false)","style":{"code":true}}]}]}]},{"client_msg_id":"0573cd5a-7b91-4061-8349-1de72998f6b2","type":"message","text":"@damonbayer *I think that's a bug due to versioning. I'll put a fix in and run the tests later today.*","user":"U69BL50BF","ts":"1612814883.359000","team":"T68168MUP","edited":{"user":"U69BL50BF","ts":"1612814996.000000"},"blocks":[{"type":"rich_text","block_id":"qOsC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@damonbayer "},{"type":"text","text":"I think that's a bug due to versioning. I'll put a fix in and run the tests later today.","style":{"bold":true}}]}]}]},{"type":"message","subtype":"bot_message","text":"@ChrisRackauckas Thank you, that works!","ts":"1612815058.359500","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"@ChrisRackauckas Thank you, that works!","verbatim":false}}]},{"client_msg_id":"985e9372-6752-4987-8b50-2e8439280138","type":"message","text":"I have a few questions, that perhaps are more general and basic than this channel, so I’m sorry if this is the wrong place to ask:\n\nI’m trying to implement neural CDE/ continuous time RNNs and I’ve got a basic, sluggish implementation running. The core of it is a `NeuralODE`-like struct that when called runs the following function\n```function (n::RNNODE)(X::DataInterpolations.LinearInterpolation,  u₀, p=n.p)\n\n    tstops = eltype(n.u₀).(collect(X.t))\n\n    dudt_= let re=n.re, x=X, preprocess=n.preprocess\n      (u,p,t) -&gt; re(p)(u, preprocess(X(t)))\n    end\n\n    ff = ODEFunction{false}(dudt_,tgrad=basic_tgrad)\n    prob = ODEProblem{false}(ff,u₀,getfield(n,:tspan),p)\n    solve(prob,n.args...;sense=n.sense, tstops=tstops, n.kwargs...)\nend```\nwhere `n.preprocess` is some function mapping an array to another array (e.g. permuting dimensions)\n\nQ 1) Is it always a good idea to use a `let` lock in cases like these as opposed a closure?\nQ 2) No matter what I try I keep hints from the profiler that the line `(u,p,t) -&gt; re(p)(u, preprocess(X(t)))`   is dynamically dispatched.  I’m not sure what I could do to avoid the dynamic dispatch. The preprocessing function is specified once, when the `RNNODE` constructor is used, after it’s constant for each solver step and each mini-batch.","user":"UPM0H43C7","ts":"1612816314.369300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pP9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a few questions, that perhaps are more general and basic than this channel, so I’m sorry if this is the wrong place to ask:\n\nI’m trying to implement neural CDE/ continuous time RNNs and I’ve got a basic, sluggish implementation running. The core of it is a "},{"type":"text","text":"NeuralODE","style":{"code":true}},{"type":"text","text":"-like struct that when called runs the following function\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function (n::RNNODE)(X::DataInterpolations.LinearInterpolation,  u₀, p=n.p)\n\n    tstops = eltype(n.u₀).(collect(X.t))\n\n    dudt_= let re=n.re, x=X, preprocess=n.preprocess\n      (u,p,t) -> re(p)(u, preprocess(X(t)))\n    end\n\n    ff = ODEFunction{false}(dudt_,tgrad=basic_tgrad)\n    prob = ODEProblem{false}(ff,u₀,getfield(n,:tspan),p)\n    solve(prob,n.args...;sense=n.sense, tstops=tstops, n.kwargs...)\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"where "},{"type":"text","text":"n.preprocess","style":{"code":true}},{"type":"text","text":" is some function mapping an array to another array (e.g. permuting dimensions)\n\nQ 1) Is it always a good idea to use a "},{"type":"text","text":"let","style":{"code":true}},{"type":"text","text":" lock in cases like these as opposed a closure?\nQ 2) No matter what I try I keep hints from the profiler that the line "},{"type":"text","text":"(u,p,t) -> re(p)(u, preprocess(X(t))) ","style":{"code":true}},{"type":"text","text":"  is dynamically dispatched.  I’m not sure what I could do to avoid the dynamic dispatch. The preprocessing function is specified once, when the "},{"type":"text","text":"RNNODE","style":{"code":true}},{"type":"text","text":" constructor is used, after it’s constant for each solver step and each mini-batch."}]}]}]},{"client_msg_id":"14bccda1-5887-4d54-99d2-41aebed2cb65","type":"message","text":"&gt; Q 1) Is it always a good idea to use a `let` lock in cases like these as opposed a closure?\nIt's never bad","user":"U69BL50BF","ts":"1612816341.369600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bZMS","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Q 1) Is it always a good idea to use a "},{"type":"text","text":"let","style":{"code":true}},{"type":"text","text":" lock in cases like these as opposed a closure?"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"It's never bad"}]}]}]},{"client_msg_id":"a5e07922-2fe5-43fd-af5e-a3fdc84a20b7","type":"message","text":"&gt; dynamically dispatched.  I’m not sure what I could do to avoid the dynamic dispatch. The preprocessing function is specified once, when the `RNNODE` constructor is used, after it’s constant for each solver step and each mini-batch.","user":"U69BL50BF","ts":"1612816470.370000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bPWQV","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"dynamically dispatched.  I’m not sure what I could do to avoid the dynamic dispatch. The preprocessing function is specified once, when the "},{"type":"text","text":"RNNODE","style":{"code":true}},{"type":"text","text":" constructor is used, after it’s constant for each solver step and each mini-batch."}]}]}]},{"client_msg_id":"6df5a148-d553-4609-b571-be463859ce51","type":"message","text":"how is the type defined?","user":"U69BL50BF","ts":"1612816473.370200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VP1=l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how is the type defined?"}]}]}]},{"client_msg_id":"82e4f1cd-9f57-4cbe-acb0-442e644d773d","type":"message","text":"it’s a poor re-purposing of your code :smile:\n```struct RNNODE{M&lt;:AbstractRNNDELayer,P,RE,T,A,K,I,S} &lt;: NeuralDELayer\n    model::M\n    p::P\n    re::RE\n    tspan::T\n    args::A\n    kwargs::K\n    sense\n    in::I\n    hidden::I\n    preprocess\n    #extendedstates::S\n\n    function RNNODE(model,tspan, args...;p = nothing, preprocess = identity,\n        sense = InterpolatingAdjoint(autojacvec=ZygoteVJP()), append_input=false, kwargs...)\n        _p,re = destructure(model)\n        nhidden = size(model.Wᵣ,2)\n        nin = size(model.Wᵢ,2)\n        if isnothing(p)\n            p = _p\n        end\n\n        new{typeof(model),typeof(p),typeof(re),\n            typeof(tspan),typeof(args),typeof(kwargs),\n            typeof(nin), append_input}(\n            model,p,re,tspan,args,kwargs,sense,nin,\n            nhidden, preprocess)\n    end\nend```","user":"UPM0H43C7","ts":"1612816603.370800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6pPL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it’s a poor re-purposing of your code "},{"type":"emoji","name":"smile"},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"struct RNNODE{M<:AbstractRNNDELayer,P,RE,T,A,K,I,S} <: NeuralDELayer\n    model::M\n    p::P\n    re::RE\n    tspan::T\n    args::A\n    kwargs::K\n    sense\n    in::I\n    hidden::I\n    preprocess\n    #extendedstates::S\n\n    function RNNODE(model,tspan, args...;p = nothing, preprocess = identity,\n        sense = InterpolatingAdjoint(autojacvec=ZygoteVJP()), append_input=false, kwargs...)\n        _p,re = destructure(model)\n        nhidden = size(model.Wᵣ,2)\n        nin = size(model.Wᵢ,2)\n        if isnothing(p)\n            p = _p\n        end\n\n        new{typeof(model),typeof(p),typeof(re),\n            typeof(tspan),typeof(args),typeof(kwargs),\n            typeof(nin), append_input}(\n            model,p,re,tspan,args,kwargs,sense,nin,\n            nhidden, preprocess)\n    end\nend"}]}]}]},{"client_msg_id":"8a35877a-6602-4d2b-b089-7ce23634a5e0","type":"message","text":"the lack of the type on preprocess is the issue","user":"U69BL50BF","ts":"1612816733.371100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5uuB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the lack of the type on preprocess is the issue"}]}]}]},{"client_msg_id":"2072aa4f-91bd-4fc7-82c9-53e1217bcc76","type":"message","text":"it needs a type parameter","user":"U69BL50BF","ts":"1612816736.371300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YW5xL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it needs a type parameter"}]}]}],"thread_ts":"1612816736.371300","reply_count":3,"reply_users_count":2,"latest_reply":"1612818110.374000","reply_users":["UPM0H43C7","U69BL50BF"],"subscribed":false},{"client_msg_id":"804e536e-c5f3-4ded-b92e-6d37e9a6c847","type":"message","text":"ah, cool","user":"UPM0H43C7","ts":"1612816758.371700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2Ooul","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, cool"}]}]}]},{"type":"message","subtype":"bot_message","text":"Is it possible to access lsoda() when using diffeqpy? When I try using de.lsoda(), I get an attribute error. Note that I already installed LSODA.jl using Pkg.add(\"LSODA\"). I am able to access solvers in Sundials like CVODE_BDF and CODE_Adams.","ts":"1612817361.372800","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"Is it possible to access lsoda() when using diffeqpy? When I try using de.lsoda(), I get an attribute error. Note that I already installed LSODA.jl using Pkg.add(\"LSODA\"). I am able to access solvers in Sundials like CVODE_BDF and CODE_Adams.","verbatim":false}}]},{"client_msg_id":"342b9df0-1509-44b0-a03a-b3d35997ab9b","type":"message","text":"@sibyjackgrove you'll need to `using LSODA` , probably through `eval`.","user":"U69BL50BF","ts":"1612818080.373700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8QKWJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@sibyjackgrove you'll need to "},{"type":"text","text":"using LSODA","style":{"code":true}},{"type":"text","text":" , probably through "},{"type":"text","text":"eval","style":{"code":true}},{"type":"text","text":"."}]}]}]},{"type":"message","subtype":"bot_message","text":"@chr @GitterIRCbot  &gt; [slack] &lt;chrisrackauckas&gt; @sibyjackgrove you'll need to `using LSODA` , probably through `eval`.  I tried Main.eval(\"using LSODA\") . But  de.lsoda still gives error.","ts":"1612819824.374300","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"@chr @GitterIRCbot \n&gt; [slack] &lt;chrisrackauckas&gt; @sibyjackgrove you'll need to `using LSODA` , probably through `eval`.\n\nI tried Main.eval(\"using LSODA\") . But  de.lsoda still gives error.","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"@ChrisRackauckas  &gt; [slack] &lt;chrisrackauckas&gt; @sibyjackgrove you'll need to `using LSODA` , probably through `eval`.  I tried Main.eval(\"using LSODA\") . But  de.lsoda still gives error.","ts":"1612819926.374400","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"@ChrisRackauckas \n&gt; [slack] &lt;chrisrackauckas&gt; @sibyjackgrove you'll need to `using LSODA` , probably through `eval`.\n\nI tried Main.eval(\"using LSODA\") . But  de.lsoda still gives error.","verbatim":false}}]},{"client_msg_id":"0f30414d-5d3b-455a-b013-08fc506bc68f","type":"message","text":"when you eval'd did it return anything?","user":"U69BL50BF","ts":"1612820110.374700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d0rn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"when you eval'd did it return anything?"}]}]}]},{"type":"message","subtype":"bot_message","text":"@ChrisRackauckas  &gt; [slack] &lt;chrisrackauckas&gt; when you eval'd did it return anything?  No, Main.eval(\"using LSODA\") is returning an none. I also tried importing using: from julia import LSODA and it is importing without error. Though de.lsoda is still not working.","ts":"1612820343.374800","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"@ChrisRackauckas \n&gt; [slack] &lt;chrisrackauckas&gt; when you eval'd did it return anything?\n\nNo, Main.eval(\"using LSODA\") is returning an none. I also tried importing using: from julia import LSODA and it is importing without error. Though de.lsoda is still not working.","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"Does diffeqpy use GPU automatically depending on the size of the ODE system? If not,  could you tell me how I can make it use GPU for large  ODE systems (&gt;1,000 ODEs).","ts":"1612820648.374900","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"Does diffeqpy use GPU automatically depending on the size of the ODE system? If not,  could you tell me how I can make it use GPU for large  ODE systems (&gt;1,000 ODEs).","verbatim":false}}]},{"client_msg_id":"3e410a6a-b6d4-4b75-9397-8f308e2b7467","type":"message","text":"You'll need to convert the differential equations to Julia in order to make use of GPUs, and then use CuArray initial conditions like shown in <https://github.com/SciML/DiffEqGPU.jl#within-method-gpu-parallelism-with-direct-cuarray-usage>","user":"U69BL50BF","ts":"1612820835.375700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"R25M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You'll need to convert the differential equations to Julia in order to make use of GPUs, and then use CuArray initial conditions like shown in "},{"type":"link","url":"https://github.com/SciML/DiffEqGPU.jl#within-method-gpu-parallelism-with-direct-cuarray-usage"}]}]}]},{"client_msg_id":"2d6be5b4-9c31-42d8-96f4-a92b1426c6af","type":"message","text":"Right now we cannot GPU accelerate code from Python.","user":"U69BL50BF","ts":"1612820853.376000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t+xDz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right now we cannot GPU accelerate code from Python."}]}]}]},{"type":"message","subtype":"bot_message","text":"@ChrisRackauckas   &gt; [slack] &lt;chrisrackauckas&gt; You'll need to convert the differential equations to Julia in order to make use of GPUs, and then use CuArray initial conditions like shown in <https://github.com/SciML/DiffEqGPU.jl#within-method-gpu-parallelism-with-direct-cuarray-usage>  ","ts":"1612820987.376100","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"@ChrisRackauckas \n\n&gt; [slack] &lt;chrisrackauckas&gt; You'll need to convert the differential equations to Julia in order to make use of GPUs, and then use CuArray initial conditions like shown in <https://github.com/SciML/DiffEqGPU.jl#within-method-gpu-parallelism-with-direct-cuarray-usage>\n\n","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"@ChrisRackauckas ","ts":"1612820999.376200","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"@ChrisRackauckas ","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"@ChrisRackauckas  &gt; [slack] &lt;chrisrackauckas&gt; You'll need to convert the differential equations to Julia in order to make use of GPUs, and then use CuArray initial conditions like shown in <https://github.com/SciML/DiffEqGPU.jl#within-method-gpu-parallelism-with-direct-cuarray-usage>  Oh ok. So I need to convert the ODEs to Julia. But can I still use diffeqpy for solving the ODEs?","ts":"1612821257.376300","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"@ChrisRackauckas \n&gt; [slack] &lt;chrisrackauckas&gt; You'll need to convert the differential equations to Julia in order to make use of GPUs, and then use CuArray initial conditions like shown in <https://github.com/SciML/DiffEqGPU.jl#within-method-gpu-parallelism-with-direct-cuarray-usage>\n\nOh ok. So I need to convert the ODEs to Julia. But can I still use diffeqpy for solving the ODEs?","verbatim":false}}]},{"client_msg_id":"26127e23-86f6-407d-b30d-d2821115dc79","type":"message","text":"Yeah. There's a caveat with the GPU stuff needing to be defined on the Julia side because we need to recompile it for GPUs, but you can still call the solver from diffeqpy if that part has been done.","user":"U69BL50BF","ts":"1612821383.377000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oXvl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah. There's a caveat with the GPU stuff needing to be defined on the Julia side because we need to recompile it for GPUs, but you can still call the solver from diffeqpy if that part has been done."}]}]}]}]}