{"cursor": 18, "messages": [{"client_msg_id":"ea2276af-c54f-4838-91e1-edcaf902c40a","type":"message","text":"`g` isn't necesarily a function from `R^n -&gt; R` ?","user":"UQWRPDJ68","ts":"1614797345.344200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7dGF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"g","style":{"code":true}},{"type":"text","text":" isn't necesarily a function from "},{"type":"text","text":"R^n -> R","style":{"code":true}},{"type":"text","text":" ?"}]}]}]},{"client_msg_id":"acd94106-0886-4a96-9735-0fd2c52b19d7","type":"message","text":"it doesn't need to be. It's \"gradient\" if it has a scalar output, or you can talk about its Jacobian","user":"U69BL50BF","ts":"1614797430.344700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XXddJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it doesn't need to be. It's \"gradient\" if it has a scalar output, or you can talk about its Jacobian"}]}]}]},{"client_msg_id":"355ed464-2200-4e4c-bf72-d7c95adddc4c","type":"message","text":"Is anyone aware of an existing implementation of the Newton-Cassulli-Zanolli (NCZ) method in Julia? I can't tell which algorithms NLsolvers implements.\nReference: <https://epubs.siam.org/doi/abs/10.1137/100786320>","user":"U01H36BUDJB","ts":"1614810530.345900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cy4/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is anyone aware of an existing implementation of the Newton-Cassulli-Zanolli (NCZ) method in Julia? I can't tell which algorithms NLsolvers implements.\nReference: "},{"type":"link","url":"https://epubs.siam.org/doi/abs/10.1137/100786320"}]}]}]},{"type":"message","text":"Hi! I'm trying to solve an ODE for covariance matrix. But it seems the output may not be symmetry and positive definite due to numerical errors. Is there a way to zero out the numerical errors? Could you help me with this? Thanks a lot in advance!\n\n```d_phi(u,p,t) = Jacobian_matrix(p,u)*u+u*Jacobian_matrix(p,u)'+ A'*H(u)*A\nsol = solve(ODEProblem(d_phi,phi_0,t_per_step,p))[end]```\n","files":[{"id":"F01PNMJ30H5","mode":"tombstone"}],"upload":false,"blocks":[{"type":"rich_text","block_id":"RQgpH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi! I'm trying to solve an ODE for covariance matrix. But it seems the output may not be symmetry and positive definite due to numerical errors. Is there a way to zero out the numerical errors? Could you help me with this? Thanks a lot in advance!\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"d_phi(u,p,t) = Jacobian_matrix(p,u)*u+u*Jacobian_matrix(p,u)'+ A'*H(u)*A\nsol = solve(ODEProblem(d_phi,phi_0,t_per_step,p))[end]"}]},{"type":"rich_text_section","elements":[]}]}],"user":"U01Q398M3QB","display_as_bot":false,"ts":"1614816302.350400"},{"type":"message","text":"","files":[{"id":"F01Q3NECH2P","created":1614817255,"timestamp":1614817255,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U01Q398M3QB","editable":false,"size":120328,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01Q3NECH2P/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01Q3NECH2P/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01Q3NECH2P-4dcc6cbfe5/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01Q3NECH2P-4dcc6cbfe5/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01Q3NECH2P-4dcc6cbfe5/image_360.png","thumb_360_w":360,"thumb_360_h":42,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01Q3NECH2P-4dcc6cbfe5/image_480.png","thumb_480_w":480,"thumb_480_h":56,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01Q3NECH2P-4dcc6cbfe5/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01Q3NECH2P-4dcc6cbfe5/image_720.png","thumb_720_w":720,"thumb_720_h":84,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01Q3NECH2P-4dcc6cbfe5/image_800.png","thumb_800_w":800,"thumb_800_h":93,"thumb_960":"https://files.slack.com/files-tmb/T68168MUP-F01Q3NECH2P-4dcc6cbfe5/image_960.png","thumb_960_w":960,"thumb_960_h":112,"thumb_1024":"https://files.slack.com/files-tmb/T68168MUP-F01Q3NECH2P-4dcc6cbfe5/image_1024.png","thumb_1024_w":1024,"thumb_1024_h":119,"original_w":1358,"original_h":158,"thumb_tiny":"AwAFADDQAOT836UEEkjdinUnf8KQCbTjG4/Wjaf7xp1JQAhXryc0beOp/OlooA//2Q==","permalink":"https://julialang.slack.com/files/U01Q398M3QB/F01Q3NECH2P/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01Q3NECH2P-0b466ef7ab","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"U01Q398M3QB","display_as_bot":false,"ts":"1614817258.350800"},{"client_msg_id":"4b8b70aa-e680-4745-a693-9d7a1b033aab","type":"message","text":"Maybe just call `Symmetric` on the result","user":"U6788D83U","ts":"1614818469.351400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CJS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe just call "},{"type":"text","text":"Symmetric","style":{"code":true}},{"type":"text","text":" on the result"}]}]}]},{"client_msg_id":"201eac53-5560-4976-bf07-93572a03b8cb","type":"message","text":"<@U6788D83U> Thanks for helping, I need to rewrite the problem since I call this ODE in Turing and consequently the ODE solution is in Dual type which could not be applied to Symmetric().","user":"U01Q398M3QB","ts":"1614825789.353600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SCruQ","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6788D83U"},{"type":"text","text":" Thanks for helping, I need to rewrite the problem since I call this ODE in Turing and consequently the ODE solution is in Dual type which could not be applied to Symmetric()."}]}]}]},{"client_msg_id":"99c205d4-b48b-424a-a30e-23a54f59f4fd","type":"message","text":"Cannot you call Symmetric after solving?","user":"U6788D83U","ts":"1614825828.353900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"twX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Cannot you call Symmetric after solving?"}]}]}]},{"type":"message","subtype":"bot_message","text":"Is it \"legal\" to add an exogeneous input to a state u[i] in the du() function (and setting du[i]=0.0), just to have the input added to the normal states from an ODE solver?","ts":"1614843675.354100","username":"[gitter] <peroveh>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c0tt47sg27iebvi8frn0","text":{"type":"mrkdwn","text":"Is it \"legal\" to add an exogeneous input to a state u[i] in the du() function (and setting du[i]=0.0), just to have the input added to the normal states from an ODE solver?","verbatim":false}}]},{"client_msg_id":"c02c7812-67ce-49dd-b527-bec68e4aa8ec","type":"message","text":"No","user":"U69BL50BF","ts":"1614857614.354300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"a2r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No"}]}]}]},{"client_msg_id":"f7bc9c5b-709c-4328-b410-601c3fe19a94","type":"message","text":"That can do weird things","user":"U69BL50BF","ts":"1614857622.354600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=og","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That can do weird things"}]}]}]},{"client_msg_id":"c070f850-2183-4488-be8d-6148f647f597","type":"message","text":"Is there a way to `remake` while only partially updating parameters? i.e. if i have a model with p = [a, b, c] and I just want to remake with p = [a, b] and keep c constant","user":"U01M641BZEY","ts":"1614868473.356500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3Hy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way to "},{"type":"text","text":"remake","style":{"code":true}},{"type":"text","text":" while only partially updating parameters? i.e. if i have a model with p = [a, b, c] and I just want to remake with p = [a, b] and keep c constant"}]}]}]},{"client_msg_id":"d0f383d2-1aed-4fa8-bb33-e64b515ad01c","type":"message","text":"not yet","user":"U69BL50BF","ts":"1614868735.356700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NZwW6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not yet"}]}]}],"reactions":[{"name":"thumbsup_all","users":["U01M641BZEY"],"count":1}]},{"type":"message","subtype":"bot_message","text":"Hey, I have a BVProblem with 7 initial values. I know already 4 of them and would like to shoot only 3.  How can I do that? The documentary  mentions that I can initialize the Problem with a function but not how. ","ts":"1614871928.358000","username":"[gitter] <mcircle>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c0tt47sg27iebvi8frn0","text":{"type":"mrkdwn","text":"Hey, I have a BVProblem with 7 initial values. I know already 4 of them and would like to shoot only 3.  How can I do that? The documentary  mentions that I can initialize the Problem with a function but not how. ","verbatim":false}}]},{"client_msg_id":"425ac900-9e07-4a6c-bb32-6adb0238089c","type":"message","text":"Has the  `build_function` rewrite been benchmarked yet?","user":"UFTJ2UDEW","ts":"1614872718.359000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f8Kfz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Has the  "},{"type":"text","text":"build_function","style":{"code":true}},{"type":"text","text":" rewrite been benchmarked yet?"}]}]}]},{"client_msg_id":"510a3828-349b-4402-b5e3-e91197c1b493","type":"message","text":"<@U68907M46>...","user":"U69BL50BF","ts":"1614874681.359300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ybpw","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U68907M46"},{"type":"text","text":"..."}]}]}]},{"client_msg_id":"c28a6787-d73f-4a49-ba7f-725bb9c54e54","type":"message","text":"&gt; Hey, I have a BVProblem with 7 initial values. I know already 4 of them and would like to shoot only 3.  How can I do that? The documentary  mentions that I can initialize the Problem with a function but not how.\nIn the boundary function, make some of the residuals use `sol[1]` and others use `sol[end]`","user":"U69BL50BF","ts":"1614874890.359900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"07A","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Hey, I have a BVProblem with 7 initial values. I know already 4 of them and would like to shoot only 3.  How can I do that? The documentary  mentions that I can initialize the Problem with a function but not how."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"In the boundary function, make some of the residuals use "},{"type":"text","text":"sol[1]","style":{"code":true}},{"type":"text","text":" and others use "},{"type":"text","text":"sol[end]","style":{"code":true}}]}]}]},{"client_msg_id":"05a7a8dd-44ad-4161-bce5-031b03dda7dc","type":"message","text":"@mcircle","user":"U69BL50BF","ts":"1614874895.360100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Th67g","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@mcircle"}]}]}]},{"client_msg_id":"f2bdde99-8488-49e2-b8d6-78a0b05b0273","type":"message","text":"I’m getting a bit of a confusing error message when trying to solve a system of ODEs and I haven’t been able to find a solution on other channels. The model is:\n\n`using DifferentialEquations, LightGraphs`\n`G = erdos_renyi(10, 0.8)`\n`L = laplacian_matrix(G)` \n\n`function NetworkAtrophy(du, u, p, t)`\n    `x, y = u`\n    `ρ, α, β = p` \n    `du[1] = -ρ * L * x .+ α .* x .* (1 .- x)`\n    `du[2] = β * x .* (1.0 .- y)`\n`end`\n\n`p = [0.1, 2.0, 0.01]`\n`u0 = [rand(10), zeros(10)]`\n`t_span = (0.0,10.0)`\n`prob = ODEProblem(NetworkAtrophy, u0, t_span, p)`\n`sol = solve(prob, Tsit5())`\n\nI get:\n\n`ERROR: LoadError: MethodError: no method matching zero(::Type{Array{Float64,1}})`\n`Closest candidates are:`\n  `zero(::Type{Missing}) at missing.jl:103`\n  `zero(::Type{LibGit2.GitHash}) at /build/julia-98cBbp/julia-1.4.1+dfsg/usr/share/julia/stdlib/v1.4/LibGit2/src/oid.jl:220`\n  `zero(::Type{Pkg.Resolve.VersionWeight}) at /build/julia-98cBbp/julia-1.4.1+dfsg/usr/share/julia/stdlib/v1.4/Pkg/src/Resolve/versionweights.jl:15`\n\nAny idea how to fix? I guess I’m passing in the u0 incorrectly somehow?","user":"U01M641BZEY","ts":"1614875749.361600","team":"T68168MUP","edited":{"user":"U01M641BZEY","ts":"1614875875.000000"},"blocks":[{"type":"rich_text","block_id":"WMzJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m getting a bit of a confusing error message when trying to solve a system of ODEs and I haven’t been able to find a solution on other channels. The model is:\n\n"},{"type":"text","text":"using DifferentialEquations, LightGraphs","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"G = erdos_renyi(10, 0.8)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"L = laplacian_matrix(G) ","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"function NetworkAtrophy(du, u, p, t)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    x, y = u","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    ρ, α, β = p ","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    du[1] = -ρ * L * x .+ α .* x .* (1 .- x)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    du[2] = β * x .* (1.0 .- y)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"end","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"p = [0.1, 2.0, 0.01]","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"u0 = [rand(10), zeros(10)]","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"t_span = (0.0,10.0)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"prob = ODEProblem(NetworkAtrophy, u0, t_span, p)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"sol = solve(prob, Tsit5())","style":{"code":true}},{"type":"text","text":"\n\nI get:\n\n"},{"type":"text","text":"ERROR: LoadError: MethodError: no method matching zero(::Type{Array{Float64,1}})","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"Closest candidates are:","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"  zero(::Type{Missing}) at missing.jl:103","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"  zero(::Type{LibGit2.GitHash}) at /build/julia-98cBbp/julia-1.4.1+dfsg/usr/share/julia/stdlib/v1.4/LibGit2/src/oid.jl:220","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"  zero(::Type{Pkg.Resolve.VersionWeight}) at /build/julia-98cBbp/julia-1.4.1+dfsg/usr/share/julia/stdlib/v1.4/Pkg/src/Resolve/versionweights.jl:15","style":{"code":true}},{"type":"text","text":"\n\nAny idea how to fix? I guess I’m passing in the u0 incorrectly somehow?"}]}]}]},{"client_msg_id":"ea282fc9-8ce1-4972-9f88-df7fa44aab07","type":"message","text":"<@U01M641BZEY> you made an array of arrays","user":"U69BL50BF","ts":"1614876653.362100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"unR","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U01M641BZEY"},{"type":"text","text":" you made an array of arrays"}]}]}]},{"client_msg_id":"4a169fe9-36dd-40e5-857b-f2c5d940b4a2","type":"message","text":"did you mean a matrix or something?","user":"U69BL50BF","ts":"1614876662.362400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q+h","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"did you mean a matrix or something?"}]}]}]},{"client_msg_id":"8e21c1a9-284a-4769-845f-2609299ecbce","type":"message","text":"`u0 = [rand(10); zeros(10)]` and then `x = @view u[:,1]`","user":"U69BL50BF","ts":"1614876680.362800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Dbao","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"u0 = [rand(10); zeros(10)]","style":{"code":true}},{"type":"text","text":" and then "},{"type":"text","text":"x = @view u[:,1]","style":{"code":true}}]}]}]},{"client_msg_id":"5f59af87-b1f2-4064-a230-8a886ec00d54","type":"message","text":"I have two vector valued variables evolving so I thought an array of vectors would be the way to pass this into as `u0` and then unpack as `x, y = u` ","user":"U01M641BZEY","ts":"1614876893.364500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6sV1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have two vector valued variables evolving so I thought an array of vectors would be the way to pass this into as "},{"type":"text","text":"u0","style":{"code":true}},{"type":"text","text":" and then unpack as "},{"type":"text","text":"x, y = u ","style":{"code":true}}]}]}]},{"client_msg_id":"d33c15f9-e82d-459f-9f7e-c83acf999971","type":"message","text":"the issue is really that Vector of Vectors doesn't satisfy some of the assumptions of the integrator (but it's really close and I think we might get it fixed \"soon)","user":"U69BL50BF","ts":"1614877043.365200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TC0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the issue is really that Vector of Vectors doesn't satisfy some of the assumptions of the integrator (but it's really close and I think we might get it fixed \"soon)"}]}]}]},{"client_msg_id":"48239b00-8f7c-4558-b4de-8c20321f4db4","type":"message","text":"<https://github.com/SciML/MultiScaleArrays.jl> should work, too","user":"UB2QRMQPN","ts":"1614877106.365700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z/Nr","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/SciML/MultiScaleArrays.jl"},{"type":"text","text":" should work, too"}]}]}],"reactions":[{"name":"thumbsup_all","users":["U01M641BZEY"],"count":1}]},{"client_msg_id":"83aa8eae-350d-4878-8806-aa35a90585ce","type":"message","text":"ComponentArrays.jl is a good one for this.","user":"U69BL50BF","ts":"1614877127.365900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x0r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ComponentArrays.jl is a good one for this."}]}]}],"reactions":[{"name":"thumbsup_all","users":["U01M641BZEY"],"count":1}]},{"client_msg_id":"19398c97-a417-4eeb-a7ae-2f80cfa05e1a","type":"message","text":"ok great, i’ll check these out! :slightly_smiling_face:","user":"U01M641BZEY","ts":"1614877251.366300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6CohO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok great, i’ll check these out! "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"9e3a5001-8b37-4973-bb94-c4ae3336e2f3","type":"message","text":"If I change my function to:\n\n```function NetworkAtrophy(du, u, p, t)\n    x = u[1:10]\n    y = u[11:20]\n    ρ, α, β = p \n    du[1] = -ρ * L * x .+ α .* x .* (1 .- x)\n    du[2] = β * x .* (1.0 .- y)\nend```\nand pass in u0 = [u0 = [rand(10); zeros(10)] then I get an error:\n```ERROR: LoadError: MethodError: Cannot `convert` an object of type Array{Float64,1} to an object of type Float64```\nWhy would it be trying to convert an array to a float here? for the broadcasting?","user":"U01M641BZEY","ts":"1614877457.367900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1g1u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If I change my function to:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function NetworkAtrophy(du, u, p, t)\n    x = u[1:10]\n    y = u[11:20]\n    ρ, α, β = p \n    du[1] = -ρ * L * x .+ α .* x .* (1 .- x)\n    du[2] = β * x .* (1.0 .- y)\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and pass in u0 = [u0 = [rand(10); zeros(10)] then I get an error:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ERROR: LoadError: MethodError: Cannot `convert` an object of type Array{Float64,1} to an object of type Float64"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Why would it be trying to convert an array to a float here? for the broadcasting?"}]}]}]},{"client_msg_id":"a3941e5d-b87d-4e57-af47-f9715acb860b","type":"message","text":"`du[1] = `","user":"U69BL50BF","ts":"1614877663.369500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Gno97","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"`du[1] = `"}]}]}]},{"client_msg_id":"39dae20e-008f-4736-899e-afe169c4fd10","type":"message","text":"`du[1]` is just the first entry. You probably want `du[1:10].=`","user":"UR75SQMCZ","ts":"1614877664.369700","team":"T68168MUP","edited":{"user":"UR75SQMCZ","ts":"1614877719.000000"},"blocks":[{"type":"rich_text","block_id":"p1u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"du[1]","style":{"code":true}},{"type":"text","text":" is just the first entry. You probably want "},{"type":"text","text":"du[1:10].=","style":{"code":true}}]}]}]},{"client_msg_id":"104418ee-5294-437f-9273-e94f55d36620","type":"message","text":"oh I see! Thank you both :smile:","user":"U01M641BZEY","ts":"1614877812.370400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kqW2e","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh I see! Thank you both "},{"type":"emoji","name":"smile"}]}]}]},{"client_msg_id":"252caa64-98b3-4eb3-9c3b-0ded9beda822","type":"message","text":"Hey, it's my understanding that with NeuralPDE the network is first trained using output from traditional solvers before it will generalize to solving with arbitrary initial conditions, is that correct? If so what does NeuralPDE use to train? Just curious.","user":"UKHLCGXH6","ts":"1614880473.374600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AYIX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey, it's my understanding that with NeuralPDE the network is first trained using output from traditional solvers before it will generalize to solving with arbitrary initial conditions, is that correct? If so what does NeuralPDE use to train? Just curious."}]}]}]},{"client_msg_id":"3230bfa9-d310-4c2a-9719-73bafde7a228","type":"message","text":"Also hi long time no see :slightly_smiling_face:","user":"UKHLCGXH6","ts":"1614880670.375100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ktz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also hi long time no see "},{"type":"emoji","name":"slightly_smiling_face"}]}]}]},{"client_msg_id":"93dbea40-ebdc-4908-a9e5-3906dd4c3822","type":"message","text":"<@UKHLCGXH6> hi, welcome back!","user":"U69BL50BF","ts":"1614881333.375400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x6x","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UKHLCGXH6"},{"type":"text","text":" hi, welcome back!"}]}]}]},{"client_msg_id":"87ee7313-597f-4bb0-983f-cecdf223a2c7","type":"message","text":"No, they are not trained with output from traditional solvers","user":"U69BL50BF","ts":"1614881342.375700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xB0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No, they are not trained with output from traditional solvers"}]}]}]},{"client_msg_id":"6b8ebfb1-9ce7-4cc0-8f5e-580ab61eb1ed","type":"message","text":"the approach is described in detail here:","user":"U69BL50BF","ts":"1614881348.375900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"H02yt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the approach is described in detail here:"}]}]}]},{"client_msg_id":"ce5ecd7d-fd01-4747-a23e-e68f804fb76a","type":"message","text":"<https://mitmath.github.io/18337/lecture3/sciml.html>","user":"U69BL50BF","ts":"1614881405.376100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+Fs1","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://mitmath.github.io/18337/lecture3/sciml.html"}]}]}]},{"client_msg_id":"34b4a7a4-0635-4ce5-9852-b5ffb506a014","type":"message","text":"<https://www.youtube.com/watch?v=hKHl68Fdpq>","user":"U69BL50BF","ts":"1614881416.376300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3TH3K","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://www.youtube.com/watch?v=hKHl68Fdpq"}]}]}]},{"client_msg_id":"39a68ef9-2745-47af-918d-0125b232e2a6","type":"message","text":"thanks, I'll take a look!","user":"UKHLCGXH6","ts":"1614881832.376700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GdQNz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks, I'll take a look!"}]}]}]},{"client_msg_id":"1dae649e-35e5-4fa2-b88c-7dfd40dec020","type":"message","text":"Well, I guess the bridge to zulip just works one way, since I do not see my message posted in zulip here?  I will just copy it manually it for now and hope this is okay.\n\nHi, I am interested in solving very large ODE problems (which result from PDE semi-discretizations and/or operator splittings). I am wondering how hard it would be to utilize the existing ecosystem, assuming that my problem is so large that I would need a distributed memory implementation (talking about the orders of 1'000'000 to 100'000'000 dimensions in the semi-discretization). Are there any examples?","user":"U014A5E6L3V","ts":"1614882807.378100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"H53","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, I guess the bridge to zulip just works one way, since I do not see my message posted in zulip here?  I will just copy it manually it for now and hope this is okay.\n\nHi, I am interested in solving very large ODE problems (which result from PDE semi-discretizations and/or operator splittings). I am wondering how hard it would be to utilize the existing ecosystem, assuming that my problem is so large that I would need a distributed memory implementation (talking about the orders of 1'000'000 to 100'000'000 dimensions in the semi-discretization). Are there any examples?"}]}]}]},{"client_msg_id":"1bc954a9-1f8e-4189-9c4f-38ffe54c56cd","type":"message","text":"&gt; Well, I guess the bridge to zulip just works one way, since I do not see my message posted in zulip here? I will just copy it manually it for now and hope this is okay.\n<@U6A936746>","user":"U69BL50BF","ts":"1614882974.378400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TsEU","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Well, I guess the bridge to zulip just works one way, since I do not see my message posted in zulip here? I will just copy it manually it for now and hope this is okay."}]},{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6A936746"}]}]}]},{"client_msg_id":"fe678da3-ab30-4f55-87da-12e0efa2d0b7","type":"message","text":"Is there a way we can update that bridge? It seems to do this quite a bit these days :disappointed:","user":"U69BL50BF","ts":"1614882984.378700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5onv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way we can update that bridge? It seems to do this quite a bit these days "},{"type":"emoji","name":"disappointed"}]}]}],"thread_ts":"1614882984.378700","reply_count":6,"reply_users_count":2,"latest_reply":"1614883469.383700","reply_users":["U6A936746","U69BL50BF"],"subscribed":false},{"client_msg_id":"6b12d917-23d0-43c2-9c00-3db5ee78de94","type":"message","text":"Is it still on like Julia v0.4 or whatever it was first written on?","user":"U69BL50BF","ts":"1614882994.379000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"b9Sd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it still on like Julia v0.4 or whatever it was first written on?"}]}]}]},{"client_msg_id":"edb49b0e-a92b-439e-be0e-ff6985697324","type":"message","text":"&gt; Hi, I am interested in solving very large ODE problems (which result from PDE semi-discretizations and/or operator splittings). I am wondering how hard it would be to utilize the existing ecosystem, assuming that my problem is so large that I would need a distributed memory implementation (talking about the orders of 1'000'000 to 100'000'000 dimensions in the semi-discretization). Are there any examples?\nDistributed memory is still a little hard, but we do have some simple examples using DistributedArrays.jl. If you use DistributedArrays, then it will keep all of the pieces separate and only do communication in your `f`... kind of. This is because internally there's only broadcast if you use a non-stiff ODE solver, so non-stiff ODEs \"just work\". Implicit solvers, well, DistributedArrays.jl does not support all linear algebra so sadly that will fail at LU. And then DistributedArrays.jl may not have everything you need for writing your `f`.","user":"U69BL50BF","ts":"1614883120.381000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GF4","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Hi, I am interested in solving very large ODE problems (which result from PDE semi-discretizations and/or operator splittings). I am wondering how hard it would be to utilize the existing ecosystem, assuming that my problem is so large that I would need a distributed memory implementation (talking about the orders of 1'000'000 to 100'000'000 dimensions in the semi-discretization). Are there any examples?"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Distributed memory is still a little hard, but we do have some simple examples using DistributedArrays.jl. If you use DistributedArrays, then it will keep all of the pieces separate and only do communication in your "},{"type":"text","text":"f","style":{"code":true}},{"type":"text","text":"... kind of. This is because internally there's only broadcast if you use a non-stiff ODE solver, so non-stiff ODEs \"just work\". Implicit solvers, well, DistributedArrays.jl does not support all linear algebra so sadly that will fail at LU. And then DistributedArrays.jl may not have everything you need for writing your "},{"type":"text","text":"f","style":{"code":true}},{"type":"text","text":"."}]}]}]},{"client_msg_id":"537a815f-5be0-4bb2-827c-8024a2f856f1","type":"message","text":"So if your examples isn't too simple, it might be nice to get a hold of that example so I can present it as a challenge to some of the others in the Julia Lab. I have been wanting to really tackle this one head on for awhile.","user":"U69BL50BF","ts":"1614883152.381800","team":"T68168MUP","edited":{"user":"U69BL50BF","ts":"1614883157.000000"},"blocks":[{"type":"rich_text","block_id":"Xl9F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So if your examples isn't too simple, it might be nice to get a hold of that example so I can present it as a challenge to some of the others in the Julia Lab. I have been wanting to really tackle this one head on for awhile."}]}]}]},{"client_msg_id":"dca06abe-30bb-4ab0-b7a9-62c843a51dcc","type":"message","text":"The distributed linear algebra is really the killer though if it's a stiff ODE","user":"U69BL50BF","ts":"1614883171.382300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WTyv4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The distributed linear algebra is really the killer though if it's a stiff ODE"}]}]}]},{"client_msg_id":"2a1a2f01-4222-4937-b56a-425a369b86ba","type":"message","text":"<@UFTJ2UDEW> <https://github.com/JuliaSymbolics/Symbolics.jl/pull/84>","user":"U69BL50BF","ts":"1614883560.384000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"63EW","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UFTJ2UDEW"},{"type":"text","text":" "},{"type":"link","url":"https://github.com/JuliaSymbolics/Symbolics.jl/pull/84"}]}]}],"thread_ts":"1614883560.384000","reply_count":12,"reply_users_count":3,"latest_reply":"1614884865.387700","reply_users":["UFTJ2UDEW","U69BL50BF","U68907M46"],"subscribed":false},{"client_msg_id":"4bd3f1ef-b551-4844-82dc-de87cbc12105","type":"message","text":"<@U68907M46> mentioned that the functions should generate in &lt;2/3 the time now too.","user":"U69BL50BF","ts":"1614883596.384400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=ysSI","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U68907M46"},{"type":"text","text":" mentioned that the functions should generate in <2/3 the time now too."}]}]}],"thread_ts":"1614883596.384400","reply_count":4,"reply_users_count":3,"latest_reply":"1614883675.385500","reply_users":["UFTJ2UDEW","U68907M46","U69BL50BF"],"subscribed":false},{"client_msg_id":"fa978759-91e5-4ca7-a9db-25bd1d5b58d4","type":"message","text":"Tomorrow is the two part symposium for SciML at SIAM CSE:\n\n<https://meetings.siam.org/sess/dsp_programsess.cfm?SESSIONCODE=70083>\n<https://meetings.siam.org/sess/dsp_programsess.cfm?SESSIONCODE=70084>","user":"U69BL50BF","ts":"1614916922.000200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oFH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Tomorrow is the two part symposium for SciML at SIAM CSE:\n\n"},{"type":"link","url":"https://meetings.siam.org/sess/dsp_programsess.cfm?SESSIONCODE=70083"},{"type":"text","text":"\n"},{"type":"link","url":"https://meetings.siam.org/sess/dsp_programsess.cfm?SESSIONCODE=70084"}]}]}]},{"client_msg_id":"9bed53bc-7415-4b9c-8d3e-d88431de818a","type":"message","text":"<@U69BL50BF> Namespace changes in Symbolics.jl seems to have broken part of ModelingToolkit:\n```ERROR: LoadError: LoadError: LoadError: LoadError: LoadError: UndefVarError: jacobian not defined\nStacktrace:\n  [1] calculate_jacobian(sys::ModelingToolkit.ODESystem; sparse::Bool, simplify::Bool)\n    @ ModelingToolkit ~\\.julia\\packages\\ModelingToolkit\\ZSXgD\\src\\systems\\diffeqs\\abstractodesystem.jl:31```\n","user":"U013L06JN15","ts":"1614932510.001200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"H4C9","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" Namespace changes in Symbolics.jl seems to have broken part of ModelingToolkit:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ERROR: LoadError: LoadError: LoadError: LoadError: LoadError: UndefVarError: jacobian not defined\nStacktrace:\n  [1] calculate_jacobian(sys::ModelingToolkit.ODESystem; sparse::Bool, simplify::Bool)\n    @ ModelingToolkit ~\\.julia\\packages\\ModelingToolkit\\ZSXgD\\src\\systems\\diffeqs\\abstractodesystem.jl:31"}]},{"type":"rich_text_section","elements":[]}]}]},{"client_msg_id":"811b923f-f44a-4786-8235-567402fd8584","type":"message","text":"<@U013L06JN15> <https://github.com/SciML/ModelingToolkit.jl/pull/859>","user":"U69BL50BF","ts":"1614946802.001600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XoQm","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U013L06JN15"},{"type":"text","text":" "},{"type":"link","url":"https://github.com/SciML/ModelingToolkit.jl/pull/859"}]}]}]},{"type":"message","subtype":"bot_message","text":"[![image.png](<https://files.gitter.im/57bf79b040f3a6eec0615ecf/oBBz/thumb/image.png>)](<https://files.gitter.im/57bf79b040f3a6eec0615ecf/oBBz/image.png>)","ts":"1614953468.001700","username":"[gitter] <mcircle>","bot_id":"B795XHD0X","attachments":[{"fallback":"250x214px image","image_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/oBBz/thumb/image.png","image_width":250,"image_height":214,"image_bytes":41823,"from_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/oBBz/thumb/image.png","id":1,"original_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/oBBz/thumb/image.png"},{"fallback":"662x567px image","image_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/oBBz/image.png","image_width":662,"image_height":567,"image_bytes":52502,"from_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/oBBz/image.png","id":2,"original_url":"https://files.gitter.im/57bf79b040f3a6eec0615ecf/oBBz/image.png"}],"blocks":[{"type":"section","block_id":"matterbridge_c10ikvsg27ic4l1hhss0","text":{"type":"mrkdwn","text":"[![image.png](<https://files.gitter.im/57bf79b040f3a6eec0615ecf/oBBz/thumb/image.png>)](<https://files.gitter.im/57bf79b040f3a6eec0615ecf/oBBz/image.png>)","verbatim":false}}],"edited":{"user":"B795XHD0X","ts":"1614953469.000000"}},{"type":"message","subtype":"bot_message","text":"@ChrisRackauckas I already use the solution in the boundary-condition function, like you mentioned. Sorry I had be be more specific.  Never mind I found a way to do it. ","ts":"1614953507.001900","username":"[gitter] <mcircle>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c10ikvsg27ic4l1hhss0","text":{"type":"mrkdwn","text":"@ChrisRackauckas I already use the solution in the boundary-condition function, like you mentioned. Sorry I had be be more specific.  Never mind I found a way to do it. ","verbatim":false}}]},{"client_msg_id":"bf534f1a-f424-4da9-8805-279014a9f1c9","type":"message","text":"We are planning on building a graphical interface for differential equations. It seems to us that Julia is the platform for differential equation solvers. The idea is to build a system of differential equations using a graph representation which then gets translated into a function that can then be evaluated. Does anyone know about any efforts in this direction? I asked in general, and it seems that what we are suggesting is to build a gui interface for ModelingToolkit.jl.  Any thoughts?","user":"UQJ2NDHTR","ts":"1614959546.004600","team":"T68168MUP","edited":{"user":"UQJ2NDHTR","ts":"1614959582.000000"},"blocks":[{"type":"rich_text","block_id":"9o3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We are planning on building a graphical interface for differential equations. It seems to us that Julia is the platform for differential equation solvers. The idea is to build a system of differential equations using a graph representation which then gets translated into a function that can then be evaluated. Does anyone know about any efforts in this direction? I asked in general, and it seems that what we are suggesting is to build a gui interface for ModelingToolkit.jl.  Any thoughts?"}]}]}]},{"client_msg_id":"2566e209-dfb8-4a05-a83f-a258e4d7d13f","type":"message","text":"I'm getting this error when trying to use a stiff solver (with autodiff) and `ForwardDiffSensitivity` :\n```Cannot determine ordering of Dual tags ForwardDiff.Tag{SciMLBase.TimeGradientWrapper{ODEFunction{true,LotkaVolterra{DiffEqBase.DiffCache{Array{Float64,1},Array{ForwardDiff.Dual{nothing,Float64,6},1}}},LinearAlgebra.UniformScaling{Bool},Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,typeof(SciMLBase.DEFAULT_OBSERVED),Nothing},Array{ForwardDiff.Dual{ODEFunction{true,LotkaVolterra{DiffEqBase.DiffCache{Array{Float64,1},Array{ForwardDiff.Dual{nothing,Float64,6},1}}},LinearAlgebra.UniformScaling{Bool},Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,typeof(SciMLBase.DEFAULT_OBSERVED),Nothing},Float64,6},1},Array{ForwardDiff.Dual{ODEFunction{true,LotkaVolterra{DiffEqBase.DiffCache{Array{Float64,1},Array{ForwardDiff.Dual{nothing,Float64,6},1}}},LinearAlgebra.UniformScaling{Bool},Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,typeof(SciMLBase.DEFAULT_OBSERVED),Nothing},Float64,6},1}},Float64} and ODEFunction{true,LotkaVolterra{DiffEqBase.DiffCache{Array{Float64,1},Array{ForwardDiff.Dual{nothing,Float64,6},1}}},LinearAlgebra.UniformScaling{Bool},Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,typeof(SciMLBase.DEFAULT_OBSERVED),Nothing}\n≺(::Type{T} where T, ::Type{T} where T) at dual.jl:49\n...```\nWhat does this mean?","user":"U01H36BUDJB","ts":"1614964817.005600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GcIh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm getting this error when trying to use a stiff solver (with autodiff) and "},{"type":"text","text":"ForwardDiffSensitivity","style":{"code":true}},{"type":"text","text":" :\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Cannot determine ordering of Dual tags ForwardDiff.Tag{SciMLBase.TimeGradientWrapper{ODEFunction{true,LotkaVolterra{DiffEqBase.DiffCache{Array{Float64,1},Array{ForwardDiff.Dual{nothing,Float64,6},1}}},LinearAlgebra.UniformScaling{Bool},Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,typeof(SciMLBase.DEFAULT_OBSERVED),Nothing},Array{ForwardDiff.Dual{ODEFunction{true,LotkaVolterra{DiffEqBase.DiffCache{Array{Float64,1},Array{ForwardDiff.Dual{nothing,Float64,6},1}}},LinearAlgebra.UniformScaling{Bool},Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,typeof(SciMLBase.DEFAULT_OBSERVED),Nothing},Float64,6},1},Array{ForwardDiff.Dual{ODEFunction{true,LotkaVolterra{DiffEqBase.DiffCache{Array{Float64,1},Array{ForwardDiff.Dual{nothing,Float64,6},1}}},LinearAlgebra.UniformScaling{Bool},Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,typeof(SciMLBase.DEFAULT_OBSERVED),Nothing},Float64,6},1}},Float64} and ODEFunction{true,LotkaVolterra{DiffEqBase.DiffCache{Array{Float64,1},Array{ForwardDiff.Dual{nothing,Float64,6},1}}},LinearAlgebra.UniformScaling{Bool},Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,typeof(SciMLBase.DEFAULT_OBSERVED),Nothing}\n≺(::Type{T} where T, ::Type{T} where T) at dual.jl:49\n..."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"What does this mean?"}]}]}]},{"client_msg_id":"35f10364-649e-4d99-aaf7-168b3a1b6f2c","type":"message","text":"aha.... <https://github.com/JuliaDiff/ForwardDiff.jl/issues/320>","user":"U01H36BUDJB","ts":"1614965069.005800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8sgDu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"aha.... "},{"type":"link","url":"https://github.com/JuliaDiff/ForwardDiff.jl/issues/320"}]}]}]},{"client_msg_id":"0d52a5b2-f76a-4061-a9ae-f3f187636260","type":"message","text":"Trying to figure out the scope of ModelingToolkit.jl - does it do symbolic computation? As in the equivalent of SymPy.solve()?","user":"ULX1C7GFP","ts":"1614965449.006400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XLCk9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Trying to figure out the scope of ModelingToolkit.jl - does it do symbolic computation? As in the equivalent of SymPy.solve()?"}]}]}]},{"client_msg_id":"34898e1a-7af2-4c62-b3e6-f28b55d9e854","type":"message","text":"Its symbolic-numerical. Julia has a new package called Symbolics.jl that aims to be a high performance SymPy. However it started as part of MTK so the scopes arent very clear to me right now.","user":"U01C3624SGJ","ts":"1614966087.007300","team":"T68168MUP","edited":{"user":"U01C3624SGJ","ts":"1614966237.000000"},"blocks":[{"type":"rich_text","block_id":"qlA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Its symbolic-numerical. Julia has a new package called Symbolics.jl that aims to be a high performance SymPy. However it started as part of MTK so the scopes arent very clear to me right now."}]}]}]},{"client_msg_id":"cdc6cac3-56fd-4872-a712-ac6158946f5a","type":"message","text":"The scope of Symbolics.jl is to be a CAS. If it's in SymPy (and not related to the SciML numerical problems, like ODEs), then it's in Symbolics.jl.","user":"U69BL50BF","ts":"1614966463.008200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uCt2q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The scope of Symbolics.jl is to be a CAS. If it's in SymPy (and not related to the SciML numerical problems, like ODEs), then it's in Symbolics.jl."}]}]}]},{"client_msg_id":"eda6c798-2f80-4142-b522-af7dbbf56617","type":"message","text":"ModelingToolkit.jl is symbolic-numeric transformations of these common numerical systems.","user":"U69BL50BF","ts":"1614966487.008800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+DFxF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ModelingToolkit.jl is symbolic-numeric transformations of these common numerical systems."}]}]}]},{"client_msg_id":"f610c921-bfa0-467e-b6ea-5cb8ed2720b9","type":"message","text":"Basically, things like, what if you wanted to transform a distributed delay differential equation into an ODE? Transform chemical reaction systems into their ODEs for the first 5 moments? Log-transform a variable? Replace parts of the model with an approximation (coming soon in JuliaCon cough cough :wink: )?","user":"U69BL50BF","ts":"1614966558.009900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hVS2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Basically, things like, what if you wanted to transform a distributed delay differential equation into an ODE? Transform chemical reaction systems into their ODEs for the first 5 moments? Log-transform a variable? Replace parts of the model with an approximation (coming soon in JuliaCon cough cough "},{"type":"emoji","name":"wink"},{"type":"text","text":" )?"}]}]}]},{"client_msg_id":"ee484643-8d25-4180-9299-d6a10f1f3087","type":"message","text":"It's all of these \"make a better code than the one you'd write down yourself\"","user":"U69BL50BF","ts":"1614966569.010200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xDjJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's all of these \"make a better code than the one you'd write down yourself\""}]}]}]},{"client_msg_id":"a251a97e-72fe-4c10-8993-05850fa10e0a","type":"message","text":"It doesn't have analytical solutions to many ODEs yet, but the plan is to add that because we can then do block transformations to replace some parts of a big system with the analytical solution and reduce the amount of computation.","user":"U69BL50BF","ts":"1614966666.010900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UrGMC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It doesn't have analytical solutions to many ODEs yet, but the plan is to add that because we can then do block transformations to replace some parts of a big system with the analytical solution and reduce the amount of computation."}]}]}]},{"client_msg_id":"f982e338-84fb-481e-aae1-d78a60879bc3","type":"message","text":"Right. A lot of cool uses that I will explore soon. :heavy_check_mark:","user":"ULX1C7GFP","ts":"1614968897.011900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HvZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right. A lot of cool uses that I will explore soon. "},{"type":"emoji","name":"heavy_check_mark"}]}]}]},{"type":"message","subtype":"thread_broadcast","text":"but is not yet stable right?","user":"ULX1C7GFP","ts":"1614968929.012100","thread_ts":"1614966463.008200","root":{"client_msg_id":"cdc6cac3-56fd-4872-a712-ac6158946f5a","type":"message","text":"The scope of Symbolics.jl is to be a CAS. If it's in SymPy (and not related to the SciML numerical problems, like ODEs), then it's in Symbolics.jl.","user":"U69BL50BF","ts":"1614966463.008200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uCt2q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The scope of Symbolics.jl is to be a CAS. If it's in SymPy (and not related to the SciML numerical problems, like ODEs), then it's in Symbolics.jl."}]}]}],"thread_ts":"1614966463.008200","reply_count":4,"reply_users_count":2,"latest_reply":"1614970710.013400","reply_users":["ULX1C7GFP","U69BL50BF"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"TgaU+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but is not yet stable right?"}]}]}],"client_msg_id":"3ef14837-b5e6-40b4-9686-8f9a0b2c2c13"},{"client_msg_id":"08804260-0bd9-4e37-b9a9-bbb5ae3b79db","type":"message","text":"&gt; Replace parts of the model with an approximation\nI think I see where this is going.... &lt;-&gt; NODEs?","user":"ULX1C7GFP","ts":"1614968998.012800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r3F1L","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Replace parts of the model with an approximation"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I think I see where this is going.... <-> NODEs?"}]}]}]},{"type":"message","subtype":"bot_message","text":"Yeah, I should probably put up an archived notice or something","ts":"1614972865.014700","username":"[zulip] <Mason Protter>","icons":{"image_48":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2021-01-15/1637671884275_48.png"},"bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c10ikvsg27ic4l1hhss0","text":{"type":"mrkdwn","text":"Yeah, I should probably put up an archived notice or something","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"and a link to the JuliaSymbolics one","ts":"1614972888.014800","username":"[zulip] <Mason Protter>","icons":{"image_48":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2021-01-15/1637671884275_48.png"},"bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c10ikvsg27ic4l1hhss0","text":{"type":"mrkdwn","text":"and a link to the JuliaSymbolics one","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"Is it possible to use matrix preconditioning for the Jacobian with DiffEq.jl? If so could you point me to the documentation that shows how to do that.","ts":"1614976857.016700","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","thread_ts":"1614976857.016700","reply_count":1,"reply_users_count":1,"latest_reply":"1614976942.016900","reply_users":["U01H36BUDJB"],"subscribed":false,"blocks":[{"type":"section","block_id":"matterbridge_c10ikvsg27ic4l1hhss0","text":{"type":"mrkdwn","text":"Is it possible to use matrix preconditioning for the Jacobian with DiffEq.jl? If so could you point me to the documentation that shows how to do that.","verbatim":false}}]},{"client_msg_id":"bf1450ab-2c80-41c9-b630-c89af21296d7","type":"message","text":"Is there developer documentation on DiffEqSensitivity? I'm really struggling to understand how the CASA algorithms work w.r.t to reverse differentiation, i.e. what gets tape compiled and what doesn't, how the forward pass interpolant interacts with interpolating adjoints, etc.","user":"U01H36BUDJB","ts":"1614976989.017400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z1fm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there developer documentation on DiffEqSensitivity? I'm really struggling to understand how the CASA algorithms work w.r.t to reverse differentiation, i.e. what gets tape compiled and what doesn't, how the forward pass interpolant interacts with interpolating adjoints, etc."}]}]}]},{"client_msg_id":"d3e2ca1a-93e4-486b-a273-455e844a735b","type":"message","text":"there's not enough.","user":"U69BL50BF","ts":"1614977148.017600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bPQe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there's not enough."}]}]}]},{"type":"message","subtype":"bot_message","text":"&gt; [slack] &lt;Brian Groenke&gt; <https://diffeq.sciml.ai/latest/tutorials/advanced_ode_example/#Adding-a-Preconditioner>  Thanks! Is it possible to use this with diffeqpy?","ts":"1614977505.018500","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","thread_ts":"1614977505.018500","reply_count":3,"reply_users_count":2,"latest_reply":"1614977612.019600","reply_users":["U01H36BUDJB","U69BL50BF"],"subscribed":false,"blocks":[{"type":"section","block_id":"matterbridge_c10ikvsg27ic4l1hhss0","text":{"type":"mrkdwn","text":"&gt; [slack] &lt;Brian Groenke&gt; <https://diffeq.sciml.ai/latest/tutorials/advanced_ode_example/#Adding-a-Preconditioner>\n\nThanks! Is it possible to use this with diffeqpy?","verbatim":false}}]},{"client_msg_id":"41dcdd0f-c1ed-4806-bf30-ae667e35785c","type":"message","text":"Ok, are there examples somewhere that I've missed which handle non-integrated (and thus pre-allocated) state variables with DiffEqSensitivity? This has been a sticking point for me for weeks now... I can kind of see how to do it with `ForwardDiff` but the chunk size complicates everything (especially thanks to <https://github.com/SciML/DiffEqSensitivity.jl/issues/390|this bug> ).","user":"U01H36BUDJB","ts":"1614977758.020800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rlFWH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, are there examples somewhere that I've missed which handle non-integrated (and thus pre-allocated) state variables with DiffEqSensitivity? This has been a sticking point for me for weeks now... I can kind of see how to do it with "},{"type":"text","text":"ForwardDiff","style":{"code":true}},{"type":"text","text":" but the chunk size complicates everything (especially thanks to "},{"type":"link","url":"https://github.com/SciML/DiffEqSensitivity.jl/issues/390","text":"this bug"},{"type":"text","text":" )."}]}]}]},{"type":"message","subtype":"bot_message","text":"&gt; [slack] &lt;chrisrackauckas&gt; I'm going to say, probably not. Creating a callable type from Python sounds like something we can't do yet.  Ok","ts":"1614977772.020900","username":"[gitter] <sibyjackgrove>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c10ikvsg27ic4l1hhss0","text":{"type":"mrkdwn","text":"&gt; [slack] &lt;chrisrackauckas&gt; I'm going to say, probably not. Creating a callable type from Python sounds like something we can't do yet.\n\nOk","verbatim":false}}]},{"client_msg_id":"8407153c-dba0-4c01-ba4e-7d84a3362ef5","type":"message","text":"Regarding the initiative to create a wrapper around AUTO for bifurcation analysis, are there any updates / is this still under consideration? My experience in _Python_ is almost zero in, but I have some in _Fortran,_ _Auto_ as well as _Matcont._ Thnx","user":"U011V84GZ5E","ts":"1615146553.027600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XvZ0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Regarding the initiative to create a wrapper around AUTO for bifurcation analysis, are there any updates / is this still under consideration? My experience in "},{"type":"text","text":"Python","style":{"italic":true}},{"type":"text","text":" is almost zero in, but I have some in "},{"type":"text","text":"Fortran,","style":{"italic":true}},{"type":"text","text":" "},{"type":"text","text":"Auto ","style":{"italic":true}},{"type":"text","text":"as well as "},{"type":"text","text":"Matcont. ","style":{"italic":true}},{"type":"text","text":"Thnx"}]}]}],"thread_ts":"1615146553.027600","reply_count":3,"reply_users_count":3,"latest_reply":"1615147577.028200","reply_users":["UFTJ2UDEW","U69BL50BF","U011V84GZ5E"],"subscribed":false},{"client_msg_id":"d52ca0c3-141c-4fcc-be05-de6dc6f5cc0e","type":"message","text":"Not sure if this fits best here or under <#C6G240ENA|autodiff>\nI have been trying to revive some code with autodiff through DiffEq with DiscreteCallback but it doesn't seem as easy anymore. I tried the example in <https://diffeqflux.sciml.ai/dev/examples/hybrid_diffeq/>\nwhich works, but if you create the callback inside `predict_n_ode` then Zygote throws an `ERROR: LoadError: Mutating arrays is not supported`\nI can probably get around this some way, but the whole system seems very unstable. Is this a known bug?","user":"U011NEW8A2E","ts":"1615211281.031700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jw6sZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not sure if this fits best here or under "},{"type":"channel","channel_id":"C6G240ENA"},{"type":"text","text":"\nI have been trying to revive some code with autodiff through DiffEq with DiscreteCallback but it doesn't seem as easy anymore. I tried the example in "},{"type":"link","url":"https://diffeqflux.sciml.ai/dev/examples/hybrid_diffeq/"},{"type":"text","text":"\nwhich works, but if you create the callback inside "},{"type":"text","text":"predict_n_ode","style":{"code":true}},{"type":"text","text":" then Zygote throws an "},{"type":"text","text":"ERROR: LoadError: Mutating arrays is not supported","style":{"code":true}},{"type":"text","text":"\nI can probably get around this some way, but the whole system seems very unstable. Is this a known bug?"}]}]}]},{"client_msg_id":"cd34fb6b-b29b-4204-81e2-353657dbf214","type":"message","text":"Not known. Open it up. <@UR75SQMCZ> make note.","user":"U69BL50BF","ts":"1615211342.032000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Fio","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not known. Open it up. "},{"type":"user","user_id":"UR75SQMCZ"},{"type":"text","text":" make note."}]}]}],"reactions":[{"name":"+1","users":["UR75SQMCZ","U011NEW8A2E"],"count":2}]},{"client_msg_id":"49740a33-2186-4d91-904d-d161657b2113","type":"message","text":"I need to finish 2 papers this week and then I can start looking at a fix bugfixes.","user":"U69BL50BF","ts":"1615211359.032600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bDdGX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I need to finish 2 papers this week and then I can start looking at a fix bugfixes."}]}]}]},{"client_msg_id":"97d6d8e3-57e2-4b65-8914-9b8a26d1d43a","type":"message","text":"Ok, ill open an issue","user":"U011NEW8A2E","ts":"1615211360.032700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i0S0Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, ill open an issue"}]}]}]},{"client_msg_id":"86e96a0b-d9bb-4c5f-8e19-1f8c12e77734","type":"message","text":"In DiffEqFlux?","user":"U011NEW8A2E","ts":"1615211395.032900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+LN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In DiffEqFlux?"}]}]}]},{"client_msg_id":"b2ce1719-ecf3-4d14-a76f-029ee9a6fe68","type":"message","text":"yup","user":"U69BL50BF","ts":"1615211649.034000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OIqe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yup"}]}]}]},{"client_msg_id":"3a538f3f-33d2-4906-9156-d7faf6d9a619","type":"message","text":"does a fix like I used here:\n<https://diffeqflux.sciml.ai/dev/examples/SDE_control/>\nfor the noise processes maybe work analoguesly?\n```CreateGrid(t,W1) = NoiseGrid(t,W1)\nZygote.@nograd CreateGrid #avoid taking grads of this function```","user":"UR75SQMCZ","ts":"1615211780.035100","team":"T68168MUP","edited":{"user":"UR75SQMCZ","ts":"1615211794.000000"},"blocks":[{"type":"rich_text","block_id":"n5yQH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does a fix like I used here:\n"},{"type":"link","url":"https://diffeqflux.sciml.ai/dev/examples/SDE_control/"},{"type":"text","text":"\nfor the noise processes maybe work analoguesly?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"CreateGrid(t,W1) = NoiseGrid(t,W1)\nZygote.@nograd CreateGrid #avoid taking grads of this function"}]}]}]},{"client_msg_id":"a151e80e-4fef-40b2-82f5-667e6575d960","type":"message","text":"I think that I still need gradients through the callback. The integrator is updated based on a function that depends both on the training data and the current state in the integrator.","user":"U011NEW8A2E","ts":"1615212481.037300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kaTV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think that I still need gradients through the callback. The integrator is updated based on a function that depends both on the training data and the current state in the integrator."}]}]}]},{"client_msg_id":"319b3cc0-695f-4230-bd68-1ece224b57f6","type":"message","text":"For specifics on the problem you can look at this paper I wrote a while back <https://arxiv.org/abs/1911.12663|https://arxiv.org/abs/1911.12663>\nI can also send you the code if you want","user":"U011NEW8A2E","ts":"1615212636.038800","team":"T68168MUP","attachments":[{"service_name":"arXiv.org","title":"System Identification for Hybrid Systems using Neural Networks","title_link":"https://arxiv.org/abs/1911.12663","text":"With new advances in machine learning and in particular powerful learning libraries, we illustrate some of the new possibilities they enable in terms of nonlinear system identification. For a...","fallback":"arXiv.org: System Identification for Hybrid Systems using Neural Networks","from_url":"https://arxiv.org/abs/1911.12663","service_icon":"https://static.arxiv.org/static/browse/0.3.2.6/images/icons/favicon.ico","id":1,"original_url":"https://arxiv.org/abs/1911.12663"}],"blocks":[{"type":"rich_text","block_id":"H=Atw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For specifics on the problem you can look at this paper I wrote a while back "},{"type":"link","url":"https://arxiv.org/abs/1911.12663","text":"https://arxiv.org/abs/1911.12663"},{"type":"text","text":"\nI can also send you the code if you want"}]}]}]},{"client_msg_id":"d38707c2-4297-42cd-8d52-8d754eee064b","type":"message","text":"More stringent tolerances in Koopman expectation slow my calculations down tremendously. e.g. going from  `1e-2` to `1e-3` , for both rel and abs makes the computation go from instantaneous to more than 15 minutes. Is the interpretation for these tolerances from QuadratureProblem very different than for ODEProblems?","user":"UQEDP1Q5V","ts":"1615233215.042600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YF7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"More stringent tolerances in Koopman expectation slow my calculations down tremendously. e.g. going from  "},{"type":"text","text":"1e-2","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"1e-3","style":{"code":true}},{"type":"text","text":" , for both rel and abs makes the computation go from instantaneous to more than 15 minutes. Is the interpretation for these tolerances from QuadratureProblem very different than for ODEProblems?"}]}]}]},{"client_msg_id":"a3ae2337-26b9-48b6-ae3b-7657d6a0254a","type":"message","text":"it's the integral tolerance","user":"U69BL50BF","ts":"1615235349.043500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xwz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's the integral tolerance"}]}]}]},{"client_msg_id":"9b1169ea-aaba-417b-b17c-229471b30d38","type":"message","text":"is it a continuous observable?","user":"U69BL50BF","ts":"1615235364.044000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fjJyN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is it a continuous observable?"}]}]}]},{"client_msg_id":"fcd7abd2-8cac-4017-a1d1-60a36a35ebda","type":"message","text":"No discrete","user":"UQEDP1Q5V","ts":"1615235392.044300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iKy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No discrete"}]}]}]},{"client_msg_id":"9eae3002-05e2-44fc-bd2d-a0fe21b94046","type":"message","text":"I have two seperate ode systems I need to solve one applies up to a certain point, and the other applies after a certain point. Basically I solve the first one up to a point using a continuous call back function to end it once it's been met. Once my target is hit I switch over to another ODE system. Currently I'm doing it like below as a quick example, but is there a way to make a callback function change what function the solver is going to end up using on the next step??\n```#The diffeq we're trying to solve\nfunction reaction1!(du,u,p,t)\n    r1 = p[1]*u[1]\n    du[1] = r1\nend\n\nfunction reaction2!(du,u,p,t)\n    r1 = -p[1]*sin(u[1])\n    du[1] = r1\nend\n\nusing DifferentialEquations\nu0 = [10.0]\ntspan = (0.0,10.0)\np = [-1.0]\n\nfunction condition(u,t, integrator)\n    u[1] - 0.2\nend\n\nf1 = ODEFunction(reaction1!)\nf2 = ODEFunction(reaction2!)\n\nfunction affect!(integrator)\n    terminate!(integrator)\nend\n\nprob = ODEProblem(f1, u0, tspan, p)\n\ncb = ContinuousCallback(condition, affect!)\n\nsol1 = solve(prob, callback = cb)\n\nprob = remake(prob, f=f2, u0 = sol1.u[end], tspan = (sol1.t[end], tspan[end]))\nsol2 = solve(prob)```","user":"U01G3BG7AFR","ts":"1615239021.049400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6ZrsJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have two seperate ode systems I need to solve one applies up to a certain point, and the other applies after a certain point. Basically I solve the first one up to a point using a continuous call back function to end it once it's been met. Once my target is hit I switch over to another ODE system. Currently I'm doing it like below as a quick example, but is there a way to make a callback function change what function the solver is going to end up using on the next step??\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"#The diffeq we're trying to solve\nfunction reaction1!(du,u,p,t)\n    r1 = p[1]*u[1]\n    du[1] = r1\nend\n\nfunction reaction2!(du,u,p,t)\n    r1 = -p[1]*sin(u[1])\n    du[1] = r1\nend\n\nusing DifferentialEquations\nu0 = [10.0]\ntspan = (0.0,10.0)\np = [-1.0]\n\nfunction condition(u,t, integrator)\n    u[1] - 0.2\nend\n\nf1 = ODEFunction(reaction1!)\nf2 = ODEFunction(reaction2!)\n\nfunction affect!(integrator)\n    terminate!(integrator)\nend\n\nprob = ODEProblem(f1, u0, tspan, p)\n\ncb = ContinuousCallback(condition, affect!)\n\nsol1 = solve(prob, callback = cb)\n\nprob = remake(prob, f=f2, u0 = sol1.u[end], tspan = (sol1.t[end], tspan[end]))\nsol2 = solve(prob)"}]}]}]},{"client_msg_id":"9f90c798-5ac3-4b76-90e3-8f86ac214a0d","type":"message","text":"This is my current solution to it\n```#The diffeq we're trying to solve\nfunction reaction1!(du,u,p,t)\n    if p[2] == true \n        r1 = p[1]*u[1]\n        du[1] = r1\n    else\n        r1 = -p[1]*sin(u[1])\n        du[1] = r1\n    end\n\nend```\n```using DifferentialEquations\nu0 = [10.0]\ntspan = (0.0,10.0)\np = [-1.0, true]\n\nfunction condition(u,t, integrator)\n    u[1] -  0.1831528353186844\nend\n\nf1 = ODEFunction(reaction1!)\nf2 = ODEFunction(reaction2!)\n\nfunction affect!(integrator)\n\n    integrator.:p[2] = false\n\nend\n\nprob = ODEProblem(f1, u0, tspan, p)\n\ncb = ContinuousCallback(condition, affect!)\n\nsol1 = solve(prob, callback = cb)\n\nplot(sol1)```","user":"U01G3BG7AFR","ts":"1615241229.050000","team":"T68168MUP","edited":{"user":"U01G3BG7AFR","ts":"1615241783.000000"},"blocks":[{"type":"rich_text","block_id":"7wmk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This is my current solution to it\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"#The diffeq we're trying to solve\nfunction reaction1!(du,u,p,t)\n    if p[2] == true \n        r1 = p[1]*u[1]\n        du[1] = r1\n    else\n        r1 = -p[1]*sin(u[1])\n        du[1] = r1\n    end\n\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using DifferentialEquations\nu0 = [10.0]\ntspan = (0.0,10.0)\np = [-1.0, true]\n\nfunction condition(u,t, integrator)\n    u[1] -  0.1831528353186844\nend\n\nf1 = ODEFunction(reaction1!)\nf2 = ODEFunction(reaction2!)\n\nfunction affect!(integrator)\n\n    integrator.:p[2] = false\n\nend\n\nprob = ODEProblem(f1, u0, tspan, p)\n\ncb = ContinuousCallback(condition, affect!)\n\nsol1 = solve(prob, callback = cb)\n\nplot(sol1)"}]}]}]},{"client_msg_id":"840d8a4d-0a5f-4f0b-b49c-f2436c0d3f0a","type":"message","text":"<@U01G3BG7AFR> see <https://diffeq.sciml.ai/stable/basics/faq/#Switching-ODE-functions-in-the-middle-of-integration>","user":"U69BL50BF","ts":"1615243501.050800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TQ1","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U01G3BG7AFR"},{"type":"text","text":" see "},{"type":"link","url":"https://diffeq.sciml.ai/stable/basics/faq/#Switching-ODE-functions-in-the-middle-of-integration"}]}]}]},{"client_msg_id":"be9cc552-8dd2-4e20-95d1-913f474ad20c","type":"message","text":"So if a solver fails with instability *only* when autodiff is enabled, I assume this is probably because `ForwardDiff` is encountering an undefined gradient? What's the most straightforward way to debug this?","user":"U01H36BUDJB","ts":"1615246647.051600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RlU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So if a solver fails with instability "},{"type":"text","text":"only","style":{"bold":true}},{"type":"text","text":" when autodiff is enabled, I assume this is probably because "},{"type":"text","text":"ForwardDiff","style":{"code":true}},{"type":"text","text":" is encountering an undefined gradient? What's the most straightforward way to debug this?"}]}]}]},{"client_msg_id":"637d976b-e37e-4890-847a-6da65792bba2","type":"message","text":"turn on NaNSafe mode for ForwardDiff","user":"U69BL50BF","ts":"1615246764.052100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zqu8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"turn on NaNSafe mode for ForwardDiff"}]}]}]},{"client_msg_id":"00c31536-f0ce-446d-ba8d-8350556bb27a","type":"message","text":"see if it's still a thing","user":"U69BL50BF","ts":"1615246769.052400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s/GCu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"see if it's still a thing"}]}]}]},{"client_msg_id":"283b52bf-8947-4e14-aaf2-4bbc8a62c026","type":"message","text":"and you need to directly modify the source for this, right?","user":"U01H36BUDJB","ts":"1615246843.052700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TTJrt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and you need to directly modify the source for this, right?"}]}]}]},{"client_msg_id":"337c8731-522d-4037-9d29-3e853a845b14","type":"message","text":"yes","user":"U69BL50BF","ts":"1615246887.052900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"g5m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}]},{"client_msg_id":"aabd25ac-96e9-439a-80d9-f3af70aba5c4","type":"message","text":"it's a :shrug:","user":"U69BL50BF","ts":"1615246891.053200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Gnmjs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's a "},{"type":"emoji","name":"shrug"}]}]}]},{"client_msg_id":"6f05712e-35b8-4524-aa8f-f01fe7a48808","type":"message","text":"it's something to check though","user":"U69BL50BF","ts":"1615246896.053400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"snhZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's something to check though"}]}]}]},{"client_msg_id":"b8287bca-178f-4129-9390-03e505935d67","type":"message","text":"uh wait, this brings up a Julia question then, how do you know which \"version\" to modify? ForwardDiff has several versions/copies in the `packages/` directory.","user":"U01H36BUDJB","ts":"1615247055.054200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Vvyp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"uh wait, this brings up a Julia question then, how do you know which \"version\" to modify? ForwardDiff has several versions/copies in the "},{"type":"text","text":"packages/","style":{"code":true}},{"type":"text","text":" directory."}]}]}]},{"client_msg_id":"c54bdec7-eb10-438d-babf-547c72bb13b6","type":"message","text":"`dev`","user":"U69BL50BF","ts":"1615247195.054400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3=j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"dev","style":{"code":true}}]}]}]},{"client_msg_id":"6930ac10-d18f-4322-9214-f9d15578bf51","type":"message","text":"aha right","user":"U01H36BUDJB","ts":"1615247212.054600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Aq/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"aha right"}]}]}]},{"client_msg_id":"1b1d0fe9-976d-4fc5-9a23-73e855ec1ca8","type":"message","text":"and if this doesn't change anything... that means the Jacobian is just ill-conditioned?","user":"U01H36BUDJB","ts":"1615247311.055100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hkA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and if this doesn't change anything... that means the Jacobian is just ill-conditioned?"}]}]}]},{"client_msg_id":"e329438a-fe53-4936-969d-b7fdce69a7ca","type":"message","text":"possibly?","user":"U69BL50BF","ts":"1615247356.055300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"imf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"possibly?"}]}]}]},{"client_msg_id":"fcedbca4-4664-4984-aff4-a45d2ff0a123","type":"message","text":"If that doesn't change anything, then it's... something :rolling_on_the_floor_laughing:","user":"U69BL50BF","ts":"1615247365.055600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oXrl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If that doesn't change anything, then it's... something "},{"type":"emoji","name":"rolling_on_the_floor_laughing"}]}]}]},{"client_msg_id":"3b5df691-e953-43cf-b304-53b49013536a","type":"message","text":"it doesn't happen to be a DAE?","user":"U69BL50BF","ts":"1615247369.055800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eAl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it doesn't happen to be a DAE?"}]}]}]},{"client_msg_id":"8f552652-75ab-4031-a4c3-c22e6d617061","type":"message","text":"not as I have it defined","user":"U01H36BUDJB","ts":"1615247377.056000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q78","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not as I have it defined"}]}]}]},{"client_msg_id":"d00b6ddc-65de-4e80-bdb8-d77dbe1eb8bf","type":"message","text":"though perhaps it could be...","user":"U01H36BUDJB","ts":"1615247389.056200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DemtL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"though perhaps it could be..."}]}]}]},{"client_msg_id":"34117f1d-1994-4a48-8a6d-5d585f116515","type":"message","text":"better for it to not be if it doesn't have to be.","user":"U69BL50BF","ts":"1615247417.056700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j2rDe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"better for it to not be if it doesn't have to be."}]}]}]},{"client_msg_id":"10c19e84-1de7-4a3d-80df-217109935d23","type":"message","text":"I should be able to at least check the jacobian manually I assume... by calling the `ODEFunction` from `ForwardDiff.jacobian` ?","user":"U01H36BUDJB","ts":"1615247585.057500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"62J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I should be able to at least check the jacobian manually I assume... by calling the "},{"type":"text","text":"ODEFunction","style":{"code":true}},{"type":"text","text":" from "},{"type":"text","text":"ForwardDiff.jacobian","style":{"code":true}},{"type":"text","text":" ?"}]}]}]},{"client_msg_id":"b304fda6-1ded-455d-a6bd-7d5f75cc1c15","type":"message","text":"yeah you can call ForwardDiff on it and see what you get/","user":"U69BL50BF","ts":"1615247651.057800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s2xUQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah you can call ForwardDiff on it and see what you get/"}]}]}]},{"client_msg_id":"9fb00727-a6b4-4651-a455-be152b4507f7","type":"message","text":"I am doing some slightly weird stuff with in-place modifications of arrays and whatnot... is that an issue? Everything should get converted to `ForwardDiff.Dual` s though","user":"U01H36BUDJB","ts":"1615247924.058800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ehRy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am doing some slightly weird stuff with in-place modifications of arrays and whatnot... is that an issue? Everything should get converted to "},{"type":"text","text":"ForwardDiff.Dual","style":{"code":true}},{"type":"text","text":" s though"}]}]}]},{"client_msg_id":"4a00c9ca-d2f7-4e52-a914-b73f84271b8b","type":"message","text":"yeah every element of the jacobian is NaN :joy:","user":"U01H36BUDJB","ts":"1615248298.059200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0KbLk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah every element of the jacobian is NaN "},{"type":"emoji","name":"joy"}]}]}]}]}