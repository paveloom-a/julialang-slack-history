{"cursor": 8, "messages": [{"client_msg_id":"2a59c1f5-1ef7-43cd-8731-be17eedec235","type":"message","text":"orbital mechanics problems are chaotic enough that I've seen `abstol=1e-8` to `abstol=1f-8` gives an O(1) difference","user":"U69BL50BF","ts":"1611153878.178500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UJPaz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"orbital mechanics problems are chaotic enough that I've seen "},{"type":"text","text":"abstol=1e-8","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"abstol=1f-8","style":{"code":true}},{"type":"text","text":" gives an O(1) difference"}]}]}]},{"client_msg_id":"9e77b002-73fc-4894-9bf2-54b009b32d4c","type":"message","text":"For reference:\n```julia&gt; 1e-8 - 1f-8\n6.07747099184471e-17```","user":"U69BL50BF","ts":"1611154067.179100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4gH3Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For reference:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> 1e-8 - 1f-8\n6.07747099184471e-17"}]}]}],"reactions":[{"name":"+1","users":["U81CQL3LY"],"count":1}]},{"client_msg_id":"33ae72a8-d3e8-4da6-9543-9034ef03778d","type":"message","text":"Is there some way to turn off SIMD? The problems in question where not extremely chaotic, but I guess my tolerances were just too large.","user":"U81CQL3LY","ts":"1611159095.180200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=3t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there some way to turn off SIMD? The problems in question where not extremely chaotic, but I guess my tolerances were just too large."}]}]}]},{"client_msg_id":"41289372-04e2-4e14-bc49-e30e94d6d8e3","type":"message","text":"Use Julia with -O0","user":"U69BL50BF","ts":"1611159716.180400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vkT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Use Julia with -O0"}]}]}]},{"client_msg_id":"2c0571ef-e0e7-4d01-9ff2-818b68b10ab0","type":"message","text":"or -O1 should be fine","user":"U69BL50BF","ts":"1611159721.180600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LrvL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"or -O1 should be fine"}]}]}]},{"client_msg_id":"63ef6435-d7a5-4923-a7d6-1aea08e053fd","type":"message","text":"thanks!","user":"U81CQL3LY","ts":"1611162550.180800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QDG7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks!"}]}]}]},{"client_msg_id":"d864d9e5-0906-4b77-a786-e7f9011b1438","type":"message","text":"muladd might similarly be a difference, though chips without hardware FMA are getting quite rare.","user":"U69BL50BF","ts":"1611162836.181300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cr9us","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"muladd might similarly be a difference, though chips without hardware FMA are getting quite rare."}]}]}]},{"client_msg_id":"88eef3a4-7ebf-4fe2-a85f-f7692af779ea","type":"message","text":"<@U69BL50BF> scratched my head for a while","user":"U01HMTRF78E","ts":"1611251290.000600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k34DF","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" scratched my head for a while"}]}]}]},{"type":"message","text":"","files":[{"id":"F01KCEUH40M","created":1611251297,"timestamp":1611251297,"name":"CodeCogsEqn.png","title":"CodeCogsEqn.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U01HMTRF78E","editable":false,"size":1442,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01KCEUH40M/codecogseqn.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01KCEUH40M/download/codecogseqn.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01KCEUH40M-74c87cc2f8/codecogseqn_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01KCEUH40M-74c87cc2f8/codecogseqn_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01KCEUH40M-74c87cc2f8/codecogseqn_360.png","thumb_360_w":360,"thumb_360_h":16,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01KCEUH40M-74c87cc2f8/codecogseqn_160.png","original_w":475,"original_h":21,"thumb_tiny":"AwACADDMooooAKKKKACiiigD/9k=","permalink":"https://julialang.slack.com/files/U01HMTRF78E/F01KCEUH40M/codecogseqn.png","permalink_public":"https://slack-files.com/T68168MUP-F01KCEUH40M-2f1e5e5ce4","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"U01HMTRF78E","display_as_bot":false,"ts":"1611251301.000700"},{"client_msg_id":"414b8af3-7604-4ae8-8d33-66f844752377","type":"message","text":"Isn't this symmetric ??","user":"U01HMTRF78E","ts":"1611251324.001300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DphwZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Isn't this symmetric ??"}]}]}]},{"client_msg_id":"2403382c-3de7-4169-85a0-025135478a3b","type":"message","text":"yes where is that from?","user":"U69BL50BF","ts":"1611251965.001700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TE4rm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes where is that from?"}]}]}]},{"client_msg_id":"9121ae51-678f-473f-b306-3e6aad28f196","type":"message","text":"that's a centered difference on the 2nd order derivative and a centered difference on another term, though I'm not sure why that has an h^2 on the one that is presumably a first derivative","user":"U69BL50BF","ts":"1611252014.002700","team":"T68168MUP","edited":{"user":"U69BL50BF","ts":"1611252040.000000"},"blocks":[{"type":"rich_text","block_id":"x1M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's a centered difference on the 2nd order derivative and a centered difference on another term, though I'm not sure why that has an h^2 on the one that is presumably a first derivative"}]}]}]},{"client_msg_id":"fdc5c129-c0d4-42f6-b8f2-6ded1ca61ca1","type":"message","text":"h^2 is because we are discretizing both k and u, hence h*h","user":"U01HMTRF78E","ts":"1611252112.004000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ag4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"h^2 is because we are discretizing both k and u, hence h*h"}]}]}]},{"client_msg_id":"6a3fcf9f-b546-4211-80ee-20d883306316","type":"message","text":"So, this is the expression for the nonlinear case we were discussing.","user":"U01HMTRF78E","ts":"1611252152.004800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2D14l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So, this is the expression for the nonlinear case we were discussing."}]}]}]},{"client_msg_id":"9974df34-5ffd-4a37-bf7f-1b92f6cf8883","type":"message","text":"Where is it going wrong then?","user":"U01HMTRF78E","ts":"1611252408.005300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s0jG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Where is it going wrong then?"}]}]}]},{"client_msg_id":"ca308bd1-f1e7-4ff6-a414-e0783277b9f8","type":"message","text":"what's the original PDE?","user":"U69BL50BF","ts":"1611256624.005600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bhql","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what's the original PDE?"}]}]}]},{"client_msg_id":"bf10e78c-d622-4144-a9da-c49cdd9a9a53","type":"message","text":"Seems like it should just be h on the bottom of that one","user":"U69BL50BF","ts":"1611256633.005900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6pXl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Seems like it should just be h on the bottom of that one"}]}]}]},{"client_msg_id":"92fc0a49-d6dc-4ecb-ab81-97a7303822b6","type":"message","text":"and it seems like that is an unstable discretization","user":"U69BL50BF","ts":"1611256639.006300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6anM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and it seems like that is an unstable discretization"}]}]}]},{"client_msg_id":"f34ac86a-ab9e-40ab-9297-2715b9b2c493","type":"message","text":"where did you get this?","user":"U69BL50BF","ts":"1611256643.006500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i4rj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"where did you get this?"}]}]}]},{"client_msg_id":"ee86f7f5-cd57-4367-a8c3-61dcf7f0d2e1","type":"message","text":"oh wait","user":"U69BL50BF","ts":"1611256650.006700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZyWQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh wait"}]}]}]},{"client_msg_id":"176d5c2f-0c34-4b54-80c9-a92e9eb5b669","type":"message","text":"this is from the nonlinear diffusion?","user":"U69BL50BF","ts":"1611256656.006900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aNob","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is from the nonlinear diffusion?"}]}]}]},{"client_msg_id":"4a7f1b1e-c8d8-459e-bbb2-653825abda79","type":"message","text":"Why are the `ODEFunction` , `SDEFunction` , etc. built inside <https://github.com/SciML/DiffEqFlux.jl/blob/419091455d44998fddfffec798094b927012e2a6/src/neural_de.jl#L66> ? Wouldnâ€™t it be better to cache them inside the struct and use only  `remake` ?","user":"UR75SQMCZ","ts":"1611264222.007400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t6kH1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Why are the "},{"type":"text","text":"ODEFunction","style":{"code":true}},{"type":"text","text":" , "},{"type":"text","text":"SDEFunction","style":{"code":true}},{"type":"text","text":" , etc. built inside "},{"type":"link","url":"https://github.com/SciML/DiffEqFlux.jl/blob/419091455d44998fddfffec798094b927012e2a6/src/neural_de.jl#L66"},{"type":"text","text":" ? Wouldnâ€™t it be better to cache them inside the struct and use only  "},{"type":"text","text":"remake","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1611264222.007400","reply_count":1,"reply_users_count":1,"latest_reply":"1611281405.017900","reply_users":["U69BL50BF"],"subscribed":false},{"client_msg_id":"51c9f118-9114-42ff-8ca1-1cf59aa2629e","type":"message","text":"I think I may be going crazy, but did I break somethingâ€¦\n```using DifferentialEquations,Plots\n\nf(du,u,p,t) = u\n\n\n# Put in some random parameters\ntfinal = 10.0\nn0 = 10\nN = 100\nu0 = n0/N\n\ntspan = (0.0,tfinal)\nprob = ODEProblem(f,u0,tspan)\nsol = solve(prob,Tsit5(),reltol=1e-5, abstol=1e-8)```\nGives an error:\n```ERROR: LoadError: MethodError: no method matching similar(::Float64, ::Type{Float64})```\nI tried defining `f` as a function as well\n```function f(du,u,p,t)\n\n\tdu = u\n\nend```\nWhich also had the same errorâ€¦ am I doing something stupid? Or do I need to reload the package?","user":"UFH4C3LBT","ts":"1611272994.008700","team":"T68168MUP","edited":{"user":"UFH4C3LBT","ts":"1611273062.000000"},"blocks":[{"type":"rich_text","block_id":"4jT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think I may be going crazy, but did I break somethingâ€¦\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using DifferentialEquations,Plots\n\nf(du,u,p,t) = u\n\n\n# Put in some random parameters\ntfinal = 10.0\nn0 = 10\nN = 100\nu0 = n0/N\n\ntspan = (0.0,tfinal)\nprob = ODEProblem(f,u0,tspan)\nsol = solve(prob,Tsit5(),reltol=1e-5, abstol=1e-8)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Gives an error:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ERROR: LoadError: MethodError: no method matching similar(::Float64, ::Type{Float64})"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I tried defining "},{"type":"text","text":"f","style":{"code":true}},{"type":"text","text":" as a function as well\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function f(du,u,p,t)\n\n\tdu = u\n\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Which also had the same errorâ€¦ am I doing something stupid? Or do I need to reload the package?"}]}]}],"thread_ts":"1611272994.008700","reply_count":4,"reply_users_count":2,"latest_reply":"1611273630.009800","reply_users":["U8T9JUA5R","UFH4C3LBT"],"subscribed":false},{"client_msg_id":"2fa09592-c828-482a-b6c6-a64d6cfcb0f0","type":"message","text":"<@U69BL50BF> yep, that is from nonlinear diffusion.","user":"U01HMTRF78E","ts":"1611279789.012600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t/REr","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" yep, that is from nonlinear diffusion."}]}]}],"thread_ts":"1611279789.012600","reply_count":23,"reply_users_count":3,"latest_reply":"1611424224.057600","reply_users":["U69BL50BF","U01HMTRF78E","U01H36BUDJB"],"subscribed":false},{"client_msg_id":"048415ca-471d-4d42-9353-3415782adc66","type":"message","text":"I'm getting some bizarre error that I can't pin down.\n\nTL;DR: sometimes solvers using ForwardDiff Duals error out when combined with CUDA. This doesn't happen for `Dense` with tanh nor `GRUCell`, it does however happen for `LSTMCell` and a custom layer that mimics the LSTM\nMWE\n```using CUDA, Flux, OrdinaryDiffEq, DiffEqSensitivity, Random\nCUDA.allowscalar(false)\n\nRandom.seed!(0)\ntspan = Float32.((0, 100))\nbasic_tgrad(u,p,t) = zero(u)\n\nnhidden = 4\nnin = 2\nnn = Flux.LSTMCell(nin,nhidden) |&gt; gpu\np, re = Flux.destructure(nn)\n\nU = randn(2*nhidden) |&gt; cu\nwrap(u) = (u[1:nhidden],u[nhidden+1:2nhidden])\nunwrap(u) = cat(u[1]...,dims=1)\ndudt_(u,p,t) = re(p)(wrap(u), CUDA.zeros(nin) ) |&gt; unwrap\nff = ODEFunction{false}(dudt_,tgrad=basic_tgrad)\nprob = ODEProblem{false}(ff,U,tspan,p)\nsolve(prob,Rosenbrock23();sense=InterpolatingAdjoint(autojacvec=ZygoteVJP()))```","user":"UPM0H43C7","ts":"1611280030.014500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CF1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm getting some bizarre error that I can't pin down.\n\nTL;DR: sometimes solvers using ForwardDiff Duals error out when combined with CUDA. This doesn't happen for "},{"type":"text","text":"Dense","style":{"code":true}},{"type":"text","text":" with tanh nor "},{"type":"text","text":"GRUCell","style":{"code":true}},{"type":"text","text":", it does however happen for "},{"type":"text","text":"LSTMCell","style":{"code":true}},{"type":"text","text":" and a custom layer that mimics the LSTM\nMWE\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using CUDA, Flux, OrdinaryDiffEq, DiffEqSensitivity, Random\nCUDA.allowscalar(false)\n\nRandom.seed!(0)\ntspan = Float32.((0, 100))\nbasic_tgrad(u,p,t) = zero(u)\n\nnhidden = 4\nnin = 2\nnn = Flux.LSTMCell(nin,nhidden) |> gpu\np, re = Flux.destructure(nn)\n\nU = randn(2*nhidden) |> cu\nwrap(u) = (u[1:nhidden],u[nhidden+1:2nhidden])\nunwrap(u) = cat(u[1]...,dims=1)\ndudt_(u,p,t) = re(p)(wrap(u), CUDA.zeros(nin) ) |> unwrap\nff = ODEFunction{false}(dudt_,tgrad=basic_tgrad)\nprob = ODEProblem{false}(ff,U,tspan,p)\nsolve(prob,Rosenbrock23();sense=InterpolatingAdjoint(autojacvec=ZygoteVJP()))"}]}]}]},{"client_msg_id":"5a807ef5-e4c0-4646-afcb-5376e349b1fa","type":"message","text":"Whatâ€™s the error msg? You might want to ask in <#C689Y34LE|gpu>","user":"U6788D83U","ts":"1611280263.015000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qNz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Whatâ€™s the error msg? You might want to ask in "},{"type":"channel","channel_id":"C689Y34LE"}]}]}]},{"client_msg_id":"1cbfdc85-a73c-4082-8de5-9f2faf9918eb","type":"message","text":"It throws a CUDA error:\n```ERROR: MethodError: no method matching unsafe_convert(::Type{Float64}, ::ForwardDiff.Dual{Nothing,Float64,8})```","user":"UPM0H43C7","ts":"1611280774.016300","team":"T68168MUP","edited":{"user":"UPM0H43C7","ts":"1611280817.000000"},"blocks":[{"type":"rich_text","block_id":"37GF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It throws a CUDA error:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ERROR: MethodError: no method matching unsafe_convert(::Type{Float64}, ::ForwardDiff.Dual{Nothing,Float64,8})"}]}]}]},{"client_msg_id":"09a713a8-8e16-4736-9dc1-73b7dd6b5c6d","type":"message","text":"Yeah, sounds like a question for <#C689Y34LE|gpu>. Remember to post the full stacktrace there.","user":"U6788D83U","ts":"1611280825.017000","team":"T68168MUP","edited":{"user":"U6788D83U","ts":"1611280854.000000"},"blocks":[{"type":"rich_text","block_id":"x2i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, sounds like a question for "},{"type":"channel","channel_id":"C689Y34LE"},{"type":"text","text":". Remember to post the full stacktrace there."}]}]}],"reactions":[{"name":"+1","users":["UPM0H43C7"],"count":1}]},{"client_msg_id":"0b2ed2d2-debb-46d9-86cb-b94ab9f3dc37","type":"message","text":"I donâ€™t have a GPU handy so I cannot reproduce it.","user":"U6788D83U","ts":"1611280842.017600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"st80","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I donâ€™t have a GPU handy so I cannot reproduce it."}]}]}]},{"client_msg_id":"1fee7fde-73d5-4a08-8850-69e7d223a1bd","type":"message","text":"Well the real problem is that isn't an ODE, so it generally won't be solved well anyways unless because LSTM has state. You have to encode such objects differently.","user":"U69BL50BF","ts":"1611281515.019100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WbEd=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well the real problem is that isn't an ODE, so it generally won't be solved well anyways unless because LSTM has state. You have to encode such objects differently."}]}]}]},{"client_msg_id":"e7207c43-4a03-4a94-a176-896e4bb88d20","type":"message","text":"but that error seems like an odd GPU error.","user":"U69BL50BF","ts":"1611281633.019300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+9mN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but that error seems like an odd GPU error."}]}]}]},{"client_msg_id":"003ab23f-eb1b-4e74-a628-eeb07477af55","type":"message","text":"<@UPM0H43C7> looks like the main reason is because it's not compatible with ForwardDiff.","user":"U69BL50BF","ts":"1611283107.019700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B+J","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UPM0H43C7"},{"type":"text","text":" looks like the main reason is because it's not compatible with ForwardDiff."}]}]}]},{"client_msg_id":"7569b659-ee4f-4272-b0a0-94f62f92e2d7","type":"message","text":"`solve(prob,Rosenbrock23(autodiff=false);sense=InterpolatingAdjoint(autojacvec=ZygoteVJP()))` fixes it.","user":"U69BL50BF","ts":"1611283122.019900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zFDd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"solve(prob,Rosenbrock23(autodiff=false);sense=InterpolatingAdjoint(autojacvec=ZygoteVJP()))","style":{"code":true}},{"type":"text","text":" fixes it."}]}]}]},{"client_msg_id":"4e8cc5df-a6b0-41cd-8b1e-7f0c7ba760a9","type":"message","text":"there's not really going to be an advantage here to using forward diff","user":"U69BL50BF","ts":"1611283132.020200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"juY8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there's not really going to be an advantage here to using forward diff"}]}]}]},{"client_msg_id":"534d4ade-188f-4704-bbdf-40f76f05c66a","type":"message","text":"but you really don't want to do that splatting in unwrap","user":"U69BL50BF","ts":"1611283141.020500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HeN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but you really don't want to do that splatting in unwrap"}]}]}],"reactions":[{"name":"+1","users":["UPM0H43C7"],"count":1}]},{"type":"message","subtype":"thread_broadcast","text":"So a new operator isn't required for this then?","user":"U01HMTRF78E","ts":"1611283605.020900","thread_ts":"1611279789.012600","root":{"client_msg_id":"2fa09592-c828-482a-b6c6-a64d6cfcb0f0","type":"message","text":"<@U69BL50BF> yep, that is from nonlinear diffusion.","user":"U01HMTRF78E","ts":"1611279789.012600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t/REr","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" yep, that is from nonlinear diffusion."}]}]}],"thread_ts":"1611279789.012600","reply_count":23,"reply_users_count":3,"latest_reply":"1611424224.057600","reply_users":["U69BL50BF","U01HMTRF78E","U01H36BUDJB"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"JIh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So a new operator isn't required for this then?"}]}]}],"client_msg_id":"b056e28e-9300-44cb-9e7e-5704c247be2d"},{"client_msg_id":"b324a70c-5ffa-4fc2-95ee-1f56d20599b5","type":"message","text":"A few days ago I asked about fitting large (-ish) neural ode models, and I ran into problems with the memory usage both during the solve call and the adjoint.\n\nI tested it and I think the culprit is taking a low-dimensional input (that with the neural ODE defines a inhomogeneous system) and embedding it in a higher dimensional space. Even though the input is instantaneous, something during the solve call must store it. This is despite the fact the embedding is wrapped with `Zygote.ignore` .\n\nI tried implementing it with a `DiscreteCallback`  that affects the parameters (rather than states `u`). This was a partial success as it halved the peak memory usage. but it does not work with reverse mode autodiff (at least the ones I tried).\n\nAny suggestions what might a good workaround this problem?","user":"UPM0H43C7","ts":"1611328034.032200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QhYV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"A few days ago I asked about fitting large (-ish) neural ode models, and I ran into problems with the memory usage both during the solve call and the adjoint.\n\nI tested it and I think the culprit is taking a low-dimensional input (that with the neural ODE defines a inhomogeneous system) and embedding it in a higher dimensional space. Even though the input is instantaneous, something during the solve call must store it. This is despite the fact the embedding is wrapped with "},{"type":"text","text":"Zygote.ignore","style":{"code":true}},{"type":"text","text":" .\n\nI tried implementing it with a "},{"type":"text","text":"DiscreteCallback","style":{"code":true}},{"type":"text","text":"  that affects the parameters (rather than states "},{"type":"text","text":"u","style":{"code":true}},{"type":"text","text":"). This was a partial success as it halved the peak memory usage. but it does not work with reverse mode autodiff (at least the ones I tried).\n\nAny suggestions what might a good workaround this problem?"}]}]}],"thread_ts":"1611328034.032200","reply_count":35,"reply_users_count":2,"latest_reply":"1611348558.040700","reply_users":["UPM0H43C7","U69BL50BF"],"subscribed":false},{"client_msg_id":"6ab2824d-55fe-4548-a27f-f9fd273a2ad4","type":"message","text":"Iâ€™m still trying to understand the (in) efficiency of solving ODEâ€™s driven by piecewise constant functions.\nI wrote up a few examples showing this (see comment).\nIn a nutshell, using `tstops` or `d_discontinuities` tanks the solver performance (both time and space) but using a DiscreteCallback doesnâ€™t. It feels like Iâ€™m not not using `solve`  right with all its possibilities.","user":"UPM0H43C7","ts":"1611419279.048900","team":"T68168MUP","edited":{"user":"UPM0H43C7","ts":"1611419290.000000"},"blocks":[{"type":"rich_text","block_id":"nXN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Iâ€™m still trying to understand the (in) efficiency of solving ODEâ€™s driven by piecewise constant functions.\nI wrote up a few examples showing this (see comment).\nIn a nutshell, using "},{"type":"text","text":"tstops","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"d_discontinuities","style":{"code":true}},{"type":"text","text":" tanks the solver performance (both time and space) but using a DiscreteCallback doesnâ€™t. It feels like Iâ€™m not not using "},{"type":"text","text":"solve","style":{"code":true}},{"type":"text","text":"  right with all its possibilities."}]}]}],"thread_ts":"1611419279.048900","reply_count":15,"reply_users_count":2,"latest_reply":"1611428073.059100","reply_users":["UPM0H43C7","U69BL50BF"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"@aussetg_twitter that issue isn't FastDense, it's Zygote","ts":"1611509703.059600","username":"[gitter] <ChrisRackauckas>","icons":{"image_48":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2017-10-18/257963008226_48.png"},"bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"@aussetg_twitter that issue isn't FastDense, it's Zygote","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"You can double differentiate FastDense, just don't double Zygote","ts":"1611509723.059700","username":"[gitter] <ChrisRackauckas>","icons":{"image_48":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2017-10-18/257963008226_48.png"},"bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"You can double differentiate FastDense, just don't double Zygote","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"Reversed off over Zygote","ts":"1611509734.059800","username":"[gitter] <ChrisRackauckas>","icons":{"image_48":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2017-10-18/257963008226_48.png"},"bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"Reversed off over Zygote","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"Forwarddiff over Zygote","ts":"1611509747.059900","username":"[gitter] <ChrisRackauckas>","icons":{"image_48":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2017-10-18/257963008226_48.png"},"bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"Forwarddiff over Zygote","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"These things are good","ts":"1611509752.060000","username":"[gitter] <ChrisRackauckas>","icons":{"image_48":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2017-10-18/257963008226_48.png"},"bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_c05cuukg27ibs0bi3tjg","text":{"type":"mrkdwn","text":"These things are good","verbatim":false}}]},{"type":"message","text":"I still haven't been able to figure out the plotting and broadcasting related issues I encountered last week while working with the solution.  Could I get help in troubleshooting the following first?\n```# Plotting version 1\nplot(sol, vars=(0,30))\n\n# Plotting version 2\ntestfxn(t) = sol(t, idxs=30)\nplot(-60:0.1:100, testfxn)```\nAttached are the outputs from the 2 versions.","files":[{"id":"F01LHSVUTGQ","created":1611612628,"timestamp":1611612628,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"ULZQ4DCSU","editable":false,"size":19451,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01LHSVUTGQ/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01LHSVUTGQ/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01LHSVUTGQ-d666295724/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01LHSVUTGQ-d666295724/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01LHSVUTGQ-d666295724/image_360.png","thumb_360_w":360,"thumb_360_h":239,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01LHSVUTGQ-d666295724/image_480.png","thumb_480_w":480,"thumb_480_h":319,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01LHSVUTGQ-d666295724/image_160.png","original_w":599,"original_h":398,"thumb_tiny":"AwAfADDSHU0tIOppaAEz82PalpP4/wAKWgANJg+tLRQAg6mlpMelLz60ANz+8x7U6k2/Nu74xRQAtFJzQc4oA//Z","permalink":"https://julialang.slack.com/files/ULZQ4DCSU/F01LHSVUTGQ/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01LHSVUTGQ-9357dc6896","is_starred":false,"has_rich_preview":false},{"id":"F01KD8T8W07","created":1611612648,"timestamp":1611612648,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"ULZQ4DCSU","editable":false,"size":41001,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01KD8T8W07/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01KD8T8W07/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01KD8T8W07-f05c3784bc/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01KD8T8W07-f05c3784bc/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01KD8T8W07-f05c3784bc/image_360.png","thumb_360_w":360,"thumb_360_h":242,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01KD8T8W07-f05c3784bc/image_480.png","thumb_480_w":480,"thumb_480_h":323,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01KD8T8W07-f05c3784bc/image_160.png","original_w":598,"original_h":402,"thumb_tiny":"AwAgADDR3Ef/AKjQpJPNIf8APWlXr/8AroAdRRRQAUnPrS0UAMI5/wDrGlXr/wDWo+Q9x+dGVHQj86AHUgo3D1H50gYeo/OgB1FN3D1/WjePX9aAP//Z","permalink":"https://julialang.slack.com/files/ULZQ4DCSU/F01KD8T8W07/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01KD8T8W07-8d4d3e90ed","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"2HWq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I still haven't been able to figure out the plotting and broadcasting related issues I encountered last week while working with the solution.  Could I get help in troubleshooting the following first?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"# Plotting version 1\nplot(sol, vars=(0,30))\n\n# Plotting version 2\ntestfxn(t) = sol(t, idxs=30)\nplot(-60:0.1:100, testfxn)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Attached are the outputs from the 2 versions."}]}]}],"user":"ULZQ4DCSU","ts":"1611612731.062400"},{"client_msg_id":"390053a3-ef6d-43e0-b5f3-82043b177fcd","type":"message","text":"is it a dense solution?","user":"U69BL50BF","ts":"1611612910.063100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ymq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is it a dense solution?"}]}]}]},{"client_msg_id":"21f47f85-7471-4e78-b024-706279b391b7","type":"message","text":"yes","user":"ULZQ4DCSU","ts":"1611613172.063300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fDz0n","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}]},{"client_msg_id":"f84f1533-eaf6-4494-9926-9cd2bb99796d","type":"message","text":"odd","user":"U69BL50BF","ts":"1611614702.063600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2JeY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"odd"}]}]}]},{"client_msg_id":"956d1c60-8e40-41a5-a4d4-6f0e425f5d27","type":"message","text":"what if you expand it yourself?","user":"U69BL50BF","ts":"1611614705.063800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PsgK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what if you expand it yourself?"}]}]}]},{"client_msg_id":"1c467489-aaad-4b76-9178-790ef1325b46","type":"message","text":"how would you do that?","user":"ULZQ4DCSU","ts":"1611614973.064000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rU7CU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how would you do that?"}]}]}]},{"client_msg_id":"2580cdc2-35e3-4832-a115-3c1b0284f993","type":"message","text":"```testfxn(-60:0.1:100)```","user":"U69BL50BF","ts":"1611615272.064400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pIV","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"testfxn(-60:0.1:100)"}]}]}]},{"client_msg_id":"46fe3330-4866-40ee-a7fc-c26209dc0683","type":"message","text":"and then plot","user":"U69BL50BF","ts":"1611615274.064600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jMeK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and then plot"}]}]}]},{"type":"message","text":"","files":[{"id":"F01L0BCUUH2","created":1611615438,"timestamp":1611615438,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"ULZQ4DCSU","editable":false,"size":5431,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01L0BCUUH2/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01L0BCUUH2/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01L0BCUUH2-baae990a28/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01L0BCUUH2-baae990a28/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01L0BCUUH2-baae990a28/image_360.png","thumb_360_w":360,"thumb_360_h":10,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01L0BCUUH2-baae990a28/image_480.png","thumb_480_w":480,"thumb_480_h":13,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01L0BCUUH2-baae990a28/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01L0BCUUH2-baae990a28/image_720.png","thumb_720_w":720,"thumb_720_h":20,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01L0BCUUH2-baae990a28/image_800.png","thumb_800_w":800,"thumb_800_h":22,"original_w":909,"original_h":25,"thumb_tiny":"AwABADCCmnqadTT1NBQlFFFAgooooA//2Q==","permalink":"https://julialang.slack.com/files/ULZQ4DCSU/F01L0BCUUH2/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01L0BCUUH2-9c7f2a81cc","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"ULZQ4DCSU","display_as_bot":false,"ts":"1611615440.064700"},{"client_msg_id":"031351ad-6757-4ef7-8665-03936ee31b07","type":"message","text":"I meant make that into a plottable object.","user":"U69BL50BF","ts":"1611615979.065300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j8C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I meant make that into a plottable object."}]}]}]},{"client_msg_id":"1f19433d-93e3-44f7-8fd2-e658d10b3ef6","type":"message","text":"has anyone here used `Unitful` with `DifferentialEquations.jl` ? Preliminary benchmarks I've run show a performance hit of 10% or more which is a bit unfortunate.","user":"U01H36BUDJB","ts":"1611616147.066000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KW+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"has anyone here used "},{"type":"text","text":"Unitful","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"DifferentialEquations.jl","style":{"code":true}},{"type":"text","text":" ? Preliminary benchmarks I've run show a performance hit of 10% or more which is a bit unfortunate."}]}]}],"thread_ts":"1611616147.066000","reply_count":1,"reply_users_count":1,"latest_reply":"1611617530.066400","reply_users":["U69BL50BF"],"subscribed":false},{"type":"message","text":"","files":[{"id":"F01KUETGN0K","created":1611616998,"timestamp":1611616998,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"ULZQ4DCSU","editable":false,"size":8970,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01KUETGN0K/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01KUETGN0K/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01KUETGN0K-cf17fe15f0/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01KUETGN0K-cf17fe15f0/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01KUETGN0K-cf17fe15f0/image_360.png","thumb_360_w":360,"thumb_360_h":40,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01KUETGN0K-cf17fe15f0/image_480.png","thumb_480_w":480,"thumb_480_h":53,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01KUETGN0K-cf17fe15f0/image_160.png","original_w":579,"original_h":64,"thumb_tiny":"AwAFADCtgUEAClobpQMbRwe1FFACYHpRgUtFAH//2Q==","permalink":"https://julialang.slack.com/files/ULZQ4DCSU/F01KUETGN0K/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01KUETGN0K-d16c5b4a52","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"ULZQ4DCSU","display_as_bot":false,"ts":"1611617000.066100"},{"client_msg_id":"3ff79f80-5812-47e8-90e2-bc51ae1556b9","type":"message","text":"I would like to do a Jet Transport based on a MTK model and am hitting many road blocks. It looks like TaylorSeries IC doesn't work  w/ DiffEq in general. produces  `LoadError: MethodError: no method matching TaylorN{Float64}(::Rational{Int64})` for both `Tsit5()`  and `TaylorMethod` .  As a work around, I looked into building the eom function and calling `TaylorIntegration`  directly, however the parsing performed in `taylorinteg`  is hitting a roadblock w/ `RuntimeGeneratedFunctions` .  I would prefer to used DiffEq directly but is there a simple stop-gap workaround for this. e.g. produce a `function`  instead of `RuntimeGeneratedFunctions` ?","user":"UP95S4864","ts":"1611668881.071300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/pcf4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would like to do a Jet Transport based on a MTK model and am hitting many road blocks. It looks like TaylorSeries IC doesn't work  w/ DiffEq in general. produces  "},{"type":"text","text":"LoadError: MethodError: no method matching TaylorN{Float64}(::Rational{Int64})","style":{"code":true}},{"type":"text","text":" for both "},{"type":"text","text":"Tsit5()","style":{"code":true}},{"type":"text","text":"  and "},{"type":"text","text":"TaylorMethod","style":{"code":true}},{"type":"text","text":" .  As a work around, I looked into building the eom function and calling "},{"type":"text","text":"TaylorIntegration","style":{"code":true}},{"type":"text","text":"  directly, however the parsing performed in "},{"type":"text","text":"taylorinteg","style":{"code":true}},{"type":"text","text":"  is hitting a roadblock w/ "},{"type":"text","text":"RuntimeGeneratedFunctions","style":{"code":true}},{"type":"text","text":" .  I would prefer to used DiffEq directly but is there a simple stop-gap workaround for this. e.g. produce a "},{"type":"text","text":"function","style":{"code":true}},{"type":"text","text":"  instead of "},{"type":"text","text":"RuntimeGeneratedFunctions","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1611668881.071300","reply_count":31,"reply_users_count":3,"latest_reply":"1611776076.109900","reply_users":["UP95S4864","U69BL50BF","U9Z3H4H5F"],"subscribed":false},{"client_msg_id":"1251b20a-cf56-4ca9-9116-7c861e616cb2","type":"message","text":"Something in the world of MTK/SymbolicUtils changed: upon creation of equations there is some simplification happening ( `x ~ a + b + a` returns `x ~ b + 2a` )which broke my tests. Does anyone one knows where this changes comes from? Is there any progress on the direct comparison of two equations or the total ordering of terms? There are some oldish issues about that (i.e. <https://github.com/JuliaSymbolics/SymbolicUtils.jl/issues/85>)â€¦","user":"U01BYANF42K","ts":"1611673026.079300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G4VkB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Something in the world of MTK/SymbolicUtils changed: upon creation of equations there is some simplification happening ( "},{"type":"text","text":"x ~ a + b + a","style":{"code":true}},{"type":"text","text":" returns "},{"type":"text","text":"x ~ b + 2a","style":{"code":true}},{"type":"text","text":" )which broke my tests. Does anyone one knows where this changes comes from? Is there any progress on the direct comparison of two equations or the total ordering of terms? There are some oldish issues about that (i.e. "},{"type":"link","url":"https://github.com/JuliaSymbolics/SymbolicUtils.jl/issues/85"},{"type":"text","text":")â€¦"}]}]}]},{"client_msg_id":"3f610998-3a47-42f8-9fb0-4ce763ce6b19","type":"message","text":"yes it's the same PR with the 100x-1000x acceleration","user":"U69BL50BF","ts":"1611673119.079600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Gkntb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes it's the same PR with the 100x-1000x acceleration"}]}]}]},{"client_msg_id":"fc636dd7-0559-47fe-8d47-3b48f64b9174","type":"message","text":"<https://github.com/JuliaSymbolics/SymbolicUtils.jl/pull/154>","user":"U69BL50BF","ts":"1611673119.079800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iABY","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaSymbolics/SymbolicUtils.jl/pull/154"}]}]}],"thread_ts":"1611673119.079800","reply_count":4,"reply_users_count":2,"latest_reply":"1611693834.091000","reply_users":["U01BYANF42K","U69BL50BF"],"subscribed":false},{"client_msg_id":"6d2c014c-6da5-40ac-b280-dd7bef6e8844","type":"message","text":"Chris, I figured out that the plotting issue happens if I use `CVODE_BDF()`, when I tested it with the Lorenz equations.","user":"ULZQ4DCSU","ts":"1611673602.080800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"awYB1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Chris, I figured out that the plotting issue happens if I use "},{"type":"text","text":"CVODE_BDF()","style":{"code":true}},{"type":"text","text":", when I tested it with the Lorenz equations."}]}]}]},{"client_msg_id":"cb880490-c316-4be2-b791-fb281222bfa9","type":"message","text":"```using DifferentialEquations\nusing Sundials\nusing Plots\n\nfunction lorenz!(du,u,p,t)\n du[1] = 10.0*(u[2]-u[1])\n du[2] = u[1]*(28.0-u[3]) - u[2]\n du[3] = u[1]*u[2] - (8/3)*u[3]\nend\n\nu0 = [1.0;0.0;0.0]\ntspan = (0.0,100.0)\nprob = ODEProblem(lorenz!,u0,tspan)\n#sol = solve(prob)\nsol = solve(prob, CVODE_BDF())\n\nplot(sol, vars=(0,1))\n\n@. testfxn(t) = sol(t, idxs=1)\nplot(0.0:0.1:100, testfxn)```","user":"ULZQ4DCSU","ts":"1611673657.081100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3MOB","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using DifferentialEquations\nusing Sundials\nusing Plots\n\nfunction lorenz!(du,u,p,t)\n du[1] = 10.0*(u[2]-u[1])\n du[2] = u[1]*(28.0-u[3]) - u[2]\n du[3] = u[1]*u[2] - (8/3)*u[3]\nend\n\nu0 = [1.0;0.0;0.0]\ntspan = (0.0,100.0)\nprob = ODEProblem(lorenz!,u0,tspan)\n#sol = solve(prob)\nsol = solve(prob, CVODE_BDF())\n\nplot(sol, vars=(0,1))\n\n@. testfxn(t) = sol(t, idxs=1)\nplot(0.0:0.1:100, testfxn)"}]}]}]},{"type":"message","text":"Do you think that could be related to the following error?","files":[{"id":"F01KWTUKKKM","created":1611673808,"timestamp":1611673808,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"ULZQ4DCSU","editable":false,"size":34951,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01KWTUKKKM/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01KWTUKKKM/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01KWTUKKKM-754bc6b2dc/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01KWTUKKKM-754bc6b2dc/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01KWTUKKKM-754bc6b2dc/image_360.png","thumb_360_w":360,"thumb_360_h":120,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01KWTUKKKM-754bc6b2dc/image_480.png","thumb_480_w":480,"thumb_480_h":160,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01KWTUKKKM-754bc6b2dc/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01KWTUKKKM-754bc6b2dc/image_720.png","thumb_720_w":720,"thumb_720_h":240,"original_w":766,"original_h":255,"thumb_tiny":"AwAPADCsOlKKaGGOtLuA70wFpabvFJuFAC0Um4UbhQB//9k=","permalink":"https://julialang.slack.com/files/ULZQ4DCSU/F01KWTUKKKM/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01KWTUKKKM-10f26c521e","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"Qri","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you think that could be related to the following error?"}]}]}],"user":"ULZQ4DCSU","display_as_bot":false,"ts":"1611673811.082700"},{"client_msg_id":"4059c628-b847-4594-a505-0eb3de4ebc42","type":"message","text":"where are the zero dimensional arrays coming from?","user":"U69BL50BF","ts":"1611681100.083500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oFe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"where are the zero dimensional arrays coming from?"}]}]}]},{"client_msg_id":"884ed498-1791-4c23-a65b-8b42228ab8ab","type":"message","text":"from the solution","user":"ULZQ4DCSU","ts":"1611681148.083700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Uag","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"from the solution"}]}]}]},{"client_msg_id":"8681abc9-25e5-42ad-981c-fb8151c8c30b","type":"message","text":"you're using 0 dimensional variables in the solution?","user":"U69BL50BF","ts":"1611681175.084300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r+Yf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you're using 0 dimensional variables in the solution?"}]}]}]},{"client_msg_id":"15546902-4cdc-469e-a29c-654bcff92503","type":"message","text":"my u and p are vectors, but sol(1, idxs=1), for example, shows up as a zero dimensional array","user":"ULZQ4DCSU","ts":"1611681244.085300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AvC3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"my u and p are vectors, but sol(1, idxs=1), for example, shows up as a zero dimensional array"}]}]}]},{"client_msg_id":"7fcf7c8e-e1b2-45d0-adc6-f318912a00f0","type":"message","text":"Hello diffeq enthusiasts,\n\nI am looking for advice on accurate *Finite Volume simulation packages/tools in Julia*.\nSpecifically, it would be nice to simulate a 2D (stiff) time-dependent convection-diffusion problem.\n\nWould you have any suggestions?\nThank you!","user":"U01HC60USTH","ts":"1611691262.088400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SUXi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hello diffeq enthusiasts,\n\nI am looking for advice on accurate "},{"type":"text","text":"Finite Volume simulation packages/tools in Julia","style":{"bold":true}},{"type":"text","text":".\nSpecifically, it would be nice to simulate a 2D (stiff) time-dependent convection-diffusion problem.\n\nWould you have any suggestions?\nThank you!"}]}]}]},{"client_msg_id":"506c3fbe-4c68-4637-9827-83902a2d9076","type":"message","text":"do finite volume to get the ODEs and then put it to a stiff ODE solver","user":"U69BL50BF","ts":"1611691730.088700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yVXI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"do finite volume to get the ODEs and then put it to a stiff ODE solver"}]}]}]},{"client_msg_id":"790f40a3-292e-485e-8498-32cad52c9797","type":"message","text":"we don't have auto spatial FVM right now.","user":"U69BL50BF","ts":"1611691738.089000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UPDal","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"we don't have auto spatial FVM right now."}]}]}]},{"client_msg_id":"a18b3f5f-c8d1-4f94-aed5-14670fe4b7f9","type":"message","text":"so I figured out what's causing the zero dimensional array.\n\n```@. testfxn(t) = sol(t, idxs=1)\ntypeof(testfxn(1))```\nIt's `Float64` with `solve(prob)` and `Array{Float64,0}` with `solve(prob, CVODE_BDF())`.","user":"ULZQ4DCSU","ts":"1611692175.089700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"llC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so I figured out what's causing the zero dimensional array.\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@. testfxn(t) = sol(t, idxs=1)\ntypeof(testfxn(1))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"It's "},{"type":"text","text":"Float64","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"solve(prob)","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"Array{Float64,0}","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"solve(prob, CVODE_BDF())","style":{"code":true}},{"type":"text","text":"."}]}]}]},{"client_msg_id":"faaf6983-fbcf-444a-b46e-a6e6086b7adf","type":"message","text":"oh :thinking_face:","user":"U69BL50BF","ts":"1611692880.089900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2I2+p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh "},{"type":"emoji","name":"thinking_face"}]}]}]},{"client_msg_id":"da2effc9-d619-4cbe-a473-b4c3fd6b0770","type":"message","text":"can you get an MWE with that? Simplify it down?","user":"U69BL50BF","ts":"1611692887.090300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"075i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you get an MWE with that? Simplify it down?"}]}]}]},{"client_msg_id":"239e262e-bd87-43d0-8dcc-ab513f1d2a9e","type":"message","text":"That would be good to figure out and fix.","user":"U69BL50BF","ts":"1611692893.090500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eip","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That would be good to figure out and fix."}]}]}]},{"client_msg_id":"e1cdf4e0-cca7-49db-a424-f01f03a61420","type":"message","text":"and post to sundials issues?","user":"ULZQ4DCSU","ts":"1611692977.090700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"50h","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and post to sundials issues?"}]}]}]},{"client_msg_id":"3b69f9d5-37cb-4d77-893b-3bc2aa84c796","type":"message","text":"yes","user":"U69BL50BF","ts":"1611693696.090900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"o6cH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}]},{"client_msg_id":"64d715a5-e67b-478f-95c9-4eb4b7137a2b","type":"message","text":"is there a way to get `ODEProblem` and `solve` to use a pre-allocated state variable? From the documentation, it appears that `inplace` only is concerned with the differential `du` , not the state variable `u`. or is this not possible due to interpolation?","user":"U01H36BUDJB","ts":"1611739413.094400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jtb8z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there a way to get "},{"type":"text","text":"ODEProblem","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"solve","style":{"code":true}},{"type":"text","text":" to use a pre-allocated state variable? From the documentation, it appears that "},{"type":"text","text":"inplace","style":{"code":true}},{"type":"text","text":" only is concerned with the differential "},{"type":"text","text":"du","style":{"code":true}},{"type":"text","text":" , not the state variable "},{"type":"text","text":"u","style":{"code":true}},{"type":"text","text":". or is this not possible due to interpolation?"}]}]}],"thread_ts":"1611739413.094400","reply_count":2,"reply_users_count":2,"latest_reply":"1611744211.094700","reply_users":["UNM50TRRR","U01H36BUDJB"],"subscribed":false},{"client_msg_id":"bfbc084f-42b0-4756-85a9-027ca3235bde","type":"message","text":"If I solve an ODE without specifying the algorithm (it ends up using Vern9 and Rodas5) and I check the sol.t array I see that the timestep chosen is basically constant. If I then take this timestep and use it as the dt in an RODE problem solving with Euler I get huge numerical errors, I require a timestep that is ~1000 times smaller to see the same solution. I'd like some help understanding what's going on","user":"ULA52A5B5","ts":"1611763446.096900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hRw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If I solve an ODE without specifying the algorithm (it ends up using Vern9 and Rodas5) and I check the sol.t array I see that the timestep chosen is basically constant. If I then take this timestep and use it as the dt in an RODE problem solving with Euler I get huge numerical errors, I require a timestep that is ~1000 times smaller to see the same solution. I'd like some help understanding what's going on"}]}]}],"thread_ts":"1611763446.096900","reply_count":13,"reply_users_count":2,"latest_reply":"1611765152.107700","reply_users":["U69BL50BF","ULA52A5B5"],"subscribed":false},{"client_msg_id":"707bf965-e466-45db-affd-1be7b3566ee0","type":"message","text":"<@U69BL50BF> Is the UDE paper published or still under review?","user":"U01H36BUDJB","ts":"1611763658.097500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vA9","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" Is the UDE paper published or still under review?"}]}]}],"thread_ts":"1611763658.097500","reply_count":5,"reply_users_count":2,"latest_reply":"1611764745.104900","reply_users":["U69BL50BF","U01H36BUDJB"],"subscribed":false}]}