{"cursor": 7, "messages": [{"client_msg_id":"57fc066b-20e2-44a0-b8b5-e39f45313fca","type":"message","text":"<@U69BL50BF> I’m learning SciML and SinDy with this repo\n<https://github.com/ChrisRackauckas/universal_differential_equations/blob/master/DelayLotkaVolterra/VolterraExp.jl>\n\nI was not able to define polys with `polys = Operation[1]` , but do I have to add some packages before this syntax?","user":"U01JMUQ3PE1","ts":"1610641286.031000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JDBA","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" I’m learning SciML and SinDy with this repo\n"},{"type":"link","url":"https://github.com/ChrisRackauckas/universal_differential_equations/blob/master/DelayLotkaVolterra/VolterraExp.jl"},{"type":"text","text":"\n\nI was not able to define polys with "},{"type":"text","text":"polys = Operation[1]","style":{"code":true}},{"type":"text","text":" , but do I have to add some packages before this syntax?"}]}]}],"thread_ts":"1610641286.031000","reply_count":1,"reply_users_count":1,"latest_reply":"1610641717.031900","reply_users":["U69BL50BF"],"subscribed":false},{"client_msg_id":"2ca4ede5-9fb2-401b-b187-453503d2ae81","type":"message","text":"Any ideas what `KeyError: key * not found`  means when calling `discretize` for `PhysicsInformedNN` ?","user":"U01H36BUDJB","ts":"1610641287.031100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"asysW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Any ideas what "},{"type":"text","text":"KeyError: key * not found","style":{"code":true}},{"type":"text","text":"  means when calling "},{"type":"text","text":"discretize","style":{"code":true}},{"type":"text","text":" for "},{"type":"text","text":"PhysicsInformedNN","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1610641287.031100","reply_count":4,"reply_users_count":2,"latest_reply":"1610642915.032200","reply_users":["U01H36BUDJB","U69BL50BF"],"subscribed":false},{"client_msg_id":"cebfff0c-997e-4fa1-923b-86574cc8da31","type":"message","text":"Hello -- Is it possible now (or in the future) to combine some of the kernel based approximation methods in Surrogates.jl with the method of lines found in DiffEqOperators to solve time dependent PDEs? Idea being to fit an interpolant to the initial condition function at t=0 then derive the ODEs to update the coefficients?","user":"U0178LR5K7F","ts":"1610662075.041600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"882","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hello -- Is it possible now (or in the future) to combine some of the kernel based approximation methods in Surrogates.jl with the method of lines found in DiffEqOperators to solve time dependent PDEs? Idea being to fit an interpolant to the initial condition function at t=0 then derive the ODEs to update the coefficients?"}]}]}],"thread_ts":"1610662075.041600","reply_count":2,"reply_users_count":1,"latest_reply":"1610662278.042100","reply_users":["U69BL50BF"],"subscribed":false},{"client_msg_id":"f991b40f-e072-4822-83a9-2d290e465b59","type":"message","text":"Has anyone got some experience/pointers to take the output of a general circulation model (i.e., a 3D grid and some volumetric flow rates) and \"embedding\" those in DifferentialEquations.jl to run an offline simulation?","user":"UB197FRCL","ts":"1610664948.044000","team":"T68168MUP","edited":{"user":"UB197FRCL","ts":"1610664957.000000"},"blocks":[{"type":"rich_text","block_id":"kVfn=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Has anyone got some experience/pointers to take the output of a general circulation model (i.e., a 3D grid and some volumetric flow rates) and \"embedding\" those in DifferentialEquations.jl to run an offline simulation?"}]}]}]},{"client_msg_id":"5501b2b1-5ae2-4d20-9ced-6b783980a105","type":"message","text":"Like a binary@","user":"U69BL50BF","ts":"1610665502.045600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"69Az","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Like a binary@"}]}]}]},{"client_msg_id":"620137b1-6ca8-4bd3-aa5e-902908cd8fe5","type":"message","text":"Is there an example of `solve` somewhere with a custom type for the state variable? The documentation claims that any linear indexable type should work, but I get an error that there's no implementation of `ldiv!` when I try to call `solve` with a custom type that extends `AbstractArray{T,N}` .","user":"U01H36BUDJB","ts":"1610721393.047900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EGe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there an example of "},{"type":"text","text":"solve","style":{"code":true}},{"type":"text","text":" somewhere with a custom type for the state variable? The documentation claims that any linear indexable type should work, but I get an error that there's no implementation of "},{"type":"text","text":"ldiv!","style":{"code":true}},{"type":"text","text":" when I try to call "},{"type":"text","text":"solve","style":{"code":true}},{"type":"text","text":" with a custom type that extends "},{"type":"text","text":"AbstractArray{T,N}","style":{"code":true}},{"type":"text","text":" ."}]}]}]},{"client_msg_id":"22d80146-4657-467e-8282-ba62a461234d","type":"message","text":"if you're using a method for stiff ODEs, it needs to be able to do lu factorizations","user":"U69BL50BF","ts":"1610722056.048400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"R4P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you're using a method for stiff ODEs, it needs to be able to do lu factorizations"}]}]}]},{"client_msg_id":"62b4ce7a-3963-45ca-8b68-d38c4156976c","type":"message","text":"I find this to be a kind of more general problem with Julia... it's not clear what you need to implement for any given type interface. Is there some commonly used method of communicating this that I am not aware of?","user":"U01H36BUDJB","ts":"1610723204.049500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JpWSI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I find this to be a kind of more general problem with Julia... it's not clear what you need to implement for any given type interface. Is there some commonly used method of communicating this that I am not aware of?"}]}]}]},{"client_msg_id":"5736cb4c-888a-4578-8737-934565fa11ce","type":"message","text":"There isn’t any","user":"U6788D83U","ts":"1610723516.049800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0fGG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There isn’t any"}]}]}]},{"client_msg_id":"84adff74-41be-452f-908e-c088f4e39def","type":"message","text":"If you subtype your custom array to be DenseArray, it will have better linalg coverage.","user":"U6788D83U","ts":"1610723568.050800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ytG5+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you subtype your custom array to be DenseArray, it will have better linalg coverage."}]}]}]},{"client_msg_id":"7af288a5-0564-42db-856a-06875a50704b","type":"message","text":"Do it when it’s really dense, though","user":"U6788D83U","ts":"1610723585.051300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QXe0P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do it when it’s really dense, though"}]}]}]},{"client_msg_id":"69621336-1741-462e-a9db-6845ab95cbf1","type":"message","text":"ok, thanks. I'm just trying to make a wrapper type, so the underlying array is a typical dense array","user":"U01H36BUDJB","ts":"1610723620.052000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VEf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, thanks. I'm just trying to make a wrapper type, so the underlying array is a typical dense array"}]}]}]},{"client_msg_id":"5a95dd44-4625-4484-9b7c-7ecb7e63651f","type":"message","text":"generally, error msgs are pretty instructive about what you need to implement","user":"U6788D83U","ts":"1610723655.052500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6S9e6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"generally, error msgs are pretty instructive about what you need to implement"}]}]}]},{"client_msg_id":"b803a739-f202-470f-8ce7-6c08fcde1af8","type":"message","text":"hmm, yeah I suppose. still makes me wish for a static type system sometimes, though :sweat_smile:","user":"U01H36BUDJB","ts":"1610723726.053500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1UgE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm, yeah I suppose. still makes me wish for a static type system sometimes, though "},{"type":"emoji","name":"sweat_smile"}]}]}]},{"client_msg_id":"697eb4eb-f6a0-40b9-9ee0-d025c21a373a","type":"message","text":"you cannot have everything :stuck_out_tongue:","user":"U6788D83U","ts":"1610723804.053900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xnDKO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you cannot have everything "},{"type":"emoji","name":"stuck_out_tongue"}]}]}]},{"client_msg_id":"881c0b34-a01c-4180-ae20-f6353884a92f","type":"message","text":"Could you contribute to the docs when you get it to work <@U01H36BUDJB>?","user":"U6788D83U","ts":"1610723973.054600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/D9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could you contribute to the docs when you get it to work "},{"type":"user","user_id":"U01H36BUDJB"},{"type":"text","text":"?"}]}]}]},{"client_msg_id":"6b76811e-a701-4cac-9692-cf017042a976","type":"message","text":"For nonstiff solvers, we have a test for the interface <https://github.com/SciML/OrdinaryDiffEq.jl/blob/master/test/interface/noindex_tests.jl>","user":"U6788D83U","ts":"1610724211.055000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gr2t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For nonstiff solvers, we have a test for the interface "},{"type":"link","url":"https://github.com/SciML/OrdinaryDiffEq.jl/blob/master/test/interface/noindex_tests.jl"}]}]}]},{"type":"message","subtype":"bot_message","text":"Thanks @ChrisRackauckas  that helped but now I am getting `MethodError: objects of type Float64 are not callable` at `sol=solve(prob_sde,EM(),dt=dt)` and it's pointing to `du[1] = α(1.0-x)-αx+βx(1.0-x)`","ts":"1610950848.118600","username":"[gitter] <adhikarirsr>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_bvmt0lcg27id0g40lji0","text":{"type":"mrkdwn","text":"Thanks @ChrisRackauckas  that helped but now I am getting `MethodError: objects of type Float64 are not callable` at `sol=solve(prob_sde,EM(),dt=dt)` and it's pointing to `du[1] = α(1.0-x)-αx+βx(1.0-x)`","verbatim":false}}]},{"client_msg_id":"e6bc6183-e6e4-4c4b-91ee-424cc21c8fcb","type":"message","text":"`du[1] = α*(1.0-x)-α*x+β*x*(1.0-x)`","user":"U69BL50BF","ts":"1610951159.118900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3J2Nt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"du[1] = α*(1.0-x)-α*x+β*x*(1.0-x)","style":{"code":true}}]}]}]},{"type":"message","subtype":"bot_message","text":"Thanks @ChrisRackauckas  that helped ","ts":"1610951250.119000","username":"[gitter] <adhikarirsr>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_bvmt0lcg27id0g40lji0","text":{"type":"mrkdwn","text":"Thanks @ChrisRackauckas  that helped ","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"@ChrisRackauckas , is EnsembleProblem supposed to be differentiable ? (with sensealg=DiffEqFlux.InterpolatingAdjoint)","ts":"1610966005.119200","username":"[gitter] <aussetg_twitter>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_bvmt0lcg27id0g40lji0","text":{"type":"mrkdwn","text":"@ChrisRackauckas , is EnsembleProblem supposed to be differentiable ? (with sensealg=DiffEqFlux.InterpolatingAdjoint)","verbatim":false}}]},{"client_msg_id":"b645d580-4cd6-44ee-b703-7525e5ca57d2","type":"message","text":"It is differentiable and there's a good amount of tests on it.","user":"U69BL50BF","ts":"1610973917.121400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Autb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It is differentiable and there's a good amount of tests on it."}]}]}]},{"type":"message","subtype":"bot_message","text":"ok, found the answer :) (Yes)","ts":"1610985379.121600","username":"[gitter] <aussetg_twitter>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_bvmt0lcg27id0g40lji0","text":{"type":"mrkdwn","text":"ok, found the answer :) (Yes)","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"Btw FastChain / FastDense do not like being differentiated twice, at all.","ts":"1611045790.131100","username":"[gitter] <aussetg_twitter>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_bvmt0lcg27id0g40lji0","text":{"type":"mrkdwn","text":"Btw FastChain / FastDense do not like being differentiated twice, at all.","verbatim":false}}]},{"client_msg_id":"68552729-a522-411e-bd20-ac6e5c32b4b6","type":"message","text":"are you using forward over reverse?","user":"U69BL50BF","ts":"1611046052.131300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"foe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"are you using forward over reverse?"}]}]}]},{"client_msg_id":"663bea94-bc25-4127-97ca-cb9d0ccf4186","type":"message","text":"it works just fine.","user":"U69BL50BF","ts":"1611046055.131500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3Bp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it works just fine."}]}]}]},{"type":"message","subtype":"bot_message","text":"``` nn = FastChain(FastDense(1, 5, tanh), FastDense(5, 1, tanh)) function du(u, p, t)     Zygote.gradient(u -&gt; nn(u, p)[1], u)[1] end  p = initial_params(nn)  prob = ODEProblem(du, [0.], (0., 1.), p)  function loss(p)     prob_ = remake(prob; p = p)     sol = Array(solve(prob_, Tsit5()))     (1. - sol[end][1]) end  DiffEqFlux.sciml_train(loss, p, ADAM(), maxiters = 100) ```  Exemple of very unhappy FastDense","ts":"1611061973.131600","username":"[gitter] <aussetg_twitter>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_bvmt0lcg27id0g40lji0","text":{"type":"mrkdwn","text":"```\nnn = FastChain(FastDense(1, 5, tanh), FastDense(5, 1, tanh))\nfunction du(u, p, t)\n    Zygote.gradient(u -&gt; nn(u, p)[1], u)[1]\nend\n\np = initial_params(nn)\n\nprob = ODEProblem(du, [0.], (0., 1.), p)\n\nfunction loss(p)\n    prob_ = remake(prob; p = p)\n    sol = Array(solve(prob_, Tsit5()))\n    (1. - sol[end][1])\nend\n\nDiffEqFlux.sciml_train(loss, p, ADAM(), maxiters = 100)\n```\n\nExemple of very unhappy FastDense","verbatim":false}}]},{"type":"message","subtype":"bot_message","text":"julia&gt; DiffEqFlux.sciml_train(loss, p, ADAM(), maxiters = 100) ERROR: Mutating arrays is not supported Stacktrace:  [1] (::Zygote.var\"#368#369\")(::Nothing) at /home/guillaume/.julia/packages/Zygote/ggM8Z/src/lib/array.jl:61  [2] (::Zygote.var\"#2255#back#370\"{Zygote.var\"#368#369\"})(::Nothing) at /home/guillaume/.julia/packages/ZygoteRules/OjfTt/src/adjoint.jl:59  [3] materialize! at ./broadcast.jl:848 [inlined]  [4] materialize! at ./broadcast.jl:845 [inlined]  [5] materialize! at ./broadcast.jl:841 [inlined]  [6] (::typeof(∂(materialize!)))(::Nothing) at /home/guillaume/.julia/packages/Zygote/ggM8Z/src/compiler/interface2.jl:0","ts":"1611062043.131700","username":"[gitter] <aussetg_twitter>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_bvmt0lcg27id0g40lji0","text":{"type":"mrkdwn","text":"julia&gt; DiffEqFlux.sciml_train(loss, p, ADAM(), maxiters = 100)\nERROR: Mutating arrays is not supported\nStacktrace:\n [1] (::Zygote.var\"#368#369\")(::Nothing) at /home/guillaume/.julia/packages/Zygote/ggM8Z/src/lib/array.jl:61\n [2] (::Zygote.var\"#2255#back#370\"{Zygote.var\"#368#369\"})(::Nothing) at /home/guillaume/.julia/packages/ZygoteRules/OjfTt/src/adjoint.jl:59\n [3] materialize! at ./broadcast.jl:848 [inlined]\n [4] materialize! at ./broadcast.jl:845 [inlined]\n [5] materialize! at ./broadcast.jl:841 [inlined]\n [6] (::typeof(∂(materialize!)))(::Nothing) at /home/guillaume/.julia/packages/Zygote/ggM8Z/src/compiler/interface2.jl:0","verbatim":false}}]},{"client_msg_id":"c479a980-71a9-4e38-a242-de2e13e50957","type":"message","text":"oh that's a Zygote thing.","user":"U69BL50BF","ts":"1611062071.131900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XXI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh that's a Zygote thing."}]}]}]},{"client_msg_id":"f13542ff-a545-4c49-9345-96dad57cb4a3","type":"message","text":"this is what Diffractor is for BTW","user":"U69BL50BF","ts":"1611062098.132100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1Mt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is what Diffractor is for BTW"}]}]}]},{"client_msg_id":"e2e49f93-7932-4b42-8d1e-c2f7a8268e2c","type":"message","text":"<@U69BL50BF> For the nonlinear diffusion problem, isn't the solution pretty obvious once we expand the RHS via product rule?","user":"U01HMTRF78E","ts":"1611079999.132900","team":"T68168MUP","edited":{"user":"U01HMTRF78E","ts":"1611335752.000000"},"blocks":[{"type":"rich_text","block_id":"P1C9","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" For the nonlinear diffusion problem, isn't the solution pretty obvious once we expand the RHS via product rule?"}]}]}]},{"client_msg_id":"3f80ea9f-14bb-4d12-a9b6-92e4cfcf4f31","type":"message","text":"Operators are already there for discretization after this simplification","user":"U01HMTRF78E","ts":"1611080023.133100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"puIV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Operators are already there for discretization after this simplification"}]}]}]},{"client_msg_id":"3ceaac38-fbe8-4884-b878-8bfd763fbf3e","type":"message","text":"Were you referring to some more cumbersome cases?","user":"U01HMTRF78E","ts":"1611080040.133300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VC28","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Were you referring to some more cumbersome cases?"}]}]}]},{"client_msg_id":"f6ed01b8-23a1-4c69-b736-294353a8e01d","type":"message","text":"well that's the \"theory\"","user":"U69BL50BF","ts":"1611080223.133900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5e2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well that's the \"theory\""}]}]}]},{"client_msg_id":"de0c8ca8-aaac-4871-a97e-9f1afb21464c","type":"message","text":"but in practice you need to do a bit more","user":"U69BL50BF","ts":"1611080230.134200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p0w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but in practice you need to do a bit more"}]}]}]},{"client_msg_id":"1fad8b64-7e0d-479e-85de-d4d95dcabbef","type":"message","text":"because the discretization needs to be symmetric","user":"U69BL50BF","ts":"1611080239.134500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wO5=a","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"because the discretization needs to be symmetric"}]}]}]},{"client_msg_id":"1871435a-f760-49a2-82a3-6173017114ec","type":"message","text":"so you need to forward one and reverse the other","user":"U69BL50BF","ts":"1611080247.134800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sekmt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so you need to forward one and reverse the other"}]}]}]},{"client_msg_id":"ec80998b-4620-40d5-865e-bad7e26b5a06","type":"message","text":"so it's slightly tricker than that.","user":"U69BL50BF","ts":"1611080270.135300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IE1p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so it's slightly tricker than that."}]}]}]},{"client_msg_id":"3ff1ada6-08a3-4a25-9815-7b2efc6ddf30","type":"message","text":"<@U69BL50BF>, how does one specify the checkpoints for the sensitivity algorithms?\nFrom what I understood using `checkpointing=true`  enables it, and then the checkpoints should default to points specified by `saveat`?\nI should also be able to specify them separately using `checkpoints` passed to the forward, right?","user":"UPM0H43C7","ts":"1611101819.138000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lvc","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":", how does one specify the checkpoints for the sensitivity algorithms?\nFrom what I understood using "},{"type":"text","text":"checkpointing=true","style":{"code":true}},{"type":"text","text":"  enables it, and then the checkpoints should default to points specified by "},{"type":"text","text":"saveat","style":{"code":true}},{"type":"text","text":"?\nI should also be able to specify them separately using "},{"type":"text","text":"checkpoints","style":{"code":true}},{"type":"text","text":" passed to the forward, right?"}]}]}]},{"client_msg_id":"0d5d76ef-43ef-4083-9e4e-3029f8411a3b","type":"message","text":"&gt; I should also be able to specify them separately using `checkpoints` passed to the forward, right?\nYes","user":"U69BL50BF","ts":"1611102306.138300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ym9iO","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"I should also be able to specify them separately using "},{"type":"text","text":"checkpoints","style":{"code":true}},{"type":"text","text":" passed to the forward, right?"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Yes"}]}]}]},{"client_msg_id":"3e9c855e-45e1-4309-9f84-afbeb48f6491","type":"message","text":"hm. Maybe I'm being overly ambitious but I wanted to optimize a neural ode with 250 \"hidden states\", but for a batch size of ~100 I keep seeing that just calling `solve` has a peak memory usage of about 10GB VRAM, and the interpolating adjoint blows it entirely when specifying 140 checkpoints","user":"UPM0H43C7","ts":"1611102479.141200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7Tzb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hm. Maybe I'm being overly ambitious but I wanted to optimize a neural ode with 250 \"hidden states\", but for a batch size of ~100 I keep seeing that just calling "},{"type":"text","text":"solve","style":{"code":true}},{"type":"text","text":" has a peak memory usage of about 10GB VRAM, and the interpolating adjoint blows it entirely when specifying 140 checkpoints"}]}]}]},{"client_msg_id":"eb892b2b-b4f1-41de-8e1a-885b91347f04","type":"message","text":"Is this something inherent about how DiffEqFlux and the other packages in SciML operate or did I make a blundering mistake somewhere in my code?","user":"UPM0H43C7","ts":"1611102580.142600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"350yg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is this something inherent about how DiffEqFlux and the other packages in SciML operate or did I make a blundering mistake somewhere in my code?"}]}]}]},{"client_msg_id":"54c78794-d428-4140-9192-21743ee339f7","type":"message","text":"140 checkpoints is a ton","user":"U69BL50BF","ts":"1611103233.142800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"spLy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"140 checkpoints is a ton"}]}]}]},{"client_msg_id":"7ed395c5-8360-43f8-9f5a-f0f7370cfba2","type":"message","text":"the neural PDE examples are much larger than this, so I'm not sure what's going on in your case","user":"U69BL50BF","ts":"1611103259.143200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"I7gw/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the neural PDE examples are much larger than this, so I'm not sure what's going on in your case"}]}]}]},{"client_msg_id":"c83e542b-c1ca-4d46-9f23-18e7ca4036e5","type":"message","text":"you'll want to make sure you're not keeping any saving","user":"U69BL50BF","ts":"1611103273.143600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5=wq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you'll want to make sure you're not keeping any saving"}]}]}]},{"client_msg_id":"d665cc8f-3c69-43d3-b251-51313754ad0f","type":"message","text":"other than the checkpoints","user":"U69BL50BF","ts":"1611103291.144000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1TI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"other than the checkpoints"}]}]}]},{"client_msg_id":"ea9ec6e7-c45f-422c-b38c-756927a589b8","type":"message","text":"damn. I wanted to re-create an rnn type problem where the loss is defined every unit of time.","user":"UPM0H43C7","ts":"1611103367.145100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LPM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"damn. I wanted to re-create an rnn type problem where the loss is defined every unit of time."}]}]}]},{"client_msg_id":"385d4a99-448d-47cd-8002-896888e5a15b","type":"message","text":"So I end up solving the ode for a 140 units of time, saving the predictions for each","user":"UPM0H43C7","ts":"1611103403.145800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PW2s5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So I end up solving the ode for a 140 units of time, saving the predictions for each"}]}]}]},{"client_msg_id":"95baecd9-8c6c-4856-a9bf-3482bd587b9c","type":"message","text":"that should be fine","user":"U69BL50BF","ts":"1611103677.146000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jRC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that should be fine"}]}]}]},{"client_msg_id":"3a4b0886-f2fe-463c-99cb-fa48c3799b04","type":"message","text":"hmm","user":"UPM0H43C7","ts":"1611103756.146200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hrkc0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm"}]}]}]},{"client_msg_id":"c30d0cb0-24d8-4e8c-a3f1-97e0b1c1f50a","type":"message","text":"any suggestions how I can figure out where all this memory usage is coming from?","user":"UPM0H43C7","ts":"1611103826.146800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/CVQu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"any suggestions how I can figure out where all this memory usage is coming from?"}]}]}]},{"client_msg_id":"33668f4c-315d-4ef1-a693-b526762224c8","type":"message","text":"first make sure you're actually checkpointing?","user":"U69BL50BF","ts":"1611103839.147100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zXv3H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"first make sure you're actually checkpointing?"}]}]}]},{"client_msg_id":"35d5a845-6455-459a-af18-dca9026d52aa","type":"message","text":"I'd just throw a print statement in there.","user":"U69BL50BF","ts":"1611103853.147400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NXvaK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd just throw a print statement in there."}]}]}]},{"client_msg_id":"a83dc409-a19f-404d-8bb2-d8a00b27efea","type":"message","text":"oh boy, how do I even check the checkpointing?","user":"UPM0H43C7","ts":"1611103873.147700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GdYO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh boy, how do I even check the checkpointing?"}]}]}]},{"client_msg_id":"bff631b1-d964-47da-8126-ee2cbdea0022","type":"message","text":"`Debugger.@enter` into `Zygote.gradient` ? or is there an easier approach?","user":"UPM0H43C7","ts":"1611103908.148500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/8euA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Debugger.@enter","style":{"code":true}},{"type":"text","text":" into "},{"type":"text","text":"Zygote.gradient","style":{"code":true}},{"type":"text","text":" ? or is there an easier approach?"}]}]}]},{"client_msg_id":"8c188ee2-45b6-4457-a780-bf0a721f3449","type":"message","text":"I would just dev DiffEqSensitivity and slap print statements in there","user":"U69BL50BF","ts":"1611103944.148900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"y/SW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would just dev DiffEqSensitivity and slap print statements in there"}]}]}]},{"client_msg_id":"51e55ec1-d3a4-4bd4-959c-1ac575c4af38","type":"message","text":"but whatever approach you like","user":"U69BL50BF","ts":"1611103948.149100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"02Y72","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but whatever approach you like"}]}]}]},{"client_msg_id":"1d8a9a34-3628-4fcd-b652-84819dc41d19","type":"message","text":"cool! that should also tell me why the `solve` call uses up so much memory?","user":"UPM0H43C7","ts":"1611104168.150400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tMpqq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cool! that should also tell me why the "},{"type":"text","text":"solve","style":{"code":true}},{"type":"text","text":" call uses up so much memory?"}]}]}]},{"client_msg_id":"5dc48a9d-1830-4122-a332-253d5ca2efb2","type":"message","text":"yup","user":"U69BL50BF","ts":"1611106462.150600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s2zu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yup"}]}]}]},{"client_msg_id":"6438b705-fbf7-4b7b-aa1c-9d6fc92a2834","type":"message","text":"a lot of that though could be from the reverse mode vjps","user":"U69BL50BF","ts":"1611106470.150900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aK1nN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"a lot of that though could be from the reverse mode vjps"}]}]}]},{"client_msg_id":"aad6e9ef-d580-4977-bee0-d16c515f2726","type":"message","text":"if you're talking about `@time` that is","user":"U69BL50BF","ts":"1611106491.151100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fH2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you're talking about "},{"type":"text","text":"@time","style":{"code":true}},{"type":"text","text":" that is"}]}]}]},{"client_msg_id":"3d0230f5-aa68-45f5-ac7e-5e1dd56fd0c3","type":"message","text":"since that is total not peak","user":"U69BL50BF","ts":"1611106498.151400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FXIk+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"since that is total not peak"}]}]}]},{"client_msg_id":"ba48e568-5f2d-4195-a043-daceae3ee8b8","type":"message","text":"peak should only the amount to save a dense trajectory between two checkpoints and the solver cache","user":"U69BL50BF","ts":"1611106548.152200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PI8oW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"peak should only the amount to save a dense trajectory between two checkpoints and the solver cache"}]}]}]},{"client_msg_id":"e2d331c2-92c5-47db-9a0b-2377864db205","type":"message","text":"which solver and how many parameters?","user":"U69BL50BF","ts":"1611106552.152600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DZv7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which solver and how many parameters?"}]}]}]},{"client_msg_id":"9b9ec22b-1207-4f51-92f0-4de42bb359ad","type":"message","text":"Tsit5 and slightly shy of 65 thousand parameters","user":"UPM0H43C7","ts":"1611106870.153400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"djyHt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Tsit5 and slightly shy of 65 thousand parameters"}]}]}]},{"type":"message","text":"When I try to plot any single variable, I get a plot that looks like the attached image.  This didn't happen before.  Any idea why?\n```variable(t) = sol(t, idxs=11)\n\nplot(-60:0.1:2500, variable)```","files":[{"id":"F01JSSY7YR5","created":1611108539,"timestamp":1611108539,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"ULZQ4DCSU","editable":false,"size":41139,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01JSSY7YR5/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01JSSY7YR5/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01JSSY7YR5-73f470877c/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01JSSY7YR5-73f470877c/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01JSSY7YR5-73f470877c/image_360.png","thumb_360_w":360,"thumb_360_h":240,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01JSSY7YR5-73f470877c/image_480.png","thumb_480_w":480,"thumb_480_h":320,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01JSSY7YR5-73f470877c/image_160.png","original_w":601,"original_h":401,"thumb_tiny":"AwAgADDRLfT86UHJ7U0nk8/+PUq9ev65oAdRRRQAUnNLQaAGE89f/HqVevX9c0uP9o0dO5NAC0UmaAaAFoNJu4zzQTxQB//Z","permalink":"https://julialang.slack.com/files/ULZQ4DCSU/F01JSSY7YR5/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01JSSY7YR5-0c094bb201","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"81+j=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When I try to plot any single variable, I get a plot that looks like the attached image.  This didn't happen before.  Any idea why?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"variable(t) = sol(t, idxs=11)\n\nplot(-60:0.1:2500, variable)"}]}]}],"user":"ULZQ4DCSU","display_as_bot":false,"ts":"1611108558.154600"},{"client_msg_id":"3cf451f2-22b4-4fbe-a9e8-25956c484558","type":"message","text":"are you using some odd array or number types?","user":"U69BL50BF","ts":"1611109284.155200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+8r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"are you using some odd array or number types?"}]}]}]},{"client_msg_id":"2fe4f5eb-81fa-4492-8d27-fe4e3a279650","type":"message","text":"just using floats in my u and p vectors","user":"ULZQ4DCSU","ts":"1611109347.155700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"c3YD2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"just using floats in my u and p vectors"}]}]}]},{"client_msg_id":"833af4da-94d7-401f-b3f1-5d2ad9e91289","type":"message","text":"then I don't know where that's from. If you look at the output does it look fine?","user":"U69BL50BF","ts":"1611109375.156100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jUq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"then I don't know where that's from. If you look at the output does it look fine?"}]}]}]},{"client_msg_id":"b10c21dc-1c7f-452f-a259-754ba5758f31","type":"message","text":"It might be a Plots issue?","user":"U69BL50BF","ts":"1611109384.156400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tLI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It might be a Plots issue?"}]}]}]},{"client_msg_id":"847f6f14-ba6f-43ae-940d-dec79ed10ba6","type":"message","text":"I was originally working with Makie and moved to Plots to figure out whether it was a Makie issue.","user":"ULZQ4DCSU","ts":"1611109441.157100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EJg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was originally working with Makie and moved to Plots to figure out whether it was a Makie issue."}]}]}]},{"client_msg_id":"7f2fac16-73b1-4f7b-ac3a-a3c3e0e4d2c9","type":"message","text":"Makie gives somethign like this","user":"ULZQ4DCSU","ts":"1611109446.157300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EEitn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Makie gives somethign like this"}]}]}]},{"type":"message","text":"","files":[{"id":"F01K0TRHUDC","created":1611109455,"timestamp":1611109455,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"ULZQ4DCSU","editable":false,"size":11831,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01K0TRHUDC/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01K0TRHUDC/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01K0TRHUDC-78c613eb46/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01K0TRHUDC-78c613eb46/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01K0TRHUDC-78c613eb46/image_360.png","thumb_360_w":264,"thumb_360_h":206,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01K0TRHUDC-78c613eb46/image_160.png","original_w":264,"original_h":206,"thumb_tiny":"AwAlADDSOewFAz3oIPY4/Cge9AC0GiigBPTiijrS0AIRnuRQOKNoPWgYHAoAWj60UUAFFFFABSd80UUAGOc5P0oxznJ+lFFACEZOckUEZ7kfSlooA//Z","permalink":"https://julialang.slack.com/files/ULZQ4DCSU/F01K0TRHUDC/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01K0TRHUDC-4324931c3a","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"ULZQ4DCSU","display_as_bot":false,"ts":"1611109456.157400"},{"client_msg_id":"7c8b38f1-a76f-4652-a52f-9f3816ed788e","type":"message","text":"The output is fine, as I can use them like so, and create plots that work.","user":"ULZQ4DCSU","ts":"1611110305.158500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+fq5c","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The output is fine, as I can use them like so, and create plots that work."}]}]}]},{"client_msg_id":"e5cc506e-9fa9-4a2e-9784-176e27537d8b","type":"message","text":"```LACT(t)         =   p[4]*sol(t, idxs=11)+p[3]*sol(t, idxs=12)+\n                        p[1]*sol(t, idxs=29)+p[2]*sol(t, idxs=25)\nLACT0           =   LACT(0)\nLACT_rel(t)     =   100*(LACT(t).-LACT0)/LACT0```","user":"ULZQ4DCSU","ts":"1611110317.158800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dunb","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"LACT(t)         =   p[4]*sol(t, idxs=11)+p[3]*sol(t, idxs=12)+\n                        p[1]*sol(t, idxs=29)+p[2]*sol(t, idxs=25)\nLACT0           =   LACT(0)\nLACT_rel(t)     =   100*(LACT(t).-LACT0)/LACT0"}]}]}]},{"client_msg_id":"89f18620-4ce5-4534-a386-8f3e8dff8585","type":"message","text":"and plot LACT_rel","user":"ULZQ4DCSU","ts":"1611110333.159000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xqE4W","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and plot LACT_rel"}]}]}]},{"type":"message","text":"","files":[{"id":"F01K4KGFP1B","created":1611110333,"timestamp":1611110333,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"ULZQ4DCSU","editable":false,"size":20381,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01K4KGFP1B/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01K4KGFP1B/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01K4KGFP1B-ecf1f176fd/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01K4KGFP1B-ecf1f176fd/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01K4KGFP1B-ecf1f176fd/image_360.png","thumb_360_w":360,"thumb_360_h":241,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01K4KGFP1B-ecf1f176fd/image_480.png","thumb_480_w":480,"thumb_480_h":322,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01K4KGFP1B-ecf1f176fd/image_160.png","original_w":595,"original_h":399,"thumb_tiny":"AwAgADDS4zQcChTml70AFFIPSloAKKKKAE6dBQO5pec0g6dKAFIpOfSjJxyKA2TgUALn2NGfak5z0o59KAP/2Q==","permalink":"https://julialang.slack.com/files/ULZQ4DCSU/F01K4KGFP1B/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01K4KGFP1B-d28de72bee","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"ULZQ4DCSU","display_as_bot":false,"ts":"1611110335.159100"},{"client_msg_id":"4056a3b2-dbaa-46f8-a4f4-1677bf22d946","type":"message","text":"I'm getting another error that prompted me to try plotting the individual sol'ns","user":"ULZQ4DCSU","ts":"1611110529.159800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZaQcd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm getting another error that prompted me to try plotting the individual sol'ns"}]}]}]},{"type":"message","text":"","files":[{"id":"F01JSUXGN2K","created":1611110571,"timestamp":1611110571,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"ULZQ4DCSU","editable":false,"size":34951,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01JSUXGN2K/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01JSUXGN2K/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01JSUXGN2K-02d6aa959c/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01JSUXGN2K-02d6aa959c/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01JSUXGN2K-02d6aa959c/image_360.png","thumb_360_w":360,"thumb_360_h":120,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01JSUXGN2K-02d6aa959c/image_480.png","thumb_480_w":480,"thumb_480_h":160,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01JSUXGN2K-02d6aa959c/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01JSUXGN2K-02d6aa959c/image_720.png","thumb_720_w":720,"thumb_720_h":240,"original_w":766,"original_h":255,"thumb_tiny":"AwAPADCsOlKKaGGOtLuA70wFpabvFJuFAC0Um4UbhQB//9k=","permalink":"https://julialang.slack.com/files/ULZQ4DCSU/F01JSUXGN2K/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01JSUXGN2K-5a7b67f48d","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"ULZQ4DCSU","display_as_bot":false,"ts":"1611110573.159900"},{"client_msg_id":"4a5496a5-337e-4181-9b70-d5a1e52a5f74","type":"message","text":"Could this be a bug?","user":"ULZQ4DCSU","ts":"1611110576.160300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Loe2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could this be a bug?"}]}]}]},{"client_msg_id":"02ef8cfc-4289-4352-bfd8-f4f168cefb68","type":"message","text":"The error is occurring for both plots.","user":"ULZQ4DCSU","ts":"1611110621.161000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DwbR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The error is occurring for both plots."}]}]}]},{"client_msg_id":"22d909df-7384-4401-99fc-a1d45caa8ace","type":"message","text":"how did you get a zero dimensional array?","user":"U69BL50BF","ts":"1611110874.161200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kSPTU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how did you get a zero dimensional array?"}]}]}]},{"client_msg_id":"52e459d9-3e52-449c-a430-d45dc8de3d39","type":"message","text":"track it down","user":"U69BL50BF","ts":"1611110886.161400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WFZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"track it down"}]}]}]},{"client_msg_id":"1f05a475-6c8f-4aad-9e72-30e815843921","type":"message","text":"like this?","user":"ULZQ4DCSU","ts":"1611111076.161600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+zR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"like this?"}]}]}]},{"type":"message","text":"","files":[{"id":"F01KLBVLCHF","created":1611111077,"timestamp":1611111077,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"ULZQ4DCSU","editable":false,"size":28995,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01KLBVLCHF/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01KLBVLCHF/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01KLBVLCHF-ff3e2052b7/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01KLBVLCHF-ff3e2052b7/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01KLBVLCHF-ff3e2052b7/image_360.png","thumb_360_w":360,"thumb_360_h":64,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01KLBVLCHF-ff3e2052b7/image_480.png","thumb_480_w":480,"thumb_480_h":85,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01KLBVLCHF-ff3e2052b7/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01KLBVLCHF-ff3e2052b7/image_720.png","thumb_720_w":720,"thumb_720_h":128,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01KLBVLCHF-ff3e2052b7/image_800.png","thumb_800_w":800,"thumb_800_h":142,"thumb_960":"https://files.slack.com/files-tmb/T68168MUP-F01KLBVLCHF-ff3e2052b7/image_960.png","thumb_960_w":960,"thumb_960_h":170,"thumb_1024":"https://files.slack.com/files-tmb/T68168MUP-F01KLBVLCHF-ff3e2052b7/image_1024.png","thumb_1024_w":1024,"thumb_1024_h":182,"original_w":1026,"original_h":182,"thumb_tiny":"AwAIADCp26UUdqKYBj2o49KKKAE49DR+FLSUAf/Z","permalink":"https://julialang.slack.com/files/ULZQ4DCSU/F01KLBVLCHF/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01KLBVLCHF-344ddacfba","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"ULZQ4DCSU","display_as_bot":false,"ts":"1611111079.161700"},{"client_msg_id":"47c6fba2-16a9-4222-a595-5775668020e7","type":"message","text":"did `typeof` for the first `sol` in `vGLCce(t)`","user":"ULZQ4DCSU","ts":"1611111119.162600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kIYZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"did "},{"type":"text","text":"typeof","style":{"code":true}},{"type":"text","text":" for the first "},{"type":"text","text":"sol","style":{"code":true}},{"type":"text","text":" in "},{"type":"text","text":"vGLCce(t)","style":{"code":true}}]}]}]},{"client_msg_id":"fd9f8d9b-5b42-40e9-8167-faf1c0fbab3c","type":"message","text":"can someone on top their head say how `PresetTimeCallback` better than ContinousCallback where I manually make it to trigger at some time points","user":"UR7P24FRC","ts":"1611112850.163300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dGF5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can someone on top their head say how "},{"type":"text","text":"PresetTimeCallback","style":{"code":true}},{"type":"text","text":" better than ContinousCallback where I manually make it to trigger at some time points"}]}]}]},{"client_msg_id":"07471eca-64fb-41df-88e6-4f981e690cea","type":"message","text":"assuming that the callbacks are very frequent (every 10steps?) do you think there would be a big performance boost?","user":"UR7P24FRC","ts":"1611112881.163900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oiBeF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"assuming that the callbacks are very frequent (every 10steps?) do you think there would be a big performance boost?"}]}]}],"thread_ts":"1611112881.163900","reply_count":4,"reply_users_count":3,"latest_reply":"1611156665.179200","reply_users":["U01H36BUDJB","U9MD78Z9N","U69BL50BF"],"subscribed":false},{"client_msg_id":"fbf00f6a-b941-4c94-89d7-53be4d43d7b4","type":"message","text":"Hi, I'm running a programming contest for a numerics course where students can submit their programs and it then runs them. As part of one of the challenges, I'm providing a function that essentially solves an ODE simulating some simple orbital mechanics. Now I've noticed that it seems like it is giving ever so slightly different results accross the same version of OrdinaryDiffEq but when using a different julia version. I'm using the Tsit5() solver with automatic timestepping. What could be causing something like this?","user":"U81CQL3LY","ts":"1611146532.165600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8UV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi, I'm running a programming contest for a numerics course where students can submit their programs and it then runs them. As part of one of the challenges, I'm providing a function that essentially solves an ODE simulating some simple orbital mechanics. Now I've noticed that it seems like it is giving ever so slightly different results accross the same version of OrdinaryDiffEq but when using a different julia version. I'm using the Tsit5() solver with automatic timestepping. What could be causing something like this?"}]}]}]},{"client_msg_id":"3924f0d6-c1fa-4b67-82af-f5a90211e683","type":"message","text":"Huh, it's even weirder: it seems like using exactly the same machine with exactly the same steps (install OrdinaryDiffEq, run same code) gives different results","user":"U81CQL3LY","ts":"1611148246.167200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JgE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Huh, it's even weirder: it seems like using exactly the same machine with exactly the same steps (install OrdinaryDiffEq, run same code) gives different results"}]}]}],"thread_ts":"1611148246.167200","reply_count":2,"reply_users_count":2,"latest_reply":"1611150043.170300","reply_users":["U6QF223TN","U81CQL3LY"],"subscribed":false},{"client_msg_id":"a839c531-de0a-4a33-8f6e-a7a3dcdb0960","type":"message","text":"also with fresh runs? (Could there be something re-assigned to different values, e.g., by a mutation?)","user":"UR75SQMCZ","ts":"1611148388.168200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zb=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"also with fresh runs? (Could there be something re-assigned to different values, e.g., by a mutation?)"}]}]}]},{"client_msg_id":"2800c459-5190-4910-bb45-ff88fc20f7cd","type":"message","text":"yes, completely fresh runs. I installed julia nightly + OrdinaryDiffEq + PlotlyJS (needed by my script) on a machine, and then immediately ran the script. I get two different results for each time","user":"U81CQL3LY","ts":"1611148822.169100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eL6u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, completely fresh runs. I installed julia nightly + OrdinaryDiffEq + PlotlyJS (needed by my script) on a machine, and then immediately ran the script. I get two different results for each time"}]}]}]},{"type":"message","text":"Here is a script where when I run it one one machine I get 15.118892114745185 and 14.6911962414663 on the other","files":[{"id":"F01K2KKJ9AA","mode":"tombstone"}],"upload":false,"blocks":[{"type":"rich_text","block_id":"avk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here is a script where when I run it one one machine I get 15.118892114745185 and 14.6911962414663 on the other"}]}]}],"user":"U81CQL3LY","display_as_bot":false,"ts":"1611149083.170000"},{"type":"message","text":"Here is a minimal non-working example, I'll try and simplify it also further","files":[{"id":"F01K6E6TM37","created":1611151047,"timestamp":1611151047,"name":"mwe.jl","title":"mwe.jl","mimetype":"text/plain","filetype":"text","pretty_type":"Plain Text","user":"U81CQL3LY","editable":true,"size":1510,"mode":"snippet","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01K6E6TM37/mwe.jl","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01K6E6TM37/download/mwe.jl","permalink":"https://julialang.slack.com/files/U81CQL3LY/F01K6E6TM37/mwe.jl","permalink_public":"https://slack-files.com/T68168MUP-F01K6E6TM37-6c42f1225a","edit_link":"https://julialang.slack.com/files/U81CQL3LY/F01K6E6TM37/mwe.jl/edit","preview":"using LinearAlgebra, OrdinaryDiffEq\n#using Plots\n\nfunction moon_pos(t,start_x,speed)\n        return [start_x - t*speed, 10.0]","preview_highlight":"<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>using LinearAlgebra, OrdinaryDiffEq</pre></div>\n<div><pre>#using Plots</pre></div>\n<div><pre></pre></div>\n<div><pre>function moon_pos(t,start_x,speed)</pre></div>\n<div><pre>        return [start_x - t*speed, 10.0]</pre></div>\n</div>\n</div>\n","lines":48,"lines_more":43,"preview_is_truncated":true,"is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"wEqV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here is a minimal non-working example, I'll try and simplify it also further"}]}]}],"user":"U81CQL3LY","display_as_bot":false,"ts":"1611151069.171100"},{"client_msg_id":"69760694-cb9e-42c4-b3b9-cc0f52a3f8f0","type":"message","text":"Choosing a solver other than Tsit5() (I tested BS5()) gives identical results accross machines, so it might be a Tsit5() specific problem","user":"U81CQL3LY","ts":"1611151290.172100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GDtc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Choosing a solver other than Tsit5() (I tested BS5()) gives identical results accross machines, so it might be a Tsit5() specific problem"}]}]}]},{"client_msg_id":"ced4890a-89c2-4882-b92f-58e08097dc3d","type":"message","text":"Does this mean that the issue is in the error estimate? So maybe checking what happens with `adaptive=false` could give a hint.","user":"UR75SQMCZ","ts":"1611152047.175000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v8re","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does this mean that the issue is in the error estimate? So maybe checking what happens with "},{"type":"text","text":"adaptive=false","style":{"code":true}},{"type":"text","text":" could give a hint."}]}]}]},{"client_msg_id":"25eab693-0c1a-4052-8238-f26206cd2937","type":"message","text":"It might just be tiny floating point differences that lead to different time stepping behaviour? I've never seen any differences between different Julia versions (IIRC) but we observe them a lot for different architectures in e.g. DelayDiffEq (all differences in ODEs multiply in the DDE solver) so that we had to relax tests and/or add special cases for certain architectures a lot.","user":"U8T9JUA5R","ts":"1611152134.176600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+or=n","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It might just be tiny floating point differences that lead to different time stepping behaviour? I've never seen any differences between different Julia versions (IIRC) but we observe them a lot for different architectures in e.g. DelayDiffEq (all differences in ODEs multiply in the DDE solver) so that we had to relax tests and/or add special cases for certain architectures a lot."}]}]}]},{"client_msg_id":"6197a86e-1f58-4cbd-97be-738ed8a4f00e","type":"message","text":"It could be, but I'm still surprised - shouldn't IEEE754 lead to determinstic floating point beaviour?","user":"U81CQL3LY","ts":"1611152265.177100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=v9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It could be, but I'm still surprised - shouldn't IEEE754 lead to determinstic floating point beaviour?"}]}]}]},{"client_msg_id":"ca49028d-adf0-43f4-93c1-45a40981aaf4","type":"message","text":"not really","user":"U69BL50BF","ts":"1611153620.177300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6vfX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not really"}]}]}]},{"client_msg_id":"f39d73f8-ebd8-4d6e-a4b4-efe29d2eee53","type":"message","text":"because the amount of SIMD changes results","user":"U69BL50BF","ts":"1611153629.177600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"n32om","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"because the amount of SIMD changes results"}]}]}]}]}