{"cursor": 4, "messages": [{"client_msg_id":"9cb9e70f-dfdd-432e-b6cc-939657c05ed5","type":"message","text":"collocation methods get a banded matrix unless it's a multi-point","user":"U69BL50BF","ts":"1609950418.237000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pUqb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"collocation methods get a banded matrix unless it's a multi-point"}]}]}]},{"client_msg_id":"46734296-f482-47fe-ab85-21b5ef8cc789","type":"message","text":"in which case you get a sparse matrix","user":"U69BL50BF","ts":"1609950423.237200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+BJg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in which case you get a sparse matrix"}]}]}]},{"client_msg_id":"c60514c3-e717-4c17-ad6d-f842e1e3a6d6","type":"message","text":"MIRK4 already has the banded specializations, but it's just not adaptive.","user":"U69BL50BF","ts":"1609950443.237900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2SM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"MIRK4 already has the banded specializations, but it's just not adaptive."}]}]}]},{"client_msg_id":"b365587b-748d-4ade-9437-f892a90110ef","type":"message","text":"the adaptivity is pretty trivial, we just haven't done it.","user":"U69BL50BF","ts":"1609950452.238400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"b8ud","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the adaptivity is pretty trivial, we just haven't done it."}]}]}]},{"client_msg_id":"44787ac8-67cd-485f-9ee6-956f50804f3d","type":"message","text":"it would be a great GSoC for this summer though...","user":"U69BL50BF","ts":"1609950485.238800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4Mwm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it would be a great GSoC for this summer though..."}]}]}],"thread_ts":"1609950485.238800","reply_count":1,"reply_users_count":1,"latest_reply":"1609950736.241300","reply_users":["U7GQE9JP9"],"subscribed":false},{"client_msg_id":"6ac51858-a2b7-4dda-9aac-8243a8095218","type":"message","text":"well, I developped a lot of linear algebra to make trapeze scale well and I feel it wont do good to increase the order (i may be wrong). In bifurcation theory, collocation is a bottleneck for computing periodic orbits in large dimensions, that’s why there are not so many codes for bifurcation theory and PDE","user":"U7GQE9JP9","ts":"1609950547.239900","team":"T68168MUP","edited":{"user":"U7GQE9JP9","ts":"1609950581.000000"},"blocks":[{"type":"rich_text","block_id":"Zqvpa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, I developped a lot of linear algebra to make trapeze scale well and I feel it wont do good to increase the order (i may be wrong). In bifurcation theory, collocation is a bottleneck for computing periodic orbits in large dimensions, that’s why there are not so many codes for bifurcation theory and PDE"}]}]}]},{"client_msg_id":"6ae0aa89-94e6-41a4-992d-3b8d4ff3bd8b","type":"message","text":"Would ApproxFun work?","user":"U6788D83U","ts":"1609950566.240400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tU3j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Would ApproxFun work?"}]}]}]},{"client_msg_id":"48c7b3b7-d280-4470-ae1e-2ba9ad010ba4","type":"message","text":"way slower","user":"U7GQE9JP9","ts":"1609950590.240700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sf/v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"way slower"}]}]}]},{"client_msg_id":"96e3a856-88f7-4be3-9390-fc4770dd219a","type":"message","text":"believe me, I wish it is not :smile: . Actually, I am talking about periodic orbits, so the BVP is a bit special. You have to desingularise it a phase condition\n\nTrixi seems very appealing with AMR","user":"U7GQE9JP9","ts":"1609950620.241200","team":"T68168MUP","edited":{"user":"U7GQE9JP9","ts":"1609950803.000000"},"blocks":[{"type":"rich_text","block_id":"+iO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"believe me, I wish it is not "},{"type":"emoji","name":"smile"},{"type":"text","text":" . Actually, I am talking about periodic orbits, so the BVP is a bit special. You have to desingularise it a phase condition\n\nTrixi seems very appealing with AMR"}]}]}]},{"client_msg_id":"3f35c15a-1c48-4684-9713-f6bc70a7954f","type":"message","text":"Hello, I’m getting some weird behavior with solving a differential equation in which the current time `t` seems to step forward and then step back and get stuck at `t = 0` is there any reason why this could happen? The code is too unwieldy for me to give a small working example.","user":"UFH4C3LBT","ts":"1609957159.245200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e07M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hello, I’m getting some weird behavior with solving a differential equation in which the current time "},{"type":"text","text":"t","style":{"code":true}},{"type":"text","text":" seems to step forward and then step back and get stuck at "},{"type":"text","text":"t = 0","style":{"code":true}},{"type":"text","text":" is there any reason why this could happen? The code is too unwieldy for me to give a small working example."}]}]}]},{"client_msg_id":"ac4c2dd7-ec29-4bce-9a82-f5c93228fe59","type":"message","text":"I have some debugging output:\n```(t, focalCN, inflow, outflow, u[focal...]) = (Dual{ForwardDiff.Tag{DiffEqBase.TimeGradientWrapper{ODEFunction{true,typeof(ploidyModel),UniformScaling{Bool},Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing},Array{Float64,5},Tuple{Main.PolyharmonicInterpolation.PolyharmonicInterpolator,Int64,Array{StepRangeLen{Float64,Base.TwicePrecision{Float64},Base.TwicePrecision{Float64}},1},Float64,Float64}},Float64}}(0.0,1.0), [3.0, 2.0, 2.0, 2.0, 2.0], 0.03529825592368553, 0.0, 0.0)```\nWhere `t` is time, `focalCN` is an array related to `focal` which is the cartesian coordinate for elements of the tensor `u` and `inflow` , `outflow` are values calculated in other functions. Before it breaks it does have normal output:\n```(t, focalCN, inflow, outflow, u[focal...]) = (8.956967086286162e-5, [1.0, 2.0, 2.0, 2.0, 3.0], 2.208442550031631e-8, 0.0, 0.0)```","user":"UFH4C3LBT","ts":"1609957472.247000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zOpk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have some debugging output:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"(t, focalCN, inflow, outflow, u[focal...]) = (Dual{ForwardDiff.Tag{DiffEqBase.TimeGradientWrapper{ODEFunction{true,typeof(ploidyModel),UniformScaling{Bool},Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing,Nothing},Array{Float64,5},Tuple{Main.PolyharmonicInterpolation.PolyharmonicInterpolator,Int64,Array{StepRangeLen{Float64,Base.TwicePrecision{Float64},Base.TwicePrecision{Float64}},1},Float64,Float64}},Float64}}(0.0,1.0), [3.0, 2.0, 2.0, 2.0, 2.0], 0.03529825592368553, 0.0, 0.0)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Where "},{"type":"text","text":"t","style":{"code":true}},{"type":"text","text":" is time, "},{"type":"text","text":"focalCN","style":{"code":true}},{"type":"text","text":" is an array related to "},{"type":"text","text":"focal","style":{"code":true}},{"type":"text","text":" which is the cartesian coordinate for elements of the tensor "},{"type":"text","text":"u","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"inflow","style":{"code":true}},{"type":"text","text":" , "},{"type":"text","text":"outflow","style":{"code":true}},{"type":"text","text":" are values calculated in other functions. Before it breaks it does have normal output:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"(t, focalCN, inflow, outflow, u[focal...]) = (8.956967086286162e-5, [1.0, 2.0, 2.0, 2.0, 3.0], 2.208442550031631e-8, 0.0, 0.0)"}]}]}]},{"client_msg_id":"e25a89d2-89ad-4d8d-986f-43dc7deecb08","type":"message","text":"<@U69BL50BF> is there something that can cause the solver to restart and get caught in a loop?","user":"UFH4C3LBT","ts":"1609960612.247400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zEXB","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" is there something that can cause the solver to restart and get caught in a loop?"}]}]}]},{"client_msg_id":"075070F7-C739-445A-A69E-23778D61C9D5","type":"message","text":"That’s a very general question. Have you tried to decrease maxiters and see if the solve was taking very small time steps?","user":"U6788D83U","ts":"1609961674.249200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2Ti","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That’s a very general question. Have you tried to decrease maxiters and see if the solve was taking very small time steps?"}]}]}]},{"client_msg_id":"21928E4B-AB4F-43FE-90F2-DA0231D43520","type":"message","text":"Is your problem stiff? Maybe you want to use a stiff solver","user":"U6788D83U","ts":"1609961710.250100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yc=N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is your problem stiff? Maybe you want to use a stiff solver"}]}]}]},{"client_msg_id":"ebde35fd-b638-4215-8278-c74fb2d483d7","type":"message","text":"I didn’t know the steps cause it to go backward in time though","user":"UFH4C3LBT","ts":"1609961993.250500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"flo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I didn’t know the steps cause it to go backward in time though"}]}]}]},{"client_msg_id":"e2992c34-e86e-471a-ba8e-46b8af17d426","type":"message","text":"I will try implementing and get back to you. I have no reason to expect stiffness. It is just a gigantic birth-death process with movement between the compartments (elements of the tensor) via so rate.","user":"UFH4C3LBT","ts":"1609962033.251400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/uh8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I will try implementing and get back to you. I have no reason to expect stiffness. It is just a gigantic birth-death process with movement between the compartments (elements of the tensor) via so rate."}]}]}]},{"client_msg_id":"d8d8ebb8-d29d-4ca0-bab4-8bfed76a6aa0","type":"message","text":"So I don’t expect separation of time scales.","user":"UFH4C3LBT","ts":"1609962058.251900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y/ne","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So I don’t expect separation of time scales."}]}]}]},{"client_msg_id":"74bfefbc-fade-4b56-9383-6c1257dd26cc","type":"message","text":"Is there any hint as to what broke that caused the output above to print that info rather than the numbers from the normal output?","user":"UFH4C3LBT","ts":"1609962169.252500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4V2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there any hint as to what broke that caused the output above to print that info rather than the numbers from the normal output?"}]}]}]},{"client_msg_id":"a7457804-e9dc-4252-b6c2-27d6da6afa99","type":"message","text":"The solver never steps backwards. It could reject steps though, so when you print `t` in the derivative function, you can see `t` decreases.","user":"U6788D83U","ts":"1609963237.254100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xNbR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The solver never steps backwards. It could reject steps though, so when you print "},{"type":"text","text":"t","style":{"code":true}},{"type":"text","text":" in the derivative function, you can see "},{"type":"text","text":"t","style":{"code":true}},{"type":"text","text":" decreases."}]}]}]},{"client_msg_id":"ae4296df-cefd-4f0d-8cc7-a2699198a4e4","type":"message","text":"Ahhh. Thanks <@U6788D83U>, makes sense. I will play around with it some more.","user":"UFH4C3LBT","ts":"1609964645.254500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j6SIw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ahhh. Thanks "},{"type":"user","user_id":"U6788D83U"},{"type":"text","text":", makes sense. I will play around with it some more."}]}]}]},{"client_msg_id":"389c8809-e8fd-4661-81e0-0ee44745d802","type":"message","text":"<@UFH4C3LBT> do you have a discontinuity at that time?","user":"U69BL50BF","ts":"1609964915.254800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cy/gY","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UFH4C3LBT"},{"type":"text","text":" do you have a discontinuity at that time?"}]}]}]},{"client_msg_id":"5e9ef590-5b9e-4689-af64-0da999f45011","type":"message","text":"Not that I am aware. The equation is of the form of a birth-death process with movement between compartments via the tensor q (the indices `i` are a vector `i = (i1,i2,…,i5)`\n```u_i' = \\sum_j (r_j q_{ji} u_j) - r_i u_i(1 - q_{ii}) - d_i u_i```\n`d_i` is constant right now, but all other parameters are given by functions","user":"UFH4C3LBT","ts":"1609965088.257600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=Qg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not that I am aware. The equation is of the form of a birth-death process with movement between compartments via the tensor q (the indices "},{"type":"text","text":"i","style":{"code":true}},{"type":"text","text":" are a vector "},{"type":"text","text":"i = (i1,i2,…,i5)","style":{"code":true}},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"u_i' = \\sum_j (r_j q_{ji} u_j) - r_i u_i(1 - q_{ii}) - d_i u_i"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"d_i","style":{"code":true}},{"type":"text","text":" is constant right now, but all other parameters are given by functions"}]}]}]},{"client_msg_id":"d699d7e3-12ee-4d4b-85bb-008ceb747db8","type":"message","text":"I had problems with Rodas, but Tsit5 seems to be working at this point. The total number of compartments is big (&gt;3000)","user":"UFH4C3LBT","ts":"1609965244.258300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HyD2E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I had problems with Rodas, but Tsit5 seems to be working at this point. The total number of compartments is big (>3000)"}]}]}]},{"client_msg_id":"98021180-4910-4a98-b51e-1a0e9d533417","type":"message","text":"<@U69BL50BF> or <@U6788D83U> Can you please help me see the jacobian of the BVP? I want to see its shape. I am almost there but I am getting lost in your constructs\n\n```using Revise\nusing BoundaryValueDiffEq\nusing  ForwardDiff\nconst FD = ForwardDiff\n\nconst g = 9.81\nL = 1.0\ntspan = (0.0,pi/2)\nfunction simplependulum!(du,u,p,t)\n    θ  = u[1]\n    dθ = u[2]\n    du[1] = dθ\n    du[2] = -(g/L)*sin(θ)\nend\n\nfunction bc1!(residual, u, p, t)\n    residual[1] = u[end÷2][1] + pi/2 # the solution at the middle of the time span should be -pi/2\n    residual[2] = u[end][1] - pi/2 # the solution at the end of the time span should be pi/2\nend\nbvp1 = BVProblem(simplependulum!, bc1!, [pi/2,pi/2], tspan)\nsol1 = solve(bvp1, GeneralMIRK4(), dt=0.05)\n\n\nimport BoundaryValueDiffEq: BVPSystem, constructMIRK, alg_cache, BVPJacobianWrapper, ConstructJacobian\nfunction getJac(prob::BVProblem, alg; dt=0.0, kwargs...)\n    if dt&lt;=0\n        error(\"dt must be positive\")\n    end\n    n = Int(cld((prob.tspan[2]-prob.tspan[1]),dt))\n    x = collect(range(prob.tspan[1], stop=prob.tspan[2], length=n+1))\n    S = BVPSystem(prob.f, prob.bc, prob.p, x, length(prob.u0), 4)\n    if isa(prob.u0, Vector{&lt;:Number})\n        copyto!.(S.y, (prob.u0,))\n    elseif isa(prob.u0, Vector{&lt;:AbstractArray})\n        copyto!(S.y, prob.u0)\n    else\n        error(\"u0 must be a Vector or Vector of Arrays\")\n    end\n    tableau = constructMIRK(S)\n    cache = alg_cache(alg, S)\n    # Upper-level iteration\n    vec_y = Array{eltype(S.y[1])}(undef, S.M*S.N)              # Vector\n    reorder! = function (resid)\n        # reorder the Jacobian matrix such that it is banded\n        tmp_last = resid[end]\n        for i in (length(resid)-1):-1:1\n            resid[i+1] = resid[i]\n        end\n        resid[1], resid[end] = resid[end], tmp_last\n    end\n    loss = function (resid, minimizer)\n        nest_vector!(S.y, minimizer)\n        Φ!(S, tableau, cache)\n        isa(prob.problem_type, TwoPointBVProblem) ? eval_bc_residual!(S) : general_eval_bc_residual!(S)\n        flatten_vector!(resid, S.residual)\n        reorder!(resid)\n        nothing\n    end\n\n    jac_wrapper = BVPJacobianWrapper(loss)\n    ConstructJacobian(jac_wrapper, vec_y)\nend\n    jac = getJac(bvp1, GeneralMIRK4(), dt=0.05)```","user":"U7GQE9JP9","ts":"1609965821.259200","team":"T68168MUP","edited":{"user":"U7GQE9JP9","ts":"1609965865.000000"},"blocks":[{"type":"rich_text","block_id":"9Cgc","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" or "},{"type":"user","user_id":"U6788D83U"},{"type":"text","text":" Can you please help me see the jacobian of the BVP? I want to see its shape. I am almost there but I am getting lost in your constructs\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Revise\nusing BoundaryValueDiffEq\nusing  ForwardDiff\nconst FD = ForwardDiff\n\nconst g = 9.81\nL = 1.0\ntspan = (0.0,pi/2)\nfunction simplependulum!(du,u,p,t)\n    θ  = u[1]\n    dθ = u[2]\n    du[1] = dθ\n    du[2] = -(g/L)*sin(θ)\nend\n\nfunction bc1!(residual, u, p, t)\n    residual[1] = u[end÷2][1] + pi/2 # the solution at the middle of the time span should be -pi/2\n    residual[2] = u[end][1] - pi/2 # the solution at the end of the time span should be pi/2\nend\nbvp1 = BVProblem(simplependulum!, bc1!, [pi/2,pi/2], tspan)\nsol1 = solve(bvp1, GeneralMIRK4(), dt=0.05)\n\n\nimport BoundaryValueDiffEq: BVPSystem, constructMIRK, alg_cache, BVPJacobianWrapper, ConstructJacobian\nfunction getJac(prob::BVProblem, alg; dt=0.0, kwargs...)\n    if dt<=0\n        error(\"dt must be positive\")\n    end\n    n = Int(cld((prob.tspan[2]-prob.tspan[1]),dt))\n    x = collect(range(prob.tspan[1], stop=prob.tspan[2], length=n+1))\n    S = BVPSystem(prob.f, prob.bc, prob.p, x, length(prob.u0), 4)\n    if isa(prob.u0, Vector{<:Number})\n        copyto!.(S.y, (prob.u0,))\n    elseif isa(prob.u0, Vector{<:AbstractArray})\n        copyto!(S.y, prob.u0)\n    else\n        error(\"u0 must be a Vector or Vector of Arrays\")\n    end\n    tableau = constructMIRK(S)\n    cache = alg_cache(alg, S)\n    # Upper-level iteration\n    vec_y = Array{eltype(S.y[1])}(undef, S.M*S.N)              # Vector\n    reorder! = function (resid)\n        # reorder the Jacobian matrix such that it is banded\n        tmp_last = resid[end]\n        for i in (length(resid)-1):-1:1\n            resid[i+1] = resid[i]\n        end\n        resid[1], resid[end] = resid[end], tmp_last\n    end\n    loss = function (resid, minimizer)\n        nest_vector!(S.y, minimizer)\n        Φ!(S, tableau, cache)\n        isa(prob.problem_type, TwoPointBVProblem) ? eval_bc_residual!(S) : general_eval_bc_residual!(S)\n        flatten_vector!(resid, S.residual)\n        reorder!(resid)\n        nothing\n    end\n\n    jac_wrapper = BVPJacobianWrapper(loss)\n    ConstructJacobian(jac_wrapper, vec_y)\nend\n    jac = getJac(bvp1, GeneralMIRK4(), dt=0.05)"}]}]}]},{"client_msg_id":"2397ecc2-6a49-469b-9405-751028b3cf10","type":"message","text":"Which part do you need help for?","user":"U6788D83U","ts":"1609966413.259900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wDC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Which part do you need help for?"}]}]}]},{"client_msg_id":"03a59ca3-c723-4040-ba71-b2b4654ccec9","type":"message","text":"I want the jacobian. of the residual","user":"U7GQE9JP9","ts":"1609966546.260300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mxvI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I want the jacobian. of the residual"}]}]}]},{"client_msg_id":"64b0c7cd-01ca-4688-94ab-137adcd7f9b6","type":"message","text":"I extracted some of your code","user":"U7GQE9JP9","ts":"1609966563.260600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hR+Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I extracted some of your code"}]}]}]},{"client_msg_id":"5dab69ff-8d6b-4125-8110-e3ba7d378560","type":"message","text":"Try\n```julia&gt; import BoundaryValueDiffEq: BVPSystem, constructMIRK, alg_cache, BVPJacobianWrapper, ConstructJacobian, nest_vector!, Φ!, general_eval_bc_residual!, flatten_vector!\n\njulia&gt; jac = getJac(bvp1, GeneralMIRK4(), dt=0.05);\n\njulia&gt; jac.df(jac.DF, ones(66));```","user":"U6788D83U","ts":"1609966815.260800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZhC7s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Try\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> import BoundaryValueDiffEq: BVPSystem, constructMIRK, alg_cache, BVPJacobianWrapper, ConstructJacobian, nest_vector!, Φ!, general_eval_bc_residual!, flatten_vector!\n\njulia> jac = getJac(bvp1, GeneralMIRK4(), dt=0.05);\n\njulia> jac.df(jac.DF, ones(66));"}]}]}]},{"client_msg_id":"fd8b3011-1e4e-4833-b1c0-0d6c7f7593fc","type":"message","text":"The Jacobian will be in `jac.DF`","user":"U6788D83U","ts":"1609966824.261100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bM7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The Jacobian will be in "},{"type":"text","text":"jac.DF","style":{"code":true}}]}]}]},{"client_msg_id":"bc65b41a-24d9-43a6-ad4a-4b02ceb89f5f","type":"message","text":"Thank you!\nSo it seems to be band by blocks with bandwidth 4 as intuited","user":"U7GQE9JP9","ts":"1609967076.261900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"77W","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you!\nSo it seems to be band by blocks with bandwidth 4 as intuited"}]}]}]},{"client_msg_id":"ee94b658-2db1-41bf-a38a-086834cbcd31","type":"message","text":"Yeah, I never quite finish making it take advantage of the banded structure.","user":"U6788D83U","ts":"1609967127.262800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vMD+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, I never quite finish making it take advantage of the banded structure."}]}]}]},{"client_msg_id":"0e3ec93e-93c2-4016-94ac-19976fbd4813","type":"message","text":"the first. line is bc?","user":"U7GQE9JP9","ts":"1609967148.263000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l6tw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the first. line is bc?"}]}]}]},{"type":"message","text":"","files":[{"id":"F01J1ULR5HT","created":1609967166,"timestamp":1609967166,"name":"Screen Shot 2021-01-06 at 22.06.03.png","title":"Screen Shot 2021-01-06 at 22.06.03.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U7GQE9JP9","editable":false,"size":68727,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01J1ULR5HT/screen_shot_2021-01-06_at_22.06.03.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01J1ULR5HT/download/screen_shot_2021-01-06_at_22.06.03.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01J1ULR5HT-d3f6279a2e/screen_shot_2021-01-06_at_22.06.03_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01J1ULR5HT-d3f6279a2e/screen_shot_2021-01-06_at_22.06.03_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01J1ULR5HT-d3f6279a2e/screen_shot_2021-01-06_at_22.06.03_360.png","thumb_360_w":360,"thumb_360_h":236,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01J1ULR5HT-d3f6279a2e/screen_shot_2021-01-06_at_22.06.03_480.png","thumb_480_w":480,"thumb_480_h":314,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01J1ULR5HT-d3f6279a2e/screen_shot_2021-01-06_at_22.06.03_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01J1ULR5HT-d3f6279a2e/screen_shot_2021-01-06_at_22.06.03_720.png","thumb_720_w":720,"thumb_720_h":471,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01J1ULR5HT-d3f6279a2e/screen_shot_2021-01-06_at_22.06.03_800.png","thumb_800_w":800,"thumb_800_h":524,"thumb_960":"https://files.slack.com/files-tmb/T68168MUP-F01J1ULR5HT-d3f6279a2e/screen_shot_2021-01-06_at_22.06.03_960.png","thumb_960_w":960,"thumb_960_h":629,"thumb_1024":"https://files.slack.com/files-tmb/T68168MUP-F01J1ULR5HT-d3f6279a2e/screen_shot_2021-01-06_at_22.06.03_1024.png","thumb_1024_w":1024,"thumb_1024_h":671,"original_w":1124,"original_h":736,"thumb_tiny":"AwAfADCS7dlnOCQMDjNQ736h2/Opbz/X/gKgpGy2HeY/99vzo3v/AH2/Om9fY0UDHb3/AL7fnVu1YmMBjnk9TVKrVofuD/e/pQTLYZef6/8AAVBVy5t5JJdygEY9ah+yy4zgfnQCasQ0Z9am+yy56D86PssvoPzoHdENWbU/On0b+lM+yygZwMfWp4YHSRCRgANnn1xQiZPQ/9k=","permalink":"https://julialang.slack.com/files/U7GQE9JP9/F01J1ULR5HT/screen_shot_2021-01-06_at_22.06.03.png","permalink_public":"https://slack-files.com/T68168MUP-F01J1ULR5HT-d0e2be8caa","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"U7GQE9JP9","display_as_bot":false,"ts":"1609967169.263200"},{"client_msg_id":"ba4c2cc8-992c-4ec4-b079-d56298f13c16","type":"message","text":"I cannot remember :stuck_out_tongue: yeah, sounds like it","user":"U6788D83U","ts":"1609967181.263700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y0X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I cannot remember "},{"type":"emoji","name":"stuck_out_tongue"},{"type":"text","text":" yeah, sounds like it"}]}]}]},{"client_msg_id":"7fd9aa33-9bee-48f9-a5dc-683b12cff939","type":"message","text":"It’s a almost banded structure.","user":"U6788D83U","ts":"1609967191.264000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f2i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It’s a almost banded structure."}]}]}]},{"client_msg_id":"6640d6a1-11d9-4cc2-8bf1-2b074a9c0c42","type":"message","text":"ApproxFun solves the linalg problem property though","user":"U6788D83U","ts":"1609967211.264400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JQue","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ApproxFun solves the linalg problem property though"}]}]}]},{"client_msg_id":"ae9542e4-cb19-40fe-b4dc-b4bd77ad6e3d","type":"message","text":"I know but slowly","user":"U7GQE9JP9","ts":"1609967224.264800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zui","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I know but slowly"}]}]}]},{"client_msg_id":"54dd482c-89c9-44fe-ad3f-b6939d720025","type":"message","text":"Maybe you can hack into it to disable the adaptation","user":"U6788D83U","ts":"1609967247.265300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"n5hW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe you can hack into it to disable the adaptation"}]}]}]},{"client_msg_id":"0e913030-6707-4f6d-9b25-610605eb6efd","type":"message","text":"nan","user":"U7GQE9JP9","ts":"1609967260.265600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pV29","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"nan"}]}]}]},{"client_msg_id":"1dbf40ff-d284-4fc6-aa29-13514c0ed45e","type":"message","text":"Or to build a fix-sized operator yourself","user":"U6788D83U","ts":"1609967278.266300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"H0ZMi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or to build a fix-sized operator yourself"}]}]}]},{"client_msg_id":"6731bedd-bef4-4e21-ba27-ed8322c90943","type":"message","text":"look at. all the tricks I had to find. for trapeze method:\n<https://github.com/rveltz/BifurcationKit.jl/blob/master/src/periodicorbit/PeriodicOrbitFD.jl>","user":"U7GQE9JP9","ts":"1609967285.266600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wZ5Gt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"look at. all the tricks I had to find. for trapeze method:\n"},{"type":"link","url":"https://github.com/rveltz/BifurcationKit.jl/blob/master/src/periodicorbit/PeriodicOrbitFD.jl"}]}]}]},{"client_msg_id":"a268823a-97f0-42aa-92ec-df8dabcc631b","type":"message","text":"then you can. use 1e5 unknowns in space","user":"U7GQE9JP9","ts":"1609967308.267000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ROII","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"then you can. use 1e5 unknowns in space"}]}]}]},{"client_msg_id":"9f084c46-6fce-4df5-b92e-b707b77eba49","type":"message","text":"I think it won’t be that hard to use ApproxFun to generate a fix-size operator if your ODE is linear.","user":"U6788D83U","ts":"1609967434.268400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YQi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think it won’t be that hard to use ApproxFun to generate a fix-size operator if your ODE is linear."}]}]}]},{"client_msg_id":"8f977b2b-8660-45ce-adbe-39b84aa76a23","type":"message","text":"it has to be. really tailored to work in large dim","user":"U7GQE9JP9","ts":"1609967437.268600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Iidd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it has to be. really tailored to work in large dim"}]}]}]},{"client_msg_id":"d1e23886-996f-483f-9237-e614443625f8","type":"message","text":"for the complex ginzburg landau, you cannot even use LU, see :","user":"U7GQE9JP9","ts":"1609967496.269100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mNeYx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for the complex ginzburg landau, you cannot even use LU, see :"}]}]}]},{"client_msg_id":"f72d0a0c-b699-4caa-b1c9-d80b2cdbe5b0","type":"message","text":"<https://rveltz.github.io/BifurcationKit.jl/dev/tutorialsCGL/#Complex-Ginzburg-Landau-2d-1>","user":"U7GQE9JP9","ts":"1609967522.269300","team":"T68168MUP","edited":{"user":"U7GQE9JP9","ts":"1609967558.000000"},"blocks":[{"type":"rich_text","block_id":"f/K00","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://rveltz.github.io/BifurcationKit.jl/dev/tutorialsCGL/#Complex-Ginzburg-Landau-2d-1"}]}]}]},{"client_msg_id":"a6ecd8fd-9eee-41a1-bb86-d002b2ddb821","type":"message","text":"around the red box","user":"U7GQE9JP9","ts":"1609967532.269500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i5Mj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"around the red box"}]}]}]},{"client_msg_id":"520adbb6-8492-423c-bf61-70f46c7d4cc4","type":"message","text":"I am happy to be proven wrong though","user":"U7GQE9JP9","ts":"1609967573.270000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u8lzM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am happy to be proven wrong though"}]}]}]},{"client_msg_id":"83388de8-bfaf-4afd-bc7f-910b74b392a6","type":"message","text":"Is that when using a banded matrix?","user":"U6788D83U","ts":"1609967628.270400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"atzJz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is that when using a banded matrix?"}]}]}]},{"client_msg_id":"ad7de80a-9502-43ab-a2be-28a916def2c8","type":"message","text":"it is for trapeze method","user":"U7GQE9JP9","ts":"1609967641.270700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RZzK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is for trapeze method"}]}]}]},{"client_msg_id":"53ac0949-c440-443e-a6ea-9ee9425ad774","type":"message","text":"so yes banded","user":"U7GQE9JP9","ts":"1609967647.270900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LxwEe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so yes banded"}]}]}]},{"client_msg_id":"925802fc-81ad-4e0c-a7d3-f9c3c15fbcff","type":"message","text":"block banded","user":"U7GQE9JP9","ts":"1609967653.271100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MiH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"block banded"}]}]}]},{"client_msg_id":"b2ee03c1-b882-400a-b3f1-b13e8cd2767a","type":"message","text":"<https://rveltz.github.io/BifurcationKit.jl/dev/periodicOrbitFD/>","user":"U7GQE9JP9","ts":"1609967684.271300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"R4v","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://rveltz.github.io/BifurcationKit.jl/dev/periodicOrbitFD/"}]}]}]},{"client_msg_id":"0b5ef2f8-ebaf-4300-adf8-67d25ce0cd36","type":"message","text":"Have you tried <https://github.com/JuliaMatrices/BlockBandedMatrices.jl> ? There’s currently no LU factorization though, there’s only QR","user":"U6788D83U","ts":"1609967772.271900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3l/G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Have you tried "},{"type":"link","url":"https://github.com/JuliaMatrices/BlockBandedMatrices.jl"},{"type":"text","text":" ? There’s currently no LU factorization though, there’s only QR"}]}]}]},{"client_msg_id":"cd466366-7f35-4e77-97cf-fab751db9156","type":"message","text":"for the CGL, the blocks are not banded but sparse","user":"U7GQE9JP9","ts":"1609967849.272300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mfd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for the CGL, the blocks are not banded but sparse"}]}]}]},{"client_msg_id":"c62136d0-94a6-4a90-9898-130d6bc99b1d","type":"message","text":"I did not try, but usually, when LU or qr those matrices, the blocks become dense","user":"U7GQE9JP9","ts":"1609967919.273300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eM2WZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I did not try, but usually, when LU or qr those matrices, the blocks become dense"}]}]}]},{"client_msg_id":"6971145e-2fac-4917-9a98-c32e3a561e8e","type":"message","text":"I see. Maybe you need to write custom Jacobian for the BVP problem then.","user":"U6788D83U","ts":"1609967929.273500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pls","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see. Maybe you need to write custom Jacobian for the BVP problem then."}]}]}]},{"client_msg_id":"844957d9-87f2-4fe7-bfc4-1f4a7a2b58e7","type":"message","text":"only if you target large ODEs","user":"U7GQE9JP9","ts":"1609967955.274300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ams","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"only if you target large ODEs"}]}]}]},{"client_msg_id":"7b1c1fef-ff46-4126-b898-279de2b2e193","type":"message","text":"The blocks are `I + gamma*J` just like IVPs","user":"U6788D83U","ts":"1609967972.274700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/ye","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The blocks are "},{"type":"text","text":"I + gamma*J","style":{"code":true}},{"type":"text","text":" just like IVPs"}]}]}]},{"client_msg_id":"c482eb38-b4a0-4a4b-92f8-7ccc989ecb4c","type":"message","text":"but that’s half of the story: you need to solve the linear system then","user":"U7GQE9JP9","ts":"1609967998.275300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DIuey","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but that’s half of the story: you need to solve the linear system then"}]}]}]},{"client_msg_id":"84f72176-80d8-4991-881e-fc030d4f2663","type":"message","text":"yes","user":"U7GQE9JP9","ts":"1609968015.275500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4mpj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}]},{"client_msg_id":"9f5a2ef9-c2d0-428e-a6fa-d82040d8a29a","type":"message","text":"imagine J is big, then you call gmres etc","user":"U7GQE9JP9","ts":"1609968037.276000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Vv5KZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"imagine J is big, then you call gmres etc"}]}]}]},{"client_msg_id":"2f9d49f3-42ba-4230-87e7-21a0b44ef432","type":"message","text":"Is J that big? haha, then the BVP will be super hard to solve","user":"U6788D83U","ts":"1609968078.276600","team":"T68168MUP","edited":{"user":"U6788D83U","ts":"1609968220.000000"},"blocks":[{"type":"rich_text","block_id":"HKn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is J that big? haha, then the BVP will be super hard to solve"}]}]}]},{"client_msg_id":"631aed94-f124-4021-820f-adc9c4ed23dc","type":"message","text":"Well, I want to solve a BVP where the ODE is a discretisation of a PDE","user":"U7GQE9JP9","ts":"1609968109.277500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x2oT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, I want to solve a BVP where the ODE is a discretisation of a PDE"}]}]}]},{"client_msg_id":"2e83a041-00ab-4a5b-8a96-e98d45357150","type":"message","text":"BVP is like to solve all IVP steps at once in a coupled way","user":"U6788D83U","ts":"1609968116.277700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HJHx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"BVP is like to solve all IVP steps at once in a coupled way"}]}]}]},{"client_msg_id":"72f30f13-5e48-4d2a-b3aa-fb1a4d311dc9","type":"message","text":"yep","user":"U7GQE9JP9","ts":"1609968133.278000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vlcH8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yep"}]}]}]},{"client_msg_id":"5ab0f80f-d13a-4634-aff1-eb6aaed44f8e","type":"message","text":"Then you could implement only the action of the Jacobian of the BVP problem","user":"U6788D83U","ts":"1609968173.278600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sq2Wi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Then you could implement only the action of the Jacobian of the BVP problem"}]}]}]},{"client_msg_id":"f9a2dd46-966e-4c37-9fc3-9d8355477106","type":"message","text":"exact","user":"U7GQE9JP9","ts":"1609968286.279100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kNvy/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"exact"}]}]}]},{"client_msg_id":"b0819112-7391-4940-8100-d5fc182a8ec9","type":"message","text":"i think i can extract the linear methods of the trapeze discretisation for the MIRK","user":"U7GQE9JP9","ts":"1609968342.280100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Otf2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"i think i can extract the linear methods of the trapeze discretisation for the MIRK"}]}]}]},{"client_msg_id":"a60356be-549a-45ad-977b-63c7aadea829","type":"message","text":"it is quite some work. To me, it isonly valuable if I can put time step adaptation","user":"U7GQE9JP9","ts":"1609968379.280900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tiDYj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is quite some work. To me, it isonly valuable if I can put time step adaptation"}]}]}]},{"client_msg_id":"fe8aacb9-b6bb-4399-a4e6-09f2d3da5b20","type":"message","text":"Please make an upstream PR when you have one :p","user":"U6788D83U","ts":"1609968421.281300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"I1P0S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Please make an upstream PR when you have one :p"}]}]}]},{"client_msg_id":"f9f0e274-f85d-4e06-954d-f152f332a77e","type":"message","text":"<@U7GQE9JP9> Any chance you might make a new BifurcationKit release with updated DiffEq dependencies? I'm trying to use with the latest Catalyst for a tutorial I want to put together, but am having issues unless I use BifurcationKit#master.","user":"UFTJ2UDEW","ts":"1609980139.283400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gTM","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U7GQE9JP9"},{"type":"text","text":" Any chance you might make a new BifurcationKit release with updated DiffEq dependencies? I'm trying to use with the latest Catalyst for a tutorial I want to put together, but am having issues unless I use BifurcationKit#master."}]}]}],"thread_ts":"1609980139.283400","reply_count":1,"reply_users_count":1,"latest_reply":"1609980311.283500","reply_users":["UFTJ2UDEW"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"`u0 = [0.5] tspan = (0.0,10.0) function noise!(du,u,p,t)     x= u     du[1] = sqrt((x*(1.0-x))/10.0) end p = [1.0,1.0]  function langevin!(du,u,p,t)     x=u     α,β = p     du[1] = α*(1.0-x)-α*x+β*x*(1.0-x) end  dt=0.001 prob_sde = SDEProblem(langevin!,noise!,u0,tspan,p)  sol=solve(prob_sde,EM(),dt=dt)`  I get \" `MethodError: no method matching -(::Float64, ::Array{Float64,1}) For element-wise subtraction, use broadcasting with dot syntax: scalar .- array` \"   I couldn't notice any broadcasting problem.","ts":"1610003402.284000","username":"[gitter] <adhikarirsr>","bot_id":"B795XHD0X","blocks":[{"type":"section","block_id":"matterbridge_bvmt0lcg27id0g40lji0","text":{"type":"mrkdwn","text":"`u0 = [0.5]\ntspan = (0.0,10.0)\nfunction noise!(du,u,p,t)\n    x= u\n    du[1] = sqrt((x*(1.0-x))/10.0)\nend\np = [1.0,1.0]\n\nfunction langevin!(du,u,p,t)\n    x=u\n    α,β = p\n    du[1] = α*(1.0-x)-α*x+β*x*(1.0-x)\nend\n\ndt=0.001\nprob_sde = SDEProblem(langevin!,noise!,u0,tspan,p)\n\nsol=solve(prob_sde,EM(),dt=dt)`\n\nI get \"\n`MethodError: no method matching -(::Float64, ::Array{Float64,1})\nFor element-wise subtraction, use broadcasting with dot syntax: scalar .- array`\n\" \n\nI couldn't notice any broadcasting problem.","verbatim":false}}]},{"client_msg_id":"9420419f-79f4-4ad3-b567-a838f11361b3","type":"message","text":"`x = u[1]`","user":"U69BL50BF","ts":"1610004051.284300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vObkz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"x = u[1]","style":{"code":true}}]}]}]},{"client_msg_id":"a597a54b-b8b3-478e-a832-9a97cabedca2","type":"message","text":"<@UFTJ2UDEW> do you have time to talk about merging the `BipartiteGraph` definition between MTK and StructuralTransformations?","user":"U6788D83U","ts":"1610116525.291700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MuZr6","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UFTJ2UDEW"},{"type":"text","text":" do you have time to talk about merging the "},{"type":"text","text":"BipartiteGraph","style":{"code":true}},{"type":"text","text":" definition between MTK and StructuralTransformations?"}]}]}]},{"client_msg_id":"c1e3b07f-8d78-4656-aba5-d0d12c2db371","type":"message","text":"Later today, yes. In a meeting now. 11am?","user":"UFTJ2UDEW","ts":"1610116891.297100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ow78M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Later today, yes. In a meeting now. 11am?"}]}]}],"thread_ts":"1610116891.297100","reply_count":1,"reply_users_count":1,"latest_reply":"1610117023.297500","reply_users":["U6788D83U"],"subscribed":false},{"client_msg_id":"7f9fe09a-3766-448f-a859-54b4ef4ff560","type":"message","text":"(est)","user":"UFTJ2UDEW","ts":"1610116899.297300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"chH3u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(est)"}]}]}]},{"client_msg_id":"a333c21c-e4c6-48eb-94cb-23c79eccbb8e","type":"message","text":"<@U69BL50BF> Is it possible to use arbitrary functions in a `ModelingToolkit` equation? It seems like if I implement a function with an `if` /`else` block I get compiler errors from using the symbolic variables as a boolean.","user":"U01H36BUDJB","ts":"1610118316.298600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bvL4","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" Is it possible to use arbitrary functions in a "},{"type":"text","text":"ModelingToolkit","style":{"code":true}},{"type":"text","text":" equation? It seems like if I implement a function with an "},{"type":"text","text":"if","style":{"code":true}},{"type":"text","text":" /"},{"type":"text","text":"else","style":{"code":true}},{"type":"text","text":" block I get compiler errors from using the symbolic variables as a boolean."}]}]}]},{"client_msg_id":"fbd110c5-7cb5-4f3e-ab52-36c17136e658","type":"message","text":"`if`/`else` is the tricky one...","user":"U69BL50BF","ts":"1610118359.298900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"b5DTP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if","style":{"code":true}},{"type":"text","text":"/"},{"type":"text","text":"else","style":{"code":true}},{"type":"text","text":" is the tricky one..."}]}]}]},{"client_msg_id":"487112e2-6241-4de2-afc3-7e16c2ef80b9","type":"message","text":"You have to use `IfElse.ifelse`, and that's a long story.","user":"U69BL50BF","ts":"1610118369.299200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"74Kq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You have to use "},{"type":"text","text":"IfElse.ifelse","style":{"code":true}},{"type":"text","text":", and that's a long story."}]}]}]},{"client_msg_id":"c420b19e-3108-4998-a88d-6f4b6361847c","type":"message","text":"oh boy","user":"U01H36BUDJB","ts":"1610118375.299400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IoM/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh boy"}]}]}]},{"client_msg_id":"8cd70e86-470d-484a-81b7-2ce674fcf092","type":"message","text":"examples somewhere?","user":"U01H36BUDJB","ts":"1610118379.299600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BG7dm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"examples somewhere?"}]}]}]},{"client_msg_id":"3cce1123-74a1-4c6a-bda8-0bee32ab9d53","type":"message","text":"In tests","user":"U69BL50BF","ts":"1610118638.299800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mWi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In tests"}]}]}]},{"client_msg_id":"491099eb-dcd4-4a1c-b4be-5a0b5bd3538d","type":"message","text":"we need to document that part a bit more.","user":"U69BL50BF","ts":"1610118643.300000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3pjV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"we need to document that part a bit more."}]}]}]},{"client_msg_id":"1ce17329-1c92-44f0-a51e-4b281374d86d","type":"message","text":"but basically","user":"U69BL50BF","ts":"1610118656.300200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QeO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but basically"}]}]}]},{"client_msg_id":"721f0235-e0f6-40be-87ff-14285fb24a87","type":"message","text":"it'll trace most control flow","user":"U69BL50BF","ts":"1610118661.300400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1KtJ9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it'll trace most control flow"}]}]}]},{"client_msg_id":"6312cf91-2dc2-4dc1-a1e9-75ab1029c12d","type":"message","text":"if/else is the hard one because of a dispatch issue","user":"U69BL50BF","ts":"1610118670.300700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u9R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if/else is the hard one because of a dispatch issue"}]}]}]},{"client_msg_id":"9c080a89-d9af-43cf-93a8-ed70294ab458","type":"message","text":"which could get fixed when the next set of compiler tools come (with Diffractor)","user":"U69BL50BF","ts":"1610118683.301100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1fk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which could get fixed when the next set of compiler tools come (with Diffractor)"}]}]}]},{"client_msg_id":"6b2dbd77-a494-409f-86a8-6ea19a32dd29","type":"message","text":"wait what does `@register` actually do? can I just use that macro? or do you need to use that macro + `ifelse`?","user":"U01H36BUDJB","ts":"1610118849.301800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9PQj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"wait what does "},{"type":"text","text":"@register","style":{"code":true}},{"type":"text","text":" actually do? can I just use that macro? or do you need to use that macro + "},{"type":"text","text":"ifelse","style":{"code":true}},{"type":"text","text":"?"}]}]}]},{"client_msg_id":"8c1ff7cf-eb5a-455e-b296-c818b52ec954","type":"message","text":"`@register` makes the function a node in the compute graph","user":"U69BL50BF","ts":"1610119030.302200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1iYN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@register","style":{"code":true}},{"type":"text","text":" makes the function a node in the compute graph"}]}]}]},{"client_msg_id":"9773896a-ebe8-48dc-8335-b1dc96e32796","type":"message","text":"otherwise it traces into the function","user":"U69BL50BF","ts":"1610119034.302400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xIHvR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"otherwise it traces into the function"}]}]}]},{"client_msg_id":"ad85c3f9-7288-4775-81d6-1c7df4117f44","type":"message","text":"does `ModelingToolkit` implement its own compute graph or are you using another library?","user":"U01H36BUDJB","ts":"1610119127.302800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rf5d","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does "},{"type":"text","text":"ModelingToolkit","style":{"code":true}},{"type":"text","text":" implement its own compute graph or are you using another library?"}]}]}]},{"client_msg_id":"d97df58e-a703-4498-b7a0-0fdf6f35cd20","type":"message","text":"huh it compiles fine with `@register` ; not sure if it will actually work, though","user":"U01H36BUDJB","ts":"1610119220.303400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7f9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"huh it compiles fine with "},{"type":"text","text":"@register","style":{"code":true}},{"type":"text","text":" ; not sure if it will actually work, though"}]}]}]},{"client_msg_id":"11f427e5-82de-4ad8-8149-0faf398aa613","type":"message","text":"ModelingToolkit defines compute graphs on the same underlying structure as SymbolicUtils. It's the whole `Term` and `Sym` core.","user":"U69BL50BF","ts":"1610119434.304300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+s1sd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ModelingToolkit defines compute graphs on the same underlying structure as SymbolicUtils. It's the whole "},{"type":"text","text":"Term","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"Sym","style":{"code":true}},{"type":"text","text":" core."}]}]}]},{"client_msg_id":"261260a4-f976-4d09-8387-07411257c333","type":"message","text":"nope, obscure error from `discretize`","user":"U01H36BUDJB","ts":"1610119436.304400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pWm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"nope, obscure error from "},{"type":"text","text":"discretize","style":{"code":true}}]}]}]},{"client_msg_id":"ebb3f1f2-27b5-4786-b28f-71f72640b143","type":"message","text":"what are you trying to do?","user":"U69BL50BF","ts":"1610119444.304600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d1b","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what are you trying to do?"}]}]}]},{"client_msg_id":"628453e2-8d22-4a05-baaa-aba920121971","type":"message","text":"build a heat conduction + phase change model","user":"U01H36BUDJB","ts":"1610119460.304900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9We","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"build a heat conduction + phase change model"}]}]}]},{"client_msg_id":"9b15d79c-0281-4f24-8326-6ddbcf7832d9","type":"message","text":"so I need functions to compute heat capacity and conductivity","user":"U01H36BUDJB","ts":"1610119476.305300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PaA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so I need functions to compute heat capacity and conductivity"}]}]}]},{"client_msg_id":"779d3220-96c5-4ba5-a16e-04348446bbce","type":"message","text":"what do you have so far?","user":"U69BL50BF","ts":"1610119481.305500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/OF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what do you have so far?"}]}]}]},{"client_msg_id":"9fa81889-bc51-4f02-a3d8-e2984ad5ccdf","type":"message","text":"I hardcoded some things in just to get it working. I'm also new to ModelingToolkit so I have no idea if I'm doing it right :sweat_smile:\n```        ivars = @parameters t z\n        dvars = @variables H(..) T(..) k(..) Wₗ(..) W(..) M(..) O(..)\n        @derivatives Dt'~t\n        @derivatives Dz'~z\n        @derivatives DT'~T\n        @register thermalConductivity(waterIce, water, mineral, organic)\n        @register heatCapacity(waterIce, water, mineral, organic)\n        @register enthalpyInv(H,θ,dHdT)\n\n        # Space and time domains\n        domains = [t ∈ IntervalDomain(0.0,1.0),\n                   z ∈ IntervalDomain(-5.0,100.0)]\n        eqs  = [\n            W(z) ~ 0.5,\n            Wₗ(z) ~ 0.5,\n            M(z) ~ 0.3,\n            O(z) ~ 0.2,\n            k(z) ~ thermalConductivity(W(z),Wₗ(z),M(z),O(z)),\n            DT(H(z,t)) ~ heatCapacity(W(z),Wₗ(z),M(z),O(z)),\n            Dt(H(z,t)) ~ Dz(k(z)*Dz(T(z,t))),\n            T(z,t) ~ enthalpyInv(H(z,t),W(z),DT(H(z,t)))\n        ]\n        T₀(z) = -0.1*z\n        bcs = [\n            T(z,0) ~ T₀(z)\n            T(0,t) ~ 1.0\n            T(100,t) ~ 10.0\n        ]\n        PDESystem(eqs, bcs, domains, ivars, dvars)```","user":"U01H36BUDJB","ts":"1610119700.306700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ofTUm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I hardcoded some things in just to get it working. I'm also new to ModelingToolkit so I have no idea if I'm doing it right "},{"type":"emoji","name":"sweat_smile"},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"        ivars = @parameters t z\n        dvars = @variables H(..) T(..) k(..) Wₗ(..) W(..) M(..) O(..)\n        @derivatives Dt'~t\n        @derivatives Dz'~z\n        @derivatives DT'~T\n        @register thermalConductivity(waterIce, water, mineral, organic)\n        @register heatCapacity(waterIce, water, mineral, organic)\n        @register enthalpyInv(H,θ,dHdT)\n\n        # Space and time domains\n        domains = [t ∈ IntervalDomain(0.0,1.0),\n                   z ∈ IntervalDomain(-5.0,100.0)]\n        eqs  = [\n            W(z) ~ 0.5,\n            Wₗ(z) ~ 0.5,\n            M(z) ~ 0.3,\n            O(z) ~ 0.2,\n            k(z) ~ thermalConductivity(W(z),Wₗ(z),M(z),O(z)),\n            DT(H(z,t)) ~ heatCapacity(W(z),Wₗ(z),M(z),O(z)),\n            Dt(H(z,t)) ~ Dz(k(z)*Dz(T(z,t))),\n            T(z,t) ~ enthalpyInv(H(z,t),W(z),DT(H(z,t)))\n        ]\n        T₀(z) = -0.1*z\n        bcs = [\n            T(z,0) ~ T₀(z)\n            T(0,t) ~ 1.0\n            T(100,t) ~ 10.0\n        ]\n        PDESystem(eqs, bcs, domains, ivars, dvars)"}]}]}]}]}