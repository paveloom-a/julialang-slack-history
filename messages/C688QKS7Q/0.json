{"cursor": 1, "messages": [{"client_msg_id":"db7f02ed-2502-46cd-bba7-eaf753f1206f","type":"message","text":"let to:","user":"U67BJLYCS","ts":"1609888050.265000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xWw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"let to:"}]}]}]},{"client_msg_id":"53ff4397-94b0-4166-b6d5-d308f608fc90","type":"message","text":"```/nobackup/users/vchuravy/dev/julia/src/codegen.cpp:5634:9: warning: statement has no effect [-Wunused-value]\n         (void*)srt; // silence unused variable error\n         ^~~~~~~~~~```","user":"U67BJLYCS","ts":"1609888053.265200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eoN","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"/nobackup/users/vchuravy/dev/julia/src/codegen.cpp:5634:9: warning: statement has no effect [-Wunused-value]\n         (void*)srt; // silence unused variable error\n         ^~~~~~~~~~"}]}]}]},{"client_msg_id":"8f56256b-5c68-4552-bd83-99c69428ba73","type":"message","text":"silly program","user":"U67BJLYCS","ts":"1609888058.265400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NAuiN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"silly program"}]}]}]},{"client_msg_id":"53a6dc20-738f-4f0d-8820-28933e4b17bb","type":"message","text":"just `(void)` no `*`","user":"U674T3KB3","ts":"1609888136.265600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5tFiu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"just "},{"type":"text","text":"(void)","style":{"code":true}},{"type":"text","text":" no "},{"type":"text","text":"*","style":{"code":true}}]}]}]},{"client_msg_id":"3e1097ce-6bb1-4a4a-8603-922c7b217d90","type":"message","text":"ah ofc","user":"U67BJLYCS","ts":"1609888463.265900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"S/pQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah ofc"}]}]}]},{"client_msg_id":"eaa78e53-a901-410f-84f1-5a2461fee53d","type":"message","text":"Is this supposed to work?\n```julia&gt; f(x) = Core._apply(hypot, (x,), (1, x), 1, x, (1, 2))\nf (generic function with 1 method)\n\njulia&gt; f(1.)\nERROR: BoundsError: attempt to access Nothing at index [1]\nStacktrace:\n [1] f(x::Float64)\n   @ Main ./REPL[1]:1\n [2] top-level scope\n   @ REPL[2]:1```\nI didn't know `_apply` even accepted more than 2 arguments.","user":"UM30MT6RF","ts":"1609897172.266900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sNE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is this supposed to work?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> f(x) = Core._apply(hypot, (x,), (1, x), 1, x, (1, 2))\nf (generic function with 1 method)\n\njulia> f(1.)\nERROR: BoundsError: attempt to access Nothing at index [1]\nStacktrace:\n [1] f(x::Float64)\n   @ Main ./REPL[1]:1\n [2] top-level scope\n   @ REPL[2]:1"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I didn't know "},{"type":"text","text":"_apply","style":{"code":true}},{"type":"text","text":" even accepted more than 2 arguments."}]}]}]},{"client_msg_id":"2079602b-65c0-4e2d-90ff-e5ee9522acd4","type":"message","text":"Sure, that’s just `hypot(x, 1, x, 1..., x..., 1, 2)`","user":"U67BXBF99","ts":"1609897999.267300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mErCQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sure, that’s just "},{"type":"text","text":"hypot(x, 1, x, 1..., x..., 1, 2)","style":{"code":true}}]}]}]},{"client_msg_id":"14c850f7-0634-4a95-9045-284d513e0f04","type":"message","text":"Ah, thanks! Will open an issue","user":"UM30MT6RF","ts":"1609898060.267600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LwPh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, thanks! Will open an issue"}]}]}]},{"client_msg_id":"dba56c79-73cf-49c4-a37a-fc32e92b1d06","type":"message","text":"the optimizer is clearly very confused:","user":"U67BXBF99","ts":"1609898214.267900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2MIL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the optimizer is clearly very confused:"}]}]}]},{"client_msg_id":"3337bce5-0717-42e8-8153-aa3a9736a99e","type":"message","text":"```julia&gt; @code_typed f(1.)\nCodeInfo(\n     @ REPL[3]:1 within `f'\n1 ── %1  = Main.hypot::Core.Const(hypot)\n│    %2  = (isa)(%1, typeof(iterate))::Bool```","user":"U67BXBF99","ts":"1609898217.268100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YPj1L","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @code_typed f(1.)\nCodeInfo(\n     @ REPL[3]:1 within `f'\n1 ── %1  = Main.hypot::Core.Const(hypot)\n│    %2  = (isa)(%1, typeof(iterate))::Bool"}]}]}]},{"client_msg_id":"f7360715-40d1-41f4-876b-f01a8214589a","type":"message","text":"probably assumes incorrectly you're using _apply_iterate","user":"U674T3KB3","ts":"1609898261.268600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x4uT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"probably assumes incorrectly you're using _apply_iterate"}]}]}]},{"client_msg_id":"aa257d56-8b84-4430-ac5b-3502aa5caa57","type":"message","text":"Note however that method is deprecated:","user":"U67BXBF99","ts":"1609898262.268700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ns/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Note however that method is deprecated:"}]}]}]},{"client_msg_id":"2e554f97-8500-4dc7-af44-4cc4a341712c","type":"message","text":"```f(x) = Core._apply_iterate(iterate, hypot, (x,), (1, x), 1, x, (1, 2))```","user":"U67BXBF99","ts":"1609898265.269000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/haj","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"f(x) = Core._apply_iterate(iterate, hypot, (x,), (1, x), 1, x, (1, 2))"}]}]}]},{"client_msg_id":"8dfffb18-efca-4f03-bb87-5dded30c20b8","type":"message","text":"this works","user":"U67BXBF99","ts":"1609898268.269200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0Ln","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this works"}]}]}]},{"client_msg_id":"580b4967-2bbe-4eb0-afe3-27466e0f9266","type":"message","text":"Yes, problem seems to be iteration of scalars (probably also other iterators):\n```julia&gt; f(x) = Core._apply(-, x)\nf (generic function with 1 method)\n\njulia&gt; f(1)\nERROR: BoundsError: attempt to access Nothing at index [1]\nStacktrace:\n [1] f(x::Int64)\n   @ Main ./REPL[3]:1\n [2] top-level scope\n   @ REPL[4]:1```","user":"UM30MT6RF","ts":"1609898334.270000","team":"T68168MUP","edited":{"user":"UM30MT6RF","ts":"1609898352.000000"},"blocks":[{"type":"rich_text","block_id":"APS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, problem seems to be iteration of scalars (probably also other iterators):\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> f(x) = Core._apply(-, x)\nf (generic function with 1 method)\n\njulia> f(1)\nERROR: BoundsError: attempt to access Nothing at index [1]\nStacktrace:\n [1] f(x::Int64)\n   @ Main ./REPL[3]:1\n [2] top-level scope\n   @ REPL[4]:1"}]}]}]},{"client_msg_id":"bffba2dc-6452-428c-8d92-849746e20275","type":"message","text":"No, I think just `Number`s are the problem","user":"UM30MT6RF","ts":"1609898483.270700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bw9Yg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No, I think just `Number`s are the problem"}]}]}]},{"client_msg_id":"13fd62c2-06d1-4b55-a26c-0adb67935119","type":"message","text":"The emitted code looks badly corrupt","user":"U67BXBF99","ts":"1609899026.271000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r+9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The emitted code looks badly corrupt"}]}]}]},{"client_msg_id":"5043f5b1-43ff-4ebb-87be-4e6945d0eb2e","type":"message","text":"<@U674T3KB3> are you okay with me removing it and replacing with `Core._apply(x...) = Core._apply_iterate(Base.iterate, x...)`?","user":"U67BXBF99","ts":"1609900515.272200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ui/","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U674T3KB3"},{"type":"text","text":" are you okay with me removing it and replacing with "},{"type":"text","text":"Core._apply(x...) = Core._apply_iterate(Base.iterate, x...)","style":{"code":true}},{"type":"text","text":"?"}]}]}]},{"client_msg_id":"020d2d89-5eda-4c3c-9424-fb11591392c7","type":"message","text":"I assume the fix is not hard, but not sure it is worthwhile","user":"U67BXBF99","ts":"1609900542.272600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"m54","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I assume the fix is not hard, but not sure it is worthwhile"}]}]}]},{"client_msg_id":"81fd75d8-3a83-40ec-96a8-23660c6f6e34","type":"message","text":"I think that would be fine, but should probably PkgEval it to see if anybody relies on it being Builtin","user":"U674T3KB3","ts":"1609900561.273000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QqtT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think that would be fine, but should probably PkgEval it to see if anybody relies on it being Builtin"}]}]}]},{"client_msg_id":"792f7810-01a5-4ac9-b762-2bb8decfb7d4","type":"message","text":"`julia&gt; @eval Core Main = 3`","user":"U67BXBF99","ts":"1609902784.273300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9oD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"julia> @eval Core Main = 3","style":{"code":true}}]}]}]},{"client_msg_id":"acc07db0-fd57-4952-8e40-42a4e570fab5","type":"message","text":"(btw, don’t run this, it’ll cause Julia to deadlock)","user":"U67BXBF99","ts":"1609902797.273600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uMmJv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(btw, don’t run this, it’ll cause Julia to deadlock)"}]}]}]},{"client_msg_id":"7939df1b-722c-4679-a9f1-a4a1e3a0b8b2","type":"message","text":"<@U67BXBF99> I can’t follow the link here. Do you think this caused the hang and/or the failure to grab an rr trace?\n<https://github.com/JuliaLang/julia/pull/38915#issuecomment-755600074>","user":"U8MPCDJAY","ts":"1609965044.274800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xay3","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U67BXBF99"},{"type":"text","text":" I can’t follow the link here. Do you think this caused the hang and/or the failure to grab an rr trace?\n"},{"type":"link","url":"https://github.com/JuliaLang/julia/pull/38915#issuecomment-755600074"}]}]}]},{"client_msg_id":"155CAC02-BC53-4C14-9961-CF620B1358EE","type":"message","text":"Buildbot shouldnt be hidden?","user":"U67BXBF99","ts":"1609965856.275300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yat+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Buildbot shouldnt be hidden?"}]}]}]},{"client_msg_id":"E3DF6DA2-F34C-4157-B430-C6FEE5581469","type":"message","text":"Nah, it just makes julia go read invalid memory, but it’s old","user":"U67BXBF99","ts":"1609965876.276000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1sxZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nah, it just makes julia go read invalid memory, but it’s old"}]}]}]},{"client_msg_id":"1ddb895a-cca2-477a-bf0d-6c49d70bbb47","type":"message","text":"but only on linux64 it seems?","user":"U8MPCDJAY","ts":"1609966396.276300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6yG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but only on linux64 it seems?"}]}]}]},{"client_msg_id":"98b84196-ab4f-4e08-a535-10da21497dcf","type":"message","text":"only place we run it","user":"U67BXBF99","ts":"1609967438.276500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U5F4J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"only place we run it"}]}]}]},{"client_msg_id":"2f2f1c9f-cfa0-4b5c-b6b1-6638f5730bd6","type":"message","text":"oh, you mean the rr failure?","user":"U8MPCDJAY","ts":"1609967481.276800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"voh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, you mean the rr failure?"}]}]}]},{"client_msg_id":"cafa109e-033a-499a-9005-e7e195871c93","type":"message","text":"probably fair to say I’m lost..","user":"U8MPCDJAY","ts":"1609967531.277400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PQCW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"probably fair to say I’m lost.."}]}]}]},{"client_msg_id":"5d691a28-2e92-4917-82cc-6e748b47035f","type":"message","text":"the link takes a minute to load, but you should be able to see it","user":"U67BXBF99","ts":"1609967559.277700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ij4Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the link takes a minute to load, but you should be able to see it"}]}]}],"reactions":[{"name":"link","users":["U680THK2S"],"count":1}]},{"client_msg_id":"b90bb3fc-c803-4752-af87-84af473b2e4b","type":"message","text":"uh.. damn, yeah the new `try` block has made any assignment local\n```julia&gt; @time x = 1\n  0.000001 seconds\n1\n\njulia&gt; x\nERROR: UndefVarError: x not defined```","user":"U8MPCDJAY","ts":"1609968318.278400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AZbqY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"uh.. damn, yeah the new "},{"type":"text","text":"try","style":{"code":true}},{"type":"text","text":" block has made any assignment local\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time x = 1\n  0.000001 seconds\n1\n\njulia> x\nERROR: UndefVarError: x not defined"}]}]}],"thread_ts":"1609968318.278400","reply_count":23,"reply_users_count":3,"latest_reply":"1609971594.289500","reply_users":["UCZ7VBGUD","U8MPCDJAY","U67BXBF99"],"subscribed":false,"reactions":[{"name":"grimacing","users":["U7THT3TM3","UCZ7VBGUD","U6788D83U"],"count":3}]},{"client_msg_id":"54e0a765-1508-4e82-8342-50b72d92e339","type":"message","text":"`@time` needs more tests","user":"U8MPCDJAY","ts":"1609968333.278700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JEnst","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@time","style":{"code":true}},{"type":"text","text":" needs more tests"}]}]}]},{"client_msg_id":"98cfa0c3-6682-4a7a-96dd-b2853cf47ca8","type":"message","text":"is there a way to make an assignment in a try not local?\n```local val = try\n    $(esc(ex))\nfinally\n   ...\nend```","user":"U8MPCDJAY","ts":"1609968463.279600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ELTz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there a way to make an assignment in a try not local?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"local val = try\n    $(esc(ex))\nfinally\n   ...\nend"}]}]}]},{"client_msg_id":"becedbd7-0cd9-41ea-aeef-f2ac4992c04e","type":"message","text":"or a non-try way to have a `finally`?","user":"U8MPCDJAY","ts":"1609968500.280000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dfb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"or a non-try way to have a "},{"type":"text","text":"finally","style":{"code":true}},{"type":"text","text":"?"}]}]}]},{"client_msg_id":"3272a598-7c85-4fdb-8f88-1fdb3a9fce38","type":"message","text":"I could throw a `global` infront of the ex but if there’s no assignment that would error, and make the scope messy","user":"U8MPCDJAY","ts":"1609968719.281000","team":"T68168MUP","edited":{"user":"U8MPCDJAY","ts":"1609969314.000000"},"blocks":[{"type":"rich_text","block_id":"t5VXz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I could throw a "},{"type":"text","text":"global","style":{"code":true}},{"type":"text","text":" infront of the ex but if there’s no assignment that would error, and make the scope messy"}]}]}]},{"type":"message","subtype":"thread_broadcast","text":"Seems to be a fix: <https://github.com/JuliaLang/julia/pull/39133>","user":"U8MPCDJAY","ts":"1609971594.289500","thread_ts":"1609968318.278400","root":{"client_msg_id":"b90bb3fc-c803-4752-af87-84af473b2e4b","type":"message","text":"uh.. damn, yeah the new `try` block has made any assignment local\n```julia&gt; @time x = 1\n  0.000001 seconds\n1\n\njulia&gt; x\nERROR: UndefVarError: x not defined```","user":"U8MPCDJAY","ts":"1609968318.278400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AZbqY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"uh.. damn, yeah the new "},{"type":"text","text":"try","style":{"code":true}},{"type":"text","text":" block has made any assignment local\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time x = 1\n  0.000001 seconds\n1\n\njulia> x\nERROR: UndefVarError: x not defined"}]}]}],"thread_ts":"1609968318.278400","reply_count":23,"reply_users_count":3,"latest_reply":"1609971594.289500","reply_users":["UCZ7VBGUD","U8MPCDJAY","U67BXBF99"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"4qF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Seems to be a fix: "},{"type":"link","url":"https://github.com/JuliaLang/julia/pull/39133"}]}]}],"client_msg_id":"f476cce3-571e-4fd8-ba83-dd3aabee0d8d"},{"type":"message","subtype":"thread_broadcast","text":"<https://github.com/JuliaLang/julia/pull/39133#issuecomment-755927269> I think","user":"U67D54KS8","ts":"1610003486.290300","thread_ts":"1609968463.279600","root":{"client_msg_id":"98cfa0c3-6682-4a7a-96dd-b2853cf47ca8","type":"message","text":"is there a way to make an assignment in a try not local?\n```local val = try\n    $(esc(ex))\nfinally\n   ...\nend```","user":"U8MPCDJAY","ts":"1609968463.279600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ELTz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there a way to make an assignment in a try not local?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"local val = try\n    $(esc(ex))\nfinally\n   ...\nend"}]}]}],"thread_ts":"1609968463.279600","reply_count":1,"reply_users_count":1,"latest_reply":"1610003486.290300","reply_users":["U67D54KS8"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"u4qZF","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/julia/pull/39133#issuecomment-755927269"},{"type":"text","text":" I think"}]}]}],"client_msg_id":"351bc671-440e-42ef-bbec-6d92b89d2627"},{"client_msg_id":"907b4d6e-6ab3-4af5-898a-74fc97760a6f","type":"message","text":"that’s entertaining","user":"U67BXBF99","ts":"1610034029.290700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pjtb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that’s entertaining"}]}]}]},{"client_msg_id":"c0e47330-7e3f-48fd-a4e9-ec1a4f322d2f","type":"message","text":"yeah, that’s a neat trick! <https://github.com/JuliaLang/julia/pull/39138>","user":"U8MPCDJAY","ts":"1610036782.290900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iWFg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, that’s a neat trick! "},{"type":"link","url":"https://github.com/JuliaLang/julia/pull/39138"}]}]}]},{"client_msg_id":"f301451e-9d39-4548-8187-da923c9d0c4d","type":"message","text":"It might be fun to create a `@noscope` macro for each of them","user":"U67BXBF99","ts":"1610037156.291600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Vq+O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It might be fun to create a "},{"type":"text","text":"@noscope","style":{"code":true}},{"type":"text","text":" macro for each of them"}]}]}],"reactions":[{"name":"ok_hand","users":["U8MPCDJAY"],"count":1},{"name":"three","users":["U680THK2S"],"count":1},{"name":"six","users":["U680THK2S"],"count":1},{"name":"zero","users":["U680THK2S"],"count":1}]},{"client_msg_id":"c166de97-5a0e-43fd-93eb-810bf87c8f67","type":"message","text":"```outer for outer x = 1:10\n   y = x\nend```","user":"U67BXBF99","ts":"1610037264.292200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SW7Y","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"outer for outer x = 1:10\n   y = x\nend"}]}]}]},{"client_msg_id":"3ef34ab0-e54a-4c0b-9d60-b578e0a14b15","type":"message","text":"any LLVM patches to pickup for the next Yggdrasil bump?","user":"U67BJLYCS","ts":"1610076595.293800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gs5b","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"any LLVM patches to pickup for the next Yggdrasil bump?"}]}]}]},{"client_msg_id":"4fc678e4-0b3e-40f1-977f-0ba6e6cf9a5d","type":"message","text":"Also this:","user":"U67BJLYCS","ts":"1610078977.294000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1dKF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also this:"}]}]}]},{"client_msg_id":"87324554-e141-422d-af29-a1848cd7212e","type":"message","text":"```    JULIA /home/vchuravy/builds/julia/usr/lib/julia/sys-o.a\nERROR: LoadError: AssertionError: 0 &lt; tid &lt;= length(THREAD_RNGs)\nStacktrace:\n  [1] _rng_length_assert()\n    @ Random ~/builds/julia/usr/share/julia/stdlib/v1.7/Random/src/RNGs.jl:381\n  [2] default_rng(tid::Int64)\n    @ Random ~/builds/julia/usr/share/julia/stdlib/v1.7/Random/src/RNGs.jl:372\n  [3] default_rng\n    @ ~/builds/julia/usr/share/julia/stdlib/v1.7/Random/src/RNGs.jl:370 [inlined]\n  [4] rand\n    @ ~/builds/julia/usr/share/julia/stdlib/v1.7/Random/src/Random.jl:259 [inlined]\n  [5] _rand_string()\n    @ Base.Filesystem ./file.jl:583\n  [6] tempname(parent::String; cleanup::Bool)\n    @ Base.Filesystem ./file.jl:601\n  [7] tempname\n    @ ./file.jl:594 [inlined]\n  [8] (::Main.anonymous.var\"#1#5\"{Set{String}, String})(prec_path::String)\n    @ Main.anonymous ~/src/julia/contrib/generate_precompile.jl:206\n  [9] mktempdir(fn::Main.anonymous.var\"#1#5\"{Set{String}, String}, parent::String; prefix::String)\n    @ Base.Filesystem ./file.jl:757\n [10] mktempdir\n    @ ./file.jl:755 [inlined]\n [11] generate_precompile_statements()\n    @ Main.anonymous ~/src/julia/contrib/generate_precompile.jl:196\n [12] top-level scope\n    @ ~/src/julia/contrib/generate_precompile.jl:349\n [13] eval(m::Module, e::Any)\n    @ Core ./boot.jl:369\n [14] top-level scope\n    @ ~/src/julia/contrib/generate_precompile.jl:6\nin expression starting at /home/vchuravy/src/julia/contrib/generate_precompile.jl:3\n*** This error is usually fixed by running `make clean`. If the error persists, try `make cleanall`. ***\nmake[1]: *** [/home/vchuravy/src/julia/sysimage.mk:86: /home/vchuravy/builds/julia/usr/lib/julia/sys-o.a] Error 1\nmake: *** [/home/vchuravy/src/julia/Makefile:88: julia-sysimg-release] Error 2```","user":"U67BJLYCS","ts":"1610078983.294300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xoAy","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"    JULIA /home/vchuravy/builds/julia/usr/lib/julia/sys-o.a\nERROR: LoadError: AssertionError: 0 < tid <= length(THREAD_RNGs)\nStacktrace:\n  [1] _rng_length_assert()\n    @ Random ~/builds/julia/usr/share/julia/stdlib/v1.7/Random/src/RNGs.jl:381\n  [2] default_rng(tid::Int64)\n    @ Random ~/builds/julia/usr/share/julia/stdlib/v1.7/Random/src/RNGs.jl:372\n  [3] default_rng\n    @ ~/builds/julia/usr/share/julia/stdlib/v1.7/Random/src/RNGs.jl:370 [inlined]\n  [4] rand\n    @ ~/builds/julia/usr/share/julia/stdlib/v1.7/Random/src/Random.jl:259 [inlined]\n  [5] _rand_string()\n    @ Base.Filesystem ./file.jl:583\n  [6] tempname(parent::String; cleanup::Bool)\n    @ Base.Filesystem ./file.jl:601\n  [7] tempname\n    @ ./file.jl:594 [inlined]\n  [8] (::Main.anonymous.var\"#1#5\"{Set{String}, String})(prec_path::String)\n    @ Main.anonymous ~/src/julia/contrib/generate_precompile.jl:206\n  [9] mktempdir(fn::Main.anonymous.var\"#1#5\"{Set{String}, String}, parent::String; prefix::String)\n    @ Base.Filesystem ./file.jl:757\n [10] mktempdir\n    @ ./file.jl:755 [inlined]\n [11] generate_precompile_statements()\n    @ Main.anonymous ~/src/julia/contrib/generate_precompile.jl:196\n [12] top-level scope\n    @ ~/src/julia/contrib/generate_precompile.jl:349\n [13] eval(m::Module, e::Any)\n    @ Core ./boot.jl:369\n [14] top-level scope\n    @ ~/src/julia/contrib/generate_precompile.jl:6\nin expression starting at /home/vchuravy/src/julia/contrib/generate_precompile.jl:3\n*** This error is usually fixed by running `make clean`. If the error persists, try `make cleanall`. ***\nmake[1]: *** [/home/vchuravy/src/julia/sysimage.mk:86: /home/vchuravy/builds/julia/usr/lib/julia/sys-o.a] Error 1\nmake: *** [/home/vchuravy/src/julia/Makefile:88: julia-sysimg-release] Error 2"}]}]}]},{"client_msg_id":"83da5b70-5866-41ad-996d-1f5106487eee","type":"message","text":"ah they are not setup yet","user":"U67BJLYCS","ts":"1610079188.294600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dSY1T","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah they are not setup yet"}]}]}]},{"client_msg_id":"95690e2c-8218-4059-a98c-168bb8c93a9a","type":"message","text":"I don’t have any leads, but it would be good to root out this internal-looking windows bug for 1.6, otherwise we may need to do something like halve the number of `Pkg.precompile` tasks on windows by default <https://github.com/JuliaLang/Pkg.jl/issues/2323>","user":"U8MPCDJAY","ts":"1610343219.300000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OijBK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t have any leads, but it would be good to root out this internal-looking windows bug for 1.6, otherwise we may need to do something like halve the number of "},{"type":"text","text":"Pkg.precompile","style":{"code":true}},{"type":"text","text":" tasks on windows by default "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/issues/2323"}]}]}]},{"type":"message","text":"How do you find the cause of error when you're developing something in Base and a sysimage fails to compile? I've been commenting out all the new code and uncommenting chunk by chunk until I find the broken line, but I'm sure there's a better way. For example I get this error, which seems completely unrelated as I haven't touched toml_parser.jl or version.jl.","files":[{"id":"F01JKBLA4RH","created":1610482465,"timestamp":1610482465,"name":"Untitled","title":"Untitled","mimetype":"text/plain","filetype":"text","pretty_type":"Plain Text","user":"UC81ESVH6","editable":true,"size":5494,"mode":"snippet","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01JKBLA4RH/untitled","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01JKBLA4RH/download/untitled","permalink":"https://julialang.slack.com/files/UC81ESVH6/F01JKBLA4RH/untitled","permalink_public":"https://slack-files.com/T68168MUP-F01JKBLA4RH-25d4090bf2","edit_link":"https://julialang.slack.com/files/UC81ESVH6/F01JKBLA4RH/untitled/edit","preview":"    JULIA usr/lib/julia/sys.ji\ncoreio.jl\nexports.jl\nessentials.jl\nctypes.jl","preview_highlight":"<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>    JULIA usr/lib/julia/sys.ji</pre></div>\n<div><pre>coreio.jl</pre></div>\n<div><pre>exports.jl</pre></div>\n<div><pre>essentials.jl</pre></div>\n<div><pre>ctypes.jl</pre></div>\n</div>\n</div>\n","lines":228,"lines_more":223,"preview_is_truncated":true,"is_starred":false,"has_rich_preview":false}],"upload":true,"blocks":[{"type":"rich_text","block_id":"KYbJ4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How do you find the cause of error when you're developing something in Base and a sysimage fails to compile? I've been commenting out all the new code and uncommenting chunk by chunk until I find the broken line, but I'm sure there's a better way. For example I get this error, which seems completely unrelated as I haven't touched toml_parser.jl or version.jl."}]}]}],"user":"UC81ESVH6","display_as_bot":false,"ts":"1610482467.302400","edited":{"user":"UC81ESVH6","ts":"1610482478.000000"},"client_msg_id":"15e94196-0346-464c-912c-42080caad3f4","thread_ts":"1610482467.302400","reply_count":5,"reply_users_count":2,"latest_reply":"1610483078.304400","reply_users":["UM30MT6RF","UC81ESVH6"],"subscribed":false},{"client_msg_id":"ef1bc05b-f2dc-4c31-814e-f51600f5753f","type":"message","text":"Most people use Revise.jl until they’ve gotten their work functional","user":"U67BXBF99","ts":"1610482594.303400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QS7G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Most people use Revise.jl until they’ve gotten their work functional"}]}]}]},{"client_msg_id":"42a0cae8-bfeb-44c7-98fa-1ae1dc739868","type":"message","text":"from mailing-list chatter it seems like LLVM will switch to the new pass manager for LLVM 13 (maybe even LLVM 12, but that seems not yet likely)","user":"U67BJLYCS","ts":"1610487274.305700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yNIJx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"from mailing-list chatter it seems like LLVM will switch to the new pass manager for LLVM 13 (maybe even LLVM 12, but that seems not yet likely)"}]}]}]},{"client_msg_id":"d22f61ee-f4b9-42a4-bfca-a7583dfd856d","type":"message","text":"yay!","user":"U67BXBF99","ts":"1610494616.306100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FZq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yay!"}]}]}]},{"client_msg_id":"afb36dde-1a69-4aed-915b-68e550b8e980","type":"message","text":"<@U674T3KB3> <@U67BXBF99> I am looking at <https://bugs.llvm.org/show_bug.cgi?id=48661>","user":"U67BJLYCS","ts":"1610723984.000800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6w9p","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U674T3KB3"},{"type":"text","text":" "},{"type":"user","user_id":"U67BXBF99"},{"type":"text","text":" I am looking at "},{"type":"link","url":"https://bugs.llvm.org/show_bug.cgi?id=48661"}]}]}]},{"client_msg_id":"93877347-7841-4164-a8c6-3a3fdf50cc35","type":"message","text":"Two questions:\n1. A GEP on an addressspace pointer yields a pointer in that AS, right?","user":"U67BJLYCS","ts":"1610724019.001600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WHYPQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Two questions:\n1. A GEP on an addressspace pointer yields a pointer in that AS, right?"}]}]}],"reactions":[{"name":"two","users":["UDB26738Q","U6BNE7LTZ"],"count":2}]},{"client_msg_id":"b4c27ccc-9a6c-45d4-85d4-40a8e94fa0a4","type":"message","text":"2. I can have a ~memcopy~ memcmp between two pointers in the same AS right?","user":"U67BJLYCS","ts":"1610724432.002300","team":"T68168MUP","edited":{"user":"U67BJLYCS","ts":"1610724558.000000"},"blocks":[{"type":"rich_text","block_id":"Q1+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"2. I can have a "},{"type":"text","text":"memcopy","style":{"strike":true}},{"type":"text","text":" memcmp between two pointers in the same AS right?"}]}]}]},{"client_msg_id":"df0376f3-a977-45b2-aedf-061d648d34c2","type":"message","text":"i.e. the issue seems to be that <https://github.com/llvm/llvm-project/blob/46aa3c6c331c20b8a4c358488fefab96f944e814/llvm/lib/Transforms/Utils/BuildLibCalls.cpp#L1132-L1139>","user":"U67BJLYCS","ts":"1610724571.003000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Giol9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"i.e. the issue seems to be that "},{"type":"link","url":"https://github.com/llvm/llvm-project/blob/46aa3c6c331c20b8a4c358488fefab96f944e814/llvm/lib/Transforms/Utils/BuildLibCalls.cpp#L1132-L1139"}]}]}]},{"client_msg_id":"a9bdb74f-6467-4b6a-b484-e3bf789ca20f","type":"message","text":"ignores the AS","user":"U67BJLYCS","ts":"1610724578.003200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"148","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ignores the AS"}]}]}]},{"client_msg_id":"2268a7bf-eb05-472a-8ea9-65824332c6d7","type":"message","text":"This generally reflects problems with the libc assembly code for a platform","user":"U67BXBF99","ts":"1610992903.013600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L1JSA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This generally reflects problems with the libc assembly code for a platform"}]}]}],"thread_ts":"1610992903.013600","reply_count":3,"reply_users_count":2,"latest_reply":"1611006707.017600","reply_users":["U8MPCDJAY","U67BXBF99"],"subscribed":false},{"client_msg_id":"653fae73-4cc2-4345-aaf3-0a5446e35205","type":"message","text":"We (well, Keno) fixed many such cases in glibc for linux","user":"U67BXBF99","ts":"1610992926.014200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2yUkl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We (well, Keno) fixed many such cases in glibc for linux"}]}]}]},{"client_msg_id":"f78e7cbb-05e3-4ed0-a1a5-9a8652eff710","type":"message","text":"But harder to fix for Apple in this case","user":"U67BXBF99","ts":"1610993004.014700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yNmgF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But harder to fix for Apple in this case"}]}]}],"reactions":[{"name":"unapple","users":["UDB26738Q","U013V2CFZAN","UKG4WF8PJ"],"count":3}]},{"client_msg_id":"bc8389e9-6a7d-421a-a009-e3b32fab41b1","type":"message","text":"I see. If it’s helpful, all the broken ones are failing this check <https://github.com/JuliaLang/julia/blob/master/src/stackwalk.c#L102>","user":"U8MPCDJAY","ts":"1611005017.015800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yVE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see. If it’s helpful, all the broken ones are failing this check "},{"type":"link","url":"https://github.com/JuliaLang/julia/blob/master/src/stackwalk.c#L102"}]}]}]},{"client_msg_id":"b0b6786c-330f-4dd4-b70d-3a4750a9f103","type":"message","text":"Ah, that seems bad","user":"U67BXBF99","ts":"1611005269.016100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F172A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, that seems bad"}]}]}]},{"client_msg_id":"eae83701-b0c8-4688-a5b1-10f37c0faf35","type":"message","text":"&gt; all the broken ones are failing this check…\nI take this back.. a print I introduced was breaking an if","user":"U8MPCDJAY","ts":"1611009944.018500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Eq4W","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"all the broken ones are failing this check…"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I take this back.. a print I introduced was breaking an if"}]}]}]},{"client_msg_id":"91710165-c026-4945-88d8-5dbdb5ef7ab4","type":"message","text":"I checked profiling `sleep(1)` all 1.0-nightly versions on github actions with `x86_64-apple-darwin18.6.0` (I’m on 20.2.0 locally) and all had &gt;99% disconnected snapshots.. it doesn’t appear to be a new issue","user":"U8MPCDJAY","ts":"1611010213.020900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GoXh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I checked profiling "},{"type":"text","text":"sleep(1)","style":{"code":true}},{"type":"text","text":" all 1.0-nightly versions on github actions with "},{"type":"text","text":"x86_64-apple-darwin18.6.0","style":{"code":true}},{"type":"text","text":" (I’m on 20.2.0 locally) and all had >99% disconnected snapshots.. it doesn’t appear to be a new issue"}]}]}],"thread_ts":"1611010213.020900","reply_count":1,"reply_users_count":1,"latest_reply":"1611011731.023400","reply_users":["U8MPCDJAY"],"subscribed":false},{"client_msg_id":"1d1791d7-5b08-40f6-a288-61d50ffc5995","type":"message","text":"Ah, searching github for the code, I see Apple marks these as noreturn: <https://github.com/apple/darwin-libpthread/blob/fe48dac35eb1232b0aa67260e79911387364568d/kern/kern_synch.c> so it seems that means in the unwinder, we report that they don’t return","user":"U67BXBF99","ts":"1611011286.021800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CIyj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, searching github for the code, I see Apple marks these as noreturn: "},{"type":"link","url":"https://github.com/apple/darwin-libpthread/blob/fe48dac35eb1232b0aa67260e79911387364568d/kern/kern_synch.c"},{"type":"text","text":" so it seems that means in the unwinder, we report that they don’t return"}]}]}]},{"client_msg_id":"40bb366e-7f95-49de-afc2-1c757c11bd72","type":"message","text":"(where “these” means “the methods that we see truncate the unwind”)","user":"U67BXBF99","ts":"1611011318.022400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WJOxD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(where “these” means “the methods that we see truncate the unwind”)"}]}]}]},{"client_msg_id":"dfa8329a-f30e-46cf-a194-57651f5cfbbb","type":"message","text":"nice find. So those should be special-cased somehow to ignore the noreturn?","user":"U8MPCDJAY","ts":"1611011602.023000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xCuD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"nice find. So those should be special-cased somehow to ignore the noreturn?"}]}]}]},{"client_msg_id":"9d335b70-91c6-439d-a523-e27fbe4b5730","type":"message","text":"hm, wait, that’s the kernel side of it","user":"U67BXBF99","ts":"1611011635.023300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lvX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hm, wait, that’s the kernel side of it"}]}]}]},{"client_msg_id":"fc8ba2fb-5b71-4d1d-9618-f6befd42e9fd","type":"message","text":"I can’t find the userspace side","user":"U67BXBF99","ts":"1611012289.023800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gvpj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can’t find the userspace side"}]}]}],"thread_ts":"1611012289.023800","reply_count":29,"reply_users_count":3,"latest_reply":"1611165532.064100","reply_users":["U8MPCDJAY","U67BXBF99","U674T3KB3"],"subscribed":false},{"client_msg_id":"3b21c4c5-cfc5-49ab-8c81-25d7802158ad","type":"message","text":"I’m working on embedding Julia in a rust program right now.  Can someone explain why `JULIA_DEFINE_FAST_TLS()` is necessary in Linux?","user":"U69KQT9DL","ts":"1611088307.034300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"afO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m working on embedding Julia in a rust program right now.  Can someone explain why "},{"type":"text","text":"JULIA_DEFINE_FAST_TLS()","style":{"code":true}},{"type":"text","text":" is necessary in Linux?"}]}]}],"thread_ts":"1611088307.034300","reply_count":20,"reply_users_count":3,"latest_reply":"1611165010.062700","reply_users":["U66GD0880","U69KQT9DL","U67BXBF99"],"subscribed":false,"reactions":[{"name":"rust","users":["UDB26738Q","U680THK2S","UKG4WF8PJ"],"count":3}]},{"type":"message","text":"Splitting this into a separate thread:","user":"U69KQT9DL","ts":"1611089630.036300","team":"T68168MUP","attachments":[{"fallback":"[January 19th, 2021 12:50 PM] staticfloat: for the record, embedding use cases should mostly remain the same, where you just continue to link against `libjulia`.","ts":"1611089403.035600","author_id":"U66GD0880","author_subname":"Elliot Saba","channel_id":"C688QKS7Q","channel_name":"internals","is_msg_unfurl":true,"is_reply_unfurl":true,"text":"for the record, embedding use cases should mostly remain the same, where you just continue to link against `libjulia`.","author_name":"Elliot Saba","author_link":"https://julialang.slack.com/team/U66GD0880","author_icon":"https://secure.gravatar.com/avatar/002ccfd8ee9e135f0dfb5650c292052d.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-48.png","mrkdwn_in":["text"],"color":"D0D0D0","from_url":"https://julialang.slack.com/archives/C688QKS7Q/p1611089403035600?thread_ts=1611088307034300&cid=C688QKS7Q","is_share":true,"footer":"From a thread in #internals"}],"blocks":[{"type":"rich_text","block_id":"rDR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Splitting this into a separate thread:"}]}]}],"thread_ts":"1611089630.036300","reply_count":25,"reply_users_count":3,"latest_reply":"1611151572.061900","reply_users":["U69KQT9DL","U66GD0880","U67BXBF99"],"subscribed":false},{"client_msg_id":"2f8a954d-fcb5-4163-8b1b-be0c1bb144d5","type":"message","text":"Follow-on question regarding embedding Julia in Rust: the rust program that it’s being embedded in is multithreaded.\n\nIf I initialize julia in one thread, should I to be able to call (C-callable) julia functions from another thread?\n\nWe tried this at first (initializing Julia in one thread, calling it from another), and the calling thread hung when calling the Julia-exported C-function.\nEnsuring we stay within the same thread works fine.","user":"U69KQT9DL","ts":"1611109941.048000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WoS8y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Follow-on question regarding embedding Julia in Rust: the rust program that it’s being embedded in is multithreaded.\n\nIf I initialize julia in one thread, should I to be able to call (C-callable) julia functions from another thread?\n\nWe tried this at first (initializing Julia in one thread, calling it from another), and the calling thread hung when calling the Julia-exported C-function.\nEnsuring we stay within the same thread works fine."}]}]}]},{"client_msg_id":"edc37b5c-aa72-4005-96c9-f928e45e6437","type":"message","text":"Yeah that is not expected to work, except in **very** limited circumstances","user":"U67BJLYCS","ts":"1611110768.048500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v6eP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah that is not expected to work, except in *"},{"type":"text","text":"very","style":{"bold":true}},{"type":"text","text":"* limited circumstances"}]}]}],"thread_ts":"1611110768.048500","reply_count":6,"reply_users_count":2,"latest_reply":"1611171051.064600","reply_users":["U69KQT9DL","U67BJLYCS"],"subscribed":false},{"client_msg_id":"0f05d0b2-780e-48ae-8514-4ee98f7cde70","type":"message","text":"Is it correct to say that one should only call `fieldcount` on concrete types? i.e. it will fail for all abstract types?\n```julia&gt; fieldcount(Any)\nERROR: ArgumentError: type does not have a definite number of fields\nStacktrace:\n [1] fieldcount(t::Any)\n   @ Base ./reflection.jl:677\n [2] top-level scope\n   @ REPL[20]:1```","user":"U681ELA87","ts":"1611377547.000700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HY+Cs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it correct to say that one should only call "},{"type":"text","text":"fieldcount","style":{"code":true}},{"type":"text","text":" on concrete types? i.e. it will fail for all abstract types?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> fieldcount(Any)\nERROR: ArgumentError: type does not have a definite number of fields\nStacktrace:\n [1] fieldcount(t::Any)\n   @ Base ./reflection.jl:677\n [2] top-level scope\n   @ REPL[20]:1"}]}]}],"thread_ts":"1611377547.000700","reply_count":4,"reply_users_count":4,"latest_reply":"1611393788.003000","reply_users":["UH1BLK14H","U681ELA87","U680THK2S","UM30MT6RF"],"subscribed":false},{"client_msg_id":"29b6b869-d01a-4178-a311-4ceb21ee755d","type":"message","text":"Is there any way to get coverage information but not have it written to disc as files that are parallel to the original file? Either an option to just access coverage information in-memory from the Julia process itself, without anything written to disc, or some option to configure some temporary location where the coverage information gets written to?","user":"U68UUUFPS","ts":"1611426501.005000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7euo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there any way to get coverage information but not have it written to disc as files that are parallel to the original file? Either an option to just access coverage information in-memory from the Julia process itself, without anything written to disc, or some option to configure some temporary location where the coverage information gets written to?"}]}]}],"reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"ff12a189-d3cb-4ec4-bf77-7ff2b6de426f","type":"message","text":"I'd like to add some options to VS Code to show our coverage information, but ideally we could do that in a way that doesn't clutter the folders of a user with all these coverage info files.","user":"U68UUUFPS","ts":"1611426538.005800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WEDH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd like to add some options to VS Code to show our coverage information, but ideally we could do that in a way that doesn't clutter the folders of a user with all these coverage info files."}]}]}],"reactions":[{"name":"+1","users":["U7THT3TM3","U6A936746","U89GY9W1J"],"count":3}]},{"client_msg_id":"DF91A42A-4F44-4596-B5A2-3F9D0C44BBE6","type":"message","text":"Give it a .info file name to write to","user":"U67BXBF99","ts":"1611462619.006900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t7i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Give it a .info file name to write to"}]}]}],"reactions":[{"name":"+1","users":["U68UUUFPS"],"count":1}]},{"client_msg_id":"61c2db4a-1762-4f9c-b65d-2df9e710d610","type":"message","text":"Is there a way to \"reset\" coverage information inside a running Julia instance? Say I have a Julia version running, I ran some code and got coverage information. Now I want to dismiss existing coverage information and collect new one, without restarting the Julia process.","user":"U68UUUFPS","ts":"1611598928.008000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ws/q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way to \"reset\" coverage information inside a running Julia instance? Say I have a Julia version running, I ran some code and got coverage information. Now I want to dismiss existing coverage information and collect new one, without restarting the Julia process."}]}]}],"thread_ts":"1611598928.008000","reply_count":3,"reply_users_count":2,"latest_reply":"1611601140.008600","reply_users":["U679VPJ8L","U68UUUFPS"],"subscribed":false,"reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"d71eed97-e338-4eda-bf14-d9822c22938c","type":"message","text":"Is this behavior correct, and if it is, is there any better way to check whether a type has any actual concrete subtypes? I ran across this while doing some metaprogramming:\n```julia&gt; abstract type NoSubTypes end\n\njulia&gt; NoSubTypes.has_concrete_subtype\ntrue```","user":"U68M6ERG8","ts":"1611694757.010100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"utlEC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is this behavior correct, and if it is, is there any better way to check whether a type has any actual concrete subtypes? I ran across this while doing some metaprogramming:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> abstract type NoSubTypes end\n\njulia> NoSubTypes.has_concrete_subtype\ntrue"}]}]}],"thread_ts":"1611694757.010100","reply_count":11,"reply_users_count":2,"latest_reply":"1611698728.017200","reply_users":["U66SR8JHX","U68M6ERG8"],"subscribed":false},{"client_msg_id":"8f7e6ee7-4697-496e-8a94-db77240ad552","type":"message","text":"`true` is always correct","user":"U67BXBF99","ts":"1611695105.010800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tGYlb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"true","style":{"code":true}},{"type":"text","text":" is always correct"}]}]}],"thread_ts":"1611695105.010800","reply_count":1,"reply_users_count":1,"latest_reply":"1611744134.020200","reply_users":["UB7JS9CHF"],"subscribed":false},{"client_msg_id":"16f92c5e-c2c9-46f0-969e-fea055c3eb40","type":"message","text":"if `true` is correct does that mean that `NoSubTypes` has a concrete subtype? And if so, what is it?","user":"U68M6ERG8","ts":"1611695149.011300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qKCP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if "},{"type":"text","text":"true","style":{"code":true}},{"type":"text","text":" is correct does that mean that "},{"type":"text","text":"NoSubTypes","style":{"code":true}},{"type":"text","text":" has a concrete subtype? And if so, what is it?"}]}]}]},{"client_msg_id":"7212bf50-ceed-4587-bda7-6454900ebc61","type":"message","text":"It is not known, it is just possible to exist","user":"U67BXBF99","ts":"1611695198.011700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+Pc0j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It is not known, it is just possible to exist"}]}]}],"reactions":[{"name":"matrix","users":["U68M6ERG8","U680THK2S","U66SR8JHX"],"count":3}]},{"client_msg_id":"63885064-8574-4a1e-825d-99b0dfc88f77","type":"message","text":"Is there some kind of issue with unicode characters in the `DEPOT_PATH` when using Windows?\n\n<https://discourse.julialang.org/t/change-local-of-instalation-of-julia/54010>","user":"USU9FRPEU","ts":"1611699979.018200","team":"T68168MUP","edited":{"user":"USU9FRPEU","ts":"1611699987.000000"},"blocks":[{"type":"rich_text","block_id":"QFndm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there some kind of issue with unicode characters in the "},{"type":"text","text":"DEPOT_PATH","style":{"code":true}},{"type":"text","text":" when using Windows?\n\n"},{"type":"link","url":"https://discourse.julialang.org/t/change-local-of-instalation-of-julia/54010"}]}]}]},{"client_msg_id":"02cdaef6-dd0c-46f7-92ee-dd163dc2b02c","type":"message","text":"yeah, the problem is called Windows: <https://github.com/JuliaGraphics/Gtk.jl/issues/461>","user":"UDB26738Q","ts":"1611700186.018800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W5N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, the problem is called Windows: "},{"type":"link","url":"https://github.com/JuliaGraphics/Gtk.jl/issues/461"}]}]}],"thread_ts":"1611700186.018800","reply_count":4,"reply_users_count":2,"latest_reply":"1611702228.019800","reply_users":["USU9FRPEU","UDB26738Q"],"subscribed":false,"reactions":[{"name":"windows96","users":["USU9FRPEU","U66GD0880","U7THT3TM3"],"count":3}]},{"client_msg_id":"fc5c52ce-be23-477e-876e-d7268a3442bf","type":"message","text":"Is this supposed to work: (<@U687RKK0E>)","user":"U67BXBF99","ts":"1611777333.020600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"M0u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is this supposed to work: ("},{"type":"user","user_id":"U687RKK0E"},{"type":"text","text":")"}]}]}]},{"client_msg_id":"043adf78-bd18-4151-a322-b15c855b63bf","type":"message","text":"```julia&gt; import InteractiveUtils as _\n\njulia&gt; import REPL as _\n\nERROR: importing _ into Main conflicts with an existing identifier\n\njulia&gt; _\nERROR: all-underscore identifier used as rvalue\nStacktrace:\n [1] top-level scope\n   @ REPL[11]:1\n\njulia&gt; getfield(Main, :_)\nInteractiveUtils```","user":"U67BXBF99","ts":"1611777352.020900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hqQ","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> import InteractiveUtils as _\n\njulia> import REPL as _\n\nERROR: importing _ into Main conflicts with an existing identifier\n\njulia> _\nERROR: all-underscore identifier used as rvalue\nStacktrace:\n [1] top-level scope\n   @ REPL[11]:1\n\njulia> getfield(Main, :_)\nInteractiveUtils"}]}]}]},{"client_msg_id":"2c2ddbf4-02f2-4599-890e-99e3686e8e97","type":"message","text":"TIL: LLVM 12 was branching yesterday","user":"U67BXBF99","ts":"1611800795.021300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VNXa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"TIL: LLVM 12 was branching yesterday"}]}]}]},{"client_msg_id":"83b340c4-59d2-48a3-83a6-8a36708a8bf7","type":"message","text":"Is doing nothing when using `@inbounds` before a function expected behavior?\n```julia&gt; function f()\n           x = [1,2,3]\n           @inbounds x[4]\n       end;\njulia&gt; @inbounds function g()\n           x = [1,2,3]\n           x[4]\n       end;\njulia&gt; f()\n0\njulia&gt; g()\nERROR: BoundsError: attempt to access 3-element Vector{Int64} at index [4]```\n","user":"U019S5MR0EN","ts":"1612021886.026900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eGV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is doing nothing when using "},{"type":"text","text":"@inbounds","style":{"code":true}},{"type":"text","text":" before a function expected behavior?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> function f()\n           x = [1,2,3]\n           @inbounds x[4]\n       end;\njulia> @inbounds function g()\n           x = [1,2,3]\n           x[4]\n       end;\njulia> f()\n0\njulia> g()\nERROR: BoundsError: attempt to access 3-element Vector{Int64} at index [4]"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1612021886.026900","reply_count":1,"reply_users_count":1,"latest_reply":"1612022099.027000","reply_users":["U019S5MR0EN"],"subscribed":false},{"client_msg_id":"4e1aece9-c481-4003-a6a7-199fedcfb00f","type":"message","text":"Hmmmm, I'm getting a StackOverflowError (1.6.0-beta1), but it doesn't seem to be due to endless recursive calls. What else would cause that? What else should I be trying to debug?","user":"U681ELA87","ts":"1612509651.028100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V95Gp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmmmm, I'm getting a StackOverflowError (1.6.0-beta1), but it doesn't seem to be due to endless recursive calls. What else would cause that? What else should I be trying to debug?"}]}]}]},{"client_msg_id":"42d3e15c-b1cc-426b-83e8-ea4ab29c9638","type":"message","text":"How would we feel about removing `SIGPIPE` from the list of “successful” process exits?","user":"U67BXBF99","ts":"1612810346.029000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2/u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How would we feel about removing "},{"type":"text","text":"SIGPIPE","style":{"code":true}},{"type":"text","text":" from the list of “successful” process exits?"}]}]}]},{"client_msg_id":"4268ada8-cffd-4130-a2f3-927dc29aef6a","type":"message","text":"It is a posix-ism, and so code written to assume is broken on Windows","user":"U67BXBF99","ts":"1612810376.029500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ukxy+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It is a posix-ism, and so code written to assume is broken on Windows"}]}]}]},{"client_msg_id":"2aaf507d-f505-4a2f-9d34-00d694343036","type":"message","text":"I’ve also begun to notice how it often cant signal an actual bad failure","user":"U67BXBF99","ts":"1612810886.030100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vgzJP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’ve also begun to notice how it often cant signal an actual bad failure"}]}]}]},{"client_msg_id":"9e25f9dc-fffd-4c74-a488-c8ecd23697a0","type":"message","text":"Like `cp -v` or `tar -v` can fail because of this","user":"U67BXBF99","ts":"1612811663.030500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QFf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Like "},{"type":"text","text":"cp -v","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"tar -v","style":{"code":true}},{"type":"text","text":" can fail because of this"}]}]}]},{"client_msg_id":"D03BEC21-5D82-4EDD-88BE-88E9559FED89","type":"message","text":"I noticed the work being done on unwind. Has anything surfaced that could help the MacOS issue of so many dropped snapshots, or are we stuck until apple add .cfi_startproc etc annotations?","user":"U8MPCDJAY","ts":"1612881002.032200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tTzgV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I noticed the work being done on unwind. Has anything surfaced that could help the MacOS issue of so many dropped snapshots, or are we stuck until apple add .cfi_startproc etc annotations?"}]}]}]},{"client_msg_id":"F5F7D5B4-7272-4D9E-931E-D086B43D1D30","type":"message","text":"That’s stuck until Apple fixes their libc","user":"U67BXBF99","ts":"1612899427.032900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"10=Sd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That’s stuck until Apple fixes their libc"}]}]}],"reactions":[{"name":"infinity","users":["UDB26738Q","U680THK2S"],"count":2}]},{"client_msg_id":"965a7963-165f-4095-b315-47e44583995a","type":"message","text":"I am getting very strange results of benchmarking when I run a lot of tests within a function that allocates a lot. See <https://discourse.julialang.org/t/understanding-how-gc-is-triggered/55015>. Could someone please explain the reasons of such results? Thank you. CC <@U67431ELR>","user":"U8JAMQGQY","ts":"1612992011.034700","team":"T68168MUP","edited":{"user":"U8JAMQGQY","ts":"1612992036.000000"},"blocks":[{"type":"rich_text","block_id":"qra","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am getting very strange results of benchmarking when I run a lot of tests within a function that allocates a lot. See "},{"type":"link","url":"https://discourse.julialang.org/t/understanding-how-gc-is-triggered/55015"},{"type":"text","text":". Could someone please explain the reasons of such results? Thank you. CC "},{"type":"user","user_id":"U67431ELR"}]}]}]},{"client_msg_id":"40295eab-ce6a-4a3c-8830-650d589cc599","type":"message","text":"At which point exactly in lowering does Julia decide whether variables get boxed or not? Is it just after `expand-forms` or does it linearize the ast first?","user":"UM30MT6RF","ts":"1613120559.036700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1XIgw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"At which point exactly in lowering does Julia decide whether variables get boxed or not? Is it just after "},{"type":"text","text":"expand-forms","style":{"code":true}},{"type":"text","text":" or does it linearize the ast first?"}]}]}]}]}