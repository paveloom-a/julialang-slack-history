[{"client_msg_id":"3a3805a0-8959-4216-9a35-33b05e764166","type":"message","text":"Where should I ask questions about PackageCompiler?\n\nI'm trying to compile my package on a Raspberry Pi 4 with 8GB RAM (Raspbian 32bit, Julia 1.3.1 or Julia 1.6.0) and I'm getting:\n```LLVM ERROR: out of memory\n\nsignal (6): Aborted\nin expression starting at none:0\ngsignal at /lib/arm-linux-gnueabihf/libc.so.6 (unknown line)\nAllocations: 360434104 (Pool: 360405638; Big: 28466); GC: 212\nERROR: failed process: Process(`/home/pi/julia-a8393c4a3b/bin/julia --color=yes --startup-file=no --cpu-target=native --sysimage=/home/pi/julia-a8393c4a3b/lib/julia/sys.so --project=/home/pi/pkg --output-o=/tmp/\njl_p0KhEE.o -e 'Base.reinit_stdio()\n@eval Sys BINDIR = ccall(:jl_get_julia_bindir, Any, ())::String\n@eval Sys STDLIB = \"/home/pi/julia-a8393c4a3b/share/julia/stdlib/v1.6\"\nBase.init_load_path()\nif isdefined(Base, :init_active_project)\n    Base.init_active_project()\nend\nBase.init_depot_path()\nimport SkyRoom\n# This @eval prevents symbols from being put into Main\n@eval Module() begin\n    PrecompileStagingArea = Module()\n    for (_pkgid, _mod) in Base.loaded_modules\n        if !(_pkgid.name in (\"Main\", \"Core\", \"Base\"))\n            eval(PrecompileStagingArea, :(const $(Symbol(_mod)) = $_mod))\n        end\n    end\n    precompile_statements = String[]\n        append!(precompile_statements, readlines(\"/tmp/jl_mTmBnp\"))\n    append!(precompile_statements, readlines(\"/home/pi/pkg/skyroom_precompile.jl\"))\n\n    for statement in sort(precompile_statements)\n        # println(statement)\n        # The compiler has problem caching signatures with \\`Vararg{?, N}\\`. Replacing\n        # N with a large number seems to work around it.\n        statement = replace(statement, r\"Vararg{(.*?), N} where N\" =&gt; s\"Vararg{\\1, 100}\")\n        try\n            Base.include_string(PrecompileStagingArea, statement)\n        catch\n            # See julia issue #28808\n            @debug \"failed to execute $statement\"\n        end\n    end\nend # module\nempty!(LOAD_PATH)\nempty!(DEPOT_PATH)\n'`, ProcessSignaled(6)) [0]\n\nStacktrace:\n [1] pipeline_error\n   @ ./process.jl:525 [inlined]\n [2] run(::Cmd; wait::Bool)\n   @ Base ./process.jl:440\n [3] run\n   @ ./process.jl:438 [inlined]\n [4] create_sysimg_object_file(object_file::String, packages::Vector{String}; project::String, base_sysimage::String, precompile_execution_file::Vector{String}, precompile_statements_file::Vector{String}, cpu_target::String, script::Nothing, isapp::Bool)\n   @ PackageCompiler ~/.julia/packages/PackageCompiler/KeZOk/src/PackageCompiler.jl:307\n [5] create_sysimage(packages::Symbol; sysimage_path::Nothing, project::String, precompile_execution_file::Vector{String}, precompile_statements_file::String, incremental::Bool, filter_stdlibs::Bool, replace_default::Bool, cpu_target::String, script::Nothing, base_sysimage::Nothing, isapp::Bool)\n   @ PackageCompiler ~/.julia/packages/PackageCompiler/KeZOk/src/PackageCompiler.jl:443\n [6] top-level scope\n   @ REPL[2]:1```","user":"U7PGB5DU3","ts":"1608710562.317100","team":"T68168MUP","edited":{"user":"U7PGB5DU3","ts":"1608710722.000000"},"blocks":[{"type":"rich_text","block_id":"EKP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Where should I ask questions about PackageCompiler?\n\nI'm trying to compile my package on a Raspberry Pi 4 with 8GB RAM (Raspbian 32bit, Julia 1.3.1 or Julia 1.6.0) and I'm getting:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"LLVM ERROR: out of memory\n\nsignal (6): Aborted\nin expression starting at none:0\ngsignal at /lib/arm-linux-gnueabihf/libc.so.6 (unknown line)\nAllocations: 360434104 (Pool: 360405638; Big: 28466); GC: 212\nERROR: failed process: Process(`/home/pi/julia-a8393c4a3b/bin/julia --color=yes --startup-file=no --cpu-target=native --sysimage=/home/pi/julia-a8393c4a3b/lib/julia/sys.so --project=/home/pi/pkg --output-o=/tmp/\njl_p0KhEE.o -e 'Base.reinit_stdio()\n@eval Sys BINDIR = ccall(:jl_get_julia_bindir, Any, ())::String\n@eval Sys STDLIB = \"/home/pi/julia-a8393c4a3b/share/julia/stdlib/v1.6\"\nBase.init_load_path()\nif isdefined(Base, :init_active_project)\n    Base.init_active_project()\nend\nBase.init_depot_path()\nimport SkyRoom\n# This @eval prevents symbols from being put into Main\n@eval Module() begin\n    PrecompileStagingArea = Module()\n    for (_pkgid, _mod) in Base.loaded_modules\n        if !(_pkgid.name in (\"Main\", \"Core\", \"Base\"))\n            eval(PrecompileStagingArea, :(const $(Symbol(_mod)) = $_mod))\n        end\n    end\n    precompile_statements = String[]\n        append!(precompile_statements, readlines(\"/tmp/jl_mTmBnp\"))\n    append!(precompile_statements, readlines(\"/home/pi/pkg/skyroom_precompile.jl\"))\n\n    for statement in sort(precompile_statements)\n        # println(statement)\n        # The compiler has problem caching signatures with \\`Vararg{?, N}\\`. Replacing\n        # N with a large number seems to work around it.\n        statement = replace(statement, r\"Vararg{(.*?), N} where N\" => s\"Vararg{\\1, 100}\")\n        try\n            Base.include_string(PrecompileStagingArea, statement)\n        catch\n            # See julia issue #28808\n            @debug \"failed to execute $statement\"\n        end\n    end\nend # module\nempty!(LOAD_PATH)\nempty!(DEPOT_PATH)\n'`, ProcessSignaled(6)) [0]\n\nStacktrace:\n [1] pipeline_error\n   @ ./process.jl:525 [inlined]\n [2] run(::Cmd; wait::Bool)\n   @ Base ./process.jl:440\n [3] run\n   @ ./process.jl:438 [inlined]\n [4] create_sysimg_object_file(object_file::String, packages::Vector{String}; project::String, base_sysimage::String, precompile_execution_file::Vector{String}, precompile_statements_file::Vector{String}, cpu_target::String, script::Nothing, isapp::Bool)\n   @ PackageCompiler ~/.julia/packages/PackageCompiler/KeZOk/src/PackageCompiler.jl:307\n [5] create_sysimage(packages::Symbol; sysimage_path::Nothing, project::String, precompile_execution_file::Vector{String}, precompile_statements_file::String, incremental::Bool, filter_stdlibs::Bool, replace_default::Bool, cpu_target::String, script::Nothing, base_sysimage::Nothing, isapp::Bool)\n   @ PackageCompiler ~/.julia/packages/PackageCompiler/KeZOk/src/PackageCompiler.jl:443\n [6] top-level scope\n   @ REPL[2]:1"}]}]}],"thread_ts":"1608710562.317100","reply_count":10,"reply_users_count":3,"latest_reply":"1609061258.107000","reply_users":["UH8A351DJ","U7PGB5DU3","UM30MT6RF"],"subscribed":false},{"client_msg_id":"ab9b3b05-b4d8-4e2a-bb13-b361f17f1a3f","type":"message","text":"so... what's the model of your Pi? how much memory you got?","user":"UH8A351DJ","ts":"1608710629.317200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dGvL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so... what's the model of your Pi? how much memory you got?"}]}]}],"thread_ts":"1608710562.317100","parent_user_id":"U7PGB5DU3"},{"client_msg_id":"07749c83-5203-47e1-b732-79976341b929","type":"message","text":"oh sorry, yea, RPI 4 with 8GB","user":"U7PGB5DU3","ts":"1608710662.317400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rxh2C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh sorry, yea, RPI 4 with 8GB"}]}]}],"thread_ts":"1608710562.317100","parent_user_id":"U7PGB5DU3"},{"client_msg_id":"e7c5f78e-2231-4246-a893-502f42cae286","type":"message","text":"so maxed out...","user":"U7PGB5DU3","ts":"1608710670.317600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4HYQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so maxed out..."}]}]}],"thread_ts":"1608710562.317100","parent_user_id":"U7PGB5DU3"},{"client_msg_id":"aed23bc6-24c5-4e6d-ae1c-437af096dcb2","type":"message","text":"while it's not *that surprising I guess I wound't have guessed 8GB is not enough","user":"UH8A351DJ","ts":"1608710712.317800","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1608710719.000000"},"blocks":[{"type":"rich_text","block_id":"B8rXh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"while it's not *that surprising I guess I wound't have guessed 8GB is not enough"}]}]}],"thread_ts":"1608710562.317100","parent_user_id":"U7PGB5DU3"},{"client_msg_id":"8d253947-330b-4d4a-a2c5-6098b2c9ad76","type":"message","text":"yap. this might be a tall order, but not sure why it would require more than 8GB... hmm...","user":"U7PGB5DU3","ts":"1608710753.318200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8Azt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yap. this might be a tall order, but not sure why it would require more than 8GB... hmm..."}]}]}],"thread_ts":"1608710562.317100","parent_user_id":"U7PGB5DU3"},{"client_msg_id":"e0ee96e7-a241-43dc-82e7-fa8290b130cf","type":"message","text":"This specific package depends on:\n```AbstractPlotting = \"537997a7-5e4e-5d89-9595-2241ea00577e\"\nCSV = \"336ed68f-0bac-5ca0-87d4-7b16caf5d00b\"\nDates = \"ade2ca70-3891-5945-98fb-dc099432e06a\"\nFileIO = \"5789e2e9-d7fb-5bc7-8068-2c6fae9b9549\"\nFilePathsBase = \"48062228-2e41-5def-b9a4-89aafe57970f\"\nHTTP = \"cd3eb016-35fb-5094-929b-558a96fad6f3\"\nImageCore = \"a09fc81d-aa75-5fe9-8630-4744c3626534\"\nImageMagick = \"6218d12a-5da1-5696-b52f-db25d2ecc6d1\"\nJSServe = \"824d6782-a2ef-11e9-3a09-e5662e0c26f9\"\nLibSerialPort = \"a05a14c7-6e3b-5ba9-90a2-45558833e1df\"\nMemoryHunter = \"b20f5799-67b8-4080-9e94-37bf65705cc6\"\nMissings = \"e1d29d7a-bbdc-5cf2-9ac0-f12de2c33e28\"\nObservables = \"510215fc-4207-5dde-b226-833fc4488ee2\"\nPkg = \"44cfe95a-1eb2-52ea-b672-e2afdf69b78f\"\nPyCall = \"438e738f-606a-5dbb-bf0a-cddfbfd45ab0\"\nTar = \"a4e569a6-e804-4fa4-b0f3-eef7a1d5b13e\"\nWGLMakie = \"276b4fcb-3e11-5398-bf8b-a0c2d153d008\"```","user":"U7PGB5DU3","ts":"1608710798.318400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=ur/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This specific package depends on:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"AbstractPlotting = \"537997a7-5e4e-5d89-9595-2241ea00577e\"\nCSV = \"336ed68f-0bac-5ca0-87d4-7b16caf5d00b\"\nDates = \"ade2ca70-3891-5945-98fb-dc099432e06a\"\nFileIO = \"5789e2e9-d7fb-5bc7-8068-2c6fae9b9549\"\nFilePathsBase = \"48062228-2e41-5def-b9a4-89aafe57970f\"\nHTTP = \"cd3eb016-35fb-5094-929b-558a96fad6f3\"\nImageCore = \"a09fc81d-aa75-5fe9-8630-4744c3626534\"\nImageMagick = \"6218d12a-5da1-5696-b52f-db25d2ecc6d1\"\nJSServe = \"824d6782-a2ef-11e9-3a09-e5662e0c26f9\"\nLibSerialPort = \"a05a14c7-6e3b-5ba9-90a2-45558833e1df\"\nMemoryHunter = \"b20f5799-67b8-4080-9e94-37bf65705cc6\"\nMissings = \"e1d29d7a-bbdc-5cf2-9ac0-f12de2c33e28\"\nObservables = \"510215fc-4207-5dde-b226-833fc4488ee2\"\nPkg = \"44cfe95a-1eb2-52ea-b672-e2afdf69b78f\"\nPyCall = \"438e738f-606a-5dbb-bf0a-cddfbfd45ab0\"\nTar = \"a4e569a6-e804-4fa4-b0f3-eef7a1d5b13e\"\nWGLMakie = \"276b4fcb-3e11-5398-bf8b-a0c2d153d008\""}]}]}],"thread_ts":"1608710562.317100","parent_user_id":"U7PGB5DU3"},{"client_msg_id":"55befa31-377b-41a5-a91c-7c59e497e1ec","type":"message","text":"some of these are large.","user":"U7PGB5DU3","ts":"1608710813.318600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EWo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"some of these are large."}]}]}],"thread_ts":"1608710562.317100","parent_user_id":"U7PGB5DU3","reactions":[{"name":"heavy_check_mark","users":["UH8A351DJ"],"count":1}]},{"client_msg_id":"2718ac56-41f6-47d9-aa02-ae8e87162457","type":"message","text":"Could also very well be a Julia bug. I don't think we test on ARMv7","user":"UM30MT6RF","ts":"1608716976.325500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v2k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could also very well be a Julia bug. I don't think we test on ARMv7"}]}]}],"thread_ts":"1608710562.317100","parent_user_id":"U7PGB5DU3"},{"client_msg_id":"6d0b4e73-0155-4b75-81f5-34d8a1b8009c","type":"message","text":"Might be best to open a GitHub issue on the PackageCompiler repo","user":"UM30MT6RF","ts":"1608717007.325700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sqQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Might be best to open a GitHub issue on the PackageCompiler repo"}]}]}],"thread_ts":"1608710562.317100","parent_user_id":"U7PGB5DU3"},{"client_msg_id":"c694110c-1a3e-4a20-b940-c4876f220759","type":"message","text":"Thanks, done: <https://github.com/JuliaLang/PackageCompiler.jl/issues/483>","user":"U7PGB5DU3","ts":"1609061258.107000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i15N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks, done: "},{"type":"link","url":"https://github.com/JuliaLang/PackageCompiler.jl/issues/483"}]}]}],"thread_ts":"1608710562.317100","parent_user_id":"U7PGB5DU3"}]