[{"client_msg_id":"e3df246a-9eac-4706-a1ec-978f69240158","type":"message","text":"I was wondering if anyone is familiar with the KernelDensity.jl package in julia and might know whats going on here (See thread).","user":"U01EDES26SF","ts":"1607932052.454700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SMKh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was wondering if anyone is familiar with the KernelDensity.jl package in julia and might know whats going on here (See thread)."}]}]}],"thread_ts":"1607932052.454700","reply_count":17,"reply_users_count":2,"latest_reply":"1607973283.046800","reply_users":["U01EDES26SF","UH24GRBLL"],"subscribed":false},{"client_msg_id":"64881db4-3941-40c9-b347-51c1936a312d","type":"message","text":"I'm trying to convert something like this python code:\n```from scipy.stats import gaussian_kde\nY = np.array([i**2 for i in range(1, 101)])\ngrid = np.linspace(np.min(Y), np.max(Y), 100)\nfy = gaussian_kde(Y, bw_method=\"silverman\")(grid)\nprint(fy[0:5])```\ninto julia code:\n\n```using KernelDensity\nY = [i^2 for i in 1:100]\ngrid = range(minimum(Y), maximum(Y), length=100)\nfy = kde(Y, grid).density\nprint(fy[1:5])```\nBut the results are always different.\n<https://github.com/JuliaStats/KernelDensity.jl>\n<https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.gaussian_kde.html>\nAny suggestions?","user":"U01EDES26SF","ts":"1607932061.454800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EFHB3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm trying to convert something like this python code:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"from scipy.stats import gaussian_kde\nY = np.array([i**2 for i in range(1, 101)])\ngrid = np.linspace(np.min(Y), np.max(Y), 100)\nfy = gaussian_kde(Y, bw_method=\"silverman\")(grid)\nprint(fy[0:5])"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"into julia code:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using KernelDensity\nY = [i^2 for i in 1:100]\ngrid = range(minimum(Y), maximum(Y), length=100)\nfy = kde(Y, grid).density\nprint(fy[1:5])"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"But the results are always different.\n"},{"type":"link","url":"https://github.com/JuliaStats/KernelDensity.jl"},{"type":"text","text":"\n"},{"type":"link","url":"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.gaussian_kde.html"},{"type":"text","text":"\nAny suggestions?"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"f8a3afd3-d04b-4d33-bb82-586ac5663c5f","type":"message","text":"Both are using the silverman method","user":"U01EDES26SF","ts":"1607932748.455600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9gl0x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Both are using the silverman method"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"24c367a5-11ce-49b1-969c-1d35f19bd61b","type":"message","text":"how different are they?","user":"UH24GRBLL","ts":"1607933875.459200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TXy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how different are they?"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"ff738048-a543-4a6a-9ee7-f37b8dc1737c","type":"message","text":"are you sure the two grids are equal?","user":"UH24GRBLL","ts":"1607933903.459500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MHv/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"are you sure the two grids are equal?"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"f8207a17-6f42-480a-9eda-81704d883ec0","type":"message","text":"Yea, I checked and two grids are exactly the same.  Here is the python output:\n```[0.0001189  0.00013682 0.00014173 0.00013541 0.0001229 ]```\nand here is the julia output\n```[0.00014240114216611903, 0.00015549364199413094, 0.00015341091350600083, 0.0001400091067542858, 0.00012267660100258762]```","user":"U01EDES26SF","ts":"1607972421.043900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DbR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yea, I checked and two grids are exactly the same.  Here is the python output:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"[0.0001189  0.00013682 0.00014173 0.00013541 0.0001229 ]"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and here is the julia output\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"[0.00014240114216611903, 0.00015549364199413094, 0.00015341091350600083, 0.0001400091067542858, 0.00012267660100258762]"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"7ce66e8a-850c-4041-9311-85d7404f09a6","type":"message","text":"looks like julia calcs with much higher precision","user":"UH24GRBLL","ts":"1607972587.044100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dVg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"looks like julia calcs with much higher precision"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"a60c7cc9-bdb8-40a9-b328-f6379da31483","type":"message","text":"does the linspace give Float32 by any chance?","user":"UH24GRBLL","ts":"1607972603.044400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wh+cW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does the linspace give Float32 by any chance?"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"3be786f6-e6ef-4586-a814-b48682c82245","type":"message","text":"\"numpy.float64\". Julia's range also gives \"Float64\".","user":"U01EDES26SF","ts":"1607972693.044600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gmV2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"\"numpy.float64\". Julia's range also gives \"Float64\"."}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"d5ebf488-ef26-43eb-b12e-7ab25da1c2b3","type":"message","text":"I'm looking into the source code of the two methods now to look for differences. The difference seems sort of large to me, but maybe not. It is sort of affecting the reproducibility of my analysis in julia though.","user":"U01EDES26SF","ts":"1607972764.044800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FTLtv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm looking into the source code of the two methods now to look for differences. The difference seems sort of large to me, but maybe not. It is sort of affecting the reproducibility of my analysis in julia though."}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"aacf6fd2-a3c5-49d1-98fa-70c974922e19","type":"message","text":"they look pretty close to me, maybe 10% larger at most?","user":"UH24GRBLL","ts":"1607972802.045000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GWJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"they look pretty close to me, maybe 10% larger at most?"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"27abad2a-61e4-4262-9d85-f8f5fab860e3","type":"message","text":"they're definitely still on the same scale though","user":"UH24GRBLL","ts":"1607972816.045200","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1607972831.000000"},"blocks":[{"type":"rich_text","block_id":"IUD5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"they're definitely still on the same scale though"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF","reactions":[{"name":"+1","users":["U01EDES26SF"],"count":1}]},{"client_msg_id":"1e5ad6b1-e20b-4f37-b988-1c7039a4ed30","type":"message","text":"hmm okay, thanks for the second opinion. Yea maybe it is fine then.","user":"U01EDES26SF","ts":"1607972860.045500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"halWl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm okay, thanks for the second opinion. Yea maybe it is fine then."}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"a3023143-feb6-48ce-9d22-4364dd88e15b","type":"message","text":"I'm not an expert when it comes to numpy though, so maybe there's something else going on","user":"UH24GRBLL","ts":"1607972939.045800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Oc6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not an expert when it comes to numpy though, so maybe there's something else going on"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"05f3999c-5bd7-4ef0-9967-c0f72cb24d72","type":"message","text":"I'd ask on discourse, maybe someone there knows why there's a difference.","user":"UH24GRBLL","ts":"1607972964.046000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7nI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd ask on discourse, maybe someone there knows why there's a difference."}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF","reactions":[{"name":"+1","users":["U01EDES26SF"],"count":1}]},{"client_msg_id":"6591d1f3-a4c7-4f00-8065-bd3450c791c5","type":"message","text":"My bet is on precision differences in the internal calculations done by numpy vs julia though","user":"UH24GRBLL","ts":"1607972991.046200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WvOZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My bet is on precision differences in the internal calculations done by numpy vs julia though"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF","reactions":[{"name":"pray","users":["U01EDES26SF"],"count":1}]},{"client_msg_id":"475f301d-f9e2-4643-83f0-0c22fa0afeca","type":"message","text":"You could also ping the package authors of KernelDensity, maybe they know :)","user":"UH24GRBLL","ts":"1607973051.046600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TpII","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You could also ping the package authors of KernelDensity, maybe they know :)"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"},{"client_msg_id":"fa60124b-5f0f-4c40-b9bf-46a619e9a4e4","type":"message","text":"good idea, thanks!","user":"U01EDES26SF","ts":"1607973283.046800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OLwH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"good idea, thanks!"}]}]}],"thread_ts":"1607932052.454700","parent_user_id":"U01EDES26SF"}]