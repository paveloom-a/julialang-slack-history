[{"client_msg_id":"8373868c-98e5-4c91-af3f-42b856a6ec3a","type":"message","text":"how should I compare float numbers with a tolerance?","user":"U01658MJH3P","ts":"1607964104.011600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Rok9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how should I compare float numbers with a tolerance?"}]}]}],"thread_ts":"1607964104.011600","reply_count":25,"reply_users_count":3,"latest_reply":"1607966792.033200","reply_users":["UDB26738Q","U011LUQ182G","U01658MJH3P"],"subscribed":false},{"client_msg_id":"c7e5df60-ad24-4657-b241-116ecfc89407","type":"message","text":"`isapprox`","user":"UDB26738Q","ts":"1607964133.011700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"te=Jq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"isapprox","style":{"code":true}}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"f739c15b-1fda-4dfa-9bd8-b01b6ab69074","type":"message","text":"if you use \\isapprox  or \\approx (the unicode version) it’ll compare them to a relative tolerance. works great unless both numbers are close to zero","user":"U011LUQ182G","ts":"1607964134.011900","team":"T68168MUP","edited":{"user":"U011LUQ182G","ts":"1607964148.000000"},"blocks":[{"type":"rich_text","block_id":"lHj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you use \\isapprox  or \\approx (the unicode version) it’ll compare them to a relative tolerance. works great unless both numbers are close to zero"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"230290be-b6e1-4841-9f43-4cf9050a70b7","type":"message","text":"if you have to compare numbers close/equal to 0 you need to specify the absolute tolerance with the `atol` keyword argument","user":"UDB26738Q","ts":"1607964198.012300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iK1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you have to compare numbers close/equal to 0 you need to specify the absolute tolerance with the "},{"type":"text","text":"atol","style":{"code":true}},{"type":"text","text":" keyword argument"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P","reactions":[{"name":"point_up","users":["U011LUQ182G"],"count":1}]},{"client_msg_id":"e3fcd556-3cf6-490d-aa93-1a70e666cd46","type":"message","text":"I have to check if a value is inside the closed interval [0, 1]","user":"U01658MJH3P","ts":"1607964230.012600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kW2Oh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have to check if a value is inside the closed interval [0, 1]"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"e7ea6ef7-fc37-4314-bd78-b27b6fe65878","type":"message","text":"`x &lt;= 1 &amp;&amp; x &gt;= 0`?","user":"U011LUQ182G","ts":"1607964259.012800","team":"T68168MUP","edited":{"user":"U011LUQ182G","ts":"1607964346.000000"},"blocks":[{"type":"rich_text","block_id":"c+u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"x <= 1 && x >= 0","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"03310a1a-966c-4791-acf6-757a1bdb5159","type":"message","text":"the problem is that the value might be computed and yield to something like `-4.4838719433755473e-13` which won’t satisfy that condition","user":"U01658MJH3P","ts":"1607964319.013200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DZswd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the problem is that the value might be computed and yield to something like "},{"type":"text","text":"-4.4838719433755473e-13","style":{"code":true}},{"type":"text","text":" which won’t satisfy that condition"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"3a442aa5-5f64-4d5b-8d24-723c1a7d63da","type":"message","text":"but it should","user":"U01658MJH3P","ts":"1607964323.013400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xMf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but it should"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"7f387edd-911c-4099-b166-4582d7f23287","type":"message","text":"`x &lt;= 1+tol &amp;&amp; x &gt;= -tol`~?~","user":"U011LUQ182G","ts":"1607964354.013700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Hvt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"x <= 1+tol && x >= -tol","style":{"code":true}},{"type":"text","text":"?","style":{"strike":true}}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"381e0e33-e96c-45df-a29a-4bdcddd60514","type":"message","text":"note that julia shortcircuits chained comparison operators:\n```-tol &lt;= x &lt;= 1+tol```","user":"UDB26738Q","ts":"1607964412.013900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jSf9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"note that julia shortcircuits chained comparison operators:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"-tol <= x <= 1+tol"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P","reactions":[{"name":"eyes","users":["U011LUQ182G"],"count":1}]},{"client_msg_id":"d9027fce-6a79-4156-bb56-2561a3a258d0","type":"message","text":"Julia slack: I learn something new every day","user":"U011LUQ182G","ts":"1607964439.014200","team":"T68168MUP","edited":{"user":"U011LUQ182G","ts":"1607964455.000000"},"blocks":[{"type":"rich_text","block_id":"pAsd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Julia slack: I learn something new every day"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P","reactions":[{"name":"point_up_2","users":["U01658MJH3P"],"count":1}]},{"client_msg_id":"224b98dc-f2b8-46b6-bb0d-101aaca914de","type":"message","text":"yes, I am using IntervalSets:\n```using IntervalSets\n\nT = typeof(λ)\ndomain = ClosedInterval{T}(zero(T)-tol, one(T)+tol)\nλ in domain```","user":"U01658MJH3P","ts":"1607964470.014500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ycFCn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, I am using IntervalSets:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using IntervalSets\n\nT = typeof(λ)\ndomain = ClosedInterval{T}(zero(T)-tol, one(T)+tol)\nλ in domain"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"2bff7579-dd04-4773-bcbb-a728b90fa6d2","type":"message","text":"but I wasn’t sure if that was okay or there was something else","user":"U01658MJH3P","ts":"1607964500.014700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x5J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but I wasn’t sure if that was okay or there was something else"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"a61b036f-96d2-4325-a469-b59ad99f5f46","type":"message","text":"is there a way I can select the tolerance wisely?","user":"U01658MJH3P","ts":"1607964535.015200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bXoUx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there a way I can select the tolerance wisely?"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"5e4f0610-29b7-4428-bf14-cd2f27245296","type":"message","text":"some people do a multiple of `eps()` (machine tolerance), but it usually depends on how large you expect the deviation to be","user":"U011LUQ182G","ts":"1607964588.015400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tv2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"some people do a multiple of "},{"type":"text","text":"eps()","style":{"code":true}},{"type":"text","text":" (machine tolerance), but it usually depends on how large you expect the deviation to be"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"ef729544-383a-47f6-b881-2f27f6f256ae","type":"message","text":"the absolute tolerance?  not really","user":"UDB26738Q","ts":"1607964593.015600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"R1/L","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the absolute tolerance?  not really"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"6b99d9bc-89dc-41c2-be17-1394e41cec5a","type":"message","text":"`eps()` is the machine precision around `1.0`, generally speaking is better to do something related to `eps(x)`.  `isapprox` uses the square root of that for the relative error","user":"UDB26738Q","ts":"1607964671.016300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0P2M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"eps()","style":{"code":true}},{"type":"text","text":" is the machine precision around "},{"type":"text","text":"1.0","style":{"code":true}},{"type":"text","text":", generally speaking is better to do something related to "},{"type":"text","text":"eps(x)","style":{"code":true}},{"type":"text","text":".  "},{"type":"text","text":"isapprox","style":{"code":true}},{"type":"text","text":" uses the square root of that for the relative error"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"d9a1cfe7-547c-41e2-8c51-4bac41025e40","type":"message","text":"uh, wait, no, it uses `sqrt(eps(T))`, with `T` being the type","user":"UDB26738Q","ts":"1607964726.016500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"y9J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"uh, wait, no, it uses "},{"type":"text","text":"sqrt(eps(T))","style":{"code":true}},{"type":"text","text":", with "},{"type":"text","text":"T","style":{"code":true}},{"type":"text","text":" being the type"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"7e3e8eda-bb23-42f0-839f-7d9ec6bb7439","type":"message","text":"so that's `eps(T(1))`","user":"UDB26738Q","ts":"1607964738.016700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l++","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so that's "},{"type":"text","text":"eps(T(1))","style":{"code":true}}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"d1837f53-0a28-4120-8a73-5cf3bf8292c8","type":"message","text":"mmm","user":"U01658MJH3P","ts":"1607964771.017000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F0WLA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"mmm"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"9aaa7c0c-dd9a-46a6-b58d-a69a4bbba866","type":"message","text":"See <https://en.wikipedia.org/wiki/Barycentric_coordinate_system#Determining_location_with_respect_to_a_triangle|here>, where it says “Summarizing…”","user":"U01658MJH3P","ts":"1607964821.017200","team":"T68168MUP","edited":{"user":"U01658MJH3P","ts":"1607964828.000000"},"blocks":[{"type":"rich_text","block_id":"ULZ5k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"See "},{"type":"link","url":"https://en.wikipedia.org/wiki/Barycentric_coordinate_system#Determining_location_with_respect_to_a_triangle","text":"here"},{"type":"text","text":", where it says “Summarizing…”"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"1a33ae89-7a4a-4a2c-9c3b-461e04969835","type":"message","text":"I have the lambdas, I will try to use some tolerance related to eps, but this might be to small","user":"U01658MJH3P","ts":"1607964873.017900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"06Lwg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have the lambdas, I will try to use some tolerance related to eps, but this might be to small"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"0285ec75-2ab5-4a33-bb0a-046518a05f91","type":"message","text":"but that's for the relative error","user":"UDB26738Q","ts":"1607964898.018200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9rDB5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but that's for the relative error"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"3a847374-1eab-4ce8-b0b3-262413d2735d","type":"message","text":"```julia&gt; eps(Float64(1))\n2.220446049250313e-16\n\njulia&gt; sqrt(eps(Float64))\n1.4901161193847656e-8```","user":"U01658MJH3P","ts":"1607964907.018400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UWP5","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> eps(Float64(1))\n2.220446049250313e-16\n\njulia> sqrt(eps(Float64))\n1.4901161193847656e-8"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"e0a2ae87-bc5b-4b66-aca7-edfc5152ea1b","type":"message","text":"yeah, I know, that is why is too small :smile:","user":"U01658MJH3P","ts":"1607964942.018700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oY72","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, I know, that is why is too small "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P"},{"client_msg_id":"97a397e9-f32c-461a-9eda-885a8e2ca2b5","type":"message","text":"thank you both!","user":"U01658MJH3P","ts":"1607966792.033200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mDRF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thank you both!"}]}]}],"thread_ts":"1607964104.011600","parent_user_id":"U01658MJH3P","reactions":[{"name":"+1","users":["U011LUQ182G"],"count":1}]}]