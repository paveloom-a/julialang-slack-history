[{"client_msg_id":"55618b11-195d-47a8-a4c0-2d9ccbe606a0","type":"message","text":"Hi All,\n\nCan anybody please help me here?\nWhy this code does not initiate a sharedarray (x) on all workers?\n\nThanks.\n```using Distributed                                                                                                                                                           \n\n@everywhere using  SharedArrays\naddprocs(4)\n\nfunction start_shared_array(N)\n    new = SharedArray{Float64,3}(N, N, N)  \n\n    for i=1:5\n        old = deepcopy(new)\n\n        @sync @distributed for j=1:length(new)\n            new[j]  = old[j] + 1\n        end\n    end\n\n    return new\nend\n\nx = start_shared_array(2)\n\nprintln(typeof(x),\" \", procs(x) )```","user":"U01H3MBQDDF","ts":"1607945412.492200","team":"T68168MUP","edited":{"user":"U01H3MBQDDF","ts":"1607945457.000000"},"blocks":[{"type":"rich_text","block_id":"cEF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi All,\n\nCan anybody please help me here?\nWhy this code does not initiate a sharedarray (x) on all workers?\n\nThanks.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Distributed                                                                                                                                                           \n\n@everywhere using  SharedArrays\naddprocs(4)\n\nfunction start_shared_array(N)\n    new = SharedArray{Float64,3}(N, N, N)  \n\n    for i=1:5\n        old = deepcopy(new)\n\n        @sync @distributed for j=1:length(new)\n            new[j]  = old[j] + 1\n        end\n    end\n\n    return new\nend\n\nx = start_shared_array(2)\n\nprintln(typeof(x),\" \", procs(x) )"}]}]}],"thread_ts":"1607945412.492200","reply_count":4,"reply_users_count":3,"latest_reply":"1607966854.033800","reply_users":["U01GZQ6B0JU","UH24GRBLL","U01H3MBQDDF"],"subscribed":false},{"client_msg_id":"948b0d64-603c-4e26-8eb2-e661c15c41c6","type":"message","text":"I think you need to use `@everywhere` macro on the function `start_shared_array` as well","user":"U01GZQ6B0JU","ts":"1607945903.492400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J7L","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think you need to use "},{"type":"text","text":"@everywhere","style":{"code":true}},{"type":"text","text":" macro on the function "},{"type":"text","text":"start_shared_array","style":{"code":true}},{"type":"text","text":" as well"}]}]}],"thread_ts":"1607945412.492200","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"ff3f4f65-392e-4bad-8af5-51785c2134d1","type":"message","text":"put `addprocs` before `@everywhere using SharedArrays`","user":"UH24GRBLL","ts":"1607947157.494100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k8aL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"put "},{"type":"text","text":"addprocs","style":{"code":true}},{"type":"text","text":" before "},{"type":"text","text":"@everywhere using SharedArrays","style":{"code":true}}]}]}],"thread_ts":"1607945412.492200","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"6ef675b5-a5d5-4a7d-bf59-f91af8bf8449","type":"message","text":"Not sure if i need to load the function everywhere.","user":"U01H3MBQDDF","ts":"1607966800.033400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zza4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not sure if i need to load the function everywhere."}]}]}],"thread_ts":"1607945412.492200","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"ca211d9b-1164-417c-9299-f8a3672bd16a","type":"message","text":"Yes, we had to put addprocs before. However, it does not help. What I noticed is that if I use copy instead of deepcopy, it seems to be working.","user":"U01H3MBQDDF","ts":"1607966854.033800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MmypM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, we had to put addprocs before. However, it does not help. What I noticed is that if I use copy instead of deepcopy, it seems to be working."}]}]}],"thread_ts":"1607945412.492200","parent_user_id":"U01H3MBQDDF"}]