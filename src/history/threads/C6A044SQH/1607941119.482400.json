[{"client_msg_id":"b35abf89-59b1-44a3-bf7a-a22e28b6c849","type":"message","text":"Can anyone explain these results?\n\n`julia&gt; xs = rand(1000000);`\n\n`julia&gt; @btime maximum(xs) - minimum(xs)`\n  `1.007 ms (3 allocations: 48 bytes)`\n`0.9999996733689187`\n\n`julia&gt; @btime -(-(extrema(xs)...))`\n  `2.337 ms (5 allocations: 96 bytes)`\n`0.9999996733689187`\n\n`julia&gt; @btime extrema(xs)`\n  `2.337 ms (1 allocation: 32 bytes)`\n`(4.216218330022059e-8, 0.999999715531102)`\n\n`julia&gt; @btime maximum(xs), minimum(xs)`\n  `1.009 ms (3 allocations: 64 bytes)`\n`(0.999999715531102, 4.216218330022059e-8)`\n\nI would expect the second run to be faster because `extrema()` is supposed to compute the extrema in `O(n)` instead of `O(2n)` as in the first run. And according to the third run, most of the time is spent in calculation of the extrema, so how come it's this slow in comparison to separate computations of the maximum and minimum?","user":"U01G1P8A46S","ts":"1607941119.482400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E6/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can anyone explain these results?\n\n"},{"type":"text","text":"julia> xs = rand(1000000);","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"julia> @btime maximum(xs) - minimum(xs)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"  1.007 ms (3 allocations: 48 bytes)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"0.9999996733689187","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"julia> @btime -(-(extrema(xs)...))","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"  2.337 ms (5 allocations: 96 bytes)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"0.9999996733689187","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"julia> @btime extrema(xs)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"  2.337 ms (1 allocation: 32 bytes)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"(4.216218330022059e-8, 0.999999715531102)","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"julia> @btime maximum(xs), minimum(xs)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"  1.009 ms (3 allocations: 64 bytes)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"(0.999999715531102, 4.216218330022059e-8)","style":{"code":true}},{"type":"text","text":"\n\nI would expect the second run to be faster because "},{"type":"text","text":"extrema()","style":{"code":true}},{"type":"text","text":" is supposed to compute the extrema in "},{"type":"text","text":"O(n)","style":{"code":true}},{"type":"text","text":" instead of "},{"type":"text","text":"O(2n)","style":{"code":true}},{"type":"text","text":" as in the first run. And according to the third run, most of the time is spent in calculation of the extrema, so how come it's this slow in comparison to separate computations of the maximum and minimum?"}]}]}],"thread_ts":"1607941119.482400","reply_count":3,"reply_users_count":2,"latest_reply":"1607941582.487100","reply_users":["U012XER8K4M","UD0NS8PDF"],"subscribed":false},{"client_msg_id":"63caabf3-53f0-402d-85ee-3a49ceeb25e2","type":"message","text":"Remember you need to interpolate the variables you test on, `$xs` , but, regardless. extrema looks to be slower. I have no answer for that.","user":"U012XER8K4M","ts":"1607941506.485600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cbf8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Remember you need to interpolate the variables you test on, "},{"type":"text","text":"$xs","style":{"code":true}},{"type":"text","text":" , but, regardless. extrema looks to be slower. I have no answer for that."}]}]}],"thread_ts":"1607941119.482400","parent_user_id":"U01G1P8A46S"},{"client_msg_id":"59bd7594-7109-4382-ab89-6ed7d773fedc","type":"message","text":"I think this is a known performance bug. It ought to be quicker, as you say, but there are various tricks implemented for `maximum` (involving SIMD maybe?) which haven’t got done for `extrema`.","user":"UD0NS8PDF","ts":"1607941566.486600","team":"T68168MUP","edited":{"user":"UD0NS8PDF","ts":"1607941725.000000"},"blocks":[{"type":"rich_text","block_id":"23S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think this is a known performance bug. It ought to be quicker, as you say, but there are various tricks implemented for "},{"type":"text","text":"maximum","style":{"code":true}},{"type":"text","text":" (involving SIMD maybe?) which haven’t got done for "},{"type":"text","text":"extrema","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1607941119.482400","parent_user_id":"U01G1P8A46S"},{"client_msg_id":"f4704328-b6d8-49ba-9809-32d8071b0044","type":"message","text":"<https://github.com/JuliaLang/julia/issues/31442>","user":"U012XER8K4M","ts":"1607941582.487100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L4c","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/julia/issues/31442"}]}]}],"thread_ts":"1607941119.482400","parent_user_id":"U01G1P8A46S","reactions":[{"name":"heavy_check_mark","users":["UD0NS8PDF"],"count":1}]}]