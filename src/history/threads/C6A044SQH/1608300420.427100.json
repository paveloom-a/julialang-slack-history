[{"type":"message","text":"It takes for ever to plot this using `Plots.jl` and I think it should’t! The plot is formed by tracks. Each track has segments with a start and end coordinate. The recipe for the track plot is in the thread","files":[{"id":"F01HY31CXG8","created":1608300241,"timestamp":1608300241,"name":"segments.pdf","title":"segments.pdf","mimetype":"application/pdf","filetype":"pdf","pretty_type":"PDF","user":"U01658MJH3P","editable":false,"size":429955,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01HY31CXG8/segments.pdf","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01HY31CXG8/download/segments.pdf","thumb_pdf":"https://files.slack.com/files-tmb/T68168MUP-F01HY31CXG8-9612e0a5b8/segments_thumb_pdf.png","thumb_pdf_w":458,"thumb_pdf_h":458,"permalink":"https://julialang.slack.com/files/U01658MJH3P/F01HY31CXG8/segments.pdf","permalink_public":"https://slack-files.com/T68168MUP-F01HY31CXG8-2fcc4ba5d2","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"Tc04","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It takes for ever to plot this using "},{"type":"text","text":"Plots.jl","style":{"code":true}},{"type":"text","text":" and I think it should’t! The plot is formed by tracks. Each track has segments with a start and end coordinate. The recipe for the track plot is in the thread"}]}]}],"user":"U01658MJH3P","display_as_bot":false,"ts":"1608300420.427100","thread_ts":"1608300420.427100","reply_count":4,"reply_users_count":2,"latest_reply":"1608420613.019800","reply_users":["U01658MJH3P","U67G3QRJM"],"subscribed":false},{"client_msg_id":"bfdb7f31-b679-4e2a-b30a-8ce7eb4f18c9","type":"message","text":"```@recipe function plot(segments::Vector{Segment})\n\n    n = length(segments)\n    x = Matrix{Float64}(undef, 2, n) # TODO: compute Float64\n    y = Matrix{Float64}(undef, 2, n)\n    z = Matrix{Float64}(undef, 2, n)\n\n    for (i, segment) in enumerate(segments)\n        x[1, i] = segment.xi[1]\n        x[2, i] = segment.xo[1]\n        y[1, i] = segment.xi[2]\n        y[2, i] = segment.xo[2]\n        z[1, i] = segment.element\n        z[2, i] = segment.element\n    end\n\n    seriestype  :=  :path\n    linewidth   --&gt; 0.25\n    legend      --&gt; false\n    framestyle  :=  :none\n    line_z      :=  z\n\n    return (x, y)\nend```\nIn order to plot the figure, I call this function for each vector of segments:\n```for i in 1:tg.n_total_tracks; plot!(tg.tracks_by_uid[i].segments); end;```\n","user":"U01658MJH3P","ts":"1608300500.427400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=JbL","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@recipe function plot(segments::Vector{Segment})\n\n    n = length(segments)\n    x = Matrix{Float64}(undef, 2, n) # TODO: compute Float64\n    y = Matrix{Float64}(undef, 2, n)\n    z = Matrix{Float64}(undef, 2, n)\n\n    for (i, segment) in enumerate(segments)\n        x[1, i] = segment.xi[1]\n        x[2, i] = segment.xo[1]\n        y[1, i] = segment.xi[2]\n        y[2, i] = segment.xo[2]\n        z[1, i] = segment.element\n        z[2, i] = segment.element\n    end\n\n    seriestype  :=  :path\n    linewidth   --> 0.25\n    legend      --> false\n    framestyle  :=  :none\n    line_z      :=  z\n\n    return (x, y)\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"In order to plot the figure, I call this function for each vector of segments:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"for i in 1:tg.n_total_tracks; plot!(tg.tracks_by_uid[i].segments); end;"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1608300420.427100","parent_user_id":"U01658MJH3P"},{"client_msg_id":"9dd27986-3b5d-4008-b4d0-64d601db6854","type":"message","text":"Don’t plot each line separately — combine them into one single series and separate them with `NaN`s. That should be much faster","user":"U67G3QRJM","ts":"1608419724.019400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hJML","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Don’t plot each line separately — combine them into one single series and separate them with `NaN`s. That should be much faster"}]}]}],"thread_ts":"1608300420.427100","parent_user_id":"U01658MJH3P"},{"client_msg_id":"27579b73-4bc8-45d6-af03-3105a7dd6389","type":"message","text":"Hi David, thanks for your kind answer.\n\nI tried both things. Sadly with NaNs does not work if you use the `line_z` attribute.  That is why I had to separate them.","user":"U01658MJH3P","ts":"1608420473.019600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MA8G0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi David, thanks for your kind answer.\n\nI tried both things. Sadly with NaNs does not work if you use the "},{"type":"text","text":"line_z","style":{"code":true}},{"type":"text","text":" attribute.  That is why I had to separate them."}]}]}],"thread_ts":"1608300420.427100","parent_user_id":"U01658MJH3P"},{"client_msg_id":"d63b5ed6-321c-45ab-bc52-411d1a60a8a5","type":"message","text":"here is the thread about that issue: <https://julialang.slack.com/archives/C6A044SQH/p1608249598393300?thread_ts=1608249461.392000&amp;cid=C6A044SQH>","user":"U01658MJH3P","ts":"1608420613.019800","team":"T68168MUP","attachments":[{"from_url":"https://julialang.slack.com/archives/C6A044SQH/p1608249598393300?thread_ts=1608249461.392000&amp;cid=C6A044SQH","fallback":"[December 17th, 2020 3:59 PM] ramirovignolo: I need this plot, but each line with a specific color given by `z`\n```julia&gt; x = [0.1, 0.2, NaN, 0.5, 0.2];\n\njulia&gt; y = [0.45, 0.65, NaN, 0.90, 1.8];\n\njulia&gt; z = [10., 10., NaN, 20., 20.];\n\njulia&gt; plot(x, y, seriestype = :path, markershape = :circle)```","ts":"1608249598.393300","author_id":"U01658MJH3P","author_subname":"Ramiro Vignolo","channel_id":"C6A044SQH","channel_name":"helpdesk","is_msg_unfurl":true,"is_reply_unfurl":true,"text":"I need this plot, but each line with a specific color given by `z`\n```julia&gt; x = [0.1, 0.2, NaN, 0.5, 0.2];\n\njulia&gt; y = [0.45, 0.65, NaN, 0.90, 1.8];\n\njulia&gt; z = [10., 10., NaN, 20., 20.];\n\njulia&gt; plot(x, y, seriestype = :path, markershape = :circle)```","author_name":"Ramiro Vignolo","author_link":"https://julialang.slack.com/team/U01658MJH3P","author_icon":"https://avatars.slack-edge.com/2020-06-29/1206219119862_7f2d190f2a41b575fa6e_48.jpg","mrkdwn_in":["text"],"id":1,"original_url":"https://julialang.slack.com/archives/C6A044SQH/p1608249598393300?thread_ts=1608249461.392000&amp;cid=C6A044SQH","footer":"From a thread in #helpdesk"}],"blocks":[{"type":"rich_text","block_id":"Ahk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"here is the thread about that issue: "},{"type":"link","url":"https://julialang.slack.com/archives/C6A044SQH/p1608249598393300?thread_ts=1608249461.392000&cid=C6A044SQH"}]}]}],"thread_ts":"1608300420.427100","parent_user_id":"U01658MJH3P"}]