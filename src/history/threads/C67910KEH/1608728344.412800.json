[{"client_msg_id":"e2a7217d-05f7-401a-b2b4-fafe307922cc","type":"message","text":"Any way to ensure that compat bounds stay \"correct\"? Suppose I started developing package A and put B=0.1 in its dependencies. Then new versions of B come out, and A's compat is now B=0.1,0.2,0.3,0.4. But turns out that A uses some feature that appeared in B@0.3, and is not compatible with earlier versions anymore. How to catch this? `Pkg.test` installs latest versions that fit compats, so it will never catch the failure.","user":"UGTUKUHLN","ts":"1608728344.412800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VKY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Any way to ensure that compat bounds stay \"correct\"? Suppose I started developing package A and put B=0.1 in its dependencies. Then new versions of B come out, and A's compat is now B=0.1,0.2,0.3,0.4. But turns out that A uses some feature that appeared in B@0.3, and is not compatible with earlier versions anymore. How to catch this? "},{"type":"text","text":"Pkg.test","style":{"code":true}},{"type":"text","text":" installs latest versions that fit compats, so it will never catch the failure."}]}]}],"thread_ts":"1608728344.412800","reply_count":26,"reply_users_count":4,"latest_reply":"1608739723.422000","reply_users":["UH24GRBLL","UGTUKUHLN","U6A936746","U0179G7FG4F"],"subscribed":false},{"client_msg_id":"683fb4a2-c5f1-4f33-8e52-77aad08b0774","type":"message","text":"in semver, `0.2` is breaking because it's a `0.x`, so I think you wouldn't ever get `0.2` in A","user":"UH24GRBLL","ts":"1608729401.413000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pPo5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in semver, "},{"type":"text","text":"0.2","style":{"code":true}},{"type":"text","text":" is breaking because it's a "},{"type":"text","text":"0.x","style":{"code":true}},{"type":"text","text":", so I think you wouldn't ever get "},{"type":"text","text":"0.2","style":{"code":true}},{"type":"text","text":" in A"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"fa52eda2-b779-4f87-95b3-1edecbbc6571","type":"message","text":"in any case, CompatHelper can do this, I think","user":"UH24GRBLL","ts":"1608729418.413200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Xt4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in any case, CompatHelper can do this, I think"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"0e3cb4c9-7e53-462b-bf1c-a097e7f60b20","type":"message","text":"Can you elaborate? I don't see how this issue is related to CompatHelper at all. CH checks that A's compat contain the latest version of B, that's basically it.","user":"UGTUKUHLN","ts":"1608729477.413400","team":"T68168MUP","edited":{"user":"UGTUKUHLN","ts":"1608729489.000000"},"blocks":[{"type":"rich_text","block_id":"96ro","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can you elaborate? I don't see how this issue is related to CompatHelper at all. CH checks that A's compat contain the latest version of B, that's basically it."}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"a261866e-5d44-42f2-84ba-8add269df84e","type":"message","text":"Yeah this is annoying.\nI also want a way to test on the oldest version of things I say I support.","user":"U6A936746","ts":"1608729633.413700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+Nh/H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah this is annoying.\nI also want a way to test on the oldest version of things I say I support."}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"8d088478-92a7-4548-b631-6ed99d50fe5b","type":"message","text":"I would guess there are lots of packages that do not actually work with oldest dependency versions specified in compat...","user":"UGTUKUHLN","ts":"1608729789.413900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CRUP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would guess there are lots of packages that do not actually work with oldest dependency versions specified in compat..."}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"661806c6-bfc4-45d0-8ab8-ede47fb1642f","type":"message","text":"<https://julialang.github.io/Pkg.jl/v1/compatibility/#compat-pre-1.0>","user":"UH24GRBLL","ts":"1608729844.414100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j6i6c","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://julialang.github.io/Pkg.jl/v1/compatibility/#compat-pre-1.0"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"b40bcc7b-77a2-4933-9eba-2bfb1a00881c","type":"message","text":"And it's not trivial to test, by the way. I tried naively putting oldest versions of all dependencies into compat, but typically it doesn't work just because those versions are not compatible with each other.","user":"UGTUKUHLN","ts":"1608729857.414300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ygVHs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And it's not trivial to test, by the way. I tried naively putting oldest versions of all dependencies into compat, but typically it doesn't work just because those versions are not compatible with each other."}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"ae8d6fc9-6147-408c-a4b7-084917fa7688","type":"message","text":"So if you specify `B=0.2`, you would never get `0.3` because in `0.x`, that specifier is `[0.2, 0.3)`","user":"UH24GRBLL","ts":"1608729879.414500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uyzL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So if you specify "},{"type":"text","text":"B=0.2","style":{"code":true}},{"type":"text","text":", you would never get "},{"type":"text","text":"0.3","style":{"code":true}},{"type":"text","text":" because in "},{"type":"text","text":"0.x","style":{"code":true}},{"type":"text","text":", that specifier is "},{"type":"text","text":"[0.2, 0.3)","style":{"code":true}}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"ab0023f5-380a-4991-9aae-ef0f361c7bca","type":"message","text":"but yeah, the oldest compatible depency for testing would be nice as well","user":"UH24GRBLL","ts":"1608729906.414700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SynTf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but yeah, the oldest compatible depency for testing would be nice as well"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"b06958e8-d1c2-4e9d-b9a1-47a40dc56941","type":"message","text":"<@UH24GRBLL> sure, but this 0.x stuff is not really related to the question.","user":"UGTUKUHLN","ts":"1608729908.414900","team":"T68168MUP","edited":{"user":"UGTUKUHLN","ts":"1608729924.000000"},"blocks":[{"type":"rich_text","block_id":"yV0","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UH24GRBLL"},{"type":"text","text":" sure, but this 0.x stuff is not really related to the question."}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"9567fc9c-da90-4330-b3f5-646fa8a4e44a","type":"message","text":"What I'm saying is that this would be caught earlier in the process, at least for 0.x versions","user":"UH24GRBLL","ts":"1608729934.415200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gmMq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What I'm saying is that this would be caught earlier in the process, at least for 0.x versions"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"635eebc8-77df-4cd3-93e4-11b5744988f7","type":"message","text":"I agree though that for `1.x` versions this doesn't help","user":"UH24GRBLL","ts":"1608729946.415400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qem","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I agree though that for "},{"type":"text","text":"1.x","style":{"code":true}},{"type":"text","text":" versions this doesn't help"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"421fd0b9-3797-479f-9de8-4c04cdc2cce2","type":"message","text":"It doesn't matter at all whether versions are 0.x or x.x.","user":"UGTUKUHLN","ts":"1608729962.415600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1FeSp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It doesn't matter at all whether versions are 0.x or x.x."}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"6156ff75-15c7-4ed4-a70e-149189e0fd40","type":"message","text":"Just replace 0.1 -&gt; 1.0, 0.2 -&gt; 2.0, etc in my question","user":"UGTUKUHLN","ts":"1608729983.415800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AFTP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Just replace 0.1 -> 1.0, 0.2 -> 2.0, etc in my question"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"e572276d-3edf-4415-af23-c0eea14e3a51","type":"message","text":"You need to replace the 0.1-&gt; 1.1, 0.2-&gt;1.2\nto get what you mean.","user":"U6A936746","ts":"1608730074.416000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NHl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You need to replace the 0.1-> 1.1, 0.2->1.2\nto get what you mean."}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"d5c825ed-fcf5-4c16-ac7f-d9a9f5c7bb25","type":"message","text":"It does somewhat matter, 1.0 and 2.0 would again be caught by not being able to develop A with B@2.0 and the compat specifier being `B=1.0` at all, since you can't install B@2.0 if A specified compat `B=1.0` (since that means `[1.0, 2.0)`.","user":"UH24GRBLL","ts":"1608730099.416200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DPEzP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It does somewhat matter, 1.0 and 2.0 would again be caught by not being able to develop A with B@2.0 and the compat specifier being "},{"type":"text","text":"B=1.0","style":{"code":true}},{"type":"text","text":" at all, since you can't install B@2.0 if A specified compat "},{"type":"text","text":"B=1.0","style":{"code":true}},{"type":"text","text":" (since that means "},{"type":"text","text":"[1.0, 2.0)","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"70cb8a5f-34e6-470d-88bb-f8e7abb558ef","type":"message","text":"Yes, you'd need e.g. `compat B=1.2` and the feature is introduced in B@1.3","user":"UH24GRBLL","ts":"1608730122.416400","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1608730125.000000"},"blocks":[{"type":"rich_text","block_id":"+i9qi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, you'd need e.g. "},{"type":"text","text":"compat B=1.2","style":{"code":true}},{"type":"text","text":" and the feature is introduced in B@1.3"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"c68383d2-76a7-4dbf-b8a6-cb799a999618","type":"message","text":"Sure but that's not the point. It's a incorrect/unclear side detail, as I read it","user":"U6A936746","ts":"1608730130.416700","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1608730188.000000"},"blocks":[{"type":"rich_text","block_id":"dZL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sure but that's not the point. It's a incorrect/unclear side detail, as I read it"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"d5f74929-a94c-49b8-bf37-809bf373f3f0","type":"message","text":"yeah, sure","user":"UH24GRBLL","ts":"1608730177.417000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JWb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, sure"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"229568ed-b8e8-46eb-ad71-0501e67bf7c8","type":"message","text":"<@U6A936746> are you aware if such issues were discussed anywhere? looks pretty serious to me, that compats easily become obsolete","user":"UGTUKUHLN","ts":"1608730213.417300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dCD","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6A936746"},{"type":"text","text":" are you aware if such issues were discussed anywhere? looks pretty serious to me, that compats easily become obsolete"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"99f63bde-4225-4c20-a796-ba59b61524a3","type":"message","text":"I have a issue on Pkg about it","user":"U6A936746","ts":"1608730247.417500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8UNfA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a issue on Pkg about it"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"d2939597-c5db-4cec-8d6d-564a404dfa04","type":"message","text":"for now latest package versions are preferred by pkg\nmaybe just a switch for the opposite behaviour would be helpful?..","user":"UGTUKUHLN","ts":"1608730354.417700","team":"T68168MUP","edited":{"user":"UGTUKUHLN","ts":"1608730921.000000"},"blocks":[{"type":"rich_text","block_id":"KskF1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for now latest package versions are preferred by pkg\nmaybe just a switch for the opposite behaviour would be helpful?.."}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"071e0f4f-9edb-47d5-bae3-942de270ced8","type":"message","text":"that would be incredibly annoying. If adding packages added the least recent compatible version, it would be impossible to get new versions without manually specifying","user":"U0179G7FG4F","ts":"1608738592.421200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2+iL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that would be incredibly annoying. If adding packages added the least recent compatible version, it would be impossible to get new versions without manually specifying"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"e6997936-5fd0-4fdb-900e-0d15b39c75c1","type":"message","text":"I don't get how a switch would be annoying? e.g. `]instantiate --oldest`, `]test --oldest`, etc","user":"UGTUKUHLN","ts":"1608739277.421600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jkr4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't get how a switch would be annoying? e.g. "},{"type":"text","text":"]instantiate --oldest","style":{"code":true}},{"type":"text","text":", "},{"type":"text","text":"]test --oldest","style":{"code":true}},{"type":"text","text":", etc"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"2e68ba78-7b08-4269-9160-18cdf6a40850","type":"message","text":"I missed that you were proposing it as a switch (read it as default). Sorry!","user":"U0179G7FG4F","ts":"1608739493.421800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qmu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I missed that you were proposing it as a switch (read it as default). Sorry!"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"d76b413b-b841-4c86-83c7-93cf4a1d2d05","type":"message","text":"I bet lots of packages would fail such a test (with oldest `compat`ible versions), especially those that are developed for a long time","user":"UGTUKUHLN","ts":"1608739723.422000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ol0L","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I bet lots of packages would fail such a test (with oldest "},{"type":"text","text":"compat","style":{"code":true}},{"type":"text","text":"ible versions), especially those that are developed for a long time"}]}]}],"thread_ts":"1608728344.412800","parent_user_id":"UGTUKUHLN"}]