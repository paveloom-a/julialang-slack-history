[{"client_msg_id":"3d3428c6-4245-4420-8142-11d3723b27ed","type":"message","text":"We are getting artifact unpack errors on Windows for .tar files (at least two people now): <https://discourse.julialang.org/t/unable-to-automatically-install-artifact/51984|https://discourse.julialang.org/t/unable-to-automatically-install-artifact/51984>. Shall I create an issue?","user":"UTHKW0GSH","ts":"1608289332.161700","team":"T68168MUP","attachments":[{"service_name":"JuliaLang","title":"Unable to automatically install artifact","title_link":"https://discourse.julialang.org/t/unable-to-automatically-install-artifact/51984","text":"Iâ€™m trying to setup an automatic julia artifact download for brainflow. However I am encountering a .tar unpacking error. Let me elaborate. Here is my script to generate the artifact in a folder with an Artifacts.toml folder: using SHA using Pkg using Pkg.Artifacts using Tar url = \"<https://github.com/brainflow-dev/brainflow/releases/download/3.7.2/compiled_libs.tar>\" download_path = \"$(tempname())-download.tar\" download(url, download_path) brainflow_hash = create_artifact() do artifact_dir ...","fallback":"JuliaLang: Unable to automatically install artifact","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","ts":1608216473,"from_url":"https://discourse.julialang.org/t/unable-to-automatically-install-artifact/51984","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/unable-to-automatically-install-artifact/51984"}],"blocks":[{"type":"rich_text","block_id":"gsO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We are getting artifact unpack errors on Windows for .tar files (at least two people now): "},{"type":"link","url":"https://discourse.julialang.org/t/unable-to-automatically-install-artifact/51984","text":"https://discourse.julialang.org/t/unable-to-automatically-install-artifact/51984"},{"type":"text","text":". Shall I create an issue?"}]}]}],"thread_ts":"1608289332.161700","reply_count":3,"reply_users_count":1,"latest_reply":"1608291132.164600","reply_users":["UDB26738Q"],"subscribed":false},{"client_msg_id":"bf172fb6-4254-44d3-acbe-9a18d45a939c","type":"message","text":"I think the tarball has some issues.  with Julia v1.6 I get this:\n```julia&gt; add_artifact!(\n                  \"Artifacts.toml\",\n                  \"brainflow\",\n                  \"<https://github.com/brainflow-dev/brainflow/releases/download/3.7.2/compiled_libs.tar>\",\n                  force=true,\n              )\nERROR: invalid octal digit: ';'\nStacktrace:\n  [1] error(s::String)\n    @ Base ./error.jl:33\n  [2] read_header_int(buf::SubArray{UInt8, 1, Vector{UInt8}, Tuple{UnitRange{Int64}}, true}, offset::Int64, length::Int64)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/extract.jl:513\n  [3] read_standard_header(io::Base.Process; buf::Vector{UInt8}, tee::Base.DevNull)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/extract.jl:472\n  [4] #read_header#46\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/extract.jl:349 [inlined]\n  [5] read_tarball(callback::Tar.var\"#25#27\"{Vector{UInt8}, Bool, Base.Process, String}, predicate::Tar.var\"#1#2\", tar::Base.Process; buf::Vector{UInt8}, skeleton::Base.DevNull)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/extract.jl:310\n  [6] extract_tarball(predicate::Function, tar::Base.Process, root::String; buf::Vector{UInt8}, skeleton::Base.DevNull, copy_symlinks::Bool)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/extract.jl:57\n  [7] (::Tar.var\"#75#78\"{String, Base.Process, Tar.var\"#1#2\"})(skeleton::Base.DevNull)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/Tar.jl:201\n  [8] arg_write(f::Tar.var\"#75#78\"{String, Base.Process, Tar.var\"#1#2\"}, arg::Base.DevNull)\n    @ ArgTools ~/repo/julia/usr/share/julia/stdlib/v1.6/ArgTools/src/ArgTools.jl:112\n  [9] #74\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/Tar.jl:200 [inlined]\n [10] arg_mkdir(f::Tar.var\"#74#77\"{Base.Process, Base.DevNull, Tar.var\"#1#2\"}, arg::String)\n    @ ArgTools ~/repo/julia/usr/share/julia/stdlib/v1.6/ArgTools/src/ArgTools.jl:163\n [11] #73\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/Tar.jl:196 [inlined]\n [12] open(::Tar.var\"#73#76\"{Base.DevNull, Tar.var\"#1#2\", String}, ::Cmd; kwargs::Base.Iterators.Pairs{Union{}, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})\n    @ Base ./process.jl:393\n [13] open(::Function, ::Cmd)\n    @ Base ./process.jl:391\n [14] arg_read\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/ArgTools/src/ArgTools.jl:60 [inlined]\n [15] extract(predicate::Function, tarball::Cmd, dir::String; skeleton::Nothing, copy_symlinks::Nothing)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/Tar.jl:195\n [16] #extract#79\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/Tar.jl:217 [inlined]\n [17] unpack(tarball_path::String, dest::String; verbose::Bool)\n    @ Pkg.PlatformEngines ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/PlatformEngines.jl:357\n [18] unpack\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/PlatformEngines.jl:357 [inlined]\n [19] #4\n    @ ~/.julia/packages/ArtifactUtils/LuOIH/src/ArtifactUtils.jl:57 [inlined]\n [20] create_artifact(f::ArtifactUtils.var\"#4#5\"{String})\n    @ Pkg.Artifacts ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Artifacts.jl:43\n [21] add_artifact!(artifacts_toml::String, name::String, tarball_url::String; clear::Bool, options::Base.Iterators.Pairs{Symbol, Bool, Tuple{Symbol}, NamedTuple{(:force,), Tuple{Bool}}})\n    @ ArtifactUtils ~/.julia/packages/ArtifactUtils/LuOIH/src/ArtifactUtils.jl:56\n [22] top-level scope\n    @ REPL[26]:1```","user":"UDB26738Q","ts":"1608289848.162500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FGC1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the tarball has some issues.  with Julia v1.6 I get this:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> add_artifact!(\n                  \"Artifacts.toml\",\n                  \"brainflow\",\n                  \""},{"type":"link","url":"https://github.com/brainflow-dev/brainflow/releases/download/3.7.2/compiled_libs.tar"},{"type":"text","text":"\",\n                  force=true,\n              )\nERROR: invalid octal digit: ';'\nStacktrace:\n  [1] error(s::String)\n    @ Base ./error.jl:33\n  [2] read_header_int(buf::SubArray{UInt8, 1, Vector{UInt8}, Tuple{UnitRange{Int64}}, true}, offset::Int64, length::Int64)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/extract.jl:513\n  [3] read_standard_header(io::Base.Process; buf::Vector{UInt8}, tee::Base.DevNull)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/extract.jl:472\n  [4] #read_header#46\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/extract.jl:349 [inlined]\n  [5] read_tarball(callback::Tar.var\"#25#27\"{Vector{UInt8}, Bool, Base.Process, String}, predicate::Tar.var\"#1#2\", tar::Base.Process; buf::Vector{UInt8}, skeleton::Base.DevNull)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/extract.jl:310\n  [6] extract_tarball(predicate::Function, tar::Base.Process, root::String; buf::Vector{UInt8}, skeleton::Base.DevNull, copy_symlinks::Bool)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/extract.jl:57\n  [7] (::Tar.var\"#75#78\"{String, Base.Process, Tar.var\"#1#2\"})(skeleton::Base.DevNull)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/Tar.jl:201\n  [8] arg_write(f::Tar.var\"#75#78\"{String, Base.Process, Tar.var\"#1#2\"}, arg::Base.DevNull)\n    @ ArgTools ~/repo/julia/usr/share/julia/stdlib/v1.6/ArgTools/src/ArgTools.jl:112\n  [9] #74\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/Tar.jl:200 [inlined]\n [10] arg_mkdir(f::Tar.var\"#74#77\"{Base.Process, Base.DevNull, Tar.var\"#1#2\"}, arg::String)\n    @ ArgTools ~/repo/julia/usr/share/julia/stdlib/v1.6/ArgTools/src/ArgTools.jl:163\n [11] #73\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/Tar.jl:196 [inlined]\n [12] open(::Tar.var\"#73#76\"{Base.DevNull, Tar.var\"#1#2\", String}, ::Cmd; kwargs::Base.Iterators.Pairs{Union{}, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})\n    @ Base ./process.jl:393\n [13] open(::Function, ::Cmd)\n    @ Base ./process.jl:391\n [14] arg_read\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/ArgTools/src/ArgTools.jl:60 [inlined]\n [15] extract(predicate::Function, tarball::Cmd, dir::String; skeleton::Nothing, copy_symlinks::Nothing)\n    @ Tar ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/Tar.jl:195\n [16] #extract#79\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Tar/src/Tar.jl:217 [inlined]\n [17] unpack(tarball_path::String, dest::String; verbose::Bool)\n    @ Pkg.PlatformEngines ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/PlatformEngines.jl:357\n [18] unpack\n    @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/PlatformEngines.jl:357 [inlined]\n [19] #4\n    @ ~/.julia/packages/ArtifactUtils/LuOIH/src/ArtifactUtils.jl:57 [inlined]\n [20] create_artifact(f::ArtifactUtils.var\"#4#5\"{String})\n    @ Pkg.Artifacts ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Artifacts.jl:43\n [21] add_artifact!(artifacts_toml::String, name::String, tarball_url::String; clear::Bool, options::Base.Iterators.Pairs{Symbol, Bool, Tuple{Symbol}, NamedTuple{(:force,), Tuple{Bool}}})\n    @ ArtifactUtils ~/.julia/packages/ArtifactUtils/LuOIH/src/ArtifactUtils.jl:56\n [22] top-level scope\n    @ REPL[26]:1"}]}]}],"thread_ts":"1608289332.161700","parent_user_id":"UTHKW0GSH"},{"client_msg_id":"743ea90c-d8de-4b77-8145-08d5e44fe9a6","type":"message","text":"wait, `Tar.extract` on the tarball works","user":"UDB26738Q","ts":"1608291052.164400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iIDpn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"wait, "},{"type":"text","text":"Tar.extract","style":{"code":true}},{"type":"text","text":" on the tarball works"}]}]}],"thread_ts":"1608289332.161700","parent_user_id":"UTHKW0GSH"},{"client_msg_id":"5ce012f2-861c-4461-a206-1065342d1840","type":"message","text":"no idea what's wrong then, but something is off somewhere","user":"UDB26738Q","ts":"1608291132.164600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x69D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no idea what's wrong then, but something is off somewhere"}]}]}],"thread_ts":"1608289332.161700","parent_user_id":"UTHKW0GSH"}]