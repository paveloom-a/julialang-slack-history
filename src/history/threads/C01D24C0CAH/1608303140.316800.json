[{"client_msg_id":"856eb636-4f53-4bc1-9dd6-0c759cfba99c","type":"message","text":"Are they more costly than regular upwind regimes? I'm assuming there's a trade off to the improvements in dissipation","user":"U01E0U2RJJ2","ts":"1608303140.316800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2AO3N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Are they more costly than regular upwind regimes? I'm assuming there's a trade off to the improvements in dissipation"}]}]}],"thread_ts":"1608303140.316800","reply_count":28,"reply_users_count":2,"latest_reply":"1608337649.322900","reply_users":["UMZQBQU67","U01E0U2RJJ2"],"subscribed":false},{"client_msg_id":"19cf1c9f-16f2-47f1-9467-8038a70b565a","type":"message","text":"Yes, WENO5 is the costliest advection scheme.\n\n<@UEP056STX> put together comprehensive benchmarks here: <https://github.com/CliMA/Oceananigans.jl/pull/1169>\n\nFor a barebones model, WENO5 is twice as expensive as UpwindBiasedThirdOrder on the GPU (3.0 and 1.5 slowdown respectively compared to CenteredSecondOrder).\n\nBut note that these benchmarks don’t test both LES and advection. Since the LES closure has some cost, the relative price of high-order advection is less. The more complicated a model, the less costly each individual component becomes.\n\nIt’d be interesting to study the dissipation question in detail. For 3D LES it is plausible that the advection scheme is not that important since the closure provides substantial dissipation anyways, and we are often interested in bulk statistics that might not be too sensitive to the detailed distribution of dissipation. More specifically, numerical dissipation kicks in when gradients become sharp. But turbulence closures (hopefully realistically modeling the effect of turbulent diffusion) rapidly smears sharp gradients in 3D. I have definitely noticed a significant difference between WENO and CenteredSecondOrder advection, but I’m less sure about the difference between WENO and other upwinded schemes.\n\nFor mesoscale/planetary-scale problems I think controlling numerical dissipation becomes more important. To our knowledge WENO has not been used for those problems so its specific benefit remains a bit unknown. For atmospheric LES, the reduced dissipation / increased accuracy provided by WENO is apparently crucial (according to Pycles results, for example), especially for simulations with sharp gradients like stratocumulus scenarios. This might carry over to ocean scenarios with sharp tracer gradients or rapid changes in stratification… ?\n\nRegarding the benefits of AMD, some colleagues at Los Alamos have implemented AMD in PALM (very similar numerics to Oceananigans) to overcome issues with over-dissipation for stable boundary layers experienced by Deardorff (and likely also to be an issue with constant Smagorinsky). Simply changing AMD to Constant Smagorinsky in some of the LES examples will immediately reveal issues with the Smagorinsky scheme. I’ll try to share more results when they become available.","user":"UMZQBQU67","ts":"1608305486.317000","team":"T68168MUP","edited":{"user":"UMZQBQU67","ts":"1608305817.000000"},"blocks":[{"type":"rich_text","block_id":"tTmbi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, WENO5 is the costliest advection scheme.\n\n"},{"type":"user","user_id":"UEP056STX"},{"type":"text","text":" put together comprehensive benchmarks here: "},{"type":"link","url":"https://github.com/CliMA/Oceananigans.jl/pull/1169"},{"type":"text","text":"\n\nFor a barebones model, WENO5 is twice as expensive as UpwindBiasedThirdOrder on the GPU (3.0 and 1.5 slowdown respectively compared to CenteredSecondOrder).\n\nBut note that these benchmarks don’t test both LES and advection. Since the LES closure has some cost, the relative price of high-order advection is less. The more complicated a model, the less costly each individual component becomes.\n\nIt’d be interesting to study the dissipation question in detail. For 3D LES it is plausible that the advection scheme is not that important since the closure provides substantial dissipation anyways, and we are often interested in bulk statistics that might not be too sensitive to the detailed distribution of dissipation. More specifically, numerical dissipation kicks in when gradients become sharp. But turbulence closures (hopefully realistically modeling the effect of turbulent diffusion) rapidly smears sharp gradients in 3D. I have definitely noticed a significant difference between WENO and CenteredSecondOrder advection, but I’m less sure about the difference between WENO and other upwinded schemes.\n\nFor mesoscale/planetary-scale problems I think controlling numerical dissipation becomes more important. To our knowledge WENO has not been used for those problems so its specific benefit remains a bit unknown. For atmospheric LES, the reduced dissipation / increased accuracy provided by WENO is apparently crucial (according to Pycles results, for example), especially for simulations with sharp gradients like stratocumulus scenarios. This might carry over to ocean scenarios with sharp tracer gradients or rapid changes in stratification… ?\n\nRegarding the benefits of AMD, some colleagues at Los Alamos have implemented AMD in PALM (very similar numerics to Oceananigans) to overcome issues with over-dissipation for stable boundary layers experienced by Deardorff (and likely also to be an issue with constant Smagorinsky). Simply changing AMD to Constant Smagorinsky in some of the LES examples will immediately reveal issues with the Smagorinsky scheme. I’ll try to share more results when they become available."}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"fe9c33a2-0822-4a6a-b65a-11e3e25c5eb8","type":"message","text":"Thanks for the info! Useful stuff","user":"U01E0U2RJJ2","ts":"1608312676.317500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U28nE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for the info! Useful stuff"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2","reactions":[{"name":"+1","users":["UMZQBQU67"],"count":1}]},{"client_msg_id":"48011558-aa1a-4d86-bb02-adb5f68d4d49","type":"message","text":"Do you guys have a sense of when the stratification will become too large for your version of AMD to be \"valid\"?","user":"U01E0U2RJJ2","ts":"1608312824.317700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"doBH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you guys have a sense of when the stratification will become too large for your version of AMD to be \"valid\"?"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"dce12340-9c93-45d4-8e7c-0407fde90bc1","type":"message","text":"we haven’t looked into that comprehensively, so the best we can do now is look at the richardson numbers / ozmidovs that vreugdenhil and taylor were able to run.","user":"UMZQBQU67","ts":"1608324322.317900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gIjtx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"we haven’t looked into that comprehensively, so the best we can do now is look at the richardson numbers / ozmidovs that vreugdenhil and taylor were able to run."}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"c0851afc-9aae-4a2a-8faa-d92bb106728f","type":"message","text":"i haven’t seen any evidence that the “buoyancy modification” to AMD helps either, just theoretical arguments.","user":"UMZQBQU67","ts":"1608324388.318100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Dmp/l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"i haven’t seen any evidence that the “buoyancy modification” to AMD helps either, just theoretical arguments."}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"0ca5fc25-79ab-487a-8e61-dc80e60f21dd","type":"message","text":"One of Peter Sullivan’s papers identified the critical resolution as somewhere around the Ozimidov scale. Possibly AMD can tolerate coarser resolutions given the evidence we’ve heard recently","user":"UMZQBQU67","ts":"1608324562.318300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5moW=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"One of Peter Sullivan’s papers identified the critical resolution as somewhere around the Ozimidov scale. Possibly AMD can tolerate coarser resolutions given the evidence we’ve heard recently"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"1998fe9b-e5d3-4af6-8679-cd7e62451f9a","type":"message","text":"I’m inquiring into this! We do need to conduct a detailed investigation for the LESbrary work, so we may get more info about it relatively soon.","user":"UMZQBQU67","ts":"1608325089.318600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3GjI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m inquiring into this! We do need to conduct a detailed investigation for the LESbrary work, so we may get more info about it relatively soon."}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"8b8127cd-6e6f-4b2b-9161-359e78cbecae","type":"message","text":"Yeah, that'd be nice","user":"U01E0U2RJJ2","ts":"1608325274.318800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VjqK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, that'd be nice"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"49e26fc6-999f-4700-9bf5-0f67d7ea9a0e","type":"message","text":"I'm really interested in this AMD closure","user":"U01E0U2RJJ2","ts":"1608325281.319000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ep=6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm really interested in this AMD closure"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"70197abc-15d8-4236-a68b-39c25d30aaa3","type":"message","text":"Partly because I simply like the approach and the simplicity that comes with it","user":"U01E0U2RJJ2","ts":"1608325308.319200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5wu=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Partly because I simply like the approach and the simplicity that comes with it"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"2d693063-7567-4f1d-bab7-df14439b07a9","type":"message","text":"But also because the only other closure is the Smagorisnky, which is very basic","user":"U01E0U2RJJ2","ts":"1608325358.319400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"atwt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But also because the only other closure is the Smagorisnky, which is very basic"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"161d06b7-6c02-47bf-8425-bada4c9af993","type":"message","text":"We’ve obtained excellent results so far with AMD; its remarkable that it maintains a turbulent solution at the low resolution in the examples","user":"UMZQBQU67","ts":"1608329751.319600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9ah5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We’ve obtained excellent results so far with AMD; its remarkable that it maintains a turbulent solution at the low resolution in the examples"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"e31c513a-8f23-4f9f-aca5-3a3a926cb300","type":"message","text":"Word on the street is that the buoyancy modification term for AMD is harmful, not helpful! Maybe we will get around to testing this ourself in Oceananigans but I don’t feel its a high priority since we’ve multiple consistent reports now.","user":"UMZQBQU67","ts":"1608330042.319800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PPEh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Word on the street is that the buoyancy modification term for AMD is harmful, not helpful! Maybe we will get around to testing this ourself in Oceananigans but I don’t feel its a high priority since we’ve multiple consistent reports now."}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"0fff2207-5160-4f36-84b0-0edfc0e0e1d4","type":"message","text":"That's odd","user":"U01E0U2RJJ2","ts":"1608332317.320000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HmWN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's odd"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"0613efc6-131b-4251-a853-d8605b0ddde4","type":"message","text":"Odd, because the theoretical argument for it seems good?","user":"UMZQBQU67","ts":"1608333667.320300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mgs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Odd, because the theoretical argument for it seems good?"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"e4be612d-e4e3-4926-9c93-65cfcb49f9e7","type":"message","text":"It wouldn’t be the first time that a theoretical argument for an LES closure fails. The easy one is that Smagorinsky predicts a non-zero turbulent viscosity for laminar shear…","user":"UMZQBQU67","ts":"1608333731.320500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1VKP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It wouldn’t be the first time that a theoretical argument for an LES closure fails. The easy one is that Smagorinsky predicts a non-zero turbulent viscosity for laminar shear…"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"2b0ad63f-b572-4702-aee0-fca9b95e225f","type":"message","text":"It's a bit odd because AMD is a recent model, so I'd think the researchers did enough validation to make sure that arguments held up","user":"U01E0U2RJJ2","ts":"1608336834.320700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2Pn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's a bit odd because AMD is a recent model, so I'd think the researchers did enough validation to make sure that arguments held up"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"7bb0b554-4e42-47b2-a3de-fd13a062a2fb","type":"message","text":"That is indeed the case with Smagorisnky, but that developed in another time","user":"U01E0U2RJJ2","ts":"1608336855.320900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gIcO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That is indeed the case with Smagorisnky, but that developed in another time"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"207b8a70-4365-467a-91d2-b9377e947a61","type":"message","text":"When it was muuuch harder to test these things haha","user":"U01E0U2RJJ2","ts":"1608336862.321100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BPC9f","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When it was muuuch harder to test these things haha"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"34f927ce-6cab-4e0a-86b2-6b64d6c3da66","type":"message","text":"At least that's the way I see it, but maybe I'm missing something","user":"U01E0U2RJJ2","ts":"1608336889.321300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"189zU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"At least that's the way I see it, but maybe I'm missing something"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"36dd5515-07e4-4b1d-8265-29d9ae7b8f74","type":"message","text":"Hmm","user":"UMZQBQU67","ts":"1608337470.321500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ao2/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"fdbe8474-77e9-443b-9a2c-b28973fde2d7","type":"message","text":"all LES models are deficient","user":"UMZQBQU67","ts":"1608337476.321700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gX3ED","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"all LES models are deficient"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"7bd39b28-2ef2-4ee0-aaf2-4ae225a7027f","type":"message","text":"but papers typically brag about how good they are","user":"UMZQBQU67","ts":"1608337482.321900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sLO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but papers typically brag about how good they are"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"a553a1ea-5ca6-4b61-a71e-a70488c83ab1","type":"message","text":"see a problem?","user":"UMZQBQU67","ts":"1608337485.322100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YxeU6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"see a problem?"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"d29f3420-b32e-4665-8d3e-caf3590dedf4","type":"message","text":"heh","user":"UMZQBQU67","ts":"1608337487.322300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=LJR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"heh"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"044d336e-9a1b-43c6-a81c-dc4683532e9d","type":"message","text":"I think the papers on AMD faithfully report their tests, so you can read them and observe which ones have been done.","user":"UMZQBQU67","ts":"1608337596.322500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"b74","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the papers on AMD faithfully report their tests, so you can read them and observe which ones have been done."}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"952ad09d-a472-4737-8ad9-54b22856e157","type":"message","text":"It’s not feasible to test all cases though and usually papers don’t go to great lengths to show how wrong the closures can be in particular cases","user":"UMZQBQU67","ts":"1608337617.322700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"30a","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It’s not feasible to test all cases though and usually papers don’t go to great lengths to show how wrong the closures can be in particular cases"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"},{"client_msg_id":"237088ff-92d2-4484-9d42-295a3323ea8d","type":"message","text":"a fundamental limitation of much of scientific literature that often limits its utility I think…","user":"UMZQBQU67","ts":"1608337649.322900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6EE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"a fundamental limitation of much of scientific literature that often limits its utility I think…"}]}]}],"thread_ts":"1608303140.316800","parent_user_id":"U01E0U2RJJ2"}]