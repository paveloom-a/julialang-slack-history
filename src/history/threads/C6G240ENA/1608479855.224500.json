[{"client_msg_id":"12379cef-bb92-411d-9575-94e446575fba","type":"message","text":"I couldn't find in the docs for CR, if one returns the output directly from the pullback (din = dout), should one make a copy from it or return the same array reference?","user":"U82RE6STE","ts":"1608479855.224500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vGUV=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I couldn't find in the docs for CR, if one returns the output directly from the pullback (din = dout), should one make a copy from it or return the same array reference?"}]}]}],"thread_ts":"1608479855.224500","reply_count":7,"reply_users_count":2,"latest_reply":"1608482250.227900","reply_users":["U6A936746","U82RE6STE"],"subscribed":false},{"client_msg_id":"4b87f105-7ae0-493e-9265-eb0c528f3aa4","type":"message","text":"Yeah it's not documented","user":"U6A936746","ts":"1608480591.224800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2UFig","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah it's not documented"}]}]}],"thread_ts":"1608479855.224500","parent_user_id":"U82RE6STE","reactions":[{"name":"heavy_check_mark","users":["U82RE6STE"],"count":1}]},{"client_msg_id":"d7279f68-5574-4d57-827c-f237d5c2a796","type":"message","text":"ok thanks, this must be a fairly marginal case I guess","user":"U82RE6STE","ts":"1608480836.225100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A/fhx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok thanks, this must be a fairly marginal case I guess"}]}]}],"thread_ts":"1608479855.224500","parent_user_id":"U82RE6STE"},{"client_msg_id":"f603fac0-bfaf-4da6-9708-d0c6e5d0fab5","type":"message","text":"I think you should return the same reference.\nWhile it might get mutated, I *think* it won't be mutated in a way that can cause incorrect results.\nIt will only be mutated for inplace accumulation.\n\nI think because of the order operations occur in it will never be inplace accumulated before being propagated to something that was waiting for the original.\n\nI would need to sit down with a white board to check.\n\nI suspect it might be that if your operation returns a reference then so should your propagator, but if your operation returns a copy then so should your propagator.\nYes. That seems right for mutating forward mode.\nAnd reverse mode should just be a transposition of those operation, a d transpose of copy is still copy.","user":"U6A936746","ts":"1608481432.225300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nh3D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think you should return the same reference.\nWhile it might get mutated, I *think* it won't be mutated in a way that can cause incorrect results.\nIt will only be mutated for inplace accumulation.\n\nI think because of the order operations occur in it will never be inplace accumulated before being propagated to something that was waiting for the original.\n\nI would need to sit down with a white board to check.\n\nI suspect it might be that if your operation returns a reference then so should your propagator, but if your operation returns a copy then so should your propagator.\nYes. That seems right for mutating forward mode.\nAnd reverse mode should just be a transposition of those operation, a d transpose of copy is still copy."}]}]}],"thread_ts":"1608479855.224500","parent_user_id":"U82RE6STE"},{"client_msg_id":"23910c42-d871-46d7-8060-de792d80192f","type":"message","text":"perfect thanks","user":"U82RE6STE","ts":"1608481517.225700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"msOEN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"perfect thanks"}]}]}],"thread_ts":"1608479855.224500","parent_user_id":"U82RE6STE"},{"client_msg_id":"4b1fa650-4f50-43d6-ab15-fcb393f55fb4","type":"message","text":"But I haven't spent the time with the whiteboard to check so I could be wrong.\nI would be sad if I was wrong bas I would hate to have to add defensive copies in a bunch of places.\nIt would ruin all the nice inplace accumulation.","user":"U6A936746","ts":"1608481633.225900","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1608481647.000000"},"blocks":[{"type":"rich_text","block_id":"3ghd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But I haven't spent the time with the whiteboard to check so I could be wrong.\nI would be sad if I was wrong bas I would hate to have to add defensive copies in a bunch of places.\nIt would ruin all the nice inplace accumulation."}]}]}],"thread_ts":"1608479855.224500","parent_user_id":"U82RE6STE"},{"client_msg_id":"0ec38d42-4840-4f3a-94d0-7bf2669d882f","type":"message","text":"the reasoning seems really fine. I think people will do copies if they know they will mutate in place at some point","user":"U82RE6STE","ts":"1608481946.227000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1g4rz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the reasoning seems really fine. I think people will do copies if they know they will mutate in place at some point"}]}]}],"thread_ts":"1608479855.224500","parent_user_id":"U82RE6STE"},{"client_msg_id":"ef6b15e9-9770-4308-a83d-69a1a7cf4c3a","type":"message","text":"They won't mutate it. The AD will during accumulation.","user":"U6A936746","ts":"1608482250.227900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"57/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"They won't mutate it. The AD will during accumulation."}]}]}],"thread_ts":"1608479855.224500","parent_user_id":"U82RE6STE"}]