[{"client_msg_id":"07106262-8b8d-45d4-99cf-b47a42521d50","type":"message","text":"I was recently confronted with the fact that a Project.toml and Manifest.toml are not necessarily sufficient for reproducibility of a project if they are dependent on a `dev`'d package. In retrospect, that's not a surprise, but it wasn't on my mind since I had a mental heuristic that \"checked in Manifest = reproducible\"\n\nSo if a package is `dev`'d, that's out, are there any other cases where this would be true? Eg, if I have only `add`'d packages, but some aren't in a registry, are there any ways in which a dependency graph might include something that can't be retrieved? It looks like if I do `add` but point to a local path, this is the same as doing `dev`?\n\nThe only other example I could think of was git history-destroying operations, but barring that, what am I missing?","user":"U8JP5B9T2","ts":"1608137744.488900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kdr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was recently confronted with the fact that a Project.toml and Manifest.toml are not necessarily sufficient for reproducibility of a project if they are dependent on a "},{"type":"text","text":"dev","style":{"code":true}},{"type":"text","text":"'d package. In retrospect, that's not a surprise, but it wasn't on my mind since I had a mental heuristic that \"checked in Manifest = reproducible\"\n\nSo if a package is "},{"type":"text","text":"dev","style":{"code":true}},{"type":"text","text":"'d, that's out, are there any other cases where this would be true? Eg, if I have only "},{"type":"text","text":"add","style":{"code":true}},{"type":"text","text":"'d packages, but some aren't in a registry, are there any ways in which a dependency graph might include something that can't be retrieved? It looks like if I do "},{"type":"text","text":"add","style":{"code":true}},{"type":"text","text":" but point to a local path, this is the same as doing "},{"type":"text","text":"dev","style":{"code":true}},{"type":"text","text":"?\n\nThe only other example I could think of was git history-destroying operations, but barring that, what am I missing?"}]}]}],"thread_ts":"1608137744.488900","reply_count":17,"reply_users_count":4,"latest_reply":"1608143583.012500","reply_users":["U67SCG4HG","U6795JH6H","U8JP5B9T2","UBVE598BC"],"subscribed":false},{"client_msg_id":"ac064d1d-593b-4cab-840a-aad860c95d80","type":"message","text":"You should not need the registry to instantiate so thats not a problem. The other thing would be that the Julia version is not recorded, so you need to keep track of that separately.","user":"U67SCG4HG","ts":"1608137819.489200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BFdje","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You should not need the registry to instantiate so thats not a problem. The other thing would be that the Julia version is not recorded, so you need to keep track of that separately."}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"165f2f85-2b8b-4683-9cea-6a8e5eff6c39","type":"message","text":"add of a local repo does record the tree hash, so if that tree hash exists in the upstream repo, it’s reproducible; if it doesn’t, however, then it would, of course, not be reproducible","user":"U6795JH6H","ts":"1608137888.489800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DYb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"add of a local repo does record the tree hash, so if that tree hash exists in the upstream repo, it’s reproducible; if it doesn’t, however, then it would, of course, not be reproducible"}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"c4881e2f-8825-4aac-bb39-c9e912694a9c","type":"message","text":"Ahh, good point <@U67SCG4HG>\n\n<@U6795JH6H> is that different than `dev`? Does `dev` not keep the hash in Manifest? I guess that makes sense since it wouldn't know to update every time you commit","user":"U8JP5B9T2","ts":"1608137993.490400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=3hU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ahh, good point "},{"type":"user","user_id":"U67SCG4HG"},{"type":"text","text":"\n\n"},{"type":"user","user_id":"U6795JH6H"},{"type":"text","text":" is that different than "},{"type":"text","text":"dev","style":{"code":true}},{"type":"text","text":"? Does "},{"type":"text","text":"dev","style":{"code":true}},{"type":"text","text":" not keep the hash in Manifest? I guess that makes sense since it wouldn't know to update every time you commit"}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"b0b5f452-ca9a-4203-b3ce-8762863c6dda","type":"message","text":"dev just uses whatever is there","user":"U6795JH6H","ts":"1608138013.490800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zGX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"dev just uses whatever is there"}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"f9dafc6c-8385-41a9-a66b-86f889d7bd32","type":"message","text":"IIRC local `add` uses the location as a git repo that it takes a snapshot of?","user":"U6795JH6H","ts":"1608138045.491000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UTov","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"IIRC local "},{"type":"text","text":"add","style":{"code":true}},{"type":"text","text":" uses the location as a git repo that it takes a snapshot of?"}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2","reactions":[{"name":"correct_answer","users":["UBVE598BC"],"count":1}]},{"client_msg_id":"751e7673-970a-4e63-b6df-d678a8f26781","type":"message","text":"but I’m a little hazy on that","user":"U6795JH6H","ts":"1608138053.491400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f1/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but I’m a little hazy on that"}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"cebff4ee-be31-42a6-8454-c4c46b32aa23","type":"message","text":"Oh - if I `add` a local file path - it makes a copy over in `.julia` the same way it does if I add a remote?","user":"U8JP5B9T2","ts":"1608138102.491800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dHIu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh - if I "},{"type":"text","text":"add","style":{"code":true}},{"type":"text","text":" a local file path - it makes a copy over in "},{"type":"text","text":".julia","style":{"code":true}},{"type":"text","text":" the same way it does if I add a remote?"}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"c238908e-ea34-43a5-8f57-81591d01b147","type":"message","text":"Yea thats correct. Identical as `add` with URL, just that the `URL` is local.","user":"U67SCG4HG","ts":"1608138105.492000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GBC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yea thats correct. Identical as "},{"type":"text","text":"add","style":{"code":true}},{"type":"text","text":" with URL, just that the "},{"type":"text","text":"URL","style":{"code":true}},{"type":"text","text":" is local."}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"36d5b24d-14a1-464e-aa25-d37c6eeba73a","type":"message","text":"That's good to know","user":"U8JP5B9T2","ts":"1608138112.492200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uriR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's good to know"}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"97a5a279-f86a-4d93-bd19-dec033070d54","type":"message","text":"It will snapshot the latest commit, so if you have uncommitted changes those will not be included.","user":"U67SCG4HG","ts":"1608138133.492600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ttps","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It will snapshot the latest commit, so if you have uncommitted changes those will not be included."}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"cdd82ac1-90be-4cae-8955-6e5bee6dce2c","type":"message","text":"Neat, OK. So obviously another exception is if someone goes in and edits the snapshots directly, which is obviously not recommended","user":"U8JP5B9T2","ts":"1608138168.492800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ydant","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Neat, OK. So obviously another exception is if someone goes in and edits the snapshots directly, which is obviously not recommended"}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"01be1eb7-401d-44f5-94ee-4ac92f821a28","type":"message","text":"They are read-only at least, just like regular packages. Not sure why you should need to worry about that specifically for local URLs.","user":"U67SCG4HG","ts":"1608138274.493100","team":"T68168MUP","edited":{"user":"U67SCG4HG","ts":"1608138458.000000"},"blocks":[{"type":"rich_text","block_id":"gQ8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"They are read-only at least, just like regular packages. Not sure why you should need to worry about that specifically for local URLs."}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"978fce94-d07e-465b-a937-06c43d5c3906","type":"message","text":"You can't instantiate registered packages without the corresponding registry.","user":"UBVE598BC","ts":"1608138746.493400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2CdD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can't instantiate registered packages without the corresponding registry."}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"688b4bd0-a4ab-4b5e-8738-07805f8753d8","type":"message","text":"Unless you happen to already have them in your depot of course.","user":"UBVE598BC","ts":"1608138821.493600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yxxu0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Unless you happen to already have them in your depot of course."}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"594153a3-e59d-43bc-aa37-e799a670c4af","type":"message","text":"You don't need the registry though, right? Just a PkgServer that serves it.","user":"U67SCG4HG","ts":"1608139767.003000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"myJJj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You don't need the registry though, right? Just a PkgServer that serves it."}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"e6cee5fa-1a3f-4a00-8ddf-ce558af0d1dc","type":"message","text":"But thats true, I thought we recorded a upstream URL for added packages too.","user":"U67SCG4HG","ts":"1608139796.003400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"T6kw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But thats true, I thought we recorded a upstream URL for added packages too."}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"},{"client_msg_id":"1f9293ad-51b9-431c-ba10-b7577af26a5e","type":"message","text":"Yes, having a PkgServer that serves the packages is good enough but in that case you kind of have the registry as well.","user":"UBVE598BC","ts":"1608143583.012500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zeyPr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, having a PkgServer that serves the packages is good enough but in that case you kind of have the registry as well."}]}]}],"thread_ts":"1608137744.488900","parent_user_id":"U8JP5B9T2"}]