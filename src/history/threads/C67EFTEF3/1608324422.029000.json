[{"client_msg_id":"4abab3e5-a630-4787-9f79-cb7c87635349","type":"message","text":"Could some Pkg.jl devs shed some light on where exactly in the chain the .julia folder is created first? I believe it's from this method <https://github.com/JuliaLang/Pkg.jl/blob/master/src/Registry/Registry.jl#L162> ?","user":"U6C1MMAAJ","ts":"1608324422.029000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Nl+E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could some Pkg.jl devs shed some light on where exactly in the chain the .julia folder is created first? I believe it's from this method "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/blob/master/src/Registry/Registry.jl#L162"},{"type":"text","text":" ?"}]}]}],"thread_ts":"1608324422.029000","reply_count":16,"reply_users_count":2,"latest_reply":"1608326094.034200","reply_users":["U67SCG4HG","U6C1MMAAJ"],"subscribed":false},{"client_msg_id":"cc6bbaf7-6238-449d-8f5b-93a807c2fa94","type":"message","text":"What do you mean? Probably it is created by  julia for the history file first","user":"U67SCG4HG","ts":"1608324583.031000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+P6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What do you mean? Probably it is created by  julia for the history file first"}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"7469b0a2-3533-45c0-9280-6d8b9e62c603","type":"message","text":"<https://github.com/JuliaLang/julia/blob/8c7dcbaad480a58f7c87fd594e02610e55265700/base/initdefs.jl#L99>","user":"U6C1MMAAJ","ts":"1608324626.031200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"23QUG","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/julia/blob/8c7dcbaad480a58f7c87fd594e02610e55265700/base/initdefs.jl#L99"}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"43b3e475-57bb-4397-87a6-694b4b9d021a","type":"message","text":"that is the only reference I found to JULIA_DEPOT_PATH, but it doesn't create the folder if it doesn't exist.","user":"U6C1MMAAJ","ts":"1608324667.031400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t2l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that is the only reference I found to JULIA_DEPOT_PATH, but it doesn't create the folder if it doesn't exist."}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"437cd517-9eed-47fd-b4bd-abdc4c39bc47","type":"message","text":"It probably should","user":"U6C1MMAAJ","ts":"1608324688.031600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bcS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It probably should"}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"66c7c14d-5481-43d8-a3c1-fa57012a2159","type":"message","text":"Why?","user":"U67SCG4HG","ts":"1608324720.031900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WiW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Why?"}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"fa0b0383-7539-4934-a363-28ccac8c4495","type":"message","text":"Set the correct permissions.","user":"U6C1MMAAJ","ts":"1608324731.032100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jl2Og","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Set the correct permissions."}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"8ea546f8-4c37-46de-87ef-3ad65dabf2d5","type":"message","text":"And check them first.","user":"U6C1MMAAJ","ts":"1608324739.032300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L1J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And check them first."}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"a6c03ce4-36e5-4f66-81fd-52a23326c59e","type":"message","text":"But why should it be created if it is not going to be used?","user":"U67SCG4HG","ts":"1608324794.032500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mtX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But why should it be created if it is not going to be used?"}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"26593670-9bf0-4f7b-997d-25fd24eeddc4","type":"message","text":"That's fine, what's needed is to check and create the folder with correct permissions the first time  julia interact with `.julia`","user":"U6C1MMAAJ","ts":"1608324908.032700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e1s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's fine, what's needed is to check and create the folder with correct permissions the first time  julia interact with "},{"type":"text","text":".julia","style":{"code":true}}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"1db6afaf-050d-444f-b7b3-9044cafddedb","type":"message","text":"Creating and doing it preemptively is just a safe way of ensuring that.  If we can do it on-the-fly that's better.","user":"U6C1MMAAJ","ts":"1608324941.032900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"H/rU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Creating and doing it preemptively is just a safe way of ensuring that.  If we can do it on-the-fly that's better."}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"e1493447-f0a2-4da3-be66-f5ca2be8feb6","type":"message","text":"The issue is that permissions are inherited by the parent folder on Windows.   I was looking at Pkg.jl and couldn't grep an `mkdir` operation. This leads me to believe that we need to first check and create that folder before any `mv` or `cp` oeprations.","user":"U6C1MMAAJ","ts":"1608325013.033100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HnL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The issue is that permissions are inherited by the parent folder on Windows.   I was looking at Pkg.jl and couldn't grep an "},{"type":"text","text":"mkdir","style":{"code":true}},{"type":"text","text":" operation. This leads me to believe that we need to first check and create that folder before any "},{"type":"text","text":"mv","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"cp","style":{"code":true}},{"type":"text","text":" oeprations."}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"4467e5d6-d5e4-4738-84d8-8af434b02abc","type":"message","text":"But see my original comment that on windows we don't have  a way to set acl permissions.","user":"U6C1MMAAJ","ts":"1608325030.033300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4+u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But see my original comment that on windows we don't have  a way to set acl permissions."}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"a41df418-2365-49e9-b208-73ec9043ad24","type":"message","text":"So basically, that was my original question,  which ops in Pkg.jl first initiate creation of the `.julia` folder.  I believe the file <https://github.com/JuliaLang/Pkg.jl/blob/master/src/Registry/Registry.jl>  is the main culprit as it contain `cp` and `mv` calls, but there might be something earlier that I don't see.","user":"U6C1MMAAJ","ts":"1608325245.033500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"m2M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So basically, that was my original question,  which ops in Pkg.jl first initiate creation of the "},{"type":"text","text":".julia","style":{"code":true}},{"type":"text","text":" folder.  I believe the file "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/blob/master/src/Registry/Registry.jl"},{"type":"text","text":"  is the main culprit as it contain "},{"type":"text","text":"cp","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"mv","style":{"code":true}},{"type":"text","text":" calls, but there might be something earlier that I don't see."}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"2aa70a63-f049-49cd-87d7-f142881aee37","type":"message","text":"Arg I posted this in pkg.usage not pkg-dev","user":"U6C1MMAAJ","ts":"1608326071.033800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"I8G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Arg I posted this in pkg.usage not pkg-dev"}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"e3bdc8db-0378-4d94-99b4-8360f3e1f471","type":"message","text":"do'h","user":"U6C1MMAAJ","ts":"1608326075.034000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bjAA2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"do'h"}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"},{"client_msg_id":"51d18cda-05e5-4929-a627-45c8b1e73f7a","type":"message","text":"I'm moving this thread over there.","user":"U6C1MMAAJ","ts":"1608326094.034200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E3Mv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm moving this thread over there."}]}]}],"thread_ts":"1608324422.029000","parent_user_id":"U6C1MMAAJ"}]