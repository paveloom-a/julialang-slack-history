[{"client_msg_id":"e75fcd10-bdb2-47e3-9981-2d887eef5175","type":"message","text":"```julia&gt; a = QuoteNode(:a)\n:(:a)\n\njulia&gt; :((b=2, $(a.value)=1))\n:((b = 2, a = 1))```","user":"U8D9768Q6","ts":"1615422617.012400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FTvc9","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> a = QuoteNode(:a)\n:(:a)\n\njulia> :((b=2, $(a.value)=1))\n:((b = 2, a = 1))"}]}]}],"thread_ts":"1615422617.012400","reply_count":8,"reply_users_count":2,"latest_reply":"1615423207.015000","reply_users":["U016RL8KEHX","U8D9768Q6"],"subscribed":false,"reactions":[{"name":"heart","users":["U016RL8KEHX"],"count":1},{"name":"thumbsup_all","users":["U016RL8KEHX"],"count":1}]},{"client_msg_id":"70a1da3d-6319-42a2-b099-1cf2589f7e4b","type":"message","text":"Ah, cool! Az first I wanted to check what QuoteNode is with @edit but the sourcecode didn’t really helped, but this is so cool! :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615422671.013100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VupRP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, cool! Az first I wanted to check what QuoteNode is with @edit but the sourcecode didn’t really helped, but this is so cool! "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"77e17a9f-8db0-4019-b6ea-4ff527f55f62","type":"message","text":"Jepp! It works! :slightly_smiling_face: Cool now I can unwrap any stuct into NamedTuple. :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615422715.013500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/3Cv7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Jepp! It works! "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" Cool now I can unwrap any stuct into NamedTuple. "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"87f9f727-0483-4dcd-9d86-d972c80632d2","type":"message","text":"`dump` is a good tool for this:\n```julia&gt; dump(QuoteNode(:a))\nQuoteNode\n  value: Symbol a```","user":"U8D9768Q6","ts":"1615422730.013700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NKE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"dump","style":{"code":true}},{"type":"text","text":" is a good tool for this:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> dump(QuoteNode(:a))\nQuoteNode\n  value: Symbol a"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6","reactions":[{"name":"white_check_mark","users":["U016RL8KEHX"],"count":1}]},{"client_msg_id":"a9f27c7f-e617-4ea9-b663-a97420ac0a32","type":"message","text":"Happy I could help","user":"U8D9768Q6","ts":"1615422753.013900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"veN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Happy I could help"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6","reactions":[{"name":"heart","users":["U016RL8KEHX"],"count":1}]},{"client_msg_id":"9bba217d-862b-4265-b5b9-dbbbed71cdea","type":"message","text":"Ho, dump could help! Wow! I knew abuot dump, but didn’t think it would help in these situations :heart: :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615422825.014100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vSps","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ho, dump could help! Wow! I knew abuot dump, but didn’t think it would help in these situations "},{"type":"emoji","name":"heart"},{"type":"text","text":" "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"7831d0f7-9bad-43e6-a7aa-5a8bfed0eaba","type":"message","text":"this AST level strcut to namedtuple transformation is not an effective thing, but I needed to handle structs at the AST level :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615422854.014300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2IX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this AST level strcut to namedtuple transformation is not an effective thing, but I needed to handle structs at the AST level "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"b0848501-c38d-4f6e-8190-673a6b99dede","type":"message","text":"and don’T need to be supereffective as for now, it is just an MVP I am creating :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615422870.014500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KeOL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and don’T need to be supereffective as for now, it is just an MVP I am creating "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"f4a63c59-e2a6-4645-9bcd-2301358a47cf","type":"message","text":"I think a macro is the wrong level of abstraction for this. Instead, I'd use a generated function.\n```julia&gt; @generated function to_nt(x::T) where T\n           if length(fieldnames(T)) == 0\n               :(x)\n           else\n               Expr(:tuple, :(T = $T), [:($n = to_nt(getfield(x, $(QuoteNode(n))))) for n in fieldnames(T)]...)\n           end\n       end\nto_nt (generic function with 1 method)\n\njulia&gt; to_nt(1//2 + im//3)\n(T = Complex{Rational{Int64}}, re = (T = Rational{Int64}, num = 1, den = 2), im = (T = Rational{Int64}, num = 1, den = 3))```","user":"U8D9768Q6","ts":"1615423207.015000","team":"T68168MUP","edited":{"user":"U8D9768Q6","ts":"1615423294.000000"},"blocks":[{"type":"rich_text","block_id":"pbCRu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think a macro is the wrong level of abstraction for this. Instead, I'd use a generated function.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @generated function to_nt(x::T) where T\n           if length(fieldnames(T)) == 0\n               :(x)\n           else\n               Expr(:tuple, :(T = $T), [:($n = to_nt(getfield(x, $(QuoteNode(n))))) for n in fieldnames(T)]...)\n           end\n       end\nto_nt (generic function with 1 method)\n\njulia> to_nt(1//2 + im//3)\n(T = Complex{Rational{Int64}}, re = (T = Rational{Int64}, num = 1, den = 2), im = (T = Rational{Int64}, num = 1, den = 3))"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"}]