[{"client_msg_id":"e75fcd10-bdb2-47e3-9981-2d887eef5175","type":"message","text":"```julia&gt; a = QuoteNode(:a)\n:(:a)\n\njulia&gt; :((b=2, $(a.value)=1))\n:((b = 2, a = 1))```","user":"U8D9768Q6","ts":"1615422617.012400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FTvc9","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> a = QuoteNode(:a)\n:(:a)\n\njulia> :((b=2, $(a.value)=1))\n:((b = 2, a = 1))"}]}]}],"thread_ts":"1615422617.012400","reply_count":28,"reply_users_count":3,"latest_reply":"1615456486.022200","reply_users":["U016RL8KEHX","U8D9768Q6","U68QW0PUZ"],"subscribed":false,"reactions":[{"name":"heart","users":["U016RL8KEHX"],"count":1},{"name":"thumbsup_all","users":["U016RL8KEHX"],"count":1}]},{"client_msg_id":"70a1da3d-6319-42a2-b099-1cf2589f7e4b","type":"message","text":"Ah, cool! Az first I wanted to check what QuoteNode is with @edit but the sourcecode didn’t really helped, but this is so cool! :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615422671.013100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VupRP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, cool! Az first I wanted to check what QuoteNode is with @edit but the sourcecode didn’t really helped, but this is so cool! "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"77e17a9f-8db0-4019-b6ea-4ff527f55f62","type":"message","text":"Jepp! It works! :slightly_smiling_face: Cool now I can unwrap any stuct into NamedTuple. :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615422715.013500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/3Cv7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Jepp! It works! "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" Cool now I can unwrap any stuct into NamedTuple. "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"87f9f727-0483-4dcd-9d86-d972c80632d2","type":"message","text":"`dump` is a good tool for this:\n```julia&gt; dump(QuoteNode(:a))\nQuoteNode\n  value: Symbol a```","user":"U8D9768Q6","ts":"1615422730.013700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NKE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"dump","style":{"code":true}},{"type":"text","text":" is a good tool for this:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> dump(QuoteNode(:a))\nQuoteNode\n  value: Symbol a"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6","reactions":[{"name":"white_check_mark","users":["U016RL8KEHX"],"count":1}]},{"client_msg_id":"a9f27c7f-e617-4ea9-b663-a97420ac0a32","type":"message","text":"Happy I could help","user":"U8D9768Q6","ts":"1615422753.013900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"veN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Happy I could help"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6","reactions":[{"name":"heart","users":["U016RL8KEHX"],"count":1}]},{"client_msg_id":"9bba217d-862b-4265-b5b9-dbbbed71cdea","type":"message","text":"Ho, dump could help! Wow! I knew abuot dump, but didn’t think it would help in these situations :heart: :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615422825.014100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vSps","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ho, dump could help! Wow! I knew abuot dump, but didn’t think it would help in these situations "},{"type":"emoji","name":"heart"},{"type":"text","text":" "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"7831d0f7-9bad-43e6-a7aa-5a8bfed0eaba","type":"message","text":"this AST level strcut to namedtuple transformation is not an effective thing, but I needed to handle structs at the AST level :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615422854.014300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2IX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this AST level strcut to namedtuple transformation is not an effective thing, but I needed to handle structs at the AST level "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"b0848501-c38d-4f6e-8190-673a6b99dede","type":"message","text":"and don’T need to be supereffective as for now, it is just an MVP I am creating :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615422870.014500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KeOL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and don’T need to be supereffective as for now, it is just an MVP I am creating "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"f4a63c59-e2a6-4645-9bcd-2301358a47cf","type":"message","text":"I think a macro is the wrong level of abstraction for this. Instead, I'd use a generated function.\n```julia&gt; @generated function to_nt(x::T) where T\n           if isstructtype(T)\n               Expr(:tuple, :(T = $T), [:($n = to_nt(getfield(x, $(QuoteNode(n))))) for n in fieldnames(T)]...)\n           else\n               :(x)\n           end\n       end\nto_nt (generic function with 1 method)\n\njulia&gt; to_nt(1//2 + im//3)\n(T = Complex{Rational{Int64}}, re = (T = Rational{Int64}, num = 1, den = 2), im = (T = Rational{Int64}, num = 1, den = 3))```","user":"U8D9768Q6","ts":"1615423207.015000","team":"T68168MUP","edited":{"user":"U8D9768Q6","ts":"1615423641.000000"},"blocks":[{"type":"rich_text","block_id":"8a2s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think a macro is the wrong level of abstraction for this. Instead, I'd use a generated function.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @generated function to_nt(x::T) where T\n           if isstructtype(T)\n               Expr(:tuple, :(T = $T), [:($n = to_nt(getfield(x, $(QuoteNode(n))))) for n in fieldnames(T)]...)\n           else\n               :(x)\n           end\n       end\nto_nt (generic function with 1 method)\n\njulia> to_nt(1//2 + im//3)\n(T = Complex{Rational{Int64}}, re = (T = Rational{Int64}, num = 1, den = 2), im = (T = Rational{Int64}, num = 1, den = 3))"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"b8b4d286-48e0-45a3-b0d8-744ba24acaa6","type":"message","text":"<@U8D9768Q6> is there a typo in your `to_nt` ?\n```@generated function to_nt(x::T) where T\n  if isstructtype(T)\n    Expr(:tuple, :(T = $T), \n         [:($n = to_nt(getfield(x, $(QuoteNode(n))))) \n           for n in fieldnames(T)]...)\n  else\n    :(x)\n  end\nend\n\nstruct Holiday\n  event::String\n  year::Int64\nend\n\nboxing_day = Holiday(\"Boxing Day\", 2021)\n#                                          should boxing_day be either of these\n# (T = Holiday, event = \"Boxing Day\", year = 2021)\n# (T = Holiday, event = (T = String, \"Boxing Day\"), year = (T = Int64, 2021))\n\njulia&gt; boxing_day_as_nt = to_nt(boxing_day)\n(T = Holiday, event = (T = String,), year = 2021)```\n``````","user":"U68QW0PUZ","ts":"1615444100.015900","team":"T68168MUP","edited":{"user":"U68QW0PUZ","ts":"1615445597.000000"},"blocks":[{"type":"rich_text","block_id":"9rE9","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U8D9768Q6"},{"type":"text","text":" is there a typo in your "},{"type":"text","text":"to_nt","style":{"code":true}},{"type":"text","text":" ?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@generated function to_nt(x::T) where T\n  if isstructtype(T)\n    Expr(:tuple, :(T = $T), \n         [:($n = to_nt(getfield(x, $(QuoteNode(n))))) \n           for n in fieldnames(T)]...)\n  else\n    :(x)\n  end\nend\n\nstruct Holiday\n  event::String\n  year::Int64\nend\n\nboxing_day = Holiday(\"Boxing Day\", 2021)\n#                                          should boxing_day be either of these\n# (T = Holiday, event = \"Boxing Day\", year = 2021)\n# (T = Holiday, event = (T = String, \"Boxing Day\"), year = (T = Int64, 2021))\n\njulia> boxing_day_as_nt = to_nt(boxing_day)\n(T = Holiday, event = (T = String,), year = 2021)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"7AB9A35F-4B65-41CB-A6AC-1037989F2429","type":"message","text":"Oh interesting. I didn’t realize that `String` counted as a `structtype`. This code will also fail on Tuple and Arrays. ","user":"U8D9768Q6","ts":"1615448296.018200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yI3QT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh interesting. I didn’t realize that "},{"type":"text","text":"String","style":{"code":true}},{"type":"text","text":" counted as a "},{"type":"text","text":"structtype","style":{"code":true}},{"type":"text","text":". This code will also fail on Tuple and Arrays. "}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"458a83ad-dab2-4ebe-b859-d97a131d8ace","type":"message","text":"We have a way to do this that carries itself more elegantly, right?","user":"U68QW0PUZ","ts":"1615450069.018400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KvT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We have a way to do this that carries itself more elegantly, right?"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"256765ff-0dbb-4a4b-8dec-ada94ea8e8db","type":"message","text":"You guys are crazy, wow! :slightly_smiling_face: Basically I am doing a XGrad like AST based AD library and having multiple possible ways to handle structs feels pretty insane. :blush:","user":"U016RL8KEHX","ts":"1615451260.018600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oQJPA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You guys are crazy, wow! "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" Basically I am doing a XGrad like AST based AD library and having multiple possible ways to handle structs feels pretty insane. "},{"type":"emoji","name":"blush"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"2fbab495-2cf9-4a36-bb5b-7e4fa079f291","type":"message","text":"What I am afraid of is that, I preallocate fields in structs which are not used, and are too complex to preallocate, because sometimes structs are not really for autodiff-ing.","user":"U016RL8KEHX","ts":"1615453453.018800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2pzu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What I am afraid of is that, I preallocate fields in structs which are not used, and are too complex to preallocate, because sometimes structs are not really for autodiff-ing."}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"e11f9c15-13d8-4b78-b139-1b2a32877e55","type":"message","text":"what? why would you be using a struct that has more fields than you actually use? Are these structs coming to you from another application?","user":"U68QW0PUZ","ts":"1615453529.019000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hyaK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what? why would you be using a struct that has more fields than you actually use? Are these structs coming to you from another application?"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"13268f8e-feca-4e4f-a5ed-e58076b6abc0","type":"message","text":"and .. how do you preallocate fields that are too complex to preallocate?","user":"U68QW0PUZ","ts":"1615453583.019200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sqtuq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and .. how do you preallocate fields that are too complex to preallocate?"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"25b218c9-2346-48f7-9a07-b56f2fe8771f","type":"message","text":"and .. unless these structs are huge and you run through millions of them, why worry?","user":"U68QW0PUZ","ts":"1615453823.019400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W0wTP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and .. unless these structs are huge and you run through millions of them, why worry?"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"63fae2b3-4895-42b5-98f0-1355567930a0","type":"message","text":"that is right, so what I meant is that usually in an NN you use arrays, and vector of arrays, so I wnat to have this struct thing as a lightweight thing as for now :)","user":"U016RL8KEHX","ts":"1615454534.019600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"egg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that is right, so what I meant is that usually in an NN you use arrays, and vector of arrays, so I wnat to have this struct thing as a lightweight thing as for now :)"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"0d1c1bc2-5db1-4e6c-9f0a-472465d70b93","type":"message","text":"usually code is not optimal if you use other things then just array, so you are right. :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615454565.019800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xdWCc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"usually code is not optimal if you use other things then just array, so you are right. "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"57fac236-2212-4850-bd1b-f96502e2d1b0","type":"message","text":"I just looked over my codes, and found one which uses a Graph struct in itself.","user":"U016RL8KEHX","ts":"1615454598.020000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6YiF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I just looked over my codes, and found one which uses a Graph struct in itself."}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"c0b31b45-a88f-474c-bfb3-9c1984baa2e5","type":"message","text":"what information do you plan to carry within these constructs?","user":"U68QW0PUZ","ts":"1615454635.020200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QVgsl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what information do you plan to carry within these constructs?"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"ee8ff395-6be4-43de-bd4c-d59a9f5b4fb7","type":"message","text":"(when in doubt, start eating your own structural integrity :headdesk:)","user":"U68QW0PUZ","ts":"1615454747.020400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZIyXV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(when in doubt, start eating your own structural integrity "},{"type":"emoji","name":"headdesk"},{"type":"text","text":")"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6","reactions":[{"name":"smile","users":["U016RL8KEHX"],"count":1},{"name":"thumbsup_all","users":["U016RL8KEHX"],"count":1}]},{"client_msg_id":"8f463211-8e3f-4ea0-8c51-270fe0d4627c","type":"message","text":"I used this Graph to create the architecture of a network, I wanted to keep network architecture in data and not in code. This Graph struct was a little cache layer I think.","user":"U016RL8KEHX","ts":"1615455268.020800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5+ryi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I used this Graph to create the architecture of a network, I wanted to keep network architecture in data and not in code. This Graph struct was a little cache layer I think."}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"b5962fad-01a6-416e-b1b8-bb2f789cfdfb","type":"message","text":"It sounds like you have spent way too much time being concerned about what wiggles to waggle and where to park them.  In every successful project I have seen, the priorities are\n(a) know what you are going to do before the doing\n(b) first explain your intent to another .. there is no second step until they understand\n(c) get it right (drawing pictures and writing tests helps)\n(d) however easy it is to use, make it easier to use\n(e) profiling and benchmarking should direct efforts to speed up the software\n(f) all the work only gets you a demo until there is writing that lets others use it well\n(g) get here (this is step seven)","user":"U68QW0PUZ","ts":"1615455775.021000","team":"T68168MUP","edited":{"user":"U68QW0PUZ","ts":"1615456143.000000"},"blocks":[{"type":"rich_text","block_id":"HbjuI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It sounds like you have spent way too much time being concerned about what wiggles to waggle and where to park them.  In every successful project I have seen, the priorities are\n(a) know what you are going to do before the doing\n(b) first explain your intent to another .. there is no second step until they understand\n(c) get it right (drawing pictures and writing tests helps)\n(d) however easy it is to use, make it easier to use\n(e) profiling and benchmarking should direct efforts to speed up the software\n(f) all the work only gets you a demo until there is writing that lets others use it well\n(g) get here (this is step seven)"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"9cba79b6-9984-4bab-8f45-19b161a9be9a","type":"message","text":"I agree, and believe me I try to not lose focuse and keep development velocity. :eyes: :slightly_smiling_face:\nBtw this graph stuff is a finished project, and was fun to do even if no money came from it, but I like your view in this sense. :slightly_smiling_face:","user":"U016RL8KEHX","ts":"1615456132.021300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6PKIC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I agree, and believe me I try to not lose focuse and keep development velocity. "},{"type":"emoji","name":"eyes"},{"type":"text","text":" "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":"\nBtw this graph stuff is a finished project, and was fun to do even if no money came from it, but I like your view in this sense. "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"8a680773-9e71-47f3-aa17-056075bb7b7c","type":"message","text":"all the better","user":"U68QW0PUZ","ts":"1615456156.021600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"94q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"all the better"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"c04e6aba-b4b3-4e31-9fa9-72fd57fd9692","type":"message","text":"I think we all learn in this way","user":"U016RL8KEHX","ts":"1615456193.021800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uHXF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think we all learn in this way"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"5708d293-5ddc-4659-9bca-bed7dc00c437","type":"message","text":"This AD tool is just a hobby project I am doing in some weekends :stuck_out_tongue:","user":"U016RL8KEHX","ts":"1615456357.022000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LzGFj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This AD tool is just a hobby project I am doing in some weekends "},{"type":"emoji","name":"stuck_out_tongue"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"},{"client_msg_id":"230b6f9b-855d-4627-83b3-81380e4f659f","type":"message","text":"and it is crazy how much possibility comes up and how much design decisions you need to make to create it with the least tradeoffs","user":"U016RL8KEHX","ts":"1615456486.022200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tvna0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and it is crazy how much possibility comes up and how much design decisions you need to make to create it with the least tradeoffs"}]}]}],"thread_ts":"1615422617.012400","parent_user_id":"U8D9768Q6"}]