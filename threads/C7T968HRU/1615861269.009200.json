[{"client_msg_id":"e25737a8-d1e0-405a-b463-41c3b30467ef","type":"message","text":"It just silently ignores the updated value","user":"U7ZNTQFLH","ts":"1615861269.009200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NWyuL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It just silently ignores the updated value"}]}]}],"thread_ts":"1615861269.009200","reply_count":7,"reply_users_count":3,"latest_reply":"1615912781.012000","reply_users":["UM8JUNJG7","U7ZNTQFLH","U6788D83U"],"subscribed":false},{"client_msg_id":"394f00e0-a3cd-4a8f-82a0-079da26e2721","type":"message","text":"can you post some code?","user":"UM8JUNJG7","ts":"1615861633.009300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ecc62","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you post some code?"}]}]}],"thread_ts":"1615861269.009200","parent_user_id":"U7ZNTQFLH"},{"client_msg_id":"7b4891da-1c39-4a45-8876-679405464061","type":"message","text":"Yeah I'll post a MWE when I get a chance","user":"U7ZNTQFLH","ts":"1615863560.009700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4JA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah I'll post a MWE when I get a chance"}]}]}],"thread_ts":"1615861269.009200","parent_user_id":"U7ZNTQFLH"},{"client_msg_id":"64fc2598-a6e4-4cc5-85dc-423372105d6e","type":"message","text":"Seems to have to do with namespacing:\n```using ModelingToolkit\nusing OrdinaryDiffEq\n\nfunction springmass()\n  @parameters t\n  @variables x(t)\n  D = Differential(t)\n  @parameters M b k\n  eqs = [D(D(x)) ~ 1/M * (-b*D(x) - k*x )] # equations defining the system\n  iv = t # the independent variable\n  states = [x] # the dependent (state) variables\n  ps = [M, b, k] # parameter variables\n  default_u0 = [D(x) =&gt; 0.0, x =&gt; 1.5] # default initial conditions\n  default_p = [M =&gt; 1.0, b =&gt; 1.0, k =&gt; 1.0] # default parameter values\n  @named smd_sys = ODESystem(eqs, iv, states, ps, default_u0=default_u0, default_p=default_p)\n  return ode_order_lowering(smd_sys)\nend\nsmd_sys = springmass()\nu0 = [smd_sys.x =&gt; -1.0] # initial conditions (empty = use defaults)\nprob = ODEProblem(smd_sys, u0, (0.0, 1.0))\n@show prob.u0 # prob.u0 = [0.0, 1.5] # hasn't been updated\nsol = solve(prob, Tsit5())\n@show sol.u[1] # sol.u[1] = [0.0, 1.5] # same```\nIf I do the same but without the function and just `u0 = [x =&gt; -1.0]` it works as expected.","user":"U7ZNTQFLH","ts":"1615870024.009900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pt4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Seems to have to do with namespacing:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using ModelingToolkit\nusing OrdinaryDiffEq\n\nfunction springmass()\n  @parameters t\n  @variables x(t)\n  D = Differential(t)\n  @parameters M b k\n  eqs = [D(D(x)) ~ 1/M * (-b*D(x) - k*x )] # equations defining the system\n  iv = t # the independent variable\n  states = [x] # the dependent (state) variables\n  ps = [M, b, k] # parameter variables\n  default_u0 = [D(x) => 0.0, x => 1.5] # default initial conditions\n  default_p = [M => 1.0, b => 1.0, k => 1.0] # default parameter values\n  @named smd_sys = ODESystem(eqs, iv, states, ps, default_u0=default_u0, default_p=default_p)\n  return ode_order_lowering(smd_sys)\nend\nsmd_sys = springmass()\nu0 = [smd_sys.x => -1.0] # initial conditions (empty = use defaults)\nprob = ODEProblem(smd_sys, u0, (0.0, 1.0))\n@show prob.u0 # prob.u0 = [0.0, 1.5] # hasn't been updated\nsol = solve(prob, Tsit5())\n@show sol.u[1] # sol.u[1] = [0.0, 1.5] # same"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"If I do the same but without the function and just "},{"type":"text","text":"u0 = [x => -1.0]","style":{"code":true}},{"type":"text","text":" it works as expected."}]}]}],"thread_ts":"1615861269.009200","parent_user_id":"U7ZNTQFLH"},{"client_msg_id":"682ffaa2-d789-44cd-a526-4f66b4e4c074","type":"message","text":"yes it seems like it <https://github.com/SciML/ModelingToolkit.jl/issues/807>","user":"UM8JUNJG7","ts":"1615874486.010100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ad/7s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes it seems like it "},{"type":"link","url":"https://github.com/SciML/ModelingToolkit.jl/issues/807"}]}]}],"thread_ts":"1615861269.009200","parent_user_id":"U7ZNTQFLH"},{"client_msg_id":"9a62ac4c-9a74-49b2-8258-4da3e579fb73","type":"message","text":"might be relevant issue","user":"UM8JUNJG7","ts":"1615874491.010300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2oRB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"might be relevant issue"}]}]}],"thread_ts":"1615861269.009200","parent_user_id":"U7ZNTQFLH","reactions":[{"name":"+1","users":["U7ZNTQFLH"],"count":1}]},{"client_msg_id":"f79adcc5-5500-4b2f-b239-5f15afa442ff","type":"message","text":"Try\n```u0 = [@nonamespace(smd_sys.x) =&gt; -1.0] # initial conditions (empty = use defaults)```","user":"U6788D83U","ts":"1615912752.011800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LBZ+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Try\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"u0 = [@nonamespace(smd_sys.x) => -1.0] # initial conditions (empty = use defaults)"}]}]}],"thread_ts":"1615861269.009200","parent_user_id":"U7ZNTQFLH"},{"client_msg_id":"429a1c85-db81-48ee-a344-81adf86aa46c","type":"message","text":"<@U69BL50BF> this would be a use case for `@nonamespace` .","user":"U6788D83U","ts":"1615912781.012000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TYMk","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" this would be a use case for "},{"type":"text","text":"@nonamespace","style":{"code":true}},{"type":"text","text":" ."}]}]}],"thread_ts":"1615861269.009200","parent_user_id":"U7ZNTQFLH"}]