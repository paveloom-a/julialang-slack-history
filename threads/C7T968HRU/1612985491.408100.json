[{"client_msg_id":"1ace173f-b42d-458c-98d1-e4b6024e6e61","type":"message","text":"It might be a bug","user":"U6788D83U","ts":"1612985491.408100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q3q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It might be a bug"}]}]}],"thread_ts":"1612985491.408100","reply_count":8,"reply_users_count":3,"latest_reply":"1612990882.410600","reply_users":["U014K4SE396","U69BL50BF","U6788D83U"],"subscribed":false},{"client_msg_id":"a572f2a2-c181-4a1b-808b-f9499ecaa7b8","type":"message","text":"This seems working! although my ODE problem is too difficult and the reverse AD failed","user":"U014K4SE396","ts":"1612986905.408600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jxcHF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This seems working! although my ODE problem is too difficult and the reverse AD failed"}]}]}],"thread_ts":"1612985491.408100","parent_user_id":"U6788D83U"},{"client_msg_id":"51554ba7-87f4-44de-8010-1cefb0e283de","type":"message","text":"what about ReverseDiffAdjoitn?","user":"U69BL50BF","ts":"1612989351.409400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PBK/F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what about ReverseDiffAdjoitn?"}]}]}],"thread_ts":"1612985491.408100","parent_user_id":"U6788D83U"},{"client_msg_id":"b7c767db-ec5b-4f4b-a8f6-b6466faf3ddf","type":"message","text":"```\nDomainError with -4.300302556501783e-21:\nlog will only return a complex result if called with a complex argument. Try log(Complex(x)).```","user":"U014K4SE396","ts":"1612990238.409600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RRP0","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\nDomainError with -4.300302556501783e-21:\nlog will only return a complex result if called with a complex argument. Try log(Complex(x))."}]}]}],"thread_ts":"1612985491.408100","parent_user_id":"U6788D83U"},{"client_msg_id":"662c25f3-5d26-4975-8d68-1797ca5f9065","type":"message","text":"```function fsol(u0)\n    sol = solve(prob, Rosenbrock23(autodiff=false),\n                u0=u0, p=[0.0], tspan = [0.0, 0.07],\n                reltol=1.e-3, abstol=1.e-6,\n                sensealg=ReverseDiffAdjoint())\n    return sol[end, end]\nend\n@time du01 = Zygote.gradient(x -&gt; fsol(x), u0)```","user":"U014K4SE396","ts":"1612990255.409800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TFef","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function fsol(u0)\n    sol = solve(prob, Rosenbrock23(autodiff=false),\n                u0=u0, p=[0.0], tspan = [0.0, 0.07],\n                reltol=1.e-3, abstol=1.e-6,\n                sensealg=ReverseDiffAdjoint())\n    return sol[end, end]\nend\n@time du01 = Zygote.gradient(x -> fsol(x), u0)"}]}]}],"thread_ts":"1612985491.408100","parent_user_id":"U6788D83U"},{"client_msg_id":"5be8122f-35ed-45d8-8a92-54f4106d89b3","type":"message","text":"BTW, forwarddiff works\n```out = similar(u0);\ncfg = GradientConfig(fsol, u0);\n@time gradient!(out, fsol, u0)```","user":"U014K4SE396","ts":"1612990635.410000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yc31/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"BTW, forwarddiff works\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"out = similar(u0);\ncfg = GradientConfig(fsol, u0);\n@time gradient!(out, fsol, u0)"}]}]}],"thread_ts":"1612985491.408100","parent_user_id":"U6788D83U"},{"client_msg_id":"6b2a9692-23d1-41cd-9bdb-3def8ac706dc","type":"message","text":"what’s the derivative value?","user":"U6788D83U","ts":"1612990651.410200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1qq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what’s the derivative value?"}]}]}],"thread_ts":"1612985491.408100","parent_user_id":"U6788D83U"},{"client_msg_id":"11eae7cd-e0a8-43d4-9b92-9cd966de0965","type":"message","text":"```function dudt!(du, u, p, t)\n    T = u[end]\n    Y = u[1:ns]\n    mean_MW = 1. / dot(Y, 1 ./ <http://gas.MW|gas.MW>)\n    ρ_mass = P / R / T * mean_MW\n    X = Y2X(Y, mean_MW)\n    C = Y2C(Y, ρ_mass)\n    cp_mole = cp_mole_func(T, X)\n    cp_mass = cp_mass_func(cp_mole, mean_MW)\n    H_mole, h_mole = H_mole_func(T, X)\n    S_mole, s_mole, S0 = S_mole_func(T, P, X)\n    wdot = wdot_func(T, C, S0, h_mole)\n    Ydot = wdot / ρ_mass .* <http://gas.MW|gas.MW>\n    Tdot = -dot(h_mole, wdot) / ρ_mass / cp_mass\n    du .= vcat(Ydot, Tdot)\nend```","user":"U014K4SE396","ts":"1612990674.410400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FxF0x","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function dudt!(du, u, p, t)\n    T = u[end]\n    Y = u[1:ns]\n    mean_MW = 1. / dot(Y, 1 ./ gas.MW)\n    ρ_mass = P / R / T * mean_MW\n    X = Y2X(Y, mean_MW)\n    C = Y2C(Y, ρ_mass)\n    cp_mole = cp_mole_func(T, X)\n    cp_mass = cp_mass_func(cp_mole, mean_MW)\n    H_mole, h_mole = H_mole_func(T, X)\n    S_mole, s_mole, S0 = S_mole_func(T, P, X)\n    wdot = wdot_func(T, C, S0, h_mole)\n    Ydot = wdot / ρ_mass .* gas.MW\n    Tdot = -dot(h_mole, wdot) / ρ_mass / cp_mass\n    du .= vcat(Ydot, Tdot)\nend"}]}]}],"thread_ts":"1612985491.408100","parent_user_id":"U6788D83U"},{"client_msg_id":"ba6e5294-437a-4d4e-8b30-5d25dcd7fa2f","type":"message","text":"Do you mean du for u0?","user":"U014K4SE396","ts":"1612990882.410600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fPsWt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you mean du for u0?"}]}]}],"thread_ts":"1612985491.408100","parent_user_id":"U6788D83U"}]