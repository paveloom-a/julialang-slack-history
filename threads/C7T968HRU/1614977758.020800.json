[{"client_msg_id":"41dcdd0f-c1ed-4806-bf30-ae667e35785c","type":"message","text":"Ok, are there examples somewhere that I've missed which handle non-integrated (and thus pre-allocated) state variables with DiffEqSensitivity? This has been a sticking point for me for weeks now... I can kind of see how to do it with `ForwardDiff` but the chunk size complicates everything (especially thanks to <https://github.com/SciML/DiffEqSensitivity.jl/issues/390|this bug> ).","user":"U01H36BUDJB","ts":"1614977758.020800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rlFWH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, are there examples somewhere that I've missed which handle non-integrated (and thus pre-allocated) state variables with DiffEqSensitivity? This has been a sticking point for me for weeks now... I can kind of see how to do it with "},{"type":"text","text":"ForwardDiff","style":{"code":true}},{"type":"text","text":" but the chunk size complicates everything (especially thanks to "},{"type":"link","url":"https://github.com/SciML/DiffEqSensitivity.jl/issues/390","text":"this bug"},{"type":"text","text":" )."}]}]}],"thread_ts":"1614977758.020800","reply_count":1,"reply_users_count":1,"latest_reply":"1614979148.021100","reply_users":["U01H36BUDJB"],"subscribed":false},{"client_msg_id":"282100ad-e2ba-452f-a581-93bd08697b07","type":"message","text":"<@U69BL50BF> I think there's a fundamental problem with making this work with reverse mode... that being that \"external\" state variables aren't saved or tracked in the forward pass so the intermediary states aren't saved anywhere. This means, I think, that the adjoint computation would be wrong.\n\nI am still trying to get forward mode to work for the time being, but I would really like to have reverse mode available too.\n\nIf that means contributing some development effort to supporting non-integrated/external state variables then I am happy to do that. It's beneficial to my research.","user":"U01H36BUDJB","ts":"1614979148.021100","team":"T68168MUP","edited":{"user":"U01H36BUDJB","ts":"1614979195.000000"},"blocks":[{"type":"rich_text","block_id":"IQiR","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" I think there's a fundamental problem with making this work with reverse mode... that being that \"external\" state variables aren't saved or tracked in the forward pass so the intermediary states aren't saved anywhere. This means, I think, that the adjoint computation would be wrong.\n\nI am still trying to get forward mode to work for the time being, but I would really like to have reverse mode available too.\n\nIf that means contributing some development effort to supporting non-integrated/external state variables then I am happy to do that. It's beneficial to my research."}]}]}],"thread_ts":"1614977758.020800","parent_user_id":"U01H36BUDJB"}]