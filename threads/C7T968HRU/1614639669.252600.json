[{"client_msg_id":"9b8d34f3-930e-46d3-9346-0dc684b460e7","type":"message","text":"Hi. I have a question about the paper \"Bayesian Neural Ordinary Differential Equations\" (also had a Reddit post a while ago). I'm curious what compute configurations (CPU and GPU) were used in order to perform the basic experiments ( linear ode and lotka Volterra) with NUTS sampler and SGLD. Does a GPU help with this kind of small datasets and very shallow neural network architectures. I'm currently running the code from the GitHub repo provided by the paper but the compute times also for these pretty standard experiments are very long.","user":"U018YSX96LB","ts":"1614639669.252600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9a2pB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi. I have a question about the paper \"Bayesian Neural Ordinary Differential Equations\" (also had a Reddit post a while ago). I'm curious what compute configurations (CPU and GPU) were used in order to perform the basic experiments ( linear ode and lotka Volterra) with NUTS sampler and SGLD. Does a GPU help with this kind of small datasets and very shallow neural network architectures. I'm currently running the code from the GitHub repo provided by the paper but the compute times also for these pretty standard experiments are very long."}]}]}],"thread_ts":"1614639669.252600","reply_count":26,"reply_users_count":2,"latest_reply":"1614724825.338400","reply_users":["UTLTSMTEH","U018YSX96LB"],"subscribed":false},{"client_msg_id":"EF667236-BDA6-4557-BBAA-6A3B372A8BC8","type":"message","text":"Hey <@U018YSX96LB> All the experiments for the demonstration except for the MNIST were run on a CPU. The MNIST code using SGLD was run on a GPU. ","user":"UTLTSMTEH","ts":"1614655951.258000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nh7Sz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey "},{"type":"user","user_id":"U018YSX96LB"},{"type":"text","text":" All the experiments for the demonstration except for the MNIST were run on a CPU. The MNIST code using SGLD was run on a GPU. "}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"A2256369-C3D1-4BD0-8179-2EC940147B97","type":"message","text":"Which code did you specifically run which was taking a long time? Could you share the code snippet?","user":"UTLTSMTEH","ts":"1614655975.258800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cd+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Which code did you specifically run which was taking a long time? Could you share the code snippet?"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"CC4E7E94-B990-4377-B8F6-78B3E4C81BCF","type":"message","text":"First thing you could try is directly running the code given in the following tutorial:","user":"UTLTSMTEH","ts":"1614656079.259700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eYPlG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"First thing you could try is directly running the code given in the following tutorial:"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"E2C58C1B-C93D-4577-AC66-0FA6B1527371","type":"message","text":"<https://diffeqflux.sciml.ai/stable/examples/BayesianNODE_NUTS/|https://diffeqflux.sciml.ai/stable/examples/BayesianNODE_NUTS/>","user":"UTLTSMTEH","ts":"1614656082.260000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MJIK","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://diffeqflux.sciml.ai/stable/examples/BayesianNODE_NUTS/","text":"https://diffeqflux.sciml.ai/stable/examples/BayesianNODE_NUTS/"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"bf81c0f5-df80-41c5-8ea3-504a5e06ce94","type":"message","text":"Hi. Thank you for quick reply. I run the NUTS sampler for 10 samples warmup and 10 samples posterior...and I get 3:14 minutes. That means that for 500 and 500 samples I should train for 2.5 hours... seems a bit long :)","user":"U018YSX96LB","ts":"1614719671.294600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xDqvA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi. Thank you for quick reply. I run the NUTS sampler for 10 samples warmup and 10 samples posterior...and I get 3:14 minutes. That means that for 500 and 500 samples I should train for 2.5 hours... seems a bit long :)"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"56EB92A1-AED2-4679-A995-9F83DFB26F91","type":"message","text":"It may happen because the initial step size determination is taking most of the time. This is usually the rate determining step. Once this step is done, the sampling is much quicker. Thus, the runtime won’t scale as you had mentioned. You can check that by running for more samples. If you run the NUTS example in the tutorial, it has 500 warmup and 500 posterior and runs fairly quickly. I would recommend you try that first.","user":"UTLTSMTEH","ts":"1614720790.300600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZAUIT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It may happen because the initial step size determination is taking most of the time. This is usually the rate determining step. Once this step is done, the sampling is much quicker. Thus, the runtime won’t scale as you had mentioned. You can check that by running for more samples. If you run the NUTS example in the tutorial, it has 500 warmup and 500 posterior and runs fairly quickly. I would recommend you try that first."}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"d00dade7-13f7-4f72-9d23-b6fd64a11042","type":"message","text":"I ran the sample() method separtatly in a jupyter notebook and got those 4 minutes","user":"U018YSX96LB","ts":"1614721758.303300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U/cwS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I ran the sample() method separtatly in a jupyter notebook and got those 4 minutes"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"dfde75fa-ec80-4524-9bec-ff9a154bafc0","type":"message","text":"If I may ask: what kind of CPU did you used? ( something specialized or just one laptop CPU). How much time did it take to perform the 500 samples on your machine?","user":"U018YSX96LB","ts":"1614721904.306300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Crgq+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If I may ask: what kind of CPU did you used? ( something specialized or just one laptop CPU). How much time did it take to perform the 500 samples on your machine?"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"DA462062-2C6F-4A06-9A83-CD858565F3FB","type":"message","text":"I used an Intel i7 16GB Ram (pretty standard nothing specialized)..For the tutorial code, if I recall correctly, it was done in 35-40 mins","user":"UTLTSMTEH","ts":"1614722035.308500","team":"T68168MUP","edited":{"user":"UTLTSMTEH","ts":"1614722066.000000"},"blocks":[{"type":"rich_text","block_id":"cbRpc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I used an Intel i7 16GB Ram (pretty standard nothing specialized)..For the tutorial code, if I recall correctly, it was done in 35-40 mins"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"e9e2d55f-939e-42cf-9a98-6d2f2b5e2189","type":"message","text":"what kind of GHz? :slightly_smiling_face:","user":"U018YSX96LB","ts":"1614722080.309200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qdLrn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what kind of GHz? "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"C28EB834-FA6D-4915-BFDB-D4E4AA3F65FF","type":"message","text":"2.6 GHz..How much time does the tutorial code take for you to run?","user":"UTLTSMTEH","ts":"1614722097.309800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Dh+Zl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"2.6 GHz..How much time does the tutorial code take for you to run?"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"93f5a31a-8470-4a13-a339-85357104a145","type":"message","text":"I'm running the code on a cluster (but each node has cores with maximum of 1.6 Ghz)...and since there's nothing to parallelize...I got I think lower speed than on your i7","user":"U018YSX96LB","ts":"1614722239.312200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p1Zaz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm running the code on a cluster (but each node has cores with maximum of 1.6 Ghz)...and since there's nothing to parallelize...I got I think lower speed than on your i7"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"3D907AC9-2BCE-4F73-A610-7A838C5D2527","type":"message","text":"Right, if you want to incorporate parallelism, I think Turing allows to sample multiple chains in parallel. ","user":"UTLTSMTEH","ts":"1614722296.313200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+WD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right, if you want to incorporate parallelism, I think Turing allows to sample multiple chains in parallel. "}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"903d788a-6b88-4f8a-b4a0-c4801698a2b7","type":"message","text":"That's an interesting idea...will multiple chains be equivalent to one single chain with more samples...? I'm not sure if with multiple chains I can explore the target set better","user":"U018YSX96LB","ts":"1614722454.314600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jCO7b","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's an interesting idea...will multiple chains be equivalent to one single chain with more samples...? I'm not sure if with multiple chains I can explore the target set better"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"5E8A89A8-F541-4DAA-9C96-C712214EA75C","type":"message","text":"No, it won’t be equivalent to one chain with more samples, but more a test on do all chains with different initializations converge on the same posterior","user":"UTLTSMTEH","ts":"1614722569.317100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QcMJ4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No, it won’t be equivalent to one chain with more samples, but more a test on do all chains with different initializations converge on the same posterior"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"F5ED97FA-D17B-48F3-B513-7D4C53250612","type":"message","text":"I was suggesting it since you’re already running stuff in parallel, you might want to explore different chains in parallel..However, if you want to solve the speed issue as a first priority, then switching to a non parallelized form might be better","user":"UTLTSMTEH","ts":"1614722643.319400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P7Y/v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was suggesting it since you’re already running stuff in parallel, you might want to explore different chains in parallel..However, if you want to solve the speed issue as a first priority, then switching to a non parallelized form might be better"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"535D1496-A1C9-4E38-83A5-5F8BF8CE2AA3","type":"message","text":"Do you have any specific application you’re running Bayesian Neural ODE on? I’m always interested to know more about applications for this method!","user":"UTLTSMTEH","ts":"1614722857.321300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Yz1Pr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you have any specific application you’re running Bayesian Neural ODE on? I’m always interested to know more about applications for this method!"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"cb85dc49-feb1-408d-a09d-94d3b1d611f6","type":"message","text":"So I'm a bachelor student in stuttgart and I started a project with neural ode but with variational inference","user":"U018YSX96LB","ts":"1614723056.321900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5/Pza","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So I'm a bachelor student in stuttgart and I started a project with neural ode but with variational inference"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"833d152c-02e2-4e74-aaa0-79c7699cae48","type":"message","text":"And I wanted now for my bachelor thesis  to explorer other methods like MCMC on neural odes","user":"U018YSX96LB","ts":"1614723077.322100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mPb8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And I wanted now for my bachelor thesis  to explorer other methods like MCMC on neural odes"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"9aa172ac-819e-4c09-b394-17ceeaf07f65","type":"message","text":"So the plan is to use Bayesian Neural ODEs with dynamical systems (chemical reactions...)","user":"U018YSX96LB","ts":"1614723131.322300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZFp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So the plan is to use Bayesian Neural ODEs with dynamical systems (chemical reactions...)"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"7c8db1a3-6660-4e91-9aa2-1d8b34959b1c","type":"message","text":"Thank you again for taking and answering my questions","user":"U018YSX96LB","ts":"1614723160.322500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CkB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you again for taking and answering my questions"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"21e7dab6-90ac-4789-8f19-f26ae9ae1883","type":"message","text":"Also congrats for your paper!!! Found it very interesting. Some new approaches being presented besides the variational inference.","user":"U018YSX96LB","ts":"1614723275.322700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2ffzA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also congrats for your paper!!! Found it very interesting. Some new approaches being presented besides the variational inference."}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"C7682210-0EFF-4D41-82EC-9B9278579D5E","type":"message","text":"That’s a great topic! Bayesian Neural ODEs with chemical reaction system sounds like a lot of fun!","user":"UTLTSMTEH","ts":"1614724633.334300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Iiio","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That’s a great topic! Bayesian Neural ODEs with chemical reaction system sounds like a lot of fun!"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"7FFE1047-C7EB-40A0-B6C1-2234CD94A9BF","type":"message","text":"Let me know how the project is going..I’ll be happy to take a look at codes/offer suggestions etc if you need them :slightly_smiling_face:","user":"UTLTSMTEH","ts":"1614724671.335400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7vQKK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Let me know how the project is going..I’ll be happy to take a look at codes/offer suggestions etc if you need them "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"AE6C333B-65C9-430D-B150-A3A8CBF1EC0E","type":"message","text":"Thanks a lot for your comments regarding the paper..We’re working on improving several aspects of it still!","user":"UTLTSMTEH","ts":"1614724769.336600","team":"T68168MUP","edited":{"user":"UTLTSMTEH","ts":"1614724856.000000"},"blocks":[{"type":"rich_text","block_id":"S7GKc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks a lot for your comments regarding the paper..We’re working on improving several aspects of it still!"}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"},{"client_msg_id":"50A12F7F-8790-4F58-9C23-6716CF20DB51","type":"message","text":"The important question to address is what the errors given by the Bayesian Neural ODE object actually represent...Chemical reaction systems you’re investigation maybe good examples to answer that question. ","user":"UTLTSMTEH","ts":"1614724825.338400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"92Qg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The important question to address is what the errors given by the Bayesian Neural ODE object actually represent...Chemical reaction systems you’re investigation maybe good examples to answer that question. "}]}]}],"thread_ts":"1614639669.252600","parent_user_id":"U018YSX96LB"}]