[{"client_msg_id":"261f575c-d5b5-4974-8d71-89b5904266fd","type":"message","text":"You can do something like\n```julia&gt; f(x; y, z) = x + y * z\nf (generic function with 1 method)\n\njulia&gt; Core.Compiler.return_type(Core.kwfunc(f), Tuple{typeof((y=2, z=3)), typeof(f), Float64})\nFloat64```\nNote that `return_type` is not a stable API though, so results are allowed to become less precise in future Julia versions.","user":"UM30MT6RF","ts":"1616421451.110800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8cEW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can do something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> f(x; y, z) = x + y * z\nf (generic function with 1 method)\n\njulia> Core.Compiler.return_type(Core.kwfunc(f), Tuple{typeof((y=2, z=3)), typeof(f), Float64})\nFloat64"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Note that "},{"type":"text","text":"return_type","style":{"code":true}},{"type":"text","text":" is not a stable API though, so results are allowed to become less precise in future Julia versions."}]}]}],"thread_ts":"1616421451.110800","reply_count":25,"reply_users_count":2,"latest_reply":"1616440581.136900","reply_users":["UP95S4864","UM30MT6RF"],"subscribed":false,"reactions":[{"name":"+1","users":["UP95S4864"],"count":1}]},{"client_msg_id":"b8f22dee-a580-4585-8afe-2539a3b24b0f","type":"message","text":"Quick follow up, It is unclear to me how to extend this in this following MWE.\n```f1(x, y=1.0; z=5, w = 6) = x*z+y*w\nfunction f2(x,args...; kwargs...)\n    T = Core.Compiler.return_type(...)\n    result = T[]\n    for ii = 1:100\n        push!(result,f1(x,args...;kwargs...))\n    end\n    result\nend```","user":"UP95S4864","ts":"1616438736.132100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SfJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Quick follow up, It is unclear to me how to extend this in this following MWE.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"f1(x, y=1.0; z=5, w = 6) = x*z+y*w\nfunction f2(x,args...; kwargs...)\n    T = Core.Compiler.return_type(...)\n    result = T[]\n    for ii = 1:100\n        push!(result,f1(x,args...;kwargs...))\n    end\n    result\nend"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"db17b351-d2cb-43a2-8685-42be4c4825a3","type":"message","text":"What are you having problems with?","user":"UM30MT6RF","ts":"1616438974.132300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"byqx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What are you having problems with?"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"4bfadb2e-e09a-40cc-9af9-73e04f87b3e2","type":"message","text":"how exactly to call `return_type`  is such a situation. I cannot splat the args into the `Tuple{}`","user":"UP95S4864","ts":"1616439059.132500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h7O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how exactly to call "},{"type":"text","text":"return_type","style":{"code":true}},{"type":"text","text":"  is such a situation. I cannot splat the args into the "},{"type":"text","text":"Tuple{}","style":{"code":true}}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"63d3c085-dfc9-4513-a8da-69d2865d2e18","type":"message","text":"Does `typeof(args)` not work?","user":"UM30MT6RF","ts":"1616439132.132700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MuB6o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does `typeof(args)` not work?"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"27e547d6-66d0-4d65-a5a0-453ef83f903d","type":"message","text":"I'm retrying right now, but I don't think so","user":"UP95S4864","ts":"1616439155.132900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+yQhZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm retrying right now, but I don't think so"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"99efcb65-826b-44e8-b143-bcc8960db8de","type":"message","text":"For this `T=Union{}`","user":"UP95S4864","ts":"1616439248.133100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WX5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For this "},{"type":"text","text":"T=Union{}","style":{"code":true}}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"4c6adce9-3281-4340-add0-2dc76d1851ee","type":"message","text":"```function f2(x,args...; kwargs...)\n    T = Core.Compiler.return_type(Core.kwfunc(f1), Tuple{typeof((z=5,w=6)), typeof(f1), typeof(args)})\n    result = T[]\n    for ii = 1:100\n        push!(result,f1(x,args...;kwargs...))\n    end\n    result\nend```","user":"UP95S4864","ts":"1616439253.133300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mHR2j","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function f2(x,args...; kwargs...)\n    T = Core.Compiler.return_type(Core.kwfunc(f1), Tuple{typeof((z=5,w=6)), typeof(f1), typeof(args)})\n    result = T[]\n    for ii = 1:100\n        push!(result,f1(x,args...;kwargs...))\n    end\n    result\nend"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"008861ec-29a0-46c7-bd2b-3ddef667180f","type":"message","text":"That probably means it would be a MethodError. What exactly did you try?","user":"UM30MT6RF","ts":"1616439332.133500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uMnrT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That probably means it would be a MethodError. What exactly did you try?"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"e2e20053-9c09-4167-8ec9-b602210fa4b7","type":"message","text":"Yes, a method error on `convert`  when doing the push\n```f1(x, y=1.0; z=5, w = 6) = x*z+y*w\nfunction f2(x,args...; kwargs...)\n    T = Core.Compiler.return_type(Core.kwfunc(f1), Tuple{typeof((z=5,w=6)), typeof(args)})\n    result = T[]\n    for ii = 1:100\n        push!(result,f1(x,args...;kwargs...))\n    end\n    result\nend\n\nf2(3,4; z=1, w=10)```","user":"UP95S4864","ts":"1616439411.133700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r=EA5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, a method error on "},{"type":"text","text":"convert","style":{"code":true}},{"type":"text","text":"  when doing the push\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"f1(x, y=1.0; z=5, w = 6) = x*z+y*w\nfunction f2(x,args...; kwargs...)\n    T = Core.Compiler.return_type(Core.kwfunc(f1), Tuple{typeof((z=5,w=6)), typeof(args)})\n    result = T[]\n    for ii = 1:100\n        push!(result,f1(x,args...;kwargs...))\n    end\n    result\nend\n\nf2(3,4; z=1, w=10)"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"6ec4acd4-3c81-4fb5-b497-b6aeaffc439f","type":"message","text":"Notice the `typeof(f)` in the tuple type in my example above.","user":"UM30MT6RF","ts":"1616439509.133900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RImJ5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Notice the "},{"type":"text","text":"typeof(f)","style":{"code":true}},{"type":"text","text":" in the tuple type in my example above."}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"f0b06e39-787d-4fd1-a32f-b9f8b4910f00","type":"message","text":"I'm sorry, I forgot that I changed that to see it was maybe a typo. You get the same result with\n```T = Core.Compiler.return_type(Core.kwfunc(f1), Tuple{typeof((z=5,w=6)), typeof(f1), typeof(args)})```","user":"UP95S4864","ts":"1616439608.134100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"H+fi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm sorry, I forgot that I changed that to see it was maybe a typo. You get the same result with\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"T = Core.Compiler.return_type(Core.kwfunc(f1), Tuple{typeof((z=5,w=6)), typeof(f1), typeof(args)})"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"9680e9ea-dece-4b75-8792-47019959e4d2","type":"message","text":"leads to `MethodError: convert(::Type{Union{}}, ::Int64) is ambiguous.`  during push. I suspect that is from `return_type`  not being call properly","user":"UP95S4864","ts":"1616439667.134300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HEk=z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"leads to "},{"type":"text","text":"MethodError: convert(::Type{Union{}}, ::Int64) is ambiguous.","style":{"code":true}},{"type":"text","text":"  during push. I suspect that is from "},{"type":"text","text":"return_type","style":{"code":true}},{"type":"text","text":"  not being call properly"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"d9324a6b-12d5-4c17-834c-46b9a854bc1b","type":"message","text":"You are passing another argument x, so you will need to specify that as well","user":"UM30MT6RF","ts":"1616439682.134500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CB3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You are passing another argument x, so you will need to specify that as well"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"d5c2c646-f1c1-43b6-8047-a474050a0e50","type":"message","text":"`T = Core.Compiler.return_type(Core.kwfunc(f1), Tuple{typeof((z=5,w=6)), typeof(f1), typeof(x),typeof(args)})`  produces the same","user":"UP95S4864","ts":"1616439746.134700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yi5O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"T = Core.Compiler.return_type(Core.kwfunc(f1), Tuple{typeof((z=5,w=6)), typeof(f1), typeof(x),typeof(args)})","style":{"code":true}},{"type":"text","text":"  produces the same"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"cc92ca41-1c90-4ec9-9e47-8007e94cca48","type":"message","text":"Oh, sorry, I misunderstood above. `typeof(x)` won't work here since that's just another tuple type. You'll need something like `typeof.(args)...` then","user":"UM30MT6RF","ts":"1616439941.134900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EBt9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, sorry, I misunderstood above. "},{"type":"text","text":"typeof(x)","style":{"code":true}},{"type":"text","text":" won't work here since that's just another tuple type. You'll need something like "},{"type":"text","text":"typeof.(args)...","style":{"code":true}},{"type":"text","text":" then"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"d5c16dbc-bdff-47a7-a5db-8a2e6ccd0825","type":"message","text":"That works... for some reason I thought you could splat into `{}`","user":"UP95S4864","ts":"1616440024.135100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9Rr6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That works... for some reason I thought you could splat into "},{"type":"text","text":"{}","style":{"code":true}}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"9635f656-a38c-4f48-8795-dcf3c7876077","type":"message","text":"Sorry to keep bothering you, but my next challenge is how to generalize `typeof((z=5,w=6))`  to `kwargs...`","user":"UP95S4864","ts":"1616440093.135300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZV73","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sorry to keep bothering you, but my next challenge is how to generalize "},{"type":"text","text":"typeof((z=5,w=6))","style":{"code":true}},{"type":"text","text":"  to "},{"type":"text","text":"kwargs...","style":{"code":true}}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"69ef59a4-432e-437b-be7d-36bf059dfb0e","type":"message","text":"`typeof(NamedTuple(kwarg))`","user":"UM30MT6RF","ts":"1616440219.135500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tscm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"typeof(NamedTuple(kwarg))","style":{"code":true}}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"b581c6a1-2f08-401a-bd05-5c96df31e70e","type":"message","text":"Thats what I expected, but\n```MethodError: no method matching NamedTuple(::Base.Iterators.Pairs{Symbol,Int64,Tuple{Symbol,Symbol},NamedTuple{(:z, :w),Tuple{Int64,Int64}}})```","user":"UP95S4864","ts":"1616440264.135700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ouaD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thats what I expected, but\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"MethodError: no method matching NamedTuple(::Base.Iterators.Pairs{Symbol,Int64,Tuple{Symbol,Symbol},NamedTuple{(:z, :w),Tuple{Int64,Int64}}})"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"408a6e3f-429d-4f1b-82e1-3aa836193732","type":"message","text":"Might only work on newer versions. I think `values` might still work instead of NamedTuple though","user":"UM30MT6RF","ts":"1616440348.135900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SnQ63","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Might only work on newer versions. I think "},{"type":"text","text":"values","style":{"code":true}},{"type":"text","text":" might still work instead of NamedTuple though"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"4683608e-392f-43c9-84c5-ba733010a08e","type":"message","text":"new, as in v1.6? I am on 1.5.3. `values`  does the trick","user":"UP95S4864","ts":"1616440436.136100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yBA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"new, as in v1.6? I am on 1.5.3. "},{"type":"text","text":"values","style":{"code":true}},{"type":"text","text":"  does the trick"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"a7438454-a3e5-4a34-a538-96a818f7cf47","type":"message","text":"Might even be 1.7, not sure","user":"UM30MT6RF","ts":"1616440477.136300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Om74","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Might even be 1.7, not sure"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"87693d67-f758-44ea-8528-34224a319344","type":"message","text":"Thank you for being so generous w/ your time.","user":"UP95S4864","ts":"1616440517.136500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VKFZZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you for being so generous w/ your time."}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"0545e75d-7cc1-4a8c-8a4d-a9b69e1b0e72","type":"message","text":"No problem","user":"UM30MT6RF","ts":"1616440555.136700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5mC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No problem"}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"},{"client_msg_id":"26e3c7a1-153f-4f2d-ae6f-f523cfcfd323","type":"message","text":"Seems like their should be a macro for doing this `@return_type f1(x, args...;kwargs...)`","user":"UP95S4864","ts":"1616440581.136900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sVhK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Seems like their should be a macro for doing this "},{"type":"text","text":"@return_type f1(x, args...;kwargs...)","style":{"code":true}}]}]}],"thread_ts":"1616421451.110800","parent_user_id":"UM30MT6RF"}]