[{"client_msg_id":"415db1c5-a835-4de4-aadb-074bcd6dbb69","type":"message","text":"While making a custom system image with `PackageCompiler` I realized that sometimes a few functions are not included, although they are called by other functions in my `precompile_execution_file.jl` ,e.g. if I overload  `LinearAlgebra.diag(M::MyType)` . Is there a way to make this inclusion more \"exhaustive\"?","user":"U013V2CFZAN","ts":"1616414491.004100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tIBrL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"While making a custom system image with "},{"type":"text","text":"PackageCompiler","style":{"code":true}},{"type":"text","text":" I realized that sometimes a few functions are not included, although they are called by other functions in my "},{"type":"text","text":"precompile_execution_file.jl","style":{"code":true}},{"type":"text","text":" ,e.g. if I overload  "},{"type":"text","text":"LinearAlgebra.diag(M::MyType)","style":{"code":true}},{"type":"text","text":" . Is there a way to make this inclusion more \"exhaustive\"?"}]}]}],"thread_ts":"1616414491.004100","reply_count":2,"reply_users_count":2,"latest_reply":"1617092353.005100","reply_users":["U6740K1SP","U013V2CFZAN"],"is_locked":false,"subscribed":false},{"client_msg_id":"44ba29d5-5971-4fce-a74d-90017db774c5","type":"message","text":"I recommend generating the `precompile_execution_file.jl` with `julia --trace-compile` — is that what you’re doing?","user":"U6740K1SP","ts":"1617047824.004800","team":"T68168MUP","edited":{"user":"U6740K1SP","ts":"1617047847.000000"},"blocks":[{"type":"rich_text","block_id":"fkoaF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I recommend generating the "},{"type":"text","text":"precompile_execution_file.jl","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"julia --trace-compile","style":{"code":true}},{"type":"text","text":" — is that what you’re doing?"}]}]}],"thread_ts":"1616414491.004100","parent_user_id":"U013V2CFZAN"},{"client_msg_id":"94661a5a-e716-4d7d-bcde-8fe3a5847fad","type":"message","text":"well that would be a `precompile_statements_file.jl` ... but in general yes, that is what I'm doing. However, a few statements are not precompiled. I dug a bit deeper and it seems that `<http://Base.cat|Base.cat>`  for `MyType` is inferred as `Any` and therefore not saved in the system image.","user":"U013V2CFZAN","ts":"1617092353.005100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oxV10","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well that would be a "},{"type":"text","text":"precompile_statements_file.jl","style":{"code":true}},{"type":"text","text":" ... but in general yes, that is what I'm doing. However, a few statements are not precompiled. I dug a bit deeper and it seems that "},{"type":"text","text":"Base.cat","style":{"code":true}},{"type":"text","text":"  for "},{"type":"text","text":"MyType","style":{"code":true}},{"type":"text","text":" is inferred as "},{"type":"text","text":"Any","style":{"code":true}},{"type":"text","text":" and therefore not saved in the system image."}]}]}],"thread_ts":"1616414491.004100","parent_user_id":"U013V2CFZAN"}]