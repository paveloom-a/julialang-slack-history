[{"client_msg_id":"8dc5a116-e911-4898-a2e4-79d72158d843","type":"message","text":"Unfortunately not, Julia doesn't support cross compilation right now.","user":"U67D54KS8","ts":"1614854992.002000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r4ke","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Unfortunately not, Julia doesn't support cross compilation right now."}]}]}],"thread_ts":"1614854992.002000","reply_count":11,"reply_users_count":5,"latest_reply":"1614880666.004900","reply_users":["U013B3NSZGB","U67D54KS8","U013V2CFZAN","U66GD0880","U6A0PD8CR"],"subscribed":false},{"client_msg_id":"d403cb82-1a99-465f-8fb0-b0355e2a86b3","type":"message","text":"Is it worked on or tracked somewhere?","user":"U013B3NSZGB","ts":"1614866441.002100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lBgHO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it worked on or tracked somewhere?"}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8"},{"client_msg_id":"8b59cc33-eb5c-4773-9615-36916fa6d70b","type":"message","text":"Don't think so","user":"U67D54KS8","ts":"1614866605.002300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"twH1+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Don't think so"}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8"},{"client_msg_id":"5d73df23-6454-4b4f-a3ca-7237d576eb26","type":"message","text":"Oh well ... sometimes Julia does magical things ... I was hoping this to be one of those :slightly_smiling_face:","user":"U013V2CFZAN","ts":"1614867157.002500","team":"T68168MUP","edited":{"user":"U013V2CFZAN","ts":"1614867185.000000"},"blocks":[{"type":"rich_text","block_id":"JzGW0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh well ... sometimes Julia does magical things ... I was hoping this to be one of those "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8"},{"client_msg_id":"5aa31e53-a124-4cea-bf02-a9e6e310bc08","type":"message","text":"It’s a hard problem; think of how much Julia code is not written with cross-compilation in mind, e.g. if your package has something like:\n\n```@static if Sys.iswindows()\n    ....\nend```\nthen in order for us to properly cross-compile that, you’d have to have `Sys.iswindows()` return true.  And if you do that, then there are lots of codepaths that will be activated that will try to `ccall()` things that only exist on Windows.  So for a language like Julia where we run code at compile time, cross-compilation basically requires full emulation of the target system.  Doable with things like WINE, but certainly not easy.","user":"U66GD0880","ts":"1614877779.002900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cFjv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It’s a hard problem; think of how much Julia code is not written with cross-compilation in mind, e.g. if your package has something like:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@static if Sys.iswindows()\n    ....\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nthen in order for us to properly cross-compile that, you’d have to have "},{"type":"text","text":"Sys.iswindows()","style":{"code":true}},{"type":"text","text":" return true.  And if you do that, then there are lots of codepaths that will be activated that will try to "},{"type":"text","text":"ccall()","style":{"code":true}},{"type":"text","text":" things that only exist on Windows.  So for a language like Julia where we run code at compile time, cross-compilation basically requires full emulation of the target system.  Doable with things like WINE, but certainly not easy."}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8"},{"client_msg_id":"5b867133-a317-4e96-a338-bf678c5c29d4","type":"message","text":"<@U66GD0880> I take your word for it ... On the other hand ... what you do with `BinaryBuilder` seemed impossible to me a few years ago","user":"U013V2CFZAN","ts":"1614877941.003100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aoCEQ","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U66GD0880"},{"type":"text","text":" I take your word for it ... On the other hand ... what you do with "},{"type":"text","text":"BinaryBuilder","style":{"code":true}},{"type":"text","text":" seemed impossible to me a few years ago"}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8"},{"client_msg_id":"64c344d6-8925-4dad-970a-fc54c188637d","type":"message","text":"hehehe, yeah.  We generally don’t cross-compile languages that run code at compile-time though, or if we do, they explicitly support cross-compilation.  :wink:","user":"U66GD0880","ts":"1614877984.003300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TFE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hehehe, yeah.  We generally don’t cross-compile languages that run code at compile-time though, or if we do, they explicitly support cross-compilation.  "},{"type":"emoji","name":"wink"}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8"},{"client_msg_id":"ed500506-555a-4f36-aa53-1e37aa22aafb","type":"message","text":"It would definitely be nice to cross-compile static code that does not depend on codegen though, for embedded targets or apps. Would it be more likely to happen?","user":"U013B3NSZGB","ts":"1614879346.003800","team":"T68168MUP","edited":{"user":"U013B3NSZGB","ts":"1614879358.000000"},"blocks":[{"type":"rich_text","block_id":"4aAw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It would definitely be nice to cross-compile static code that does not depend on codegen though, for embedded targets or apps. Would it be more likely to happen?"}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8"},{"client_msg_id":"69117bd5-507f-4630-af37-1517a7c97742","type":"message","text":"Yes, that does have a lot more chance to happen; that might be possible using <@U6A0PD8CR>’s GPUCompiler.jl-like approach to static compilation.  I’ll let him say whether or not that is or is not feasible in the short to medium term.","user":"U66GD0880","ts":"1614879409.004100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HBF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, that does have a lot more chance to happen; that might be possible using "},{"type":"user","user_id":"U6A0PD8CR"},{"type":"text","text":"’s GPUCompiler.jl-like approach to static compilation.  I’ll let him say whether or not that is or is not feasible in the short to medium term."}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8"},{"client_msg_id":"ca00a9d6-ad7a-46bd-9031-41ed4194d1ad","type":"message","text":"Yeah, I mean we already do cross-compilation to GPU machine code. Doing that for CPU targets is trivial if done manually, but getting that \"for free\" from a package's module initialization code is not necessarily possible, as <@U66GD0880> pointed out.","user":"U6A0PD8CR","ts":"1614879580.004300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h6giE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, I mean we already do cross-compilation to GPU machine code. Doing that for CPU targets is trivial if done manually, but getting that \"for free\" from a package's module initialization code is not necessarily possible, as "},{"type":"user","user_id":"U66GD0880"},{"type":"text","text":" pointed out."}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8","reactions":[{"name":"+1","users":["U013B3NSZGB"],"count":1}]},{"client_msg_id":"e95d1247-777e-467d-b5c8-b3447776dff8","type":"message","text":"Although we'd need to adjust GPUCompiler to allow selecting a non-native target","user":"U6A0PD8CR","ts":"1614879829.004500","team":"T68168MUP","edited":{"user":"U6A0PD8CR","ts":"1614879868.000000"},"blocks":[{"type":"rich_text","block_id":"oFH5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Although we'd need to adjust GPUCompiler to allow selecting a non-native target"}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8"},{"client_msg_id":"35b06514-c802-4ab5-ab11-0b9e9d661419","type":"message","text":"Thanks for the explanation!","user":"U013B3NSZGB","ts":"1614880666.004900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3DnQ0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for the explanation!"}]}]}],"thread_ts":"1614854992.002000","parent_user_id":"U67D54KS8"}]