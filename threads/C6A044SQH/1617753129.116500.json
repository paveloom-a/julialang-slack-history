[{"client_msg_id":"8361a3f3-1d8e-4cea-83f3-725ba24d663d","type":"message","text":"Hey I'm not sure if this is possible or advisable but I'm trying to use the type system to let me define addition on some custom functions by delayed application. For example\n```function add(n)\n    function adder(v)\n        v + n\n    end\nend\n\nfunction +(a::??,b::??)\n    x -&gt; a(v) + b(v) ::??\nend```\nSo that the following would hold\n```(add(2) + add(3))(4) == add(2)(4) + add(3)(4) == 6 + 7 == 13```\nI don't understand how the type system works for functions in Julia.\nI suppose I could put the data in add into a struct, define addition over the struct and create a\nfunction which then implements the addition (in this example) on some input,\nbut it would be much more convenient if something like what Ive written was possible.\n\n*Solution* \nThis one liner, thanks for the help :heart:\n```+(F1::Function,F2::Function) = F3(v...) = F1(v...) + F2(v...)```","user":"U01T3H7STQR","ts":"1617753129.116500","team":"T68168MUP","edited":{"user":"U01T3H7STQR","ts":"1617757742.000000"},"blocks":[{"type":"rich_text","block_id":"d9/Dd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey I'm not sure if this is possible or advisable but I'm trying to use the type system to let me define addition on some custom functions by delayed application. For example\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function add(n)\n    function adder(v)\n        v + n\n    end\nend\n\nfunction +(a::??,b::??)\n    x -> a(v) + b(v) ::??\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"So that the following would hold\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"(add(2) + add(3))(4) == add(2)(4) + add(3)(4) == 6 + 7 == 13"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I don't understand how the type system works for functions in Julia.\nI suppose I could put the data in add into a struct, define addition over the struct and create a\nfunction which then implements the addition (in this example) on some input,\nbut it would be much more convenient if something like what Ive written was possible.\n\n"},{"type":"text","text":"Solution ","style":{"bold":true}},{"type":"text","text":"\nThis one liner, thanks for the help "},{"type":"emoji","name":"heart"},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"+(F1::Function,F2::Function) = F3(v...) = F1(v...) + F2(v...)"}]}]}],"thread_ts":"1617753129.116500","reply_count":14,"reply_users_count":4,"latest_reply":"1617757617.122300","reply_users":["U0179G7FG4F","U017LQ3A59U","U01T3H7STQR","U73SL09GE"],"is_locked":false,"subscribed":false},{"client_msg_id":"aac379ff-e988-4b27-8216-dcebfe58b900","type":"message","text":"I think your best bet here is a `Struct`.","user":"U0179G7FG4F","ts":"1617753730.117200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RdG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think your best bet here is a "},{"type":"text","text":"Struct","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"client_msg_id":"a331971a-836f-4583-aa6c-b6aa04c8d86a","type":"message","text":"In julia each function has its own type that are all distinct. This is why `typeof` looks so unhelpful for a function `f`:\n```julia&gt; typeof(f)\ntypeof(f)```\nFor you case you probably wants something along those line\n```struct Adder\n    x\nend\n\n(adder::Adder)(v) = adder.x + v  # Make the Adder struct callable\n\nBase.:+(a::Adder, b::Adder) = v -&gt; a(v) + b(v)```\nand then as expected\n```julia&gt; (Adder(2) + Adder(3))(4)\n13```","user":"U017LQ3A59U","ts":"1617754668.117700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"36r+V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In julia each function has its own type that are all distinct. This is why "},{"type":"text","text":"typeof","style":{"code":true}},{"type":"text","text":" looks so unhelpful for a function "},{"type":"text","text":"f","style":{"code":true}},{"type":"text","text":":\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> typeof(f)\ntypeof(f)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"For you case you probably wants something along those line\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"struct Adder\n    x\nend\n\n(adder::Adder)(v) = adder.x + v  # Make the Adder struct callable\n\nBase.:+(a::Adder, b::Adder) = v -> a(v) + b(v)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and then as expected\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> (Adder(2) + Adder(3))(4)\n13"}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR","reactions":[{"name":"thumbsup_all","users":["U0179G7FG4F","U01T3H7STQR","UKG4WF8PJ"],"count":3}]},{"client_msg_id":"4fa4a63f-ae36-4636-a783-a47c92c4b2c1","type":"message","text":"Actually for consistency you may want the addition to be defined as\n```Base.:+(a::Adder, b::Adder) = Adder(a.x + b.x)```\nso that you are only dealing with objects of the same type","user":"U017LQ3A59U","ts":"1617754826.118000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9o2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Actually for consistency you may want the addition to be defined as\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Base.:+(a::Adder, b::Adder) = Adder(a.x + b.x)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"so that you are only dealing with objects of the same type"}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"client_msg_id":"4b91331d-e8e8-4457-9b53-7b93debaed84","type":"message","text":"Thanks !\nAs you point out the first solution's is not good because it brakes closure of types (addition of adders isnt an adder)\nbut the second solution  also fails because Adder(2) + Adder(3) = Adder(5)  which has the wrong behavior\n```(add(2) + add(3))(4) != add(2)(4) + add(3)(4) ```\nBut I can create a struct that carrys around a function and knows how to add them like so\n```struct addable f end\n(a::addable)(v) = a.f(v)\n\nfunction +(a::addable,b::addable)\n    addable(v-&gt;(a(v) + b(v)))\nend\n  \nadd(n) = addable(v-&gt;n+v)\n(add(2) + add(3))(4) == add(2)(4) + add(3)(4) == 6 + 7 == 13```\nThen I get the behavior I wanted, I feel like there is a better way of doing this and comparability with other property s might become a problem","user":"U01T3H7STQR","ts":"1617756177.118500","team":"T68168MUP","edited":{"user":"U01T3H7STQR","ts":"1617756229.000000"},"blocks":[{"type":"rich_text","block_id":"z9t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks !\nAs you point out the first solution's is not good because it brakes closure of types (addition of adders isnt an adder)\nbut the second solution  also fails because Adder(2) + Adder(3) = Adder(5)  which has the wrong behavior\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"(add(2) + add(3))(4) != add(2)(4) + add(3)(4) "}]},{"type":"rich_text_section","elements":[{"type":"text","text":"But I can create a struct that carrys around a function and knows how to add them like so\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"struct addable f end\n(a::addable)(v) = a.f(v)\n\nfunction +(a::addable,b::addable)\n    addable(v->(a(v) + b(v)))\nend\n  \nadd(n) = addable(v->n+v)\n(add(2) + add(3))(4) == add(2)(4) + add(3)(4) == 6 + 7 == 13"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Then I get the behavior I wanted, I feel like there is a better way of doing this and comparability with other property s might become a problem"}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"client_msg_id":"5c120180-9766-4fd1-a95b-ddee73553a5b","type":"message","text":"Also if I add loads of these things together there might be performance problems, as each addition results in another layer of adder(...)","user":"U01T3H7STQR","ts":"1617756280.118800","team":"T68168MUP","edited":{"user":"U01T3H7STQR","ts":"1617756300.000000"},"blocks":[{"type":"rich_text","block_id":"MsixI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also if I add loads of these things together there might be performance problems, as each addition results in another layer of adder(...)"}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"client_msg_id":"c9f11990-290a-4d69-bbef-0f9ebce10b00","type":"message","text":"oh and my real problem situation has functions that take multiple arguments too","user":"U01T3H7STQR","ts":"1617756369.119100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ey2j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh and my real problem situation has functions that take multiple arguments too"}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"type":"message","text":"","files":[{"id":"F01TUPTS8MP","created":1617756669,"timestamp":1617756669,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U73SL09GE","editable":false,"size":22758,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01TUPTS8MP/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01TUPTS8MP/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01TUPTS8MP-00f8df5404/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01TUPTS8MP-00f8df5404/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01TUPTS8MP-00f8df5404/image_360.png","thumb_360_w":360,"thumb_360_h":158,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01TUPTS8MP-00f8df5404/image_480.png","thumb_480_w":480,"thumb_480_h":211,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01TUPTS8MP-00f8df5404/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01TUPTS8MP-00f8df5404/image_720.png","thumb_720_w":720,"thumb_720_h":317,"original_w":761,"original_h":335,"thumb_tiny":"AwAVADDSNANBo59KAFopKKAFooooAMUY96KKACiiigAooooA/9k=","permalink":"https://julialang.slack.com/files/U73SL09GE/F01TUPTS8MP/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01TUPTS8MP-a65cf863c2","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"U73SL09GE","display_as_bot":false,"ts":"1617756673.120500","thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"client_msg_id":"dc5d178a-1ee6-456b-acdf-6aeeac14cd42","type":"message","text":"maybe can use the `Function` type (no idea about the performance)","user":"U73SL09GE","ts":"1617756763.120900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2Gi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"maybe can use the "},{"type":"text","text":"Function ","style":{"code":true}},{"type":"text","text":"type (no idea about the performance)"}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"client_msg_id":"29d4483a-c15a-43fa-a2cb-5c2117881346","type":"message","text":"By adding some ...s It can now do multiple arguments\n```struct addable f end\n(a::addable)(v...) = a.f(v...)\n\nfunction +(a::addable,b::addable)\n    foo(v...) = a(v...) + b(v...)\n    addable(foo)\nend\n  \nadd(n) = addable(v-&gt;n+v)\n(add(2) + add(3))(4) == add(2)(4) + add(3)(4) == 6 + 7 == 13\n\ng(x,y) = x^3 -y^2\n(addable(g) + addable(g))(2,3)```","user":"U01T3H7STQR","ts":"1617756779.121100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aZ1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"By adding some ...s It can now do multiple arguments\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"struct addable f end\n(a::addable)(v...) = a.f(v...)\n\nfunction +(a::addable,b::addable)\n    foo(v...) = a(v...) + b(v...)\n    addable(foo)\nend\n  \nadd(n) = addable(v->n+v)\n(add(2) + add(3))(4) == add(2)(4) + add(3)(4) == 6 + 7 == 13\n\ng(x,y) = x^3 -y^2\n(addable(g) + addable(g))(2,3)"}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"client_msg_id":"5416d8cf-c8a6-4d26-87d8-547b33d43d11","type":"message","text":"<@U73SL09GE> dose your solution allow for adding 3 items?","user":"U01T3H7STQR","ts":"1617756889.121400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e9xV","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U73SL09GE"},{"type":"text","text":" dose your solution allow for adding 3 items?"}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"type":"message","text":"you mean something like this?","files":[{"id":"F01T9CKKQUE","created":1617757020,"timestamp":1617757020,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U73SL09GE","editable":false,"size":39651,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01T9CKKQUE/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01T9CKKQUE/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01T9CKKQUE-a1f96c16ea/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01T9CKKQUE-a1f96c16ea/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01T9CKKQUE-a1f96c16ea/image_360.png","thumb_360_w":360,"thumb_360_h":206,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01T9CKKQUE-a1f96c16ea/image_480.png","thumb_480_w":480,"thumb_480_h":274,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01T9CKKQUE-a1f96c16ea/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01T9CKKQUE-a1f96c16ea/image_720.png","thumb_720_w":720,"thumb_720_h":412,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01T9CKKQUE-a1f96c16ea/image_800.png","thumb_800_w":800,"thumb_800_h":457,"original_w":857,"original_h":490,"thumb_tiny":"AwAbADDSNHNFHNAC0UlFAC0UnPtS0AJ3o5pcUUAFFFFABRRRQB//2Q==","permalink":"https://julialang.slack.com/files/U73SL09GE/F01T9CKKQUE/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01T9CKKQUE-c541f9e1ce","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"xMr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you mean something like this?"}]}]}],"user":"U73SL09GE","display_as_bot":false,"ts":"1617757031.121600","thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"client_msg_id":"10fca9e7-3ecb-44c5-bca7-7a798ec8a1a3","type":"message","text":"yes thats grate, thanks <@U73SL09GE>\n```function +(F1::Function,F2::Function)\n    function F3(v...)\n        F1(v...) + F2(v...)\n    end\nend\n((x-&gt;2x) + (x-&gt;3x))(3)s```","user":"U01T3H7STQR","ts":"1617757177.121800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"T3+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes thats grate, thanks "},{"type":"user","user_id":"U73SL09GE"},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function +(F1::Function,F2::Function)\n    function F3(v...)\n        F1(v...) + F2(v...)\n    end\nend\n((x->2x) + (x->3x))(3)s"}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"client_msg_id":"2d483306-395c-4c0b-90c5-007b78305636","type":"message","text":"I dont know what the style guild for one liners is but thats pretty cool\n```+(F1::Function,F2::Function) = F3(v...) = F1(v...) + F2(v...)```","user":"U01T3H7STQR","ts":"1617757261.122000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"12N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I dont know what the style guild for one liners is but thats pretty cool\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"+(F1::Function,F2::Function) = F3(v...) = F1(v...) + F2(v...)"}]}]}],"thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"},{"type":"message","text":"Thanks to that tip I could wright this code\n```dx = 0.1\nL = 2*2π\nx = -L:dx:L\ny = -L:dx:L\nfunction wave(k)\n    s(x,y) = sin.(k*(x.^2+y.^2).^0.5)\nend\n\nfps = 10\nanim = @animate for i in 1:5*fps\n    contour(x,y,wave(1) + wave(1+i/10),fill=true)\nend\ngif(anim,fps=fps)```\nThat makes this pretty gif","files":[{"id":"F01TGCWKKR9","created":1617757564,"timestamp":1617757564,"name":"tmp.gif","title":"tmp.gif","mimetype":"image/gif","filetype":"gif","pretty_type":"GIF","user":"U01T3H7STQR","editable":false,"size":6981144,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01TGCWKKR9/tmp.gif","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01TGCWKKR9/download/tmp.gif","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01TGCWKKR9-b962d531e5/tmp_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01TGCWKKR9-b962d531e5/tmp_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01TGCWKKR9-b962d531e5/tmp_360.png","thumb_360_w":360,"thumb_360_h":240,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01TGCWKKR9-b962d531e5/tmp_480.png","thumb_480_w":480,"thumb_480_h":320,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01TGCWKKR9-b962d531e5/tmp_160.png","thumb_360_gif":"https://files.slack.com/files-tmb/T68168MUP-F01TGCWKKR9-b962d531e5/tmp_360.gif","thumb_480_gif":"https://files.slack.com/files-tmb/T68168MUP-F01TGCWKKR9-b962d531e5/tmp_480.gif","original_w":600,"original_h":400,"deanimate":"https://files.slack.com/files-tmb/T68168MUP-F01TGCWKKR9-b962d531e5/tmp_deanimate.png","deanimate_gif":"https://files.slack.com/files-tmb/T68168MUP-F01TGCWKKR9-b962d531e5/tmp_deanimate_gif.png","thumb_tiny":"AwAgADCa8DmZcSMiBecHFVHu2B2xFj7k5NT6q5G1R3FQJi3tfNAy7cA+lS/MpbCYvG5LsPq2KC13FySxH1zUccUlwpkaQKPUmlzLaTbScj07GjyAlS48/wCUuyP6hjir1mXEQVySwznJ96zbtFRlkTgMM4q/ZuXCE9dv9aF5DZHqcZcAjqoqrE6SweTIdpHQmr13HO0yvEAQBg5NQPYNJ8wXY3pnIofmJFdUuoMiMEg+nIpRBLI/mXB2juWp/wBhu1+6eP8Aepf7PuGPzn9aYENxJ58ipGPlHArQtF2SKmeif1qIWkkI/dR5b+8SKmtIZUcNIMfKQee+c0IGf//Z","permalink":"https://julialang.slack.com/files/U01T3H7STQR/F01TGCWKKR9/tmp.gif","permalink_public":"https://slack-files.com/T68168MUP-F01TGCWKKR9-894c2092cc","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"Dn=Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks to that tip I could wright this code\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"dx = 0.1\nL = 2*2π\nx = -L:dx:L\ny = -L:dx:L\nfunction wave(k)\n    s(x,y) = sin.(k*(x.^2+y.^2).^0.5)\nend\n\nfps = 10\nanim = @animate for i in 1:5*fps\n    contour(x,y,wave(1) + wave(1+i/10),fill=true)\nend\ngif(anim,fps=fps)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"That makes this pretty gif"}]}]}],"user":"U01T3H7STQR","display_as_bot":false,"ts":"1617757617.122300","thread_ts":"1617753129.116500","parent_user_id":"U01T3H7STQR"}]