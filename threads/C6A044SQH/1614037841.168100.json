[{"client_msg_id":"9157f7d8-0b79-4371-bc28-8ca9ef10c468","type":"message","text":"Is there a way to check for how much memory an object uses? `Base.summarysize` is not really being truthful to me. I have a process that takes about 30 gb of actual memory as reported by Linux. But the resulting object in Julia says only about 1.2 megabytes.\n```julia&gt; Base.summarysize(aa)\n1216952```","user":"U6Z8377N2","ts":"1614037841.168100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x1BXw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way to check for how much memory an object uses? "},{"type":"text","text":"Base.summarysize","style":{"code":true}},{"type":"text","text":" is not really being truthful to me. I have a process that takes about 30 gb of actual memory as reported by Linux. But the resulting object in Julia says only about 1.2 megabytes.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> Base.summarysize(aa)\n1216952"}]}]}],"thread_ts":"1614037841.168100","reply_count":4,"reply_users_count":2,"latest_reply":"1614038452.169000","reply_users":["B01J9QZ4SP8","U6Z8377N2"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1614037843.168200","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1614037841.168100","parent_user_id":"U6Z8377N2"},{"client_msg_id":"e1a78301-b355-4d4e-8b30-902b2cd554b4","type":"message","text":"The code looks like\n```tstarts = 90:5:180\n    tsims = []\n    for ti in tstarts\n        p = Progress(400, barglyphs=BarGlyphs(\"[=&gt; ]\"))\n        sims = progress_map(1:400, progress = p, mapfun = pmap) do cp\n            sol = run_model(1, 0.0267, cp, 90, true)\n        end \n        push!(tsims, sims)\n    end \n\n    println(\"$(Base.summarysize(tsims))\")```\nso the `progress_map` returns an array of ODE solutions (= 400 ODE solutions) and I push this to `tsims`. Then I move on to the next scenario, get my array of ODE solutions (again, 400 of them), and so on. In other words, `aa[i]` is an `Array{ODESolution}`.\n\nSo I am not sure whats taking up memory","user":"U6Z8377N2","ts":"1614038009.168600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Apa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The code looks like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"tstarts = 90:5:180\n    tsims = []\n    for ti in tstarts\n        p = Progress(400, barglyphs=BarGlyphs(\"[=> ]\"))\n        sims = progress_map(1:400, progress = p, mapfun = pmap) do cp\n            sol = run_model(1, 0.0267, cp, 90, true)\n        end \n        push!(tsims, sims)\n    end \n\n    println(\"$(Base.summarysize(tsims))\")"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"so the "},{"type":"text","text":"progress_map","style":{"code":true}},{"type":"text","text":" returns an array of ODE solutions (= 400 ODE solutions) and I push this to "},{"type":"text","text":"tsims","style":{"code":true}},{"type":"text","text":". Then I move on to the next scenario, get my array of ODE solutions (again, 400 of them), and so on. In other words, "},{"type":"text","text":"aa[i]","style":{"code":true}},{"type":"text","text":" is an "},{"type":"text","text":"Array{ODESolution}","style":{"code":true}},{"type":"text","text":".\n\nSo I am not sure whats taking up memory"}]}]}],"thread_ts":"1614037841.168100","parent_user_id":"U6Z8377N2"},{"client_msg_id":"3ad20ab2-f006-4cd2-a1b4-59ee8a58866f","type":"message","text":"And as expected\n```julia&gt; aa = Nothing\nNothing\n\njulia&gt; aa\nNothing\n\njulia&gt; GC.gc()```\nfreed it all up","user":"U6Z8377N2","ts":"1614038149.168800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u=2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And as expected\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> aa = Nothing\nNothing\n\njulia> aa\nNothing\n\njulia> GC.gc()"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"freed it all up"}]}]}],"thread_ts":"1614037841.168100","parent_user_id":"U6Z8377N2"},{"client_msg_id":"4ed9298d-b291-4861-b6b3-5f9a6f987a07","type":"message","text":"Ahh the problem is that `Base.summarysize` dosn't do a deep traverse of the object. So back to my original question, is there a more truthful way of getting object size","user":"U6Z8377N2","ts":"1614038452.169000","team":"T68168MUP","edited":{"user":"U6Z8377N2","ts":"1614038466.000000"},"blocks":[{"type":"rich_text","block_id":"lIvjE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ahh the problem is that "},{"type":"text","text":"Base.summarysize","style":{"code":true}},{"type":"text","text":" dosn't do a deep traverse of the object. So back to my original question, is there a more truthful way of getting object size"}]}]}],"thread_ts":"1614037841.168100","parent_user_id":"U6Z8377N2"}]