[{"client_msg_id":"b673377b-bc02-4f65-84cb-73ddafc1fc1f","type":"message","text":"Is there any way to run code any time `using MyModule` is executed? Not just the first time.","user":"UK1BNFHFV","ts":"1615662259.077100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LH38Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there any way to run code any time "},{"type":"text","text":"using MyModule","style":{"code":true}},{"type":"text","text":" is executed? Not just the first time."}]}]}],"thread_ts":"1615662259.077100","reply_count":22,"reply_users_count":5,"latest_reply":"1615664603.090100","reply_users":["B01J9QZ4SP8","UH24GRBLL","UK1BNFHFV","UH8A351DJ","U8MPCDJAY"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1615662261.077200","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"0b5fa1f8-4901-42ea-9fee-8cee3933f21b","type":"message","text":"as in, executing multipe `using` in the same scope?","user":"UH24GRBLL","ts":"1615662301.077700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vUj4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"as in, executing multipe "},{"type":"text","text":"using","style":{"code":true}},{"type":"text","text":" in the same scope?"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"4227ffe9-5f44-43b0-8911-5e3e9da1bbd8","type":"message","text":"well no, the problem is that in our docs, every example has either `using CairoMakie` or `using GLMakie`, but basically those should also activate the backends. They do if it's the first `using` because `init` is called","user":"UK1BNFHFV","ts":"1615662359.078100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LCfa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well no, the problem is that in our docs, every example has either "},{"type":"text","text":"using CairoMakie","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"using GLMakie","style":{"code":true}},{"type":"text","text":", but basically those should also activate the backends. They do if it's the first "},{"type":"text","text":"using","style":{"code":true}},{"type":"text","text":" because "},{"type":"text","text":"init","style":{"code":true}},{"type":"text","text":" is called"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"be499ace-a514-4b84-a7ff-966007087ef9","type":"message","text":"but not anymore after that","user":"UK1BNFHFV","ts":"1615662374.078300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fPH2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but not anymore after that"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"b5b0a29a-ba2a-491e-87b1-8e61b9e840a2","type":"message","text":"hm, I don't think that's possible via using","user":"UH24GRBLL","ts":"1615662402.078500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"flA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hm, I don't think that's possible via using"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"ec7e2bf7-5109-4b76-9a82-8899d760cabe","type":"message","text":"you will need to change the code of `*Makie` to change the behavior of `using *Makie` right? so the answer is no?","user":"UH8A351DJ","ts":"1615663035.082200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9Nz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you will need to change the code of "},{"type":"text","text":"*Makie","style":{"code":true}},{"type":"text","text":" to change the behavior of "},{"type":"text","text":"using *Makie","style":{"code":true}},{"type":"text","text":" right? so the answer is no?"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"9919c1e7-c548-49f6-a66a-8fe7a91b83b2","type":"message","text":"what do you mean change the code? the question is, is there something I can hook into that is run every time `using XYZ` is executed","user":"UK1BNFHFV","ts":"1615663105.082600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yPqA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what do you mean change the code? the question is, is there something I can hook into that is run every time "},{"type":"text","text":"using XYZ","style":{"code":true}},{"type":"text","text":" is executed"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"7B150322-16C7-4009-BA21-1FC99EC77541","type":"message","text":"You could define a new docs macro that does the setup you want?","user":"U8MPCDJAY","ts":"1615663150.083400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GthXq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You could define a new docs macro that does the setup you want?"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"b2505476-fd58-4055-917d-2dcebd363a29","type":"message","text":"to \"hook into\" you need to change code of `XYZ` itself. Other wise you can only run more code before/after `using`","user":"UH8A351DJ","ts":"1615663170.083600","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1615663203.000000"},"blocks":[{"type":"rich_text","block_id":"CYq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"to \"hook into\" you need to change code of "},{"type":"text","text":"XYZ","style":{"code":true}},{"type":"text","text":" itself. Other wise you can only run more code before/after "},{"type":"text","text":"using","style":{"code":true}}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"f5fd2cda-acf8-4970-91c9-241b3f6b77c7","type":"message","text":"I mean I am planning to change GLMakie's and CairoMakie's code to do this :) If it's possible, but it doesn't seem to be. Maybe we do need a macro for that, not sure","user":"UK1BNFHFV","ts":"1615663470.085300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HxU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I mean I am planning to change GLMakie's and CairoMakie's code to do this :) If it's possible, but it doesn't seem to be. Maybe we do need a macro for that, not sure"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"182bbc93-6c24-44c1-9f74-503e846e4e73","type":"message","text":"I think <@UH8A351DJ> is misunderstanding the question","user":"UH24GRBLL","ts":"1615663498.085500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"R7JY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think "},{"type":"user","user_id":"UH8A351DJ"},{"type":"text","text":" is misunderstanding the question"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"d81c529d-61d8-4935-908a-af8d36fb9bbc","type":"message","text":"julius is asking about running some code on `using X` everytime that line is run, no matter if it's been run before in the same session (and thus also its init)","user":"UH24GRBLL","ts":"1615663543.085700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"goX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"julius is asking about running some code on "},{"type":"text","text":"using X","style":{"code":true}},{"type":"text","text":" everytime that line is run, no matter if it's been run before in the same session (and thus also its init)"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"f8451431-82da-4d51-9b58-9cddd015b9f6","type":"message","text":"I thought OP is a user of the pkgs, but I guess they are the developer, so my bad","user":"UH8A351DJ","ts":"1615663544.085900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/Pug","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I thought OP is a user of the pkgs, but I guess they are the developer, so my bad"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"0566d636-62b3-41ee-a8f6-6dbe6f5669dd","type":"message","text":"ah sorry yeah, well we have the backend activation mechanism but that state lingers between documenter examples. So just because an example says `using CairoMakie` that doesn't mean `GLMakie` is not active from before. It's annoying","user":"UK1BNFHFV","ts":"1615663629.086100","team":"T68168MUP","edited":{"user":"UK1BNFHFV","ts":"1615663644.000000"},"blocks":[{"type":"rich_text","block_id":"Nbunv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah sorry yeah, well we have the backend activation mechanism but that state lingers between documenter examples. So just because an example says "},{"type":"text","text":"using CairoMakie","style":{"code":true}},{"type":"text","text":" that doesn't mean "},{"type":"text","text":"GLMakie","style":{"code":true}},{"type":"text","text":" is not active from before. It's annoying"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"80ada806-37d5-4137-bdd4-356d01fef15a","type":"message","text":"I think this demand (`using` different pkgs multiple times for switching) is quite rare and only comes up for docs / demos maybe? it may be worth while to have an equivalent of `gr(), plotly(), pgfplot()` for this purpose just like `Plots.jl` do. They also have docs in one place generated for different backends, maybe you have already looked at how they do it?","user":"UH8A351DJ","ts":"1615663809.087400","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1615663895.000000"},"blocks":[{"type":"rich_text","block_id":"KZhF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think this demand ("},{"type":"text","text":"using","style":{"code":true}},{"type":"text","text":" different pkgs multiple times for switching) is quite rare and only comes up for docs / demos maybe? it may be worth while to have an equivalent of "},{"type":"text","text":"gr(), plotly(), pgfplot()","style":{"code":true}},{"type":"text","text":" for this purpose just like "},{"type":"text","text":"Plots.jl","style":{"code":true}},{"type":"text","text":" do. They also have docs in one place generated for different backends, maybe you have already looked at how they do it?"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"a54fadf9-4356-4528-a710-ac5107848519","type":"message","text":"the difference is that you do `using Plots` in all those cases, so you have to differentiate between backends with one of those functions. For us, you write `using CairoMakie` so it's really weird if then your plot is rendered with `GLMakie` from another example.","user":"UK1BNFHFV","ts":"1615664079.087900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FJ8a4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the difference is that you do "},{"type":"text","text":"using Plots","style":{"code":true}},{"type":"text","text":" in all those cases, so you have to differentiate between backends with one of those functions. For us, you write "},{"type":"text","text":"using CairoMakie","style":{"code":true}},{"type":"text","text":" so it's really weird if then your plot is rendered with "},{"type":"text","text":"GLMakie","style":{"code":true}},{"type":"text","text":" from another example."}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"1e35a1ac-a600-46d1-95f5-550b1021eb80","type":"message","text":"could you put `]activate --temp` (or the `Pkg.activate` equivalent) at the beginning of each example?","user":"UH24GRBLL","ts":"1615664130.088100","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1615664133.000000"},"blocks":[{"type":"rich_text","block_id":"VePG2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"could you put "},{"type":"text","text":"]activate --temp","style":{"code":true}},{"type":"text","text":" (or the "},{"type":"text","text":"Pkg.activate","style":{"code":true}},{"type":"text","text":" equivalent) at the beginning of each example?"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"f3d00b83-b93f-4c20-a66d-ec64cdd3481b","type":"message","text":"and if I write `CairoMakie.activate!()` behind every using statement, then readers will think you have to do that in any case. So I currently hide that statement but it's annoying boilerplate that's easy to forget or mess up","user":"UK1BNFHFV","ts":"1615664143.088400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DK3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and if I write "},{"type":"text","text":"CairoMakie.activate!()","style":{"code":true}},{"type":"text","text":" behind every using statement, then readers will think you have to do that in any case. So I currently hide that statement but it's annoying boilerplate that's easy to forget or mess up"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"6bdcdae7-5eb1-413c-8726-2bd0fb7d9b7a","type":"message","text":"the backend switching should live in meta pkg like `AbstractPlotting`? And it sounds like you should throw error if a user try to `using` both CairoMakie and GLMakie because they probably export the same functions? (it's fine if one is `import` and the other is `using` of course)","user":"UH8A351DJ","ts":"1615664301.088600","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1615664351.000000"},"blocks":[{"type":"rich_text","block_id":"Xs6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the backend switching should live in meta pkg like "},{"type":"text","text":"AbstractPlotting","style":{"code":true}},{"type":"text","text":"? And it sounds like you should throw error if a user try to "},{"type":"text","text":"using","style":{"code":true}},{"type":"text","text":" both CairoMakie and GLMakie because they probably export the same functions? (it's fine if one is "},{"type":"text","text":"import","style":{"code":true}},{"type":"text","text":" and the other is "},{"type":"text","text":"using","style":{"code":true}},{"type":"text","text":" of course)"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"92c681a9-9e00-4f7f-97e2-b80a376e1420","type":"message","text":"if all you need is `X.activate!()` you can write a macro just for the purpose of making docs.","user":"UH8A351DJ","ts":"1615664384.089000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"02PZH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if all you need is "},{"type":"text","text":"X.activate!()","style":{"code":true}},{"type":"text","text":" you can write a macro just for the purpose of making docs."}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"d43fdb79-97eb-42f6-bbd1-8372b38a6c3e","type":"message","text":"the problem is that people may run one example after another and have to switch backends (but that's not something you have to do when just loading one specific backend)","user":"UH24GRBLL","ts":"1615664505.089300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ArUf0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the problem is that people may run one example after another and have to switch backends (but that's not something you have to do when just loading one specific backend)"}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"c873a2b4-bd8e-40c1-a391-a55c0c65aa2d","type":"message","text":"just mention it as a note in the docs clarifying the whole thing. I imagine users won't be doing this a lot irl.","user":"UH8A351DJ","ts":"1615664603.090100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N=C7N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"just mention it as a note in the docs clarifying the whole thing. I imagine users won't be doing this a lot irl."}]}]}],"thread_ts":"1615662259.077100","parent_user_id":"UK1BNFHFV"}]