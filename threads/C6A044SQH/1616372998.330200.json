[{"client_msg_id":"54d7843a-d7ad-45d5-ad32-d9e252417b25","type":"message","text":"What am I doing wrong here? I would expect the declaration of Dryair to fail beacuse not all the elements are of type T::Union{Nothing, Float32}\n\n```julia&gt; using Parameters: @with_kw\n\njulia&gt; using Unitful\n\njulia&gt; @with_kw struct Substance{T &lt;: Union{Float32, Quantity{Float32}}}\n           cp = nothing :: Union{Nothing,T}\n           Lf = nothing :: Union{Nothing,T}\n       end\nSubstance\n\njulia&gt; Dryair = Substance{Float32}(\n           cp = 1006.0u\"J/kg/K\" \n       )\nSubstance{Float32}\n  cp: Quantity{Float64, 𝐋² 𝚯⁻¹ 𝐓⁻², Unitful.FreeUnits{(kg⁻¹, J, K⁻¹), 𝐋² 𝚯⁻¹ 𝐓⁻², nothing}}\n  Lf: Nothing nothing```","user":"UEGRU91B2","ts":"1616372998.330200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WkgO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What am I doing wrong here? I would expect the declaration of Dryair to fail beacuse not all the elements are of type T::Union{Nothing, Float32}\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using Parameters: @with_kw\n\njulia> using Unitful\n\njulia> @with_kw struct Substance{T <: Union{Float32, Quantity{Float32}}}\n           cp = nothing :: Union{Nothing,T}\n           Lf = nothing :: Union{Nothing,T}\n       end\nSubstance\n\njulia> Dryair = Substance{Float32}(\n           cp = 1006.0u\"J/kg/K\" \n       )\nSubstance{Float32}\n  cp: Quantity{Float64, 𝐋² 𝚯⁻¹ 𝐓⁻², Unitful.FreeUnits{(kg⁻¹, J, K⁻¹), 𝐋² 𝚯⁻¹ 𝐓⁻², nothing}}\n  Lf: Nothing nothing"}]}]}],"thread_ts":"1616372998.330200","reply_count":7,"reply_users_count":2,"latest_reply":"1616431188.400500","reply_users":["UEGRU91B2","U7HAYKY9X"],"subscribed":false},{"client_msg_id":"9c27a031-38f8-4597-9ba8-25d7eba8318a","type":"message","text":"This successfully fails without the parameters part:\n```julia&gt;  struct Substance{T &lt;: Union{Float32, Quantity{Float32}}}\n                  cp :: Union{Nothing,T}\n                  Lf :: Union{Nothing,T}\n              end\n\njulia&gt; Substance{Float32}(0.5,1)\nSubstance{Float32}(0.5f0, 1.0f0)\n\njulia&gt; Substance{Float32}(0.5u\"K\",1)\nERROR: DimensionError:  and K are not dimensionally compatible.\nStacktrace:\n [1] #s57#154\n   @ ~/.julia/packages/Unitful/1t88N/src/conversion.jl:12 [inlined]\n [2] var\"#s57#154\"(::Any, s::Any, t::Any)\n   @ Unitful ./none:0\n [3] (::Core.GeneratedFunctionStub)(::Any, ::Vararg{Any, N} where N)\n   @ Core ./boot.jl:571\n [4] uconvert(a::Unitful.FreeUnits{(), NoDims, nothing}, x::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}})\n   @ Unitful ~/.julia/packages/Unitful/1t88N/src/conversion.jl:78\n [5] convert(#unused#::Type{Float32}, y::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}})\n   @ Unitful ~/.julia/packages/Unitful/1t88N/src/conversion.jl:145\n [6] convert\n   @ ./some.jl:36 [inlined]\n [7] Substance{Float32}(cp::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}}, Lf::Int64)\n   @ Main ./REPL[4]:2\n [8] top-level scope\n   @ REPL[6]:1```","user":"UEGRU91B2","ts":"1616374416.330700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CfIj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This successfully fails without the parameters part:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia>  struct Substance{T <: Union{Float32, Quantity{Float32}}}\n                  cp :: Union{Nothing,T}\n                  Lf :: Union{Nothing,T}\n              end\n\njulia> Substance{Float32}(0.5,1)\nSubstance{Float32}(0.5f0, 1.0f0)\n\njulia> Substance{Float32}(0.5u\"K\",1)\nERROR: DimensionError:  and K are not dimensionally compatible.\nStacktrace:\n [1] #s57#154\n   @ ~/.julia/packages/Unitful/1t88N/src/conversion.jl:12 [inlined]\n [2] var\"#s57#154\"(::Any, s::Any, t::Any)\n   @ Unitful ./none:0\n [3] (::Core.GeneratedFunctionStub)(::Any, ::Vararg{Any, N} where N)\n   @ Core ./boot.jl:571\n [4] uconvert(a::Unitful.FreeUnits{(), NoDims, nothing}, x::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}})\n   @ Unitful ~/.julia/packages/Unitful/1t88N/src/conversion.jl:78\n [5] convert(#unused#::Type{Float32}, y::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}})\n   @ Unitful ~/.julia/packages/Unitful/1t88N/src/conversion.jl:145\n [6] convert\n   @ ./some.jl:36 [inlined]\n [7] Substance{Float32}(cp::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}}, Lf::Int64)\n   @ Main ./REPL[4]:2\n [8] top-level scope\n   @ REPL[6]:1"}]}]}],"thread_ts":"1616372998.330200","parent_user_id":"UEGRU91B2"},{"type":"message","subtype":"thread_broadcast","text":"bumping this as it was posted in a bad hour.","user":"UEGRU91B2","ts":"1616429660.395800","thread_ts":"1616372998.330200","root":{"client_msg_id":"54d7843a-d7ad-45d5-ad32-d9e252417b25","type":"message","text":"What am I doing wrong here? I would expect the declaration of Dryair to fail beacuse not all the elements are of type T::Union{Nothing, Float32}\n\n```julia&gt; using Parameters: @with_kw\n\njulia&gt; using Unitful\n\njulia&gt; @with_kw struct Substance{T &lt;: Union{Float32, Quantity{Float32}}}\n           cp = nothing :: Union{Nothing,T}\n           Lf = nothing :: Union{Nothing,T}\n       end\nSubstance\n\njulia&gt; Dryair = Substance{Float32}(\n           cp = 1006.0u\"J/kg/K\" \n       )\nSubstance{Float32}\n  cp: Quantity{Float64, 𝐋² 𝚯⁻¹ 𝐓⁻², Unitful.FreeUnits{(kg⁻¹, J, K⁻¹), 𝐋² 𝚯⁻¹ 𝐓⁻², nothing}}\n  Lf: Nothing nothing```","user":"UEGRU91B2","ts":"1616372998.330200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WkgO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What am I doing wrong here? I would expect the declaration of Dryair to fail beacuse not all the elements are of type T::Union{Nothing, Float32}\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using Parameters: @with_kw\n\njulia> using Unitful\n\njulia> @with_kw struct Substance{T <: Union{Float32, Quantity{Float32}}}\n           cp = nothing :: Union{Nothing,T}\n           Lf = nothing :: Union{Nothing,T}\n       end\nSubstance\n\njulia> Dryair = Substance{Float32}(\n           cp = 1006.0u\"J/kg/K\" \n       )\nSubstance{Float32}\n  cp: Quantity{Float64, 𝐋² 𝚯⁻¹ 𝐓⁻², Unitful.FreeUnits{(kg⁻¹, J, K⁻¹), 𝐋² 𝚯⁻¹ 𝐓⁻², nothing}}\n  Lf: Nothing nothing"}]}]}],"thread_ts":"1616372998.330200","reply_count":7,"reply_users_count":2,"latest_reply":"1616431188.400500","reply_users":["UEGRU91B2","U7HAYKY9X"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"Uaiwt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"bumping this as it was posted in a bad hour."}]}]}],"client_msg_id":"1d577ca6-f290-4d55-9931-901c7ee66e9e"},{"client_msg_id":"363600b8-c1c2-4eda-b28f-c5210d99f40b","type":"message","text":"Looks to me like a bug in the with_kw macro","user":"U7HAYKY9X","ts":"1616430191.397300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aDU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looks to me like a bug in the with_kw macro"}]}]}],"thread_ts":"1616372998.330200","parent_user_id":"UEGRU91B2"},{"client_msg_id":"32ddaba6-59d5-4ea6-b41a-0981c2ec0485","type":"message","text":"```julia&gt; Substance{Float32}(\"hello\", \"there\")\nSubstance{Float32}\n  cp: String \"hello\"\n  Lf: String \"there\"```","user":"U7HAYKY9X","ts":"1616430207.397500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XrU","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> Substance{Float32}(\"hello\", \"there\")\nSubstance{Float32}\n  cp: String \"hello\"\n  Lf: String \"there\""}]}]}],"thread_ts":"1616372998.330200","parent_user_id":"UEGRU91B2"},{"client_msg_id":"f2800313-bee9-4360-b8c2-c8cd801d2de8","type":"message","text":"It looks like it is. I wonder if I even need it. I tried using Base.@kwdef but I wasn’t successful at that. Do you happen no know how would I go about that?","user":"UEGRU91B2","ts":"1616430986.399500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nwdTc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It looks like it is. I wonder if I even need it. I tried using Base.@kwdef but I wasn’t successful at that. Do you happen no know how would I go about that?"}]}]}],"thread_ts":"1616372998.330200","parent_user_id":"UEGRU91B2"},{"client_msg_id":"f276c6e8-c8a8-450b-9de8-30cfbb194967","type":"message","text":"I don't know much about it... You can jsut create your own constructor that defaults to `nothing` for the fields","user":"U7HAYKY9X","ts":"1616431076.400100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AkmV=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't know much about it... You can jsut create your own constructor that defaults to "},{"type":"text","text":"nothing","style":{"code":true}},{"type":"text","text":" for the fields"}]}]}],"thread_ts":"1616372998.330200","parent_user_id":"UEGRU91B2"},{"client_msg_id":"8c559fb0-1a71-41b0-afd8-ee3e674ee2d7","type":"message","text":"thanks!","user":"UEGRU91B2","ts":"1616431188.400500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RCw4S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks!"}]}]}],"thread_ts":"1616372998.330200","parent_user_id":"UEGRU91B2","reactions":[{"name":"+1","users":["U7HAYKY9X"],"count":1}]}]