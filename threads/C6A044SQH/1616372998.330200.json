[{"client_msg_id":"54d7843a-d7ad-45d5-ad32-d9e252417b25","type":"message","text":"What am I doing wrong here? I would expect the declaration of Dryair to fail beacuse not all the elements are of type T::Union{Nothing, Float32}\n\n```julia&gt; using Parameters: @with_kw\n\njulia&gt; using Unitful\n\njulia&gt; @with_kw struct Substance{T &lt;: Union{Float32, Quantity{Float32}}}\n           cp = nothing :: Union{Nothing,T}\n           Lf = nothing :: Union{Nothing,T}\n       end\nSubstance\n\njulia&gt; Dryair = Substance{Float32}(\n           cp = 1006.0u\"J/kg/K\" \n       )\nSubstance{Float32}\n  cp: Quantity{Float64, 𝐋² 𝚯⁻¹ 𝐓⁻², Unitful.FreeUnits{(kg⁻¹, J, K⁻¹), 𝐋² 𝚯⁻¹ 𝐓⁻², nothing}}\n  Lf: Nothing nothing```","user":"UEGRU91B2","ts":"1616372998.330200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WkgO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What am I doing wrong here? I would expect the declaration of Dryair to fail beacuse not all the elements are of type T::Union{Nothing, Float32}\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using Parameters: @with_kw\n\njulia> using Unitful\n\njulia> @with_kw struct Substance{T <: Union{Float32, Quantity{Float32}}}\n           cp = nothing :: Union{Nothing,T}\n           Lf = nothing :: Union{Nothing,T}\n       end\nSubstance\n\njulia> Dryair = Substance{Float32}(\n           cp = 1006.0u\"J/kg/K\" \n       )\nSubstance{Float32}\n  cp: Quantity{Float64, 𝐋² 𝚯⁻¹ 𝐓⁻², Unitful.FreeUnits{(kg⁻¹, J, K⁻¹), 𝐋² 𝚯⁻¹ 𝐓⁻², nothing}}\n  Lf: Nothing nothing"}]}]}],"thread_ts":"1616372998.330200","reply_count":1,"reply_users_count":1,"latest_reply":"1616374416.330700","reply_users":["UEGRU91B2"],"subscribed":false},{"client_msg_id":"9c27a031-38f8-4597-9ba8-25d7eba8318a","type":"message","text":"This successfully fails without the parameters part:\n```julia&gt;  struct Substance{T &lt;: Union{Float32, Quantity{Float32}}}\n                  cp :: Union{Nothing,T}\n                  Lf :: Union{Nothing,T}\n              end\n\njulia&gt; Substance{Float32}(0.5,1)\nSubstance{Float32}(0.5f0, 1.0f0)\n\njulia&gt; Substance{Float32}(0.5u\"K\",1)\nERROR: DimensionError:  and K are not dimensionally compatible.\nStacktrace:\n [1] #s57#154\n   @ ~/.julia/packages/Unitful/1t88N/src/conversion.jl:12 [inlined]\n [2] var\"#s57#154\"(::Any, s::Any, t::Any)\n   @ Unitful ./none:0\n [3] (::Core.GeneratedFunctionStub)(::Any, ::Vararg{Any, N} where N)\n   @ Core ./boot.jl:571\n [4] uconvert(a::Unitful.FreeUnits{(), NoDims, nothing}, x::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}})\n   @ Unitful ~/.julia/packages/Unitful/1t88N/src/conversion.jl:78\n [5] convert(#unused#::Type{Float32}, y::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}})\n   @ Unitful ~/.julia/packages/Unitful/1t88N/src/conversion.jl:145\n [6] convert\n   @ ./some.jl:36 [inlined]\n [7] Substance{Float32}(cp::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}}, Lf::Int64)\n   @ Main ./REPL[4]:2\n [8] top-level scope\n   @ REPL[6]:1```","user":"UEGRU91B2","ts":"1616374416.330700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CfIj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This successfully fails without the parameters part:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia>  struct Substance{T <: Union{Float32, Quantity{Float32}}}\n                  cp :: Union{Nothing,T}\n                  Lf :: Union{Nothing,T}\n              end\n\njulia> Substance{Float32}(0.5,1)\nSubstance{Float32}(0.5f0, 1.0f0)\n\njulia> Substance{Float32}(0.5u\"K\",1)\nERROR: DimensionError:  and K are not dimensionally compatible.\nStacktrace:\n [1] #s57#154\n   @ ~/.julia/packages/Unitful/1t88N/src/conversion.jl:12 [inlined]\n [2] var\"#s57#154\"(::Any, s::Any, t::Any)\n   @ Unitful ./none:0\n [3] (::Core.GeneratedFunctionStub)(::Any, ::Vararg{Any, N} where N)\n   @ Core ./boot.jl:571\n [4] uconvert(a::Unitful.FreeUnits{(), NoDims, nothing}, x::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}})\n   @ Unitful ~/.julia/packages/Unitful/1t88N/src/conversion.jl:78\n [5] convert(#unused#::Type{Float32}, y::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}})\n   @ Unitful ~/.julia/packages/Unitful/1t88N/src/conversion.jl:145\n [6] convert\n   @ ./some.jl:36 [inlined]\n [7] Substance{Float32}(cp::Quantity{Float64, 𝚯, Unitful.FreeUnits{(K,), 𝚯, nothing}}, Lf::Int64)\n   @ Main ./REPL[4]:2\n [8] top-level scope\n   @ REPL[6]:1"}]}]}],"thread_ts":"1616372998.330200","parent_user_id":"UEGRU91B2"}]