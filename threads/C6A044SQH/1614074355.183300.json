[{"client_msg_id":"b797a21d-8c0f-4085-bd5b-34245cf4dce7","type":"message","text":"Hi everyone! I am trying to run some code with Julia, it involves some recursive procedure and might fail with StackOverflow error for big inputs which is fine. When I manually set `ulimit -s 32768`  in a terminal and run my script again script runs and everything is fine and there are no stack overflow errors. But the error persist in IJulia jupyter notebook. I even tried to set a maximum stacksize on a system level, but IJulia ignores it (running script from a terminal works again though). Is there any reason for IJulia to ignore system level stacksize? Calling `run(`ulimit -s`)` inside jupyter notebook gives me system level limits but my code throws a stack overflow error anyway.","user":"UPLCGPTS6","ts":"1614074355.183300","team":"T68168MUP","edited":{"user":"UPLCGPTS6","ts":"1614074431.000000"},"blocks":[{"type":"rich_text","block_id":"L8c","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi everyone! I am trying to run some code with Julia, it involves some recursive procedure and might fail with StackOverflow error for big inputs which is fine. When I manually set "},{"type":"text","text":"ulimit -s 32768","style":{"code":true}},{"type":"text","text":"  in a terminal and run my script again script runs and everything is fine and there are no stack overflow errors. But the error persist in IJulia jupyter notebook. I even tried to set a maximum stacksize on a system level, but IJulia ignores it (running script from a terminal works again though). Is there any reason for IJulia to ignore system level stacksize? Calling "},{"type":"text","text":"run(`ulimit -s`)","style":{"code":true}},{"type":"text","text":" inside jupyter notebook gives me system level limits but my code throws a stack overflow error anyway."}]}]}],"thread_ts":"1614074355.183300","reply_count":8,"reply_users_count":3,"latest_reply":"1614085181.194700","reply_users":["B01J9QZ4SP8","U7HAYKY9X","UPLCGPTS6"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1614074357.183400","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1614074355.183300","parent_user_id":"UPLCGPTS6","reactions":[{"name":"bridge","users":["UPLCGPTS6"],"count":1}]},{"type":"message","subtype":"bot_message","text":"Success, it has been cross posted <https://discourse.julialang.org/t/55836| to Discourse>. Keep and eye out on Discourse for responses and please add an answer there once you are satisfied with the solution so others can benefit as well. Happy debugging!","ts":"1614074379.183700","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1614074355.183300","parent_user_id":"UPLCGPTS6"},{"client_msg_id":"0d8684d9-b856-4b22-8ffa-58199aa970c2","type":"message","text":"I think that setting the stack size in order to prevent a stack overflow means you're approaching the problem in the wrong way (most likely, anyway).\nIt's probably better to do one of the following, in order:\n1. Elimitate the recursion altogether\n2. Switch to an iterative algorithm instead of a recursive one, if possible.\n3. In the unlikely scenario you have a function that must be defined recursively and can go very deep, create a manual \"stack\" in a `Vector` ","user":"U7HAYKY9X","ts":"1614074542.184000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hgXg9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think that setting the stack size in order to prevent a stack overflow means you're approaching the problem in the wrong way (most likely, anyway).\nIt's probably better to do one of the following, in order:\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Elimitate the recursion altogether"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Switch to an iterative algorithm instead of a recursive one, if possible."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"In the unlikely scenario you have a function that must be defined recursively and can go very deep, create a manual \"stack\" in a "},{"type":"text","text":"Vector","style":{"code":true}},{"type":"text","text":" "}]}],"style":"ordered","indent":0}]}],"thread_ts":"1614074355.183300","parent_user_id":"UPLCGPTS6"},{"client_msg_id":"9eaa7732-cdd3-40a3-928e-10ca8f2f7ff1","type":"message","text":"I wouldn’t agree, there is no problem with the algorithm itself and I’m trying to (sort of) stress test it and analyse benchmark results. Cannot provide more details, but I believe the actual problem with stack overflow is in the Julia JIT compiler, the algorithm itself requires a lot of traits dispatching and at the end most of the checks (and recursion depth as well) are eliminated after compilation. I would agree though that maybe there is some other algorithm solving the same problem in a different way (and there is actually), but I want to test my which involves deep recursion.","user":"UPLCGPTS6","ts":"1614074804.184200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yqR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I wouldn’t agree, there is no problem with the algorithm itself and I’m trying to (sort of) stress test it and analyse benchmark results. Cannot provide more details, but I believe the actual problem with stack overflow is in the Julia JIT compiler, the algorithm itself requires a lot of traits dispatching and at the end most of the checks (and recursion depth as well) are eliminated after compilation. I would agree though that maybe there is some other algorithm solving the same problem in a different way (and there is actually), but I want to test my which involves deep recursion."}]}]}],"thread_ts":"1614074355.183300","parent_user_id":"UPLCGPTS6"},{"client_msg_id":"880f6e62-0bea-4fc0-be35-18a13e904015","type":"message","text":"Option number 3 works by the way and I’ve tried it yes, but it affects benchmarking results because of the dynamic dispatching on `Vector` stack elements later on","user":"UPLCGPTS6","ts":"1614074943.184400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kreDu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Option number 3 works by the way and I’ve tried it yes, but it affects benchmarking results because of the dynamic dispatching on "},{"type":"text","text":"Vector","style":{"code":true}},{"type":"text","text":" stack elements later on"}]}]}],"thread_ts":"1614074355.183300","parent_user_id":"UPLCGPTS6"},{"client_msg_id":"5c0ead59-cba1-4c77-a98a-12696cb5d392","type":"message","text":"Hm, okay. It still seems to me that Julia's call stack is the wrong thing to use if you plan on using very large stacks, but it's hard to tell without knowing the concrete details. I'm afraid I can't help you with the original question (why it doesn't work in IJulia)","user":"U7HAYKY9X","ts":"1614075113.184600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hsPEX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hm, okay. It still seems to me that Julia's call stack is the wrong thing to use if you plan on using very large stacks, but it's hard to tell without knowing the concrete details. I'm afraid I can't help you with the original question (why it doesn't work in IJulia)"}]}]}],"thread_ts":"1614074355.183300","parent_user_id":"UPLCGPTS6"},{"client_msg_id":"dad32b31-40c4-4359-bfd2-3a951b741d5e","type":"message","text":"Thank you anyway! I just thought maybe IJulia also ignores other settings from `ulimit` ? There should not be any special about stack size option.","user":"UPLCGPTS6","ts":"1614075386.184800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dy3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you anyway! I just thought maybe IJulia also ignores other settings from "},{"type":"text","text":"ulimit","style":{"code":true}},{"type":"text","text":" ? There should not be any special about stack size option."}]}]}],"thread_ts":"1614074355.183300","parent_user_id":"UPLCGPTS6"},{"type":"message","subtype":"bot_message","text":"Hey <@UPLCGPTS6>, if you were able to find an answer here on Slack, please cross post it to Discourse via the link above. Thank you! ","ts":"1614085181.194700","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1614074355.183300","parent_user_id":"UPLCGPTS6"}]