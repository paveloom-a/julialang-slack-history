[{"client_msg_id":"f06f14d8-a9ea-483d-97f5-a3ac9487ddb0","type":"message","text":"A non-julia-specific question: say I have some code that eats up a lot of memory, (some gigas). The access is pretty much \"streaming\" through the data now and again, and updating it/adding entries. Does it make sense for performance reasons to store the data on disk?","user":"U01MG0TN079","ts":"1614242212.327900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5Ds","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"A non-julia-specific question: say I have some code that eats up a lot of memory, (some gigas). The access is pretty much \"streaming\" through the data now and again, and updating it/adding entries. Does it make sense for performance reasons to store the data on disk?"}]}]}],"thread_ts":"1614242212.327900","reply_count":142,"reply_users_count":3,"latest_reply":"1614271975.391400","reply_users":["B01J9QZ4SP8","U01MG0TN079","UH24GRBLL"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1614242214.328100","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"4207f994-5e90-466a-be6d-ae3b8e652217","type":"message","text":"It seems when ram becomes rare, the system gets very laggy and even CPU usage of the code drops, which makes it seem to me that the system is choking","user":"U01MG0TN079","ts":"1614242273.328300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1EB0z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It seems when ram becomes rare, the system gets very laggy and even CPU usage of the code drops, which makes it seem to me that the system is choking"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"cb04023c-4387-47ae-b29e-1490517d80e5","type":"message","text":"and I have a notion that since the data access is essentially \"streaming\", maybe it's better to store everything on disk","user":"U01MG0TN079","ts":"1614242341.328500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w8XU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and I have a notion that since the data access is essentially \"streaming\", maybe it's better to store everything on disk"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"7a465327-5004-4a06-bf24-d94d1c420182","type":"message","text":"sounds like you're swapping","user":"UH24GRBLL","ts":"1614242375.328700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qUg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sounds like you're swapping"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"25032207-65a0-43c8-971d-e2f3f70d8ef4","type":"message","text":"you may want to mmap this","user":"UH24GRBLL","ts":"1614242384.328900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WP/Y0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you may want to mmap this"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"d9637b8b-89a3-4f01-bb8a-a30b41c274d5","type":"message","text":"that won't necessarily fix the performance issue - if you hit disk (either via swapping or via Mmap), you'll have to wait until its done loading into RAM","user":"UH24GRBLL","ts":"1614242441.329100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7C5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that won't necessarily fix the performance issue - if you hit disk (either via swapping or via Mmap), you'll have to wait until its done loading into RAM"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"8a980491-e8fa-4060-9fe7-fbe677d3d4d8","type":"message","text":"but Mmap should be a little smarter than the swapping algorithm, I think","user":"UH24GRBLL","ts":"1614242457.329300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Hfz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but Mmap should be a little smarter than the swapping algorithm, I think"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"9772f424-a815-4dae-8b73-24cc2be8a39c","type":"message","text":"yeah, pretty sure it's swapping, since the usage gets very high","user":"U01MG0TN079","ts":"1614242807.329500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PXAl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, pretty sure it's swapping, since the usage gets very high"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f7051b55-945c-4f0d-ad0b-549e1f4077a7","type":"message","text":"does Mmapping means doing that in the julia code?","user":"U01MG0TN079","ts":"1614242839.329700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/v/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does Mmapping means doing that in the julia code?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"0f7be47d-ab04-4d56-b55d-b70982613d5e","type":"message","text":"<https://docs.julialang.org/en/v1/stdlib/Mmap/>","user":"UH24GRBLL","ts":"1614242978.329900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hmBX","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://docs.julialang.org/en/v1/stdlib/Mmap/"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"4aabb981-0a74-463a-bcf6-ea06843c29dc","type":"message","text":"note that this is only useful if you're processing files larger than your total available RAM","user":"UH24GRBLL","ts":"1614243009.330100","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1614243109.000000"},"blocks":[{"type":"rich_text","block_id":"aobl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"note that this is only useful if you're processing files larger than your total available RAM"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"1f2caae3-92f3-475d-8b06-fe109effb29e","type":"message","text":"mmh, maybe I should try for better code first","user":"U01MG0TN079","ts":"1614243080.330300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sqqX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"mmh, maybe I should try for better code first"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"493fba86-4f80-4e0a-91b1-c8d0d3116627","type":"message","text":"If your code is allocating a lot, you could try to rework it to allocate less","user":"UH24GRBLL","ts":"1614243138.330600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"utYHu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If your code is allocating a lot, you could try to rework it to allocate less"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"11d51894-ef3f-4d32-957d-ac861fed7559","type":"message","text":"right, but the code is about storing \"all subgraphs of type X\" of some graph, with the cardinality of the graph getting to ~40, and the subgraphs getting to ~20","user":"U01MG0TN079","ts":"1614243289.330800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6he=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"right, but the code is about storing \"all subgraphs of type X\" of some graph, with the cardinality of the graph getting to ~40, and the subgraphs getting to ~20"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"dbc36bd4-cb99-4e0d-b5ec-843d07ea63c2","type":"message","text":"so it seems the allocation is pretty much bound by the algo's needs","user":"U01MG0TN079","ts":"1614243338.331000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ix0J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so it seems the allocation is pretty much bound by the algo's needs"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"bd377d25-d6d4-4341-84d4-033aeae1a60c","type":"message","text":"sure, but that alone doesn't tell me anything about where your implementation spends its time","user":"UH24GRBLL","ts":"1614243355.331200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RCQx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure, but that alone doesn't tell me anything about where your implementation spends its time"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"c5896e6f-fee2-4e8c-8ed3-500e89a51185","type":"message","text":"ah, what do you mean?","user":"U01MG0TN079","ts":"1614243379.331400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Rk3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, what do you mean?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"e1642469-ce8b-4af3-bf6b-68484a5d27bd","type":"message","text":"it's also dependent on how your code represents the graph(s) - if you e.g. use linked lists and continously create new elemnts or use a connection matrix approach","user":"UH24GRBLL","ts":"1614243406.331600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qNu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's also dependent on how your code represents the graph(s) - if you e.g. use linked lists and continously create new elemnts or use a connection matrix approach"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"41d72aed-9050-48bb-99cc-c9274326feb6","type":"message","text":"and conversely, how you represent subgraphs","user":"UH24GRBLL","ts":"1614243424.331800","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1614243430.000000"},"blocks":[{"type":"rich_text","block_id":"D4t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and conversely, how you represent subgraphs"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"01e350c3-c23b-4561-9dc4-7be113de24bb","type":"message","text":"the subgraphs are essentially stored as bitsets","user":"U01MG0TN079","ts":"1614243431.332100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BraPC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the subgraphs are essentially stored as bitsets"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"bb53b335-0793-494b-af0f-e6d4c826f027","type":"message","text":"and the whole graph is a matrix","user":"U01MG0TN079","ts":"1614243441.332300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oz+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and the whole graph is a matrix"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"e7ff786b-70cf-41f2-8018-e57f9503bf11","type":"message","text":"well, I'll leave soon but I'll make the code accessible then,","user":"U01MG0TN079","ts":"1614243502.332500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d=q2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, I'll leave soon but I'll make the code accessible then,"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"34c7e524-25d6-4b54-a541-213a77e2a984","type":"message","text":"what I'm getting at is that just from the description \"it's a graph algorithm/problem\" I can't tell where your actual code is spending time/waiting/using ressources","user":"UH24GRBLL","ts":"1614243510.332700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xb0nx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what I'm getting at is that just from the description \"it's a graph algorithm/problem\" I can't tell where your actual code is spending time/waiting/using ressources"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"6e3467fa-a5db-4bf1-b89a-4fc301b43c42","type":"message","text":"yes, the total space/time needed is some O(N/M/etc), but with allocations, it matters when you do them, if you reuse memory etc","user":"UH24GRBLL","ts":"1614243567.332900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Tb7E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, the total space/time needed is some O(N/M/etc), but with allocations, it matters when you do them, if you reuse memory etc"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"28245f41-4c6b-4eee-b1c7-601788757262","type":"message","text":"that's some part of things a complexity analysis can't tell you","user":"UH24GRBLL","ts":"1614243593.333100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FixY9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's some part of things a complexity analysis can't tell you"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"26386c42-29e0-4736-890d-bd40f8e8f407","type":"message","text":"You mean, it might be that the ram usage/swapping is actually no bottleneck, but just looks to be so","user":"U01MG0TN079","ts":"1614243804.333300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"90Er","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You mean, it might be that the ram usage/swapping is actually no bottleneck, but just looks to be so"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"9da4aa0b-7d9d-4e7d-bdfb-4c8e3409e92a","type":"message","text":"because cpu intensive stuff happens anyway, and doesn't have to wait on the memory?","user":"U01MG0TN079","ts":"1614243828.333700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+qTRE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"because cpu intensive stuff happens anyway, and doesn't have to wait on the memory?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"9307ab15-d3bf-4fe5-a0b5-b7271ae7caff","type":"message","text":"that and it also makes a difference how you implement the algorithm - if you copy a lot of data around unnecessarily, less time is spent on actually y'know running the computation you're interested in","user":"UH24GRBLL","ts":"1614244245.333900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UfC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that and it also makes a difference how you implement the algorithm - if you copy a lot of data around unnecessarily, less time is spent on actually y'know running the computation you're interested in"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"3de4a4d1-5ad3-4dc8-87ff-6d4a2f12845e","type":"message","text":"makes sense, thanks","user":"U01MG0TN079","ts":"1614250320.334500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fqPmk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"makes sense, thanks"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"fa4b0981-d19d-449b-a602-5c3cf033cfa5","type":"message","text":"<https://github.com/bottine/vinberg> but the code is ugly and probably not really readable","user":"U01MG0TN079","ts":"1614250522.334700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NI4b","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/bottine/vinberg"},{"type":"text","text":" but the code is ugly and probably not really readable"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"5e1a70d8-1251-4346-8e1c-c31fff6d0a87","type":"message","text":"the bad part, I think, is in `src/diagramsjl`","user":"U01MG0TN079","ts":"1614250542.334900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q8BkZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the bad part, I think, is in "},{"type":"text","text":"src/diagramsjl","style":{"code":true}}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"64418081-506a-4eca-acfc-b9a277e10f31","type":"message","text":"to see big memory use, call `Vinberg_Algorithm(-1*I_ \\oplus I(18))`","user":"U01MG0TN079","ts":"1614256132.342700","team":"T68168MUP","edited":{"user":"U01MG0TN079","ts":"1614256151.000000"},"blocks":[{"type":"rich_text","block_id":"Rit","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"to see big memory use, call "},{"type":"text","text":"Vinberg_Algorithm(-1*I_ \\oplus I(18))","style":{"code":true}}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"3f95bd45-8665-49bd-9aca-6c51241aff02","type":"message","text":"there seem to be quite a bit of type instabilities","user":"UH24GRBLL","ts":"1614266781.360500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lN8S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there seem to be quite a bit of type instabilities"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"6dd35345-ce1d-4493-a042-3a536edc724c","type":"message","text":"e.g. you allocate a bunch of `Vector{Any}` in a few of your functions which you don't seem to return","user":"UH24GRBLL","ts":"1614266822.360700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GpUz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"e.g. you allocate a bunch of "},{"type":"text","text":"Vector{Any}","style":{"code":true}},{"type":"text","text":" in a few of your functions which you don't seem to return"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"6bf46e81-2439-4488-a327-7ad96602625b","type":"message","text":"the slices in `build_diagram_and_subs` also allocate - slices copy","user":"UH24GRBLL","ts":"1614266930.360900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3lkRM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the slices in "},{"type":"text","text":"build_diagram_and_subs","style":{"code":true}},{"type":"text","text":" also allocate - slices copy"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"25da371a-053b-4f36-8bc5-2d558b34a8b2","type":"message","text":"<https://github.com/bottine/vinberg/blob/a03f83dec25950ca20d4d5b1bae5948df114de45/src/vinberg_algorithm.jl#L24>\n\nThat comment indicates to me that there are quite a few type instabilities in the code and you ran into MethodErrors because of that","user":"UH24GRBLL","ts":"1614267205.361100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v17N2","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/bottine/vinberg/blob/a03f83dec25950ca20d4d5b1bae5948df114de45/src/vinberg_algorithm.jl#L24"},{"type":"text","text":"\n\nThat comment indicates to me that there are quite a few type instabilities in the code and you ran into MethodErrors because of that"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"0c027282-2aca-4bc9-97d1-88107630ee9f","type":"message","text":"`reverse(collect(1:length(roots)))` is probably also better just written like `length(roots):-1:1`","user":"UH24GRBLL","ts":"1614267357.361300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hVy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"reverse(collect(1:length(roots)))","style":{"code":true}},{"type":"text","text":" is probably also better just written like "},{"type":"text","text":"length(roots):-1:1","style":{"code":true}}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"c97be0e1-c96f-4f0e-b455-9063f4e7e5c7","type":"message","text":"do you know about `@code_warntype`?","user":"UH24GRBLL","ts":"1614267383.361500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nr/s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"do you know about "},{"type":"text","text":"@code_warntype","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"ba230a89-cbb3-41ab-80d1-9870dfd89465","type":"message","text":"hah, you already dug quite a bit, thanks!","user":"U01MG0TN079","ts":"1614267762.361700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"n0IzS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hah, you already dug quite a bit, thanks!"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"240ddf89-4d6b-4df9-945c-44695f2e1b9f","type":"message","text":"I know about `@code_warntype` but I haven't figured out if it's doable to call it on a high level function","user":"U01MG0TN079","ts":"1614267816.361900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CeEP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I know about "},{"type":"text","text":"@code_warntype","style":{"code":true}},{"type":"text","text":" but I haven't figured out if it's doable to call it on a high level function"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"d9a6a94a-942a-408c-b6eb-20d4d6544eee","type":"message","text":"re the slices thing, do you mean this line?<https://github.com/bottine/vinberg/blob/a03f83dec25950ca20d4d5b1bae5948df114de45/src/diagrams.jl#L628>","user":"U01MG0TN079","ts":"1614267888.362100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"brz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"re the slices thing, do you mean this line?"},{"type":"link","url":"https://github.com/bottine/vinberg/blob/a03f83dec25950ca20d4d5b1bae5948df114de45/src/diagrams.jl#L628"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"3fd17aa3-bae1-4b17-a800-ad8e69e71f1b","type":"message","text":"yes","user":"UH24GRBLL","ts":"1614267941.362300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"37GQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"8c21cc70-032a-49ec-bc19-88ce0898acc6","type":"message","text":"I haven't dug into the code, this was a cursory glance :)","user":"UH24GRBLL","ts":"1614267956.362500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N9y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I haven't dug into the code, this was a cursory glance :)"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"56e5957c-b26d-44e5-b602-d9ab5c80bf14","type":"message","text":"where does `VinbergLattice` come from? I couldn't find it defined anywhere","user":"UH24GRBLL","ts":"1614267995.362700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bgd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"where does "},{"type":"text","text":"VinbergLattice","style":{"code":true}},{"type":"text","text":" come from? I couldn't find it defined anywhere"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"e1a9324c-fb5b-4c91-a79d-5eb1bd336cf7","type":"message","text":"But this line gets called essentially 20 times each run","user":"U01MG0TN079","ts":"1614268000.362900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hrmgL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But this line gets called essentially 20 times each run"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"e3104394-cec7-4e62-8d23-ddbaab849919","type":"message","text":"so I thought it was not dangerous","user":"U01MG0TN079","ts":"1614268016.363100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8WY6R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so I thought it was not dangerous"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"e545e856-e9ee-4259-8983-c7a260326527","type":"message","text":"hum, `VinbergLattice`  should exist in the main branch, but not the one I'm currently working on; normally in `hyperbolic_lattices.jl`","user":"U01MG0TN079","ts":"1614268049.363300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aM5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hum, "},{"type":"text","text":"VinbergLattice","style":{"code":true}},{"type":"text","text":"  should exist in the main branch, but not the one I'm currently working on; normally in "},{"type":"text","text":"hyperbolic_lattices.jl","style":{"code":true}}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"7eb049c4-cb44-4168-a5f5-b31b4e5861cf","type":"message","text":"(let me see)","user":"U01MG0TN079","ts":"1614268093.363500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TvksW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(let me see)"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"e5b7677b-9cab-4858-991f-bd11895bd364","type":"message","text":"There's also no `Project.toml`?","user":"UH24GRBLL","ts":"1614268098.363700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aYMX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There's also no "},{"type":"text","text":"Project.toml","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"000bee54-6803-458f-9f4f-1b37848ed45a","type":"message","text":"is there a module wrapping everything?","user":"UH24GRBLL","ts":"1614268121.363900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0Tl16","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there a module wrapping everything?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"c19e28ec-325a-4255-b247-0bd769afde96","type":"message","text":"no, what should it be for? I haven't really followed any guideline since it's more a script than a package","user":"U01MG0TN079","ts":"1614268125.364100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3Td1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, what should it be for? I haven't really followed any guideline since it's more a script than a package"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f22ad565-5e8a-4874-bf0e-83aa7852924f","type":"message","text":"no module, no","user":"U01MG0TN079","ts":"1614268128.364300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7cdg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no module, no"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"e29c9f0d-215a-458b-b303-6a5f9901e377","type":"message","text":"is that a must?","user":"U01MG0TN079","ts":"1614268148.364500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kZ6UQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is that a must?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"edf947ba-2881-4ef4-9c2c-7e99a407ed6c","type":"message","text":"<https://github.com/bottine/vinberg/blob/a03f83dec25950ca20d4d5b1bae5948df114de45/src/hyperbolic_lattices.jl#L316>","user":"U01MG0TN079","ts":"1614268180.364700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RFz/","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/bottine/vinberg/blob/a03f83dec25950ca20d4d5b1bae5948df114de45/src/hyperbolic_lattices.jl#L316"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"394d7d63-cecf-46e0-a8f3-52f6c22aa9dd","type":"message","text":"Vinberg lattice here","user":"U01MG0TN079","ts":"1614268185.364900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wVQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Vinberg lattice here"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"39aecaa2-ea83-4483-847d-c23a60461ec7","type":"message","text":"People that want to use/run this would have to mangle their main environment","user":"UH24GRBLL","ts":"1614268197.365100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"osp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"People that want to use/run this would have to mangle their main environment"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"2d921166-29d3-421e-9668-3c0b0ccb0135","type":"message","text":"it's not a must, but I find structuring my code helps with diagnosing problems","user":"UH24GRBLL","ts":"1614268222.365300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2cmkG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's not a must, but I find structuring my code helps with diagnosing problems"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"8c3a1a5f-d9e5-44ab-a906-7942c61b5495","type":"message","text":"I see, OK","user":"U01MG0TN079","ts":"1614268250.365500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QBQAz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see, OK"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"62a58ee7-f1ad-4092-b97e-ded91206f7f1","type":"message","text":"just to be clear: this is not meant to be a package I think: more like an end-user program","user":"U01MG0TN079","ts":"1614268281.365700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1h2hw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"just to be clear: this is not meant to be a package I think: more like an end-user program"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f42e1459-6c86-4e7a-bb85-7928b6f26072","type":"message","text":"then even more so","user":"UH24GRBLL","ts":"1614268293.365900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v74P0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"then even more so"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"5fc95861-3e45-4636-b477-ecdf4bfd9355","type":"message","text":"alright, then","user":"U01MG0TN079","ts":"1614268300.366100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DJW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"alright, then"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"b1f0612c-1952-4f31-b38b-90ac40767b98","type":"message","text":"if people have other julia code on their computer, how are they supposed to seperate it from this code and do dependency management?","user":"UH24GRBLL","ts":"1614268318.366300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YTLWC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if people have other julia code on their computer, how are they supposed to seperate it from this code and do dependency management?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"24b6b860-d94a-42af-9644-ed9a1a5c0ba6","type":"message","text":"I assume julia's official docs have a guide on how to structure all that?","user":"U01MG0TN079","ts":"1614268361.366500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Hjv/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I assume julia's official docs have a guide on how to structure all that?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"980f5360-8352-44ee-9633-011b87c782fb","type":"message","text":"I also have not defined any module structure between all parts: it's `include` s everywhere, and it doesn't seem perfect, I agree","user":"U01MG0TN079","ts":"1614268394.366700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LGQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I also have not defined any module structure between all parts: it's "},{"type":"text","text":"include","style":{"code":true}},{"type":"text","text":" s everywhere, and it doesn't seem perfect, I agree"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"8109fdad-bba3-416e-8e71-d806bf7e56f2","type":"message","text":"<https://github.com/bottine/vinberg/blob/a03f83dec25950ca20d4d5b1bae5948df114de45/src/diagrams.jl#L321>\n\nthis seems to refer to a global variable - you should be aware that globals are best avoided, since they incur dynamic lookups","user":"UH24GRBLL","ts":"1614268438.366900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TsTZ","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/bottine/vinberg/blob/a03f83dec25950ca20d4d5b1bae5948df114de45/src/diagrams.jl#L321"},{"type":"text","text":"\n\nthis seems to refer to a global variable - you should be aware that globals are best avoided, since they incur dynamic lookups"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"2f0a0d2d-1f1e-4f69-b1d2-974b6b867b35","type":"message","text":"OK, if you plan to look more into the code (and if it's not the `diagrams.jl`  part) please stop now, because I've made quite a few changes in the meantime, and have a different working branch","user":"U01MG0TN079","ts":"1614268476.367500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1rY4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK, if you plan to look more into the code (and if it's not the "},{"type":"text","text":"diagrams.jl","style":{"code":true}},{"type":"text","text":"  part) please stop now, because I've made quite a few changes in the meantime, and have a different working branch"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"1a72dca6-669b-4765-a0ed-92c547e2e711","type":"message","text":"I was wondering about that: how can I define constants?","user":"U01MG0TN079","ts":"1614268504.368000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/uVsG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was wondering about that: how can I define constants?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"febb9166-a95c-4506-9e94-b3727b8e7ed0","type":"message","text":"(The branch I'm working on right now is `root_iteration_based_on_diagonalization_plus_constraints`)","user":"U01MG0TN079","ts":"1614268569.369200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8+I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(The branch I'm working on right now is "},{"type":"text","text":"root_iteration_based_on_diagonalization_plus_constraints","style":{"code":true}},{"type":"text","text":")"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"123ccc9f-df5e-4b68-9935-081bc1c1a065","type":"message","text":"(but the diagram part has not changed at all)","user":"U01MG0TN079","ts":"1614268617.369500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=cCH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(but the diagram part has not changed at all)"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"04ecbcb3-17c0-481c-9eef-c41aada0b362","type":"message","text":"`const a = 1` - it's usually better to create a `struct` though","user":"UH24GRBLL","ts":"1614268713.369700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"12DC5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"const a = 1","style":{"code":true}},{"type":"text","text":" - it's usually better to create a "},{"type":"text","text":"struct","style":{"code":true}},{"type":"text","text":" though"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"0cce881d-45d5-4ab6-9d5a-b6496fea7d20","type":"message","text":"all global `const` variables are allowed to be just inlined, which may not be what you want","user":"UH24GRBLL","ts":"1614268742.369900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bVo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"all global "},{"type":"text","text":"const","style":{"code":true}},{"type":"text","text":" variables are allowed to be just inlined, which may not be what you want"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"ad597cff-e90d-457f-a466-01aa08ef79e5","type":"message","text":"ah, yes, I didn't put the const there, but did at some other places","user":"U01MG0TN079","ts":"1614268780.370200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tE=Kp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, yes, I didn't put the const there, but did at some other places"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f744d35a-6c0e-4a9d-a0ff-e43477448bba","type":"message","text":"no, inlining is alright here: it's really a \"universal\" constant","user":"U01MG0TN079","ts":"1614268799.370500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LO8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, inlining is alright here: it's really a \"universal\" constant"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"1018f6a8-c94a-4df5-bd59-f55cb7240734","type":"message","text":"non-const globals may change type and value at any time, so they will _always_ be looked up dynamically","user":"UH24GRBLL","ts":"1614268821.371100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FdpY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"non-const globals may change type and value at any time, so they will "},{"type":"text","text":"always","style":{"italic":true}},{"type":"text","text":" be looked up dynamically"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"5e937b84-b7fe-472b-8739-27bff85edad7","type":"message","text":"it's... a brick in the washing machine of performance","user":"UH24GRBLL","ts":"1614268836.371600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qvxv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's... a brick in the washing machine of performance"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"fbe92d6b-b9a1-419b-b7b3-ab8a46a7e53b","type":"message","text":"<http://3.bp.blogspot.com/-gG4S_v2pTQI/T0hP5t0pr2I/AAAAAAAAGFA/nUSK_PoZ-rg/s1600/washing_machine_brick_face.gif>\n\nlike this","user":"UH24GRBLL","ts":"1614268896.372400","team":"T68168MUP","attachments":[{"fallback":"363x270px image","image_url":"http://3.bp.blogspot.com/-gG4S_v2pTQI/T0hP5t0pr2I/AAAAAAAAGFA/nUSK_PoZ-rg/s1600/washing_machine_brick_face.gif","image_width":363,"image_height":270,"image_bytes":2214022,"is_animated":true,"from_url":"http://3.bp.blogspot.com/-gG4S_v2pTQI/T0hP5t0pr2I/AAAAAAAAGFA/nUSK_PoZ-rg/s1600/washing_machine_brick_face.gif","id":1,"original_url":"http://3.bp.blogspot.com/-gG4S_v2pTQI/T0hP5t0pr2I/AAAAAAAAGFA/nUSK_PoZ-rg/s1600/washing_machine_brick_face.gif"}],"blocks":[{"type":"rich_text","block_id":"HxbOP","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"http://3.bp.blogspot.com/-gG4S_v2pTQI/T0hP5t0pr2I/AAAAAAAAGFA/nUSK_PoZ-rg/s1600/washing_machine_brick_face.gif"},{"type":"text","text":"\n\nlike this"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"42e855a1-7f8d-46a7-b34c-0af33a83154b","type":"message","text":"I'm thankful for the illustration; I wasn't sure what you meant before watching it :slightly_smiling_face:","user":"U01MG0TN079","ts":"1614268971.372700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Xxz+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm thankful for the illustration; I wasn't sure what you meant before watching it "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"00cdd511-6a79-4079-ae0d-b7ee952fac85","type":"message","text":":)","user":"UH24GRBLL","ts":"1614268990.373100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jqmr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":":)"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"3df52dbf-6367-496f-aefb-1cc353ca2a10","type":"message","text":"I think all the SMatrices are a premature optimization of that code, to be honest","user":"UH24GRBLL","ts":"1614269017.373300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sL2CA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think all the SMatrices are a premature optimization of that code, to be honest"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"a256aaf4-ca6c-4f6b-bc21-73db872d2623","type":"message","text":"seems so, yes","user":"U01MG0TN079","ts":"1614269044.373500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6/R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"seems so, yes"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"5764873b-d18e-4bd3-9138-402ef2677592","type":"message","text":"I'm trying to replace that with SizedMatrices and SizedVectors since I've been told the sizes are high enough that it may hurt performance/compilation time","user":"U01MG0TN079","ts":"1614269077.373800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1hJB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm trying to replace that with SizedMatrices and SizedVectors since I've been told the sizes are high enough that it may hurt performance/compilation time"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"539f8066-a994-4d33-b0c9-fbefe9639271","type":"message","text":"But like I said on the corresponding thread: it seemed to me the more infos I give the compiler, the better it can optimize my code","user":"U01MG0TN079","ts":"1614269110.374100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ecg+t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But like I said on the corresponding thread: it seemed to me the more infos I give the compiler, the better it can optimize my code"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"9757cdc4-9b15-4b52-b255-22f40809aa3a","type":"message","text":"that won't help you if the code is unstable anyway","user":"UH24GRBLL","ts":"1614269303.374900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=/5Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that won't help you if the code is unstable anyway"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"1c695d42-46c0-4a41-96a7-66a07d9330bd","type":"message","text":"but does unstability at one place make the whole code bad?","user":"U01MG0TN079","ts":"1614269408.375100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N9vY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but does unstability at one place make the whole code bad?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"ccf696ea-bb23-49cd-ac1a-932bb75caf95","type":"message","text":"As in: as long as you have unstability, look no further for optimizations?","user":"U01MG0TN079","ts":"1614269429.375300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VWA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"As in: as long as you have unstability, look no further for optimizations?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"2767f6ce-c44e-4dea-808b-4ed51d5a7406","type":"message","text":"it'll make this method slow. called methods will internally be fast, because there will be a dynamic dispatch inserted, but it e.g. can't inline small methods anymore","user":"UH24GRBLL","ts":"1614269460.375500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WB/q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it'll make this method slow. called methods will internally be fast, because there will be a dynamic dispatch inserted, but it e.g. can't inline small methods anymore"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"d7b9eda7-317d-4cca-92d2-d3fbe12e49db","type":"message","text":"but all of this is speculation on my part, as I haven't dug too deep into your code","user":"UH24GRBLL","ts":"1614269490.375700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9THM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but all of this is speculation on my part, as I haven't dug too deep into your code"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"12ee3d44-caf2-4859-903a-aaaea2171ffa","type":"message","text":"OK","user":"U01MG0TN079","ts":"1614269588.375900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8KIg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"e4322f4c-6c8a-4c6a-b0ff-412944e9f635","type":"message","text":"strange that swapping SVectors to SizedVectors doesn't seem to impact compilation positively","user":"U01MG0TN079","ts":"1614269679.376100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eT4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"strange that swapping SVectors to SizedVectors doesn't seem to impact compilation positively"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"767649d5-7397-487b-8c2c-2b6c05b24cb7","type":"message","text":"well that seems to indicate either some other problem or it doesn't make a difference","user":"UH24GRBLL","ts":"1614269740.376300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"O8l3B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well that seems to indicate either some other problem or it doesn't make a difference"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"5418bfd7-f1ae-44ae-bcb7-a40d27b15d44","type":"message","text":"do you know where the hot code in your loop is?","user":"UH24GRBLL","ts":"1614269760.376500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W+0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"do you know where the hot code in your loop is?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"16cde22e-cde7-4737-997b-76c71f433324","type":"message","text":"where does your code actually spend it's time? let's focus on that first","user":"UH24GRBLL","ts":"1614269776.376700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GGMaD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"where does your code actually spend it's time? let's focus on that first"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"5a82e070-3360-4b5d-97b8-b1e27e4aebc3","type":"message","text":"at the last `@profile`  I did, it was `roots_by_distance`  in `root_enumeration.jl`  (let me link to the line)","user":"U01MG0TN079","ts":"1614269851.376900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ihvCS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"at the last "},{"type":"text","text":"@profile","style":{"code":true}},{"type":"text","text":"  I did, it was "},{"type":"text","text":"roots_by_distance","style":{"code":true}},{"type":"text","text":"  in "},{"type":"text","text":"root_enumeration.jl","style":{"code":true}},{"type":"text","text":"  (let me link to the line)"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f857bc22-7ffa-4389-9e12-c89e8c559480","type":"message","text":"<https://github.com/bottine/vinberg/blob/67710becdf74fa0e793969acec2ebf05bf1c5af5/src/root_enumeration.jl#L223>","user":"U01MG0TN079","ts":"1614269913.377100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"55F","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/bottine/vinberg/blob/67710becdf74fa0e793969acec2ebf05bf1c5af5/src/root_enumeration.jl#L223"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"7a875605-ad2f-4d75-b467-24dbb25d7a4b","type":"message","text":"but this eventually calls <https://github.com/bottine/vinberg/blob/67710becdf74fa0e793969acec2ebf05bf1c5af5/src/qsolve_diag_constrained.jl#L158>","user":"U01MG0TN079","ts":"1614269961.377300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SbX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but this eventually calls "},{"type":"link","url":"https://github.com/bottine/vinberg/blob/67710becdf74fa0e793969acec2ebf05bf1c5af5/src/qsolve_diag_constrained.jl#L158"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"b38c36ff-985b-441a-8099-b41c80ebd84f","type":"message","text":"and that's where most of the program spends its time","user":"U01MG0TN079","ts":"1614269987.377500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zL6i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and that's where most of the program spends its time"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"80867072-1fee-4a76-8f7e-9d854c536693","type":"message","text":"and at some point, the code was somewhat clean, but in the meantime, I tried to make it more efficient and it became a tangled mess","user":"U01MG0TN079","ts":"1614270267.377700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HXa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and at some point, the code was somewhat clean, but in the meantime, I tried to make it more efficient and it became a tangled mess"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"718b98b4-fc84-435b-a849-ec783a48e312","type":"message","text":"<https://github.com/bottine/vinberg/blob/67710becdf74fa0e793969acec2ebf05bf1c5af5/src/qsolve_diag_constrained.jl#L65>\n\nthis returns `Vector{Any}`","user":"UH24GRBLL","ts":"1614270451.377900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CS7","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/bottine/vinberg/blob/67710becdf74fa0e793969acec2ebf05bf1c5af5/src/qsolve_diag_constrained.jl#L65"},{"type":"text","text":"\n\nthis returns "},{"type":"text","text":"Vector{Any}","style":{"code":true}}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"0ba201b4-b43c-4550-a820-2d5ed4cc35c3","type":"message","text":"so you don't get around the broadcast in the caller, but this incurs dynamicness and thus slowness","user":"UH24GRBLL","ts":"1614270483.378100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iT7A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so you don't get around the broadcast in the caller, but this incurs dynamicness and thus slowness"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"77d75c44-1e86-47cc-bb44-694db8a9f264","type":"message","text":"the proper fix would be to initialize `res` as `Int[]`","user":"UH24GRBLL","ts":"1614270512.378300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qk4s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the proper fix would be to initialize "},{"type":"text","text":"res","style":{"code":true}},{"type":"text","text":" as "},{"type":"text","text":"Int[]","style":{"code":true}}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"07258864-0dfc-42e9-b2fc-8afcc60e022a","type":"message","text":"`[]` is the same as writing `Any[]`","user":"UH24GRBLL","ts":"1614270520.378500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/M9x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"[]","style":{"code":true}},{"type":"text","text":" is the same as writing "},{"type":"text","text":"Any[]","style":{"code":true}}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f653024a-f68a-4f01-a2a2-28193250ec3c","type":"message","text":"ah, because I start with `[]`","user":"U01MG0TN079","ts":"1614270521.378700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kO3Hs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, because I start with "},{"type":"text","text":"[]","style":{"code":true}}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"567abc92-a533-40a6-85d2-6f92309d7d24","type":"message","text":"right, and even though I only put Ints in there, the compiler doesn't infer that","user":"U01MG0TN079","ts":"1614270540.378900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ggDR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"right, and even though I only put Ints in there, the compiler doesn't infer that"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"b91332b1-e008-41a3-a7b1-ec837ec6a006","type":"message","text":"OK, good","user":"U01MG0TN079","ts":"1614270546.379100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e=p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK, good"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"0ec92804-4ad2-4c89-90e3-f1ceace52bf0","type":"message","text":"well you explicitly asked for `Any[]`, why should it change the type of what you wanted?","user":"UH24GRBLL","ts":"1614270566.379300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DQNP3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well you explicitly asked for "},{"type":"text","text":"Any[]","style":{"code":true}},{"type":"text","text":", why should it change the type of what you wanted?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"59d4ac12-a9cc-426f-8a2b-5885ffbdc092","type":"message","text":"there's a few such spots in the code","user":"UH24GRBLL","ts":"1614270585.379500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N5bi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there's a few such spots in the code"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"01265033-285f-4aff-8451-375edcee682d","type":"message","text":"it's not what I said, it's what I _meant_! :slightly_smiling_face:","user":"U01MG0TN079","ts":"1614270591.379700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CIi5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's not what I said, it's what I "},{"type":"text","text":"meant","style":{"italic":true}},{"type":"text","text":"! "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"756aa6c7-8745-44aa-af0f-8fa604f71da6","type":"message","text":"<https://github.com/bottine/vinberg/blob/67710becdf74fa0e793969acec2ebf05bf1c5af5/src/qsolve_diag_constrained.jl#L155>","user":"U01MG0TN079","ts":"1614270739.379900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p4WMj","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/bottine/vinberg/blob/67710becdf74fa0e793969acec2ebf05bf1c5af5/src/qsolve_diag_constrained.jl#L155"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"e43bc4e4-1e07-4d90-8587-b63f78133b60","type":"message","text":"Is that problematic?","user":"U01MG0TN079","ts":"1614270744.380100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MkK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is that problematic?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"8dc08629-e1af-43f8-9418-3bb2a1504982","type":"message","text":"if compilers could read minds, we wouldn't be needed anymore :p","user":"UH24GRBLL","ts":"1614270960.380300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A+Sz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if compilers could read minds, we wouldn't be needed anymore :p"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"0e10a2c7-3fa5-496f-a51a-a2bdb3983ad4","type":"message","text":"if `D` and `b` are inferrable, nope that's fine","user":"UH24GRBLL","ts":"1614270997.380500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NX6BS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if "},{"type":"text","text":"D","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"b","style":{"code":true}},{"type":"text","text":" are inferrable, nope that's fine"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"18b0b6ba-15ac-47dc-b994-b08da95799d4","type":"message","text":"what's inferrable?","user":"U01MG0TN079","ts":"1614271009.380700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"o+CH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what's inferrable?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"86c147f3-73b1-40b7-ace9-6baf8a5394b3","type":"message","text":"and `k`","user":"UH24GRBLL","ts":"1614271009.380900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Oc2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and "},{"type":"text","text":"k","style":{"code":true}}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"c87910b9-7049-4098-8a83-98ef02d7df7f","type":"message","text":"it means the compiler can figure out purely from the input types what type a given variable will have","user":"UH24GRBLL","ts":"1614271028.381100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DunYJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it means the compiler can figure out purely from the input types what type a given variable will have"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"2f416bb2-713d-4c83-a586-30ac7f0d8713","type":"message","text":"if it can't, it'll fall back to `Any` and insert a dynamic lookup","user":"UH24GRBLL","ts":"1614271042.381300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=Ae=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if it can't, it'll fall back to "},{"type":"text","text":"Any","style":{"code":true}},{"type":"text","text":" and insert a dynamic lookup"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"c39ebee1-4c21-4bea-86c7-4c2ee53eb258","type":"message","text":"ah, I see","user":"U01MG0TN079","ts":"1614271049.381500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"b7HX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, I see"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"4e78143a-096e-4766-aa3a-dafbda21c65f","type":"message","text":"this propagates down to all called methods","user":"UH24GRBLL","ts":"1614271053.381700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/Lev1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this propagates down to all called methods"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f7221291-357e-46b1-bc10-80acced783d9","type":"message","text":"But it's pretty much always a good idea to annotate, isn't it?","user":"U01MG0TN079","ts":"1614271066.381900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oH7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But it's pretty much always a good idea to annotate, isn't it?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"efcf3f8b-2251-43b8-ae66-af0d3c19cd17","type":"message","text":"<https://github.com/bottine/vinberg/blob/67710becdf74fa0e793969acec2ebf05bf1c5af5/src/util.jl#L19>","user":"U01MG0TN079","ts":"1614271070.382100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=g1S","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/bottine/vinberg/blob/67710becdf74fa0e793969acec2ebf05bf1c5af5/src/util.jl#L19"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"91b686e9-ab5a-4d59-a892-25921fd62725","type":"message","text":"annotations in function signatures (except in _very rare_ cases) don't do anything","user":"UH24GRBLL","ts":"1614271090.382300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pphj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"annotations in function signatures (except in "},{"type":"text","text":"very rare","style":{"italic":true}},{"type":"text","text":" cases) don't do anything"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"1d883491-a47b-4f86-ac63-ccfd3f2bd86c","type":"message","text":"(almost) all called methods are specialized","user":"UH24GRBLL","ts":"1614271098.382500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zZQGg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(almost) all called methods are specialized"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"77980260-b27c-401a-a142-a89de9155131","type":"message","text":"Here, I want to compute `dot(a,diagm(b),c)`  if `a,b,c`  are vectors. It seems better to me on a microbenchmark. Is it unreasonable?","user":"U01MG0TN079","ts":"1614271126.382700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IdHR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here, I want to compute "},{"type":"text","text":"dot(a,diagm(b),c)","style":{"code":true}},{"type":"text","text":"  if "},{"type":"text","text":"a,b,c","style":{"code":true}},{"type":"text","text":"  are vectors. It seems better to me on a microbenchmark. Is it unreasonable?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"a998149d-543f-4415-bd30-f5134ae9cc21","type":"message","text":"they're used to distinguish methods in dispatch, since all input arguments participate (except keyword arguments)","user":"UH24GRBLL","ts":"1614271127.382900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Sgf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"they're used to distinguish methods in dispatch, since all input arguments participate (except keyword arguments)"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"1ceea632-2c0e-4234-a510-99f3fe13eda7","type":"message","text":"OK, I don't get the distinction I think","user":"U01MG0TN079","ts":"1614271179.384100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QKa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK, I don't get the distinction I think"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"7c04dfc1-5515-4e37-87a5-9c2c936501f9","type":"message","text":"ah, wait, when annotating, you're telling the compiler: if the inputs match \"this\", then use my method","user":"U01MG0TN079","ts":"1614271255.386200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BFo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, wait, when annotating, you're telling the compiler: if the inputs match \"this\", then use my method"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f7564f8f-ec5b-47d4-982e-f4fa73b255ef","type":"message","text":"yes","user":"UH24GRBLL","ts":"1614271277.386900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"O1Gq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"08a22e69-5bc1-4026-9a70-a14f204aa2c8","type":"message","text":"it does _not_ affect how the method is specialized","user":"UH24GRBLL","ts":"1614271296.387100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x1U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it does "},{"type":"text","text":"not","style":{"italic":true}},{"type":"text","text":" affect how the method is specialized"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"6243cd2b-8e6e-48a3-b7bb-e1054e07e6e8","type":"message","text":"but you're saying annotation won't make the compiler have a better understanding of the types happening inside the method","user":"U01MG0TN079","ts":"1614271319.387700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6BHv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but you're saying annotation won't make the compiler have a better understanding of the types happening inside the method"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"6b3c01b9-f1d1-4715-b1c6-83c3a9906a08","type":"message","text":"that's correct","user":"UH24GRBLL","ts":"1614271329.387900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ljY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's correct"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"6d0f572c-0bb3-4196-8bfb-fb29b94412e0","type":"message","text":"methods are specialized depending on the concrete types the passed objects actually have","user":"UH24GRBLL","ts":"1614271351.388100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Eb4=o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"methods are specialized depending on the concrete types the passed objects actually have"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"8016bafe-4da0-486d-bbb5-82b4d0b8fb0f","type":"message","text":"that's why you can have a fast inner method even though the variable that's passed into the called method was marked as `Any` in `@code_warntype`","user":"UH24GRBLL","ts":"1614271376.388300","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1614271388.000000"},"blocks":[{"type":"rich_text","block_id":"iZoZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's why you can have a fast inner method even though the variable that's passed into the called method was marked as "},{"type":"text","text":"Any","style":{"code":true}},{"type":"text","text":" in "},{"type":"text","text":"@code_warntype","style":{"code":true}}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"98efff3f-7ae3-444f-acc1-ab2f8ad12816","type":"message","text":"specialization means how the compiler translates your method into actual bytecode with specific types ?","user":"U01MG0TN079","ts":"1614271403.388600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+xx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"specialization means how the compiler translates your method into actual bytecode with specific types ?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"cd419499-4a99-4915-be62-1b4ec16a2a9e","type":"message","text":"yes","user":"UH24GRBLL","ts":"1614271413.388800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nGyf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"e162c841-3cf7-4500-b908-ccb9c461cf28","type":"message","text":"alright","user":"U01MG0TN079","ts":"1614271419.389000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N6xp9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"alright"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"dab53487-8890-4706-bbf3-23709343e36b","type":"message","text":"(though there aren't types at LLVM or x86 level anymore)","user":"UH24GRBLL","ts":"1614271424.389200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ywZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(though there aren't types at LLVM or x86 level anymore)"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"34b697eb-ad64-45d4-93c4-16be0f910a4e","type":"message","text":"I should read up on it instead of asking you; thanks!","user":"U01MG0TN079","ts":"1614271451.389400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yX9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I should read up on it instead of asking you; thanks!"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"8e1eba70-c08e-4b64-8e4b-e8cff793cf3e","type":"message","text":"I've been meaning to write all this down in a more coherent way, but I haven't found the drive to do so yet :sweat_smile: the manual is alright, but it leaves a lot to be desired (and inferred by the reader)","user":"UH24GRBLL","ts":"1614271733.390400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fx3ug","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I've been meaning to write all this down in a more coherent way, but I haven't found the drive to do so yet "},{"type":"emoji","name":"sweat_smile"},{"type":"text","text":" the manual is alright, but it leaves a lot to be desired (and inferred by the reader)"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"46e6ec01-3440-462f-8051-a1d51b96f9e8","type":"message","text":"feel free to ask any questions you have though","user":"UH24GRBLL","ts":"1614271750.390600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VwzI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"feel free to ask any questions you have though"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"8ea61e64-652c-4b49-a4a2-7837b9e3fcdc","type":"message","text":"OK, thanks!","user":"U01MG0TN079","ts":"1614271778.390800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kVk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK, thanks!"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"7ed9573d-e533-4dbe-ad5a-7dd5446b55ac","type":"message","text":"Do you mean to write it on the official docs?","user":"U01MG0TN079","ts":"1614271817.391000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q/=tk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you mean to write it on the official docs?"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"9be8af33-1441-4b3b-9aee-53961abd38f7","type":"message","text":"No, I don't think so - at least not right away","user":"UH24GRBLL","ts":"1614271934.391200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rE5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No, I don't think so - at least not right away"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079"},{"client_msg_id":"84c6aee5-fd43-4039-a86f-210b56f77f4e","type":"message","text":"I think the docs do need work, but I'm not in the position to rewrite it all alone","user":"UH24GRBLL","ts":"1614271975.391400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OKqv5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the docs do need work, but I'm not in the position to rewrite it all alone"}]}]}],"thread_ts":"1614242212.327900","parent_user_id":"U01MG0TN079","reactions":[{"name":"thumbsup_all","users":["U01MG0TN079"],"count":1}]}]