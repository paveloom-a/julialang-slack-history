[{"client_msg_id":"b292a32d-9b75-42a4-9c52-28667dfba3a0","type":"message","text":"I'm using the standard logging infrastructure, logging to stdout. My process stdout is being redirected to a file, but it seems like Julia is buffering log lines very aggressively. I usually don't see any output until the program terminates. Is there any way to force Julia to flush stdout more often?","user":"UCNPT22MQ","ts":"1611004782.274600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"riR2s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm using the standard logging infrastructure, logging to stdout. My process stdout is being redirected to a file, but it seems like Julia is buffering log lines very aggressively. I usually don't see any output until the program terminates. Is there any way to force Julia to flush stdout more often?"}]}]}],"thread_ts":"1611004782.274600","reply_count":13,"reply_users_count":2,"latest_reply":"1611019520.289300","reply_users":["U67SCG4HG","UCNPT22MQ"],"subscribed":false},{"client_msg_id":"e00ae0d4-0910-4217-b2e6-a6bfa52973d4","type":"message","text":"Use a `FileLogger` form `LoggingExtras`. It  has an option for always flushing","user":"U67SCG4HG","ts":"1611004979.274700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OSSML","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Use a "},{"type":"text","text":"FileLogger","style":{"code":true}},{"type":"text","text":" form "},{"type":"text","text":"LoggingExtras","style":{"code":true}},{"type":"text","text":". It  has an option for always flushing"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"da7da788-0640-4790-9a1e-f57eddb23d61","type":"message","text":"Thanks <@U67SCG4HG>. What about stdout too? I can too file logging, but I also have a wrapper process that is capturing &amp; shipping stdout, so need that to be unbuffered","user":"UCNPT22MQ","ts":"1611005033.274900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OVuY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks "},{"type":"user","user_id":"U67SCG4HG"},{"type":"text","text":". What about stdout too? I can too file logging, but I also have a wrapper process that is capturing & shipping stdout, so need that to be unbuffered"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"c0e8c914-df4e-4b7d-a5cd-3dca02d8037b","type":"message","text":"(shipping == sending to a logging system)","user":"UCNPT22MQ","ts":"1611005049.275100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ehY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(shipping == sending to a logging system)"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"ee4e3c41-bbc6-4a09-9cb7-d13430ac6f2e","type":"message","text":"You can `flush(stdout)` (Sorry, I misunderstood your message I think -- thought you were doing the file logging yourself.)","user":"U67SCG4HG","ts":"1611005075.275300","team":"T68168MUP","edited":{"user":"U67SCG4HG","ts":"1611005133.000000"},"blocks":[{"type":"rich_text","block_id":"8=2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can "},{"type":"text","text":"flush(stdout)","style":{"code":true}},{"type":"text","text":" (Sorry, I misunderstood your message I think -- thought you were doing the file logging yourself.)"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"a538c041-dcb8-452c-8895-d33aa90c62bf","type":"message","text":"Thanks. It would be a bit annoying to put a flush after every `@info` in my application code / libraries. Can I do it centrally somehow?","user":"UCNPT22MQ","ts":"1611005255.275600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JEn0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks. It would be a bit annoying to put a flush after every "},{"type":"text","text":"@info","style":{"code":true}},{"type":"text","text":" in my application code / libraries. Can I do it centrally somehow?"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"e0dc7218-c75e-4468-8431-67093439cd1b","type":"message","text":"I suppose I could monkey patch the Base stdout logger but it's starting to feel a bit nasty","user":"UCNPT22MQ","ts":"1611005287.275800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tS9=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I suppose I could monkey patch the Base stdout logger but it's starting to feel a bit nasty"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"d09876e1-2f3b-47ae-ad72-4debfbcde849","type":"message","text":"Is the problem that you want to see the output yourself?","user":"U67SCG4HG","ts":"1611006390.276000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JjOR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is the problem that you want to see the output yourself?"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"0138de80-92dd-49c5-9aa9-0436b5233d43","type":"message","text":"No, it's more that my processes run for a long time (say, 1h) and during that time there is no stdout, then suddenly 1000s of lines the moment the process finishes","user":"UCNPT22MQ","ts":"1611006882.278700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IOhi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No, it's more that my processes run for a long time (say, 1h) and during that time there is no stdout, then suddenly 1000s of lines the moment the process finishes"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"eefcfa88-fa80-4666-a78b-29e741a15837","type":"message","text":"So tracking progress / checking it is going ok is difficult","user":"UCNPT22MQ","ts":"1611006899.279100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Uim","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So tracking progress / checking it is going ok is difficult"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"a0b9ddf2-9b62-45de-9583-308824e05f44","type":"message","text":"Okay. But if you set up a file logger yourself then you don't have to worry about the stdout logging","user":"U67SCG4HG","ts":"1611006934.279300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZXg8a","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Okay. But if you set up a file logger yourself then you don't have to worry about the stdout logging"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"405c3400-cae0-4955-9cf7-bb7bfc412224","type":"message","text":"You can even use both","user":"U67SCG4HG","ts":"1611006944.279500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LF0/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can even use both"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"7069762f-edd0-49b3-897a-80c6d70f9883","type":"message","text":"Here is a `FlushLogger`:\n```import Logging\n\nstruct FlushLogger &lt;: Logging.AbstractLogger\n    logger::Logging.SimpleLogger\nend\nFlushLogger(io::IO, level=<http://Logging.Info|Logging.Info>) = FlushLogger(Logging.SimpleLogger(io, level))\nfunction Logging.handle_message(logger::FlushLogger, args...; kwargs...)\n    Logging.handle_message(logger.logger, args...; kwargs...)\n    flush(logger.logger.stream)\nend\nLogging.shouldlog(logger::FlushLogger, args...) = Logging.shouldlog(logger.logger, args...)\nLogging.min_enabled_level(logger::FlushLogger) = Logging.min_enabled_level(logger.logger)\nLogging.catch_exceptions(logger::FlushLogger) = Logging.catch_exceptions(logger.logger)\n\n\n# Example\nlogger = FlushLogger(stdout)\nLogging.global_logger(logger)```","user":"U67SCG4HG","ts":"1611007366.282000","team":"T68168MUP","edited":{"user":"U67SCG4HG","ts":"1611007708.000000"},"blocks":[{"type":"rich_text","block_id":"bkAD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here is a "},{"type":"text","text":"FlushLogger","style":{"code":true}},{"type":"text","text":":\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"import Logging\n\nstruct FlushLogger <: Logging.AbstractLogger\n    logger::Logging.SimpleLogger\nend\nFlushLogger(io::IO, level=Logging.Info) = FlushLogger(Logging.SimpleLogger(io, level))\nfunction Logging.handle_message(logger::FlushLogger, args...; kwargs...)\n    Logging.handle_message(logger.logger, args...; kwargs...)\n    flush(logger.logger.stream)\nend\nLogging.shouldlog(logger::FlushLogger, args...) = Logging.shouldlog(logger.logger, args...)\nLogging.min_enabled_level(logger::FlushLogger) = Logging.min_enabled_level(logger.logger)\nLogging.catch_exceptions(logger::FlushLogger) = Logging.catch_exceptions(logger.logger)\n\n\n# Example\nlogger = FlushLogger(stdout)\nLogging.global_logger(logger)"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"7368c5b0-b466-4114-a804-f76176f7f7e2","type":"message","text":"Thanks, that looks handy, I'll give it a go tomorrow and report back!","user":"UCNPT22MQ","ts":"1611019520.289300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U60","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks, that looks handy, I'll give it a go tomorrow and report back!"}]}]}],"thread_ts":"1611004782.274600","parent_user_id":"UCNPT22MQ"}]