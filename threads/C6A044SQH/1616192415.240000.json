[{"client_msg_id":"81b2c017-6016-46fa-abf2-ed70afbb0182","type":"message","text":"Hello, I am trying to save a `5 x 5 x 5 x 5 x 5 x N` matrix into `.csv` format where each row corresponds to the elements in the “row” `(i1,i2,i3,i4,i5,:)` . If possible I would like to have the cartesian coordinates (`i1` through `i5` ) appended to the beginning (or end) of the row.\n\nI tried `writedlm()` but this does not save the structure. I saw `HDF5` but this seems to be used mostly for saving and loading files in julia, but I would need this to be readable as a .csv. Is there a way to do this?","user":"UFH4C3LBT","ts":"1616192415.240000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3qFfb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hello, I am trying to save a "},{"type":"text","text":"5 x 5 x 5 x 5 x 5 x N","style":{"code":true}},{"type":"text","text":" matrix into "},{"type":"text","text":".csv","style":{"code":true}},{"type":"text","text":" format where each row corresponds to the elements in the “row” "},{"type":"text","text":"(i1,i2,i3,i4,i5,:)","style":{"code":true}},{"type":"text","text":" . If possible I would like to have the cartesian coordinates ("},{"type":"text","text":"i1","style":{"code":true}},{"type":"text","text":" through "},{"type":"text","text":"i5","style":{"code":true}},{"type":"text","text":" ) appended to the beginning (or end) of the row.\n\nI tried "},{"type":"text","text":"writedlm()","style":{"code":true}},{"type":"text","text":" but this does not save the structure. I saw "},{"type":"text","text":"HDF5","style":{"code":true}},{"type":"text","text":" but this seems to be used mostly for saving and loading files in julia, but I would need this to be readable as a .csv. Is there a way to do this?"}]}]}],"thread_ts":"1616192415.240000","reply_count":8,"reply_users_count":5,"latest_reply":"1616193728.241800","reply_users":["U012XER8K4M","UFH4C3LBT","U01CQTKB86N","UEGRU91B2","U8D9768Q6"],"subscribed":false},{"client_msg_id":"b3b4717d-4247-433c-8679-ec90ff86b52d","type":"message","text":"well.. youlll have to basically flatten your array to a 2D array if you want it in CSV","user":"U012XER8K4M","ts":"1616192609.240100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L4xZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well.. youlll have to basically flatten your array to a 2D array if you want it in CSV"}]}]}],"thread_ts":"1616192415.240000","parent_user_id":"UFH4C3LBT"},{"client_msg_id":"01a588da-7d00-42bb-b50b-a098014096a8","type":"message","text":"maybe just a `reshape` will do it,.. i'm to tired to work out if the system that gives you the desired order :slightly_smiling_face:","user":"U012XER8K4M","ts":"1616192684.240300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zX6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"maybe just a "},{"type":"text","text":"reshape","style":{"code":true}},{"type":"text","text":" will do it,.. i'm to tired to work out if the system that gives you the desired order "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1616192415.240000","parent_user_id":"UFH4C3LBT"},{"client_msg_id":"bccc3694-7d8c-4ad2-bc2b-b4ef09a97ce0","type":"message","text":"Let me give that a try, are you awake enough to tell me how to preserve the `i1,...,i5` Cartesian coordinates if I do that? :joy:","user":"UFH4C3LBT","ts":"1616192933.240500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CAx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Let me give that a try, are you awake enough to tell me how to preserve the "},{"type":"text","text":"i1,...,i5","style":{"code":true}},{"type":"text","text":" Cartesian coordinates if I do that? "},{"type":"emoji","name":"joy"}]}]}],"thread_ts":"1616192415.240000","parent_user_id":"UFH4C3LBT"},{"client_msg_id":"f00a5df0-b68d-40a8-82e3-b81e585eb432","type":"message","text":"In principle you could write `5 x 5 x 5 x 5` `5 x N`  CSV files. Sorry, tired.","user":"U01CQTKB86N","ts":"1616193281.240700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vwE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In principle you could write "},{"type":"text","text":"5 x 5 x 5 x 5","style":{"code":true}},{"type":"text","text":" "},{"type":"text","text":"5 x N","style":{"code":true}},{"type":"text","text":"  CSV files. Sorry, tired."}]}]}],"thread_ts":"1616192415.240000","parent_user_id":"UFH4C3LBT"},{"client_msg_id":"16f3673b-1ae2-4f2a-a145-0a68c5f8bb78","type":"message","text":"Something like this could work, although it looks quite inefficient if the array is very large\n```julia&gt; N=2\n2\n\njulia&gt; a = rand(2,2,N)\n2×2×2 Array{Float64, 3}:\n[:, :, 1] =\n 0.648938  0.991774\n 0.952428  0.320283\n\n[:, :, 2] =\n 0.718367  0.792513\n 0.964684  0.872914\n\njulia&gt; reshaped_a = reshape(a,4,N)\n4×2 Matrix{Float64}:\n 0.648938  0.718367\n 0.952428  0.964684\n 0.991774  0.792513\n 0.320283  0.872914\n\njulia&gt; indices = CartesianIndices(a)\n2×2×2 CartesianIndices{3, Tuple{Base.OneTo{Int64}, Base.OneTo{Int64}, Base.OneTo{Int64}}}:\n[:, :, 1] =\n CartesianIndex(1, 1, 1)  CartesianIndex(1, 2, 1)\n CartesianIndex(2, 1, 1)  CartesianIndex(2, 2, 1)\n\n[:, :, 2] =\n CartesianIndex(1, 1, 2)  CartesianIndex(1, 2, 2)\n CartesianIndex(2, 1, 2)  CartesianIndex(2, 2, 2)\n\n\njulia&gt; reshaped_indices = reshape(CartesianIndices(a),4,N)\n4×2 reshape(::CartesianIndices{3, Tuple{Base.OneTo{Int64}, Base.OneTo{Int64}, Base.OneTo{Int64}}}, 4, 2) with eltype CartesianIndex{3}:\n CartesianIndex(1, 1, 1)  CartesianIndex(1, 1, 2)\n CartesianIndex(2, 1, 1)  CartesianIndex(2, 1, 2)\n CartesianIndex(1, 2, 1)  CartesianIndex(1, 2, 2)\n CartesianIndex(2, 2, 1)  CartesianIndex(2, 2, 2)\n\njulia&gt; flattened_with_indices = [reshaped_a reshaped_indices]\n4×4 Matrix{Any}:\n 0.648938  0.718367  CartesianIndex(1, 1, 1)  CartesianIndex(1, 1, 2)\n 0.952428  0.964684  CartesianIndex(2, 1, 1)  CartesianIndex(2, 1, 2)\n 0.991774  0.792513  CartesianIndex(1, 2, 1)  CartesianIndex(1, 2, 2)\n 0.320283  0.872914  CartesianIndex(2, 2, 1)  CartesianIndex(2, 2, 2)```","user":"UEGRU91B2","ts":"1616193332.240900","team":"T68168MUP","edited":{"user":"UEGRU91B2","ts":"1616193507.000000"},"blocks":[{"type":"rich_text","block_id":"munb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Something like this could work, although it looks quite inefficient if the array is very large\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> N=2\n2\n\njulia> a = rand(2,2,N)\n2×2×2 Array{Float64, 3}:\n[:, :, 1] =\n 0.648938  0.991774\n 0.952428  0.320283\n\n[:, :, 2] =\n 0.718367  0.792513\n 0.964684  0.872914\n\njulia> reshaped_a = reshape(a,4,N)\n4×2 Matrix{Float64}:\n 0.648938  0.718367\n 0.952428  0.964684\n 0.991774  0.792513\n 0.320283  0.872914\n\njulia> indices = CartesianIndices(a)\n2×2×2 CartesianIndices{3, Tuple{Base.OneTo{Int64}, Base.OneTo{Int64}, Base.OneTo{Int64}}}:\n[:, :, 1] =\n CartesianIndex(1, 1, 1)  CartesianIndex(1, 2, 1)\n CartesianIndex(2, 1, 1)  CartesianIndex(2, 2, 1)\n\n[:, :, 2] =\n CartesianIndex(1, 1, 2)  CartesianIndex(1, 2, 2)\n CartesianIndex(2, 1, 2)  CartesianIndex(2, 2, 2)\n\n\njulia> reshaped_indices = reshape(CartesianIndices(a),4,N)\n4×2 reshape(::CartesianIndices{3, Tuple{Base.OneTo{Int64}, Base.OneTo{Int64}, Base.OneTo{Int64}}}, 4, 2) with eltype CartesianIndex{3}:\n CartesianIndex(1, 1, 1)  CartesianIndex(1, 1, 2)\n CartesianIndex(2, 1, 1)  CartesianIndex(2, 1, 2)\n CartesianIndex(1, 2, 1)  CartesianIndex(1, 2, 2)\n CartesianIndex(2, 2, 1)  CartesianIndex(2, 2, 2)\n\njulia> flattened_with_indices = [reshaped_a reshaped_indices]\n4×4 Matrix{Any}:\n 0.648938  0.718367  CartesianIndex(1, 1, 1)  CartesianIndex(1, 1, 2)\n 0.952428  0.964684  CartesianIndex(2, 1, 1)  CartesianIndex(2, 1, 2)\n 0.991774  0.792513  CartesianIndex(1, 2, 1)  CartesianIndex(1, 2, 2)\n 0.320283  0.872914  CartesianIndex(2, 2, 1)  CartesianIndex(2, 2, 2)"}]}]}],"thread_ts":"1616192415.240000","parent_user_id":"UFH4C3LBT"},{"client_msg_id":"23e89fc4-0e55-4d5c-9232-c6e2f94467e3","type":"message","text":"It’ll be `5*5*5*5*5*N` where N ~ 30 or so, so it is not terribly large. I will see how long it takes for N = 5","user":"UFH4C3LBT","ts":"1616193607.241200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"a4XU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It’ll be "},{"type":"text","text":"5*5*5*5*5*N","style":{"code":true}},{"type":"text","text":" where N ~ 30 or so, so it is not terribly large. I will see how long it takes for N = 5"}]}]}],"thread_ts":"1616192415.240000","parent_user_id":"UFH4C3LBT"},{"client_msg_id":"6691e168-27c3-4538-b8db-c227761b6e4c","type":"message","text":"TensorCast.jl has some really cool ways of handling this.\n```julia&gt; using TensorCast\n\njulia&gt; N = 2;\n\njulia&gt; T = rand(3,3,N)\n3×3×2 Array{Float64, 3}:\n[:, :, 1] =\n 0.0923458  0.999252  0.432067\n 0.560804   0.486505  0.762679\n 0.187945   0.788492  0.823864\n\n[:, :, 2] =\n 0.544637  0.192251   0.334472\n 0.410171  0.431832   0.816445\n 0.915326  0.0289234  0.62848\n\njulia&gt; @cast M[(i, j), k] := T[i, j, k]\n9×2 Matrix{Float64}:\n 0.0923458  0.544637\n 0.560804   0.410171\n 0.187945   0.915326\n 0.999252   0.192251\n 0.486505   0.431832\n 0.788492   0.0289234\n 0.432067   0.334472\n 0.762679   0.816445\n 0.823864   0.62848\n\njulia&gt; @cast T2[i, j, k] := M[(i, j), k] (i:3)\n3×3×2 Array{Float64, 3}:\n[:, :, 1] =\n 0.0923458  0.999252  0.432067\n 0.560804   0.486505  0.762679\n 0.187945   0.788492  0.823864\n\n[:, :, 2] =\n 0.544637  0.192251   0.334472\n 0.410171  0.431832   0.816445\n 0.915326  0.0289234  0.62848\n\njulia&gt; T2 == T\ntrue```","user":"U8D9768Q6","ts":"1616193688.241600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xvp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"TensorCast.jl has some really cool ways of handling this.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using TensorCast\n\njulia> N = 2;\n\njulia> T = rand(3,3,N)\n3×3×2 Array{Float64, 3}:\n[:, :, 1] =\n 0.0923458  0.999252  0.432067\n 0.560804   0.486505  0.762679\n 0.187945   0.788492  0.823864\n\n[:, :, 2] =\n 0.544637  0.192251   0.334472\n 0.410171  0.431832   0.816445\n 0.915326  0.0289234  0.62848\n\njulia> @cast M[(i, j), k] := T[i, j, k]\n9×2 Matrix{Float64}:\n 0.0923458  0.544637\n 0.560804   0.410171\n 0.187945   0.915326\n 0.999252   0.192251\n 0.486505   0.431832\n 0.788492   0.0289234\n 0.432067   0.334472\n 0.762679   0.816445\n 0.823864   0.62848\n\njulia> @cast T2[i, j, k] := M[(i, j), k] (i:3)\n3×3×2 Array{Float64, 3}:\n[:, :, 1] =\n 0.0923458  0.999252  0.432067\n 0.560804   0.486505  0.762679\n 0.187945   0.788492  0.823864\n\n[:, :, 2] =\n 0.544637  0.192251   0.334472\n 0.410171  0.431832   0.816445\n 0.915326  0.0289234  0.62848\n\njulia> T2 == T\ntrue"}]}]}],"thread_ts":"1616192415.240000","parent_user_id":"UFH4C3LBT"},{"client_msg_id":"969d53ae-e5a0-40a1-b1ac-45bbfb5cec98","type":"message","text":"Very handy syntax for combining and splitting dimensions","user":"U8D9768Q6","ts":"1616193728.241800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bv3QJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Very handy syntax for combining and splitting dimensions"}]}]}],"thread_ts":"1616192415.240000","parent_user_id":"UFH4C3LBT"}]