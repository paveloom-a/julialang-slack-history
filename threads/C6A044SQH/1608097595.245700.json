[{"client_msg_id":"31e1f448-b656-4952-a35b-8d221b2f1a23","type":"message","text":"Does anyone know if `DifferentialEquations` uses all cores and all threads in its solving algorithms? I am solving a large ODE system (about 1 - 2 seconds to solve), but it pegs my CPU at 100%. I have a 4 core, 8 thread i7, so I am a bit confused how it can use all of the cores/threads.","user":"U6Z8377N2","ts":"1608097595.245700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QtsH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does anyone know if "},{"type":"text","text":"DifferentialEquations","style":{"code":true}},{"type":"text","text":" uses all cores and all threads in its solving algorithms? I am solving a large ODE system (about 1 - 2 seconds to solve), but it pegs my CPU at 100%. I have a 4 core, 8 thread i7, so I am a bit confused how it can use all of the cores/threads."}]}]}],"thread_ts":"1608097595.245700","reply_count":5,"reply_users_count":3,"latest_reply":"1608101672.247200","reply_users":["U0179G7FG4F","U6Z8377N2","U01GR69QYGN"],"subscribed":false},{"client_msg_id":"cd40b9cf-91b7-4944-aa6d-a769842ac873","type":"message","text":"By large system do you mean with matrix operations? If so, those matrix operations probably use BLAS which can efficiently use all cores. If you want to run single threaded, you can force BLAS to only use one core.","user":"U0179G7FG4F","ts":"1608097716.246000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"id1O9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"By large system do you mean with matrix operations? If so, those matrix operations probably use BLAS which can efficiently use all cores. If you want to run single threaded, you can force BLAS to only use one core."}]}]}],"thread_ts":"1608097595.245700","parent_user_id":"U6Z8377N2"},{"client_msg_id":"92ce24aa-b1e8-4a98-82df-fef9a549aadb","type":"message","text":"Oh, I wonder if there is `BLAS` stuff happening. It's just a system of differential equations with around 100 equations, and the solve command looks like\n```solve(prob, Rodas4(autodiff=false), dt=0.5, adaptive=false, callback=cbset) ```","user":"U6Z8377N2","ts":"1608098071.246300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rfP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, I wonder if there is "},{"type":"text","text":"BLAS","style":{"code":true}},{"type":"text","text":" stuff happening. It's just a system of differential equations with around 100 equations, and the solve command looks like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"solve(prob, Rodas4(autodiff=false), dt=0.5, adaptive=false, callback=cbset) "}]}]}],"thread_ts":"1608097595.245700","parent_user_id":"U6Z8377N2"},{"client_msg_id":"9ac01e92-43dd-4dd3-a7b2-8cf379a94044","type":"message","text":"That's around the size where blas threading might kick in.","user":"U0179G7FG4F","ts":"1608098827.246500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"woh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's around the size where blas threading might kick in."}]}]}],"thread_ts":"1608097595.245700","parent_user_id":"U6Z8377N2"},{"client_msg_id":"475f6ed9-f484-4cd7-a0b7-c7a855e3d88e","type":"message","text":"hmm, i see. I was hoping to actually use `Distributed` to run many scenarios at a time...","user":"U6Z8377N2","ts":"1608099015.246900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nXrb2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm, i see. I was hoping to actually use "},{"type":"text","text":"Distributed","style":{"code":true}},{"type":"text","text":" to run many scenarios at a time..."}]}]}],"thread_ts":"1608097595.245700","parent_user_id":"U6Z8377N2"},{"client_msg_id":"49750cef-aca0-4863-9185-2056013054f9","type":"message","text":"You can turn BLAS multithreading off using `BLAS.set_num_threads(1)` (you need to load `LinearAlgebra` first)","user":"U01GR69QYGN","ts":"1608101672.247200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Az2aT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can turn BLAS multithreading off using "},{"type":"text","text":"BLAS.set_num_threads(1)","style":{"code":true}},{"type":"text","text":" (you need to load "},{"type":"text","text":"LinearAlgebra","style":{"code":true}},{"type":"text","text":" first)"}]}]}],"thread_ts":"1608097595.245700","parent_user_id":"U6Z8377N2"}]