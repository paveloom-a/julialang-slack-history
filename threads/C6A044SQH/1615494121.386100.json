[{"client_msg_id":"b6e3c748-7d5d-4bf3-9ca1-885ba3a31f3b","type":"message","text":"I can't seem to get rid of this boundscheck?!?\n```struct TextKmerIterator\n    data::Vector{UInt8}\n    stop::UInt # inclusive\nend\n\nfunction foo(x::TextKmerIterator)\n    kmer, i, k = UInt(0), UInt(1), UInt(0)\n    @inbounds while i ≤ x.stop\n        byte = x.data[i]\n        k += one(UInt)\n        i += 1\n        kmer = ((kmer &lt;&lt; 2) &amp; UInt(0x3f)) | 0x01\n        if k == 3\n            return kmer, (kmer, i, k-one(UInt))\n        end\n    end\n    return nothing\nend```\n, now\n```julia&gt; it = TextKmerIterator(collect(codeunits(\"T\")), 4)\nMain.TextKmerIterator(UInt8[0x54], 0x0000000000000004)\n\njulia&gt; foo(it)\nERROR: BoundsError: attempt to access 1-element Vector{UInt8} at index [2]```\n:interrobang:","user":"U7HAYKY9X","ts":"1615494121.386100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8HMhH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can't seem to get rid of this boundscheck?!?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"struct TextKmerIterator\n    data::Vector{UInt8}\n    stop::UInt # inclusive\nend\n\nfunction foo(x::TextKmerIterator)\n    kmer, i, k = UInt(0), UInt(1), UInt(0)\n    @inbounds while i ≤ x.stop\n        byte = x.data[i]\n        k += one(UInt)\n        i += 1\n        kmer = ((kmer << 2) & UInt(0x3f)) | 0x01\n        if k == 3\n            return kmer, (kmer, i, k-one(UInt))\n        end\n    end\n    return nothing\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":", now\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> it = TextKmerIterator(collect(codeunits(\"T\")), 4)\nMain.TextKmerIterator(UInt8[0x54], 0x0000000000000004)\n\njulia> foo(it)\nERROR: BoundsError: attempt to access 1-element Vector{UInt8} at index [2]"}]},{"type":"rich_text_section","elements":[{"type":"emoji","name":"interrobang"}]}]}],"thread_ts":"1615494121.386100","reply_count":2,"reply_users_count":2,"latest_reply":"1615497298.390700","reply_users":["B01J9QZ4SP8","U01HD5VFXJM"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1615494124.386200","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1615494121.386100","parent_user_id":"U7HAYKY9X"},{"client_msg_id":"0a54dd92-f672-4f33-9563-ad2bd012f1e7","type":"message","text":"I ran your code on my computer in Julia 1.5.3 and it didn't error. It does error on the current master.","user":"U01HD5VFXJM","ts":"1615497298.390700","team":"T68168MUP","edited":{"user":"U01HD5VFXJM","ts":"1615497309.000000"},"blocks":[{"type":"rich_text","block_id":"GYvg0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I ran your code on my computer in Julia 1.5.3 and it didn't error. It does error on the current master."}]}]}],"thread_ts":"1615494121.386100","parent_user_id":"U7HAYKY9X"}]