[{"client_msg_id":"fb4296a4-7db7-4138-a4ea-9bbbe806f352","type":"message","text":"Is it possible to `@spawn` a task that’s pinned to a particular thread (but is not, of course, on the thread that spawned it)?","user":"U6740K1SP","ts":"1611246178.088100","team":"T68168MUP","edited":{"user":"U6740K1SP","ts":"1611246195.000000"},"blocks":[{"type":"rich_text","block_id":"7KM5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it possible to "},{"type":"text","text":"@spawn","style":{"code":true}},{"type":"text","text":" a task that’s pinned to a particular thread (but is not, of course, on the thread that spawned it)?"}]}]}],"thread_ts":"1611246178.088100","reply_count":11,"reply_users_count":4,"latest_reply":"1611266292.119100","reply_users":["U67SCG4HG","U6QPTG69E","U6740K1SP","U881D0W2C"],"subscribed":false},{"client_msg_id":"3b9135a5-3c4d-44d4-a31c-8c630da03a48","type":"message","text":"Maybe with <https://github.com/tro3/ThreadPools.jl|https://github.com/tro3/ThreadPools.jl>","user":"U67SCG4HG","ts":"1611246297.089100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XDe4V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe with "},{"type":"link","url":"https://github.com/tro3/ThreadPools.jl","text":"https://github.com/tro3/ThreadPools.jl"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP","reactions":[{"name":"heart","users":["U6740K1SP"],"count":1}]},{"client_msg_id":"594d7772-37a2-4ce5-89b8-a8d51e718884","type":"message","text":"Also:","user":"U6QPTG69E","ts":"1611247029.091300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"I6Rh0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also:"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP"},{"client_msg_id":"8a32ae10-ecad-4597-9439-1ba69e5765ab","type":"message","text":"```function thread_pin(t::Task, tid::UInt16)\n    ccall(:jl_set_task_tid, Cvoid, (Any, Cint), t, tid-1)\n    schedule(t)\n    return t\nend```","user":"U6QPTG69E","ts":"1611247041.091500","team":"T68168MUP","edited":{"user":"U6QPTG69E","ts":"1611247079.000000"},"blocks":[{"type":"rich_text","block_id":"K9UN","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function thread_pin(t::Task, tid::UInt16)\n    ccall(:jl_set_task_tid, Cvoid, (Any, Cint), t, tid-1)\n    schedule(t)\n    return t\nend"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP"},{"client_msg_id":"2267e2cd-b1e0-4f20-bcdf-529a69e041ed","type":"message","text":"cf. <https://github.com/JuliaLang/julia/issues/34267#issuecomment-573507670>","user":"U6QPTG69E","ts":"1611247081.091800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p4k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cf. "},{"type":"link","url":"https://github.com/JuliaLang/julia/issues/34267#issuecomment-573507670"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP"},{"client_msg_id":"30e214e9-bb48-4ddf-a670-f8d7d36f06fc","type":"message","text":"Yes, I found exactly that idiom inside ThreadPools :slightly_smiling_face:","user":"U6740K1SP","ts":"1611247674.093200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DgjdV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, I found exactly that idiom inside ThreadPools "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP"},{"client_msg_id":"f2dc7294-fa50-4a03-aa26-a5e32e5119e6","type":"message","text":"Thank you both","user":"U6740K1SP","ts":"1611247776.094400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"H07","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you both"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP","reactions":[{"name":"+1","users":["U6QPTG69E"],"count":1}]},{"client_msg_id":"5fb484be-c3f3-4b36-9c87-fdcb088a25ff","type":"message","text":"If anyone is interested in some SO points: <https://stackoverflow.com/questions/65832327/is-it-possible-to-pin-a-task-to-a-particular-thread>","user":"U6740K1SP","ts":"1611248785.096300","team":"T68168MUP","edited":{"user":"U6740K1SP","ts":"1611248835.000000"},"attachments":[{"service_name":"Stack Overflow","title":"Is it possible to pin a task to a particular thread?","title_link":"https://stackoverflow.com/questions/65832327/is-it-possible-to-pin-a-task-to-a-particular-thread","text":"Julia's multithreading system is built atop tasks. I can create an asynchronous task that will always run on the thread that spawned it with an @async. I can create a task that can be run on any ...","fallback":"Stack Overflow: Is it possible to pin a task to a particular thread?","thumb_url":"https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded","from_url":"https://stackoverflow.com/questions/65832327/is-it-possible-to-pin-a-task-to-a-particular-thread","thumb_width":316,"thumb_height":316,"service_icon":"https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon.png?v=c78bd457575a","id":1,"original_url":"https://stackoverflow.com/questions/65832327/is-it-possible-to-pin-a-task-to-a-particular-thread"}],"blocks":[{"type":"rich_text","block_id":"k5Kom","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If anyone is interested in some SO points: "},{"type":"link","url":"https://stackoverflow.com/questions/65832327/is-it-possible-to-pin-a-task-to-a-particular-thread"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP"},{"client_msg_id":"24bd10d8-a49f-4ce9-a13a-03e98d5ef6f7","type":"message","text":"otherwise I’ll answer it myself in a few hours","user":"U6740K1SP","ts":"1611248795.096600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zB4jg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"otherwise I’ll answer it myself in a few hours"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP"},{"client_msg_id":"052bf8dd-40e4-457b-a2ce-9f3ff2f62826","type":"message","text":"Please go ahead!","user":"U6QPTG69E","ts":"1611263473.118400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yjg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Please go ahead!"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP"},{"client_msg_id":"dc68db56-3b99-4011-abd7-8eddfc036512","type":"message","text":"<@U881D0W2C> beat me to it! :slightly_smiling_face: I’m pinging you because I’m curious how you feel answering a question I knew the answer to — is that annoying?  Should’ve I just added the answer immediately?","user":"U6740K1SP","ts":"1611264667.118600","team":"T68168MUP","edited":{"user":"U6740K1SP","ts":"1611264794.000000"},"blocks":[{"type":"rich_text","block_id":"k7Wg","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U881D0W2C"},{"type":"text","text":" beat me to it! "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" I’m pinging you because I’m curious how you feel answering a question I knew the answer to — is that annoying?  Should’ve I just added the answer immediately?"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP"},{"client_msg_id":"2c845ec9-d3ae-4e3e-b9ee-cafbbc7b5b9f","type":"message","text":"I didn’t find it annoying. IMO, you could have added the answer immediately though. The thing is that while I was typing my answer I thought: “What if Matt is answering now 2 seconds before me”. THAT would be annoying :smile:.  BTW I only saw this thread now that you pinged me. Good that I gave the same answer :smile:","user":"U881D0W2C","ts":"1611266292.119100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RYLdF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I didn’t find it annoying. IMO, you could have added the answer immediately though. The thing is that while I was typing my answer I thought: “What if Matt is answering now 2 seconds before me”. THAT would be annoying "},{"type":"emoji","name":"smile"},{"type":"text","text":".  BTW I only saw this thread now that you pinged me. Good that I gave the same answer "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1611246178.088100","parent_user_id":"U6740K1SP","reactions":[{"name":"heart","users":["U6740K1SP"],"count":1}]}]