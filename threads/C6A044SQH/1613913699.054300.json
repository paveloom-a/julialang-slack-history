[{"client_msg_id":"6804e620-e865-42a2-a07e-d7c69234f0cf","type":"message","text":"I'm having some problems understanding how to work with shared libraries using `ccall`. I made a small toy example (<https://gist.github.com/ahojukka5/ab3a198ca25ce55e4f6947c217e0293f>) to try out different things as starting wrapping bigger libraries right away seems to be a bit too hard without any practicing first.\n\nIn line 26, I try to access data allocated in C without success. I guess it should work like this but I don't get expected results. `unsafe_wrap` is working as expected.\n\nIn test2, I'm trying to allocate data in Julia and create a pointer to point data, so that it would be accessible in C, but again this is somehow wrong.\n\nAny tips on how to proceed?\n\nThe third question might be, that do I strictly speaking need to define my own mutable struct in Julia if I only use functions defined in a shared library? That is, can I just get a pointer address from C and pass that around without exactly knowing how to structure is actually created in C?","user":"UAGBT2X1A","ts":"1613913699.054300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f8GM1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm having some problems understanding how to work with shared libraries using "},{"type":"text","text":"ccall","style":{"code":true}},{"type":"text","text":". I made a small toy example ("},{"type":"link","url":"https://gist.github.com/ahojukka5/ab3a198ca25ce55e4f6947c217e0293f"},{"type":"text","text":") to try out different things as starting wrapping bigger libraries right away seems to be a bit too hard without any practicing first.\n\nIn line 26, I try to access data allocated in C without success. I guess it should work like this but I don't get expected results. "},{"type":"text","text":"unsafe_wrap","style":{"code":true}},{"type":"text","text":" is working as expected.\n\nIn test2, I'm trying to allocate data in Julia and create a pointer to point data, so that it would be accessible in C, but again this is somehow wrong.\n\nAny tips on how to proceed?\n\nThe third question might be, that do I strictly speaking need to define my own mutable struct in Julia if I only use functions defined in a shared library? That is, can I just get a pointer address from C and pass that around without exactly knowing how to structure is actually created in C?"}]}]}],"thread_ts":"1613913699.054300","reply_count":2,"reply_users_count":2,"latest_reply":"1613915996.055800","reply_users":["B01J9QZ4SP8","UBEF50B7C"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1613913702.054400","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1613913699.054300","parent_user_id":"UAGBT2X1A"},{"client_msg_id":"b0ea6ad1-443a-4e42-b58a-ffc439cda7cf","type":"message","text":"Not an expert here, but I think `unsafe_load` is 1-indexed.","user":"UBEF50B7C","ts":"1613915996.055800","team":"T68168MUP","edited":{"user":"UBEF50B7C","ts":"1613916158.000000"},"blocks":[{"type":"rich_text","block_id":"H=5a","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not an expert here, but I think "},{"type":"text","text":"unsafe_load","style":{"code":true}},{"type":"text","text":" is 1-indexed."}]}]}],"thread_ts":"1613913699.054300","parent_user_id":"UAGBT2X1A"}]