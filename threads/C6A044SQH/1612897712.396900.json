[{"client_msg_id":"af5fbca0-2f93-4515-9f0d-26d7c8fa7b8f","type":"message","text":"I've managed to get two threads play ping-pong with each other, but tasks don't want to play. Why?\n\n```function pingpong_threads(n = 10)\n    l = ReentrantLock()\n    msg = \"pong\"\n    Threads.@spawn begin\n        i = 0\n        while i &lt; n\n            Base.@lock l begin\n                if msg !== \"ping\"\n                    sleep(0.5)\n                    msg = \"ping\"\n                    println(\"$msg\")\n                    i += 1\n                end\n            end\n        end\n    end\n    Threads.@spawn begin\n        i = 0\n        while i &lt; n\n            Base.@lock l begin\n                if msg !== \"pong\"\n                    sleep(0.5)\n                    msg = \"pong\"\n                    println(\"$msg\")\n                    i += 1\n                end\n            end\n        end\n    end\nend\n\nfunction pingpong_tasks(n = 10)\n    l = ReentrantLock()\n    msg = \"pong\"\n    @async begin\n        i = 0 \n        while i &lt; n\n            Base.@lock l begin\n                if msg !== \"ping\"\n                    sleep(0.5)\n                    msg = \"ping\"\n                    println(\"$msg\")\n                    i += 1\n                end\n            end\n        end\n    end\n    @async begin\n        i = 0\n        while i &lt; n\n            Base.@lock l begin\n                if msg !== \"pong\"\n                    sleep(0.5)\n                    msg = \"pong\"\n                    println(\"$msg\")\n                    i += 1\n                end\n            end\n        end\n    end\nend```","user":"UB2QSHWPN","ts":"1612897712.396900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gmfs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I've managed to get two threads play ping-pong with each other, but tasks don't want to play. Why?\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function pingpong_threads(n = 10)\n    l = ReentrantLock()\n    msg = \"pong\"\n    Threads.@spawn begin\n        i = 0\n        while i < n\n            Base.@lock l begin\n                if msg !== \"ping\"\n                    sleep(0.5)\n                    msg = \"ping\"\n                    println(\"$msg\")\n                    i += 1\n                end\n            end\n        end\n    end\n    Threads.@spawn begin\n        i = 0\n        while i < n\n            Base.@lock l begin\n                if msg !== \"pong\"\n                    sleep(0.5)\n                    msg = \"pong\"\n                    println(\"$msg\")\n                    i += 1\n                end\n            end\n        end\n    end\nend\n\nfunction pingpong_tasks(n = 10)\n    l = ReentrantLock()\n    msg = \"pong\"\n    @async begin\n        i = 0 \n        while i < n\n            Base.@lock l begin\n                if msg !== \"ping\"\n                    sleep(0.5)\n                    msg = \"ping\"\n                    println(\"$msg\")\n                    i += 1\n                end\n            end\n        end\n    end\n    @async begin\n        i = 0\n        while i < n\n            Base.@lock l begin\n                if msg !== \"pong\"\n                    sleep(0.5)\n                    msg = \"pong\"\n                    println(\"$msg\")\n                    i += 1\n                end\n            end\n        end\n    end\nend"}]}]}],"thread_ts":"1612897712.396900","reply_count":4,"reply_users_count":3,"latest_reply":"1612897901.397600","reply_users":["B01J9QZ4SP8","UH24GRBLL","UB2QSHWPN"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1612897714.397000","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1612897712.396900","parent_user_id":"UB2QSHWPN"},{"client_msg_id":"bb491014-fd31-45dd-ae04-8bcb0818fcbd","type":"message","text":"because tasks run concurrently, not necessarily in parallel","user":"UH24GRBLL","ts":"1612897841.397200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lUc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"because tasks run concurrently, not necessarily in parallel"}]}]}],"thread_ts":"1612897712.396900","parent_user_id":"UB2QSHWPN"},{"client_msg_id":"7a52ea26-6b68-452b-83cf-01f01618e2a1","type":"message","text":"So, how should I change that function for two tasks?","user":"UB2QSHWPN","ts":"1612897867.397400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"M5K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So, how should I change that function for two tasks?"}]}]}],"thread_ts":"1612897712.396900","parent_user_id":"UB2QSHWPN"},{"client_msg_id":"86561959-c993-4666-a14f-ae714484101e","type":"message","text":"make sure both tasks run on independent threads and communicate via channels","user":"UH24GRBLL","ts":"1612897901.397600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lop","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"make sure both tasks run on independent threads and communicate via channels"}]}]}],"thread_ts":"1612897712.396900","parent_user_id":"UB2QSHWPN"}]