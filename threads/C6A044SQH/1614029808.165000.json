[{"client_msg_id":"70fa82af-6353-405b-99d6-d32831dce55d","type":"message","text":"Hi guys, related to an earlier post, trying to do the following:\n```function execute_queues!()\n    @async begin\n        amqp_connection!(_conn_def) do conn\n            amqp_channel!(conn) do chan\n                Threads.@spawn for queue in _queues\n                    $queue($chan)\n                end\n            end\n        end\n    end\nend```\nBut nothing is being consumed, it is definitely something to do with the threading since it works without the async and spawn, however this only works for one queue. Any ideas?","user":"U01MWNUGFUL","ts":"1614029808.165000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A8rT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi guys, related to an earlier post, trying to do the following:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function execute_queues!()\n    @async begin\n        amqp_connection!(_conn_def) do conn\n            amqp_channel!(conn) do chan\n                Threads.@spawn for queue in _queues\n                    $queue($chan)\n                end\n            end\n        end\n    end\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"But nothing is being consumed, it is definitely something to do with the threading since it works without the async and spawn, however this only works for one queue. Any ideas?"}]}]}],"thread_ts":"1614029808.165000","reply_count":2,"reply_users_count":1,"latest_reply":"1614046582.170800","reply_users":["U01MWNUGFUL"],"subscribed":false},{"client_msg_id":"f29ff6b6-99d4-4845-8f99-35c7aa664b4c","type":"message","text":"never mind found solution\n```function execute_queues!()\n    @async begin\n        amqp_connection!(_conn_def) do conn\n            amqp_channel!(conn) do chan\n                @sync for queue in _queues\n                    Threads.@spawn $queue(chan)\n                end\n            end\n        end\n    end\nend```","user":"U01MWNUGFUL","ts":"1614030449.165300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lqF1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"never mind found solution\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function execute_queues!()\n    @async begin\n        amqp_connection!(_conn_def) do conn\n            amqp_channel!(conn) do chan\n                @sync for queue in _queues\n                    Threads.@spawn $queue(chan)\n                end\n            end\n        end\n    end\nend"}]}]}],"thread_ts":"1614029808.165000","parent_user_id":"U01MWNUGFUL"},{"client_msg_id":"6c585ee2-69f8-4867-9382-b7bf840e88f1","type":"message","text":"Update, the above doesn't work, it only reads from one queue despite having a yield in the thread it never picks up the second queue","user":"U01MWNUGFUL","ts":"1614046582.170800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DIR9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Update, the above doesn't work, it only reads from one queue despite having a yield in the thread it never picks up the second queue"}]}]}],"thread_ts":"1614029808.165000","parent_user_id":"U01MWNUGFUL"}]