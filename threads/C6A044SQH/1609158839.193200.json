[{"client_msg_id":"bfd8561b-a114-494a-af80-b74cfed71c69","type":"message","text":"Are Dict threadsafe ? If no what are ways in which one can add element in Dic in threaded for loops?","user":"U01GZQ6B0JU","ts":"1609158839.193200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7dMg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Are Dict threadsafe ? If no what are ways in which one can add element in Dic in threaded for loops?"}]}]}],"thread_ts":"1609158839.193200","reply_count":2,"reply_users_count":2,"latest_reply":"1609180406.200100","reply_users":["UP9P4JFNJ","U01GZQ6B0JU"],"subscribed":false},{"client_msg_id":"4e2a3769-210f-4c2b-a0f8-dcef1e253275","type":"message","text":"No!\n• <https://discourse.julialang.org/t/can-dicts-be-threadsafe/27172/6>\nThe following are examples with actors:\n• <https://juliaactors.github.io/Actors.jl/stable/actors/#dict-server>\n• <https://discourse.julialang.org/t/thread-local-dict-for-each-thread/51441/2>","user":"UP9P4JFNJ","ts":"1609168161.198200","team":"T68168MUP","edited":{"user":"UP9P4JFNJ","ts":"1609168234.000000"},"attachments":[{"service_name":"JuliaLang","title":"Can dicts be threadsafe?","title_link":"https://discourse.julialang.org/t/can-dicts-be-threadsafe/27172/6","text":"Basic data structures are not and probably never will be threadsafe—it introduces way too much overhead when you don’t need thread safety. If you want to safely share a dict between threads, you can use a lock, or better still, take a page out of Go’s playbook and have a single task which manages the dict and let other tasks send it messages to tell it to update the dict instead.","fallback":"JuliaLang: Can dicts be threadsafe?","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","ts":1565041679,"from_url":"https://discourse.julialang.org/t/can-dicts-be-threadsafe/27172/6","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/can-dicts-be-threadsafe/27172/6"},{"service_name":"JuliaLang","title":"Thread-local `Dict` for each thread?","title_link":"https://discourse.julialang.org/t/thread-local-dict-for-each-thread/51441/2","text":"Maybe you consider an actor approach to make your Dict thread-safe. Consider the following toy example: julia&gt; using Guards, .Threads julia&gt; inc(x) = x[1]+=1 inc (generic function with 1 method) julia&gt; myDict = guard(Dict{Int, Float64}()) Guard{Dict{Int64,Float64}}(Link{Channel{Any}}(Channel{Any}(sz_max:32,sz_curr:0), 1, :guard)) julia&gt; count = guard([0]) Guard{Array{Int64,1}}(Link{Channel{Any}}(Channel{Any}(sz_max:32,sz_curr:0), 1, :guard)) julia&gt; @threads for _ in 1:1000 myDic...","fallback":"JuliaLang: Thread-local `Dict` for each thread?","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","ts":1607414430,"from_url":"https://discourse.julialang.org/t/thread-local-dict-for-each-thread/51441/2","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":2,"original_url":"https://discourse.julialang.org/t/thread-local-dict-for-each-thread/51441/2"}],"blocks":[{"type":"rich_text","block_id":"bCREr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No!\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://discourse.julialang.org/t/can-dicts-be-threadsafe/27172/6"}]}],"style":"bullet","indent":0},{"type":"rich_text_section","elements":[{"type":"text","text":"\nThe following are examples with actors:\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://juliaactors.github.io/Actors.jl/stable/actors/#dict-server"}]},{"type":"rich_text_section","elements":[{"type":"link","url":"https://discourse.julialang.org/t/thread-local-dict-for-each-thread/51441/2"}]}],"style":"bullet","indent":0}]}],"thread_ts":"1609158839.193200","parent_user_id":"U01GZQ6B0JU"},{"client_msg_id":"443bd0b5-b5c7-4a63-bc96-218a2c490edb","type":"message","text":"Yeah, I suspected that, but this actor approach seems interesting, let me look at it. Thanks <@UP9P4JFNJ>","user":"U01GZQ6B0JU","ts":"1609180406.200100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"C35m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, I suspected that, but this actor approach seems interesting, let me look at it. Thanks "},{"type":"user","user_id":"UP9P4JFNJ"}]}]}],"thread_ts":"1609158839.193200","parent_user_id":"U01GZQ6B0JU"}]