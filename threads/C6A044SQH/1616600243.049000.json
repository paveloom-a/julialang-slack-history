[{"client_msg_id":"5f78d94d-1e49-4a0d-ab12-c5e9e7572935","type":"message","text":"Hey! How can i compute the minimum non-zero value of an otherwise positive array?","user":"U01M641BZEY","ts":"1616600243.049000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3BMX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey! How can i compute the minimum non-zero value of an otherwise positive array?"}]}]}],"thread_ts":"1616600243.049000","reply_count":15,"reply_users_count":5,"latest_reply":"1616606077.057200","reply_users":["U67SCG4HG","U72EFQ9L4","UH24GRBLL","UDB26738Q","U01M641BZEY"],"is_locked":false,"subscribed":false},{"client_msg_id":"a9e96d27-7e45-415b-b395-e07498fb4f8f","type":"message","text":"Here is one way:\n```julia&gt; x = [0, 3, 1, 0];\n\njulia&gt; minimum(y for y in x if !iszero(y))\n1```","user":"U67SCG4HG","ts":"1616600335.049700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HJk=w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here is one way:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> x = [0, 3, 1, 0];\n\njulia> minimum(y for y in x if !iszero(y))\n1"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"},{"client_msg_id":"62f64529-4651-4bf8-9c65-1b5254d88d69","type":"message","text":"`minimum(Iterators.filter(!iszero, x))`","user":"U72EFQ9L4","ts":"1616600394.050100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PwWSr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"minimum(Iterators.filter(!iszero, x))","style":{"code":true}}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY","reactions":[{"name":"fast_parrot","users":["UH24GRBLL"],"count":1}]},{"client_msg_id":"27209a8b-46d1-4d65-b27a-86e01315d063","type":"message","text":"`minimum(filter(!iszero, x))`","user":"UH24GRBLL","ts":"1616600398.050300","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1616600401.000000"},"blocks":[{"type":"rich_text","block_id":"74=p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"minimum(filter(!iszero, x))","style":{"code":true}}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY","reactions":[{"name":"slow_parrot","users":["UH24GRBLL"],"count":1}]},{"client_msg_id":"d925f7cc-da22-4985-80a6-268f9c01f758","type":"message","text":"The latter allocates an array.","user":"U67SCG4HG","ts":"1616600445.051000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hmLs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The latter allocates an array."}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"},{"client_msg_id":"7b25c704-8dda-48d2-86dd-73aa5df3b30f","type":"message","text":"yes, that too :|","user":"UH24GRBLL","ts":"1616600452.051200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P0D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, that too :|"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"},{"client_msg_id":"a4ea03f9-9fcf-4ebb-94de-4ee46615bcaf","type":"message","text":"```julia&gt; x = rand(1000);\n\njulia&gt; f(x) = minimum(y for y in x if !iszero(y))\nf (generic function with 1 method)\n\njulia&gt; g(x) = minimum(Iterators.filter(!iszero, x))\ng (generic function with 1 method)\n\njulia&gt; h(x) = minimum(y -&gt; iszero(y) ? Inf : y, x)\nh (generic function with 1 method)\n\njulia&gt; @btime f($x)\n  2.439 μs (0 allocations: 0 bytes)\n6.403065587856638e-5\n\njulia&gt; @btime g($x)\n  2.439 μs (0 allocations: 0 bytes)\n6.403065587856638e-5\n\njulia&gt; @btime h($x)\n  962.950 ns (0 allocations: 0 bytes)\n6.403065587856638e-5```","user":"UDB26738Q","ts":"1616600643.051400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SPlQr","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> x = rand(1000);\n\njulia> f(x) = minimum(y for y in x if !iszero(y))\nf (generic function with 1 method)\n\njulia> g(x) = minimum(Iterators.filter(!iszero, x))\ng (generic function with 1 method)\n\njulia> h(x) = minimum(y -> iszero(y) ? Inf : y, x)\nh (generic function with 1 method)\n\njulia> @btime f($x)\n  2.439 μs (0 allocations: 0 bytes)\n6.403065587856638e-5\n\njulia> @btime g($x)\n  2.439 μs (0 allocations: 0 bytes)\n6.403065587856638e-5\n\njulia> @btime h($x)\n  962.950 ns (0 allocations: 0 bytes)\n6.403065587856638e-5"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"},{"client_msg_id":"162f033f-b541-44b7-acbd-62f630fa0f2e","type":"message","text":"I bet `h` SIMDs","user":"UH24GRBLL","ts":"1616600770.051600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FTf=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I bet "},{"type":"text","text":"h","style":{"code":true}},{"type":"text","text":" SIMDs"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"},{"client_msg_id":"eccedaf3-2f0e-4d74-a5cd-cd6f14e13910","type":"message","text":"Probably, is it fast even if `eltype(x) !== typeof(Inf)`?","user":"U67SCG4HG","ts":"1616600834.051800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qC7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Probably, is it fast even if "},{"type":"text","text":"eltype(x) !== typeof(Inf)","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"},{"client_msg_id":"3d759850-3375-412b-bbdf-7fce05009112","type":"message","text":"then just `typemax(y)` instead?","user":"UH24GRBLL","ts":"1616600862.052000","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1616600883.000000"},"blocks":[{"type":"rich_text","block_id":"w5mo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"then just "},{"type":"text","text":"typemax(y)","style":{"code":true}},{"type":"text","text":" instead?"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY","reactions":[{"name":"+1","users":["UDB26738Q"],"count":1}]},{"client_msg_id":"3ce270a0-9fa6-47f6-b899-e03ec81e372a","type":"message","text":"yeah, with `x = rand(UInt, 1000)` it's pretty bad if using `Inf`, but `typemax(y)` does the trick","user":"UDB26738Q","ts":"1616601007.052500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FPNua","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, with "},{"type":"text","text":"x = rand(UInt, 1000)","style":{"code":true}},{"type":"text","text":" it's pretty bad if using "},{"type":"text","text":"Inf","style":{"code":true}},{"type":"text","text":", but "},{"type":"text","text":"typemax(y)","style":{"code":true}},{"type":"text","text":" does the trick"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"},{"client_msg_id":"a540b56a-f048-497d-adbd-b164e2e651e1","type":"message","text":"```f(x) = minimum(iszero(y) ? typemax(y) : y for y in x)```\nseems even faster","user":"UDB26738Q","ts":"1616601127.052700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"grx","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"f(x) = minimum(iszero(y) ? typemax(y) : y for y in x)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"seems even faster"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"},{"client_msg_id":"e5ea5f45-56d5-416f-b2ce-d24fa440982b","type":"message","text":"just don't filter then :smile:","user":"UDB26738Q","ts":"1616601140.052900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"it8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"just don't filter then "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"},{"client_msg_id":"6a7019d4-49ed-4deb-98b7-a2e6be30cc2f","type":"message","text":"(uhm, no, not necessarily faster :thinking_face:)","user":"UDB26738Q","ts":"1616601214.053300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6Yp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(uhm, no, not necessarily faster "},{"type":"emoji","name":"thinking_face"},{"type":"text","text":")"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"},{"client_msg_id":"1cd48c8e-93e9-465a-978b-e6172b2ab6c6","type":"message","text":"benchmarking is hard :man-shrugging:","user":"UH24GRBLL","ts":"1616605131.053800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"C9X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"benchmarking is hard "},{"type":"emoji","name":"man-shrugging"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY","reactions":[{"name":"heavy_check_mark","users":["UDB26738Q"],"count":1}]},{"client_msg_id":"58881fbe-2a99-49f8-96c2-458e37074ce9","type":"message","text":"Thank you all! :slightly_smiling_face:","user":"U01M641BZEY","ts":"1616606077.057200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XcMW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you all! "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1616600243.049000","parent_user_id":"U01M641BZEY"}]