[{"client_msg_id":"1ba4c864-59f8-48cd-964d-80243af6b0dc","type":"message","text":"I am getting\n\n```using Gadfly\nERROR: ArgumentError: Package Gadfly not found in current path:\n- Run `import Pkg; Pkg.add(\"Gadfly\")` to install the Gadfly package.```\nbut I have\n```julia&gt; ENV\nENV\nBase.EnvDict with 29 entries:\n  \"JULIA_DEPOT_PATH\"        =&gt; \"/Users/dom/.julia:/nix/store/jmi07zhnpmnphnw3ls0cxmrq1n89spbd-julia-depot\"```\nand\n```dom@MacBook-Pro depot % ls -ltr /nix/store/jmi07zhnpmnphnw3ls0cxmrq1n89spbd-julia-depot/compiled/v1.5/Gadfly/ \n&lt;nw3ls0cxmrq1n89spbd-julia-depot/compiled/v1.5/Gadfly/ \ntotal 3296\n-r-xr-xr-x  1 dom  admin  1686699  1 Jan  1970 DvECm_9igGY.ji```\nso what is stopping julia finding gadfly?","user":"U014JNFUNG2","ts":"1615634605.052000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3+/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am getting\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Gadfly\nERROR: ArgumentError: Package Gadfly not found in current path:\n- Run `import Pkg; Pkg.add(\"Gadfly\")` to install the Gadfly package."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"but I have\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> ENV\nENV\nBase.EnvDict with 29 entries:\n  \"JULIA_DEPOT_PATH\"        => \"/Users/dom/.julia:/nix/store/jmi07zhnpmnphnw3ls0cxmrq1n89spbd-julia-depot\""}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"dom@MacBook-Pro depot % ls -ltr /nix/store/jmi07zhnpmnphnw3ls0cxmrq1n89spbd-julia-depot/compiled/v1.5/Gadfly/ \n<nw3ls0cxmrq1n89spbd-julia-depot/compiled/v1.5/Gadfly/ \ntotal 3296\n-r-xr-xr-x  1 dom  admin  1686699  1 Jan  1970 DvECm_9igGY.ji"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"so what is stopping julia finding gadfly?"}]}]}],"thread_ts":"1615634605.052000","reply_count":27,"reply_users_count":5,"latest_reply":"1615665580.091100","reply_users":["B01J9QZ4SP8","U014JNFUNG2","U7HAYKY9X","UCZ7VBGUD","UM8JUNJG7"],"subscribed":false,"reactions":[{"name":"bridge","users":["UM8JUNJG7","U014JNFUNG2"],"count":2},{"name":"dancing-banana","users":["UM8JUNJG7"],"count":1}]},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1615634606.052100","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"745ba278-a2b3-4ff6-a168-f5e63e54b87f","type":"message","text":":bridge:","user":"U014JNFUNG2","ts":"1615634623.052300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8Bj","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"bridge"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"25b37065-bd3c-4915-aee1-25eff5ccf203","type":"message","text":"Maybe you're in another project? What's the current project?","user":"U7HAYKY9X","ts":"1615636130.052700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"duU7v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe you're in another project? What's the current project?"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"fdea5c5b-f57e-4634-a303-55ecd691dedf","type":"message","text":"I don’t understand what you mean by project - sorry","user":"U014JNFUNG2","ts":"1615636167.052900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"77CM2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t understand what you mean by project - sorry"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"2f9de19e-8697-4d7b-81eb-78a2ad645681","type":"message","text":"In Julia, try typing ]. Then you end up in pkg mode","user":"U7HAYKY9X","ts":"1615636232.053100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/Fb2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In Julia, try typing ]. Then you end up in pkg mode"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"3ad3952b-0daa-4c8b-98b9-ab6da8b3cd9b","type":"message","text":"Then type status to see which packages are available. To add a package, type \"add Gadfly\"","user":"U7HAYKY9X","ts":"1615636257.053300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mqSfT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Then type status to see which packages are available. To add a package, type \"add Gadfly\""}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"d78e742a-122e-43dd-b3a1-6ce6ce1827c7","type":"message","text":"```julia&gt; pkg\"status\"\npkg\"status\"\nStatus `~/Dropbox/Tidy/depot/Project.toml`\n  [31c24e10] Distributions v0.23.12\n  [c91e804a] Gadfly v1.3.1\n  [37e2e46d] LinearAlgebra```","user":"U014JNFUNG2","ts":"1615636480.053500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vvQKt","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> pkg\"status\"\npkg\"status\"\nStatus `~/Dropbox/Tidy/depot/Project.toml`\n  [31c24e10] Distributions v0.23.12\n  [c91e804a] Gadfly v1.3.1\n  [37e2e46d] LinearAlgebra"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"67ac3d0c-287a-4f18-93f0-0af00fb87792","type":"message","text":"But if I say `using Gadfly` then julia starts to compile it - why? - it’s already compiled in `/nix/store/jmi07zhnpmnphnw3ls0cxmrq1n89spbd-julia-depot/compiled/v1.5/Gadfly/DvECm_9igGY.ji`","user":"U014JNFUNG2","ts":"1615636546.053700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"45R5V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But if I say "},{"type":"text","text":"using Gadfly","style":{"code":true}},{"type":"text","text":" then julia starts to compile it - why? - it’s already compiled in "},{"type":"text","text":"/nix/store/jmi07zhnpmnphnw3ls0cxmrq1n89spbd-julia-depot/compiled/v1.5/Gadfly/DvECm_9igGY.ji","style":{"code":true}}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"d0bcd0a4-9487-404e-abf9-53d1daca71a4","type":"message","text":"And now I have `/Users/dom/.julia/compiled/again.v1.5/Gadfly/DvECm_KbDQp.ji` which I didn’t want","user":"U014JNFUNG2","ts":"1615636647.053900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A/L","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And now I have "},{"type":"text","text":"/Users/dom/.julia/compiled/again.v1.5/Gadfly/DvECm_KbDQp.ji","style":{"code":true}},{"type":"text","text":" which I didn’t want"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"BC64D51F-4975-448D-9C4E-A74B8A0F66A0","type":"message","text":"`again.v1.5` looks strange to me, I don’t think I’ve seen that before. But in general, if the version of Gadfly or any of its dependencies change, or the version of Julia changes, then it will need to re-precompile, saving new .ji files.","user":"UCZ7VBGUD","ts":"1615644971.058000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"96bK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"again.v1.5","style":{"code":true}},{"type":"text","text":" looks strange to me, I don’t think I’ve seen that before. But in general, if the version of Gadfly or any of its dependencies change, or the version of Julia changes, then it will need to re-precompile, saving new .ji files."}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"49a505a2-a3e1-4e20-b7c1-1c398e401242","type":"message","text":"Ah my bad - I changed the name - it should be `/Users/dom/.julia/compiled/v1.5/Gadfly/DvECm_KbDQp.ji`","user":"U014JNFUNG2","ts":"1615646769.058300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xoX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah my bad - I changed the name - it should be "},{"type":"text","text":"/Users/dom/.julia/compiled/v1.5/Gadfly/DvECm_KbDQp.ji","style":{"code":true}}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"1d1feba3-0c9c-483b-b231-e1cdda61a766","type":"message","text":"Is there a way of getting julia to tell me what it is searching and why it abandons the search and decides to rebuild things?","user":"U014JNFUNG2","ts":"1615647655.058500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XD5/M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way of getting julia to tell me what it is searching and why it abandons the search and decides to rebuild things?"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"f0a3a05c-0238-4d62-bf03-872ebff5cbc8","type":"message","text":"I don’t think I have changed julia versions or gadfly versions","user":"U014JNFUNG2","ts":"1615647671.058700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J/G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t think I have changed julia versions or gadfly versions"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"DEFC8D48-989E-4BDA-99D3-995974B64DB9","type":"message","text":"I don’t think there’s any heuristics or anything like that. They’re just pieces of cached code that are invalided when something has changed and they might no longer be valid. Maybe you’ve changed a transitive dependency? Eg a dependency of Gadfly’s updated to a new version?","user":"UCZ7VBGUD","ts":"1615647920.061000","team":"T68168MUP","edited":{"user":"UCZ7VBGUD","ts":"1615647951.000000"},"blocks":[{"type":"rich_text","block_id":"eLO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t think there’s any heuristics or anything like that. They’re just pieces of cached code that are invalided when something has changed and they might no longer be valid. Maybe you’ve changed a transitive dependency? Eg a dependency of Gadfly’s updated to a new version?"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"16043C3B-9D24-4A69-A873-5335F94AA864","type":"message","text":"If compile times are annoying you, I’d the new 1.6 release candidate; 1.6 precompiles in parallel and is a lot snappier in general","user":"UCZ7VBGUD","ts":"1615648005.062300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D8SA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If compile times are annoying you, I’d the new 1.6 release candidate; 1.6 precompiles in parallel and is a lot snappier in general"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"905B137C-AA2B-4F6C-BAD9-DF3291FA9699","type":"message","text":"You might also be interested in this blog post that explains precompilation in a lot more detail: <https://julialang.org/blog/2021/01/precompile_tutorial/|https://julialang.org/blog/2021/01/precompile_tutorial/>","user":"UCZ7VBGUD","ts":"1615648218.063300","team":"T68168MUP","attachments":[{"title":"Tutorial on precompilation","title_link":"https://julialang.org/blog/2021/01/precompile_tutorial/","text":"Tutorial on precompilation","fallback":"Tutorial on precompilation","image_url":"https://julialang.org/assets/images/julia-open-graph.png","from_url":"https://julialang.org/blog/2021/01/precompile_tutorial/","image_width":500,"image_height":250,"image_bytes":742374,"service_name":"julialang.org","id":1,"original_url":"https://julialang.org/blog/2021/01/precompile_tutorial/"}],"blocks":[{"type":"rich_text","block_id":"faH16","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You might also be interested in this blog post that explains precompilation in a lot more detail: "},{"type":"link","url":"https://julialang.org/blog/2021/01/precompile_tutorial/","text":"https://julialang.org/blog/2021/01/precompile_tutorial/"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"31dac37f-e0d1-4633-8e0b-fab5af98962e","type":"message","text":"to bridge you have to react w bridge to og post","user":"UM8JUNJG7","ts":"1615660342.067000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tClX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"to bridge you have to react w bridge to og post"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"07cb61cb-dcdc-4615-b5cd-fbd5430a5770","type":"message","text":"like i did","user":"UM8JUNJG7","ts":"1615660344.067200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0zc11","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"like i did"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"109bf861-8de5-47b5-bac4-6fd5f54706cb","type":"message","text":"&gt; If compile times are annoying you, I’d the new 1.6 release candidate; 1.6 precompiles in parallel and is a lot snappier in general\nNot especially but I want julia to use my precompiled versions so I have a reproducible build - I don’t want to have versions changing","user":"U014JNFUNG2","ts":"1615660780.067400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HoNHA","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"If compile times are annoying you, I’d the new 1.6 release candidate; 1.6 precompiles in parallel and is a lot snappier in general"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Not especially but I want julia to use my precompiled versions so I have a reproducible build - I don’t want to have versions changing"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"type":"message","text":"&gt;  to bridge you have to react w bridge to og post\nI thought I had:","files":[{"id":"F01R63TJL0K","created":1615660786,"timestamp":1615660786,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U014JNFUNG2","editable":false,"size":14868,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01R63TJL0K/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01R63TJL0K/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01R63TJL0K-15a6703ab7/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01R63TJL0K-15a6703ab7/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01R63TJL0K-15a6703ab7/image_360.png","thumb_360_w":360,"thumb_360_h":98,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01R63TJL0K-15a6703ab7/image_480.png","thumb_480_w":480,"thumb_480_h":130,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01R63TJL0K-15a6703ab7/image_160.png","original_w":538,"original_h":146,"thumb_tiny":"AwANADDRPTpmm4/2P1FPIBGDRtHHtQAwjPVDRjnOzn61JijFAERUE/6vn8KdtB6in4oxQB//2Q==","permalink":"https://julialang.slack.com/files/U014JNFUNG2/F01R63TJL0K/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01R63TJL0K-4868f7c807","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"3SPt","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":" to bridge you have to react w bridge to og post"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI thought I had:"}]}]}],"user":"U014JNFUNG2","display_as_bot":false,"ts":"1615660818.067600","thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"a7441c23-a04c-437f-bcb2-01b147a807b6","type":"message","text":"no like the original post where i put the dancing banana","user":"UM8JUNJG7","ts":"1615660990.067900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KdePk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no like the original post where i put the dancing banana"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"aaba8036-d754-4669-a7cb-5e3dc0b4dd08","type":"message","text":"that one is mine xd","user":"UM8JUNJG7","ts":"1615661010.068100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZuZH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that one is mine xd"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"type":"message","subtype":"bot_message","text":"Success, it has been cross posted <https://discourse.julialang.org/t/57088| to Discourse>. Keep and eye out on Discourse for responses and please add an answer there once you are satisfied with the solution so others can benefit as well. Happy debugging!","ts":"1615661080.068400","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"4ab32eb4-3c2e-4b5c-ac24-1736f0ad2c13","type":"message","text":"Now it has 2 bridges","user":"U014JNFUNG2","ts":"1615661090.068600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2SBkf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Now it has 2 bridges"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"11c4f60b-bb73-4453-ab85-a69ffe336006","type":"message","text":"I think I fixed it - I deleted ~/.julia","user":"U014JNFUNG2","ts":"1615662124.075500","team":"T68168MUP","edited":{"user":"U014JNFUNG2","ts":"1615662132.000000"},"blocks":[{"type":"rich_text","block_id":"bUN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think I fixed it - I deleted ~/.julia"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"51d95d14-0e94-43f2-b9bb-fe6730ecd697","type":"message","text":"Now there is only a log in the newly created ~/.julia","user":"U014JNFUNG2","ts":"1615662169.075800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tTDv2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Now there is only a log in the newly created ~/.julia"}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"},{"client_msg_id":"8fce6d95-d9b2-4334-be00-b14556b4ead3","type":"message","text":"&gt; I don’t want to have versions changing\nThe way to do that in Julia is to use a Project.toml and a Manifest.toml. If you type `] activate .` that will tell Pkg to activate an environment located at the current working directory (or put a path instead of `.`). Then you can `] add …` packages to your environment. This will generate a Project.toml, which is just a list of packages, and a Manifest.toml, which has all their versions and all the versions of their dependencies and so on. Together, those two files + the version of Julia you are using, are enough to fully reproduce your environment. You can send them to another computer or wait a month or whatever, and if you do `] instantiate`, it will ensure you have exactly the versions specified in your Manifest.toml.","user":"UCZ7VBGUD","ts":"1615665580.091100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Yemb","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"I don’t want to have versions changing"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"The way to do that in Julia is to use a Project.toml and a Manifest.toml. If you type "},{"type":"text","text":"] activate .","style":{"code":true}},{"type":"text","text":" that will tell Pkg to activate an environment located at the current working directory (or put a path instead of "},{"type":"text","text":".","style":{"code":true}},{"type":"text","text":"). Then you can "},{"type":"text","text":"] add …","style":{"code":true}},{"type":"text","text":" packages to your environment. This will generate a Project.toml, which is just a list of packages, and a Manifest.toml, which has all their versions and all the versions of their dependencies and so on. Together, those two files + the version of Julia you are using, are enough to fully reproduce your environment. You can send them to another computer or wait a month or whatever, and if you do "},{"type":"text","text":"] instantiate","style":{"code":true}},{"type":"text","text":", it will ensure you have exactly the versions specified in your Manifest.toml."}]}]}],"thread_ts":"1615634605.052000","parent_user_id":"U014JNFUNG2"}]