[{"client_msg_id":"01286303-9be4-4686-9776-3431671708fc","type":"message","text":"Request: Do you get the same number of allocations on this code?\nRunning on Manjaro, Julia v1.6\n```julia&gt; using primecount_jll\n\njulia&gt; @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.150116 seconds (468 allocations: 33.891 KiB)```","user":"U6QGE7S86","ts":"1617896589.273300","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617896613.000000"},"blocks":[{"type":"rich_text","block_id":"+KA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Request: Do you get the same number of allocations on this code?\nRunning on Manjaro, Julia v1.6\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using primecount_jll\n\njulia> @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.150116 seconds (468 allocations: 33.891 KiB)"}]}]}],"thread_ts":"1617896589.273300","reply_count":29,"reply_users_count":7,"latest_reply":"1617902732.286100","reply_users":["UC3SSCQRZ","U6NFPDBV1","UDB26738Q","U6QGE7S86","UH24GRBLL","U011V2YN59N","U01C3624SGJ"],"is_locked":false,"subscribed":false},{"client_msg_id":"46ba804a-1786-4588-9150-c3a1cab6214e","type":"message","text":"```julia&gt; using primecount_jll\n\njulia&gt; @time run($(primecount()) 1e14);\n3204941750802\n  0.190887 seconds (148.35 k allocations: 9.081 MiB, 3.39% gc time, 56.32% compilation time)\n\njulia&gt; versioninfo()\nJulia Version 1.6.0\nCommit f9720dc2eb (2021-03-24 12:55 UTC)\nPlatform Info:\n  OS: Windows (x86_64-w64-mingw32)\n  CPU: AMD Ryzen 9 3900X 12-Core Processor\n  WORD_SIZE: 64\n  LIBM: libopenlibm\n  LLVM: libLLVM-11.0.1 (ORCJIT, znver2)```\n","user":"UC3SSCQRZ","ts":"1617896707.273500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"o0K","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using primecount_jll\n\njulia> @time run($(primecount()) 1e14);\n3204941750802\n  0.190887 seconds (148.35 k allocations: 9.081 MiB, 3.39% gc time, 56.32% compilation time)\n\njulia> versioninfo()\nJulia Version 1.6.0\nCommit f9720dc2eb (2021-03-24 12:55 UTC)\nPlatform Info:\n  OS: Windows (x86_64-w64-mingw32)\n  CPU: AMD Ryzen 9 3900X 12-Core Processor\n  WORD_SIZE: 64\n  LIBM: libopenlibm\n  LLVM: libLLVM-11.0.1 (ORCJIT, znver2)"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"287f7196-5148-4dfa-9702-0791be808df0","type":"message","text":"```julia&gt; @time run(primecount()) 1e14`);\n3204941750802\n  0.095916 seconds (745 allocations: 50.750 KiB)\n\njulia&gt; versioninfo()\nJulia Version 1.6.0\nCommit f9720dc2eb (2021-03-24 12:55 UTC)\nPlatform Info:\n  OS: Linux (x86_64-pc-linux-gnu)\n  CPU: AMD Ryzen 7 4800U with Radeon Graphics\n  WORD_SIZE: 64\n  LIBM: libopenlibm\n  LLVM: libLLVM-11.0.1 (ORCJIT, znver2)\nEnvironment:\n  JULIA_HISTORY = /home/cdg/.local/share/julia/logs/history\n  JULIA_DEPOT_PATH = /home/cdg/.local/share/julia\n  JULIA_PROJECT = @.\n  JULIA_NUM_THREADS = 16\n  JULIA_PKG_DEVDIR = /home/cdg/code```","user":"U6NFPDBV1","ts":"1617896721.273700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sWp08","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time run(primecount()) 1e14`);\n3204941750802\n  0.095916 seconds (745 allocations: 50.750 KiB)\n\njulia> versioninfo()\nJulia Version 1.6.0\nCommit f9720dc2eb (2021-03-24 12:55 UTC)\nPlatform Info:\n  OS: Linux (x86_64-pc-linux-gnu)\n  CPU: AMD Ryzen 7 4800U with Radeon Graphics\n  WORD_SIZE: 64\n  LIBM: libopenlibm\n  LLVM: libLLVM-11.0.1 (ORCJIT, znver2)\nEnvironment:\n  JULIA_HISTORY = /home/cdg/.local/share/julia/logs/history\n  JULIA_DEPOT_PATH = /home/cdg/.local/share/julia\n  JULIA_PROJECT = @.\n  JULIA_NUM_THREADS = 16\n  JULIA_PKG_DEVDIR = /home/cdg/code"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"98741815-d1a4-4345-a7ef-eb5771767f84","type":"message","text":"no, but I don't see how that's relevant.  number of allocations shouldn't have anything to do with the spawned process, since julia can't possibly track what it does","user":"UDB26738Q","ts":"1617896727.273900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cMQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, but I don't see how that's relevant.  number of allocations shouldn't have anything to do with the spawned process, since julia can't possibly track what it does"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b8f6ad5a-3105-448d-8b3f-96fa7e9846b9","type":"message","text":"I just didn't expect to see 2x difference from some systems to others.","user":"U6QGE7S86","ts":"1617896777.274100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fP1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I just didn't expect to see 2x difference from some systems to others."}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"d7b92a44-a281-472d-97d1-fe7a77ec0d5f","type":"message","text":"<@UC3SSCQRZ> you measure compilation time - gotta run it again.","user":"U6QGE7S86","ts":"1617896807.274300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wrB","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UC3SSCQRZ"},{"type":"text","text":" you measure compilation time - gotta run it again."}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b5c844be-af40-4294-b523-2bc3294869d6","type":"message","text":"that wasn't particularly clear from your example :stuck_out_tongue:","user":"UDB26738Q","ts":"1617896829.274500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Vg721","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that wasn't particularly clear from your example "},{"type":"emoji","name":"stuck_out_tongue"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"990083cc-9bdd-4977-ab10-361c0f40f631","type":"message","text":"No worries - I was just crowdsourcing some research. Thanks though!","user":"U6QGE7S86","ts":"1617896883.274700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G8=/G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No worries - I was just crowdsourcing some research. Thanks though!"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"3ddb5a37-2d82-476c-af70-6d842d5b6293","type":"message","text":"As you wish:\n```julia&gt; @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.061933 seconds (1.02 k allocations: 78.531 KiB)```","user":"UC3SSCQRZ","ts":"1617896906.274900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9XT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"As you wish:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.061933 seconds (1.02 k allocations: 78.531 KiB)"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86","reactions":[{"name":"clap::skin-tone-5","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"e77b5647-a35a-4abb-8286-8f365dfabe38","type":"message","text":"```julia&gt; @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.127439 seconds (735 allocations: 53.172 KiB)```","user":"UDB26738Q","ts":"1617896913.275100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DLxhS","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.127439 seconds (735 allocations: 53.172 KiB)"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86","reactions":[{"name":"clap::skin-tone-5","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"07b16114-2f12-413a-9a76-2c28fce1f238","type":"message","text":"```julia&gt; @time run(`$(primecount()) 1e14`);       \n3204941750802                                   \n  0.457219 seconds (355 allocations: 32.969 KiB)\n                                                \njulia&gt; versioninfo()                            \nJulia Version 1.6.0-rc1                         \nCommit a58bdd9010* (2021-02-06 15:49 UTC)       \nPlatform Info:                                  \n  OS: Linux (x86_64-linux-gnu)                  \n  CPU: Intel(R) Core(TM) i7-6600U CPU @ 2.60GHz \n  WORD_SIZE: 64                                 \n  LIBM: libopenlibm                             \n  LLVM: libLLVM-11.0.1 (ORCJIT, skylake)        \nEnvironment:                                    \n  JULIA_PKG_SERVER =                            \n  JULIA_NUM_THREADS = 4                         ```\ndo I win?","user":"UH24GRBLL","ts":"1617896934.275300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=X+q","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time run(`$(primecount()) 1e14`);       \n3204941750802                                   \n  0.457219 seconds (355 allocations: 32.969 KiB)\n                                                \njulia> versioninfo()                            \nJulia Version 1.6.0-rc1                         \nCommit a58bdd9010* (2021-02-06 15:49 UTC)       \nPlatform Info:                                  \n  OS: Linux (x86_64-linux-gnu)                  \n  CPU: Intel(R) Core(TM) i7-6600U CPU @ 2.60GHz \n  WORD_SIZE: 64                                 \n  LIBM: libopenlibm                             \n  LLVM: libLLVM-11.0.1 (ORCJIT, skylake)        \nEnvironment:                                    \n  JULIA_PKG_SERVER =                            \n  JULIA_NUM_THREADS = 4                         "}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\ndo I win?"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86","reactions":[{"name":"first_place_medal","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"960e5872-3efe-42a8-a39a-eb7fd2dc2df0","type":"message","text":"So far, here's a medal.","user":"U6QGE7S86","ts":"1617897041.275700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Yt1Nn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So far, here's a medal."}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"805b8595-a00f-47e4-985e-86c19685d39d","type":"message","text":"Highest number of allocations wins?","user":"UC3SSCQRZ","ts":"1617897094.276000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OTbr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Highest number of allocations wins?"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"c2d0e12c-1afa-489a-87bb-7512bfdccb0a","type":"message","text":"it's interesting that it varies this much","user":"UH24GRBLL","ts":"1617897099.276200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fY5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's interesting that it varies this much"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"1f63e41d-6918-4fe2-a191-879840748508","type":"message","text":"I'm guessing lowest, since that's usually better","user":"UH24GRBLL","ts":"1617897118.276400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JaFuz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm guessing lowest, since that's usually better"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"9410c739-e8db-4a58-b7b3-f905afdfc5d2","type":"message","text":"<@UH24GRBLL>, yeah, that's why I'm posting.","user":"U6QGE7S86","ts":"1617897118.276600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vuj","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UH24GRBLL"},{"type":"text","text":", yeah, that's why I'm posting."}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"da99ea8d-f6dc-4d7a-9137-66cafe9ddc7d","type":"message","text":":rolling_on_the_floor_laughing:","user":"UC3SSCQRZ","ts":"1617897136.276800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5DA6","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"rolling_on_the_floor_laughing"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"d4367071-35b8-4ed2-b51a-314be1337cf8","type":"message","text":"my runtime is horrible, though that may be simply due to the fact that I'm running WSL","user":"UH24GRBLL","ts":"1617897141.277000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dNRJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"my runtime is horrible, though that may be simply due to the fact that I'm running WSL"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"46dfba73-a6b7-4ba4-b710-70758f83d36e","type":"message","text":"WSL2, Debian:\n```julia&gt; using primecount_jll\n\njulia&gt; @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.064574 seconds (969 allocations: 75.766 KiB)```\ndoesn't change timing much.","user":"UC3SSCQRZ","ts":"1617897834.280000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sBD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"WSL2, Debian:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using primecount_jll\n\njulia> @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.064574 seconds (969 allocations: 75.766 KiB)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"doesn't change timing much."}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"7d7f2782-3a45-49d6-a93a-483cafed0916","type":"message","text":"factor 10 off of mine","user":"UH24GRBLL","ts":"1617898013.280300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"y7/WR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"factor 10 off of mine"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"8df8260b-7225-4d87-bc9c-3cc940de96d8","type":"message","text":"which makes sense, since your Debian is running in a proper VM with a proper linux kernel","user":"UH24GRBLL","ts":"1617898030.280500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SVkzX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which makes sense, since your Debian is running in a proper VM with a proper linux kernel"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"994c8446-5c66-417a-8e21-6b50c4c86ad9","type":"message","text":"while mine is just a thin shim to the NT kernel","user":"UH24GRBLL","ts":"1617898044.280700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iX=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"while mine is just a thin shim to the NT kernel"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"7ea74631-76cd-4926-bf37-d1619797919d","type":"message","text":"```julia&gt; @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.044713 seconds (21.30 k allocations: 1.259 MiB, 29.70% compilation time)\n\njulia&gt; versioninfo()\nJulia Version 1.6.0\nCommit f9720dc2eb (2021-03-24 12:55 UTC)\nPlatform Info:\n  OS: Linux (x86_64-pc-linux-gnu)\n  CPU: AMD Ryzen 9 5950X 16-Core Processor\n  WORD_SIZE: 64\n  LIBM: libopenlibm\n  LLVM: libLLVM-11.0.1 (ORCJIT, generic)```","user":"U011V2YN59N","ts":"1617899395.281400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CNH","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.044713 seconds (21.30 k allocations: 1.259 MiB, 29.70% compilation time)\n\njulia> versioninfo()\nJulia Version 1.6.0\nCommit f9720dc2eb (2021-03-24 12:55 UTC)\nPlatform Info:\n  OS: Linux (x86_64-pc-linux-gnu)\n  CPU: AMD Ryzen 9 5950X 16-Core Processor\n  WORD_SIZE: 64\n  LIBM: libopenlibm\n  LLVM: libLLVM-11.0.1 (ORCJIT, generic)"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"d60bcf1f-450c-4c27-bf96-496b7bd33605","type":"message","text":"I think this is the most so far","user":"U011V2YN59N","ts":"1617899414.281600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jOa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think this is the most so far"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"38ae84cd-ab08-4f8f-921b-ee001369317e","type":"message","text":"by quite a lot","user":"U011V2YN59N","ts":"1617899419.281800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pky9N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"by quite a lot"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"eca08e0d-1af7-40d0-bc20-aec24cde4157","type":"message","text":"Rerun it plz","user":"U6QGE7S86","ts":"1617899429.282000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GGuDP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Rerun it plz"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"0af32c9e-bb82-4a9e-92df-25c7b4e4b7b6","type":"message","text":"oh! sorry","user":"U011V2YN59N","ts":"1617899437.282200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GGjyC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh! sorry"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"500dc4d8-8a71-4a14-b343-b4453e6136b1","type":"message","text":"```julia&gt; @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.040445 seconds (909 allocations: 57.422 KiB)```","user":"U011V2YN59N","ts":"1617899454.282400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ycW","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time run(`$(primecount()) 1e14`);\n3204941750802\n  0.040445 seconds (909 allocations: 57.422 KiB)"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"9d259791-8315-485e-9f33-2337ad7d724f","type":"message","text":"still the most I think","user":"U011V2YN59N","ts":"1617899471.282600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e8EpT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"still the most I think"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"},{"client_msg_id":"614bb085-34c9-4af6-8293-c259ec87cceb","type":"message","text":"```@time run(`$(primecount()) 1e14`);\n3204941750802\n  0.178142 seconds (680 allocations: 45.750 KiB)\n\njulia&gt; versioninfo()\nJulia Version 1.6.0\nCommit f9720dc2eb (2021-03-24 12:55 UTC)\nPlatform Info:\n  OS: Linux (x86_64-pc-linux-gnu)\n  CPU: Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz\n  WORD_SIZE: 64\n  LIBM: libopenlibm\n  LLVM: libLLVM-11.0.1 (ORCJIT, skylake)```","user":"U01C3624SGJ","ts":"1617902732.286100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ek=","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@time run(`$(primecount()) 1e14`);\n3204941750802\n  0.178142 seconds (680 allocations: 45.750 KiB)\n\njulia> versioninfo()\nJulia Version 1.6.0\nCommit f9720dc2eb (2021-03-24 12:55 UTC)\nPlatform Info:\n  OS: Linux (x86_64-pc-linux-gnu)\n  CPU: Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz\n  WORD_SIZE: 64\n  LIBM: libopenlibm\n  LLVM: libLLVM-11.0.1 (ORCJIT, skylake)"}]}]}],"thread_ts":"1617896589.273300","parent_user_id":"U6QGE7S86"}]