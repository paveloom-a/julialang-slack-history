[{"client_msg_id":"a6430d79-8cfa-4d4c-b2f7-b9a82952de91","type":"message","text":"Is there a bug with type stability and splatting? For example,\n```@code_warntype vcat([rand(Float32, 5) for i in 1:3]...)```\nis not type stable.","user":"UQ93FBKL1","ts":"1615037418.473400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vl=Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a bug with type stability and splatting? For example,\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@code_warntype vcat([rand(Float32, 5) for i in 1:3]...)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"is not type stable."}]}]}],"thread_ts":"1615037418.473400","reply_count":9,"reply_users_count":3,"latest_reply":"1615120635.007800","reply_users":["B01J9QZ4SP8","U7HAYKY9X","UQ93FBKL1"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1615037421.473500","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1615037418.473400","parent_user_id":"UQ93FBKL1"},{"client_msg_id":"53c9ba12-fbd2-4b1c-8d9d-c6867de1c6d4","type":"message","text":"Not a bug, it's just that the length of an array (and therefore the number of elements of the splat) is not known at compile time","user":"U7HAYKY9X","ts":"1615037690.473700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MlK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not a bug, it's just that the length of an array (and therefore the number of elements of the splat) is not known at compile time"}]}]}],"thread_ts":"1615037418.473400","parent_user_id":"UQ93FBKL1"},{"client_msg_id":"ab9beeee-85f3-4f6b-be64-dae54a234097","type":"message","text":"If you splat e.g. a Tuple, it's no problem","user":"U7HAYKY9X","ts":"1615037745.473900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zNT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you splat e.g. a Tuple, it's no problem"}]}]}],"thread_ts":"1615037418.473400","parent_user_id":"UQ93FBKL1"},{"client_msg_id":"7dfa07d6-ed8e-49fd-a780-ba8881910445","type":"message","text":"You mean like `@code_warntype vcat((rand(Float32, 5) for i in 1:2)...)`?","user":"UQ93FBKL1","ts":"1615038044.474100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oGI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You mean like "},{"type":"text","text":"@code_warntype vcat((rand(Float32, 5) for i in 1:2)...)","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1615037418.473400","parent_user_id":"UQ93FBKL1"},{"client_msg_id":"c6cbfe44-ef40-4687-a819-1a3e4ec4d444","type":"message","text":"because that would also be type unstable","user":"UQ93FBKL1","ts":"1615038052.474300","team":"T68168MUP","edited":{"user":"UQ93FBKL1","ts":"1615038061.000000"},"blocks":[{"type":"rich_text","block_id":"iyo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"because that would also be type unstable"}]}]}],"thread_ts":"1615037418.473400","parent_user_id":"UQ93FBKL1"},{"client_msg_id":"117ef8ba-ec5d-4a33-b73b-bbe28ea06c10","type":"message","text":"Nope, the range also does not carry its length as a type param.\nBut something like vcat(ntuple (i -&gt; rand(Float32, 5), 2)...) should be","user":"U7HAYKY9X","ts":"1615039524.474800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h/B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nope, the range also does not carry its length as a type param.\nBut something like vcat(ntuple (i -> rand(Float32, 5), 2)...) should be"}]}]}],"thread_ts":"1615037418.473400","parent_user_id":"UQ93FBKL1"},{"client_msg_id":"0d2a6878-6e6a-49df-8f12-8fe627ab7c05","type":"message","text":"Thanks for your help. This brought me to a type instability when using `ntuple`. Maybe someone could explain why this would be type unstabel?\n```a = [0.0, 0.0]\nb = [1.0, 1.0]\n\nntuple(i -&gt; range(a[i], b[i], length = 500), Val(2))```\nI'm not sure why this is type unstable. I assume it has to do with indexing `a` and `b`?","user":"UQ93FBKL1","ts":"1615120377.007400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6/ujg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for your help. This brought me to a type instability when using "},{"type":"text","text":"ntuple","style":{"code":true}},{"type":"text","text":". Maybe someone could explain why this would be type unstabel?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"a = [0.0, 0.0]\nb = [1.0, 1.0]\n\nntuple(i -> range(a[i], b[i], length = 500), Val(2))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure why this is type unstable. I assume it has to do with indexing "},{"type":"text","text":"a","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"b","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1615037418.473400","parent_user_id":"UQ93FBKL1"},{"client_msg_id":"6016feac-aee9-402f-8786-6ad8e791d314","type":"message","text":"Yep, the values of a and b are not known at compile time","user":"U7HAYKY9X","ts":"1615120614.007600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eZn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yep, the values of a and b are not known at compile time"}]}]}],"thread_ts":"1615037418.473400","parent_user_id":"UQ93FBKL1"},{"client_msg_id":"fe7c3b19-4f83-49eb-adb4-9b9c322a897e","type":"message","text":"Because they are globals","user":"U7HAYKY9X","ts":"1615120635.007800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r08","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Because they are globals"}]}]}],"thread_ts":"1615037418.473400","parent_user_id":"UQ93FBKL1"}]