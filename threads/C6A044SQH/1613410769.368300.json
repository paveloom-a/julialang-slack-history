[{"client_msg_id":"4d6df4b3-0f9b-4b49-ada4-06b4a996cb0f","type":"message","text":"I have a 31x16 matrix and a 10x31x16 matrix. Is there a way to broadcast addition of the 31x16 matrix to each of the 10 columns of the 3D matrix?\n```(2d_mat,) .+ 3d_mat```\ndoesn't work nor does an array comprehension.","user":"U01AF6J1LTD","ts":"1613410769.368300","team":"T68168MUP","edited":{"user":"U01AF6J1LTD","ts":"1613413023.000000"},"blocks":[{"type":"rich_text","block_id":"TydO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a 31x16 matrix and a 10x31x16 matrix. Is there a way to broadcast addition of the 31x16 matrix to each of the 10 columns of the 3D matrix?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"(2d_mat,) .+ 3d_mat"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"doesn't work nor does an array comprehension."}]}]}],"thread_ts":"1613410769.368300","reply_count":14,"reply_users_count":5,"latest_reply":"1613425995.402000","reply_users":["B01J9QZ4SP8","UD0NS8PDF","U01AF6J1LTD","U013ETER2MN","U8D9768Q6"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1613410771.368400","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD"},{"client_msg_id":"b349e70c-9d69-47e6-9170-c71e838883f6","type":"message","text":"You probably want `reshape(mat, 1,size(mat)...) .+ three`","user":"UD0NS8PDF","ts":"1613410933.368900","team":"T68168MUP","edited":{"user":"UD0NS8PDF","ts":"1613411050.000000"},"blocks":[{"type":"rich_text","block_id":"gRlS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You probably want "},{"type":"text","text":"reshape(mat, 1,size(mat)...) .+ three","style":{"code":true}}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD","reactions":[{"name":"heart","users":["U01AF6J1LTD"],"count":1}]},{"client_msg_id":"7cc5f17d-d4d9-473f-83d4-c93fd2f9df64","type":"message","text":"There’s no automatic link between a container-of-arrays and one higher-dimensional array, of the sort your code suggests.","user":"UD0NS8PDF","ts":"1613411013.369100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nscs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There’s no automatic link between a container-of-arrays and one higher-dimensional array, of the sort your code suggests."}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD","reactions":[{"name":"heart","users":["U01AF6J1LTD"],"count":1}]},{"client_msg_id":"ebd08763-c59f-449e-846f-6491ae51652e","type":"message","text":"Thank you that worked! This is very similar to using np.newaxis in numpy so it makes sense to me","user":"U01AF6J1LTD","ts":"1613413006.372000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2xj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you that worked! This is very similar to using np.newaxis in numpy so it makes sense to me"}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD"},{"client_msg_id":"3fb5f485-629a-4d57-858a-2ecd8696e63d","type":"message","text":"Cool. The more literal translation BTW is something like `const newaxis = [CartesianIndex()]; view(mat, newaxis, :, :)`","user":"UD0NS8PDF","ts":"1613413289.374000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w6Gj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Cool. The more literal translation BTW is something like "},{"type":"text","text":"const newaxis = [CartesianIndex()]; view(mat, newaxis, :, :)","style":{"code":true}}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD","reactions":[{"name":"thumbsup_all","users":["U013ETER2MN"],"count":1}]},{"client_msg_id":"f7d0d178-3ff8-4ee6-b726-1b803191405e","type":"message","text":"Great thanks!","user":"U013ETER2MN","ts":"1613415272.374600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qTU8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Great thanks!"}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD"},{"client_msg_id":"5d3c30d9-64f3-4f08-a0c8-9f0674f95ae9","type":"message","text":"<@U013ETER2MN> In case you're interested, Michael Abbott has some really cool packages for doing this stuff with index notation which I think makes these sorts of operations very clear and concise. E.g. your code would be typed as\n```using Tullio\n\nA = randn(31, 16)\nB = randn(10, 31, 16)\n\n@tullio C[i, j, k] := A[j, k] + B[i, j, k]```","user":"U8D9768Q6","ts":"1613419871.387200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"emZ05","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U013ETER2MN"},{"type":"text","text":" In case you're interested, Michael Abbott has some really cool packages for doing this stuff with index notation which I think makes these sorts of operations very clear and concise. E.g. your code would be typed as\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Tullio\n\nA = randn(31, 16)\nB = randn(10, 31, 16)\n\n@tullio C[i, j, k] := A[j, k] + B[i, j, k]"}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD"},{"client_msg_id":"4655053c-876d-4160-8ff9-d0e9d34d85eb","type":"message","text":"I think this makes it really clear what parts of which matrices get added together.","user":"U8D9768Q6","ts":"1613419918.387400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HIr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think this makes it really clear what parts of which matrices get added together."}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD","reactions":[{"name":"thumbsup_all","users":["U013ETER2MN"],"count":1}]},{"client_msg_id":"8ba5fd0d-20c4-476e-bb2a-9c0633387d60","type":"message","text":"Tullio looks interesting. I will certainly try it. What would be the idiomatic Julia way, with no third party libraries? Looping over the arrays? Or is reshaping considered idiomatic?","user":"U013ETER2MN","ts":"1613421638.390400","team":"T68168MUP","edited":{"user":"U013ETER2MN","ts":"1613421939.000000"},"blocks":[{"type":"rich_text","block_id":"6LCO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Tullio looks interesting. I will certainly try it. What would be the idiomatic Julia way, with no third party libraries? Looping over the arrays? Or is reshaping considered idiomatic?"}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD"},{"client_msg_id":"bea6750f-919c-4dc3-af0b-c1412d79c9ef","type":"message","text":"Just realised that the person who first answered my question is the author of Tullio.jl :blush:","user":"U013ETER2MN","ts":"1613422055.390900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2vAw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Just realised that the person who first answered my question is the author of Tullio.jl "},{"type":"emoji","name":"blush"}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD"},{"client_msg_id":"0461387D-10C3-4FC8-B355-ABCF98043D9E","type":"message","text":"I’d say the idiomatic way to do things in Julia is to leverage its super powerful package ecosystem!","user":"U8D9768Q6","ts":"1613422192.392300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vUfpn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’d say the idiomatic way to do things in Julia is to leverage its super powerful package ecosystem!"}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD","reactions":[{"name":"thumbsup_all","users":["U013ETER2MN"],"count":1}]},{"client_msg_id":"27781015-0EC7-4D68-9AB1-419F0D4FC1EA","type":"message","text":"But if you don’t want to use packages, then yeah, a reshape would be fine ","user":"U8D9768Q6","ts":"1613422216.393100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rZNV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But if you don’t want to use packages, then yeah, a reshape would be fine "}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD"},{"client_msg_id":"c08996b1-2147-4a5d-91d3-56bbde14f1dd","type":"message","text":"Got it, thank you :slightly_smiling_face:","user":"U013ETER2MN","ts":"1613425286.397200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rbC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Got it, thank you "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD"},{"client_msg_id":"373b8d72-9327-4ba4-b774-c53f6ec00465","type":"message","text":"Heh, too many macros. The light-weight one here would be `@cast out[a,b,c] := mat[b,c] + three[a,b,c]` using TensorCast, which is precisely reshape + broadcast.","user":"UD0NS8PDF","ts":"1613425995.402000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uelHu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Heh, too many macros. The light-weight one here would be "},{"type":"text","text":"@cast out[a,b,c] := mat[b,c] + three[a,b,c]","style":{"code":true}},{"type":"text","text":" using TensorCast, which is precisely reshape + broadcast."}]}]}],"thread_ts":"1613410769.368300","parent_user_id":"U01AF6J1LTD","reactions":[{"name":"heart","users":["U01AF6J1LTD"],"count":1}]}]