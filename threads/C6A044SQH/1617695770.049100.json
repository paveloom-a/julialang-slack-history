[{"client_msg_id":"6dd72428-6976-4745-a637-19e337361cea","type":"message","text":"Does the fact that `Base.RefValue` is not exported mean users shouldn't use it? I use it all the time, for example by having \"mutable fields\" in immutable structs. If not, why not export it?","user":"U7HAYKY9X","ts":"1617695770.049100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NaD/F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does the fact that "},{"type":"text","text":"Base.RefValue","style":{"code":true}},{"type":"text","text":" is not exported mean users shouldn't use it? I use it all the time, for example by having \"mutable fields\" in immutable structs. If not, why not export it?"}]}]}],"thread_ts":"1617695770.049100","reply_count":9,"reply_users_count":3,"latest_reply":"1617700257.057000","reply_users":["USU9FRPEU","U7HAYKY9X","U6BNE7LTZ"],"is_locked":false,"subscribed":false},{"client_msg_id":"3efafe56-f40f-4ea3-8934-aed95f1f0171","type":"message","text":"```julia&gt; Ref(1)\nBase.RefValue{Int64}(1)```","user":"USU9FRPEU","ts":"1617696320.050500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qTdB","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> Ref(1)\nBase.RefValue{Int64}(1)"}]}]}],"thread_ts":"1617695770.049100","parent_user_id":"U7HAYKY9X"},{"client_msg_id":"e40c52b8-b2ce-480c-afe1-d7b59d744b4e","type":"message","text":"Ooops, I used it. I think you are just not meant to use it directly.","user":"USU9FRPEU","ts":"1617696353.051000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NzMA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ooops, I used it. I think you are just not meant to use it directly."}]}]}],"thread_ts":"1617695770.049100","parent_user_id":"U7HAYKY9X"},{"client_msg_id":"cae9e97c-4dd9-47d0-aa7d-30c0b81350ed","type":"message","text":"If you need to refer to the type, just use `Ref{Int64}`:\n```julia&gt; Base.RefValue{Int64} &lt;: Ref{Int64}\ntrue```","user":"USU9FRPEU","ts":"1617696414.052100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Lsu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you need to refer to the type, just use "},{"type":"text","text":"Ref{Int64}","style":{"code":true}},{"type":"text","text":":\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> Base.RefValue{Int64} <: Ref{Int64}\ntrue"}]}]}],"thread_ts":"1617695770.049100","parent_user_id":"U7HAYKY9X"},{"client_msg_id":"dc2ecfbf-9a96-4a25-baa0-9ad1032a4ae1","type":"message","text":"Hm, that's a shame. Not using it directly means you can't do stuff like\n```struct MostlyImmutable\n    x::RefValue{Int}\n    [ many other fields ]\nend```","user":"U7HAYKY9X","ts":"1617696477.052800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nVpb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hm, that's a shame. Not using it directly means you can't do stuff like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"struct MostlyImmutable\n    x::RefValue{Int}\n    [ many other fields ]\nend"}]}]}],"thread_ts":"1617695770.049100","parent_user_id":"U7HAYKY9X"},{"client_msg_id":"553526b8-ac8e-479a-be3e-174c1b009b6a","type":"message","text":"you can always just do\n```julia&gt; struct Foo\n         x::typeof(Ref{Int64}())\n       end```\n:smile:","user":"U6BNE7LTZ","ts":"1617697595.056100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jQ08","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you can always just do\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> struct Foo\n         x::typeof(Ref{Int64}())\n       end"}]},{"type":"rich_text_section","elements":[{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1617695770.049100","parent_user_id":"U7HAYKY9X"},{"client_msg_id":"c6796865-353b-4903-8f21-20957cdd1682","type":"message","text":"but honestly I think it's perfectly fine to use `RefValue` directly","user":"U6BNE7LTZ","ts":"1617697611.056300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G8R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but honestly I think it's perfectly fine to use "},{"type":"text","text":"RefValue","style":{"code":true}},{"type":"text","text":" directly"}]}]}],"thread_ts":"1617695770.049100","parent_user_id":"U7HAYKY9X","reactions":[{"name":"+1","users":["U7HAYKY9X","UKG4WF8PJ"],"count":2}]},{"client_msg_id":"37259a7c-b1a1-4503-892d-74d24cceae96","type":"message","text":"<https://github.com/JuliaLang/julia/issues/40369> - there must be some reason it was split into `RefValue` and `RefArray` internally, and only the abstract type exported.","user":"U7HAYKY9X","ts":"1617698017.056600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=pNqr","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/julia/issues/40369"},{"type":"text","text":" - there must be some reason it was split into "},{"type":"text","text":"RefValue","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"RefArray","style":{"code":true}},{"type":"text","text":" internally, and only the abstract type exported."}]}]}],"thread_ts":"1617695770.049100","parent_user_id":"U7HAYKY9X"},{"client_msg_id":"4d9d1ffb-7eaa-41ff-93c5-14ca5d8e931a","type":"message","text":"Here's the PR: <https://github.com/JuliaLang/julia/pull/26054>","user":"USU9FRPEU","ts":"1617699808.056800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k=NU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here's the PR: "},{"type":"link","url":"https://github.com/JuliaLang/julia/pull/26054"}]}]}],"thread_ts":"1617695770.049100","parent_user_id":"U7HAYKY9X"},{"client_msg_id":"5b297b17-acf5-41f9-8bda-d7a5143bad5e","type":"message","text":"Looks like RefValue and RefArray were separate before that PR, they just lived in `refpointer.jl`","user":"U7HAYKY9X","ts":"1617700257.057000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"O0V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looks like RefValue and RefArray were separate before that PR, they just lived in "},{"type":"text","text":"refpointer.jl","style":{"code":true}}]}]}],"thread_ts":"1617695770.049100","parent_user_id":"U7HAYKY9X"}]