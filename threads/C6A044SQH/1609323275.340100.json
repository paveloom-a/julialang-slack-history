[{"client_msg_id":"8ce3abbd-a1bc-4a18-9813-24bc4349f66d","type":"message","text":"Hi, I am using do end block syntax to pass function which can process each record in a file, can I somehow stop like break in a loop ? also do i need to always use global to see the parameter read after block finishes?","user":"UE0Q72VV0","ts":"1609323275.340100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"a0Q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi, I am using do end block syntax to pass function which can process each record in a file, can I somehow stop like break in a loop ? also do i need to always use global to see the parameter read after block finishes?"}]}]}],"thread_ts":"1609323275.340100","reply_count":7,"reply_users_count":2,"latest_reply":"1609325450.347600","reply_users":["U7HAYKY9X","UE0Q72VV0"],"subscribed":false},{"client_msg_id":"045cea31-2ff8-418d-8a89-f2d946b198c1","type":"message","text":"You can return, since it's a function.","user":"U7HAYKY9X","ts":"1609323416.340200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Nrc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can return, since it's a function."}]}]}],"thread_ts":"1609323275.340100","parent_user_id":"UE0Q72VV0"},{"client_msg_id":"fa75522c-583f-4efa-9f06-5d708a4c152e","type":"message","text":"Not sure what you mean by the last bit. Can you give a short example?","user":"U7HAYKY9X","ts":"1609323432.340400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GOr5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not sure what you mean by the last bit. Can you give a short example?"}]}]}],"thread_ts":"1609323275.340100","parent_user_id":"UE0Q72VV0"},{"client_msg_id":"ee64b1eb-732a-45f3-98f4-bee3ffe6033b","type":"message","text":"```using FASTX, CodecZlib\nfunction process_fastagz(f, pathgz)\n    reader = FASTA.Reader(GzipDecompressorStream(open(pathgz)))\n    for record in reader\n        f(record)\n    end\n    close(reader)\nend\n\nx = process_fastagz(\"/home/mateusz/Projects/Test/sequences.fasta.gz\") do record\n    return sequence(record)\nend```\nI want x to be the first record, and that's it. But it's nothing.","user":"UE0Q72VV0","ts":"1609323718.340600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z5F2","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using FASTX, CodecZlib\nfunction process_fastagz(f, pathgz)\n    reader = FASTA.Reader(GzipDecompressorStream(open(pathgz)))\n    for record in reader\n        f(record)\n    end\n    close(reader)\nend\n\nx = process_fastagz(\"/home/mateusz/Projects/Test/sequences.fasta.gz\") do record\n    return sequence(record)\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I want x to be the first record, and that's it. But it's nothing."}]}]}],"thread_ts":"1609323275.340100","parent_user_id":"UE0Q72VV0"},{"client_msg_id":"9de15392-043b-4c9c-bbb8-b46820c898a8","type":"message","text":"So a few things:\n• In the do block, the function works on the reader, not the record. (i.e. `do reader` , not `do record` )\n• You don't return anything from `process_fastagz` ","user":"U7HAYKY9X","ts":"1609324190.340800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B4fjD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So a few things:\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In the do block, the function works on the reader, not the record. (i.e. "},{"type":"text","text":"do reader","style":{"code":true}},{"type":"text","text":" , not "},{"type":"text","text":"do record","style":{"code":true}},{"type":"text","text":" )"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"You don't return anything from "},{"type":"text","text":"process_fastagz","style":{"code":true}},{"type":"text","text":" "}]}],"style":"bullet","indent":0}]}],"thread_ts":"1609323275.340100","parent_user_id":"UE0Q72VV0"},{"client_msg_id":"7f37e22e-0b9b-4df4-9667-d21abfb43dc8","type":"message","text":"You can do something like this:\n```function first_record(path::String)\n    reader = FASTA.Reader(GzipDecompressorStream(open(path)))\n    record = first(iterate(reader))\n    close(reader)\n    record\nend```\nThere is currently no good way of combining a Reader with another IO type object and the do syntax.","user":"U7HAYKY9X","ts":"1609324290.341000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Fk1f","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can do something like this:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function first_record(path::String)\n    reader = FASTA.Reader(GzipDecompressorStream(open(path)))\n    record = first(iterate(reader))\n    close(reader)\n    record\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"There is currently no good way of combining a Reader with another IO type object and the do syntax."}]}]}],"thread_ts":"1609323275.340100","parent_user_id":"UE0Q72VV0"},{"client_msg_id":"b60566d5-1f8a-4ec1-b97c-02407bf0346d","type":"message","text":"Big thanks! :slightly_smiling_face:","user":"UE0Q72VV0","ts":"1609324605.343200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5l8av","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Big thanks! "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1609323275.340100","parent_user_id":"UE0Q72VV0"},{"client_msg_id":"aa1a42c0-ad8a-4839-b2a5-77baf7c1b545","type":"message","text":"PR for adding the functionality to do this: <https://github.com/BioJulia/BioGenerics.jl/pull/5>","user":"U7HAYKY9X","ts":"1609325450.347600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yrHf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"PR for adding the functionality to do this: "},{"type":"link","url":"https://github.com/BioJulia/BioGenerics.jl/pull/5"}]}]}],"thread_ts":"1609323275.340100","parent_user_id":"UE0Q72VV0","reactions":[{"name":"+1","users":["UE0Q72VV0"],"count":1}]}]