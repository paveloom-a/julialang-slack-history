[{"client_msg_id":"fc5d55a3-258f-4e70-beb3-deacc573679d","type":"message","text":"Is there a way to test a single `@testset` ?\n\nI added a new test to a package and its failing, I want to be able to _just_ run that particular test, other than modifying `runtests.jl` to just run that test is there a way to do so through the CLI, I'm currently running my tests like so:\n\n```julia --project -e 'import Pkg; Pkg.test()'```","user":"U01QETXBR4J","ts":"1617418814.317700","team":"T68168MUP","edited":{"user":"U01QETXBR4J","ts":"1617418861.000000"},"blocks":[{"type":"rich_text","block_id":"zQtz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way to test a single "},{"type":"text","text":"@testset","style":{"code":true}},{"type":"text","text":" ?\n\nI added a new test to a package and its failing, I want to be able to _just_ run that particular test, other than modifying "},{"type":"text","text":"runtests.jl","style":{"code":true}},{"type":"text","text":" to just run that test is there a way to do so through the CLI, I'm currently running my tests like so:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia --project -e 'import Pkg; Pkg.test()'"}]}]}],"thread_ts":"1617418814.317700","reply_count":7,"reply_users_count":1,"latest_reply":"1617426041.321600","reply_users":["U01QETXBR4J"],"is_locked":false,"subscribed":false},{"client_msg_id":"d4e2ae47-80f6-4d82-8c18-a2ee8935fd41","type":"message","text":"Think this might be how to do it; just found it, I'll report back if I'm able to filter out tests:\n\n<https://github.com/JuliaLang/Pkg.jl/pull/1226>","user":"U01QETXBR4J","ts":"1617418948.318200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jT5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Think this might be how to do it; just found it, I'll report back if I'm able to filter out tests:\n\n"},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/1226"}]}]}],"thread_ts":"1617418814.317700","parent_user_id":"U01QETXBR4J"},{"client_msg_id":"a5be4ebd-07a7-4c99-8bba-73f4a1f2fe43","type":"message","text":"I tried to run just `new test` but it continued to run all of them:\n```julia --project -e 'import Pkg; Pkg.test(;test_args=[\"new test\"])'```","user":"U01QETXBR4J","ts":"1617419994.319800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mV5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tried to run just "},{"type":"text","text":"new test","style":{"code":true}},{"type":"text","text":" but it continued to run all of them:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia --project -e 'import Pkg; Pkg.test(;test_args=[\"new test\"])'"}]}]}],"thread_ts":"1617418814.317700","parent_user_id":"U01QETXBR4J"},{"client_msg_id":"7dc59fac-980d-4cfc-a266-60391c17d1d5","type":"message","text":"Even when inside the REPL, `Pkg` won't just test test sets passed through `test_args` , i.e.:\n\n```] activate .```\nthen\n\n```julia&gt; import Pkg; Pkg.test(test_args=[\"new test\"])```\nMy test is defined in the files as:\n```@testset \"new test\" begin\n   @test 1 == 2\nend```","user":"U01QETXBR4J","ts":"1617421986.320600","team":"T68168MUP","edited":{"user":"U01QETXBR4J","ts":"1617422061.000000"},"blocks":[{"type":"rich_text","block_id":"ortb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Even when inside the REPL, "},{"type":"text","text":"Pkg","style":{"code":true}},{"type":"text","text":" won't just test test sets passed through "},{"type":"text","text":"test_args","style":{"code":true}},{"type":"text","text":" , i.e.:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"] activate ."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"then\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> import Pkg; Pkg.test(test_args=[\"new test\"])"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nMy test is defined in the files as:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@testset \"new test\" begin\n   @test 1 == 2\nend"}]}]}],"thread_ts":"1617418814.317700","parent_user_id":"U01QETXBR4J"},{"client_msg_id":"63d04abe-7434-4f23-8201-1c1f2636b5fe","type":"message","text":"Ah, I missed this little remark in the PR initial comment:\n\n&gt;  This pull request only adds the functionality for passing the command line arguments to `test/runtests.jl`. It is up to the author of a package to add the logic for processing the command line arguments inside their `test/runtests.jl` file. However, this should be relatively straightforward. For example, if this is the current `test/runtests.jl` file:","user":"U01QETXBR4J","ts":"1617423289.321000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"y7G2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, I missed this little remark in the PR initial comment:\n\n"}]},{"type":"rich_text_quote","elements":[{"type":"text","text":" This pull request only adds the functionality for passing the command line arguments to "},{"type":"text","text":"test/runtests.jl","style":{"code":true}},{"type":"text","text":". It is up to the author of a package to add the logic for processing the command line arguments inside their "},{"type":"text","text":"test/runtests.jl","style":{"code":true}},{"type":"text","text":" file. However, this should be relatively straightforward. For example, if this is the current "},{"type":"text","text":"test/runtests.jl","style":{"code":true}},{"type":"text","text":" file:"}]}]}],"thread_ts":"1617418814.317700","parent_user_id":"U01QETXBR4J"},{"client_msg_id":"a015e270-b9d3-4b88-b15a-4801908c48d7","type":"message","text":"I was able to get it working like so (simplified setup):\n\n```using MyPackage, Test\n\nif isempty(ARGS) || \"all\" in ARGS\n\tall_tests = true\nelse\n\tall_tests = false\nend\n\nif all_tests || \"simple\" in ARGS\n  @testset \"simple\" begin\n    @test 1 == 1\n  end\nend```\nTo _just_ test `simple` I run it like so:\n```julia --project -e 'import Pkg;Pkg.test(test_args=[\"simple\"])'```\nTo test _all_ packages I pass no args or use the special `\"all\"` name:\n```julia --project -e 'import Pkg;Pkg.test(test_args=[\"all\"])'\n\njulia --project -e 'import Pkg;Pkg.test()'```","user":"U01QETXBR4J","ts":"1617423991.321200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9zFZv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was able to get it working like so (simplified setup):\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using MyPackage, Test\n\nif isempty(ARGS) || \"all\" in ARGS\n\tall_tests = true\nelse\n\tall_tests = false\nend\n\nif all_tests || \"simple\" in ARGS\n  @testset \"simple\" begin\n    @test 1 == 1\n  end\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"To "},{"type":"text","text":"just ","style":{"italic":true}},{"type":"text","text":"test "},{"type":"text","text":"simple","style":{"code":true}},{"type":"text","text":" I run it like so:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia --project -e 'import Pkg;Pkg.test(test_args=[\"simple\"])'"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"To test "},{"type":"text","text":"all ","style":{"italic":true}},{"type":"text","text":"packages I pass no args or use the special "},{"type":"text","text":"\"all\"","style":{"code":true}},{"type":"text","text":" name:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia --project -e 'import Pkg;Pkg.test(test_args=[\"all\"])'\n\njulia --project -e 'import Pkg;Pkg.test()'"}]}]}],"thread_ts":"1617418814.317700","parent_user_id":"U01QETXBR4J"},{"client_msg_id":"d7ad78d0-af27-46c3-baca-1890d0706f23","type":"message","text":"I created this small Zshell function to simplify running the tests:\n\n```\nfunction jltest {\n    if [ $# -eq 0 ]; then\n        julia --project -e \"import Pkg;Pkg.test()\"\n        return $?\n\tfi\n\n\tlocal quoted_test_names=\"\"\n\tfor arg in \"${@}\"; do\n\t\tquoted_test_names=\"$quoted_test_names\\\"$arg\\\"\"\n\t\tif [ $# -gt 1 ]; then\n\t\t\tquoted_test_names=\"$quoted_test_names, \"\n\t\tfi\n\tdone\n\n\tjulia --project -e \"import Pkg;Pkg.test(test_args=[$quoted_test_names])\"\n}```","user":"U01QETXBR4J","ts":"1617425982.321400","team":"T68168MUP","edited":{"user":"U01QETXBR4J","ts":"1617426085.000000"},"blocks":[{"type":"rich_text","block_id":"=L/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I created this small Zshell function to simplify running the tests:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\nfunction jltest {\n    if [ $# -eq 0 ]; then\n        julia --project -e \"import Pkg;Pkg.test()\"\n        return $?\n\tfi\n\n\tlocal quoted_test_names=\"\"\n\tfor arg in \"${@}\"; do\n\t\tquoted_test_names=\"$quoted_test_names\\\"$arg\\\"\"\n\t\tif [ $# -gt 1 ]; then\n\t\t\tquoted_test_names=\"$quoted_test_names, \"\n\t\tfi\n\tdone\n\n\tjulia --project -e \"import Pkg;Pkg.test(test_args=[$quoted_test_names])\"\n}"}]}]}],"thread_ts":"1617418814.317700","parent_user_id":"U01QETXBR4J"},{"client_msg_id":"810397f8-64fb-4b3f-8583-cb3fda9e0fde","type":"message","text":"Usage:\n```jltest all # Run all tests\njltest     # Run all tests\njltest a   # Run test \"a\"\njltest a b # Run tests \"a\" and \"b\"```","user":"U01QETXBR4J","ts":"1617426041.321600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AU3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Usage:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"jltest all # Run all tests\njltest     # Run all tests\njltest a   # Run test \"a\"\njltest a b # Run tests \"a\" and \"b\""}]}]}],"thread_ts":"1617418814.317700","parent_user_id":"U01QETXBR4J"}]