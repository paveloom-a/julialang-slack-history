[{"client_msg_id":"6dbe7980-2c25-4570-8d11-2085afd411b0","type":"message","text":"On OSX 10.15.7 I have problems with any package that evokes the FFMPEG.jl, e.g. making a recording w/ Javis.jl or Makie.jl. Any thoughts?\n```record(figure, \"f16.mkv\", 1:100; framerate = 10) do trans\n           GLMakie.translate!(obj, trans)\n       end\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0\nERROR: LoadError: IOError: write: broken pipe (EPIPE)```\nIf I `./ ffmpeg`  or the artifact directly I get\n```dyld: Library not loaded: @rpath/libass.9.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/./ffmpeg\n  Reason: image not found```","user":"UP95S4864","ts":"1617806411.149800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wSWV/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"On OSX 10.15.7 I have problems with any package that evokes the FFMPEG.jl, e.g. making a recording w/ Javis.jl or Makie.jl. Any thoughts?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"record(figure, \"f16.mkv\", 1:100; framerate = 10) do trans\n           GLMakie.translate!(obj, trans)\n       end\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0\nERROR: LoadError: IOError: write: broken pipe (EPIPE)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"If I "},{"type":"text","text":"./ ffmpeg","style":{"code":true}},{"type":"text","text":"  or the artifact directly I get\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"dyld: Library not loaded: @rpath/libass.9.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/./ffmpeg\n  Reason: image not found"}]}]}],"thread_ts":"1617806411.149800","reply_count":48,"reply_users_count":3,"latest_reply":"1617843508.234300","reply_users":["US64J0NPQ","UP95S4864","UDB26738Q"],"is_locked":false,"subscribed":false},{"client_msg_id":"e16d4bfa-8356-4000-ad79-ad78d6d99969","type":"message","text":"Not an answer <@UP95S4864>, but perhaps ask also in <#CB1R90P8R|image-processing> and/or <#CFLGP7EQ7|video>. If you run into more issues with Javis, let me know.  :load:","user":"US64J0NPQ","ts":"1617809688.154000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KE2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not an answer "},{"type":"user","user_id":"UP95S4864"},{"type":"text","text":", but perhaps ask also in "},{"type":"channel","channel_id":"CB1R90P8R"},{"type":"text","text":" and/or "},{"type":"channel","channel_id":"CFLGP7EQ7"},{"type":"text","text":". If you run into more issues with Javis, let me know.  "},{"type":"emoji","name":"load"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"7dbacc65-62c6-4695-ba6c-eae68afc184a","type":"message","text":"Thanks <@US64J0NPQ>. My problem is definitely upstream of Javis","user":"UP95S4864","ts":"1617810400.154300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yrAX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks "},{"type":"user","user_id":"US64J0NPQ"},{"type":"text","text":". My problem is definitely upstream of Javis"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864","reactions":[{"name":"+1","users":["US64J0NPQ"],"count":1}]},{"client_msg_id":"5e4e937e-0729-42f4-9db5-855be6d8fc0b","type":"message","text":"<@UP95S4864> can you please show the output of\n```using Libdl\nfilter!(lib -&gt; occursin(\"bz2\", lib), dllist())```\nafter you get the error?","user":"UDB26738Q","ts":"1617811780.162200","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1617811788.000000"},"blocks":[{"type":"rich_text","block_id":"rAb","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UP95S4864"},{"type":"text","text":" can you please show the output of\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Libdl\nfilter!(lib -> occursin(\"bz2\", lib), dllist())"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"after you get the error?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"4be26181-ed84-4c1d-a0e8-c58e41ac507b","type":"message","text":"```2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\"```","user":"UP95S4864","ts":"1617812924.170900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bDq6u","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\""}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"1dfb68ab-a250-4b39-8966-24a22510f872","type":"message","text":"so system libbz2 is being pulled by something, it shouldn't.  does the error happen also in a fresh julia session?","user":"UDB26738Q","ts":"1617813105.171500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0Uq49","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so system libbz2 is being pulled by something, it shouldn't.  does the error happen also in a fresh julia session?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"8aa38909-4e48-48dc-9501-89db597bee36","type":"message","text":"In a fresh session:\n```using Libdl\nfilter!(lib -&gt; occursin(\"bz2\", lib), dllist())\n\nusing GLMakie\nfig = GLMakie.Figure()\nrecord(fig, \"mygif.gif\", 1:100;) do i\n    GLMakie.scatter(rand(5),rand(5))\nend\n\nfilter!(lib -&gt; occursin(\"bz2\", lib), dllist())```\n```1-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0\nERROR: LoadError: IOError: write: broken pipe (EPIPE)\nStacktrace:...\n\n2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\"```","user":"UP95S4864","ts":"1617813510.172300","team":"T68168MUP","edited":{"user":"UP95S4864","ts":"1617813788.000000"},"blocks":[{"type":"rich_text","block_id":"66vEH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In a fresh session:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Libdl\nfilter!(lib -> occursin(\"bz2\", lib), dllist())\n\nusing GLMakie\nfig = GLMakie.Figure()\nrecord(fig, \"mygif.gif\", 1:100;) do i\n    GLMakie.scatter(rand(5),rand(5))\nend\n\nfilter!(lib -> occursin(\"bz2\", lib), dllist())"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"1-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0\nERROR: LoadError: IOError: write: broken pipe (EPIPE)\nStacktrace:...\n\n2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\""}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"5ea4cb4b-0346-46cd-ac89-71eb30cb5d1a","type":"message","text":"so `GLMakie` is pulling it?","user":"UDB26738Q","ts":"1617813558.172500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rgYD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so "},{"type":"text","text":"GLMakie","style":{"code":true}},{"type":"text","text":" is pulling it?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"f4a1452e-6c55-4e54-9092-58dbdbb42dff","type":"message","text":"Dependencies look like `GLMakie &lt;- AbstractPlotting &lt;- FFMPEG`","user":"UP95S4864","ts":"1617813661.172700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mQ6JS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Dependencies look like "},{"type":"text","text":"GLMakie <- AbstractPlotting <- FFMPEG","style":{"code":true}}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"5ebc0d0e-67b4-43b5-b323-466c264f4c6d","type":"message","text":"If I do a fresh julia and call FFMEG directly I get the same","user":"UP95S4864","ts":"1617813690.172900","team":"T68168MUP","edited":{"user":"UP95S4864","ts":"1617814125.000000"},"blocks":[{"type":"rich_text","block_id":"lXrYz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If I do a fresh julia and call FFMEG directly I get the same"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"9b0ebf97-b214-4aab-a0e1-6e8ef9f8af83","type":"message","text":"```using FFMPEG\nFFMPEG.exe(\"-version\")\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0```","user":"UP95S4864","ts":"1617813712.173100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dmLx","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using FFMPEG\nFFMPEG.exe(\"-version\")\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"4f98b9a4-4baa-4033-ade2-3fcb6265aaad","type":"message","text":"```filter!(lib -&gt; occursin(\"bz2\", lib), dllist())\n2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n \"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\"```","user":"UP95S4864","ts":"1617813763.173500","team":"T68168MUP","edited":{"user":"UP95S4864","ts":"1617813772.000000"},"blocks":[{"type":"rich_text","block_id":"FrBEX","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"filter!(lib -> occursin(\"bz2\", lib), dllist())\n2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n \"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\""}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"7fb46fba-c02c-4f05-a5ee-0794fb809ec4","type":"message","text":"<@UDB26738Q> Any more thoughts on this?","user":"UP95S4864","ts":"1617825999.194400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Bzg","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":" Any more thoughts on this?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"a1675f29-3500-49a8-9c11-04b7070eead4","type":"message","text":"something is pulling system's libbz2, and that's the issue, but can't tell why.  what's the value of the environment variable `DYLD_FALLBACK_LIBRARY_PATH`?","user":"UDB26738Q","ts":"1617828545.208100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kefO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"something is pulling system's libbz2, and that's the issue, but can't tell why.  what's the value of the environment variable "},{"type":"text","text":"DYLD_FALLBACK_LIBRARY_PATH","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"6294bf1f-b643-487b-8ebc-d263fb6a83ba","type":"message","text":"```ENV[\"DYLD_FALLBACK_LIBRARY_PATH\"]\nERROR: KeyError: key \"DYLD_FALLBACK_LIBRARY_PATH\" not found```","user":"UP95S4864","ts":"1617829493.209700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XmH","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ENV[\"DYLD_FALLBACK_LIBRARY_PATH\"]\nERROR: KeyError: key \"DYLD_FALLBACK_LIBRARY_PATH\" not found"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"c0cb5af8-d143-4308-9e2d-7c3f9ffc01a7","type":"message","text":"is `/usr/lib/libbz2.1.0.dylib` in `filter!(lib -&gt; occursin(\"bz2\", lib), dllist())` the issue?","user":"UP95S4864","ts":"1617829583.210700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k/WA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is "},{"type":"text","text":"/usr/lib/libbz2.1.0.dylib","style":{"code":true}},{"type":"text","text":" in "},{"type":"text","text":"filter!(lib -> occursin(\"bz2\", lib), dllist())","style":{"code":true}},{"type":"text","text":" the issue?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"f5a3567c-9a59-433e-b2d5-873f37de9c71","type":"message","text":"it is, it shouldn't be loaded","user":"UDB26738Q","ts":"1617829602.211000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"75I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is, it shouldn't be loaded"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"2aa5b3dd-0f82-4f9f-8533-ccef2bf35235","type":"message","text":"could it be anything in my startup.jl?\n```import REPL\nBase.atreplinit() do repl\n    # make the ; shell mode sticky\n    !isdefined(repl, :interface) &amp;&amp; (repl.interface = REPL.setup_interface(repl))\n    repl.interface.modes[2].sticky=true\n\n    try\n        @eval using OhMyREPL\n    catch e\n        @warn \"error while importing OhMyREPL\" e\n    end\nend\n\ntry\n    @eval using Revise\n    # Turn on Revise's automatic-evaluation behavior\n    Revise.async_steal_repl_backend()\ncatch err\n    @warn \"Could not load Revise.\"\nend\n\nENV[\"JULIA_EDITOR\"] = \"code\"```","user":"UP95S4864","ts":"1617829867.213900","team":"T68168MUP","edited":{"user":"UP95S4864","ts":"1617829886.000000"},"blocks":[{"type":"rich_text","block_id":"EG6D4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"could it be anything in my startup.jl?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"import REPL\nBase.atreplinit() do repl\n    # make the ; shell mode sticky\n    !isdefined(repl, :interface) && (repl.interface = REPL.setup_interface(repl))\n    repl.interface.modes[2].sticky=true\n\n    try\n        @eval using OhMyREPL\n    catch e\n        @warn \"error while importing OhMyREPL\" e\n    end\nend\n\ntry\n    @eval using Revise\n    # Turn on Revise's automatic-evaluation behavior\n    Revise.async_steal_repl_backend()\ncatch err\n    @warn \"Could not load Revise.\"\nend\n\nENV[\"JULIA_EDITOR\"] = \"code\""}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"c7ac5d3e-9b9f-4871-a051-532c2a6e09a2","type":"message","text":"it doesn't look like it, but you can rule it out by trying to reproduce the error when running julia with `--startup-file=no`","user":"UDB26738Q","ts":"1617829935.214200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Bvv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it doesn't look like it, but you can rule it out by trying to reproduce the error when running julia with "},{"type":"text","text":"--startup-file=no","style":{"code":true}}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"4fb59006-bce3-4dd0-8bfd-fbe4fcbb0784","type":"message","text":"no luck","user":"UP95S4864","ts":"1617830035.214400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ibE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no luck"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"cf1e377e-bf82-4b21-bcdc-9034994cb766","type":"message","text":"the fact that it happens in a fresh session is worrying, usually python dependencies would pull in system libraries","user":"UDB26738Q","ts":"1617830083.214900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UTl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the fact that it happens in a fresh session is worrying, usually python dependencies would pull in system libraries"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"eebf12d7-1906-4b1f-9701-e01c5a69c39e","type":"message","text":"If it matters, I am on v1.6","user":"UP95S4864","ts":"1617830358.215300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Gbf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If it matters, I am on v1.6"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"dc3a3a72-4485-4252-a35a-a910728a5d02","type":"message","text":"I also did `mv ~/.julia ~/.julia_obe`  so try to simulate a clean slate, also with no luck","user":"UP95S4864","ts":"1617830659.215500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MNh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I also did "},{"type":"text","text":"mv ~/.julia ~/.julia_obe","style":{"code":true}},{"type":"text","text":"  so try to simulate a clean slate, also with no luck"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"9278acf5-b15b-4d60-91af-94c8344d02e5","type":"message","text":"can you please show the output of\n```using Libdl\nprintln.(dllist());```\nas soon as you start julia and after you get the error?","user":"UDB26738Q","ts":"1617835828.225700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/2ONp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you please show the output of\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Libdl\nprintln.(dllist());"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"as soon as you start julia and after you get the error?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"9e739525-3b79-4ea4-bbb9-9cedb9a3ff80","type":"message","text":"It is too long to paste here","user":"UP95S4864","ts":"1617838997.229200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jNPeI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It is too long to paste here"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"656a372c-b9f4-42c9-a50b-39f18dae9033","type":"message","text":"<https://gist.github.com/>","user":"UDB26738Q","ts":"1617839033.229400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qwh","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://gist.github.com/"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"c82f97bc-b30c-462f-91c4-00838250313c","type":"message","text":"Thanks. <https://gist.github.com/agerlach/6b84e468b9b9c488fa04b26a672a2e83>","user":"UP95S4864","ts":"1617839147.229600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ghj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks. "},{"type":"link","url":"https://gist.github.com/agerlach/6b84e468b9b9c488fa04b26a672a2e83"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"a91197a8-d4f3-435a-9b00-bc9eeefd658f","type":"message","text":"I take this is after you load `FFMPEG.jl`, but I don't see the one after you start Julia.  but there are a bunch of system libraries that shouldn't be loaded, like libxml2 and liblzma, in addition to libz2","user":"UDB26738Q","ts":"1617839291.229800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BoIp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I take this is after you load "},{"type":"text","text":"FFMPEG.jl","style":{"code":true}},{"type":"text","text":", but I don't see the one after you start Julia.  but there are a bunch of system libraries that shouldn't be loaded, like libxml2 and liblzma, in addition to libz2"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"129877d5-823d-4c71-89ad-178a0c93b57a","type":"message","text":"I really don't see how that could happen with just `FFMPEG.jl` in a fresh Julia session, unless you do something else","user":"UDB26738Q","ts":"1617839323.230000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BGYUV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I really don't see how that could happen with just "},{"type":"text","text":"FFMPEG.jl","style":{"code":true}},{"type":"text","text":" in a fresh Julia session, unless you do something else"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"fa5e6cdd-59a0-4987-b7af-27be43a18944","type":"message","text":"already `/usr/lib/libz.1.dylib` is wrong, and it's very strange because that's one of the first libraries that julia should load at startup","user":"UDB26738Q","ts":"1617839368.230200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lceg+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"already "},{"type":"text","text":"/usr/lib/libz.1.dylib","style":{"code":true}},{"type":"text","text":" is wrong, and it's very strange because that's one of the first libraries that julia should load at startup"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"8b374028-8392-4430-afef-b8ae2dda3a9f","type":"message","text":"Maybe I misunderstood this was","user":"UP95S4864","ts":"1617839529.230400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GDFtV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe I misunderstood this was"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"d5a4a72c-1172-49f6-857a-19c04ddd7c65","type":"message","text":"this is useful, but I wanted to see both of them :slightly_smiling_face:","user":"UDB26738Q","ts":"1617839553.230600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qy3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is useful, but I wanted to see both of them "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"ba9198b8-a86c-462e-8cdf-44020231bd76","type":"message","text":"Got it!","user":"UP95S4864","ts":"1617839563.230800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kJYkU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Got it!"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"8c665487-f6ef-4881-9184-2ccc926e2feb","type":"message","text":"also, what's the value of the environment variable `DYLD_LIBRARY_PATH`?  before I asked you about `DYLD_FALLBACK_LIBRARY_PATH`","user":"UDB26738Q","ts":"1617839623.231000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yIfA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"also, what's the value of the environment variable "},{"type":"text","text":"DYLD_LIBRARY_PATH","style":{"code":true}},{"type":"text","text":"?  before I asked you about "},{"type":"text","text":"DYLD_FALLBACK_LIBRARY_PATH","style":{"code":true}}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"65d2a3e1-83b4-45f8-a6b2-1d3854713921","type":"message","text":"The gist above was after\n```using FFMPEG\nFFMPEG.exe(\"-version\")\nusing Libdl\nprintln.(dllist());```\nthis is after\n```using Libdl\nprintln.(dllist());```","user":"UP95S4864","ts":"1617839716.231200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BnsK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The gist above was after\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using FFMPEG\nFFMPEG.exe(\"-version\")\nusing Libdl\nprintln.(dllist());"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"this is after\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Libdl\nprintln.(dllist());"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"3b210de6-47d1-4d72-b8c9-bb8d055f0c39","type":"message","text":"<https://gist.github.com/agerlach/748f5d7618dde24eff7af80541d34484>","user":"UP95S4864","ts":"1617839729.231400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pk8rG","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://gist.github.com/agerlach/748f5d7618dde24eff7af80541d34484"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"0577d371-3347-45ac-9d77-9a9eff5c5e97","type":"message","text":"```ENV[\"DYLD_LIBRARY_PATH\"]\n\":/Users/me/LocalInstall/lib\"```","user":"UP95S4864","ts":"1617839750.231600","team":"T68168MUP","edited":{"user":"UP95S4864","ts":"1617839773.000000"},"blocks":[{"type":"rich_text","block_id":"rDE1w","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ENV[\"DYLD_LIBRARY_PATH\"]\n\":/Users/me/LocalInstall/lib\""}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"1df497d0-a07e-453a-999c-758570937194","type":"message","text":"what if you start julia with\n```DYLD_LIBRARY_PATH=\"\" julia```\n?","user":"UDB26738Q","ts":"1617839813.231900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r8w4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what if you start julia with\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"DYLD_LIBRARY_PATH=\"\" julia"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"d45eae46-5599-43df-8745-d617ee218a24","type":"message","text":"looks the same\n```julia&gt; ENV[\"DYLD_LIBRARY_PATH\"]\n\"\"\n\njulia&gt; FFMPEG.exe(\"-version\")\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0```","user":"UP95S4864","ts":"1617840041.232100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XBZwU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"looks the same\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> ENV[\"DYLD_LIBRARY_PATH\"]\n\"\"\n\njulia> FFMPEG.exe(\"-version\")\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"9b555cd0-bf82-4334-92be-56a83356a70f","type":"message","text":"how are you launching julia exactly?  is `dllist()` any different at the beginning now?  it's very strange that `libz` is loaded from system libraries, that's one of the first libraries julia would load at the beginning.  also, in <https://gist.github.com/agerlach/748f5d7618dde24eff7af80541d34484> there are _many_ more libraries than what I'd expect, in a fresh session that's very strange","user":"UDB26738Q","ts":"1617840200.232300","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1617840210.000000"},"blocks":[{"type":"rich_text","block_id":"8hnvq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how are you launching julia exactly?  is "},{"type":"text","text":"dllist()","style":{"code":true}},{"type":"text","text":" any different at the beginning now?  it's very strange that "},{"type":"text","text":"libz","style":{"code":true}},{"type":"text","text":" is loaded from system libraries, that's one of the first libraries julia would load at the beginning.  also, in "},{"type":"link","url":"https://gist.github.com/agerlach/748f5d7618dde24eff7af80541d34484"},{"type":"text","text":" there are "},{"type":"text","text":"many","style":{"italic":true}},{"type":"text","text":" more libraries than what I'd expect, in a fresh session that's very strange"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"340dccb9-4ff3-4771-a225-60bc0e68b26e","type":"message","text":"`./julia`  from the terminal","user":"UP95S4864","ts":"1617842733.232600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LkZ2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"./julia","style":{"code":true}},{"type":"text","text":"  from the terminal"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"856a6240-390f-4e91-9cb3-a38add6bab79","type":"message","text":"can you launch `julia` with `dtruss` and provide a trace of all loaded libraries?  I'm still very puzzled where they're coming from","user":"UDB26738Q","ts":"1617842797.232800","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1617842831.000000"},"blocks":[{"type":"rich_text","block_id":"LOG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you launch "},{"type":"text","text":"julia","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"dtruss","style":{"code":true}},{"type":"text","text":" and provide a trace of all loaded libraries?  I'm still very puzzled where they're coming from"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"174f644d-f601-46dd-9df2-02b63366d61b","type":"message","text":"druss?","user":"UP95S4864","ts":"1617842817.233000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"an9tJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"druss?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"0fe5e3c8-a9ab-4b1b-bd1b-b6131e2c762b","type":"message","text":"`dtruss`, sorry, I misspelled it","user":"UDB26738Q","ts":"1617842838.233300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ebZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"dtruss","style":{"code":true}},{"type":"text","text":", sorry, I misspelled it"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"9901f871-9d91-45dc-8200-389225c4aec9","type":"message","text":"I don't think I can. I don't have root access\n```dtruss ./julia\ndtrace: system integrity protection is on, some features will not be available\ndtrace: failed to initialize dtrace: DTrace requires additional privileges```","user":"UP95S4864","ts":"1617842879.233500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xIC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think I can. I don't have root access\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"dtruss ./julia\ndtrace: system integrity protection is on, some features will not be available\ndtrace: failed to initialize dtrace: DTrace requires additional privileges"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"ec9700d9-c5dd-40ce-94ef-3a8a8cc41702","type":"message","text":"sorry, I'm not personally able to assist you further.  I know what's the error (some system libraries are being loaded, instead of those expected by julia, for example `libz`), but I don't know why and I can't offer a solution :confused:","user":"UDB26738Q","ts":"1617843132.233700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ulh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sorry, I'm not personally able to assist you further.  I know what's the error (some system libraries are being loaded, instead of those expected by julia, for example "},{"type":"text","text":"libz","style":{"code":true}},{"type":"text","text":"), but I don't know why and I can't offer a solution "},{"type":"emoji","name":"confused"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"de90e67b-3e5c-4f6c-a0cc-317cb68f403c","type":"message","text":"<@UDB26738Q> You have been extremely generous with your time. Thank you.","user":"UP95S4864","ts":"1617843336.233900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AJBuy","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":" You have been extremely generous with your time. Thank you."}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"b88b35a7-8b3b-4ec0-9a6a-ba1375e52d90","type":"message","text":"You asked for the output of `dllist()`  after `DYLD_LIBRARY_PATH=\"\" ./julia`  <https://gist.github.com/agerlach/7797a45dc37c5411eb85dd971ad36032>","user":"UP95S4864","ts":"1617843433.234100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F3Uhk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You asked for the output of "},{"type":"text","text":"dllist()","style":{"code":true}},{"type":"text","text":"  after "},{"type":"text","text":"DYLD_LIBRARY_PATH=\"\" ./julia","style":{"code":true}},{"type":"text","text":"  "},{"type":"link","url":"https://gist.github.com/agerlach/7797a45dc37c5411eb85dd971ad36032"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"aecfa989-3bf9-4236-a30c-4598c77112cb","type":"message","text":"this is a bit weird, you seem to load `FFMPEG.jl` but there are no ffmpeg-related libraries","user":"UDB26738Q","ts":"1617843508.234300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AxuJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is a bit weird, you seem to load "},{"type":"text","text":"FFMPEG.jl","style":{"code":true}},{"type":"text","text":" but there are no ffmpeg-related libraries"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"}]