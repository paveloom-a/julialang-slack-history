[{"client_msg_id":"6dbe7980-2c25-4570-8d11-2085afd411b0","type":"message","text":"On OSX 10.15.7 I have problems with any package that evokes the FFMPEG.jl, e.g. making a recording w/ Javis.jl or Makie.jl. Any thoughts?\n```record(figure, \"f16.mkv\", 1:100; framerate = 10) do trans\n           GLMakie.translate!(obj, trans)\n       end\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0\nERROR: LoadError: IOError: write: broken pipe (EPIPE)```\nIf I `./ ffmpeg`  or the artifact directly I get\n```dyld: Library not loaded: @rpath/libass.9.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/./ffmpeg\n  Reason: image not found```","user":"UP95S4864","ts":"1617806411.149800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wSWV/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"On OSX 10.15.7 I have problems with any package that evokes the FFMPEG.jl, e.g. making a recording w/ Javis.jl or Makie.jl. Any thoughts?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"record(figure, \"f16.mkv\", 1:100; framerate = 10) do trans\n           GLMakie.translate!(obj, trans)\n       end\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0\nERROR: LoadError: IOError: write: broken pipe (EPIPE)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"If I "},{"type":"text","text":"./ ffmpeg","style":{"code":true}},{"type":"text","text":"  or the artifact directly I get\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"dyld: Library not loaded: @rpath/libass.9.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/./ffmpeg\n  Reason: image not found"}]}]}],"thread_ts":"1617806411.149800","reply_count":20,"reply_users_count":3,"latest_reply":"1617830083.214900","reply_users":["US64J0NPQ","UP95S4864","UDB26738Q"],"is_locked":false,"subscribed":false},{"client_msg_id":"e16d4bfa-8356-4000-ad79-ad78d6d99969","type":"message","text":"Not an answer <@UP95S4864>, but perhaps ask also in <#CB1R90P8R|image-processing> and/or <#CFLGP7EQ7|video>. If you run into more issues with Javis, let me know.  :load:","user":"US64J0NPQ","ts":"1617809688.154000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KE2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not an answer "},{"type":"user","user_id":"UP95S4864"},{"type":"text","text":", but perhaps ask also in "},{"type":"channel","channel_id":"CB1R90P8R"},{"type":"text","text":" and/or "},{"type":"channel","channel_id":"CFLGP7EQ7"},{"type":"text","text":". If you run into more issues with Javis, let me know.  "},{"type":"emoji","name":"load"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"7dbacc65-62c6-4695-ba6c-eae68afc184a","type":"message","text":"Thanks <@US64J0NPQ>. My problem is definitely upstream of Javis","user":"UP95S4864","ts":"1617810400.154300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yrAX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks "},{"type":"user","user_id":"US64J0NPQ"},{"type":"text","text":". My problem is definitely upstream of Javis"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864","reactions":[{"name":"+1","users":["US64J0NPQ"],"count":1}]},{"client_msg_id":"5e4e937e-0729-42f4-9db5-855be6d8fc0b","type":"message","text":"<@UP95S4864> can you please show the output of\n```using Libdl\nfilter!(lib -&gt; occursin(\"bz2\", lib), dllist())```\nafter you get the error?","user":"UDB26738Q","ts":"1617811780.162200","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1617811788.000000"},"blocks":[{"type":"rich_text","block_id":"rAb","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UP95S4864"},{"type":"text","text":" can you please show the output of\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Libdl\nfilter!(lib -> occursin(\"bz2\", lib), dllist())"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"after you get the error?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"4be26181-ed84-4c1d-a0e8-c58e41ac507b","type":"message","text":"```2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\"```","user":"UP95S4864","ts":"1617812924.170900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bDq6u","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\""}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"1dfb68ab-a250-4b39-8966-24a22510f872","type":"message","text":"so system libbz2 is being pulled by something, it shouldn't.  does the error happen also in a fresh julia session?","user":"UDB26738Q","ts":"1617813105.171500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0Uq49","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so system libbz2 is being pulled by something, it shouldn't.  does the error happen also in a fresh julia session?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"8aa38909-4e48-48dc-9501-89db597bee36","type":"message","text":"In a fresh session:\n```using Libdl\nfilter!(lib -&gt; occursin(\"bz2\", lib), dllist())\n\nusing GLMakie\nfig = GLMakie.Figure()\nrecord(fig, \"mygif.gif\", 1:100;) do i\n    GLMakie.scatter(rand(5),rand(5))\nend\n\nfilter!(lib -&gt; occursin(\"bz2\", lib), dllist())```\n```1-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0\nERROR: LoadError: IOError: write: broken pipe (EPIPE)\nStacktrace:...\n\n2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\"```","user":"UP95S4864","ts":"1617813510.172300","team":"T68168MUP","edited":{"user":"UP95S4864","ts":"1617813788.000000"},"blocks":[{"type":"rich_text","block_id":"66vEH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In a fresh session:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Libdl\nfilter!(lib -> occursin(\"bz2\", lib), dllist())\n\nusing GLMakie\nfig = GLMakie.Figure()\nrecord(fig, \"mygif.gif\", 1:100;) do i\n    GLMakie.scatter(rand(5),rand(5))\nend\n\nfilter!(lib -> occursin(\"bz2\", lib), dllist())"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"1-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0\nERROR: LoadError: IOError: write: broken pipe (EPIPE)\nStacktrace:...\n\n2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n\"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\""}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"5ea4cb4b-0346-46cd-ac89-71eb30cb5d1a","type":"message","text":"so `GLMakie` is pulling it?","user":"UDB26738Q","ts":"1617813558.172500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rgYD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so "},{"type":"text","text":"GLMakie","style":{"code":true}},{"type":"text","text":" is pulling it?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"f4a1452e-6c55-4e54-9092-58dbdbb42dff","type":"message","text":"Dependencies look like `GLMakie &lt;- AbstractPlotting &lt;- FFMPEG`","user":"UP95S4864","ts":"1617813661.172700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mQ6JS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Dependencies look like "},{"type":"text","text":"GLMakie <- AbstractPlotting <- FFMPEG","style":{"code":true}}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"5ebc0d0e-67b4-43b5-b323-466c264f4c6d","type":"message","text":"If I do a fresh julia and call FFMEG directly I get the same","user":"UP95S4864","ts":"1617813690.172900","team":"T68168MUP","edited":{"user":"UP95S4864","ts":"1617814125.000000"},"blocks":[{"type":"rich_text","block_id":"lXrYz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If I do a fresh julia and call FFMEG directly I get the same"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"9b0ebf97-b214-4aab-a0e1-6e8ef9f8af83","type":"message","text":"```using FFMPEG\nFFMPEG.exe(\"-version\")\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0```","user":"UP95S4864","ts":"1617813712.173100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dmLx","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using FFMPEG\nFFMPEG.exe(\"-version\")\ndyld: Library not loaded: @rpath/libbz2.1.0.6.dylib\n  Referenced from: /Users/me/.julia/artifacts/c28cdc80b48b1077c8fc57d8e94e6eb9c1a4a776/bin/ffmpeg\n  Reason: Incompatible library version: ffmpeg requires version 1.0.0 or later, but libbz2.1.0.6.dylib provides version 0.0.0"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"4f98b9a4-4baa-4033-ade2-3fcb6265aaad","type":"message","text":"```filter!(lib -&gt; occursin(\"bz2\", lib), dllist())\n2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n \"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\"```","user":"UP95S4864","ts":"1617813763.173500","team":"T68168MUP","edited":{"user":"UP95S4864","ts":"1617813772.000000"},"blocks":[{"type":"rich_text","block_id":"FrBEX","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"filter!(lib -> occursin(\"bz2\", lib), dllist())\n2-element Vector{String}:\n \"/usr/lib/libbz2.1.0.dylib\"\n \"/Users/me/.julia/artifacts/9e6461415f744a3748a3157a0c3db6b138dbea87/lib/libbz2.1.0.6.dylib\""}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"7fb46fba-c02c-4f05-a5ee-0794fb809ec4","type":"message","text":"<@UDB26738Q> Any more thoughts on this?","user":"UP95S4864","ts":"1617825999.194400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Bzg","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":" Any more thoughts on this?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"a1675f29-3500-49a8-9c11-04b7070eead4","type":"message","text":"something is pulling system's libbz2, and that's the issue, but can't tell why.  what's the value of the environment variable `DYLD_FALLBACK_LIBRARY_PATH`?","user":"UDB26738Q","ts":"1617828545.208100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kefO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"something is pulling system's libbz2, and that's the issue, but can't tell why.  what's the value of the environment variable "},{"type":"text","text":"DYLD_FALLBACK_LIBRARY_PATH","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"6294bf1f-b643-487b-8ebc-d263fb6a83ba","type":"message","text":"```ENV[\"DYLD_FALLBACK_LIBRARY_PATH\"]\nERROR: KeyError: key \"DYLD_FALLBACK_LIBRARY_PATH\" not found```","user":"UP95S4864","ts":"1617829493.209700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XmH","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ENV[\"DYLD_FALLBACK_LIBRARY_PATH\"]\nERROR: KeyError: key \"DYLD_FALLBACK_LIBRARY_PATH\" not found"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"c0cb5af8-d143-4308-9e2d-7c3f9ffc01a7","type":"message","text":"is `/usr/lib/libbz2.1.0.dylib` in `filter!(lib -&gt; occursin(\"bz2\", lib), dllist())` the issue?","user":"UP95S4864","ts":"1617829583.210700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k/WA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is "},{"type":"text","text":"/usr/lib/libbz2.1.0.dylib","style":{"code":true}},{"type":"text","text":" in "},{"type":"text","text":"filter!(lib -> occursin(\"bz2\", lib), dllist())","style":{"code":true}},{"type":"text","text":" the issue?"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"f5a3567c-9a59-433e-b2d5-873f37de9c71","type":"message","text":"it is, it shouldn't be loaded","user":"UDB26738Q","ts":"1617829602.211000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"75I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is, it shouldn't be loaded"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"2aa5b3dd-0f82-4f9f-8533-ccef2bf35235","type":"message","text":"could it be anything in my startup.jl?\n```import REPL\nBase.atreplinit() do repl\n    # make the ; shell mode sticky\n    !isdefined(repl, :interface) &amp;&amp; (repl.interface = REPL.setup_interface(repl))\n    repl.interface.modes[2].sticky=true\n\n    try\n        @eval using OhMyREPL\n    catch e\n        @warn \"error while importing OhMyREPL\" e\n    end\nend\n\ntry\n    @eval using Revise\n    # Turn on Revise's automatic-evaluation behavior\n    Revise.async_steal_repl_backend()\ncatch err\n    @warn \"Could not load Revise.\"\nend\n\nENV[\"JULIA_EDITOR\"] = \"code\"```","user":"UP95S4864","ts":"1617829867.213900","team":"T68168MUP","edited":{"user":"UP95S4864","ts":"1617829886.000000"},"blocks":[{"type":"rich_text","block_id":"EG6D4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"could it be anything in my startup.jl?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"import REPL\nBase.atreplinit() do repl\n    # make the ; shell mode sticky\n    !isdefined(repl, :interface) && (repl.interface = REPL.setup_interface(repl))\n    repl.interface.modes[2].sticky=true\n\n    try\n        @eval using OhMyREPL\n    catch e\n        @warn \"error while importing OhMyREPL\" e\n    end\nend\n\ntry\n    @eval using Revise\n    # Turn on Revise's automatic-evaluation behavior\n    Revise.async_steal_repl_backend()\ncatch err\n    @warn \"Could not load Revise.\"\nend\n\nENV[\"JULIA_EDITOR\"] = \"code\""}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"c7ac5d3e-9b9f-4871-a051-532c2a6e09a2","type":"message","text":"it doesn't look like it, but you can rule it out by trying to reproduce the error when running julia with `--startup-file=no`","user":"UDB26738Q","ts":"1617829935.214200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Bvv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it doesn't look like it, but you can rule it out by trying to reproduce the error when running julia with "},{"type":"text","text":"--startup-file=no","style":{"code":true}}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"4fb59006-bce3-4dd0-8bfd-fbe4fcbb0784","type":"message","text":"no luck","user":"UP95S4864","ts":"1617830035.214400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ibE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no luck"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"},{"client_msg_id":"cf1e377e-bf82-4b21-bcdc-9034994cb766","type":"message","text":"the fact that it happens in a fresh session is worrying, usually python dependencies would pull in system libraries","user":"UDB26738Q","ts":"1617830083.214900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UTl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the fact that it happens in a fresh session is worrying, usually python dependencies would pull in system libraries"}]}]}],"thread_ts":"1617806411.149800","parent_user_id":"UP95S4864"}]