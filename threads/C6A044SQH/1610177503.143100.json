[{"client_msg_id":"ec1022dd-46cf-4db8-8695-f65a0c1062c7","type":"message","text":"Any idea why the difference in timing reported by `@time` and the two calls to `time()`? I’m on `1.6.0-beta1`\n```julia&gt; using Plots\n\njulia&gt; t0 = time()\n       @time plot(1:10)\n       t1 = time()\n  2.715879 seconds (5.02 M allocations: 298.785 MiB, 2.65% gc time, 53.10% compilation time)\n1.610177368261558e9\n\njulia&gt; t1 - t0\n12.12993597984314```\nP.S. The 12 seconds is about right by my wristwatch","user":"U017AJ68PFZ","ts":"1610177503.143100","team":"T68168MUP","edited":{"user":"U017AJ68PFZ","ts":"1610177551.000000"},"blocks":[{"type":"rich_text","block_id":"rGIy/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Any idea why the difference in timing reported by "},{"type":"text","text":"@time","style":{"code":true}},{"type":"text","text":" and the two calls to "},{"type":"text","text":"time()","style":{"code":true}},{"type":"text","text":"? I’m on "},{"type":"text","text":"1.6.0-beta1","style":{"code":true}},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using Plots\n\njulia> t0 = time()\n       @time plot(1:10)\n       t1 = time()\n  2.715879 seconds (5.02 M allocations: 298.785 MiB, 2.65% gc time, 53.10% compilation time)\n1.610177368261558e9\n\njulia> t1 - t0\n12.12993597984314"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"P.S. The 12 seconds is about right by my wristwatch"}]}]}],"thread_ts":"1610177503.143100","reply_count":21,"reply_users_count":3,"latest_reply":"1610178887.147600","reply_users":["U017AJ68PFZ","U0179G7FG4F","UH8A351DJ"],"subscribed":false},{"client_msg_id":"761b5793-1c3a-415a-822f-e12a9453985f","type":"message","text":"The`@time` macro expands to:\n```@macroexpand @time plot(1:10)\nquote\n    #= timing.jl:202 =#\n    while false\n        #= timing.jl:202 =#\n    end\n    #= timing.jl:203 =#\n    local var\"#9#stats\" = Base.gc_num()\n    #= timing.jl:204 =#\n    local var\"#12#compile_elapsedtime\" = Base.cumulative_compile_time_ns_before()\n    #= timing.jl:205 =#\n    local var\"#11#elapsedtime\" = Base.time_ns()\n    #= timing.jl:206 =#\n    local var\"#10#val\" = plot(1:10)\n    #= timing.jl:207 =#\n    var\"#11#elapsedtime\" = Base.time_ns() - var\"#11#elapsedtime\"\n    #= timing.jl:208 =#\n    var\"#12#compile_elapsedtime\" = Base.cumulative_compile_time_ns_after() - var\"#12#compile_elapsedtime\"\n    #= timing.jl:209 =#\n    local var\"#13#diff\" = Base.GC_Diff(Base.gc_num(), var\"#9#stats\")\n    #= timing.jl:210 =#\n    Base.time_print(var\"#11#elapsedtime\", (var\"#13#diff\").allocd, (var\"#13#diff\").total_time, Base.gc_alloc_count(var\"#13#diff\"), var\"#12#compile_elapsedtime\", true)\n    #= timing.jl:211 =#\n    var\"#10#val\"\nend```\nso the additional time is spent in computing the elapsed time and working out compilation, gc time, etc?","user":"U017AJ68PFZ","ts":"1610177760.143300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9ha","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The`@time` macro expands to:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@macroexpand @time plot(1:10)\nquote\n    #= timing.jl:202 =#\n    while false\n        #= timing.jl:202 =#\n    end\n    #= timing.jl:203 =#\n    local var\"#9#stats\" = Base.gc_num()\n    #= timing.jl:204 =#\n    local var\"#12#compile_elapsedtime\" = Base.cumulative_compile_time_ns_before()\n    #= timing.jl:205 =#\n    local var\"#11#elapsedtime\" = Base.time_ns()\n    #= timing.jl:206 =#\n    local var\"#10#val\" = plot(1:10)\n    #= timing.jl:207 =#\n    var\"#11#elapsedtime\" = Base.time_ns() - var\"#11#elapsedtime\"\n    #= timing.jl:208 =#\n    var\"#12#compile_elapsedtime\" = Base.cumulative_compile_time_ns_after() - var\"#12#compile_elapsedtime\"\n    #= timing.jl:209 =#\n    local var\"#13#diff\" = Base.GC_Diff(Base.gc_num(), var\"#9#stats\")\n    #= timing.jl:210 =#\n    Base.time_print(var\"#11#elapsedtime\", (var\"#13#diff\").allocd, (var\"#13#diff\").total_time, Base.gc_alloc_count(var\"#13#diff\"), var\"#12#compile_elapsedtime\", true)\n    #= timing.jl:211 =#\n    var\"#10#val\"\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"so the additional time is spent in computing the elapsed time and working out compilation, gc time, etc?"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"86ed64f3-7a20-4464-8e97-72f33514a07e","type":"message","text":"does this happen only the first time you use `@time`?","user":"U0179G7FG4F","ts":"1610177808.143500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7/YU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does this happen only the first time you use "},{"type":"text","text":"@time","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"33be97e4-aeb8-4990-9b4b-64fd5a2bf901","type":"message","text":"No. If I do `@time 1+2` before running this, I still get the difference","user":"U017AJ68PFZ","ts":"1610177876.143700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WqBNX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No. If I do "},{"type":"text","text":"@time 1+2","style":{"code":true}},{"type":"text","text":" before running this, I still get the difference"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"59efe5cf-16f2-435e-9e16-3942390fccfb","type":"message","text":"are you timing in a repl?","user":"U0179G7FG4F","ts":"1610177958.143900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"26Q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"are you timing in a repl?"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"0f57ae0f-3944-4c5c-a0d3-4a5510f9de9a","type":"message","text":"yes","user":"U017AJ68PFZ","ts":"1610177966.144100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TFFFy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"7349c319-9e59-4143-94be-b118ad24dd53","type":"message","text":"I know the problem","user":"U0179G7FG4F","ts":"1610177973.144300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2t9Ln","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I know the problem"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"979a8c39-f359-41c8-8402-51e838b9510b","type":"message","text":"it's the precompilation to `display` the plot","user":"U0179G7FG4F","ts":"1610177994.144500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J6b7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's the precompilation to "},{"type":"text","text":"display","style":{"code":true}},{"type":"text","text":" the plot"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"31ac28c5-9175-4351-803e-4d97b28272fb","type":"message","text":"ah!","user":"U017AJ68PFZ","ts":"1610178020.144900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U1bu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah!"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"cb064d43-6342-47aa-a656-763dafdc4f72","type":"message","text":"if you put a `;` after the `plot` command to suppress output, you should see correct results","user":"U0179G7FG4F","ts":"1610178060.145100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eERN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you put a "},{"type":"text","text":";","style":{"code":true}},{"type":"text","text":" after the "},{"type":"text","text":"plot","style":{"code":true}},{"type":"text","text":" command to suppress output, you should see correct results"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"5d04433e-7967-4b98-b0e6-a47420ca067c","type":"message","text":"Seems on the right track, but…\n```julia&gt; t0 = time()\n       @time plot(1:10);\n       t1 = time()\n  2.744572 seconds (5.02 M allocations: 298.785 MiB, 2.52% gc time, 53.01% compilation time)\n1.610178129368108e9\n\njulia&gt; t1-t0\n12.178230047225952```\nand:\n```julia&gt; using Plots\n\njulia&gt; t0 = time()\n       @time display(plot(1:10))\n       t1 = time()\n  7.112727 seconds (12.29 M allocations: 720.036 MiB, 2.95% gc time, 24.39% compilation time)\n1.610178061421764e9\n\njulia&gt; t1-t0\n16.834199905395508```","user":"U017AJ68PFZ","ts":"1610178176.145300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xX=C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Seems on the right track, but…\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> t0 = time()\n       @time plot(1:10);\n       t1 = time()\n  2.744572 seconds (5.02 M allocations: 298.785 MiB, 2.52% gc time, 53.01% compilation time)\n1.610178129368108e9\n\njulia> t1-t0\n12.178230047225952"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using Plots\n\njulia> t0 = time()\n       @time display(plot(1:10))\n       t1 = time()\n  7.112727 seconds (12.29 M allocations: 720.036 MiB, 2.95% gc time, 24.39% compilation time)\n1.610178061421764e9\n\njulia> t1-t0\n16.834199905395508"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"3705ed31-ddf4-4daf-bcce-9f8cc69a322b","type":"message","text":"welp. I'm out","user":"U0179G7FG4F","ts":"1610178254.145500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Kaana","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"welp. I'm out"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ","reactions":[{"name":"pray","users":["U017AJ68PFZ"],"count":1}]},{"client_msg_id":"6622473c-551d-4d94-9527-b91376d7b3e6","type":"message","text":"how are you putting 3 statements in 1 line?","user":"UH8A351DJ","ts":"1610178431.145800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oiBP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how are you putting 3 statements in 1 line?"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"39512f55-c718-4dc5-931c-39643cb9e2ca","type":"message","text":"ESC-ENTER","user":"U017AJ68PFZ","ts":"1610178447.146000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9kvuG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ESC-ENTER"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"fe303866-fbb3-4e45-89ad-d5760e81cd43","type":"message","text":"oh ok, I know alt-enter but I thought copy-paste would work but nope","user":"UH8A351DJ","ts":"1610178477.146200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TDWS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh ok, I know alt-enter but I thought copy-paste would work but nope"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"bde48cba-69c4-4846-a37b-6c95391033de","type":"message","text":"copy-and-paste executes them individually","user":"U017AJ68PFZ","ts":"1610178500.146400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mnArE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"copy-and-paste executes them individually"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"382f0244-a369-43e9-b4d6-6dfeffc6e24f","type":"message","text":"```julia&gt; t0 = time()\n       @time display(plot(1:10));\n       t1 = time()\n  3.862643 seconds (6.86 M allocations: 396.672 MiB, 2.03% gc time, 46.01% compilation time)\n1.610178603264186e9\n\njulia&gt; t1-t0\n3.8790109157562256```","user":"UH8A351DJ","ts":"1610178617.146600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1NfKJ","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> t0 = time()\n       @time display(plot(1:10));\n       t1 = time()\n  3.862643 seconds (6.86 M allocations: 396.672 MiB, 2.03% gc time, 46.01% compilation time)\n1.610178603264186e9\n\njulia> t1-t0\n3.8790109157562256"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"a34658e9-12c0-4f59-be07-539203772030","type":"message","text":"looks fine on my end","user":"UH8A351DJ","ts":"1610178622.146800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Kxcvb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"looks fine on my end"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"24558236-764d-4cb9-a6f9-84b425e1a5f0","type":"message","text":"Strange!\nQuite repeatable for me…\n```julia&gt; t0 = time()\n       @time display(plot(1:10));\n       t1 = time()\n       t1 - t0\n  6.436769 seconds (12.29 M allocations: 720.036 MiB, 2.79% gc time, 22.53% compilation time)\n15.964630126953125```","user":"U017AJ68PFZ","ts":"1610178704.147000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cmM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Strange!\nQuite repeatable for me…\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> t0 = time()\n       @time display(plot(1:10));\n       t1 = time()\n       t1 - t0\n  6.436769 seconds (12.29 M allocations: 720.036 MiB, 2.79% gc time, 22.53% compilation time)\n15.964630126953125"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"0cce8727-a42b-452a-a01d-d2dfd07b66d0","type":"message","text":"Without the `display();`, it’s 2.7 and 12 seconds always. With `display();` around 6-7 and 16 seconds.","user":"U017AJ68PFZ","ts":"1610178761.147200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZliCx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Without the "},{"type":"text","text":"display();","style":{"code":true}},{"type":"text","text":", it’s 2.7 and 12 seconds always. With "},{"type":"text","text":"display();","style":{"code":true}},{"type":"text","text":" around 6-7 and 16 seconds."}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ"},{"client_msg_id":"84a35b0d-7db1-4231-bb70-3ea1b35c830e","type":"message","text":"But, if I run in VSC, all good…\n```julia&gt; t0 = time()\n       @time display(plot(1:10));\n       t1 = time()\n       t1 - t0\n  5.765674 seconds (11.56 M allocations: 679.782 MiB, 2.71% gc time, 19.30% compilation time)\n5.828361988067627```","user":"U017AJ68PFZ","ts":"1610178871.147400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zEw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But, if I run in VSC, all good…\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> t0 = time()\n       @time display(plot(1:10));\n       t1 = time()\n       t1 - t0\n  5.765674 seconds (11.56 M allocations: 679.782 MiB, 2.71% gc time, 19.30% compilation time)\n5.828361988067627"}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ","reactions":[{"name":"open_mouth","users":["UH8A351DJ"],"count":1}]},{"client_msg_id":"1b276822-d3ed-4534-aec3-2abdd9c3f6ee","type":"message","text":"timing plotting is weird because of the display and external library calling etc.........so yeah, technically a bug but....","user":"UH8A351DJ","ts":"1610178887.147600","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1610178894.000000"},"blocks":[{"type":"rich_text","block_id":"dQOT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"timing plotting is weird because of the display and external library calling etc.........so yeah, technically a bug but...."}]}]}],"thread_ts":"1610177503.143100","parent_user_id":"U017AJ68PFZ","reactions":[{"name":"+1","users":["U017AJ68PFZ","U0179G7FG4F"],"count":2}]}]