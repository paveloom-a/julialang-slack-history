[{"client_msg_id":"3C3136D0-B55F-4E8A-ABC6-2F007535F68D","type":"message","text":"How can I create threads in Julia, and how can I make sure my code will run multi-threaded?","user":"U01GC3N3ZJT","ts":"1610298073.201000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F/5xQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How can I create threads in Julia, and how can I make sure my code will run multi-threaded?"}]}]}],"thread_ts":"1610298073.201000","reply_count":74,"reply_users_count":5,"latest_reply":"1610331629.260900","reply_users":["UH8A351DJ","UH24GRBLL","U01GC3N3ZJT","U014F58NBDY","U012C82M8T0"],"subscribed":false},{"client_msg_id":"f61457ee-e3d1-429a-98c7-45ffa34ae183","type":"message","text":"make sure `Threads.nthread()` is bigger than 1","user":"UH8A351DJ","ts":"1610298201.201100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TjczV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"make sure "},{"type":"text","text":"Threads.nthread()","style":{"code":true}},{"type":"text","text":" is bigger than 1"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"683aae62-4582-475e-85d6-81d76027dbd2","type":"message","text":"then try a tutorial maybe","user":"UH8A351DJ","ts":"1610298256.201300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qkJZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"then try a tutorial maybe"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"f79fe0b3-c90d-429d-b160-5a6da9635ce0","type":"message","text":"<https://techytok.com/lesson-parallel-computing/#composable-multi-threading>","user":"UH8A351DJ","ts":"1610298257.201500","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1610299097.000000"},"blocks":[{"type":"rich_text","block_id":"P1Bn","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://techytok.com/lesson-parallel-computing/#composable-multi-threading"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"fa2a4961-50c3-4daa-b9aa-9979ca8f28ac","type":"message","text":"You can't add threads at runtime","user":"UH24GRBLL","ts":"1610298910.202300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZeI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can't add threads at runtime"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"62468bd9-4c73-4866-8afa-140f4e62ac5a","type":"message","text":"you either need to set the environment variable `JULIA_NUM_THREADS` to something &gt;1 before statring or start julia with `julia --threads &lt;desired number of threads&gt;`","user":"UH24GRBLL","ts":"1610298965.202500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vWy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you either need to set the environment variable "},{"type":"text","text":"JULIA_NUM_THREADS","style":{"code":true}},{"type":"text","text":" to something >1 before statring or start julia with "},{"type":"text","text":"julia --threads <desired number of threads>","style":{"code":true}}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"392283ED-47B2-47EC-A735-AE84B3EC5C44","type":"message","text":"Ohhhhh, OK.  I hope they figure out static compilation soon, then.  It’s kinda awkward to have to wrangle the program before it’s even started.","user":"U01GC3N3ZJT","ts":"1610299702.204800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"07/QS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ohhhhh, OK.  I hope they figure out static compilation soon, then.  It’s kinda awkward to have to wrangle the program before it’s even started."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT","reactions":[{"name":"question","users":["UH8A351DJ"],"count":1}]},{"client_msg_id":"F7E5D331-5A74-45A5-8710-0C53C4F829EC","type":"message","text":"That you have to ‘start Julia’ and only then run your program rather than compiling an executable that can handle all that environment modification at runtime.","user":"U01GC3N3ZJT","ts":"1610299790.207600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TIB5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That you have to ‘start Julia’ and only then run your program rather than compiling an executable that can handle all that environment modification at runtime."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"3E42550E-6ECF-46A5-9EC1-8994DF8AB13E","type":"message","text":"I want to change JULIA_NUM_THREADS from within my code rather than from the terminal.","user":"U01GC3N3ZJT","ts":"1610299828.208400","team":"T68168MUP","edited":{"user":"U01GC3N3ZJT","ts":"1610299845.000000"},"blocks":[{"type":"rich_text","block_id":"Dj0b","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I want to change JULIA_NUM_THREADS from within my code rather than from the terminal."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"ed631009-38ee-4bf6-815d-fd9c166f9f2b","type":"message","text":"no you don't","user":"UH8A351DJ","ts":"1610299867.208700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ulb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no you don't"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"a17a0880-a55b-4015-acd5-881d18d3106b","type":"message","text":"you just `julia -t 10 myscript.jl`","user":"UH8A351DJ","ts":"1610299874.208900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pR0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you just "},{"type":"text","text":"julia -t 10 myscript.jl","style":{"code":true}}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"9DA0FC03-514B-4ED1-8683-001A2CC206ED","type":"message","text":"I always have to do this weird include thing.","user":"U01GC3N3ZJT","ts":"1610299904.209800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YjXYk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I always have to do this weird include thing."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"D6025FA6-13E1-4114-8E1E-55CCBE5B1956","type":"message","text":"Is there a better way?","user":"U01GC3N3ZJT","ts":"1610299912.210200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cdy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a better way?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"0949db30-384f-4e79-a8f3-949afaa7bb14","type":"message","text":"what do you mean weird include thing?","user":"UH8A351DJ","ts":"1610299921.210400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CP1K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what do you mean weird include thing?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"CD663821-CDBD-4C76-9708-A0D56B12D136","type":"message","text":"include(“file/path/main.jl”)","user":"U01GC3N3ZJT","ts":"1610299943.211100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e2rU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"include(“file/path/main.jl”)"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"4e717489-7801-49e3-8f71-a09eb5533db1","type":"message","text":"your point being? how is this related to threads?","user":"UH8A351DJ","ts":"1610299976.211300","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1610299987.000000"},"blocks":[{"type":"rich_text","block_id":"1mw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"your point being? how is this related to threads?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"BEFC9296-7B20-4E62-8C32-37E009617CF6","type":"message","text":"Well, how do I run the program like you said?","user":"U01GC3N3ZJT","ts":"1610300085.212000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d26","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, how do I run the program like you said?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"b29eed22-688d-480e-95c4-dad4dfcd8a7e","type":"message","text":"why would you open up a empty julia just to include main/jl and not do anything else","user":"UH8A351DJ","ts":"1610300108.212200","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1610300118.000000"},"blocks":[{"type":"rich_text","block_id":"0f7jP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"why would you open up a empty julia just to include main/jl and not do anything else"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"f5124b42-bea8-4a4f-b9c3-b9a0f797fed6","type":"message","text":"you should `julia -t 5 file/path/main.jl` if you want to do this","user":"UH8A351DJ","ts":"1610300138.212600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cnuOl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you should "},{"type":"text","text":"julia -t 5 file/path/main.jl","style":{"code":true}},{"type":"text","text":" if you want to do this"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"EB598AFA-0396-4E21-90A5-901170916FA5","type":"message","text":"Where do I do this?  Walk me through the steps, please.","user":"U01GC3N3ZJT","ts":"1610300172.213400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZIQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Where do I do this?  Walk me through the steps, please."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"f2fa2d1f-854c-4cb4-a7af-18000d4156e9","type":"message","text":"better, don't re-start julia every time, make a `main()` in the `main.jl`, then use `Revise.jl` based workflow","user":"UH8A351DJ","ts":"1610300172.213600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Gc=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"better, don't re-start julia every time, make a "},{"type":"text","text":"main()","style":{"code":true}},{"type":"text","text":" in the "},{"type":"text","text":"main.jl","style":{"code":true}},{"type":"text","text":", then use "},{"type":"text","text":"Revise.jl","style":{"code":true}},{"type":"text","text":" based workflow"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"2693d982-1aba-44a3-ae8b-4ad02ced1ebd","type":"message","text":"how are you getting a Julia REPL to run the `inlucde()` in the first place?","user":"UH8A351DJ","ts":"1610300190.214100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9dCfI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how are you getting a Julia REPL to run the "},{"type":"text","text":"inlucde()","style":{"code":true}},{"type":"text","text":" in the first place?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"15ec2b9e-47f6-44a6-8da8-6990b3370072","type":"message","text":"VS Code?","user":"UH8A351DJ","ts":"1610300197.214400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dhY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"VS Code?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"A7CB193C-73EF-4C1C-9642-4E5E1466F8F1","type":"message","text":"No, it came with the Julia download.  Click to open the REPL, then type include(“path/main.jl”)","user":"U01GC3N3ZJT","ts":"1610300231.215600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k+PM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No, it came with the Julia download.  Click to open the REPL, then type include(“path/main.jl”)"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"947ba9ee-cb86-4ef5-85a8-ed76765e5220","type":"message","text":"are you on windows?","user":"UH24GRBLL","ts":"1610300243.215800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"b2U4N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"are you on windows?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"525FD53B-C97D-4E8E-8F1D-3D44F8A486F6","type":"message","text":"Mac!","user":"U01GC3N3ZJT","ts":"1610300247.216100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xvSQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Mac!"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"8c2fc6fd-2ff1-436a-a870-e9b0db611748","type":"message","text":"ok","user":"UH24GRBLL","ts":"1610300253.216300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6Esq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"bd9df1d5-1c97-4caa-8d1b-028c217d80ce","type":"message","text":"best to set the environment variable in your OS settings then","user":"UH24GRBLL","ts":"1610300278.217000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RND","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"best to set the environment variable in your OS settings then"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"728f343e-4a09-47a4-adf1-1ddadf8991fc","type":"message","text":"by doing that, you won't have to start julia any differently and it'll be started with the number of threads you specify","user":"UH24GRBLL","ts":"1610300297.217600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Msj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"by doing that, you won't have to start julia any differently and it'll be started with the number of threads you specify"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"12F405A7-345D-4464-9560-B25FCC018D02","type":"message","text":"I’m afraid to even be in the same room as those.","user":"U01GC3N3ZJT","ts":"1610300299.217800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4A0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m afraid to even be in the same room as those."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"c8d2834d-0718-437a-98f8-e03482f3c7da","type":"message","text":"yes, or, if you use terminal often, you can open up julia with `julia -t 4`","user":"UH8A351DJ","ts":"1610300313.218100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sMvC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, or, if you use terminal often, you can open up julia with "},{"type":"text","text":"julia -t 4","style":{"code":true}}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"da17a90e-0180-4bae-870d-13517f915131","type":"message","text":"<https://en.wikibooks.org/wiki/Introducing_Julia/Getting_started#Running_directly_from_terminal>","user":"UH8A351DJ","ts":"1610300344.218500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N9T","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://en.wikibooks.org/wiki/Introducing_Julia/Getting_started#Running_directly_from_terminal"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"fb8c6baa-0bab-4453-a3fb-6da455a445b5","type":"message","text":"try this","user":"UH8A351DJ","ts":"1610300345.218800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=w=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"try this"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"0CA0CB89-999D-4533-90E8-1474669D6EE2","type":"message","text":"Command not found: Julia","user":"U01GC3N3ZJT","ts":"1610300347.219000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DKALt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Command not found: Julia"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"8fac1ee9-0505-4044-80e9-0f206b449cc7","type":"message","text":"first of all it's small `julia`, second, you need to add it to your `PATH`","user":"UH8A351DJ","ts":"1610300372.219200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d=M7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"first of all it's small "},{"type":"text","text":"julia","style":{"code":true}},{"type":"text","text":", second, you need to add it to your "},{"type":"text","text":"PATH","style":{"code":true}}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"ec48e2cd-975d-4077-8a43-5d54450772a3","type":"message","text":"`/Applications/Julia` and hit tab tab and then keep typing to find the `bin/julia` first, run that is equivalent to click on julia icon basically","user":"UH8A351DJ","ts":"1610300425.219400","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1610300448.000000"},"blocks":[{"type":"rich_text","block_id":"MeL7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"/Applications/Julia","style":{"code":true}},{"type":"text","text":" and hit tab tab and then keep typing to find the "},{"type":"text","text":"bin/julia","style":{"code":true}},{"type":"text","text":" first, run that is equivalent to click on julia icon basically"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"44C8DCD2-F272-45EB-BABE-9F96ACF427F4","type":"message","text":"Alright, so how do I make that into just julia on my command line?","user":"U01GC3N3ZJT","ts":"1610301237.220500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ft4Q2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Alright, so how do I make that into just julia on my command line?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"9f37b605-eb9c-4c6c-9448-98f0ec37dc31","type":"message","text":"you want to add that to your PATH, described in the wiki too, and looks like in macOS, you want to edit this file:\n<https://gist.github.com/nex3/c395b2f8fd4b02068be37c961301caa7#mac-os-x>","user":"UH8A351DJ","ts":"1610301367.220800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"80uH9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you want to add that to your PATH, described in the wiki too, and looks like in macOS, you want to edit this file:\n"},{"type":"link","url":"https://gist.github.com/nex3/c395b2f8fd4b02068be37c961301caa7#mac-os-x"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"5edf2bbb-5b46-4223-80ee-6f8e7864fd70","type":"message","text":"basically, go to the bottom of your `.bash_profile` file, and add\n```PATH=\"/Applications/Julia-xxx.app/Contents/Resources/julia/bin/:${PATH}\"\nexport PATH```","user":"UH8A351DJ","ts":"1610301411.221000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"X6UQO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"basically, go to the bottom of your "},{"type":"text","text":".bash_profile","style":{"code":true}},{"type":"text","text":" file, and add\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"PATH=\"/Applications/Julia-xxx.app/Contents/Resources/julia/bin/:${PATH}\"\nexport PATH"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"7a38d227-4e8c-458b-ad76-ca732f2ee768","type":"message","text":"(xxx is your version, you should use the path that works for you before","user":"UH8A351DJ","ts":"1610301443.221200","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1610301449.000000"},"blocks":[{"type":"rich_text","block_id":"flD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(xxx is your version, you should use the path that works for you before"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"BB8A4E90-8B4C-4059-B052-F87F0CEBC63E","type":"message","text":"Ok, and does this work for z shell too?","user":"U01GC3N3ZJT","ts":"1610301529.221900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u6xHN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, and does this work for z shell too?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"baded974-84f7-458d-a579-116e0d827976","type":"message","text":"no, if you use zsh, there's a `.zshrc` file separately","user":"UH8A351DJ","ts":"1610301596.222100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XukEk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, if you use zsh, there's a "},{"type":"text","text":".zshrc","style":{"code":true}},{"type":"text","text":" file separately"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"cadee40d-5330-4b9e-a024-721f711c7a5b","type":"message","text":"Just uninstall julia and install it with brew, this is all handled automatically","user":"U014F58NBDY","ts":"1610305854.224900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wC=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Just uninstall julia and install it with brew, this is all handled automatically"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"58984A02-E852-4599-A56B-1888A62D16B9","type":"message","text":"I tried the terminal start approach and set my number of threads to two, the same as the number of my processors, and my process ran faster but used more CPU.  Next I tried four threads, and the process went faster but used almost my entire CPU.","user":"U01GC3N3ZJT","ts":"1610307098.229900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uyW1r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tried the terminal start approach and set my number of threads to two, the same as the number of my processors, and my process ran faster but used more CPU.  Next I tried four threads, and the process went faster but used almost my entire CPU."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"E25F1738-4396-498B-AD7A-E5C2CFE0A404","type":"message","text":"8 threads produced almost the same result.","user":"U01GC3N3ZJT","ts":"1610307150.230400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"giC/Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"8 threads produced almost the same result."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"224267f4-bdc9-402f-8856-9e637e74ab62","type":"message","text":"more threads use more CPU, yes","user":"UH24GRBLL","ts":"1610307159.230600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mSy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"more threads use more CPU, yes"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"2C297298-FA39-4298-A2C0-C950DA1246E5","type":"message","text":"How many threads should I pick?","user":"U01GC3N3ZJT","ts":"1610307176.231000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"96K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How many threads should I pick?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"2a6199bb-0864-4b8c-a464-5f093250ebdd","type":"message","text":"depends on your machine","user":"UH24GRBLL","ts":"1610307184.231200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EitA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"depends on your machine"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"DC3FE404-E69A-48ED-8A66-1F626FCAB10D","type":"message","text":"2 CPUs","user":"U01GC3N3ZJT","ts":"1610307196.231600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uuth2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"2 CPUs"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"170e2858-e78f-4ff7-befd-48c4d9fa43b8","type":"message","text":"it only scales up to the number of physical cores in your CPU","user":"UH24GRBLL","ts":"1610307196.231800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z8jg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it only scales up to the number of physical cores in your CPU"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"08C5A554-CF83-4AAE-8D8C-BC5011336198","type":"message","text":"Can’t I use more threads because my CPUs must await the data buses?","user":"U01GC3N3ZJT","ts":"1610307236.232900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aKxwy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can’t I use more threads because my CPUs must await the data buses?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"34742C33-D4B7-47E1-907B-A283968DC0D8","type":"message","text":"2 threads on 2 CPUs used only a little more than 1 thread on 2 CPUs, which used about 1/3 of my CPU, but 4 threads used about 4/5.  Is that better?","user":"U01GC3N3ZJT","ts":"1610307357.235400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4iOq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"2 threads on 2 CPUs used only a little more than 1 thread on 2 CPUs, which used about 1/3 of my CPU, but 4 threads used about 4/5.  Is that better?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"a4eb89ac-4a11-455c-a1b8-d2e0537037f1","type":"message","text":"yes but context switching has a cost","user":"UH8A351DJ","ts":"1610307371.235600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6=X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes but context switching has a cost"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"0C7049D8-8EE7-4451-901E-491BC5D3D308","type":"message","text":"Tell me more?","user":"U01GC3N3ZJT","ts":"1610307421.236000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3wBps","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Tell me more?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"6a485bad-2388-4eaa-9579-948548f1588c","type":"message","text":"it's not gonna scale infinitely, other wise why not every program use 100 threads??","user":"UH8A351DJ","ts":"1610307733.236400","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1610307811.000000"},"blocks":[{"type":"rich_text","block_id":"+LaPL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's not gonna scale infinitely, other wise why not every program use 100 threads??"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"9406f8ef-8063-47d0-929d-81416d9167ac","type":"message","text":"how long is IO bus anyways? if your program is 50% IO you might just use `@async`","user":"UH8A351DJ","ts":"1610307784.236600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i5OKc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how long is IO bus anyways? if your program is 50% IO you might just use "},{"type":"text","text":"@async","style":{"code":true}}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"4605a6ec-f982-48ee-a00c-b8c50b4df1a2","type":"message","text":"<https://mitmath.github.io/18337/lecture6/styles_of_parallelism.html>\n\n<https://mitmath.github.io/18337/lecture5/parallelism_overview.html>","user":"UH8A351DJ","ts":"1610307928.236900","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1610307962.000000"},"blocks":[{"type":"rich_text","block_id":"8gC9","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://mitmath.github.io/18337/lecture6/styles_of_parallelism.html"},{"type":"text","text":"\n\n"},{"type":"link","url":"https://mitmath.github.io/18337/lecture5/parallelism_overview.html"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"95a63c59-17b9-4d5d-ad51-614783f99658","type":"message","text":"suggested reading","user":"UH8A351DJ","ts":"1610307930.237100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DP5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"suggested reading"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"0F554EB5-E762-48B4-877D-1A881DF35BA6","type":"message","text":":hushed: I feel like a hillbilly seeing a train station for the first time. ","user":"U01GC3N3ZJT","ts":"1610308512.238300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/TTq","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"hushed"},{"type":"text","text":" I feel like a hillbilly seeing a train station for the first time. "}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT","reactions":[{"name":"heart","users":["UH8A351DJ"],"count":1}]},{"client_msg_id":"4629a681-f440-4064-99e3-687d2fb7964a","type":"message","text":"The train to performance town leaves on platform 10.","user":"UH24GRBLL","ts":"1610308551.239100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zSyAx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The train to performance town leaves on platform 10."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT","reactions":[{"name":"+1","users":["UH8A351DJ"],"count":1}]},{"client_msg_id":"0B924483-5BDD-461E-925A-9565C458C265","type":"message","text":":D","user":"U01GC3N3ZJT","ts":"1610308565.239400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0L1C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":":D"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"A57C6EC6-5634-47AE-B8BE-2CE3A6DA2A50","type":"message","text":"```for (coordinates, particles) in location_dictionary\n    for (p, particle) in enumerate(particles)\n        new_coordinates = bounce(environment, coordinates, walk(coordinates, directions)\n        if haskey(location_dictionary, new_coordinates)\n            push!(location_dictionary[new_coordinates], particle)\n        else location_dictionary[new_coordinates] = particle end\n    end\nend\n```","user":"U01GC3N3ZJT","ts":"1610308943.245000","team":"T68168MUP","edited":{"user":"U01GC3N3ZJT","ts":"1610308950.000000"},"blocks":[{"type":"rich_text","block_id":"Ne7","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"for (coordinates, particles) in location_dictionary\n    for (p, particle) in enumerate(particles)\n        new_coordinates = bounce(environment, coordinates, walk(coordinates, directions)\n        if haskey(location_dictionary, new_coordinates)\n            push!(location_dictionary[new_coordinates], particle)\n        else location_dictionary[new_coordinates] = particle end\n    end\nend"},{"type":"text","text":"\n"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"7D27C100-FCD9-4BB5-AFD6-BAE6BCAC5C71","type":"message","text":"I want to parallelize the above code.","user":"U01GC3N3ZJT","ts":"1610308966.245500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"a4C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I want to parallelize the above code."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"c1070d68-abe2-4fc5-a44e-626eba844026","type":"message","text":"If you want to parallelize you should think about each step of your loops. E.g. each step of the inner loop can be performed independently, but working out the full loop it has to wait for the next step of the outer loop you can write\n```for (coordinates, particles) in location_dictionary\n    @sync @async for (p, particle) in enumerate(particles)\n        new_coordinates = bounce(environment, coordinates, walk(coordinates, directions)\n        if haskey(location_dictionary, new_coordinates)\n            push!(location_dictionary[new_coordinates], particle)\n        else location_dictionary[new_coordinates] = particle end\n    end\nend```\nThis means each step of the inner loop go on green threads if you the are available. The @sync tells the system to wait until each step of the inner loop is performed. Then the next step of the outer loop will be worked out. I did't tried out working async in the inner und outer loop. It's up to you to decide if this is possible.\nHTH Frank","user":"U012C82M8T0","ts":"1610322682.251600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Uwt05","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you want to parallelize you should think about each step of your loops. E.g. each step of the inner loop can be performed independently, but working out the full loop it has to wait for the next step of the outer loop you can write\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"for (coordinates, particles) in location_dictionary\n    @sync @async for (p, particle) in enumerate(particles)\n        new_coordinates = bounce(environment, coordinates, walk(coordinates, directions)\n        if haskey(location_dictionary, new_coordinates)\n            push!(location_dictionary[new_coordinates], particle)\n        else location_dictionary[new_coordinates] = particle end\n    end\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"This means each step of the inner loop go on green threads if you the are available. The @sync tells the system to wait until each step of the inner loop is performed. Then the next step of the outer loop will be worked out. I did't tried out working async in the inner und outer loop. It's up to you to decide if this is possible.\nHTH Frank"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"037C76EE-F071-43C5-9F1A-C2C82570D9C4","type":"message","text":"I’m confused because you wrote both @sync and @async before the for loop.","user":"U01GC3N3ZJT","ts":"1610329577.254300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IdiQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m confused because you wrote both @sync and @async before the for loop."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"26dc7eb2-3d46-461a-8ce2-d02da12d6ab3","type":"message","text":"`@async` means each iteration of the loop can be executed asynchronously, `@sync` means need the entire for-loop clause to finish before continuing to the rest of the code","user":"UH8A351DJ","ts":"1610329657.254500","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1610329764.000000"},"blocks":[{"type":"rich_text","block_id":"vgxIS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@async","style":{"code":true}},{"type":"text","text":" means each iteration of the loop can be executed asynchronously, "},{"type":"text","text":"@sync","style":{"code":true}},{"type":"text","text":" means need the entire for-loop clause to finish before continuing to the rest of the code"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"56FFA051-ABA4-4CF0-AEDC-27A6D2FBA6F7","type":"message","text":"Oh, aha.  So, how would this make the loop any faster?  Would I need to make the inner loop parallel and run the script with multiple threads?","user":"U01GC3N3ZJT","ts":"1610331034.256100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ebs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, aha.  So, how would this make the loop any faster?  Would I need to make the inner loop parallel and run the script with multiple threads?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"5978AD13-887E-4F72-B7AB-2A3E24A1473D","type":"message","text":"```Threads.@threads @async @sync for ...\n```","user":"U01GC3N3ZJT","ts":"1610331091.257200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ouh","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Threads.@threads @async @sync for ...\n"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"ffd239c9-2e40-425d-bd7a-f0249aab71a8","type":"message","text":"no, you don't want to threads + async, your loop content is not thread-safe, noticebbly, the `push!`","user":"UH8A351DJ","ts":"1610331143.257400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9YATk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, you don't want to threads + async, your loop content is not thread-safe, noticebbly, the "},{"type":"text","text":"push!","style":{"code":true}}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"1964A624-DF28-4882-80F7-CBB80BD70258","type":"message","text":"Ohhhh, I see...","user":"U01GC3N3ZJT","ts":"1610331259.257900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"H7f","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ohhhh, I see..."}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"A700C989-EFEA-4AB0-89D0-4A4B30FE55B5","type":"message","text":"...but doesn’t the check for an existing array fix that problem?","user":"U01GC3N3ZJT","ts":"1610331321.258800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OxW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"...but doesn’t the check for an existing array fix that problem?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"DF674995-A04C-4292-9692-428410C589D4","type":"message","text":"Or could there end up being a data race if both threads simultaneously decided that a coordinate were empty and decided to add a new key-value pair?","user":"U01GC3N3ZJT","ts":"1610331375.260200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zdVl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or could there end up being a data race if both threads simultaneously decided that a coordinate were empty and decided to add a new key-value pair?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"ec3b2506-3898-41e6-9b6e-e0929488e68f","type":"message","text":"```location_dictionary[new_coordinates]```\nyou need to make sure at any time only a single thread is pushing into this","user":"UH8A351DJ","ts":"1610331375.260400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Hfn6M","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"location_dictionary[new_coordinates]"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"you need to make sure at any time only a single thread is pushing into this"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"041A968E-618C-43BB-B802-D911CC5DC3A8","type":"message","text":"Only a single what?","user":"U01GC3N3ZJT","ts":"1610331434.260700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lrs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Only a single what?"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"},{"client_msg_id":"0733312c-4201-46a4-b2e3-e7643302953d","type":"message","text":"thread","user":"UH8A351DJ","ts":"1610331629.260900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jev","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thread"}]}]}],"thread_ts":"1610298073.201000","parent_user_id":"U01GC3N3ZJT"}]