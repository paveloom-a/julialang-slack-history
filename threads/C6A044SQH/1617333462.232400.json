[{"client_msg_id":"3a232420-86a3-497f-a82d-0e1b2eb1c2fb","type":"message","text":"Hey all, I have a brain teaser for you that has stumped me:\n\nSay if I have a matrix like this:\n\n``` [39.0   2.0  26.0  12.0  33.0  28.0  20.0\n 21.0  50.0   9.0  38.0   3.0  30.0   0.0\n 42.0  40.0   8.0  34.0   4.0  10.0  24.0\n 46.0  14.0  15.0  22.0   6.0  45.0  18.0]```\nWhich is represented by the LinearIndices Matrix:\n\n``` 1  5   9  13  17  21  25\n 2  6  10  14  18  22  26\n 3  7  11  15  19  23  27\n 4  8  12  16  20  24  28```\nWhat I have been trying to figure out is how to find location groups with similar values. In my case, I am trying to make groups within 5 units of each other which would give me value groupings like this: `[42, 46, 40], [9, 8], [14, 15]` etc. and associated position groups: `[3, 4, 7], [10, 11], [8, 12]`. I have been able to find where all the \"similar values\" (as shown by the matrix below where #'s represent similar values and *'s represent unsimiliar values) are but cannot determine how to break down these similar values to groups as I showed with the value grouping.\n\n``` \"*\"  \"*\"  \"*\"  \"*\"  \"#\"  \"#\"  \"*\"\n \"*\"  \"*\"  \"#\"  \"#\"  \"#\"  \"#\"  \"*\"\n \"#\"  \"#\"  \"#\"  \"#\"  \"#\"  \"*\"  \"*\"\n \"#\"  \"*\"  \"*\"  \"*\"  \"#\"  \"*\"  \"*\"```\nDoes anyone have any idea on how I could best get these groupings? Frankly, this feels a lot like a recursive sort of problem but I may be overthinking it. Thank you!","user":"US64J0NPQ","ts":"1617333462.232400","team":"T68168MUP","edited":{"user":"US64J0NPQ","ts":"1617333531.000000"},"blocks":[{"type":"rich_text","block_id":"G7S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey all, I have a brain teaser for you that has stumped me:\n\nSay if I have a matrix like this:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":" [39.0   2.0  26.0  12.0  33.0  28.0  20.0\n 21.0  50.0   9.0  38.0   3.0  30.0   0.0\n 42.0  40.0   8.0  34.0   4.0  10.0  24.0\n 46.0  14.0  15.0  22.0   6.0  45.0  18.0]"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nWhich is represented by the LinearIndices Matrix:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":" 1  5   9  13  17  21  25\n 2  6  10  14  18  22  26\n 3  7  11  15  19  23  27\n 4  8  12  16  20  24  28"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nWhat I have been trying to figure out is how to find location groups with similar values. In my case, I am trying to make groups within 5 units of each other which would give me value groupings like this: "},{"type":"text","text":"[42, 46, 40], [9, 8], [14, 15]","style":{"code":true}},{"type":"text","text":" etc. and associated position groups: "},{"type":"text","text":"[3, 4, 7], [10, 11], [8, 12]","style":{"code":true}},{"type":"text","text":". I have been able to find where all the \"similar values\" (as shown by the matrix below where #'s represent similar values and *'s represent unsimiliar values) are but cannot determine how to break down these similar values to groups as I showed with the value grouping.\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":" \"*\"  \"*\"  \"*\"  \"*\"  \"#\"  \"#\"  \"*\"\n \"*\"  \"*\"  \"#\"  \"#\"  \"#\"  \"#\"  \"*\"\n \"#\"  \"#\"  \"#\"  \"#\"  \"#\"  \"*\"  \"*\"\n \"#\"  \"*\"  \"*\"  \"*\"  \"#\"  \"*\"  \"*\""}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nDoes anyone have any idea on how I could best get these groupings? Frankly, this feels a lot like a recursive sort of problem but I may be overthinking it. Thank you!"}]}]}],"thread_ts":"1617333462.232400","reply_count":19,"reply_users_count":4,"latest_reply":"1617398249.301300","reply_users":["UD0NS8PDF","US64J0NPQ","U66M57AN4","U0138UTB7A4"],"is_locked":false,"subscribed":false},{"client_msg_id":"6e21e40f-2c5e-4512-aeb6-77d6b7d21a5b","type":"message","text":"If the fences between groups are in fixed places, then it’s easy, something like this:\n```julia&gt; function indexgroupby(f, mat)\n         vals = sort(unique(f.(mat)))\n         [findall(x -&gt; f(x)==v, mat) for v in vals]\n       end\nindexgroupby (generic function with 1 method)\n\njulia&gt; inds = indexgroupby(x -&gt; trunc(Int, x/10), vec(mat))\n6-element Vector{Vector{Int64}}:\n [5, 10, 11, 18, 19, 20, 26]\n [8, 12, 13, 23, 28]\n [2, 9, 16, 21, 25, 27]\n [1, 14, 15, 17, 22]\n [3, 4, 7, 24]\n [6]\n\njulia&gt; [mat[i] for i in inds]\n6-element Vector{Vector{Float64}}:\n [2.0, 9.0, 8.0, 3.0, 4.0, 6.0, 0.0]\n [14.0, 15.0, 12.0, 10.0, 18.0]\n [21.0, 26.0, 22.0, 28.0, 20.0, 24.0]\n [39.0, 38.0, 34.0, 33.0, 30.0]\n [42.0, 46.0, 40.0, 45.0]\n [50.0]```\nBut if you want to adjust things so that clusters that are “obviously nearby” stay together, then I think that’s harder. Both because there are many possibilities to search, but also because defining what you mean is messy. What answer should `0:32` return? How about if I delete 3 from that?","user":"UD0NS8PDF","ts":"1617335247.232700","team":"T68168MUP","edited":{"user":"UD0NS8PDF","ts":"1617335366.000000"},"blocks":[{"type":"rich_text","block_id":"MPn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If the fences between groups are in fixed places, then it’s easy, something like this:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> function indexgroupby(f, mat)\n         vals = sort(unique(f.(mat)))\n         [findall(x -> f(x)==v, mat) for v in vals]\n       end\nindexgroupby (generic function with 1 method)\n\njulia> inds = indexgroupby(x -> trunc(Int, x/10), vec(mat))\n6-element Vector{Vector{Int64}}:\n [5, 10, 11, 18, 19, 20, 26]\n [8, 12, 13, 23, 28]\n [2, 9, 16, 21, 25, 27]\n [1, 14, 15, 17, 22]\n [3, 4, 7, 24]\n [6]\n\njulia> [mat[i] for i in inds]\n6-element Vector{Vector{Float64}}:\n [2.0, 9.0, 8.0, 3.0, 4.0, 6.0, 0.0]\n [14.0, 15.0, 12.0, 10.0, 18.0]\n [21.0, 26.0, 22.0, 28.0, 20.0, 24.0]\n [39.0, 38.0, 34.0, 33.0, 30.0]\n [42.0, 46.0, 40.0, 45.0]\n [50.0]"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"But if you want to adjust things so that clusters that are “obviously nearby” stay together, then I think that’s harder. Both because there are many possibilities to search, but also because defining what you mean is messy. What answer should "},{"type":"text","text":"0:32","style":{"code":true}},{"type":"text","text":" return? How about if I delete 3 from that?"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"95303b4e-3af2-4933-a2d8-4040260b6a0f","type":"message","text":"Hey <@UD0NS8PDF> - yea, I am looking at the harder case - sorry if I wasn't terribly clear. When you say, what answer should 0:32 return and deleting 3 from it, what did you mean by that?","user":"US64J0NPQ","ts":"1617338386.233000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5BtJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey "},{"type":"user","user_id":"UD0NS8PDF"},{"type":"text","text":" - yea, I am looking at the harder case - sorry if I wasn't terribly clear. When you say, what answer should 0:32 return and deleting 3 from it, what did you mean by that?"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"5a8cddbf-8c29-48a8-a0fb-280eeef612a7","type":"message","text":"^harder mean \"obviously nearby\" as you put it","user":"US64J0NPQ","ts":"1617338404.233200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D/1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"^harder mean \"obviously nearby\" as you put it"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"64d8f804-3e8f-4160-8849-666b5396bc5e","type":"message","text":"Ok! I guess “clustering algorithm” is the term here. Not an expert but many people have thought about things like this.","user":"UD0NS8PDF","ts":"1617368696.263100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hif","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok! I guess “clustering algorithm” is the term here. Not an expert but many people have thought about things like this."}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"ab4a2ee7-56d7-4d0b-8937-5c0700a2b5c5","type":"message","text":"Ah this is great - do you happen to know where a good place to start looking may be? Thanks!","user":"US64J0NPQ","ts":"1617370012.263300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/3NHN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah this is great - do you happen to know where a good place to start looking may be? Thanks!"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"906D790F-6CF0-4C33-AD37-F2534C231646","type":"message","text":"Maybe this? <https://en.wikipedia.org/wiki/K-means_clustering|https://en.wikipedia.org/wiki/K-means_clustering>  ","user":"UD0NS8PDF","ts":"1617371944.264000","team":"T68168MUP","edited":{"user":"UD0NS8PDF","ts":"1617373065.000000"},"blocks":[{"type":"rich_text","block_id":"00uj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe this? "},{"type":"link","url":"https://en.wikipedia.org/wiki/K-means_clustering","text":"https://en.wikipedia.org/wiki/K-means_clustering"},{"type":"text","text":"  "}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"7E04BAE2-578D-4BCE-B3D0-AFFA93901C54","type":"message","text":"You could treat it like a graph and find the connected components. Make edges between every pair of neighbors that are close enough ","user":"U66M57AN4","ts":"1617377530.276700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iucx=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You could treat it like a graph and find the connected components. Make edges between every pair of neighbors that are close enough "}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"2ba07009-e28d-4c42-9bf9-56de41093604","type":"message","text":"<@U66M57AN4> - yea, that is what I was first thinking of doing actually. Just wasn't sure how to go about doing it. :upside_down_face:","user":"US64J0NPQ","ts":"1617377575.277400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"y28c","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U66M57AN4"},{"type":"text","text":" - yea, that is what I was first thinking of doing actually. Just wasn't sure how to go about doing it. "},{"type":"emoji","name":"upside_down_face"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"7AEABD1D-914B-4262-979B-4AF7CBBAEDF1","type":"message","text":"Its a common pattern in advent of code problems :)","user":"U66M57AN4","ts":"1617377610.278100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uDA1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Its a common pattern in advent of code problems :)"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"7554b9b3-c02f-4536-b35d-06e7b8e93a42","type":"message","text":":eyes:","user":"US64J0NPQ","ts":"1617377641.279100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/gR","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"eyes"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"14939e98-220d-4214-b8f1-a24da9a4f53b","type":"message","text":"Didn't know that! Are there any advent of code problems similar to this?","user":"US64J0NPQ","ts":"1617377656.279300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vmgTS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Didn't know that! Are there any advent of code problems similar to this?"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"b38c9b6f-8c92-4bc8-94fd-52d831272d7a","type":"message","text":"And I really need to do Advent of Code someday! And finish Exercism. And dabble with Rosetta Code. And explore more of Project Euler. :disappointed: ugh! So little time.","user":"US64J0NPQ","ts":"1617377709.279500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5ZMPD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And I really need to do Advent of Code someday! And finish Exercism. And dabble with Rosetta Code. And explore more of Project Euler. "},{"type":"emoji","name":"disappointed"},{"type":"text","text":" ugh! So little time."}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"2ea64166-6d82-4043-82bc-0cbbc151658f","type":"message","text":"I don't recall off teh top of my head, but yeah it's a fun way to get familiarized with a bunch of common problems!","user":"U66M57AN4","ts":"1617377781.279900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=es","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't recall off teh top of my head, but yeah it's a fun way to get familiarized with a bunch of common problems!"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"af4af662-ae79-4e66-b42b-4a1d20a6ed7f","type":"message","text":"the general approach I'd take if this were AoC is to first create the list of edges in teh form of a (source =&gt; [dests...]) dict, then start from any node and accumulate reachable nodes using depth-first or breadth-first traversal of the graph (keep a queue of nodes to process, push on all the children of the current node, push the current node onto the list of nodes in the current component, repeat until there are no more nodes to process)","user":"U66M57AN4","ts":"1617377904.280300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5UdKg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the general approach I'd take if this were AoC is to first create the list of edges in teh form of a (source => [dests...]) dict, then start from any node and accumulate reachable nodes using depth-first or breadth-first traversal of the graph (keep a queue of nodes to process, push on all the children of the current node, push the current node onto the list of nodes in the current component, repeat until there are no more nodes to process)"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"834208c1-1d11-46ba-ab02-3ec0a698678b","type":"message","text":"but there's probably real connected component detection code that is better/more robust in lightgraphs or something like that :slightly_smiling_face:","user":"U66M57AN4","ts":"1617377923.280500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zwu0I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but there's probably real connected component detection code that is better/more robust in lightgraphs or something like that "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"f5bae58e-c29c-4a61-a10b-aa67c2f27017","type":"message","text":"&gt; And I really need to do Advent of Code someday! And finish Exercism. And dabble with Rosetta Code. And explore more of Project Euler. :disappointed: ugh! So little time.\n&gt; \nI feel this so much! So many interesting things to do","user":"U0138UTB7A4","ts":"1617398195.300700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OVhE","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"And I really need to do Advent of Code someday! And finish Exercism. And dabble with Rosetta Code. And explore more of Project Euler. "},{"type":"emoji","name":"disappointed"},{"type":"text","text":" ugh! So little time.\n"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI feel this so much! So many interesting things to do"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"29a751a1-95bd-4566-8f63-85938622aa1c","type":"message","text":"the nice thing about AoC is that it's pretty easy to timebox it since they come out one a day","user":"U66M57AN4","ts":"1617398235.300900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pEz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the nice thing about AoC is that it's pretty easy to timebox it since they come out one a day"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"54830cc3-1189-4e82-896d-0c05f34f88f5","type":"message","text":"at least for me","user":"U66M57AN4","ts":"1617398241.301100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cHn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"at least for me"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"178f8c6b-0406-4af7-a9ae-0af216269c02","type":"message","text":"I also usually give up/skip some days","user":"U66M57AN4","ts":"1617398249.301300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qEk3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I also usually give up/skip some days"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"}]