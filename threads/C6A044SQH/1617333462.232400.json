[{"client_msg_id":"3a232420-86a3-497f-a82d-0e1b2eb1c2fb","type":"message","text":"Hey all, I have a brain teaser for you that has stumped me:\n\nSay if I have a matrix like this:\n\n``` [39.0   2.0  26.0  12.0  33.0  28.0  20.0\n 21.0  50.0   9.0  38.0   3.0  30.0   0.0\n 42.0  40.0   8.0  34.0   4.0  10.0  24.0\n 46.0  14.0  15.0  22.0   6.0  45.0  18.0]```\nWhich is represented by the LinearIndices Matrix:\n\n``` 1  5   9  13  17  21  25\n 2  6  10  14  18  22  26\n 3  7  11  15  19  23  27\n 4  8  12  16  20  24  28```\nWhat I have been trying to figure out is how to find location groups with similar values. In my case, I am trying to make groups within 5 units of each other which would give me value groupings like this: `[42, 46, 40], [9, 8], [14, 15]` etc. and associated position groups: `[3, 4, 7], [10, 11], [8, 12]`. I have been able to find where all the \"similar values\" (as shown by the matrix below where #'s represent similar values and *'s represent unsimiliar values) are but cannot determine how to break down these similar values to groups as I showed with the value grouping.\n\n``` \"*\"  \"*\"  \"*\"  \"*\"  \"#\"  \"#\"  \"*\"\n \"*\"  \"*\"  \"#\"  \"#\"  \"#\"  \"#\"  \"*\"\n \"#\"  \"#\"  \"#\"  \"#\"  \"#\"  \"*\"  \"*\"\n \"#\"  \"*\"  \"*\"  \"*\"  \"#\"  \"*\"  \"*\"```\nDoes anyone have any idea on how I could best get these groupings? Frankly, this feels a lot like a recursive sort of problem but I may be overthinking it. Thank you!","user":"US64J0NPQ","ts":"1617333462.232400","team":"T68168MUP","edited":{"user":"US64J0NPQ","ts":"1617333531.000000"},"blocks":[{"type":"rich_text","block_id":"G7S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey all, I have a brain teaser for you that has stumped me:\n\nSay if I have a matrix like this:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":" [39.0   2.0  26.0  12.0  33.0  28.0  20.0\n 21.0  50.0   9.0  38.0   3.0  30.0   0.0\n 42.0  40.0   8.0  34.0   4.0  10.0  24.0\n 46.0  14.0  15.0  22.0   6.0  45.0  18.0]"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nWhich is represented by the LinearIndices Matrix:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":" 1  5   9  13  17  21  25\n 2  6  10  14  18  22  26\n 3  7  11  15  19  23  27\n 4  8  12  16  20  24  28"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nWhat I have been trying to figure out is how to find location groups with similar values. In my case, I am trying to make groups within 5 units of each other which would give me value groupings like this: "},{"type":"text","text":"[42, 46, 40], [9, 8], [14, 15]","style":{"code":true}},{"type":"text","text":" etc. and associated position groups: "},{"type":"text","text":"[3, 4, 7], [10, 11], [8, 12]","style":{"code":true}},{"type":"text","text":". I have been able to find where all the \"similar values\" (as shown by the matrix below where #'s represent similar values and *'s represent unsimiliar values) are but cannot determine how to break down these similar values to groups as I showed with the value grouping.\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":" \"*\"  \"*\"  \"*\"  \"*\"  \"#\"  \"#\"  \"*\"\n \"*\"  \"*\"  \"#\"  \"#\"  \"#\"  \"#\"  \"*\"\n \"#\"  \"#\"  \"#\"  \"#\"  \"#\"  \"*\"  \"*\"\n \"#\"  \"*\"  \"*\"  \"*\"  \"#\"  \"*\"  \"*\""}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nDoes anyone have any idea on how I could best get these groupings? Frankly, this feels a lot like a recursive sort of problem but I may be overthinking it. Thank you!"}]}]}],"thread_ts":"1617333462.232400","reply_count":6,"reply_users_count":2,"latest_reply":"1617371944.264000","reply_users":["UD0NS8PDF","US64J0NPQ"],"is_locked":false,"subscribed":false},{"client_msg_id":"6e21e40f-2c5e-4512-aeb6-77d6b7d21a5b","type":"message","text":"If the fences between groups are in fixed places, then it’s easy, something like this:\n```julia&gt; function indexgroupby(f, mat)\n         vals = sort(unique(f.(mat)))\n         [findall(x -&gt; f(x)==v, mat) for v in vals]\n       end\nindexgroupby (generic function with 1 method)\n\njulia&gt; inds = indexgroupby(x -&gt; trunc(Int, x/10), vec(mat))\n6-element Vector{Vector{Int64}}:\n [5, 10, 11, 18, 19, 20, 26]\n [8, 12, 13, 23, 28]\n [2, 9, 16, 21, 25, 27]\n [1, 14, 15, 17, 22]\n [3, 4, 7, 24]\n [6]\n\njulia&gt; [mat[i] for i in inds]\n6-element Vector{Vector{Float64}}:\n [2.0, 9.0, 8.0, 3.0, 4.0, 6.0, 0.0]\n [14.0, 15.0, 12.0, 10.0, 18.0]\n [21.0, 26.0, 22.0, 28.0, 20.0, 24.0]\n [39.0, 38.0, 34.0, 33.0, 30.0]\n [42.0, 46.0, 40.0, 45.0]\n [50.0]```\nBut if you want to adjust things so that clusters that are “obviously nearby” stay together, then I think that’s harder. Both because there are many possibilities to search, but also because defining what you mean is messy. What answer should `0:32` return? How about if I delete 3 from that?","user":"UD0NS8PDF","ts":"1617335247.232700","team":"T68168MUP","edited":{"user":"UD0NS8PDF","ts":"1617335366.000000"},"blocks":[{"type":"rich_text","block_id":"MPn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If the fences between groups are in fixed places, then it’s easy, something like this:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> function indexgroupby(f, mat)\n         vals = sort(unique(f.(mat)))\n         [findall(x -> f(x)==v, mat) for v in vals]\n       end\nindexgroupby (generic function with 1 method)\n\njulia> inds = indexgroupby(x -> trunc(Int, x/10), vec(mat))\n6-element Vector{Vector{Int64}}:\n [5, 10, 11, 18, 19, 20, 26]\n [8, 12, 13, 23, 28]\n [2, 9, 16, 21, 25, 27]\n [1, 14, 15, 17, 22]\n [3, 4, 7, 24]\n [6]\n\njulia> [mat[i] for i in inds]\n6-element Vector{Vector{Float64}}:\n [2.0, 9.0, 8.0, 3.0, 4.0, 6.0, 0.0]\n [14.0, 15.0, 12.0, 10.0, 18.0]\n [21.0, 26.0, 22.0, 28.0, 20.0, 24.0]\n [39.0, 38.0, 34.0, 33.0, 30.0]\n [42.0, 46.0, 40.0, 45.0]\n [50.0]"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"But if you want to adjust things so that clusters that are “obviously nearby” stay together, then I think that’s harder. Both because there are many possibilities to search, but also because defining what you mean is messy. What answer should "},{"type":"text","text":"0:32","style":{"code":true}},{"type":"text","text":" return? How about if I delete 3 from that?"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"95303b4e-3af2-4933-a2d8-4040260b6a0f","type":"message","text":"Hey <@UD0NS8PDF> - yea, I am looking at the harder case - sorry if I wasn't terribly clear. When you say, what answer should 0:32 return and deleting 3 from it, what did you mean by that?","user":"US64J0NPQ","ts":"1617338386.233000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5BtJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey "},{"type":"user","user_id":"UD0NS8PDF"},{"type":"text","text":" - yea, I am looking at the harder case - sorry if I wasn't terribly clear. When you say, what answer should 0:32 return and deleting 3 from it, what did you mean by that?"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"5a8cddbf-8c29-48a8-a0fb-280eeef612a7","type":"message","text":"^harder mean \"obviously nearby\" as you put it","user":"US64J0NPQ","ts":"1617338404.233200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D/1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"^harder mean \"obviously nearby\" as you put it"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"64d8f804-3e8f-4160-8849-666b5396bc5e","type":"message","text":"Ok! I guess “clustering algorithm” is the term here. Not an expert but many people have thought about things like this.","user":"UD0NS8PDF","ts":"1617368696.263100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hif","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok! I guess “clustering algorithm” is the term here. Not an expert but many people have thought about things like this."}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"ab4a2ee7-56d7-4d0b-8937-5c0700a2b5c5","type":"message","text":"Ah this is great - do you happen to know where a good place to start looking may be? Thanks!","user":"US64J0NPQ","ts":"1617370012.263300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/3NHN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah this is great - do you happen to know where a good place to start looking may be? Thanks!"}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"},{"client_msg_id":"906D790F-6CF0-4C33-AD37-F2534C231646","type":"message","text":"Maybe this? <https://en.wikipedia.org/wiki/K-means_clustering|https://en.wikipedia.org/wiki/K-means_clustering>  ","user":"UD0NS8PDF","ts":"1617371944.264000","team":"T68168MUP","edited":{"user":"UD0NS8PDF","ts":"1617373065.000000"},"blocks":[{"type":"rich_text","block_id":"00uj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe this? "},{"type":"link","url":"https://en.wikipedia.org/wiki/K-means_clustering","text":"https://en.wikipedia.org/wiki/K-means_clustering"},{"type":"text","text":"  "}]}]}],"thread_ts":"1617333462.232400","parent_user_id":"US64J0NPQ"}]