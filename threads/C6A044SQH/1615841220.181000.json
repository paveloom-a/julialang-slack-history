[{"client_msg_id":"42447885-4b32-45d7-9277-4066882d0ede","type":"message","text":"Hi,\n\nI would like to pass an operator without increasing allocations:\n\n```function foo(dest, x, y)\n  # complicated stuff\n  dest .= x .* y\nend\n\nfunction apply(dest, x, y, op = .*)\n  dest .= op(x,y)\nend```","user":"U7GQE9JP9","ts":"1615841220.181000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cRQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi,\n\nI would like to pass an operator without increasing allocations:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function foo(dest, x, y)\n  # complicated stuff\n  dest .= x .* y\nend\n\nfunction apply(dest, x, y, op = .*)\n  dest .= op(x,y)\nend"}]}]}],"thread_ts":"1615841220.181000","reply_count":9,"reply_users_count":4,"latest_reply":"1615841437.183400","reply_users":["B01J9QZ4SP8","U7GQE9JP9","UH24GRBLL","UDB26738Q"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1615841222.181100","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1615841220.181000","parent_user_id":"U7GQE9JP9"},{"client_msg_id":"57ae5591-8662-4410-81f6-50d42179f626","type":"message","text":"However, using\n```foo2(d,x,y) = apply(d,x,y,.*)```\nI noticed that foo2 allocates more then `Foo`. I guess it is because of the `copyto!` . Is that right?","user":"U7GQE9JP9","ts":"1615841288.181300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x=8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"However, using\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"foo2(d,x,y) = apply(d,x,y,.*)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I noticed that foo2 allocates more then "},{"type":"text","text":"Foo","style":{"code":true}},{"type":"text","text":". I guess it is because of the "},{"type":"text","text":"copyto!","style":{"code":true}},{"type":"text","text":" . Is that right?"}]}]}],"thread_ts":"1615841220.181000","parent_user_id":"U7GQE9JP9"},{"client_msg_id":"0351363f-f4f7-447e-ae14-3d71dcf6e283","type":"message","text":"it's because the broadcasting isn't fused the way you've written it","user":"UH24GRBLL","ts":"1615841322.181500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TB8o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's because the broadcasting isn't fused the way you've written it"}]}]}],"thread_ts":"1615841220.181000","parent_user_id":"U7GQE9JP9"},{"client_msg_id":"7706efd1-9aa3-4d4f-8a04-92a9dd5b3596","type":"message","text":"it should work with `dest .= op.(x,y)` though","user":"UH24GRBLL","ts":"1615841335.181700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wSgZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it should work with "},{"type":"text","text":"dest .= op.(x,y)","style":{"code":true}},{"type":"text","text":" though"}]}]}],"thread_ts":"1615841220.181000","parent_user_id":"U7GQE9JP9"},{"client_msg_id":"c5a04bb9-67e4-4af5-95ef-5a09f2781fb0","type":"message","text":"why passing `.*` instead of calling `op.()`?","user":"UDB26738Q","ts":"1615841342.181900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZMr5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"why passing "},{"type":"text","text":".*","style":{"code":true}},{"type":"text","text":" instead of calling "},{"type":"text","text":"op.()","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1615841220.181000","parent_user_id":"U7GQE9JP9"},{"client_msg_id":"6bbf5595-2854-4e78-b6fe-8f77805d18dd","type":"message","text":"and pass `*` then","user":"UH24GRBLL","ts":"1615841344.182100","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1615841346.000000"},"blocks":[{"type":"rich_text","block_id":"8Wcb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and pass "},{"type":"text","text":"*","style":{"code":true}},{"type":"text","text":" then"}]}]}],"thread_ts":"1615841220.181000","parent_user_id":"U7GQE9JP9"},{"client_msg_id":"4a63970b-5e85-4fd7-a723-28d94c6a770b","type":"message","text":"Ah","user":"U7GQE9JP9","ts":"1615841360.182600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ryu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah"}]}]}],"thread_ts":"1615841220.181000","parent_user_id":"U7GQE9JP9"},{"client_msg_id":"f395610a-388c-4f51-aa2a-9470b43e3c67","type":"message","text":"because I was stupid","user":"U7GQE9JP9","ts":"1615841434.183200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z4olY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"because I was stupid"}]}]}],"thread_ts":"1615841220.181000","parent_user_id":"U7GQE9JP9"},{"client_msg_id":"783a8fdf-5368-4110-88a3-b2e6331efc33","type":"message","text":":thumbsup:","user":"U7GQE9JP9","ts":"1615841437.183400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4R9","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"thumbsup"}]}]}],"thread_ts":"1615841220.181000","parent_user_id":"U7GQE9JP9"}]