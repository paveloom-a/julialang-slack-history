[{"client_msg_id":"cd10e9a4-27d9-4e2c-b305-e5503b9e73aa","type":"message","text":"I'm trying to download files using `HTTP.download` but I can't get the authorization to work.\n\nThe `wget` instructions are:\n```wget --http-user=&lt;username&gt; --http-password=&lt;password&gt; --load-cookies mycookies.txt --save-cookies mycookies.txt --keep-session-cookies --no-check-certificate --auth-no-challenge -r --reject \"index.html*\" -np -e robots=off ```\nBut this doesn't work:\n```HTTP.download(url; user=\"username\", password=\"password\", cookies=true)```\nCan I replicate those flags with HTTP?\n\nThe curl instructions are:\n```curl -b ~/.urs_cookies -c ~/.urs_cookies -L -n -O &lt;url&gt;```","user":"URN898S15","ts":"1612844787.328900","team":"T68168MUP","edited":{"user":"URN898S15","ts":"1612845079.000000"},"blocks":[{"type":"rich_text","block_id":"Zok","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm trying to download files using "},{"type":"text","text":"HTTP.download","style":{"code":true}},{"type":"text","text":" but I can't get the authorization to work.\n\nThe "},{"type":"text","text":"wget","style":{"code":true}},{"type":"text","text":" instructions are:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"wget --http-user=<username> --http-password=<password> --load-cookies mycookies.txt --save-cookies mycookies.txt --keep-session-cookies --no-check-certificate --auth-no-challenge -r --reject \"index.html*\" -np -e robots=off "}]},{"type":"rich_text_section","elements":[{"type":"text","text":"But this doesn't work:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"HTTP.download(url; user=\"username\", password=\"password\", cookies=true)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Can I replicate those flags with HTTP?\n\nThe curl instructions are:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"curl -b ~/.urs_cookies -c ~/.urs_cookies -L -n -O <url>"}]}]}],"thread_ts":"1612844787.328900","reply_count":21,"reply_users_count":3,"latest_reply":"1612851553.333800","reply_users":["B01J9QZ4SP8","URN898S15","U01M24BJPTP"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1612844822.329100","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"0f15bb44-2034-47e9-aea4-266bc6d8f6b6","type":"message","text":":bridge:","user":"URN898S15","ts":"1612845121.329700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6pe","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"bridge"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"7ab5fd87-875a-4c1a-b0d1-4dff2d61e5dc","type":"message","text":"Seems `user` and `password` aren't keywords thats from something else, HTTP just silently ignores unknown keywords. Seems this needs an Authorization header manually constructed?","user":"URN898S15","ts":"1612846361.329900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lQpe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Seems "},{"type":"text","text":"user","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"password","style":{"code":true}},{"type":"text","text":" aren't keywords thats from something else, HTTP just silently ignores unknown keywords. Seems this needs an Authorization header manually constructed?"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"4a92ed66-2b8b-463c-919e-315071ca62a3","type":"message","text":"&gt; Basic Authentication options\n&gt; Basic authentication is detected automatically from the provided url’s userinfo (in the form <scheme://user>:password@host) and adds the Authorization: Basic header\n<https://juliaweb.github.io/HTTP.jl/stable/public_interface/#Public-Interface>","user":"U01M24BJPTP","ts":"1612848372.330100","team":"T68168MUP","edited":{"user":"U01M24BJPTP","ts":"1612848414.000000"},"blocks":[{"type":"rich_text","block_id":"wco7","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Basic Authentication options\nBasic authentication is detected automatically from the provided url’s userinfo (in the form "},{"type":"link","url":"scheme://user"},{"type":"text","text":":password@host) and adds the Authorization: Basic header"}]},{"type":"rich_text_section","elements":[{"type":"link","url":"https://juliaweb.github.io/HTTP.jl/stable/public_interface/#Public-Interface"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"9b909ff5-00ab-473f-ad52-50f019ca8183","type":"message","text":"Oh right, thanks. It's at least failing with an error now :))","user":"URN898S15","ts":"1612848558.330400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"m+4hu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh right, thanks. It's at least failing with an error now :))"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"113f440e-6e15-47aa-a049-dde609def70d","type":"message","text":"The basic wget actually works with none of those parameters, just user and password. But `HTTP.download` still doesn't work using `scheme`. It throws and `IOerror` connection refused error.","user":"URN898S15","ts":"1612849224.330600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WH5h+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The basic wget actually works with none of those parameters, just user and password. But "},{"type":"text","text":"HTTP.download","style":{"code":true}},{"type":"text","text":" still doesn't work using "},{"type":"text","text":"scheme","style":{"code":true}},{"type":"text","text":". It throws and "},{"type":"text","text":"IOerror","style":{"code":true}},{"type":"text","text":" connection refused error."}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"c1157673-adf5-4abf-94c8-fee9ea315225","type":"message","text":"Oh no actually it's just returning the login page - I had a typo.","user":"URN898S15","ts":"1612849465.330800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IA71","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh no actually it's just returning the login page - I had a typo."}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"e47b4f74-0299-4244-b9bd-8bb616435274","type":"message","text":"If the authentication method is HTTP Basic Authentication, cookies are unnecessary. Usually cookies are generated when passwords are POSTed in a HTML form.","user":"U01M24BJPTP","ts":"1612850098.331000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ga/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If the authentication method is HTTP Basic Authentication, cookies are unnecessary. Usually cookies are generated when passwords are POSTed in a HTML form."}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"eee14054-a90c-4c82-a961-d42556d539a9","type":"message","text":"yeah, but they do like specifying the cookies flags in the docs...","user":"URN898S15","ts":"1612850237.331200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ByC2l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, but they do like specifying the cookies flags in the docs..."}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"399ae3fc-1a75-4a99-8e51-b9d2e9ee491b","type":"message","text":"(this is NASA)","user":"URN898S15","ts":"1612850243.331400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QUo=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(this is NASA)"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"af4a0205-789b-4e2e-9f11-4fe457963cac","type":"message","text":"Using wget with the basic auth syntax doesn't work either by the way. But with `--user` or `--http-user` it works fine","user":"URN898S15","ts":"1612850357.331600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WLNGE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Using wget with the basic auth syntax doesn't work either by the way. But with "},{"type":"text","text":"--user","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"--http-user","style":{"code":true}},{"type":"text","text":" it works fine"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"247a5801-7738-4fd2-9cf4-836dfcddf356","type":"message","text":"Not sure what request wget is actually sending","user":"URN898S15","ts":"1612850377.331800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9fs=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not sure what request wget is actually sending"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"9a52c3c1-455d-42dc-89da-2fb1475ba3ef","type":"message","text":"It takes 3 tries to get a 200, the first few are 302s/401s. HTTP.jl just returns the 302","user":"URN898S15","ts":"1612850431.332000","team":"T68168MUP","edited":{"user":"URN898S15","ts":"1612850467.000000"},"blocks":[{"type":"rich_text","block_id":"7od5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It takes 3 tries to get a 200, the first few are 302s/401s. HTTP.jl just returns the 302"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"e7e26614-0aa2-46a5-aecc-5d1ba323322d","type":"message","text":"compile wget with debug support and wget -d should get all the debug info. however, user:password@host should work the same as --user. If the password contains shell special characters, it should be quoted.","user":"U01M24BJPTP","ts":"1612850565.332300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wWS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"compile wget with debug support and wget -d should get all the debug info. however, user:password@host should work the same as --user. If the password contains shell special characters, it should be quoted."}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"9dd43b1d-31b3-401f-9f78-224c896327c2","type":"message","text":"you can try `wget -S` to get server response headers.","user":"U01M24BJPTP","ts":"1612850660.332500","team":"T68168MUP","edited":{"user":"U01M24BJPTP","ts":"1612850813.000000"},"blocks":[{"type":"rich_text","block_id":"hos","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you can try "},{"type":"text","text":"wget -S","style":{"code":true}},{"type":"text","text":" to get server response headers."}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"7bc32e1a-c860-4b1d-9d99-6d97a858cc7b","type":"message","text":"thanks, arch seems to have debug on by default :slightly_smiling_face:","user":"URN898S15","ts":"1612850833.332800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7AWI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks, arch seems to have debug on by default "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"974d65a8-45db-414a-93da-4022b2bc6d73","type":"message","text":"I learned that because debug is disabled by homebrew :cry:","user":"U01M24BJPTP","ts":"1612850988.333000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aY+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I learned that because debug is disabled by homebrew "},{"type":"emoji","name":"cry"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"a0be4ee7-937d-487a-b2d2-411b4489b0a0","type":"message","text":"Arch is good for that kind of thing...","user":"URN898S15","ts":"1612851035.333200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=niou","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Arch is good for that kind of thing..."}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"3cc3a4d7-25e5-49ef-9b9f-7e8c41aac852","type":"message","text":"It seems there is a redirect for oauth that wget is following but HTTP.jl isn't","user":"URN898S15","ts":"1612851058.333400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FZK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It seems there is a redirect for oauth that wget is following but HTTP.jl isn't"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"53cd23ea-7e14-4196-a3b9-0a599b0391eb","type":"message","text":"and wget also doesn't follow it if you use the `user:password@host` syntax","user":"URN898S15","ts":"1612851110.333600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EiqF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and wget also doesn't follow it if you use the "},{"type":"text","text":"user:password@host","style":{"code":true}},{"type":"text","text":" syntax"}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"},{"client_msg_id":"e58b31b3-d37b-4798-a0b8-a340fa10857f","type":"message","text":"That’s odd.","user":"U01M24BJPTP","ts":"1612851553.333800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u9MqG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That’s odd."}]}]}],"thread_ts":"1612844787.328900","parent_user_id":"URN898S15"}]