[{"client_msg_id":"98a77320-2473-4a33-a57f-37311a7a3b2f","type":"message","text":"I have a situation where I'm reading in a few hundred json files into dataframes, before doing some munging on the data. Each file is first checked that it is not empty, and does not contain empty json (\"[]\") before passing it to\n    table = jsontable(cap_file[end])\n    df = DataFrame(table)\n    df = @transform(df, time = string.(chop.(:time)))\n       @transform(df, time = DateTime.(:time))\nhowever, just occasionally, the time column has an incorrect format. Instead of using colons to separate time it is using periods. I can fix this with a regex, but what I want to do is rap the above in an exception handler, in the catch block try the regex fix, and then go ahead and do the transform again. However, I don't see a way to do a retry in Julia's exception handler. Am I missing something?","user":"U01GFAJRZ44","ts":"1610630951.013000","team":"T68168MUP","edited":{"user":"U01GFAJRZ44","ts":"1610631190.000000"},"blocks":[{"type":"rich_text","block_id":"b4iP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a situation where I'm reading in a few hundred json files into dataframes, before doing some munging on the data. Each file is first checked that it is not empty, and does not contain empty json (\"[]\") before passing it to\n    table = jsontable(cap_file[end])\n    df = DataFrame(table)\n    df = @transform(df, time = string.(chop.(:time)))\n       @transform(df, time = DateTime.(:time))\nhowever, just occasionally, the time column has an incorrect format. Instead of using colons to separate time it is using periods. I can fix this with a regex, but what I want to do is rap the above in an exception handler, in the catch block try the regex fix, and then go ahead and do the transform again. However, I don't see a way to do a retry in Julia's exception handler. Am I missing something?"}]}]}],"thread_ts":"1610630951.013000","reply_count":1,"reply_users_count":1,"latest_reply":"1610650147.023400","reply_users":["U019K6Q9N15"],"subscribed":false},{"client_msg_id":"0c15fa4a-70fa-4b6a-b979-85b640d2a0ad","type":"message","text":"I think your proposed solution is more complex than it needs to be.\nWrite a function which will reliably convert the time to a date, e.g.\n```function parse_time(time_str::String)::Date\n  if is_colon_string(time_str)\n    return parse_colon_string(time_str)\n  else if is_dot_string(time_str)\n    return parse_dot_string(time_str)\n  else\n    error(\"This is odd!\")\n  end\nend```\nwhere `is_colon_string` , `parse_colon_string` , `is_dot_string` , and `parse_dot_string` are all function you write yourself,\nand then do\n```df = @transform(df, time=parse_time(:time))```","user":"U019K6Q9N15","ts":"1610650147.023400","team":"T68168MUP","edited":{"user":"U019K6Q9N15","ts":"1610685334.000000"},"blocks":[{"type":"rich_text","block_id":"exlNw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think your proposed solution is more complex than it needs to be.\nWrite a function which will reliably convert the time to a date, e.g.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function parse_time(time_str::String)::Date\n  if is_colon_string(time_str)\n    return parse_colon_string(time_str)\n  else if is_dot_string(time_str)\n    return parse_dot_string(time_str)\n  else\n    error(\"This is odd!\")\n  end\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"where "},{"type":"text","text":"is_colon_string","style":{"code":true}},{"type":"text","text":" , "},{"type":"text","text":"parse_colon_string","style":{"code":true}},{"type":"text","text":" , "},{"type":"text","text":"is_dot_string","style":{"code":true}},{"type":"text","text":" , and "},{"type":"text","text":"parse_dot_string","style":{"code":true}},{"type":"text","text":" are all function you write yourself,\nand then do\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"df = @transform(df, time=parse_time(:time))"}]}]}],"thread_ts":"1610630951.013000","parent_user_id":"U01GFAJRZ44"}]