[{"type":"message","text":"Hi! I'm trying to use Julia for a bunch of image processing related tasks. My content is in EXR, which doesn't seem to have good support (A bit in ImageMagick, but I think I need more comprehensive support). I have pretty good experience with OpenEXR's C++ API, but none with Julia's FFI and very little with Julia. If I were interested in creating a OpenEXR package, any tips? It looks like there might be a semi-standard image loading interface to try to fit?","user":"U01T0B2F03H","ts":"1617736790.097100","team":"T68168MUP","thread_ts":"1617736790.097100","reply_count":30,"reply_users_count":3,"latest_reply":"1617745948.108800","reply_users":["U01T0B2F03H","USU9FRPEU","U0110B59U0Y"],"is_locked":false,"subscribed":false},{"type":"message","text":"I guess specifically tips/references for integrating the build system would be especially useful. In particular OpenEXR uses CMake, are there any good examples integrating CMake libs?","user":"U01T0B2F03H","ts":"1617737041.097200","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"093baa54-441f-43ba-97b0-5f4565b4d372","type":"message","text":"Do they have a plain C api? It's relatively easy to call that from Julia via `ccall` ? <https://docs.julialang.org/en/v1/manual/calling-c-and-fortran-code/>","user":"USU9FRPEU","ts":"1617740105.099700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V+fo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do they have a plain C api? It's relatively easy to call that from Julia via "},{"type":"text","text":"ccall","style":{"code":true}},{"type":"text","text":" ? "},{"type":"link","url":"https://docs.julialang.org/en/v1/manual/calling-c-and-fortran-code/"}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"03418e4e-8323-4f80-96e2-d571371f246e","type":"message","text":"If not, then you'll have to use something like <https://github.com/JuliaInterop/CxxWrap.jl>","user":"USU9FRPEU","ts":"1617740163.099900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nj9w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If not, then you'll have to use something like "},{"type":"link","url":"https://github.com/JuliaInterop/CxxWrap.jl"}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Ok, yeah I think I can get ccall to work, but how do I integrate the build system so that I can distribute it on all the platforms?","user":"U01T0B2F03H","ts":"1617744252.103400","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"1d0e2f14-4107-477b-8f9a-2c283448f758","type":"message","text":"Whats you are looking for is <https://github.com/JuliaPackaging/BinaryBuilder.jl|BinaryBuilder.jl> and its <https://docs.binarybuilder.org/stable/|docs>.","user":"U0110B59U0Y","ts":"1617744616.103600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QKPC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Whats you are looking for is "},{"type":"link","url":"https://github.com/JuliaPackaging/BinaryBuilder.jl","text":"BinaryBuilder.jl"},{"type":"text","text":" and its "},{"type":"link","url":"https://docs.binarybuilder.org/stable/","text":"docs"},{"type":"text","text":"."}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Awesome! Looks maybe like what I want.","user":"U01T0B2F03H","ts":"1617744941.103800","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"One concern I see so far is: `within an easily reproducible and reliable Linux environment` One concern I have is building for Windows/MacOS as well.","user":"U01T0B2F03H","ts":"1617744978.104000","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Ohh, I see. Is Julia always built under cross-compilation?","user":"U01T0B2F03H","ts":"1617745143.104200","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"f520355a-8f62-4b6b-9535-677b6f397272","type":"message","text":"I don't think Julia itself is built using cross-compilation AFAIK, but BinaryBuilder.jl and that ecosystem is. See the <#C674ELDNX|binarybuilder>channel.","user":"USU9FRPEU","ts":"1617745374.104400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2VWd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think Julia itself is built using cross-compilation AFAIK, but BinaryBuilder.jl and that ecosystem is. See the "},{"type":"channel","channel_id":"C674ELDNX"},{"type":"text","text":"channel."}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"3e4ea8ea-44fc-4bb6-9141-eabcc9c625de","type":"message","text":"I don't know if Julia is cross-compiled. But binary builder do cross-compilations to facilitate (I guess) the build pipeline. I've used binary builder provided GTK in Linux AND Windows, worked like a charm.","user":"U0110B59U0Y","ts":"1617745395.104600","team":"T68168MUP","edited":{"user":"U0110B59U0Y","ts":"1617745443.000000"},"blocks":[{"type":"rich_text","block_id":"8EQPI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't know if Julia is cross-compiled. But binary builder do cross-compilations to facilitate (I guess) the build pipeline. I've used binary builder provided GTK in Linux AND Windows, worked like a charm."}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"a0d99c54-b687-46f3-a2c3-f7c67d2e95f5","type":"message","text":"To get start there, see <https://github.com/JuliaPackaging/Yggdrasil>","user":"USU9FRPEU","ts":"1617745429.104800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NIp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"To get start there, see "},{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil"}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Ok..","user":"U01T0B2F03H","ts":"1617745433.105000","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Are all binary packages built with BinaryBuilder?","user":"U01T0B2F03H","ts":"1617745458.105300","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"5e2a0310-ed9b-489f-b371-67cf6e6694d5","type":"message","text":"Not all (for example ones based on closed source, like MKL) but a LOT are. I would say that probably all the ones based on open source are. :p","user":"U0110B59U0Y","ts":"1617745552.105500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GQhJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not all (for example ones based on closed source, like MKL) but a LOT are. I would say that probably all the ones based on open source are. :p"}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Ok.","user":"U01T0B2F03H","ts":"1617745560.105700","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"76ae9907-2eff-4d08-831e-8f64446c8aa0","type":"message","text":"Here's an example of one build_tarballs.jl recipe I made for a CMake based project:\n<https://github.com/JuliaPackaging/Yggdrasil/blob/master/I/ImarisWriter/build_tarballs.jl>","user":"USU9FRPEU","ts":"1617745561.105900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"netr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here's an example of one build_tarballs.jl recipe I made for a CMake based project:\n"},{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/blob/master/I/ImarisWriter/build_tarballs.jl"}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Ok, it looks like it's all msys or cross compilation, afaict","user":"U01T0B2F03H","ts":"1617745588.106100","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Like, no linking to MSVC libs.","user":"U01T0B2F03H","ts":"1617745595.106300","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"83eb737e-4589-43be-a41e-8541a807945d","type":"message","text":"Some of them cheat. For example, we have cross compilation issues with HDF5, so we just repackage other people's binaries:\n<https://github.com/JuliaPackaging/Yggdrasil/blob/master/H/HDF5/build_tarballs.jl>","user":"USU9FRPEU","ts":"1617745606.106500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kXecp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Some of them cheat. For example, we have cross compilation issues with HDF5, so we just repackage other people's binaries:\n"},{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/blob/master/H/HDF5/build_tarballs.jl"}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Ok right!","user":"U01T0B2F03H","ts":"1617745652.106700","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Looks like BinaryBuilder is the authoritive mechanism to build binaries for Windows.","user":"U01T0B2F03H","ts":"1617745676.106900","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Sounds alright.","user":"U01T0B2F03H","ts":"1617745681.107100","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"129b45c0-a022-4d91-a87f-8c257396570b","type":"message","text":"yea, if you can cross compile","user":"USU9FRPEU","ts":"1617745711.107300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EUP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yea, if you can cross compile"}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Yeah, OpenEXR should cross-compile, and if there are any problems I have worked with the maintainers for other fixes.","user":"U01T0B2F03H","ts":"1617745746.107500","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"3868ef66-2851-4571-817b-456b848eea54","type":"message","text":"GR.jl uses a hybrid system configurable using and environmental variable:\n<https://github.com/jheinen/GR.jl/blob/master/deps/build.jl>\n\nYou can set it to use the BinaryBuilder.jl binaries or download a tarball from upstream.","user":"USU9FRPEU","ts":"1617745770.107700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"I+A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"GR.jl uses a hybrid system configurable using and environmental variable:\n"},{"type":"link","url":"https://github.com/jheinen/GR.jl/blob/master/deps/build.jl"},{"type":"text","text":"\n\nYou can set it to use the BinaryBuilder.jl binaries or download a tarball from upstream."}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":"Does everyone put their build_tarballs.jl in the Yggdrasil repo?","user":"U01T0B2F03H","ts":"1617745808.107900","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"7d86a900-f066-4c5c-8b7a-893f5ad79aa2","type":"message","text":"Using BinbaryBuilder.jl is the lowest maintenance option.","user":"USU9FRPEU","ts":"1617745824.108100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=eyA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Using BinbaryBuilder.jl is the lowest maintenance option."}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"a2c1b035-84fa-4fc9-8ca7-9b13e9491077","type":"message","text":"Yea, so if you run the BinaryBuilder wizard, it actually automates the process of making a pull request to Yggdrasil","user":"USU9FRPEU","ts":"1617745857.108300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XjD=+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yea, so if you run the BinaryBuilder wizard, it actually automates the process of making a pull request to Yggdrasil"}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"type":"message","text":":+1:","user":"U01T0B2F03H","ts":"1617745864.108500","team":"T68168MUP","thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"},{"client_msg_id":"2e2dccff-f9f0-441c-99bf-7ffb2a58f13f","type":"message","text":"The wizard basically creates a standard chroot environment where you can test your build script. The actual building is done by the BinaryBuilder system using your build_tarballs.jl script.","user":"USU9FRPEU","ts":"1617745948.108800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ngN6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The wizard basically creates a standard chroot environment where you can test your build script. The actual building is done by the BinaryBuilder system using your build_tarballs.jl script."}]}]}],"thread_ts":"1617736790.097100","parent_user_id":"U01T0B2F03H"}]