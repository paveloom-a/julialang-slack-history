[{"client_msg_id":"226d2acc-b94b-4af7-9e30-bdcc417ede6b","type":"message","text":"How do you explain this behavior?\n```julia&gt; mktemp() do path, io\n           write(path, \"1234\\n\")\n           read(path, Int)\n       end\nERROR: EOFError: read end of file```\nIs the only way around this `parse(Int, readline(path))`?","user":"UC81ESVH6","ts":"1609013563.076000","team":"T68168MUP","edited":{"user":"UC81ESVH6","ts":"1609013635.000000"},"blocks":[{"type":"rich_text","block_id":"kfKVr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How do you explain this behavior?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> mktemp() do path, io\n           write(path, \"1234\\n\")\n           read(path, Int)\n       end\nERROR: EOFError: read end of file"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nIs the only way around this "},{"type":"text","text":"parse(Int, readline(path))","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1609013563.076000","reply_count":17,"reply_users_count":4,"latest_reply":"1609020965.087600","reply_users":["UH24GRBLL","U7HAYKY9X","U01FKQQ7J0J","UC81ESVH6"],"subscribed":false},{"client_msg_id":"db1b4980-338e-4feb-941b-2d0bee39d6d1","type":"message","text":"`flush`?","user":"UH24GRBLL","ts":"1609013657.076200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j39","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"flush","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"d0d4cec4-305a-4f8e-ae07-8451736a6e45","type":"message","text":"iirc, `write` doesn't flush, whereas `println`/`print` do","user":"UH24GRBLL","ts":"1609013689.076400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"84s6d","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"iirc, "},{"type":"text","text":"write","style":{"code":true}},{"type":"text","text":" doesn't flush, whereas "},{"type":"text","text":"println","style":{"code":true}},{"type":"text","text":"/"},{"type":"text","text":"print","style":{"code":true}},{"type":"text","text":" do"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"e64d1400-d949-4a36-80ce-48606c82aa3a","type":"message","text":"I would probably write/read to the file, not the path","user":"U7HAYKY9X","ts":"1609013920.076600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PI0x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would probably write/read to the file, not the path"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"e8f4a59e-af47-416d-94e9-f4e31b652468","type":"message","text":"no, that's fine","user":"UH24GRBLL","ts":"1609013943.076800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qtM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, that's fine"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"85fac1d4-846b-4a05-bf58-6453f20c2741","type":"message","text":"``` read(filename::AbstractString, args...)\n\n Open a file and read its contents. args```","user":"UH24GRBLL","ts":"1609013946.077000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N95","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":" read(filename::AbstractString, args...)\n\n Open a file and read its contents. args"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"64d53876-3dc7-40fe-9823-0e72de8471e7","type":"message","text":"Right, but that presumably attempts to re-open the already opened file","user":"U7HAYKY9X","ts":"1609013970.077200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UWg8A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right, but that presumably attempts to re-open the already opened file"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"28c6a702-96de-46d2-a4c3-ea48a2619de6","type":"message","text":"yep","user":"UH24GRBLL","ts":"1609014127.077400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6cwmB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yep"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"dfe20b1d-6673-4f39-90c7-b3e2bf23faa2","type":"message","text":"should be fine tho if you `flush` in between","user":"UH24GRBLL","ts":"1609014154.077600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PC/G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"should be fine tho if you "},{"type":"text","text":"flush","style":{"code":true}},{"type":"text","text":" in between"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"a997049d-fcb9-48ec-b62e-fe0468f69b1b","type":"message","text":"`Int` is probably `Int64` and you've only written 5 bytes to the file.  If you want to get back `1234` I think you will have to use `parse()` otherwise the contents will be read as a binary value:\n```julia&gt; mktemp() do path, io\n       write(path, \"1234\\n\")\n       read(path, UInt32)\n       end\n0x34333231```","user":"U01FKQQ7J0J","ts":"1609017165.078200","team":"T68168MUP","edited":{"user":"U01FKQQ7J0J","ts":"1609017209.000000"},"blocks":[{"type":"rich_text","block_id":"l253","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Int","style":{"code":true}},{"type":"text","text":" is probably "},{"type":"text","text":"Int64","style":{"code":true}},{"type":"text","text":" and you've only written 5 bytes to the file.  If you want to get back "},{"type":"text","text":"1234","style":{"code":true}},{"type":"text","text":" I think you will have to use "},{"type":"text","text":"parse()","style":{"code":true}},{"type":"text","text":" otherwise the contents will be read as a binary value:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> mktemp() do path, io\n       write(path, \"1234\\n\")\n       read(path, UInt32)\n       end\n0x34333231"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"ba0fc6b8-833a-477f-b733-5020760f0be7","type":"message","text":"Is there no efficient way to read non-string values from a file? I've noticed `readdlm`is a lot heavier than `read(io, T)` in a for loop for this use case.","user":"UC81ESVH6","ts":"1609018911.078700","team":"T68168MUP","edited":{"user":"UC81ESVH6","ts":"1609019481.000000"},"blocks":[{"type":"rich_text","block_id":"h8y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there no efficient way to read non-string values from a file? I've noticed `readdlm`is a lot heavier than "},{"type":"text","text":"read(io, T)","style":{"code":true}},{"type":"text","text":" in a for loop for this use case."}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"daefee6d-9043-441d-9d00-e8c1fd74181f","type":"message","text":"Sure, you can also do e.g. `read(Int, io)` or `read(io)`","user":"U7HAYKY9X","ts":"1609018965.078900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OKTt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sure, you can also do e.g. "},{"type":"text","text":"read(Int, io)","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"read(io)","style":{"code":true}}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"69cd54fb-a47c-4adf-8bed-e67b42faf411","type":"message","text":"Right, that's what I meant. To clarify, my original question was not about the `write`/`read` `mktemp` pattern, that works as expected. The EOFError shown above occurs during the `read`. Here's a different example: given a file with two numbers 3248366 and 4738476 on two lines:\n```julia&gt; open(\"nums.txt\") do io\n       read(io,Int), read(io,Int)\n       end\n(735835182735831603, 735836286542362420)```","user":"UC81ESVH6","ts":"1609019682.086200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jlu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right, that's what I meant. To clarify, my original question was not about the "},{"type":"text","text":"write","style":{"code":true}},{"type":"text","text":"/"},{"type":"text","text":"read","style":{"code":true}},{"type":"text","text":" "},{"type":"text","text":"mktemp","style":{"code":true}},{"type":"text","text":" pattern, that works as expected. The EOFError shown above occurs during the "},{"type":"text","text":"read","style":{"code":true}},{"type":"text","text":". Here's a different example: given a file with two numbers 3248366 and 4738476 on two lines:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> open(\"nums.txt\") do io\n       read(io,Int), read(io,Int)\n       end\n(735835182735831603, 735836286542362420)"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"b2eed948-c3db-40e6-a85f-5e1bc93d5c65","type":"message","text":"So the problem is that what is in the file is actually text, so you need to read it in as a string, and then convert to an integer.","user":"U7HAYKY9X","ts":"1609019870.086400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"05U8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So the problem is that what is in the file is actually text, so you need to read it in as a string, and then convert to an integer."}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"91940aad-1de2-4bb7-8bd1-2c770722a217","type":"message","text":"```read_num_line(io) = parse(Int, readline(io))\nopen(\"nums.txt\") do io\n    read_num_line(io), read_num_line(io)\nend```","user":"U7HAYKY9X","ts":"1609019932.086600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qsXp","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"read_num_line(io) = parse(Int, readline(io))\nopen(\"nums.txt\") do io\n    read_num_line(io), read_num_line(io)\nend"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"c4d6b1ca-3cb6-45ee-987b-4e20498d9d52","type":"message","text":"Ah, so `read(..., Int)` is more for binary files?","user":"UC81ESVH6","ts":"1609020522.087100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FLHD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, so "},{"type":"text","text":"read(..., Int)","style":{"code":true}},{"type":"text","text":" is more for binary files?"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"},{"client_msg_id":"89629f4f-494c-490d-b818-2a0e1f392cca","type":"message","text":"yep","user":"U7HAYKY9X","ts":"1609020643.087300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D=FY/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yep"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6","reactions":[{"name":"+1","users":["UC81ESVH6"],"count":1}]},{"client_msg_id":"e60c675a-5880-4261-8fcf-60cb9442cc0f","type":"message","text":"`read(..., Int)` reads the bytes and interprets them as Int","user":"UH24GRBLL","ts":"1609020965.087600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+07","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"read(..., Int)","style":{"code":true}},{"type":"text","text":" reads the bytes and interprets them as Int"}]}]}],"thread_ts":"1609013563.076000","parent_user_id":"UC81ESVH6"}]