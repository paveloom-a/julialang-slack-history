[{"client_msg_id":"78b05a7e-a041-4879-abf7-da5a6fe1eb47","type":"message","text":"I feel like I'm missing a very basic understanding here: I have the following piece of code:\n```import Base.:&lt;\n\nfunction Base.:&lt;(x::nf_elem,y::nf_elem)\n    @assert parent(x) == parent(y)\n    field = parent(x)\n    @assert istotally_real(field)\n    places = infinite_places(field)\n    \n    if x-y == 0\n       return false\n    end\n    return isnegative(x-y,places[1])\nend```\nwhere all we need to know, I think, is that `nf_elem` is a type for elements of a number field: I want to be able to compare them, so I extend `&lt;`  and it works.\nNow, I want to test `35 &lt; a`  for `a::nf_elem` , and julia is unhappy because I haven't defined the required function of signature `Int,nf_elem` . Should I redefine it by hand, or can I use conversion or promotion for that?","user":"U01MG0TN079","ts":"1615276535.149000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"y7ED","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I feel like I'm missing a very basic understanding here: I have the following piece of code:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"import Base.:<\n\nfunction Base.:<(x::nf_elem,y::nf_elem)\n    @assert parent(x) == parent(y)\n    field = parent(x)\n    @assert istotally_real(field)\n    places = infinite_places(field)\n    \n    if x-y == 0\n       return false\n    end\n    return isnegative(x-y,places[1])\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"where all we need to know, I think, is that "},{"type":"text","text":"nf_elem","style":{"code":true}},{"type":"text","text":" is a type for elements of a number field: I want to be able to compare them, so I extend "},{"type":"text","text":"<","style":{"code":true}},{"type":"text","text":"  and it works.\nNow, I want to test "},{"type":"text","text":"35 < a","style":{"code":true}},{"type":"text","text":"  for "},{"type":"text","text":"a::nf_elem","style":{"code":true}},{"type":"text","text":" , and julia is unhappy because I haven't defined the required function of signature "},{"type":"text","text":"Int,nf_elem","style":{"code":true}},{"type":"text","text":" . Should I redefine it by hand, or can I use conversion or promotion for that?"}]}]}],"thread_ts":"1615276535.149000","reply_count":32,"reply_users_count":4,"latest_reply":"1615280639.156100","reply_users":["B01J9QZ4SP8","UH24GRBLL","U85R3JJ8L","U01MG0TN079"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1615276536.149100","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"4bd881fa-d2b4-43e8-95b1-f0deb0da799c","type":"message","text":"(if you do `function Base.:&lt;`, you don't need the `import`)","user":"UH24GRBLL","ts":"1615278593.149300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"igMd6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(if you do "},{"type":"text","text":"function Base.:<","style":{"code":true}},{"type":"text","text":", you don't need the "},{"type":"text","text":"import","style":{"code":true}},{"type":"text","text":")"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"815226d4-c6ab-46a8-bd7f-b345ce21c903","type":"message","text":"you should be able to use promotion","user":"UH24GRBLL","ts":"1615278615.149500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xnUhl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you should be able to use promotion"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"bb88e3d2-f092-4e8a-9a74-5f853cecc599","type":"message","text":"I don't know off the top of my head whether it's implemented by default, but `Base.:&lt;(x, y::nf_elem) = &lt;(promote(x,y)...)` with the corresponding version with swapped arguments should be all you need","user":"UH24GRBLL","ts":"1615278752.149700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ASFdx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't know off the top of my head whether it's implemented by default, but "},{"type":"text","text":"Base.:<(x, y::nf_elem) = <(promote(x,y)...)","style":{"code":true}},{"type":"text","text":" with the corresponding version with swapped arguments should be all you need"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"336b229a-95db-47f4-b52e-fd70ce6d6a90","type":"message","text":"and if that alone doesn't work, you can throw in `promote_rule(::Type{nf_elem}, ::Type{&lt;:Number}) = nf_elem` though whether that works depends on how `nf_elem` is implemented","user":"UH24GRBLL","ts":"1615278841.149900","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1615278863.000000"},"blocks":[{"type":"rich_text","block_id":"5SK3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and if that alone doesn't work, you can throw in "},{"type":"text","text":"promote_rule(::Type{nf_elem}, ::Type{<:Number}) = nf_elem","style":{"code":true}},{"type":"text","text":" though whether that works depends on how "},{"type":"text","text":"nf_elem","style":{"code":true}},{"type":"text","text":" is implemented"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"a05f7f74-a991-4480-94c1-2bd154b2a305","type":"message","text":"For more info, see <https://docs.julialang.org/en/v1/manual/conversion-and-promotion/#Promotion>","user":"UH24GRBLL","ts":"1615278875.150200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sfekL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For more info, see "},{"type":"link","url":"https://docs.julialang.org/en/v1/manual/conversion-and-promotion/#Promotion"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"4fa80eac-6896-4444-961f-3d9a48585c06","type":"message","text":"No, this does not work","user":"U85R3JJ8L","ts":"1615278979.150400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"n0ilR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No, this does not work"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"4ff74da5-6415-4f00-8965-3c979cb1c57a","type":"message","text":"are there no promotion rules defined?","user":"UH24GRBLL","ts":"1615279022.150600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xAj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"are there no promotion rules defined?"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"bfeed62e-bf6c-4e6e-bf2d-e5bad98e52e0","type":"message","text":"They cannot work","user":"U85R3JJ8L","ts":"1615279034.150800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BoU7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"They cannot work"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"5df5b7a9-7229-4bb6-821b-e795403c50a8","type":"message","text":"The type does not have enough information to construct an instance","user":"U85R3JJ8L","ts":"1615279059.151000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=cV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The type does not have enough information to construct an instance"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"835b2591-864e-4b34-8a8b-9738dbf50b21","type":"message","text":"I see :thinking_face:","user":"UH24GRBLL","ts":"1615279110.151200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lTb1m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see "},{"type":"emoji","name":"thinking_face"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"5a62bbc1-d8d0-4cc4-a036-2ddb6aaa2aff","type":"message","text":"Yeah, same problem with `GF(p)` if you don't make p a type parameter","user":"U85R3JJ8L","ts":"1615279126.151400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5d+Vl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, same problem with "},{"type":"text","text":"GF(p)","style":{"code":true}},{"type":"text","text":" if you don't make p a type parameter"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"b7664cc1-ca07-4929-b392-531e0c2830d9","type":"message","text":"how would comparing `Int` and elements of that field work then?","user":"UH24GRBLL","ts":"1615279175.151600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RPM/X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how would comparing "},{"type":"text","text":"Int","style":{"code":true}},{"type":"text","text":" and elements of that field work then?"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"d64e9f51-802c-4c0d-a356-fdfe52abbe3e","type":"message","text":"<@U01MG0TN079> You can do `&gt;(x::nf_elem, y) = &gt;(x, parent(x)(y))` as a fallback.","user":"U85R3JJ8L","ts":"1615279190.151800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xkt","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U01MG0TN079"},{"type":"text","text":" You can do "},{"type":"text","text":">(x::nf_elem, y) = >(x, parent(x)(y))","style":{"code":true}},{"type":"text","text":" as a fallback."}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"91bc2cde-afe9-49b0-bddb-80989dad036d","type":"message","text":"In a world with parents one usually promotes to a common parent.","user":"U85R3JJ8L","ts":"1615279467.152000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ufGA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In a world with parents one usually promotes to a common parent."}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"0b4ac643-7048-47d6-b434-ccc45c996d37","type":"message","text":"In a world with parents one usually promotes to a common parent.","user":"U85R3JJ8L","ts":"1615279468.152200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kwQh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In a world with parents one usually promotes to a common parent."}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"2bb8b002-7bd9-4f7c-935e-6c8be5047936","type":"message","text":"<@U01MG0TN079> I think you should implement `Base.isless`, see <https://docs.julialang.org/en/v1/base/base/#Base.isless>","user":"U85R3JJ8L","ts":"1615279613.152400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"meiI","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U01MG0TN079"},{"type":"text","text":" I think you should implement "},{"type":"text","text":"Base.isless","style":{"code":true}},{"type":"text","text":", see "},{"type":"link","url":"https://docs.julialang.org/en/v1/base/base/#Base.isless"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f65503fb-41b3-4734-a0aa-be48a2b300e6","type":"message","text":"I'm just surprised that this functionality doesn't exist yet, that's all - seems like a common problem if you want to interface with things outside of Nemo","user":"UH24GRBLL","ts":"1615279917.152600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tOV7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm just surprised that this functionality doesn't exist yet, that's all - seems like a common problem if you want to interface with things outside of Nemo"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"12989c9a-6e08-496a-9fe7-80c7f70fbbc5","type":"message","text":"<@UH24GRBLL> OK, so putting aside Nemo for now, I'd only need to define my function for my specific type, and then define promotion rules, and julia does the rest, or should I also define `Base.:&lt;(x, y::nf_elem) = &lt;(promote(x,y)...)` ?","user":"U01MG0TN079","ts":"1615280068.152800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5tGa","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UH24GRBLL"},{"type":"text","text":" OK, so putting aside Nemo for now, I'd only need to define my function for my specific type, and then define promotion rules, and julia does the rest, or should I also define "},{"type":"text","text":"Base.:<(x, y::nf_elem) = <(promote(x,y)...)","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"0234286f-5752-4931-8275-5ab6e52657a1","type":"message","text":"`promote` will not work","user":"U85R3JJ8L","ts":"1615280103.153000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eTe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"promote","style":{"code":true}},{"type":"text","text":" will not work"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"879fdbc9-05d0-4002-95a5-7a10d64aa191","type":"message","text":"you mean for `nf_elem`  ? I'm just asking for \"other\" cases now","user":"U01MG0TN079","ts":"1615280146.153200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"haZT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you mean for "},{"type":"text","text":"nf_elem","style":{"code":true}},{"type":"text","text":"  ? I'm just asking for \"other\" cases now"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f4a4497d-da24-4c9b-ae42-7775dba51e05","type":"message","text":"Ah, sorry. Then yes.","user":"U85R3JJ8L","ts":"1615280214.153400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mR0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, sorry. Then yes."}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f5361e83-f6cb-416d-9a4c-2c19b58169f1","type":"message","text":"<@UH24GRBLL> <https://github.com/JuliaLang/julia/issues/37022> for example.","user":"U85R3JJ8L","ts":"1615280237.153600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wcl6X","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UH24GRBLL"},{"type":"text","text":" "},{"type":"link","url":"https://github.com/JuliaLang/julia/issues/37022"},{"type":"text","text":" for example."}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"165cdd90-5587-4777-bb18-b2bc61993f6b","type":"message","text":"yep, if you promote to a common type and that type has `isless` defined, it should work out of the box, I think","user":"UH24GRBLL","ts":"1615280247.153800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HA1i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yep, if you promote to a common type and that type has "},{"type":"text","text":"isless","style":{"code":true}},{"type":"text","text":" defined, it should work out of the box, I think"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"c822661f-ad50-455b-a788-606cc85f4d7c","type":"message","text":"and `convert(Type{MyType},a::Int)`  would not suffice? do I still need to define promotion rules?","user":"U01MG0TN079","ts":"1615280261.154000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XGZq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and "},{"type":"text","text":"convert(Type{MyType},a::Int)","style":{"code":true}},{"type":"text","text":"  would not suffice? do I still need to define promotion rules?"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f298f9d3-6ccb-4ba3-aa15-9b94d128edee","type":"message","text":"Yes","user":"U85R3JJ8L","ts":"1615280279.154200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8mzXy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"f82af83c-6448-414e-a0f1-39d7a85483c1","type":"message","text":"<@U85R3JJ8L> OK for `&gt;(x::nf_elem, y) = &gt;(x, parent(x)(y))` , this is short enough!","user":"U01MG0TN079","ts":"1615280299.154400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pt9E","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U85R3JJ8L"},{"type":"text","text":" OK for "},{"type":"text","text":">(x::nf_elem, y) = >(x, parent(x)(y))","style":{"code":true}},{"type":"text","text":" , this is short enough!"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"c0fef469-c56d-4ef3-a590-d66ef1282675","type":"message","text":"<@UH24GRBLL> Alright, thanks!","user":"U01MG0TN079","ts":"1615280310.154600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JvV","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UH24GRBLL"},{"type":"text","text":" Alright, thanks!"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"2398ac41-f71f-41ba-bb07-d1365fc2e659","type":"message","text":"Not sure you will get `&gt;=` and `&lt;` for free. You should check. But I think you should overload `isless`.","user":"U85R3JJ8L","ts":"1615280338.154800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OuNz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not sure you will get "},{"type":"text","text":">=","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"<","style":{"code":true}},{"type":"text","text":" for free. You should check. But I think you should overload "},{"type":"text","text":"isless","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"a426bd6e-10ef-47d7-a582-0bbe2f9b2a42","type":"message","text":"yeah, the doc seems to say it's the right one to overload","user":"U01MG0TN079","ts":"1615280424.155000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AKypq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, the doc seems to say it's the right one to overload"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"05f201b5-5764-4b90-942b-3948bb1c149e","type":"message","text":"OK, good!","user":"U85R3JJ8L","ts":"1615280444.155200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JAp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK, good!"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"},{"client_msg_id":"a23d8584-48d3-4b0f-95ef-a7d6201826fa","type":"message","text":"thanks all!","user":"U01MG0TN079","ts":"1615280639.156100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sGA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks all!"}]}]}],"thread_ts":"1615276535.149000","parent_user_id":"U01MG0TN079"}]