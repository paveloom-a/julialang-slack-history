[{"client_msg_id":"87cad0b9-c390-4ab3-befc-d9753d9c5f88","type":"message","text":"When I run `@code_warntype` and whenever I have for loops it shows me something like this: `@_12::Union{Nothing, Tuple{Int64,Int64}}`.  I am guessing the Nothing is there because the range may turn out to be empty. Does this have any potential effect on the performance?","user":"UPK2KJ95Y","ts":"1614969020.418600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Upu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When I run "},{"type":"text","text":"@code_warntype","style":{"code":true}},{"type":"text","text":" and whenever I have for loops it shows me something like this: "},{"type":"text","text":"@_12::Union{Nothing, Tuple{Int64,Int64}}","style":{"code":true}},{"type":"text","text":".  I am guessing the Nothing is there because the range may turn out to be empty. Does this have any potential effect on the performance?"}]}]}],"thread_ts":"1614969020.418600","reply_count":12,"reply_users_count":3,"latest_reply":"1614970002.424100","reply_users":["B01J9QZ4SP8","UH24GRBLL","UPK2KJ95Y"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1614969022.418700","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"},{"client_msg_id":"8dfc3332-d618-4f7b-bc9e-5bd621566146","type":"message","text":"the compiler is handling those so-called small unions perfectly fine nowadays","user":"UH24GRBLL","ts":"1614969354.419000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BHK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the compiler is handling those so-called small unions perfectly fine nowadays"}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"},{"client_msg_id":"75a8a826-c599-461d-b1ea-0f0cc15fa286","type":"message","text":"by the way, those unions with Nothing in them show up because that's how the iteration protocol in julia signals \"this is the end of the iterable\"","user":"UH24GRBLL","ts":"1614969398.419200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y/3L","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"by the way, those unions with Nothing in them show up because that's how the iteration protocol in julia signals \"this is the end of the iterable\""}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"},{"client_msg_id":"85a57170-abfb-4004-a167-35a4160fdca4","type":"message","text":"if you take a look at the code after those unions, you'll see checks for whether or not the object returned by the iterable is in fact Nothing or something else - in which case, the code afterwards will be optimizied for the something, rather than the potential Nothing","user":"UH24GRBLL","ts":"1614969480.419400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iehRO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you take a look at the code after those unions, you'll see checks for whether or not the object returned by the iterable is in fact Nothing or something else - in which case, the code afterwards will be optimizied for the something, rather than the potential Nothing"}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"},{"client_msg_id":"6d6c0085-ecc2-422a-ba50-08fb2b09ec6b","type":"message","text":"OK, thanks!","user":"UPK2KJ95Y","ts":"1614969597.420900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E3pH9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK, thanks!"}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"},{"client_msg_id":"cb54e21d-60c1-4b4a-99a2-105703464a95","type":"message","text":"So, if I understand this correctly, there will always be Nothing in that union, simply because the loop will at some point run out of range and the iterator will return nothing, is that correct?","user":"UPK2KJ95Y","ts":"1614969686.421700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ea66","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So, if I understand this correctly, there will always be Nothing in that union, simply because the loop will at some point run out of range and the iterator will return nothing, is that correct?"}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"},{"client_msg_id":"edf2bd6a-3caf-43e7-b680-59641fc034c7","type":"message","text":"well, it's not that simple :)","user":"UH24GRBLL","ts":"1614969846.422800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qnphq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, it's not that simple :)"}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"},{"client_msg_id":"b3c08f6b-1b88-4bad-be44-ecc3fa06324d","type":"message","text":"for example, infinite iterators will of course never run out of elements","user":"UH24GRBLL","ts":"1614969855.423000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XitW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for example, infinite iterators will of course never run out of elements"}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"},{"client_msg_id":"28962e05-b0ed-4e95-81a8-ee2d32babf6d","type":"message","text":"```julia&gt; a = Iterators.flatten(Iterators.repeated([3,4,5]));\n                                                          \njulia&gt; f(x) = for y in x; print(y); end                   \nf (generic function with 1 method)                        \n                                                          \njulia&gt; @code_warntype f(a)                                ```","user":"UH24GRBLL","ts":"1614969858.423200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"addg","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> a = Iterators.flatten(Iterators.repeated([3,4,5]));\n                                                          \njulia> f(x) = for y in x; print(y); end                   \nf (generic function with 1 method)                        \n                                                          \njulia> @code_warntype f(a)                                "}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"},{"client_msg_id":"ad3d3d08-b443-4a31-a35b-036a0c694677","type":"message","text":"another thing is that the compiler may be able to prove (at a later point in the compilation pipeline) that the iteration will never hit the check for Nothing at all, and will remove it - in that case, the existence of the Union at the type level doesn't even matter","user":"UH24GRBLL","ts":"1614969939.423500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cn9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"another thing is that the compiler may be able to prove (at a later point in the compilation pipeline) that the iteration will never hit the check for Nothing at all, and will remove it - in that case, the existence of the Union at the type level doesn't even matter"}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y","reactions":[{"name":"+1","users":["UPK2KJ95Y"],"count":1}]},{"client_msg_id":"5f4c6590-1a72-46e2-ace7-df42834d7171","type":"message","text":"Makes sense. Thank you.","user":"UPK2KJ95Y","ts":"1614969995.423900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KL0GK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Makes sense. Thank you."}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"},{"client_msg_id":"4177e9c9-c7dc-42ae-8d48-626b0e231b3a","type":"message","text":"You're welcome!","user":"UH24GRBLL","ts":"1614970002.424100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6vk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You're welcome!"}]}]}],"thread_ts":"1614969020.418600","parent_user_id":"UPK2KJ95Y"}]