[{"client_msg_id":"e3ac9294-a419-40fc-85b0-4b8d917592b0","type":"message","text":"I use ReverseDiff for a function that allocates quite considerable amount of memory inside. As a result, ReverseDiff  allocates enormous amount of memory. Is it the expected behavior? Should one avoid allocations inside a function when using ReverseDiff?","user":"U01R4PJHG2C","ts":"1615996637.023300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Vrav","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I use ReverseDiff for a function that allocates quite considerable amount of memory inside. As a result, ReverseDiff  allocates enormous amount of memory. Is it the expected behavior? Should one avoid allocations inside a function when using ReverseDiff?"}]}]}],"thread_ts":"1615996637.023300","reply_count":6,"reply_users_count":3,"latest_reply":"1616007468.037800","reply_users":["B01J9QZ4SP8","UC4QQPG4A","U01R4PJHG2C"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1615996638.023400","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1615996637.023300","parent_user_id":"U01R4PJHG2C","reactions":[{"name":"bridge","users":["U01R4PJHG2C"],"count":1}]},{"type":"message","subtype":"bot_message","text":"Success, it has been cross posted <https://discourse.julialang.org/t/57394| to Discourse>. Keep and eye out on Discourse for responses and please add an answer there once you are satisfied with the solution so others can benefit as well. Happy debugging!","ts":"1615996666.023800","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1615996637.023300","parent_user_id":"U01R4PJHG2C"},{"client_msg_id":"f9e15368-c761-4ee6-b872-d1a1749f3388","type":"message","text":"Try with Zygote?","user":"UC4QQPG4A","ts":"1615997700.026000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Dc9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Try with Zygote?"}]}]}],"thread_ts":"1615996637.023300","parent_user_id":"U01R4PJHG2C"},{"client_msg_id":"044eea9a-a8ad-4eb9-aea1-5e5c45e5b89e","type":"message","text":"There seems to be the same thing with Zygote as well. Can one use closures ReverseDiff or Zygote in the following way:\n\n`gr = Zygote.gradient(b-&gt;nlls(b,consts,df),x)`","user":"U01R4PJHG2C","ts":"1615998331.029400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1Yk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There seems to be the same thing with Zygote as well. Can one use closures ReverseDiff or Zygote in the following way:\n\n"},{"type":"text","text":"gr = Zygote.gradient(b->nlls(b,consts,df),x)","style":{"code":true}}]}]}],"thread_ts":"1615996637.023300","parent_user_id":"U01R4PJHG2C"},{"client_msg_id":"535c95fb-c573-4bbb-9d6b-bfddd09ce4f1","type":"message","text":"You can also use autopreallocation.jl, and RD also let's you allocate a chunk of memory ahead of time but I'm not familiar with what is happening under the hood of your code or RD to say concretely","user":"UC4QQPG4A","ts":"1615998477.029600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DL03","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can also use autopreallocation.jl, and RD also let's you allocate a chunk of memory ahead of time but I'm not familiar with what is happening under the hood of your code or RD to say concretely"}]}]}],"thread_ts":"1615996637.023300","parent_user_id":"U01R4PJHG2C"},{"type":"message","subtype":"bot_message","text":"Hey <@U01R4PJHG2C>, if you were able to find an answer here on Slack, please cross post it to Discourse via the link above. Thank you! ","ts":"1616007468.037800","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1615996637.023300","parent_user_id":"U01R4PJHG2C"}]