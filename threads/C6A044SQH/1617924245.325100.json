[{"client_msg_id":"1ce4961d-01f6-4819-b13f-e445f1685160","type":"message","text":"and a follow-up question: is it bad for type inference if I have\n```check_something() || throw(ArgumentError(\"my error\"))```\nin my function?\n\nEven with Cthulhu I am having trouble finding where my type instability occurs","user":"U01L0RJC6FM","ts":"1617924245.325100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"La0s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and a follow-up question: is it bad for type inference if I have\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"check_something() || throw(ArgumentError(\"my error\"))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"in my function?\n\nEven with Cthulhu I am having trouble finding where my type instability occurs"}]}]}],"thread_ts":"1617924245.325100","reply_count":15,"reply_users_count":3,"latest_reply":"1618062806.456100","reply_users":["U01HD5VFXJM","U01L0RJC6FM","UH24GRBLL"],"is_locked":false,"subscribed":false},{"client_msg_id":"e9c20c4e-8134-4672-9f77-063cc0d47aee","type":"message","text":"Type inference was turned off for exception-throwing blocks in 1.6. Most times it won't matter, but sometimes if you're using something in the error string, it can add an allocation or two and you might need to refactor to avoid it, if your code is performance critical.","user":"U01HD5VFXJM","ts":"1617924646.325400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UxW4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Type inference was turned off for exception-throwing blocks in 1.6. Most times it won't matter, but sometimes if you're using something in the error string, it can add an allocation or two and you might need to refactor to avoid it, if your code is performance critical."}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"79224202-18f8-466e-a819-685046fb6f1d","type":"message","text":"it is... i am essentially trying to figure out why a portion of my code is type-unstable","user":"U01L0RJC6FM","ts":"1617924731.325600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VfpzB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is... i am essentially trying to figure out why a portion of my code is type-unstable"}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"feb167c8-a1e9-4cf1-ac3b-2f3c20b368bd","type":"message","text":"It shouldn't affect the return type inference, though. But might be worth removing them temporarily just to be sure.","user":"U01HD5VFXJM","ts":"1617924782.325800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N1P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It shouldn't affect the return type inference, though. But might be worth removing them temporarily just to be sure."}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"69706cf0-691e-4872-af70-f76b3c267cf0","type":"message","text":"I see thanks a lot.. type-inference debugging is quite the challenge","user":"U01L0RJC6FM","ts":"1617924812.326000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8Ps","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see thanks a lot.. type-inference debugging is quite the challenge"}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"8ac79311-2570-4e57-9855-2cbb45c673e0","type":"message","text":"I was not sure as I am seeing the following in Cthulhu","user":"U01L0RJC6FM","ts":"1617924846.326200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HSnS0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was not sure as I am seeing the following in Cthulhu"}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"be6c5cac-b1b3-4b31-b8a4-a367af5d33af","type":"message","text":"invoke throw_overflowerr_binaryop(::Symbol,::Int64,::Int64)::Union{}","user":"U01L0RJC6FM","ts":"1617924855.326400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TJ4E5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"invoke throw_overflowerr_binaryop(::Symbol,::Int64,::Int64)::Union{}"}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"28c179c6-ca7f-48fa-90f9-d1da42c36718","type":"message","text":"oh btw... what do the deoptimized blocks in Cthulhu mean?","user":"U01L0RJC6FM","ts":"1617924909.326600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7AEfR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh btw... what do the deoptimized blocks in Cthulhu mean?"}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"11edd31a-7f3b-4855-902a-6d8865e3f962","type":"message","text":"`deoptimized getindex(::Tuple{},::Int64)::Union{}`","user":"U01L0RJC6FM","ts":"1617924913.326800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xAyp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"deoptimized getindex(::Tuple{},::Int64)::Union{}","style":{"code":true}}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"c7fa483c-c20b-4614-89bd-924ccc39272f","type":"message","text":"That sounds like an internal bounds check? I haven't played enough with Cthulhu tbh.","user":"U01HD5VFXJM","ts":"1617924953.327000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IAi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That sounds like an internal bounds check? I haven't played enough with Cthulhu tbh."}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"ae6c3838-070e-4e4f-a695-b7ab4cfcff83","type":"message","text":"oh i see thanks.. yeah it has quite the learning curve to it unfortunately","user":"U01L0RJC6FM","ts":"1617925113.327200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xVC/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh i see thanks.. yeah it has quite the learning curve to it unfortunately"}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"f931a6ef-f3f5-444e-b86f-e6c00ff15855","type":"message","text":"that tells you that the return type when indexing into an empty tuple is `Union{}` (which makes sense, as it has no elements)","user":"UH24GRBLL","ts":"1617977712.379300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NR+Uv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that tells you that the return type when indexing into an empty tuple is "},{"type":"text","text":"Union{}","style":{"code":true}},{"type":"text","text":" (which makes sense, as it has no elements)"}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"20da9802-5da1-4df5-b9b6-2993a83198ec","type":"message","text":"you could also try JET.jl, though I haven't used that before so YMMV <https://discourse.julialang.org/t/ann-jet-jl-the-next-generation-of-code-checker-for-julia/58913>","user":"UH24GRBLL","ts":"1617978788.381300","team":"T68168MUP","attachments":[{"service_name":"JuliaLang","title":"[ANN] JET.jl: the next generation of code checker for Julia","title_link":"https://discourse.julialang.org/t/ann-jet-jl-the-next-generation-of-code-checker-for-julia/58913","text":"Julia’s extreme expressiveness and composability come from its dynamism — at the cost of that, a static type-level analysis of Julia code has been remained as a longstanding problem. JET.jl is a fresh approach to static analysis of such a dynamic language; it can analyze a pure Julia script and detect type-level errors within a practical speed. JET is powered by both abstract interpretation routine implemented within the Julia compiler as well as a concrete interpretation based on JuliaInterpr...","fallback":"JuliaLang: [ANN] JET.jl: the next generation of code checker for Julia","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","fields":[{"title":"Reading time","value":"3 mins :clock2:","short":true},{"title":"Likes","value":"54 :heart:","short":true}],"ts":1617966707,"from_url":"https://discourse.julialang.org/t/ann-jet-jl-the-next-generation-of-code-checker-for-julia/58913","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/ann-jet-jl-the-next-generation-of-code-checker-for-julia/58913"}],"blocks":[{"type":"rich_text","block_id":"S92u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you could also try JET.jl, though I haven't used that before so YMMV "},{"type":"link","url":"https://discourse.julialang.org/t/ann-jet-jl-the-next-generation-of-code-checker-for-julia/58913"}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"0f031608-00c9-4224-b67a-aef145da0310","type":"message","text":"In fact I found my problem.. it was in some other line where I was returning a default value for some non-critical bad input. One has to careful and return `similar(...)` when the input/output type is `AbstractMatrix` not `Matrix`","user":"U01L0RJC6FM","ts":"1618042859.449100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aVnz0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In fact I found my problem.. it was in some other line where I was returning a default value for some non-critical bad input. One has to careful and return "},{"type":"text","text":"similar(...)","style":{"code":true}},{"type":"text","text":" when the input/output type is "},{"type":"text","text":"AbstractMatrix","style":{"code":true}},{"type":"text","text":" not "},{"type":"text","text":"Matrix","style":{"code":true}}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM","reactions":[{"name":"100","users":["U01HD5VFXJM"],"count":1}]},{"client_msg_id":"232a1f7c-b1e4-47c6-b471-f5f42b7404a8","type":"message","text":"it's good practice to always use `similar` and friends :)","user":"UH24GRBLL","ts":"1618062801.455900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ND5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's good practice to always use "},{"type":"text","text":"similar","style":{"code":true}},{"type":"text","text":" and friends :)"}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"4e09f1ff-a092-4f65-bad2-e1100c92d1ce","type":"message","text":"nice that you found it","user":"UH24GRBLL","ts":"1618062806.456100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wRy=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"nice that you found it"}]}]}],"thread_ts":"1617924245.325100","parent_user_id":"U01L0RJC6FM"}]