[{"client_msg_id":"d40ccb03-4558-4686-9204-dfdf36837cd6","type":"message","text":"I want to write a macro, it is like\n```macro foo(alias)\n    local alias = 1\nend```\nbut `local variable name \"alias\" conflicts with an argument`, how do I do ??","user":"U011K6EQAQN","ts":"1610295876.198900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wqf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I want to write a macro, it is like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"macro foo(alias)\n    local alias = 1\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"but "},{"type":"text","text":"local variable name \"alias\" conflicts with an argument","style":{"code":true}},{"type":"text","text":", how do I do ??"}]}]}],"thread_ts":"1610295876.198900","reply_count":9,"reply_users_count":3,"latest_reply":"1610350671.277000","reply_users":["UH24GRBLL","U011K6EQAQN","U017LQ3A59U"],"subscribed":false},{"client_msg_id":"739b3d1c-9a82-4c9f-96ec-69805efb713e","type":"message","text":"what do you want your macro to do?","user":"UH24GRBLL","ts":"1610296094.199000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MNFb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what do you want your macro to do?"}]}]}],"thread_ts":"1610295876.198900","parent_user_id":"U011K6EQAQN"},{"client_msg_id":"e70074fe-0daf-4c39-9fc9-a7426c693eb4","type":"message","text":"inside the macro, define a variable named the same as alias, and operate it","user":"U011K6EQAQN","ts":"1610296137.199200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A5iY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"inside the macro, define a variable named the same as alias, and operate it"}]}]}],"thread_ts":"1610295876.198900","parent_user_id":"U011K6EQAQN"},{"client_msg_id":"6a4a04e7-0003-40ac-b629-b540bdbf99c0","type":"message","text":"all the operation is inside the macro","user":"U011K6EQAQN","ts":"1610296236.199400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CXL+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"all the operation is inside the macro"}]}]}],"thread_ts":"1610295876.198900","parent_user_id":"U011K6EQAQN"},{"client_msg_id":"d0c12a57-b6a0-43b7-989a-80a602bc9bae","type":"message","text":"But why? If the macro is used on a single variable, `alias` will store a symbol with its name. There is no (safe) way to access its value (in the macro core) and I can't see the advantage of a local variable having the same name as the macro parameter","user":"U017LQ3A59U","ts":"1610299432.202800","team":"T68168MUP","edited":{"user":"U017LQ3A59U","ts":"1610299467.000000"},"blocks":[{"type":"rich_text","block_id":"ZfEG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But why? If the macro is used on a single variable, "},{"type":"text","text":"alias","style":{"code":true}},{"type":"text","text":" will store a symbol with its name. There is no (safe) way to access its value (in the macro core) and I can't see the advantage of a local variable having the same name as the macro parameter"}]}]}],"thread_ts":"1610295876.198900","parent_user_id":"U011K6EQAQN"},{"client_msg_id":"5574023c-615e-4a81-a89d-003aeab805d2","type":"message","text":"there is not only no safe way, there is no way at all to access the runtime value of a given variable that's passed to the macro.","user":"UH24GRBLL","ts":"1610299531.203100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8S5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there is not only no safe way, there is no way at all to access the runtime value of a given variable that's passed to the macro."}]}]}],"thread_ts":"1610295876.198900","parent_user_id":"U011K6EQAQN"},{"client_msg_id":"4950c370-1a93-4934-9643-aadbd48b8c68","type":"message","text":"macros operate on expressions during parsing, way before any values are assigned","user":"UH24GRBLL","ts":"1610299548.203300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jhexn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"macros operate on expressions during parsing, way before any values are assigned"}]}]}],"thread_ts":"1610295876.198900","parent_user_id":"U011K6EQAQN"},{"client_msg_id":"3d152611-e88b-48db-b864-da0711bbda0d","type":"message","text":"so is there any other methods to write a macro, which is used to\n```@macro open(filename, mode, alias, exprs...)\n...\nend```\nI just want to write a macro which is similar with `with open(filename, mode) as f` in Python","user":"U011K6EQAQN","ts":"1610323017.252200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4nS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so is there any other methods to write a macro, which is used to\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@macro open(filename, mode, alias, exprs...)\n...\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I just want to write a macro which is similar with "},{"type":"text","text":"with open(filename, mode) as f","style":{"code":true}},{"type":"text","text":" in Python"}]}]}],"thread_ts":"1610295876.198900","parent_user_id":"U011K6EQAQN"},{"client_msg_id":"55ac2bae-7362-4652-b3ac-ff93bd7b0e67","type":"message","text":"by the way","user":"U011K6EQAQN","ts":"1610323024.252400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B7ynE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"by the way"}]}]}],"thread_ts":"1610295876.198900","parent_user_id":"U011K6EQAQN"},{"client_msg_id":"9994fcab-6d32-496c-adcb-b9de73de1cc5","type":"message","text":"that's not valid syntax - also, `open` supports `do` syntax (<https://docs.julialang.org/en/v1/manual/functions/#Do-Block-Syntax-for-Function-Arguments>). In the case of `open`, this also closes the stream after the block is done, achieving the same behaviour as `with` in python","user":"UH24GRBLL","ts":"1610350671.277000","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1610350673.000000"},"blocks":[{"type":"rich_text","block_id":"kyAWe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's not valid syntax - also, "},{"type":"text","text":"open","style":{"code":true}},{"type":"text","text":" supports "},{"type":"text","text":"do","style":{"code":true}},{"type":"text","text":" syntax ("},{"type":"link","url":"https://docs.julialang.org/en/v1/manual/functions/#Do-Block-Syntax-for-Function-Arguments"},{"type":"text","text":"). In the case of "},{"type":"text","text":"open","style":{"code":true}},{"type":"text","text":", this also closes the stream after the block is done, achieving the same behaviour as "},{"type":"text","text":"with","style":{"code":true}},{"type":"text","text":" in python"}]}]}],"thread_ts":"1610295876.198900","parent_user_id":"U011K6EQAQN"}]