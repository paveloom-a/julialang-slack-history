[{"client_msg_id":"876af1ca-77f1-484d-b7b2-83a4843b31df","type":"message","text":"If I wanted to write my own version of `map(f, v)` for a vector v, how would I find the correct element type of the result?","user":"U67G3QRJM","ts":"1612586662.145600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A3=e","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If I wanted to write my own version of "},{"type":"text","text":"map(f, v)","style":{"code":true}},{"type":"text","text":" for a vector v, how would I find the correct element type of the result?"}]}]}],"thread_ts":"1612586662.145600","reply_count":6,"reply_users_count":3,"latest_reply":"1612587602.152600","reply_users":["B01J9QZ4SP8","U8D9768Q6","U67G3QRJM"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1612586663.145700","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1612586662.145600","parent_user_id":"U67G3QRJM"},{"client_msg_id":"61522A95-7D43-41C6-8899-503DDE891EE2","type":"message","text":"The easiest way would be to use compiler internals, but then Jeff will be mad at you. BangBang.jl has a really nice mechanism for this though using `push!!`","user":"U8D9768Q6","ts":"1612586889.147800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rNlZ=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The easiest way would be to use compiler internals, but then Jeff will be mad at you. BangBang.jl has a really nice mechanism for this though using "},{"type":"text","text":"push!!","style":{"code":true}}]}]}],"thread_ts":"1612586662.145600","parent_user_id":"U67G3QRJM"},{"client_msg_id":"C8827BFE-77AF-4919-B19B-78B4B1C12985","type":"message","text":"Basically, you use `f(v[1])` as the eltype, and then continually `push!!` the later elements into the array, and that will automatically mutate the array if those elements are the right type, or widen the eltype if they’re different. ","user":"U8D9768Q6","ts":"1612586967.150100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cEuR6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Basically, you use "},{"type":"text","text":"f(v[1])","style":{"code":true}},{"type":"text","text":" as the eltype, and then continually "},{"type":"text","text":"push!!","style":{"code":true}},{"type":"text","text":" the later elements into the array, and that will automatically mutate the array if those elements are the right type, or widen the eltype if they’re different. "}]}]}],"thread_ts":"1612586662.145600","parent_user_id":"U67G3QRJM"},{"client_msg_id":"0b099021-831b-4def-ae88-e6c71f90bf7d","type":"message","text":"Thanks but I should have specified that I need this to be GPU compatible…","user":"U67G3QRJM","ts":"1612587063.150300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6LzG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks but I should have specified that I need this to be GPU compatible…"}]}]}],"thread_ts":"1612586662.145600","parent_user_id":"U67G3QRJM"},{"client_msg_id":"F6160D08-D5FB-4865-995A-666226DAD98C","type":"message","text":"Ah. Then yeah, I’d just say screw it and use `Core.Compiler.return_type`. ","user":"U8D9768Q6","ts":"1612587541.151300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7Ie","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah. Then yeah, I’d just say screw it and use "},{"type":"text","text":"Core.Compiler.return_type","style":{"code":true}},{"type":"text","text":". "}]}]}],"thread_ts":"1612586662.145600","parent_user_id":"U67G3QRJM"},{"client_msg_id":"6ECC0FCE-C06F-4154-B78C-F32DCB486298","type":"message","text":"GPU Code will fail anyways if the output eltypes aren’t concrete so I don’t think it matters much ","user":"U8D9768Q6","ts":"1612587602.152600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WFxa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"GPU Code will fail anyways if the output eltypes aren’t concrete so I don’t think it matters much "}]}]}],"thread_ts":"1612586662.145600","parent_user_id":"U67G3QRJM","reactions":[{"name":"+1","users":["U67G3QRJM"],"count":1}]}]