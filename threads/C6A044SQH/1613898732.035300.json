[{"client_msg_id":"aec4ca7d-2c37-4aa8-b180-08dbf861d72a","type":"message","text":"Hi, I am trying to use Clang to generate libpcap bindings, with the following snippet\n```using Clang\nusing Clang.LibClang.Clang_jll\n# LIBCLANG_HEADERS are those headers to be wrapped.\nconst LIBPCAP_INCLUDE = \"/usr/include/pcap/\"\nheaders_extra = [\"/usr/include/x86_64-linux-gnu/sys/types.h\"]\nheaders_pcap = [joinpath(LIBPCAP_INCLUDE, header) for header in readdir(LIBPCAP_INCLUDE) if endswith(header, \".h\")]\nconst LIBPCAP_HEADERS = [headers_pcap; headers_extra]\nwc = init(; headers = LIBPCAP_HEADERS,\n            output_file = joinpath(@__DIR__, \"libpcap_api.jl\"),\n            common_file = joinpath(@__DIR__, \"libpcap_common.jl\"),\n            clang_includes = vcat(LIBPCAP_INCLUDE, CLANG_INCLUDE),\n            clang_args = [\"-I\", joinpath(LIBPCAP_INCLUDE, \"..\")],\n            header_wrapped = (root, current)-&gt;root == current,\n            header_library = x-&gt;\"libpcap\",\n            clang_diagnostics = true,\n            )\nrun(wc)```\nHowever, I have two problems\n\n```/usr/include/pcap/bpf.h:116:2: error: unknown type name 'u_int'\n/usr/include/pcap/bpf.h:250:2: error: unknown type name 'u_short'\n/usr/include/pcap/bpf.h:251:2: error: unknown type name 'u_char'\n/usr/include/pcap/namedb.h:58:51: error: unknown type name 'FILE'```\nNot sure where these are defined, and another one is that all functions defined in the header start with PCAP_API so I get error\n```/usr/include/pcap/namedb.h:58:1: error: unknown type name 'PCAP_API'```\nIt seems like it's something similar to extern maybe, but allowing switching different APIs? I am not quite sure if I understand those headers.\n\nAnyone tried this or can help?","user":"UE0Q72VV0","ts":"1613898732.035300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DtCtj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi, I am trying to use Clang to generate libpcap bindings, with the following snippet\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Clang\nusing Clang.LibClang.Clang_jll\n# LIBCLANG_HEADERS are those headers to be wrapped.\nconst LIBPCAP_INCLUDE = \"/usr/include/pcap/\"\nheaders_extra = [\"/usr/include/x86_64-linux-gnu/sys/types.h\"]\nheaders_pcap = [joinpath(LIBPCAP_INCLUDE, header) for header in readdir(LIBPCAP_INCLUDE) if endswith(header, \".h\")]\nconst LIBPCAP_HEADERS = [headers_pcap; headers_extra]\nwc = init(; headers = LIBPCAP_HEADERS,\n            output_file = joinpath(@__DIR__, \"libpcap_api.jl\"),\n            common_file = joinpath(@__DIR__, \"libpcap_common.jl\"),\n            clang_includes = vcat(LIBPCAP_INCLUDE, CLANG_INCLUDE),\n            clang_args = [\"-I\", joinpath(LIBPCAP_INCLUDE, \"..\")],\n            header_wrapped = (root, current)->root == current,\n            header_library = x->\"libpcap\",\n            clang_diagnostics = true,\n            )\nrun(wc)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nHowever, I have two problems\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"/usr/include/pcap/bpf.h:116:2: error: unknown type name 'u_int'\n/usr/include/pcap/bpf.h:250:2: error: unknown type name 'u_short'\n/usr/include/pcap/bpf.h:251:2: error: unknown type name 'u_char'\n/usr/include/pcap/namedb.h:58:51: error: unknown type name 'FILE'"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nNot sure where these are defined, and another one is that all functions defined in the header start with PCAP_API so I get error\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"/usr/include/pcap/namedb.h:58:1: error: unknown type name 'PCAP_API'"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"It seems like it's something similar to extern maybe, but allowing switching different APIs? I am not quite sure if I understand those headers.\n\nAnyone tried this or can help?"}]}]}],"thread_ts":"1613898732.035300","reply_count":1,"reply_users_count":1,"latest_reply":"1613898734.035400","reply_users":["B01J9QZ4SP8"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1613898734.035400","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1613898732.035300","parent_user_id":"UE0Q72VV0"}]