[{"client_msg_id":"ea581b7e-2268-4131-a8f5-6e0a1e0dc04d","type":"message","text":"Is there something that can ease referring to elements of Dicts inside Dicts?\nHere’s an example I got when reading in a Kubernetes YAML file with YAML.jl, printed with PrettyPrinting:\n```d = Dict(\"kind\" =&gt; \"Deployment\",\n     \"spec\" =&gt;\n         Dict(\"template\" =&gt;\n                  Dict(\"spec\" =&gt; Dict(\"containers\" =&gt;\n                                          [Dict(\"name\" =&gt; \"nginx\",\n                                                \"image\" =&gt; \"nginx:1.14.2\",\n                                                \"ports\" =&gt;\n                                                    [Dict(\"containerPort\" =&gt;\n                                                              80)])]),\n                       \"metadata\" =&gt; Dict(\"labels\" =&gt; Dict(\"app\" =&gt; \"nginx\"))),\n              \"selector\" =&gt; Dict(\"matchLabels\" =&gt; Dict(\"app\" =&gt; \"nginx\")),\n              \"replicas\" =&gt; 2),\n     \"metadata\" =&gt; Dict(\"name\" =&gt; \"nginx-deployment\"),\n     \"apiVersion\" =&gt; \"apps/v1\")```\nNow I can write this, but it’s kind of ugly:\n```d[\"spec\"][\"template\"][\"spec\"][\"containers\"][1][\"ports\"][1][\"containerPort\"]```","user":"U01CQTKB86N","ts":"1614434214.014400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1YsNk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there something that can ease referring to elements of Dicts inside Dicts?\nHere’s an example I got when reading in a Kubernetes YAML file with YAML.jl, printed with PrettyPrinting:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"d = Dict(\"kind\" => \"Deployment\",\n     \"spec\" =>\n         Dict(\"template\" =>\n                  Dict(\"spec\" => Dict(\"containers\" =>\n                                          [Dict(\"name\" => \"nginx\",\n                                                \"image\" => \"nginx:1.14.2\",\n                                                \"ports\" =>\n                                                    [Dict(\"containerPort\" =>\n                                                              80)])]),\n                       \"metadata\" => Dict(\"labels\" => Dict(\"app\" => \"nginx\"))),\n              \"selector\" => Dict(\"matchLabels\" => Dict(\"app\" => \"nginx\")),\n              \"replicas\" => 2),\n     \"metadata\" => Dict(\"name\" => \"nginx-deployment\"),\n     \"apiVersion\" => \"apps/v1\")"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Now I can write this, but it’s kind of ugly:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"d[\"spec\"][\"template\"][\"spec\"][\"containers\"][1][\"ports\"][1][\"containerPort\"]"}]}]}],"thread_ts":"1614434214.014400","reply_count":8,"reply_users_count":2,"latest_reply":"1614503608.044900","reply_users":["U01CQTKB86N","U68QW0PUZ"],"subscribed":false},{"client_msg_id":"881bbf58-14d0-42b7-af30-181948abd902","type":"message","text":"With different YAML options I saved some characters, but this isn’t in reality any better.\n```data[:spec][:template][:spec][:containers][1][:ports][1][:containerPort]```","user":"U01CQTKB86N","ts":"1614437259.015000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xI64","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"With different YAML options I saved some characters, but this isn’t in reality any better.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"data[:spec][:template][:spec][:containers][1][:ports][1][:containerPort]"}]}]}],"thread_ts":"1614434214.014400","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"590ebcca-b437-4a4e-b94a-fb605fb9e735","type":"message","text":"about the best you can do is to define a/some variable[s] that gets you where you need to  be:\n```spec = d[\"spec\"][\"template\"][\"spec\"]\n spec[\"containers\"][1]\nDict{String, Any} with 3 entries:\n  \"name\"  =&gt; \"nginx\"\n  \"image\" =&gt; \"nginx:1.14.2\"\n  \"ports\" =&gt; [Dict(\"containerPort\"=&gt;80)]\n\njulia&gt;  spec[\"containers\"][1]\nDict{String, Any} with 3 entries:\n  \"name\"  =&gt; \"nginx\"\n  \"image\" =&gt; \"nginx:1.14.2\"\n  \"ports\" =&gt; [Dict(\"containerPort\"=&gt;80)]```","user":"U68QW0PUZ","ts":"1614452114.017200","team":"T68168MUP","edited":{"user":"U68QW0PUZ","ts":"1614452179.000000"},"blocks":[{"type":"rich_text","block_id":"qW4um","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"about the best you can do is to define a/some variable[s] that gets you where you need to  be:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"spec = d[\"spec\"][\"template\"][\"spec\"]\n spec[\"containers\"][1]\nDict{String, Any} with 3 entries:\n  \"name\"  => \"nginx\"\n  \"image\" => \"nginx:1.14.2\"\n  \"ports\" => [Dict(\"containerPort\"=>80)]\n\njulia>  spec[\"containers\"][1]\nDict{String, Any} with 3 entries:\n  \"name\"  => \"nginx\"\n  \"image\" => \"nginx:1.14.2\"\n  \"ports\" => [Dict(\"containerPort\"=>80)]"}]}]}],"thread_ts":"1614434214.014400","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"87c3c3e7-dec0-49f3-ba0d-97567c5e2959","type":"message","text":"Well, it’s nowhere near where I need it to be for this to be any useful.","user":"U01CQTKB86N","ts":"1614457207.020700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zX+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, it’s nowhere near where I need it to be for this to be any useful."}]}]}],"thread_ts":"1614434214.014400","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"92490257-a7b7-4af4-a7a9-004e334cd507","type":"message","text":"How would you like to be retrieving the information?","user":"U68QW0PUZ","ts":"1614464094.030200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8fw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How would you like to be retrieving the information?"}]}]}],"thread_ts":"1614434214.014400","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"53F1EF6C-DB89-4979-8829-A6200F2540C4","type":"message","text":"Something like\n```data.spec.template.spec.containers[1].ports[1].containerPort```","user":"U01CQTKB86N","ts":"1614469828.032500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"++tk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"data"},{"type":"text","text":"."},{"type":"text","text":"spec"},{"type":"text","text":"."},{"type":"text","text":"template"},{"type":"text","text":"."},{"type":"text","text":"spec"},{"type":"text","text":"."},{"type":"text","text":"contain"},{"type":"text","text":"ers"},{"type":"text","text":"[1]"},{"type":"text","text":"."},{"type":"text","text":"port"},{"type":"text","text":"s"},{"type":"text","text":"[1]"},{"type":"text","text":"."},{"type":"text","text":"containerPort"}]}]}],"thread_ts":"1614434214.014400","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"c2b6286b-6aa0-45b8-b8ac-ce91e2595a0e","type":"message","text":"I thought of this (note, do not use e.g. `containers[1`] , `containers` is enough).\n```macro item(data, seq...)\n  quote begin\n  \tlocal strs = string.($(esc(seq)))\n    local itm = data\n    for i in 1:length(strs)\n      itm = itm[strs[i]]\n      while isa(itm, AbstractArray) &amp;&amp; length(itm)&gt;0 &amp;&amp; isa(itm[1], AbstractDict)\n        itm = itm[1]\n      end\n    end\n    return itm\n  end; end\nend```\n``` data =\n   Dict(\"kind\" =&gt; \"Deployment\",\n     \"spec\" =&gt;\n        Dict(\"template\" =&gt;\n\t \t  Dict(\"spec\" =&gt; \n\t\t    Dict(\"containers\" =&gt;\n              [Dict(\"name\" =&gt; \"nginx\",\n                    \"image\" =&gt; \"nginx:1.14.2\",\n                    \"ports\" =&gt;\n                       [Dict(\"containerPort\" =&gt; 80)])]),\n\t    \"metadata\" =&gt; Dict(\"labels\" =&gt; Dict(\"app\" =&gt; \"nginx\"))),\n\t\t\"selector\" =&gt; Dict(\"matchLabels\" =&gt; Dict(\"app\" =&gt; \"nginx\")),\n      \"replicas\" =&gt; 2),\n     \"metadata\" =&gt; Dict(\"name\" =&gt; \"nginx-deployment\"),\n     \"apiVersion\" =&gt; \"apps/v1\");\n\nx = @item(data, spec, template, spec, containers, ports, containerPort)\n# x == 80```","user":"U68QW0PUZ","ts":"1614476845.038600","team":"T68168MUP","edited":{"user":"U68QW0PUZ","ts":"1614477513.000000"},"blocks":[{"type":"rich_text","block_id":"g+yM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I thought of this (note, do not use e.g. "},{"type":"text","text":"containers[1","style":{"code":true}},{"type":"text","text":"] , "},{"type":"text","text":"containers","style":{"code":true}},{"type":"text","text":" is enough).\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"macro item(data, seq...)\n  quote begin\n  \tlocal strs = string.($(esc(seq)))\n    local itm = data\n    for i in 1:length(strs)\n      itm = itm[strs[i]]\n      while isa(itm, AbstractArray) && length(itm)>0 && isa(itm[1], AbstractDict)\n        itm = itm[1]\n      end\n    end\n    return itm\n  end; end\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":" data =\n   Dict(\"kind\" => \"Deployment\",\n     \"spec\" =>\n        Dict(\"template\" =>\n\t \t  Dict(\"spec\" => \n\t\t    Dict(\"containers\" =>\n              [Dict(\"name\" => \"nginx\",\n                    \"image\" => \"nginx:1.14.2\",\n                    \"ports\" =>\n                       [Dict(\"containerPort\" => 80)])]),\n\t    \"metadata\" => Dict(\"labels\" => Dict(\"app\" => \"nginx\"))),\n\t\t\"selector\" => Dict(\"matchLabels\" => Dict(\"app\" => \"nginx\")),\n      \"replicas\" => 2),\n     \"metadata\" => Dict(\"name\" => \"nginx-deployment\"),\n     \"apiVersion\" => \"apps/v1\");\n\nx = @item(data, spec, template, spec, containers, ports, containerPort)\n# x == 80"}]}]}],"thread_ts":"1614434214.014400","parent_user_id":"U01CQTKB86N","reactions":[{"name":"fast_parrot","users":["U01CQTKB86N"],"count":1}]},{"client_msg_id":"25535cd4-acf6-4596-b38e-7074ed3f7f7a","type":"message","text":"I did wonder if macros would be useful here.","user":"U01CQTKB86N","ts":"1614503448.044700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0KF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I did wonder if macros would be useful here."}]}]}],"thread_ts":"1614434214.014400","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"07390b76-4217-47e2-a104-1e809d399a7c","type":"message","text":"My original idea was that there might be a better way of handling Kubernetes YAML files than the way Helm works, which is by templating them with Go’s templating mechanism. (I also thought that it might be easier to write them in TOML, but that does not seem to be the case.)","user":"U01CQTKB86N","ts":"1614503608.044900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lQErw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My original idea was that there might be a better way of handling Kubernetes YAML files than the way Helm works, which is by templating them with Go’s templating mechanism. (I also thought that it might be easier to write them in TOML, but that does not seem to be the case.)"}]}]}],"thread_ts":"1614434214.014400","parent_user_id":"U01CQTKB86N"}]