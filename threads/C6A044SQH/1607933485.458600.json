[{"client_msg_id":"6242de33-40b9-4e00-9369-9432312163ec","type":"message","text":"Hi all,\n\nI create a shared array inside a function and fill the elements using @sync @distributed. When I try to access this array later on other workers, I get the following error.\n\n```TaskFailedException:\nOn worker 2:\nBoundsError: attempt to access 0×0×0 Array{Complex{Float64},3} at index [1]```\nHowever, If I re-run the function that creates the shared array and try to access again, I do not get the error. It looks like a shared array takes multiple initializations to be loaded/shared on workers.\n\nIs that correct?\n\nThanks.","user":"U01H3MBQDDF","ts":"1607933485.458600","team":"T68168MUP","edited":{"user":"U01H3MBQDDF","ts":"1607933822.000000"},"blocks":[{"type":"rich_text","block_id":"oFgOR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi all,\n\nI create a shared array inside a function and fill the elements using @sync @distributed. When I try to access this array later on other workers, I get the following error.\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"TaskFailedException:\nOn worker 2:\nBoundsError: attempt to access 0×0×0 Array{Complex{Float64},3} at index [1]"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nHowever, If I re-run the function that creates the shared array and try to access again, I do not get the error. It looks like a shared array takes multiple initializations to be loaded/shared on workers.\n\nIs that correct?\n\nThanks."}]}]}],"thread_ts":"1607933485.458600","reply_count":14,"reply_users_count":2,"latest_reply":"1607940835.479300","reply_users":["UH24GRBLL","U01H3MBQDDF"],"subscribed":false},{"client_msg_id":"b1bbfee6-325b-46fc-b4c7-a9b4989c70d5","type":"message","text":"<https://docs.julialang.org/en/v1/manual/distributed-computing/#man-shared-arrays>\n\n&gt; Unlike distributed arrays, a shared array is accessible only from those participating workers specified by the pids named argument (and the creating process too, if it is on the same host).","user":"UH24GRBLL","ts":"1607934757.460300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bFcGb","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://docs.julialang.org/en/v1/manual/distributed-computing/#man-shared-arrays"},{"type":"text","text":"\n\n"}]},{"type":"rich_text_quote","elements":[{"type":"text","text":"Unlike distributed arrays, a shared array is accessible only from those participating workers specified by the pids named argument (and the creating process too, if it is on the same host)."}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"918476b8-7b02-4ef6-b4b2-f282294ad773","type":"message","text":"I am doing it on local machine. I have tried pids=procs(), it did not help.","user":"U01H3MBQDDF","ts":"1607936313.463400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q5FD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am doing it on local machine. I have tried pids=procs(), it did not help."}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"3bc0759d-a7c0-4f49-9b1a-0ad79aa98a15","type":"message","text":"does the example from the documentation work?","user":"UH24GRBLL","ts":"1607936452.464200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bpt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does the example from the documentation work?"}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"f592badc-6b0b-4b9b-83da-36254588b3b1","type":"message","text":"Yes.","user":"U01H3MBQDDF","ts":"1607936715.464400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3kmb9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes."}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"349e1cfe-6e91-4e53-af88-9122763b9ceb","type":"message","text":"try `procs(S)`, where `S` is the shared array you've created - it should return all processes that have the array mapped","user":"UH24GRBLL","ts":"1607936779.464800","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1607936790.000000"},"blocks":[{"type":"rich_text","block_id":"7vkx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"try "},{"type":"text","text":"procs(S)","style":{"code":true}},{"type":"text","text":", where "},{"type":"text","text":"S","style":{"code":true}},{"type":"text","text":" is the shared array you've created - it should return all processes that have the array mapped"}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"aea59b17-cd15-4a5e-a41d-d23f4581f6a3","type":"message","text":"In a fresh repl, procs(S) gives me Int[]. When I run the function again what create the shared arrays, I get the right list of workers.","user":"U01H3MBQDDF","ts":"1607939574.474600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=6k8w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In a fresh repl, procs(S) gives me Int[]. When I run the function again what create the shared arrays, I get the right list of workers."}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"e286ca9c-c2ad-4d23-8567-f8f908a23253","type":"message","text":"that doesn't make sense","user":"UH24GRBLL","ts":"1607940552.475300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cbaN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that doesn't make sense"}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"cf3cd1fd-a119-4e61-8cfc-05499fdd71ed","type":"message","text":"does it look like this?\n\n```S = generateArray()\nprocs(S) # Int[]\nS = generateArray()\nprocs(S) # Int[1,2,3,...]```","user":"UH24GRBLL","ts":"1607940596.475500","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1607940613.000000"},"blocks":[{"type":"rich_text","block_id":"zB/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does it look like this?\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"S = generateArray()\nprocs(S) # Int[]\nS = generateArray()\nprocs(S) # Int[1,2,3,...]"}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"fc41e084-ec93-4dc2-87d9-9d960c52d69a","type":"message","text":"Yes, exactly.","user":"U01H3MBQDDF","ts":"1607940613.475800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oZnS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, exactly."}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"635bad66-09be-4f28-b960-e4a06d35bb0f","type":"message","text":"are you sure the worker processes have been started before you initialized the array?","user":"UH24GRBLL","ts":"1607940644.476000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hhKhn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"are you sure the worker processes have been started before you initialized the array?"}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"df8a5e33-36e7-4229-88a3-64a5bcfa5f43","type":"message","text":"Yes, actually. I create other arrays before this. All show the right behavior.","user":"U01H3MBQDDF","ts":"1607940727.476500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GlB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, actually. I create other arrays before this. All show the right behavior."}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"b38be40c-a546-40e7-8144-cac758bf22a2","type":"message","text":"ok","user":"UH24GRBLL","ts":"1607940759.476700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lOiKP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok"}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"0d6fe41e-571c-4905-9ac6-f0ffcc143091","type":"message","text":"so without the code that generates these arrays and starts the worker processes, I don't think there's much anyone here can do to help you","user":"UH24GRBLL","ts":"1607940778.477800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"74t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so without the code that generates these arrays and starts the worker processes, I don't think there's much anyone here can do to help you"}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"},{"client_msg_id":"deeb95b0-d305-41ac-994f-a5ba93943b3a","type":"message","text":":slightly_smiling_face: Okay, thanks for the discussion.","user":"U01H3MBQDDF","ts":"1607940835.479300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Tj8S","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" Okay, thanks for the discussion."}]}]}],"thread_ts":"1607933485.458600","parent_user_id":"U01H3MBQDDF"}]