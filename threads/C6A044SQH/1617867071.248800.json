[{"client_msg_id":"afd8297b-5be6-437b-abcc-1de119d5ccd3","type":"message","text":"We observe something really strange in HypothesisTests.jl: tests passed on Travis CI on both Julia 1.0.5 and 1.5 in November. No commit has been pushed since then, but now that I tried moving to GitHub Actions, tests fail on 1.0.5 and 1.6 with the same error (p-values very different from expected values). I also get this error locally on 1.0.5 and 1.6. What can possibly explain this difference? :confused:","user":"U67431ELR","ts":"1617867071.248800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ixJnV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We observe something really strange in HypothesisTests.jl: tests passed on Travis CI on both Julia 1.0.5 and 1.5 in November. No commit has been pushed since then, but now that I tried moving to GitHub Actions, tests fail on 1.0.5 and 1.6 with the same error (p-values very different from expected values). I also get this error locally on 1.0.5 and 1.6. What can possibly explain this difference? "},{"type":"emoji","name":"confused"}]}]}],"thread_ts":"1617867071.248800","reply_count":13,"reply_users_count":2,"latest_reply":"1617872039.255400","reply_users":["UH24GRBLL","U67431ELR"],"is_locked":false,"subscribed":false},{"client_msg_id":"14c34b4b-5ed6-4aec-b01a-e8a59e2d286a","type":"message","text":"differences in CPU/relying on unsafe transformations?","user":"UH24GRBLL","ts":"1617867755.249400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hHPkC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"differences in CPU/relying on unsafe transformations?"}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"547e9dcd-cd81-44e4-bcc8-eb6f1303a10b","type":"message","text":"if the passing tests are specific to travis, it suggests that travis is doing something very differently compared to other environments","user":"UH24GRBLL","ts":"1617867789.249600","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1617867793.000000"},"blocks":[{"type":"rich_text","block_id":"wPoay","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if the passing tests are specific to travis, it suggests that travis is doing something very differently compared to other environments"}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"45776caf-f2ad-476d-ad35-ebb60f8de5cc","type":"message","text":"Yeah that might be an explanation. Unfortunately I've changed my computer recently so I don't know whether failures are due to the newer CPU.","user":"U67431ELR","ts":"1617868830.250000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7MCFC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah that might be an explanation. Unfortunately I've changed my computer recently so I don't know whether failures are due to the newer CPU."}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"ae18c635-0632-44fc-aa07-a2a5a37313ae","type":"message","text":"You'd have to figure out what travis exactly uses","user":"UH24GRBLL","ts":"1617868965.250200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fjjcb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You'd have to figure out what travis exactly uses"}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"350c7892-998b-40cc-bc3a-405c5474e53d","type":"message","text":"fromthe log you posted, it only claimed genreic Xeon, which is as good as nothing in this case","user":"UH24GRBLL","ts":"1617868981.250400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G13FM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"fromthe log you posted, it only claimed genreic Xeon, which is as good as nothing in this case"}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"dcd1ff35-a697-4d32-be56-e6a70ee43251","type":"message","text":"I suspect that tests used to pass on most CPUs, otherwise we would have noticed local failures. So maybe I can try with an older machine to see whether tests pass.","user":"U67431ELR","ts":"1617869053.250600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AUA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I suspect that tests used to pass on most CPUs, otherwise we would have noticed local failures. So maybe I can try with an older machine to see whether tests pass."}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"06702d03-6b79-42a5-b80e-d5785b5886ce","type":"message","text":"if that turns out to be true, it's probably some misplaced `@fastmath` or `@avx` that doesn't take care of loop invariants properly","user":"UH24GRBLL","ts":"1617869503.250800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2WozT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if that turns out to be true, it's probably some misplaced "},{"type":"text","text":"@fastmath","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"@avx","style":{"code":true}},{"type":"text","text":" that doesn't take care of loop invariants properly"}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"dfd23e7d-a6b9-43fa-8662-03363e408a78","type":"message","text":"At least the failure happens also on a Xeon E5-2603 (introduced in 2012).","user":"U67431ELR","ts":"1617869673.251300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"14+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"At least the failure happens also on a Xeon E5-2603 (introduced in 2012)."}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"5c1ef75d-b416-42f0-96c0-7c9f60d8d2c5","type":"message","text":"Maybe the difference is rather in one of the dependencies...","user":"U67431ELR","ts":"1617869750.252500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l7u3T","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe the difference is rather in one of the dependencies..."}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"d895a4cf-b26f-4140-b4ae-e1eb87f3304b","type":"message","text":"OK, I've found the culprit: it's Distributions. Now I need to find the problematic commit.","user":"U67431ELR","ts":"1617870257.254400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+oLKO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK, I've found the culprit: it's Distributions. Now I need to find the problematic commit."}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"4450daa9-1467-48b2-8782-c77ada1dfa3c","type":"message","text":"That's <https://github.com/JuliaStats/Distributions.jl/pull/1269>. AFAICT it just changed the result of `rand` for a given seed, so it's not a bug.","user":"U67431ELR","ts":"1617870619.254600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fcy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's "},{"type":"link","url":"https://github.com/JuliaStats/Distributions.jl/pull/1269"},{"type":"text","text":". AFAICT it just changed the result of "},{"type":"text","text":"rand","style":{"code":true}},{"type":"text","text":" for a given seed, so it's not a bug."}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"749c7b95-0bad-4617-b0fd-73ce176c6855","type":"message","text":"makes sense, since both 1.0.5 and 1.7 fail","user":"UH24GRBLL","ts":"1617872024.255200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yYwm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"makes sense, since both 1.0.5 and 1.7 fail"}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"},{"client_msg_id":"bfaa67e9-1462-4d6d-a404-1bf6d52168ab","type":"message","text":"if it was only 1.6/1.7, it could have been the Random changes","user":"UH24GRBLL","ts":"1617872039.255400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7NV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if it was only 1.6/1.7, it could have been the Random changes"}]}]}],"thread_ts":"1617867071.248800","parent_user_id":"U67431ELR"}]