[{"client_msg_id":"326e4420-95d9-4ce0-b8aa-a8dd91f316b4","type":"message","text":"Hi, a question on mutating functions. If I have a function `sum!(A::Matrix, B::Matrix)`  that adds `A` to `B` in place, due to Julia's way of handling arrays it won't actually overwrite `B` unless I call it in the following way: `B = sum!(A,B)` . Should I append ! to such functions anyway as they're still mutating the function arguments in a sense? Also, does this have implications for memory allocation? Is it still an efficient function? Does `B = sum!(A,B)`  still operate in place?","user":"U01L0RJC6FM","ts":"1612279222.399200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7AFz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi, a question on mutating functions. If I have a function "},{"type":"text","text":"sum!(A::Matrix, B::Matrix)","style":{"code":true}},{"type":"text","text":"  that adds "},{"type":"text","text":"A","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"B","style":{"code":true}},{"type":"text","text":" in place, due to Julia's way of handling arrays it won't actually overwrite "},{"type":"text","text":"B","style":{"code":true}},{"type":"text","text":" unless I call it in the following way: "},{"type":"text","text":"B = sum!(A,B)","style":{"code":true}},{"type":"text","text":" . Should I append ! to such functions anyway as they're still mutating the function arguments in a sense? Also, does this have implications for memory allocation? Is it still an efficient function? Does "},{"type":"text","text":"B = sum!(A,B)","style":{"code":true}},{"type":"text","text":"  still operate in place?"}]}]}],"thread_ts":"1612279222.399200","reply_count":22,"reply_users_count":5,"latest_reply":"1612304175.439600","reply_users":["B01J9QZ4SP8","U011LUQ182G","U01L0RJC6FM","U6740K1SP","U8FVA14TH"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1612279223.399300","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM","reactions":[{"name":"bridge","users":["U01L0RJC6FM","USU9FRPEU"],"count":2}]},{"type":"message","subtype":"bot_message","text":"Success, it has been cross posted <https://discourse.julialang.org/t/hi-a-question-on-mutating-functions-if-i-have-a-function-sum-a-matrix-b-mat|to Discourse>. Keep and eye out on Discourse for responses and please add an answer there once you are satisfied with the solution so others can benefit as well. Happy debugging!","ts":"1612279268.399900","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"f7717bd1-a301-4ab2-9857-6824dde2b0c3","type":"message","text":"Hi <@U01L0RJC6FM> - long time no see\n1. yes, it’s good practice to append ! whenever the function mutates an argument <https://docs.julialang.org/en/v1/manual/style-guide/#bang-convention>\n2. I’m not sure why the function won’t mutate - it should? Something like `sum!(u,v) = u.+=v` works for me\nMinor note, I think style-wise it’s recommended to list the mutated arguments first (see #3 of <https://docs.julialang.org/en/v1/manual/style-guide/#Write-functions-with-argument-ordering-similar-to-Julia-Base>)","user":"U011LUQ182G","ts":"1612280328.404500","team":"T68168MUP","edited":{"user":"U011LUQ182G","ts":"1612280574.000000"},"blocks":[{"type":"rich_text","block_id":"RwfA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi "},{"type":"user","user_id":"U01L0RJC6FM"},{"type":"text","text":" - long time no see\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, it’s good practice to append ! whenever the function mutates an argument "},{"type":"link","url":"https://docs.julialang.org/en/v1/manual/style-guide/#bang-convention"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I’m not sure why the function won’t mutate - it should? Something like "},{"type":"text","text":"sum!(u,v) = u.+=v","style":{"code":true}},{"type":"text","text":" works for me"}]}],"style":"ordered","indent":0},{"type":"rich_text_section","elements":[{"type":"text","text":"\nMinor note, I think style-wise it’s recommended to list the mutated arguments first (see #3 of "},{"type":"link","url":"https://docs.julialang.org/en/v1/manual/style-guide/#Write-functions-with-argument-ordering-similar-to-Julia-Base"},{"type":"text","text":")"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"67c31154-64e6-4068-9e27-b68c410da773","type":"message","text":"hehe hi Jesse :slightly_smiling_face: thanks for the insight! `sum!(u,v) = u.+=v` seems to work indeed. I remember reading somewhere that arrays won't be overwritten as the mutation happens in a different scope? I am not quite sure where I have read this so I might be mistaken though.","user":"U01L0RJC6FM","ts":"1612280755.406100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p2c73","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hehe hi Jesse "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" thanks for the insight! "},{"type":"text","text":"sum!(u,v) = u.+=v","style":{"code":true}},{"type":"text","text":" seems to work indeed. I remember reading somewhere that arrays won't be overwritten as the mutation happens in a different scope? I am not quite sure where I have read this so I might be mistaken though."}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"a5bdac3d-1d62-42b7-b2c1-186a9fab32a8","type":"message","text":"Note SGJ has responded on discourse","user":"U6740K1SP","ts":"1612280768.406300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HhPi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Note SGJ has responded on discourse"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"464ad081-d475-47a3-9bd8-4b24246cad4b","type":"message","text":"SGJ’s response on Discourse\n&gt; That’s not correct. If you actually modify the contents of `B` in your function, there is no need for an assignment afterwards.","user":"U011LUQ182G","ts":"1612280820.406500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=4cK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"SGJ’s response on Discourse\n"}]},{"type":"rich_text_quote","elements":[{"type":"text","text":"That’s not correct. If you actually modify the contents of "},{"type":"text","text":"B","style":{"code":true}},{"type":"text","text":" in your function, there is no need for an assignment afterwards."}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"2ebcc87b-9a9e-441c-986b-9334b5b22d7c","type":"message","text":"hmm thanks.. actually somehow I can't access the question on discourse anymore","user":"U01L0RJC6FM","ts":"1612280848.406700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UBZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm thanks.. actually somehow I can't access the question on discourse anymore"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"1dffd62e-88dc-4a09-95c9-8022ae1c2947","type":"message","text":"<https://discourse.julialang.org/t/assignment-vs-mutation-with-bang-functions/54466/2>?","user":"U011LUQ182G","ts":"1612280855.406900","team":"T68168MUP","attachments":[{"service_name":"JuliaLang","title":"Assignment vs mutation with bang! functions","title_link":"https://discourse.julialang.org/t/assignment-vs-mutation-with-bang-functions/54466/2","text":"That’s not correct. If you actually modify the contents of B in your function, there is no need for an assignment afterwards.","fallback":"JuliaLang: Assignment vs mutation with bang! functions","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","ts":1612280618,"from_url":"https://discourse.julialang.org/t/assignment-vs-mutation-with-bang-functions/54466/2","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/assignment-vs-mutation-with-bang-functions/54466/2"}],"blocks":[{"type":"rich_text","block_id":"JNNE3","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://discourse.julialang.org/t/assignment-vs-mutation-with-bang-functions/54466/2"},{"type":"text","text":"?"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"a08d3be5-2aa1-43fe-966b-c4fc590e7098","type":"message","text":"oh interesting. I renamed it","user":"U6740K1SP","ts":"1612280873.407200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fIT20","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh interesting. I renamed it"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM","reactions":[{"name":"+1","users":["U011LUQ182G"],"count":1}]},{"client_msg_id":"3f0fd0b8-69f5-4c3f-aee7-6beac79539b3","type":"message","text":"aha thanks","user":"U01L0RJC6FM","ts":"1612280939.407800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"K3o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"aha thanks"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"32198363-c8d6-4cca-89cd-41da518c770f","type":"message","text":"we should change the bot to post the link with the thread id instead of just the title","user":"U6740K1SP","ts":"1612280957.408000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wOADr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"we should change the bot to post the link with the thread id instead of just the title"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"51036fed-2bf9-4889-8919-198cac4e9133","type":"message","text":"<@U6740K1SP> that’d be cool.\n\nI missed it - did you rename the thread manually or did BridgeBot somehow do that?","user":"U011LUQ182G","ts":"1612281074.408600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xvO","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6740K1SP"},{"type":"text","text":" that’d be cool.\n\nI missed it - did you rename the thread manually or did BridgeBot somehow do that?"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"d7b31e47-847e-488b-a34a-e0e7755137ac","type":"message","text":"I did it manually","user":"U6740K1SP","ts":"1612281090.408800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+RIZf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I did it manually"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM","reactions":[{"name":"+1","users":["U011LUQ182G"],"count":1}]},{"client_msg_id":"f476001e-bd06-458a-ba41-5052f052a1e8","type":"message","text":"another question to piggyback: if it mutates is it advisable to even return the arguments? I feel not returning stuff cleans up the code","user":"U01L0RJC6FM","ts":"1612281097.409100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FWQw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"another question to piggyback: if it mutates is it advisable to even return the arguments? I feel not returning stuff cleans up the code"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"41e841e2-816e-4dcb-908a-0ae71c26a1bd","type":"message","text":"Yes, there’s a pretty strong convention to return what gets modified","user":"U6740K1SP","ts":"1612281124.409300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9Kly","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, there’s a pretty strong convention to return what gets modified"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"82c6246b-5568-46bf-815c-2b69c3d3a9c5","type":"message","text":"it allows you to chain ! functions together","user":"U6740K1SP","ts":"1612281133.409500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CYP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it allows you to chain ! functions together"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM","reactions":[{"name":"today-i-learned","users":["U011LUQ182G"],"count":1},{"name":"+1","users":["U011LUQ182G"],"count":1}]},{"client_msg_id":"84acde59-b54b-4f3f-a1f5-63f91609c402","type":"message","text":"I see, thanks! that makes sense","user":"U01L0RJC6FM","ts":"1612281192.410300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"03T2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see, thanks! that makes sense"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"77f1b6a1-1eda-4779-9659-137881d04752","type":"message","text":"E.g., `sort!(transform!(update!(x)))` or `x |&gt; update! |&gt; transform! |&gt; sort!`","user":"U6740K1SP","ts":"1612281217.410500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Nqay","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"E.g., "},{"type":"text","text":"sort!(transform!(update!(x)))","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"x |> update! |> transform! |> sort!","style":{"code":true}}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"4ee07ef8-9c1b-45c0-ae28-b53507c53980","type":"message","text":"You are right! I didn't think of this usecase makes a lot of sense!","user":"U01L0RJC6FM","ts":"1612281352.411000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UE1m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You are right! I didn't think of this usecase makes a lot of sense!"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"8c1fccbf-7563-4a52-aa15-194385d6aab2","type":"message","text":"Maybe it should also be pointed out that there is already a `sum!` function in Base that behaves a bit differently from the one posted by the OP: <https://docs.julialang.org/en/v1/base/collections/#Base.sum|https://docs.julialang.org/en/v1/base/collections/#Base.sum>!","user":"U8FVA14TH","ts":"1612282024.414600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uXTv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe it should also be pointed out that there is already a `sum!` function in Base that behaves a bit differently from the one posted by the OP: "},{"type":"link","url":"https://docs.julialang.org/en/v1/base/collections/#Base.sum","text":"https://docs.julialang.org/en/v1/base/collections/#Base.sum"},{"type":"text","text":"!"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"f7c02cd2-e725-4a7c-b944-7c061ceae669","type":"message","text":"Hmm. Seems like Slack doesn't like hyperlinks ending with a bang, so you may have to copy-paste the link instead of clicking it.","user":"U8FVA14TH","ts":"1612282169.414800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kBBWt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm. Seems like Slack doesn't like hyperlinks ending with a bang, so you may have to copy-paste the link instead of clicking it."}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"},{"client_msg_id":"f7ec2560-13ca-4535-8f8f-21d5f9245eda","type":"message","text":"oh wasn't aware, thanks for the hint. I was trying to figure out what the Julia-way would be on writing such functions","user":"U01L0RJC6FM","ts":"1612304175.439600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0Owk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh wasn't aware, thanks for the hint. I was trying to figure out what the Julia-way would be on writing such functions"}]}]}],"thread_ts":"1612279222.399200","parent_user_id":"U01L0RJC6FM"}]