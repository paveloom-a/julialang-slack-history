[{"client_msg_id":"95fba917-0d30-40ad-973b-f947522e1383","type":"message","text":"Is something like that\n\n```f(x::TV{T, 2}) where {TV &lt;: AbstractArray, T &lt;: Real}```\npossible somehow ?","user":"UKJSNT1QR","ts":"1616778632.248100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VoIr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is something like that\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"f(x::TV{T, 2}) where {TV <: AbstractArray, T <: Real}"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\npossible somehow ?"}]}]}],"thread_ts":"1616778632.248100","reply_count":20,"reply_users_count":3,"latest_reply":"1616779534.252400","reply_users":["U017LQ3A59U","UKJSNT1QR","UH24GRBLL"],"is_locked":false,"subscribed":false},{"client_msg_id":"2c94c336-9664-431e-9759-2f1b2581b961","type":"message","text":"`f(x::A) where {T &lt;: Real, A &lt;: AbstractArray{T, 2}}`","user":"U017LQ3A59U","ts":"1616778784.248400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UGa7f","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"f(x::A) where {T <: Real, A <: AbstractArray{T, 2}}","style":{"code":true}}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"fe54cd15-210e-4049-8758-8b6894c556af","type":"message","text":"I was hoping to have access to the outer constructor imediately, doesn't work like that","user":"UKJSNT1QR","ts":"1616778848.248600","team":"T68168MUP","edited":{"user":"UKJSNT1QR","ts":"1616778856.000000"},"blocks":[{"type":"rich_text","block_id":"kNW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was hoping to have access to the outer constructor imediately, doesn't work like that"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"5c8dfb12-6dbf-4345-bac6-47665c056551","type":"message","text":"to do a thing like\n\n```f(x::TV{T, 2}) where {TV &lt;: AbstractArray, T &lt;: Real}\n    y::TV{T, 3} ....\nend```","user":"UKJSNT1QR","ts":"1616778920.248900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sIOuU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"to do a thing like\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"f(x::TV{T, 2}) where {TV <: AbstractArray, T <: Real}\n    y::TV{T, 3} ....\nend"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"381f9b2c-6988-4ed9-8500-37f0ad99d724","type":"message","text":"That's indeed not possible that way","user":"U017LQ3A59U","ts":"1616778961.249100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WJVf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's indeed not possible that way"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"97fb54a5-157f-4fae-859b-c5a22373d535","type":"message","text":"Too bad but not the end of the world. Thanks","user":"UKJSNT1QR","ts":"1616778985.249300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VEC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Too bad but not the end of the world. Thanks"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"dd023f9f-1bf1-454f-b9ba-e769e8285846","type":"message","text":"`similar(a, size(a)..., 3)`","user":"UH24GRBLL","ts":"1616778985.249500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k9ZK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"similar(a, size(a)..., 3)","style":{"code":true}}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"933cb37f-a630-45ba-8378-5bbb2d1b1687","type":"message","text":"or however many elements you want to add in the third dimension","user":"UH24GRBLL","ts":"1616779023.249700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rTd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"or however many elements you want to add in the third dimension"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"263f157a-faf8-4928-9adf-9f475b871581","type":"message","text":"`a` already has the correct type, it was just an annotation to help inference. (Maybe it's not even doing that)","user":"UKJSNT1QR","ts":"1616779062.249900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P/U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"a","style":{"code":true}},{"type":"text","text":" already has the correct type, it was just an annotation to help inference. (Maybe it's not even doing that)"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"4ae7d1ec-2976-4b3c-9641-bcc199163c2f","type":"message","text":"yeah, I meant you'd do `y = similar(...)`","user":"UH24GRBLL","ts":"1616779088.250100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v3Z=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, I meant you'd do "},{"type":"text","text":"y = similar(...)","style":{"code":true}}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"96b152f0-83e3-40d9-84b0-79994f5c9ec2","type":"message","text":"oh I see","user":"UKJSNT1QR","ts":"1616779105.250300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s3/E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh I see"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"4f64e80c-cfdf-4f3a-be72-f1e0898579bc","type":"message","text":"those `y::T` inside of a functions are not type annotations though, they're assertions - it will throw if the type doesn't match","user":"UH24GRBLL","ts":"1616779118.250500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"flb3S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"those "},{"type":"text","text":"y::T","style":{"code":true}},{"type":"text","text":" inside of a functions are not type annotations though, they're assertions - it will throw if the type doesn't match"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"bf9120b7-872b-4f8d-bfb9-881c1337fa24","type":"message","text":"if you need them, it's usually an indicator of already type unstable code","user":"UH24GRBLL","ts":"1616779138.250700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"M3B=u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you need them, it's usually an indicator of already type unstable code"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"785ec589-0d0c-4736-8e36-61540b81f37f","type":"message","text":"Ok then I wasn't doing what I thought I was doing :slightly_smiling_face:\n\nIn my defence it's Zygote's fault if it's not stable","user":"UKJSNT1QR","ts":"1616779177.250900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G4dj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok then I wasn't doing what I thought I was doing "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":"\n\nIn my defence it's Zygote's fault if it's not stable"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"76986268-6e8c-4bbb-b90f-42e940d65768","type":"message","text":"the `x::T` in function signatures are only relevant for dispatch (and if you need a type parameter in the method), they're not used for inference","user":"UH24GRBLL","ts":"1616779177.251100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"X+Ft","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the "},{"type":"text","text":"x::T","style":{"code":true}},{"type":"text","text":" in function signatures are only relevant for dispatch (and if you need a type parameter in the method), they're not used for inference"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR","reactions":[{"name":"+1","users":["UKJSNT1QR"],"count":1}]},{"client_msg_id":"6e6d0fc7-070c-400f-b68b-2d732880771e","type":"message","text":"have you investigated with e.g. `@code_warntype` that your kernel/loss function is actually type stable?","user":"UH24GRBLL","ts":"1616779249.251400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tFgoY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"have you investigated with e.g. "},{"type":"text","text":"@code_warntype","style":{"code":true}},{"type":"text","text":" that your kernel/loss function is actually type stable?"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"90947e4c-7d73-47da-b106-7c7ae3a0eb36","type":"message","text":"Yes but my loss itself involves zygote pullbacks so overall I ask Zygote for second derivatives. I manage to coerce it into doing it but he is not happy about it and I'm pretty sure the type inference juste gives up","user":"UKJSNT1QR","ts":"1616779373.251600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fY+6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes but my loss itself involves zygote pullbacks so overall I ask Zygote for second derivatives. I manage to coerce it into doing it but he is not happy about it and I'm pretty sure the type inference juste gives up"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"a0f3aa5c-6ba0-4c52-aff3-453916433ee2","type":"message","text":"It's not the biggest deal, it works. Just trying to clean things up.","user":"UKJSNT1QR","ts":"1616779459.251800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=Up1p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's not the biggest deal, it works. Just trying to clean things up."}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"0ec55923-810f-4fa3-a5b3-95cf1c9454a5","type":"message","text":"may want to debug with Cthulhu then <https://juliahub.com/ui/Packages/Cthulhu/Dqimq/1.6.1>","user":"UH24GRBLL","ts":"1616779461.252000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fFUu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"may want to debug with Cthulhu then "},{"type":"link","url":"https://juliahub.com/ui/Packages/Cthulhu/Dqimq/1.6.1"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"bef3c3e2-93de-438c-8167-b24751d00e18","type":"message","text":"if you're otherwise happy, it's fine :) you can debug further if you want though","user":"UH24GRBLL","ts":"1616779484.252200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J=qH9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you're otherwise happy, it's fine :) you can debug further if you want though"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"5f831a93-8752-4002-9012-a79f7b2a0e55","type":"message","text":"I'll look into it even if the package name doesn't exactly inspire confidence to a begginer Julia user's ability.\n\nThanks !","user":"UKJSNT1QR","ts":"1616779534.252400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k0/fW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'll look into it even if the package name doesn't exactly inspire confidence to a begginer Julia user's ability.\n\nThanks !"}]}]}],"thread_ts":"1616778632.248100","parent_user_id":"UKJSNT1QR"}]