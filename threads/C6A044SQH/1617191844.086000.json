[{"client_msg_id":"2cf11b0e-3b9c-48f9-86a3-c4ff0cbf926e","type":"message","text":"Can `@inbounds` apply to blocks  like  `@inbounds for` , `@inbounds function` ?","user":"UB4BYB1AA","ts":"1617191844.086000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1pP2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can "},{"type":"text","text":"@inbounds","style":{"code":true}},{"type":"text","text":" apply to blocks  like  "},{"type":"text","text":"@inbounds for","style":{"code":true}},{"type":"text","text":" , "},{"type":"text","text":"@inbounds function","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1617191844.086000","reply_count":12,"reply_users_count":3,"latest_reply":"1617193419.088700","reply_users":["U7HAYKY9X","UB4BYB1AA","U01M655G9AR"],"is_locked":false,"subscribed":false},{"client_msg_id":"12f209c3-fb4c-4708-9a05-619330a85b7b","type":"message","text":"Certainly the former - also `@inbounds if`  - not sure about the latter, let me check!","user":"U7HAYKY9X","ts":"1617191874.086100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J/M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Certainly the former - also "},{"type":"text","text":"@inbounds if","style":{"code":true}},{"type":"text","text":"  - not sure about the latter, let me check!"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA"},{"client_msg_id":"21455b21-c540-40a0-9024-3df3f22cb47f","type":"message","text":"It doesn't look like it works with `@inbounds function` . Maybe someone else can explain why, if `function` is just an expression block like any other? But you can always do\n```function foo(a, b, c...)\n    @inbounds begin\n    [ ... ]\n    end # inbounds\nend```","user":"U7HAYKY9X","ts":"1617192008.086300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6haf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It doesn't look like it works with "},{"type":"text","text":"@inbounds function","style":{"code":true}},{"type":"text","text":" . Maybe someone else can explain why, if "},{"type":"text","text":"function","style":{"code":true}},{"type":"text","text":" is just an expression block like any other? But you can always do\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function foo(a, b, c...)\n    @inbounds begin\n    [ ... ]\n    end # inbounds\nend"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA"},{"client_msg_id":"624c256e-6b13-45d7-8750-475b52d2b2bb","type":"message","text":"Ah, thanks","user":"UB4BYB1AA","ts":"1617192920.086500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lMZ3p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, thanks"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA"},{"client_msg_id":"a676f5f2-ac46-4d37-b395-5964873307c5","type":"message","text":"How are you testing whether it works btw?","user":"UB4BYB1AA","ts":"1617192926.086700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sS5bR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How are you testing whether it works btw?"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA"},{"client_msg_id":"3b4df7f4-c47f-4124-bb7b-a27d0c5cd506","type":"message","text":"Doing `@inbounds [1,2][3]` e.g. still checks for bounds; same with `x = [1,2]; @inbounds x[3]` .","user":"UB4BYB1AA","ts":"1617192991.086900","team":"T68168MUP","edited":{"user":"UB4BYB1AA","ts":"1617193036.000000"},"blocks":[{"type":"rich_text","block_id":"abkAj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Doing "},{"type":"text","text":"@inbounds [1,2][3]","style":{"code":true}},{"type":"text","text":" e.g. still checks for bounds; same with "},{"type":"text","text":"x = [1,2]; @inbounds x[3]","style":{"code":true}},{"type":"text","text":" ."}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA"},{"client_msg_id":"4d684014-ef1d-428a-ab4c-c11ae733404d","type":"message","text":"my guess is that the `@inbounds` would not be part of the function definition, but be applied to the expression defining it. It seems like\n```@inbounds const foo = x-&gt;...```\nJust a guess though!","user":"U01M655G9AR","ts":"1617193056.087200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xQcwA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"my guess is that the "},{"type":"text","text":"@inbounds","style":{"code":true}},{"type":"text","text":" would not be part of the function definition, but be applied to the expression defining it. It seems like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@inbounds const foo = x->..."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Just a guess though!"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA"},{"client_msg_id":"0c2c7cb0-783f-420c-b4ae-16c28f268e4f","type":"message","text":"Makes sense to my amateur eye","user":"UB4BYB1AA","ts":"1617193099.087500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z9Xv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Makes sense to my amateur eye"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA"},{"client_msg_id":"e5c5db84-ec54-491f-813b-e7ef8b905fc1","type":"message","text":"Yeah that makes sense. I test it by defining a function and then looking at the assembly code:\n```@inbounds ( f(x) = x[1] )\n@code_native f([1])```","user":"U7HAYKY9X","ts":"1617193254.087700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OLoH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah that makes sense. I test it by defining a function and then looking at the assembly code:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@inbounds ( f(x) = x[1] )\n@code_native f([1])"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA"},{"client_msg_id":"460e881d-e63a-4ddc-95c1-7a763ffcffe1","type":"message","text":"cool","user":"UB4BYB1AA","ts":"1617193275.087900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1PBAK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cool"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA"},{"client_msg_id":"0366483a-3f27-4a37-9ba5-32143d5020de","type":"message","text":"The reason it doesn't seem to work is that it only works when defined inside a function. I think it's the compilation process that removes the boundscheck","user":"U7HAYKY9X","ts":"1617193285.088100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CWgyk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The reason it doesn't seem to work is that it only works when defined inside a function. I think it's the compilation process that removes the boundscheck"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA","reactions":[{"name":"+1","users":["U01M655G9AR"],"count":1}]},{"client_msg_id":"0b4a6ce0-c5b0-424d-9f42-778a647c9078","type":"message","text":"Thanks!!","user":"UB4BYB1AA","ts":"1617193372.088400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pVuN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks!!"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA","reactions":[{"name":"+1","users":["U7HAYKY9X"],"count":1}]},{"client_msg_id":"a6e55a98-2cf5-4342-87ee-a690b0247d64","type":"message","text":"I imagined what one writes in the repl would get compiled too, but... totally different topic","user":"UB4BYB1AA","ts":"1617193419.088700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5eEh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I imagined what one writes in the repl would get compiled too, but... totally different topic"}]}]}],"thread_ts":"1617191844.086000","parent_user_id":"UB4BYB1AA"}]