[{"client_msg_id":"88288847-b0af-4f8b-a368-faceed11541e","type":"message","text":"is there a standard way to propagate the view macro/command?\nfor example, I have a function that returns a slice of a parent array, but a user may want that slice to be a view. for example-\n```data = randn(512, 512)\nmyview = MyView(data; options...)\n# gets a subset of the data\nsub = myview(1)\n# gets a subset of the data as a view\nsub = @view myview(1)```\ninternally the function i’m calling looks like this-\n```function (v::MyView)(idx::Int)\n    idxs = v.filtered_idxs[idx]\n    return v.parent[idxs]\nend```\n","user":"UN97XTLCV","ts":"1608326069.487400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ru6R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there a standard way to propagate the view macro/command?\nfor example, I have a function that returns a slice of a parent array, but a user may want that slice to be a view. for example-\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"data = randn(512, 512)\nmyview = MyView(data; options...)\n# gets a subset of the data\nsub = myview(1)\n# gets a subset of the data as a view\nsub = @view myview(1)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"internally the function i’m calling looks like this-\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function (v::MyView)(idx::Int)\n    idxs = v.filtered_idxs[idx]\n    return v.parent[idxs]\nend"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1608326069.487400","reply_count":4,"reply_users_count":2,"latest_reply":"1608326663.488200","reply_users":["UN97XTLCV","UD0NS8PDF"],"subscribed":false},{"client_msg_id":"4195a8e5-1ab8-4521-a63c-a5dabe1744db","type":"message","text":"I can’t rely on `getindex` because that is already used- this funciton is fundamentally different than indexing the view: it is returning a new view","user":"UN97XTLCV","ts":"1608326174.487500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yRf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can’t rely on "},{"type":"text","text":"getindex","style":{"code":true}},{"type":"text","text":" because that is already used- this funciton is fundamentally different than indexing the view: it is returning a new view"}]}]}],"thread_ts":"1608326069.487400","parent_user_id":"UN97XTLCV"},{"client_msg_id":"55f20e02-a1d5-49d3-8d86-3a62f063ecc6","type":"message","text":"I think you’d need to say something like\n```function (v::MyView)(idx::Int, takeview=nothing)\n    idxs = v.filtered_idxs[idx]\n    takeview===nothing v.parent[idxs] : @view v.parent[idxs]\nend```\nand then `myview(1, true)` returns the view instead of the slice.","user":"UD0NS8PDF","ts":"1608326383.487800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"m=j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think you’d need to say something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function (v::MyView)(idx::Int, takeview=nothing)\n    idxs = v.filtered_idxs[idx]\n    takeview===nothing v.parent[idxs] : @view v.parent[idxs]\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and then "},{"type":"text","text":"myview(1, true)","style":{"code":true}},{"type":"text","text":" returns the view instead of the slice."}]}]}],"thread_ts":"1608326069.487400","parent_user_id":"UN97XTLCV"},{"client_msg_id":"00dcd660-bea9-459e-9722-24ecbf5c0d07","type":"message","text":"yeah thats a good idea","user":"UN97XTLCV","ts":"1608326633.488000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5A=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah thats a good idea"}]}]}],"thread_ts":"1608326069.487400","parent_user_id":"UN97XTLCV"},{"client_msg_id":"4f94da8d-f83f-4508-85af-35b804d9b614","type":"message","text":"i usually have to overthink a solution before someone gives me the obvious/easy one :sweat_smile: thanks!","user":"UN97XTLCV","ts":"1608326663.488200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qNHAb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"i usually have to overthink a solution before someone gives me the obvious/easy one "},{"type":"emoji","name":"sweat_smile"},{"type":"text","text":" thanks!"}]}]}],"thread_ts":"1608326069.487400","parent_user_id":"UN97XTLCV","reactions":[{"name":"+1","users":["UD0NS8PDF"],"count":1}]}]