[{"client_msg_id":"46b6561f-750e-433d-9889-1d0fd89f2c32","type":"message","text":"This has been a pet peeve for a while that I couldn't figure out a way around...\nI tend to use `Lazy.jl` with `DataFramesMeta` for df transforms e.g.\n```@&gt; begin\n  data\n  @by(:date, total = sum(total))\nend```\nProblem is when trying to introduce VegaLite plotting into that chain e.g.\n```...\n@vlplot(:point, x = :date, y = :total)\n...```\nIt tends to fail with `ERROR: One cannot specify both a named and a positional argument for the 'x' encoding channel.`\nEnd up having to output the chain to a variable before I can plot it.\n\nAm I doing something wrong?","user":"UUYRZ3LU8","ts":"1611188715.489300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GIe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This has been a pet peeve for a while that I couldn't figure out a way around...\nI tend to use "},{"type":"text","text":"Lazy.jl","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"DataFramesMeta","style":{"code":true}},{"type":"text","text":" for df transforms e.g.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@> begin\n  data\n  @by(:date, total = sum(total))\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Problem is when trying to introduce VegaLite plotting into that chain e.g.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"...\n@vlplot(:point, x = :date, y = :total)\n..."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"It tends to fail with `ERROR: One cannot specify both a named and a positional argument for the 'x' encoding channel.`\nEnd up having to output the chain to a variable before I can plot it.\n\nAm I doing something wrong?"}]}]}],"thread_ts":"1611188715.489300","reply_count":17,"reply_users_count":3,"latest_reply":"1611336639.154700","reply_users":["U019K6Q9N15","UUYRZ3LU8","UBF9YRB6H"],"subscribed":false},{"client_msg_id":"a447f063-0699-4558-bf6b-f76628064304","type":"message","text":"Well, you're combining verbiage from two different domain-specific languages, so I wouldn't expect this to work without some duct-tape. The `@vlplot` call is going to expand into some expression which probably doesn't fit into what `@&gt;` expects (that is, strictly, a partial function call).\n\nFor reference, here is the source for the two macros: (<https://github.com/queryverse/VegaLite.jl/blob/master/src/dsl_vlplot_macro/dsl_vlplot_macro.jl|@vlplot>), (<https://github.com/MikeInnes/Lazy.jl/blob/master/src/macros.jl#L71|@>&gt;) . Figuring out how to glue the two together could be a lot of work; the best solution is really probably just your solution of outputting a chain.\n\nOr you could use pipe (`|&gt;`). :hear_no_evil:","user":"U019K6Q9N15","ts":"1611190928.000100","team":"T68168MUP","edited":{"user":"U019K6Q9N15","ts":"1611191031.000000"},"blocks":[{"type":"rich_text","block_id":"zqw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, you're combining verbiage from two different domain-specific languages, so I wouldn't expect this to work without some duct-tape. The "},{"type":"text","text":"@vlplot","style":{"code":true}},{"type":"text","text":" call is going to expand into some expression which probably doesn't fit into what "},{"type":"text","text":"@>","style":{"code":true}},{"type":"text","text":" expects (that is, strictly, a partial function call).\n\nFor reference, here is the source for the two macros: ("},{"type":"link","url":"https://github.com/queryverse/VegaLite.jl/blob/master/src/dsl_vlplot_macro/dsl_vlplot_macro.jl","text":"@vlplot"},{"type":"text","text":"), ("},{"type":"link","url":"https://github.com/MikeInnes/Lazy.jl/blob/master/src/macros.jl#L71","text":"@>"},{"type":"text","text":") . Figuring out how to glue the two together could be a lot of work; the best solution is really probably just your solution of outputting a chain.\n\nOr you could use pipe ("},{"type":"text","text":"|>","style":{"code":true}},{"type":"text","text":"). "},{"type":"emoji","name":"hear_no_evil"}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"97c09877-5418-49ac-9175-72da506060af","type":"message","text":"Thanks for the response <@U019K6Q9N15> .\nPiping without outputting to a variable as an intermediate step I couldn't get to work either.\nWill have a dig through the macros.","user":"UUYRZ3LU8","ts":"1611191405.000500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x35sa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for the response "},{"type":"user","user_id":"U019K6Q9N15"},{"type":"text","text":" .\nPiping without outputting to a variable as an intermediate step I couldn't get to work either.\nWill have a dig through the macros."}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"94dacb38-7357-43ec-ac45-d9473cffc044","type":"message","text":"That's a surprise! I've piped quite a lot with VegaLite.","user":"U019K6Q9N15","ts":"1611191539.000700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/mK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's a surprise! I've piped quite a lot with VegaLite."}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"34d867f0-2527-4e4c-9789-ca7d608b626d","type":"message","text":"Wait, one issue I had wasn't with syntax-- what's your VegaLite version?","user":"U019K6Q9N15","ts":"1611191552.000900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/R+Ay","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Wait, one issue I had wasn't with syntax-- what's your VegaLite version?"}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"02af98e9-0988-4183-ada6-e38a9e55c979","type":"message","text":"Do `using Pkg; Pkg.status()`","user":"U019K6Q9N15","ts":"1611191562.001100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IImSx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do "},{"type":"text","text":"using Pkg; Pkg.status()","style":{"code":true}}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"625e34cd-cd58-4d15-9526-a1da47ddead5","type":"message","text":"For some reason `Pkg.add(\"VegaLite\")` install version 0.7.0 for me","user":"U019K6Q9N15","ts":"1611191584.001300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wvi3s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For some reason "},{"type":"text","text":"Pkg.add(\"VegaLite\")","style":{"code":true}},{"type":"text","text":" install version 0.7.0 for me"}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"74b5e5cc-7e11-4054-8975-9cfdf517b7a3","type":"message","text":"Which simply does not work.","user":"U019K6Q9N15","ts":"1611191588.001500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"250","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Which simply does not work."}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"0ccee1d6-f94e-4d43-8097-64e5e46c4c4d","type":"message","text":"2.3.0","user":"UUYRZ3LU8","ts":"1611191594.001700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VtK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"2.3.0"}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"3173f04c-3d2c-4140-b2bf-b4d1c6d61c6c","type":"message","text":"Ah, my apologies.","user":"U019K6Q9N15","ts":"1611191602.001900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qWi0G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, my apologies."}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"066e795e-dcb3-4e10-b8c3-f62cf6360579","type":"message","text":"Consider `Query.jl` as an alternative to `DataFramesMeta`. `VegaLite` was designed to work with it.","user":"U019K6Q9N15","ts":"1611191648.002100","team":"T68168MUP","edited":{"user":"U019K6Q9N15","ts":"1611191696.000000"},"blocks":[{"type":"rich_text","block_id":"90OZt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Consider "},{"type":"text","text":"Query.jl","style":{"code":true}},{"type":"text","text":" as an alternative to "},{"type":"text","text":"DataFramesMeta","style":{"code":true}},{"type":"text","text":". "},{"type":"text","text":"VegaLite","style":{"code":true}},{"type":"text","text":" was designed to work with it."}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"60425436-50e4-419d-8256-75eab1f853a5","type":"message","text":"Hmmm, <https://github.com/queryverse/Query.jl>.","user":"U019K6Q9N15","ts":"1611191659.002300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Kjx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmmm, "},{"type":"link","url":"https://github.com/queryverse/Query.jl"},{"type":"text","text":"."}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"f2e28b41-05de-44f4-8c0f-b59a3b7d7c0d","type":"message","text":"I did run into issues where plots weren't rendering in VSCode, was due to default install of v1.0.0 for some reason. Assume Pkg registry file wasn't updated at the time","user":"UUYRZ3LU8","ts":"1611191722.002600","team":"T68168MUP","edited":{"user":"UUYRZ3LU8","ts":"1611191825.000000"},"blocks":[{"type":"rich_text","block_id":"Bfd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I did run into issues where plots weren't rendering in VSCode, was due to default install of v1.0.0 for some reason. Assume Pkg registry file wasn't updated at the time"}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"83d0a9f2-36f3-4258-be62-872db17ab29d","type":"message","text":"thanks for the suggestion re `query.jl`","user":"UUYRZ3LU8","ts":"1611191885.002900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Bq/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks for the suggestion re "},{"type":"text","text":"query.jl","style":{"code":true}}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8","reactions":[{"name":"+1","users":["U019K6Q9N15"],"count":1}]},{"client_msg_id":"b8ac1663-98d0-4634-abe7-4c8535f27307","type":"message","text":"wait `sum(total)` is incorrect syntax. You want `sum(:total)`.\n\nAlso, we've recently changed to stop recommending `Lazy.jl` and instread use `Chain.jl`. Maybe that will be better","user":"UBF9YRB6H","ts":"1611240544.071900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qJe=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"wait "},{"type":"text","text":"sum(total)","style":{"code":true}},{"type":"text","text":" is incorrect syntax. You want "},{"type":"text","text":"sum(:total)","style":{"code":true}},{"type":"text","text":".\n\nAlso, we've recently changed to stop recommending "},{"type":"text","text":"Lazy.jl","style":{"code":true}},{"type":"text","text":" and instread use "},{"type":"text","text":"Chain.jl","style":{"code":true}},{"type":"text","text":". Maybe that will be better"}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"988C3556-7D1B-4E4C-BA17-2E4008413D2D","type":"message","text":"Will check it out <@UBF9YRB6H> , any particular reason for the change?","user":"UUYRZ3LU8","ts":"1611297791.122900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/7zoS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Will check it out "},{"type":"user","user_id":"UBF9YRB6H"},{"type":"text","text":" , any particular reason for the change?"}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"B0BD353B-EA2A-4C60-AEA5-5410F2CB16A3","type":"message","text":"Ah yeah, typo, actual code is as expected ","user":"UUYRZ3LU8","ts":"1611297808.123600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OTSWe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah yeah, typo, actual code is as expected "}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"},{"client_msg_id":"26377d99-26a4-4c37-ab80-47403d5dcb0d","type":"message","text":"Lazy.jl exports `groupby` which conflicts with DataFrames. Also Chain.jl has some nice features like optional `_`","user":"UBF9YRB6H","ts":"1611336639.154700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/Qlsr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Lazy.jl exports "},{"type":"text","text":"groupby","style":{"code":true}},{"type":"text","text":" which conflicts with DataFrames. Also Chain.jl has some nice features like optional "},{"type":"text","text":"_","style":{"code":true}}]}]}],"thread_ts":"1611188715.489300","parent_user_id":"UUYRZ3LU8"}]