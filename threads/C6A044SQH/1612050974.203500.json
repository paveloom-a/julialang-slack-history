[{"client_msg_id":"d2f0771d-3c88-4e3f-a011-9b76bc41bc65","type":"message","text":"When I use the `@btime` and `@benchmark` macros in a script (a `.jl` file), why do I not get any print outs when benchmarking?","user":"UT9SK8EF4","ts":"1612050974.203500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YZoMQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When I use the "},{"type":"text","text":"@btime","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"@benchmark","style":{"code":true}},{"type":"text","text":" macros in a script (a "},{"type":"text","text":".jl","style":{"code":true}},{"type":"text","text":" file), why do I not get any print outs when benchmarking?"}]}]}],"thread_ts":"1612050974.203500","reply_count":23,"reply_users_count":3,"latest_reply":"1612051916.209400","reply_users":["B01J9QZ4SP8","UH8A351DJ","UT9SK8EF4"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1612050976.203600","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4","reactions":[{"name":"bridge","users":["UT9SK8EF4"],"count":1}]},{"type":"message","subtype":"bot_message","text":"Success, it has been cross posted <https://discourse.julialang.org/t/when-i-use-the-btime-and-benchmark-macros-in-a-script-a-jl-file-why-do|to Discourse>. Keep and eye out on Discourse for responses and please add an answer there once you are satisfied with the solution so others can benefit as well. Happy debugging!","ts":"1612051002.204100","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"c4bd4cbe-8fa9-4b8a-9d19-b3fc79430858","type":"message","text":"try to `println()` or `show()` it","user":"UH8A351DJ","ts":"1612051172.204500","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1612051180.000000"},"blocks":[{"type":"rich_text","block_id":"vwPhR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"try to "},{"type":"text","text":"println()","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"show()","style":{"code":true}},{"type":"text","text":" it"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"c25ff164-b7f6-4965-a5c2-5c1cebf88c2b","type":"message","text":"I wrapped in `println` that doesnt work.","user":"UT9SK8EF4","ts":"1612051301.205200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QQs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I wrapped in "},{"type":"text","text":"println","style":{"code":true}},{"type":"text","text":" that doesnt work."}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"6205224e-a401-46db-a9f8-6529513432c0","type":"message","text":"Let me try `show`","user":"UT9SK8EF4","ts":"1612051304.205400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xCHk5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Let me try "},{"type":"text","text":"show","style":{"code":true}}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"e9eae18c-a1e2-4d20-b499-263cfb9fdc84","type":"message","text":"Ok, that prints like literally all the executions of everything","user":"UT9SK8EF4","ts":"1612051363.205700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TkIh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, that prints like literally all the executions of everything"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"724e5e35-2d50-4971-a530-210b8cb0e1fa","type":"message","text":"Is there any way to get just the output that you'd have in the REPL?","user":"UT9SK8EF4","ts":"1612051371.205900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tNTq=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there any way to get just the output that you'd have in the REPL?"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"2c6863ff-96d2-4856-a751-fbe337c0a428","type":"message","text":"can you show us a snippet of your code?","user":"UH8A351DJ","ts":"1612051393.206100","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1612051398.000000"},"blocks":[{"type":"rich_text","block_id":"hiXI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you show us a snippet of your code?"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"5ba6fb7f-cfea-4860-b98d-4f077bf13755","type":"message","text":"```using BenchmarkTools, LinearAlgebra\n\nn, T, d = 10, 1000, 100\ndata = randn(n, T, d)\nAs = [randn(d, d) for _ in 1:T]\nbs = [randn(d) for _ in 1:T]\n\n#### code below this line I would like to speed up if possible\nfunction result_one()\n    result = map((X, A, b) -&gt; (A * X' .+ b)',\n                 eachslice(data; dims=1), As, bs)\n    return permutedims(cat(result..., dims=3), [3, 1, 2])\nend\n\nfunction result_two()\n    result  = map((X, A, b) -&gt; 0.5*dot.(eachrow(X), eachcol(A * X')) + (X * b),\n           eachslice(data; dims=1), As, bs)\n    return permutedims(hcat(result...))\nend\n\nshow(@btime result_one())\nshow( @btime result_two())```","user":"UT9SK8EF4","ts":"1612051412.206400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j1jSc","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using BenchmarkTools, LinearAlgebra\n\nn, T, d = 10, 1000, 100\ndata = randn(n, T, d)\nAs = [randn(d, d) for _ in 1:T]\nbs = [randn(d) for _ in 1:T]\n\n#### code below this line I would like to speed up if possible\nfunction result_one()\n    result = map((X, A, b) -> (A * X' .+ b)',\n                 eachslice(data; dims=1), As, bs)\n    return permutedims(cat(result..., dims=3), [3, 1, 2])\nend\n\nfunction result_two()\n    result  = map((X, A, b) -> 0.5*dot.(eachrow(X), eachcol(A * X')) + (X * b),\n           eachslice(data; dims=1), As, bs)\n    return permutedims(hcat(result...))\nend\n\nshow(@btime result_one())\nshow( @btime result_two())"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"1e48adc0-2612-4bb6-813d-2bb79236ca7b","type":"message","text":"I tried replacing `show` with `println` without luck above","user":"UT9SK8EF4","ts":"1612051440.206600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lYjt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tried replacing "},{"type":"text","text":"show","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"println","style":{"code":true}},{"type":"text","text":" without luck above"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"b4233036-a051-4cfc-a942-db172f8729cd","type":"message","text":"```/scratch/jiling » cat test.jl                                                                              jiling@at14\nusing BenchmarkTools\n\nprintln(@btime rand(3))\n\n/scratch/jiling » julia test.jl                                                                            jiling@at14\n  49.784 ns (1 allocation: 112 bytes)\n[0.20561244882383867, 0.29195218135494705, 0.36530446157995233]```","user":"UH8A351DJ","ts":"1612051498.206800","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1612051506.000000"},"blocks":[{"type":"rich_text","block_id":"GHd","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"/scratch/jiling » cat test.jl                                                                              jiling@at14\nusing BenchmarkTools\n\nprintln(@btime rand(3))\n\n/scratch/jiling » julia test.jl                                                                            jiling@at14\n  49.784 ns (1 allocation: 112 bytes)\n[0.20561244882383867, 0.29195218135494705, 0.36530446157995233]"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"55ec0b3e-62cc-4ac6-8898-8f7f1199073f","type":"message","text":"yeah, but that's not the full output right?","user":"UT9SK8EF4","ts":"1612051522.207100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zgLwW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, but that's not the full output right?"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"08cfb45d-573d-4782-9f0d-5825815c032f","type":"message","text":"like in the REPL you get the runtime of the function call","user":"UT9SK8EF4","ts":"1612051537.207300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sT=3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"like in the REPL you get the runtime of the function call"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"85bb53fd-653b-4674-a087-b4c007c186f9","type":"message","text":"what do you mean?","user":"UH8A351DJ","ts":"1612051546.207500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F56rB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what do you mean?"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"c3ea1db6-eaee-4ca1-bc4f-463512bd51a7","type":"message","text":"(also replacing `@btime` with `@benchmark` , we get literally nothing)","user":"UT9SK8EF4","ts":"1612051561.207700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AXTvS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(also replacing "},{"type":"text","text":"@btime","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"@benchmark","style":{"code":true}},{"type":"text","text":" , we get literally nothing)"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"9fc49b36-e4d6-4794-8ae2-fa04cd3293da","type":"message","text":"```julia&gt; using BenchmarkTools\n\njulia&gt; @btime rand(3)\n  49.590 ns (1 allocation: 112 bytes)\n3-element Array{Float64,1}:\n 0.1736620417587662\n 0.8084629551209264\n 0.2075979523517406```","user":"UH8A351DJ","ts":"1612051563.207900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s5pS","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using BenchmarkTools\n\njulia> @btime rand(3)\n  49.590 ns (1 allocation: 112 bytes)\n3-element Array{Float64,1}:\n 0.1736620417587662\n 0.8084629551209264\n 0.2075979523517406"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"809ea061-3bba-4f92-990d-8f03e2bdbf2b","type":"message","text":"Oh I see","user":"UT9SK8EF4","ts":"1612051579.208100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/cvVF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh I see"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"176ff779-d907-433b-976e-385f0b43e0a3","type":"message","text":"for `@benchmark`, you need `display()`","user":"UH8A351DJ","ts":"1612051629.208300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z8V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for "},{"type":"text","text":"@benchmark","style":{"code":true}},{"type":"text","text":", you need "},{"type":"text","text":"display()","style":{"code":true}}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"1193fcd9-7aeb-4947-8bd3-f7fd63755863","type":"message","text":"(you can just use `display` for both I guess,","user":"UH8A351DJ","ts":"1612051653.208500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vJBO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(you can just use "},{"type":"text","text":"display","style":{"code":true}},{"type":"text","text":" for both I guess,"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"98d8c2e5-51af-4995-804b-e5deb444d21b","type":"message","text":"(display is ~ what ended up printing out in REPL  after each statement if you didn't have `;` at the end","user":"UH8A351DJ","ts":"1612051683.208700","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1612051687.000000"},"blocks":[{"type":"rich_text","block_id":"C6n","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(display is ~ what ended up printing out in REPL  after each statement if you didn't have "},{"type":"text","text":";","style":{"code":true}},{"type":"text","text":" at the end"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"2636fc37-0b0e-46a5-b39d-37b38b76cd4f","type":"message","text":"ah thanks!","user":"UT9SK8EF4","ts":"1612051818.209000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5ZY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah thanks!"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"5e313074-a3c8-4208-9890-b9df5fded990","type":"message","text":"extra reading:\nwhat showed up in `print` or `show` is what will end up come out if you stringnify the variable:\n```julia&gt; string(@benchmark rand(3);)\n\"Trial(50.247 ns)\"```","user":"UH8A351DJ","ts":"1612051896.209200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Lqg5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"extra reading:\nwhat showed up in "},{"type":"text","text":"print","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"show","style":{"code":true}},{"type":"text","text":" is what will end up come out if you stringnify the variable:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> string(@benchmark rand(3);)\n\"Trial(50.247 ns)\""}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"},{"client_msg_id":"8479ed78-555d-470b-bbd1-5ae79121a056","type":"message","text":"Thanks!!","user":"UT9SK8EF4","ts":"1612051916.209400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"66LG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks!!"}]}]}],"thread_ts":"1612050974.203500","parent_user_id":"UT9SK8EF4"}]