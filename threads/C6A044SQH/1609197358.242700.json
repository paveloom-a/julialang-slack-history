[{"client_msg_id":"420B344C-2CB0-4BF5-8552-D4075AF2F2CC","type":"message","text":"I have a dictionary of moving particles from which I want to delete any that collide, which they do whenever one particle wants to move into the coordinates occupied by another one in a volume represented by a 3D integer array.  Empty coordinates are 0, and particles check this value before ‘entering’ them by changing it to their integer key in the dictionary.\n\nMy problem is that the number of particle collisions when I run my simulation with 1000 initial particles is too high—around 700 rather than 500.  I wonder if I’m not reliably deleting particles or something.  Here’s my deleting code:\n\n```for (p, particle in particles)\n    ...\n    x, y, z = new_coordinates\n    if volume[x,y,z] != 0\n        delete!(particles, key)\n        delete!(particles, volume[x,y,z])\n    else\n        ...\n    end\n...\nend```","user":"U01GC3N3ZJT","ts":"1609197358.242700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Moj2v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a dictionary of moving particles from which I want to delete any that collide, which they do whenever one particle wants to move into the coordinates occupied by another one in a volume represented by a 3D integer array.  Empty coordinates are 0, and particles check this value before ‘entering’ them by changing it to their integer key in the dictionary.\n"},{"type":"text","text":"\n"},{"type":"text","text":"My problem is that the number of particle collisions when I run my simulation with 1000 initial particles is too high—around 700 rather than 500.  I wonder if I’m not reliably deleting particles or something.  Here’s my deleting code:\n"},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"for (p, particle in particles)\n"},{"type":"text","text":"    ...\n"},{"type":"text","text":"    x, y, z = new_coordinates\n"},{"type":"text","text":"    if volume[x,y,z] != 0\n"},{"type":"text","text":"        delete!(particles, key)\n"},{"type":"text","text":"        delete!(particles, volume[x,y,z])\n"},{"type":"text","text":"    else\n"},{"type":"text","text":"        ...\n"},{"type":"text","text":"    end\n"},{"type":"text","text":"...\n"},{"type":"text","text":"end"}]}]}],"thread_ts":"1609197358.242700","reply_count":1,"reply_users_count":1,"latest_reply":"1609223282.245100","reply_users":["USU9FRPEU"],"subscribed":false},{"client_msg_id":"03f1f44a-16a5-4798-abe7-200dd2b7f48e","type":"message","text":"Why do you have two `delete!` statements? How is your dictionary `particles` defined? The second argument of `delete!` should only be the dictionary key. Isn't `volume[x,y,z]` a binary value?","user":"USU9FRPEU","ts":"1609223282.245100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rhl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Why do you have two "},{"type":"text","text":"delete!","style":{"code":true}},{"type":"text","text":" statements? How is your dictionary "},{"type":"text","text":"particles","style":{"code":true}},{"type":"text","text":" defined? The second argument of "},{"type":"text","text":"delete!","style":{"code":true}},{"type":"text","text":" should only be the dictionary key. Isn't "},{"type":"text","text":"volume[x,y,z]","style":{"code":true}},{"type":"text","text":" a binary value?"}]}]}],"thread_ts":"1609197358.242700","parent_user_id":"U01GC3N3ZJT"}]