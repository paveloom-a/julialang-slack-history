[{"client_msg_id":"82637a8d-4993-483d-85af-1f19f2e3f85e","type":"message","text":"CI failing on GH Actions but passing on travis:\n\n```Got exception outside of a @test\n  SystemError: realpath: No such file or directory\n  Stacktrace:\n   [1] #systemerror#39(::Nothing, ::Function, ::Symbol, ::Bool) at ./error.jl:106\n   [2] systemerror at ./error.jl:106 [inlined]\n   [3] realpath(::String) at ./path.jl:322```\nHas anyone seen this before?  <https://github.com/JuliaIO/JLD2.jl/runs/1849243028?check_suite_focus=true>","user":"U9769MVA7","ts":"1612709270.229200","team":"T68168MUP","edited":{"user":"U9769MVA7","ts":"1612709320.000000"},"blocks":[{"type":"rich_text","block_id":"PCg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"CI failing on GH Actions but passing on travis:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Got exception outside of a @test\n  SystemError: realpath: No such file or directory\n  Stacktrace:\n   [1] #systemerror#39(::Nothing, ::Function, ::Symbol, ::Bool) at ./error.jl:106\n   [2] systemerror at ./error.jl:106 [inlined]\n   [3] realpath(::String) at ./path.jl:322"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Has anyone seen this before?  "},{"type":"link","url":"https://github.com/JuliaIO/JLD2.jl/runs/1849243028?check_suite_focus=true"}]}]}],"thread_ts":"1612709270.229200","reply_count":32,"reply_users_count":4,"latest_reply":"1612718133.245700","reply_users":["B01J9QZ4SP8","UH24GRBLL","U9769MVA7","UDB26738Q"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1612709272.229300","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"c2c53530-455d-483d-a307-69903276bf0d","type":"message","text":"have you hardcoded some paths?","user":"UH24GRBLL","ts":"1612709486.229600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aFK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"have you hardcoded some paths?"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"0e039394-1d09-4a43-b838-9f47ca145c6b","type":"message","text":"very possible that GH and travis have different directory structure the repo/test env is placed in","user":"UH24GRBLL","ts":"1612709522.229800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"beHuM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"very possible that GH and travis have different directory structure the repo/test env is placed in"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"75242110-3659-4590-933a-f66db5a481a0","type":"message","text":"Hm, good question. This is the code that errors:\n```    @save \"out.jld2\" x y\n    JLD2.jldopen(\"out.jld2\", \"r\") do f\n        @test f[\"x\"] == x\n        @test f[\"y\"] == y\n    end```\n(the `jldopen` part errors)","user":"U9769MVA7","ts":"1612709667.230000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PJAb=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hm, good question. This is the code that errors:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"    @save \"out.jld2\" x y\n    JLD2.jldopen(\"out.jld2\", \"r\") do f\n        @test f[\"x\"] == x\n        @test f[\"y\"] == y\n    end"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"(the "},{"type":"text","text":"jldopen","style":{"code":true}},{"type":"text","text":" part errors)"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"e02065da-13c3-42ed-9fa0-a2c0f94ad39f","type":"message","text":"Oh, I also forgot the likely relevant info that this only happens for `julia v.1.05` and mac os. (that combination, everything else is fine)","user":"U9769MVA7","ts":"1612709727.230200","team":"T68168MUP","edited":{"user":"U9769MVA7","ts":"1612709757.000000"},"blocks":[{"type":"rich_text","block_id":"XQoy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, I also forgot the likely relevant info that this only happens for "},{"type":"text","text":"julia v.1.05","style":{"code":true}},{"type":"text","text":" and mac os. (that combination, everything else is fine)"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"26691485-ea90-4074-b672-9b01babd82cd","type":"message","text":"I'd use `joinpath(@__DIR__, \"out.jld2\")` in any case","user":"UDB26738Q","ts":"1612710012.230500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1gLtz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd use "},{"type":"text","text":"joinpath(@__DIR__, \"out.jld2\")","style":{"code":true}},{"type":"text","text":" in any case"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"5c621e34-465c-4c4e-9545-a9915ed43be2","type":"message","text":"could be that there was a silent error during writing and that's why `open` failed","user":"UH24GRBLL","ts":"1612710356.230700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jXI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"could be that there was a silent error during writing and that's why "},{"type":"text","text":"open","style":{"code":true}},{"type":"text","text":" failed"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"5a047ffc-00c5-4ccd-8026-911962054ec2","type":"message","text":"would explain why there's no file there","user":"UH24GRBLL","ts":"1612710376.230900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"M2D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"would explain why there's no file there"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"4c76e2c1-332f-47bc-9bc9-b7b32134b716","type":"message","text":"yeah, I suppose that's possible?","user":"U9769MVA7","ts":"1612710425.231100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MrE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, I suppose that's possible?"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"f331b171-c2e8-40e6-b79e-5b40607c58f0","type":"message","text":"Is there a way to have an interactive \"ci\" so that I can debug this? I don't have a mac lying around","user":"U9769MVA7","ts":"1612710570.231300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x2C7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way to have an interactive \"ci\" so that I can debug this? I don't have a mac lying around"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"3b249992-e24d-42e7-bae6-112699767b14","type":"message","text":"<https://github.com/mxschmitt/action-tmate>","user":"UDB26738Q","ts":"1612710582.231500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vGu","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/mxschmitt/action-tmate"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"3523dd02-062d-4c24-bc98-ec0c85071d7d","type":"message","text":"Awesome! Thx, I'll check it out","user":"U9769MVA7","ts":"1612710702.231700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"o=ZRH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Awesome! Thx, I'll check it out"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"a2f65adb-4471-43b1-a1a2-0b414ee93d0a","type":"message","text":"```julia&gt; readdir()\n13-element Array{String,1}:\n \".git\"                  \n \".github\"               \n \".gitignore\"            \n \"LICENSE.md\"            \n \"Manifest.toml\"         \n \"Project.toml\"          \n \"README.md\"             \n \"benchmark\"             \n \"docs\"                  \n \"julia-x64-1.0.5-AlU487\"\n \"out.jld2\"              \n \"src\"                   \n \"test\"                  \n\njulia&gt; f = \"out.jld2\"\n\"out.jld2\"\n\njulia&gt; realpath(f)\nERROR: SystemError: realpath: No such file or directory\nStacktrace:\n [1] #systemerror#39(::Nothing, ::Function, ::Symbol, ::Bool) at ./error.jl:106\n [2] systemerror at ./error.jl:106 [inlined]\n [3] realpath(::String) at ./path.jl:322\n [4] top-level scope at none:0```\nUh, that is rather odd","user":"U9769MVA7","ts":"1612717131.241700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3kC","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> readdir()\n13-element Array{String,1}:\n \".git\"                  \n \".github\"               \n \".gitignore\"            \n \"LICENSE.md\"            \n \"Manifest.toml\"         \n \"Project.toml\"          \n \"README.md\"             \n \"benchmark\"             \n \"docs\"                  \n \"julia-x64-1.0.5-AlU487\"\n \"out.jld2\"              \n \"src\"                   \n \"test\"                  \n\njulia> f = \"out.jld2\"\n\"out.jld2\"\n\njulia> realpath(f)\nERROR: SystemError: realpath: No such file or directory\nStacktrace:\n [1] #systemerror#39(::Nothing, ::Function, ::Symbol, ::Bool) at ./error.jl:106\n [2] systemerror at ./error.jl:106 [inlined]\n [3] realpath(::String) at ./path.jl:322\n [4] top-level scope at none:0"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Uh, that is rather odd"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"334e684d-7e41-4202-b0e6-c22d90cc9339","type":"message","text":"Ah, this is probably\n<https://github.com/JuliaLang/julia/issues/33545>","user":"U9769MVA7","ts":"1612717274.241900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wri5m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, this is probably\n"},{"type":"link","url":"https://github.com/JuliaLang/julia/issues/33545"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"1ac94fe7-d6f6-4f3b-9d31-72464df28128","type":"message","text":"what's `pwd()`?  if I remember correctly, the working directory in GHA is not what you'd expect (unless you change it)","user":"UDB26738Q","ts":"1612717368.242100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6gw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what's "},{"type":"text","text":"pwd()","style":{"code":true}},{"type":"text","text":"?  if I remember correctly, the working directory in GHA is not what you'd expect (unless you change it)"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"ef25e70b-ee3d-4669-aca8-20a0c812079e","type":"message","text":"```julia&gt; pwd()\n\"/Users/runner/work/JLD2.jl/JLD2.jl\"```\n","user":"U9769MVA7","ts":"1612717404.242300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cXNf","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> pwd()\n\"/Users/runner/work/JLD2.jl/JLD2.jl\""}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"538a240d-58f0-4b8e-af51-d8157796f71f","type":"message","text":"that one is fine","user":"U9769MVA7","ts":"1612717410.242500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GEyg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that one is fine"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"7dc660b5-f7d8-4411-86fa-19d1e0efa020","type":"message","text":"it is just that `realpath` always fails\n```julia&gt; realpath(\".\")\nERROR: SystemError: realpath: No such file or directory```","user":"U9769MVA7","ts":"1612717464.242700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5PA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is just that "},{"type":"text","text":"realpath","style":{"code":true}},{"type":"text","text":" always fails\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> realpath(\".\")\nERROR: SystemError: realpath: No such file or directory"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"c617744c-cce7-453d-b9c8-e7cb20362335","type":"message","text":"what julia is that?","user":"UDB26738Q","ts":"1612717513.242900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zn0e","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what julia is that?"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"0430a854-ba65-4bba-9181-3bc69407dc4a","type":"message","text":"this is `v1.0.5` for LTS testing","user":"U9769MVA7","ts":"1612717545.243100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LBZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is "},{"type":"text","text":"v1.0.5","style":{"code":true}},{"type":"text","text":" for LTS testing"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"c62ad38d-985b-4b44-977a-81486ec7d224","type":"message","text":"I think I might just remove macos for LTS testing for now","user":"U9769MVA7","ts":"1612717563.243300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=Eg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think I might just remove macos for LTS testing for now"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"9fe499cd-c28e-41b2-b920-a65501c79372","type":"message","text":"did you try with `@__DIR__`?","user":"UDB26738Q","ts":"1612717578.243500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8y6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"did you try with "},{"type":"text","text":"@__DIR__","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"61c0db44-15d0-455a-a396-a63ad763c26f","type":"message","text":"that's what I'd do _anyways_","user":"UDB26738Q","ts":"1612717592.243700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f1J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's what I'd do "},{"type":"text","text":"anyways","style":{"italic":true}}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"b36993b1-5605-48bf-b2c4-4362e1db0b77","type":"message","text":"if you don't want to mess up with paths, _always_ use absolute paths","user":"UDB26738Q","ts":"1612717611.243900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9Wa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you don't want to mess up with paths, "},{"type":"text","text":"always","style":{"italic":true}},{"type":"text","text":" use absolute paths"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"00cbbe88-49f1-470d-b2aa-d325f2fb7f24","type":"message","text":"```julia&gt; realpath(joinpath(@__DIR__, f))                                                                                \"/Users/runner/work/JLD2.jl/JLD2.jl/out.jld2\"                                                                         ```","user":"UDB26738Q","ts":"1612717676.244100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ajnH","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> realpath(joinpath(@__DIR__, f))                                                                                \"/Users/runner/work/JLD2.jl/JLD2.jl/out.jld2\"                                                                         "}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"799b7b74-5231-47f8-8828-be7a47ecc80f","type":"message","text":"that is why `JLD2` calls `realpath` as the first step on any path argument.","user":"U9769MVA7","ts":"1612717680.244300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pieX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that is why "},{"type":"text","text":"JLD2","style":{"code":true}},{"type":"text","text":" calls "},{"type":"text","text":"realpath","style":{"code":true}},{"type":"text","text":" as the first step on any path argument."}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"900740b4-3202-4ade-b4b7-fc7fc0cd2499","type":"message","text":"I'd consider `@save \"test.jld2\" x y`\nas a feature so I don't want to remove tests for it","user":"U9769MVA7","ts":"1612717725.244600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AIU5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd consider "},{"type":"text","text":"@save \"test.jld2\" x y","style":{"code":true}},{"type":"text","text":"\nas a feature so I don't want to remove tests for it"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"e7a99e09-b0f8-434e-96d8-911bdc627b62","type":"message","text":"did you see <https://julialang.slack.com/archives/C6A044SQH/p1612717676244100?thread_ts=1612709270.229200&amp;cid=C6A044SQH>?","user":"UDB26738Q","ts":"1612717773.244800","team":"T68168MUP","attachments":[{"from_url":"https://julialang.slack.com/archives/C6A044SQH/p1612717676244100?thread_ts=1612709270.229200&amp;cid=C6A044SQH","fallback":"[February 7th, 2021 9:07 AM] mose: ```julia&gt; realpath(joinpath(@__DIR__, f))                                                                                \"/Users/runner/work/JLD2.jl/JLD2.jl/out.jld2\"                                                                         ```","ts":"1612717676.244100","author_id":"UDB26738Q","author_subname":"Mosè Giordano","channel_id":"C6A044SQH","channel_name":"helpdesk","is_msg_unfurl":true,"is_reply_unfurl":true,"text":"```julia&gt; realpath(joinpath(@__DIR__, f))                                                                                \"/Users/runner/work/JLD2.jl/JLD2.jl/out.jld2\"                                                                         ```","author_name":"Mosè Giordano","author_link":"https://julialang.slack.com/team/UDB26738Q","author_icon":"https://secure.gravatar.com/avatar/b1b9938790729d96af6f168d8ce0f917.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-48.png","mrkdwn_in":["text"],"id":1,"original_url":"https://julialang.slack.com/archives/C6A044SQH/p1612717676244100?thread_ts=1612709270.229200&amp;cid=C6A044SQH","footer":"From a thread in #helpdesk"}],"blocks":[{"type":"rich_text","block_id":"mOB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"did you see "},{"type":"link","url":"https://julialang.slack.com/archives/C6A044SQH/p1612717676244100?thread_ts=1612709270.229200&cid=C6A044SQH"},{"type":"text","text":"?"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"ba4c28bc-825f-44d6-8845-584e51740025","type":"message","text":"I did see that","user":"U9769MVA7","ts":"1612717852.245100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"POII7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I did see that"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"774bde1e-31f8-41a5-a913-8e0fe54b8cee","type":"message","text":"If it is just to make the tests pass, then I can also do `abspath(f)`","user":"U9769MVA7","ts":"1612717977.245300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3y/8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If it is just to make the tests pass, then I can also do "},{"type":"text","text":"abspath(f)","style":{"code":true}}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"d683784a-9d94-4f30-a1da-dc04bae3b2a0","type":"message","text":"ok, I went with `@save fn x y` where fn is a previously generate temp name.\nThat is cleaner anyway","user":"U9769MVA7","ts":"1612718128.245500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7gAm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, I went with "},{"type":"text","text":"@save fn x y","style":{"code":true}},{"type":"text","text":" where fn is a previously generate temp name.\nThat is cleaner anyway"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"},{"client_msg_id":"4aabfae6-526e-4258-b0ec-ab51968db30d","type":"message","text":"Thank you for your help","user":"U9769MVA7","ts":"1612718133.245700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+owoV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you for your help"}]}]}],"thread_ts":"1612709270.229200","parent_user_id":"U9769MVA7"}]