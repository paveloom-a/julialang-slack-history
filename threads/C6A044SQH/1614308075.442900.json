[{"client_msg_id":"67186b6a-8744-45de-bdc8-76db866ba9cf","type":"message","text":"without an external package, how can I iterate *once* over a vector of named tuples and return vectors for each name","user":"UN97XTLCV","ts":"1614308075.442900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sHN4U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"without an external package, how can I iterate "},{"type":"text","text":"once","style":{"bold":true}},{"type":"text","text":" over a vector of named tuples and return vectors for each name"}]}]}],"thread_ts":"1614308075.442900","reply_count":14,"reply_users_count":5,"latest_reply":"1614311046.452500","reply_users":["B01J9QZ4SP8","U6740K1SP","UN97XTLCV","U8D9768Q6","UH8A351DJ"],"subscribed":false},{"type":"message","subtype":"bot_message","text":"Can we cross post this publicly to <https://discourse.julialang.org|Discourse> for further visibility? React with :bridge: on the message above to approve. <https://github.com/JuliaCommunity/SlackBridge/blob/main/README.md#faq|More info here>","ts":"1614308077.443000","username":"HelpDeskBot","bot_id":"B01J9QZ4SP8","thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"d79603a2-1ce4-484f-baad-eb65b20eb5af","type":"message","text":"~StructArrays.jl~","user":"U6740K1SP","ts":"1614308258.443200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0eHC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"StructArrays.jl","style":{"strike":true}}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"0f28392a-6340-45a5-948c-88caa754aff9","type":"message","text":"```mapreduce(t -&gt; [t.a t.b], vcat, iter) |&gt; eachcol```\nis _technically_ right but 2 orders of mag slower than just iterating twice","user":"UN97XTLCV","ts":"1614308476.443400","team":"T68168MUP","edited":{"user":"UN97XTLCV","ts":"1614308683.000000"},"blocks":[{"type":"rich_text","block_id":"Qizjl","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"mapreduce(t -> [t.a t.b], vcat, iter) |> eachcol"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"is "},{"type":"text","text":"technically","style":{"italic":true}},{"type":"text","text":" right but 2 orders of mag slower than just iterating twice"}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"2ae0b700-aef6-49b5-9101-30cc411917bc","type":"message","text":"yeah I’ll probably just iterate twice, unlss there’s a simple answer. No need to get a package out forit","user":"UN97XTLCV","ts":"1614308534.443600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZkCV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah I’ll probably just iterate twice, unlss there’s a simple answer. No need to get a package out forit"}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"380A9696-D37B-4BF4-96A7-6F98C9312CA3","type":"message","text":"I believe mapreduce over `vcat` doesn’t have the same special sauce that reduce does. I’m not at my computer so I can’t check. ","user":"U8D9768Q6","ts":"1614308642.445400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"apVT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I believe mapreduce over "},{"type":"text","text":"vcat","style":{"code":true}},{"type":"text","text":" doesn’t have the same special sauce that reduce does. I’m not at my computer so I can’t check. "}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"07A769D9-3D89-40AB-A857-1AE5C2A84820","type":"message","text":"Can you try \n```reduce(vcat, ([t.a t.b] for t in iter))```\n?","user":"U8D9768Q6","ts":"1614308699.447000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TsW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can you try \n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"reduce(vcat, ([t.a t.b] for t in iter))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"?"}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"68c2bc37-a60c-4c9a-a4cb-20e5cbc0f235","type":"message","text":"just as slow as `mapreduce` <@U8D9768Q6>\n\nthe intermediate `hcat` is what kills it, I think. and `eachcol` ends up iterating over the whole array again, anyways","user":"UN97XTLCV","ts":"1614308759.447200","team":"T68168MUP","edited":{"user":"UN97XTLCV","ts":"1614308802.000000"},"blocks":[{"type":"rich_text","block_id":"FJDs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"just as slow as "},{"type":"text","text":"mapreduce","style":{"code":true}},{"type":"text","text":" "},{"type":"user","user_id":"U8D9768Q6"},{"type":"text","text":"\n\nthe intermediate "},{"type":"text","text":"hcat","style":{"code":true}},{"type":"text","text":" is what kills it, I think. and "},{"type":"text","text":"eachcol","style":{"code":true}},{"type":"text","text":" ends up iterating over the whole array again, anyways"}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"00695A3B-6D9B-4872-9281-73F56B8C6F4C","type":"message","text":"Wait, maybe the special overloads were for `foldl`, try that instead of `reduce`. ","user":"U8D9768Q6","ts":"1614308897.449100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nhR=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Wait, maybe the special overloads were for "},{"type":"text","text":"foldl","style":{"code":true}},{"type":"text","text":", try that instead of "},{"type":"text","text":"reduce","style":{"code":true}},{"type":"text","text":". "}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV","reactions":[{"name":"slow_parrot","users":["UN97XTLCV"],"count":1}]},{"client_msg_id":"1238F528-C4D4-46A0-8121-3A1C2EE19F30","type":"message","text":"There are methods in base specifically to make this use case fast, but maybe they don’t like the generator ","user":"U8D9768Q6","ts":"1614308926.450100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HB/L","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There are methods in base specifically to make this use case fast, but maybe they don’t like the generator "}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"38001A72-18ED-40FA-884F-DAE114FA5DCE","type":"message","text":"Can always just write the loop though ","user":"U8D9768Q6","ts":"1614308947.450800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dFhz1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can always just write the loop though "}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"6f8db236-3e7e-4460-86c3-e37a92ba730d","type":"message","text":"I would think `foldl` is stricter than `reduce` thus if there's special sauce it would be for `reduce`","user":"UH8A351DJ","ts":"1614308948.451000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p4inn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would think "},{"type":"text","text":"foldl","style":{"code":true}},{"type":"text","text":" is stricter than "},{"type":"text","text":"reduce","style":{"code":true}},{"type":"text","text":" thus if there's special sauce it would be for "},{"type":"text","text":"reduce","style":{"code":true}}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"DB38D771-15D2-4136-A6AB-961D07517909","type":"message","text":"Just allocate an empty array and `push!` To it","user":"U8D9768Q6","ts":"1614309010.451800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OPeOh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Just allocate an empty array and "},{"type":"text","text":"push!","style":{"code":true}},{"type":"text","text":" To it"}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"fe137396-0a38-47b6-9019-27cd4d852b17","type":"message","text":"```a = map(t -&gt; t.a, iter)\nb = map(t -&gt; t.b, iter)\nreturn a, b```\nis 2 allocations and ~100 ns","user":"UN97XTLCV","ts":"1614309070.452000","team":"T68168MUP","edited":{"user":"UN97XTLCV","ts":"1614309101.000000"},"blocks":[{"type":"rich_text","block_id":"Yf5","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"a = map(t -> t.a, iter)\nb = map(t -> t.b, iter)\nreturn a, b"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"is 2 allocations and ~100 ns"}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"},{"client_msg_id":"46e0b283-3d74-43d0-82cd-4b8aa923c425","type":"message","text":"<https://github.com/JuliaLang/julia/issues/31137> <https://github.com/JuliaLang/julia/issues/31636>","user":"U8D9768Q6","ts":"1614311046.452500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7Pxl","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/julia/issues/31137"},{"type":"text","text":" "},{"type":"link","url":"https://github.com/JuliaLang/julia/issues/31636"}]}]}],"thread_ts":"1614308075.442900","parent_user_id":"UN97XTLCV"}]