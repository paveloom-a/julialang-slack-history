[{"client_msg_id":"c56690bb-3e18-435e-a278-a0418d5364e1","type":"message","text":"In Plots.jl with the GR backend, is it normal that plotting big datasets takes a long time/consumes a lot of memory? I have (20, 5e5) datapoints, and am waiting minutes every time I plot. I am in VS Code with the plot pane, if that matters.","user":"U01S2FC0Q01","ts":"1616490568.015200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gXh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In Plots.jl with the GR backend, is it normal that plotting big datasets takes a long time/consumes a lot of memory? I have (20, 5e5) datapoints, and am waiting minutes every time I plot. I am in VS Code with the plot pane, if that matters."}]}]}],"thread_ts":"1616490568.015200","reply_count":13,"reply_users_count":6,"latest_reply":"1616521695.018500","reply_users":["U017JTQFNEQ","U01S2FC0Q01","U74AERMNF","U69AX2SP7","U73KENNG4","UAS2BRCBU"],"subscribed":false},{"client_msg_id":"b8ae554c-8d72-4215-8e0a-16fe67b33d35","type":"message","text":"i think it is making SVGs, so a lot of data takes a long time. If you switch to PNG you will likely see a big speedup. `plot(rand(10), fmt = :png)`","user":"U017JTQFNEQ","ts":"1616491861.015300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Fyya","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"i think it is making SVGs, so a lot of data takes a long time. If you switch to PNG you will likely see a big speedup. "},{"type":"text","text":"plot(rand(10), fmt = :png)","style":{"code":true}}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"901aa9df-7607-44dd-a498-8befcc7f5941","type":"message","text":"Hmm, that does not seem to improve things, the opposite indeed :slightly_smiling_face:\n```julia&gt; @time plot(y)\n  4.893566 seconds (16.17 M allocations: 797.192 MiB, 3.09% gc time)\n\njulia&gt; @time plot(y, fmt=:png)\n  7.536678 seconds (16.17 M allocations: 797.345 MiB, 5.26% gc time)```","user":"U01S2FC0Q01","ts":"1616495049.015500","team":"T68168MUP","edited":{"user":"U01S2FC0Q01","ts":"1616495068.000000"},"blocks":[{"type":"rich_text","block_id":"UYaN1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm, that does not seem to improve things, the opposite indeed "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time plot(y)\n  4.893566 seconds (16.17 M allocations: 797.192 MiB, 3.09% gc time)\n\njulia> @time plot(y, fmt=:png)\n  7.536678 seconds (16.17 M allocations: 797.345 MiB, 5.26% gc time)"}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"818e2344-5efd-4ccb-b7bc-b98f751d6eb3","type":"message","text":"These times are also clearly not the total time it takes, I have to wait for ~1 min or so before the plot actually shows.","user":"U01S2FC0Q01","ts":"1616495110.016000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CTzO+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"These times are also clearly not the total time it takes, I have to wait for ~1 min or so before the plot actually shows."}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"78ebb041-bb0f-45ef-ba8a-8785a84e993b","type":"message","text":"```@time display(plot(y))```\nto get the total time","user":"U74AERMNF","ts":"1616495273.016200","team":"T68168MUP","edited":{"user":"U74AERMNF","ts":"1616495347.000000"},"blocks":[{"type":"rich_text","block_id":"93ad","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@time display(plot(y))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"to get the total time"}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"fe8e11bb-d4b0-491d-907b-935fab6b163b","type":"message","text":"Thanks, the bottleneck seems to just be the enormous amount of data:\n```julia&gt; @time display(plot(y))\n152.126635 seconds (1.02 G allocations: 18.842 GiB, 1.02% gc time)\n\njulia&gt; @time display(plot(y, fmt=:png))\n154.836029 seconds (1.02 G allocations: 18.842 GiB, 1.03% gc time)```","user":"U01S2FC0Q01","ts":"1616495960.016500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+/I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks, the bottleneck seems to just be the enormous amount of data:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time display(plot(y))\n152.126635 seconds (1.02 G allocations: 18.842 GiB, 1.02% gc time)\n\njulia> @time display(plot(y, fmt=:png))\n154.836029 seconds (1.02 G allocations: 18.842 GiB, 1.03% gc time)"}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"1985f3dd-06dd-4de5-b9e3-2c86e11fd9d6","type":"message","text":"Is there any way around this? Because else I will just have to plot only  some intermediate points or something like this.","user":"U01S2FC0Q01","ts":"1616495998.016700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wax+Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there any way around this? Because else I will just have to plot only  some intermediate points or something like this."}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"type":"message","text":"You probably can use the GR data shader:\n```using GR\nN=20_000_000\n@time shade(randn(N),randn(N))\n0.386973 seconds (193 allocations: 305.186 MiB, 0.76% gc time)```","files":[{"id":"F01S2FEKSHK","created":1616508305,"timestamp":1616508305,"name":"Screenshot 2021-03-23 at 15.04.32.png","title":"Screenshot 2021-03-23 at 15.04.32.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U69AX2SP7","editable":false,"size":994475,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01S2FEKSHK/screenshot_2021-03-23_at_15.04.32.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01S2FEKSHK/download/screenshot_2021-03-23_at_15.04.32.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01S2FEKSHK-2acdf5259b/screenshot_2021-03-23_at_15.04.32_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01S2FEKSHK-2acdf5259b/screenshot_2021-03-23_at_15.04.32_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01S2FEKSHK-2acdf5259b/screenshot_2021-03-23_at_15.04.32_360.png","thumb_360_w":360,"thumb_360_h":298,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01S2FEKSHK-2acdf5259b/screenshot_2021-03-23_at_15.04.32_480.png","thumb_480_w":480,"thumb_480_h":398,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01S2FEKSHK-2acdf5259b/screenshot_2021-03-23_at_15.04.32_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01S2FEKSHK-2acdf5259b/screenshot_2021-03-23_at_15.04.32_720.png","thumb_720_w":720,"thumb_720_h":597,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01S2FEKSHK-2acdf5259b/screenshot_2021-03-23_at_15.04.32_800.png","thumb_800_w":800,"thumb_800_h":663,"thumb_960":"https://files.slack.com/files-tmb/T68168MUP-F01S2FEKSHK-2acdf5259b/screenshot_2021-03-23_at_15.04.32_960.png","thumb_960_w":960,"thumb_960_h":796,"thumb_1024":"https://files.slack.com/files-tmb/T68168MUP-F01S2FEKSHK-2acdf5259b/screenshot_2021-03-23_at_15.04.32_1024.png","thumb_1024_w":1024,"thumb_1024_h":849,"original_w":1424,"original_h":1180,"thumb_tiny":"AwAnADCHT7WO4Dl8/LjGDU5trAEgyYI6/NRo/wB2X6iqc3+vk/3j/OmlcaLf2ew/56/+PUfZ7D/nr/49VVIWfpTnt2UZp2QtCx9nsP8Anp/49UF/bxQpG0OSHzznNQdDVq+/487X6f0FJqw2iXR/uy/UVTm/18n+8f51c0f7sv1FQy2s7SuRExBYmmgRLbSKBzUs0qbapi1uB0iag2tyesbVLgm7i5SJzliRVi+/487X6f0FR/ZLj/nk1S6gpW1tlYYIGCPyqmNlSC5lt8+U2M9eM1L/AGjc/wDPQf8AfIqrRUiLX9o3P/PQf98ij+0bn/noP++RVWigC1/aNz/z0H/fIqKe5luMea2cdOMVFRQB/9k=","permalink":"https://julialang.slack.com/files/U69AX2SP7/F01S2FEKSHK/screenshot_2021-03-23_at_15.04.32.png","permalink_public":"https://slack-files.com/T68168MUP-F01S2FEKSHK-4911740069","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"xn+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You probably can use the GR data shader:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using GR\nN=20_000_000\n@time shade(randn(N),randn(N))\n0.386973 seconds (193 allocations: 305.186 MiB, 0.76% gc time)"}]}]}],"user":"U69AX2SP7","display_as_bot":false,"ts":"1616508310.016900","thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"84f8b3e4-3c81-48de-b1d3-3cc78d7e7606","type":"message","text":"Ah okay, if I need more performance I will look at the shader. Thanks a lot!","user":"U01S2FC0Q01","ts":"1616508923.017300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4jaA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah okay, if I need more performance I will look at the shader. Thanks a lot!"}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"e7b981c1-cce0-4e64-8956-c371bdbd34bf","type":"message","text":"what is the type of `y`?","user":"U73KENNG4","ts":"1616514056.017500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r2Lh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what is the type of "},{"type":"text","text":"y","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"2a84a02c-4c3f-4ffe-97bb-9abda2312dfa","type":"message","text":"interesting that it is `display`  that takes all the time too","user":"U73KENNG4","ts":"1616514240.017700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1rFG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"interesting that it is "},{"type":"text","text":"display","style":{"code":true}},{"type":"text","text":"  that takes all the time too"}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"a684d2ea-0cb1-462f-b653-3702b892c60b","type":"message","text":"For me there is a bit of a mystery here - if I go to the docs for Plots and GR, I have searched but cannot find any information regarding `shade` - is there something that I missed?  If not, how would I know it exists?  This may help me with some of my tasks, but I’d like to learn more :simple_smile:","user":"UAS2BRCBU","ts":"1616517152.018000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"H1y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For me there is a bit of a mystery here - if I go to the docs for Plots and GR, I have searched but cannot find any information regarding "},{"type":"text","text":"shade","style":{"code":true}},{"type":"text","text":" - is there something that I missed?  If not, how would I know it exists?  This may help me with some of my tasks, but I’d like to learn more "},{"type":"emoji","name":"simple_smile"}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"2177b1eb-2a51-4a1d-92f7-df8b9de4a378","type":"message","text":"... the above example is plain GR","user":"U69AX2SP7","ts":"1616520986.018200","team":"T68168MUP","edited":{"user":"U69AX2SP7","ts":"1616521035.000000"},"blocks":[{"type":"rich_text","block_id":"FNE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"... the above example is plain GR"}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"},{"client_msg_id":"c7f625e0-4714-43e0-8138-8256b72974dc","type":"message","text":"<@U69AX2SP7> - I’m still trying to figure this out - I can navigate to the <http://gr-framework.org|gr-framework.org> site from the GR.jl docs.  If I type shade into the search docs pane there, the closest I find is <https://gr-framework.org/python-gr-pygr-mlab.html?highlight=shade#gr.pygr.mlab.shade|gr.pygr.mlab.shade> - is this what you are referring to?  How does one know what “plain GR” works in GR.jl?  Sorry if this seems like a silly question, but I can see there is some graphics power beyond what is directly accessed from Plots.jl and I’d like to learn!","user":"UAS2BRCBU","ts":"1616521695.018500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kHrY","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69AX2SP7"},{"type":"text","text":" - I’m still trying to figure this out - I can navigate to the "},{"type":"link","url":"http://gr-framework.org","text":"gr-framework.org"},{"type":"text","text":" site from the GR.jl docs.  If I type shade into the search docs pane there, the closest I find is "},{"type":"link","url":"https://gr-framework.org/python-gr-pygr-mlab.html?highlight=shade#gr.pygr.mlab.shade","text":"gr.pygr.mlab.shade"},{"type":"text","text":" - is this what you are referring to?  How does one know what “plain GR” works in GR.jl?  Sorry if this seems like a silly question, but I can see there is some graphics power beyond what is directly accessed from Plots.jl and I’d like to learn!"}]}]}],"thread_ts":"1616490568.015200","parent_user_id":"U01S2FC0Q01"}]