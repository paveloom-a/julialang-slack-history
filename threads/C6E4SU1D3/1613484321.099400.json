[{"client_msg_id":"3fb11025-980e-4b7c-a7c5-ff9aa366ec89","type":"message","text":"Anyone know why Plots/GR on Ubuntu looks slightly different when exported to PNG than it does on Windows/Mac?\n<https://github.com/JuliaTesting/ReferenceTests.jl/pull/77#issuecomment-779469226>","user":"U6A936746","ts":"1613484321.099400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ojg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Anyone know why Plots/GR on Ubuntu looks slightly different when exported to PNG than it does on Windows/Mac?\n"},{"type":"link","url":"https://github.com/JuliaTesting/ReferenceTests.jl/pull/77#issuecomment-779469226"}]}]}],"thread_ts":"1613484321.099400","reply_count":18,"reply_users_count":4,"latest_reply":"1613781357.000300","reply_users":["U8MPCDJAY","U6A936746","U9YTNSWCA","UHDQQ4GN6"],"subscribed":false},{"client_msg_id":"B4DFBD62-FB44-4C38-BB3E-B0DAEE2FF268","type":"message","text":"Try with ImageIO? PNGFiles (which is bundled into that) has been pretty extensively tested for accuracy","user":"U8MPCDJAY","ts":"1613489583.101000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dJy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Try with ImageIO? PNGFiles (which is bundled into that) has been pretty extensively tested for accuracy"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"8B6C3431-9565-4DC8-AE49-CD49DEE59536","type":"message","text":"It’s also faster than ImageMagick","user":"U8MPCDJAY","ts":"1613489607.101500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OT=3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It’s also faster than ImageMagick"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"9de5186b-20f1-4824-9b98-67c89b4a3222","type":"message","text":"Apprently\n1.  I need to support TIFF\n2. ImageIO does not support TIFF <https://github.com/JuliaIO/FileIO.jl/blob/1df503324dc411f45b4c0e93ef78c8dcf4aafe4f/src/registry.jl#L260>\nI will test it out though to see if it fixes PNGs though.","user":"U6A936746","ts":"1613492102.101700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hkktq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Apprently\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":" I need to support TIFF"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"ImageIO does not support TIFF "},{"type":"link","url":"https://github.com/JuliaIO/FileIO.jl/blob/1df503324dc411f45b4c0e93ef78c8dcf4aafe4f/src/registry.jl#L260"}]}],"style":"ordered","indent":0},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI will test it out though to see if it fixes PNGs though."}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"890f39c2-1805-471a-9cde-a3c3207d1274","type":"message","text":"testing now,\nI suspect it is that GR is doing something different though, like even low res image in terminal it looks like there margins are different","user":"U6A936746","ts":"1613492302.101900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OBcx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"testing now,\nI suspect it is that GR is doing something different though, like even low res image in terminal it looks like there margins are different"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"fb6a5431-6f26-454c-afdf-9ce65b827cdc","type":"message","text":"Nope\n<https://github.com/JuliaTesting/ReferenceTests.jl/pull/77/checks?check_run_id=1912078908#step:5:702>","user":"U6A936746","ts":"1613493280.102100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"STZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nope\n"},{"type":"link","url":"https://github.com/JuliaTesting/ReferenceTests.jl/pull/77/checks?check_run_id=1912078908#step:5:702"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"53e6b33d-63a2-4e98-b130-ec8acc1a05f9","type":"message","text":"&gt; ImageIO does not support TIFF\nI forgot that adding the new <https://github.com/tlnagy/TiffImages.jl> was on my todo list","user":"U8MPCDJAY","ts":"1613493394.102300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A7Wj","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"ImageIO does not support TIFF"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI forgot that adding the new "},{"type":"link","url":"https://github.com/tlnagy/TiffImages.jl"},{"type":"text","text":" was on my todo list"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"cf34f569-732d-4b67-9922-2b05e880be6b","type":"message","text":"So for MacOS, I think it has a different default gamma","user":"U8MPCDJAY","ts":"1613493611.102500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/YWpa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So for MacOS, I think it has a different default gamma"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"0c1a1c0a-302c-46cd-b46f-9bf0c7390dcb","type":"message","text":"I think that might be what’s messing up","user":"U8MPCDJAY","ts":"1613493618.102700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sWv1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think that might be what’s messing up"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"bc0af509-f4af-460e-8937-087dcf9782b2","type":"message","text":"I can’t remember exactly how we ended up handling it in PNGFiles, but <@U9YTNSWCA> might","user":"U8MPCDJAY","ts":"1613493638.102900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FD/4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can’t remember exactly how we ended up handling it in PNGFiles, but "},{"type":"user","user_id":"U9YTNSWCA"},{"type":"text","text":" might"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"9ae2a6b4-1cbe-4099-b06d-d2df4ea500c2","type":"message","text":"There’s discussion and some intermediate commits here <https://github.com/JuliaIO/PNGFiles.jl/pull/5#issuecomment-589435343>","user":"U8MPCDJAY","ts":"1613493654.103100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lifQ5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There’s discussion and some intermediate commits here "},{"type":"link","url":"https://github.com/JuliaIO/PNGFiles.jl/pull/5#issuecomment-589435343"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"be80a01e-0b0b-4204-a685-af261c6b3e11","type":"message","text":"you could try using PNGFiles directly, and set the gamma kwarg to a fixed value <https://github.com/JuliaIO/PNGFiles.jl/blob/63e754f36df9040fb52477862397901e06fd104c/src/io.jl#L22>","user":"U8MPCDJAY","ts":"1613493948.103300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vmXQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you could try using PNGFiles directly, and set the gamma kwarg to a fixed value "},{"type":"link","url":"https://github.com/JuliaIO/PNGFiles.jl/blob/63e754f36df9040fb52477862397901e06fd104c/src/io.jl#L22"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"66c91f36-5a04-450d-a89e-8a4fe27b393b","type":"message","text":"why does windows and mac agree but not linux …\n(I generated the file on Mac)","user":"U6A936746","ts":"1613494347.103500","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1613494417.000000"},"blocks":[{"type":"rich_text","block_id":"ZL4p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"why does windows and mac agree but not linux …\n(I generated the file on Mac)"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"fe937a30-b40e-4ec1-a257-0621f0800861","type":"message","text":"maybe windows sets a different gamma too?","user":"U8MPCDJAY","ts":"1613494575.103800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fI+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"maybe windows sets a different gamma too?"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"2304e5d2-cff7-403a-bdd0-c0cf7c0cc2ac","type":"message","text":"a different _same_ gamma","user":"U8MPCDJAY","ts":"1613494582.104000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7a+Xo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"a different "},{"type":"text","text":"same","style":{"italic":true}},{"type":"text","text":" gamma"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"6829ef99-746d-40ee-bca1-c69d324f268e","type":"message","text":"Please open an issue on PNGFiles.jl with a reproducer, I have a Mac from work now, so I might be able to have a look over the weekend.","user":"U9YTNSWCA","ts":"1613551890.113500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QVhq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Please open an issue on PNGFiles.jl with a reproducer, I have a Mac from work now, so I might be able to have a look over the weekend."}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"type":"message","text":"It is Plots.jl\nGR basically produces identical output on its own, but when used through plots:\nthe text gets cut-off\n\nFirst shown is linux\nSecond is Mac/Windows","files":[{"id":"F01NKHUJX62","created":1613779140,"timestamp":1613779140,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U6A936746","editable":false,"size":20606,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01NKHUJX62/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01NKHUJX62/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01NKHUJX62-5e18a3c4eb/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01NKHUJX62-5e18a3c4eb/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01NKHUJX62-5e18a3c4eb/image_360.png","thumb_360_w":360,"thumb_360_h":240,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01NKHUJX62-5e18a3c4eb/image_480.png","thumb_480_w":480,"thumb_480_h":320,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01NKHUJX62-5e18a3c4eb/image_160.png","original_w":600,"original_h":400,"thumb_tiny":"AwAgADCvezSpdyKsjgA8AMfSoPtE3/PaT/vo1LfKTeSYBxn09qr7G/un8qALdhNK94itI5BzwW9q2axNPBW8jJBA55P0rZ3r/eH51MgHUmfmApN6/wB4fnTQwMwwf4fX3pIZJRR1ooYFbUf+PKT8P51h1u3yNJaOqKSxxgfjWT9iuf8Ank1VERBWtpp+RB/sn/0KqH2K5/55NWjYRSR7Q6EYQjn1zTA//9k=","permalink":"https://julialang.slack.com/files/U6A936746/F01NKHUJX62/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01NKHUJX62-a5d26c731f","is_starred":false,"has_rich_preview":false},{"id":"F01NSB9M0JE","created":1613779169,"timestamp":1613779169,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U6A936746","editable":false,"size":21294,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01NSB9M0JE/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01NSB9M0JE/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01NSB9M0JE-2047d1f79e/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01NSB9M0JE-2047d1f79e/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01NSB9M0JE-2047d1f79e/image_360.png","thumb_360_w":360,"thumb_360_h":240,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01NSB9M0JE-2047d1f79e/image_480.png","thumb_480_w":480,"thumb_480_h":320,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01NSB9M0JE-2047d1f79e/image_160.png","original_w":600,"original_h":400,"thumb_tiny":"AwAgADBmpyyR3ICSMo2jgHHc1T+0Tf8APaT/AL6NW9Ujd7kFEYjaOg9zVPyZf+eb/wDfJoAntJ5Wuow0rkFuhY1t1h2kbpcxs6Mqg8kjAFbHnRf89E/76FTICSkz8wFN86L/AJ6J/wB9CkVg0w2kEbeoPvSQyTvRR36UfhQ0BBe/8ekv+7WDXQXKNJbuijkjArK/s65/uD/voVSEVK1tNPyIP9k/+hVT/s65/uD/AL6FX7KCSErvGMKR175zTA//2Q==","permalink":"https://julialang.slack.com/files/U6A936746/F01NSB9M0JE/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01NSB9M0JE-3cd77a2fbf","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"dZRn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It is Plots.jl\nGR basically produces identical output on its own, but when used through plots:\nthe text gets cut-off\n\nFirst shown is linux\nSecond is Mac/Windows"}]}]}],"user":"U6A936746","ts":"1613779171.135900","thread_ts":"1613484321.099400","parent_user_id":"U6A936746","subtype":"thread_broadcast","root":{"client_msg_id":"3fb11025-980e-4b7c-a7c5-ff9aa366ec89","type":"message","text":"Anyone know why Plots/GR on Ubuntu looks slightly different when exported to PNG than it does on Windows/Mac?\n<https://github.com/JuliaTesting/ReferenceTests.jl/pull/77#issuecomment-779469226>","user":"U6A936746","ts":"1613484321.099400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ojg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Anyone know why Plots/GR on Ubuntu looks slightly different when exported to PNG than it does on Windows/Mac?\n"},{"type":"link","url":"https://github.com/JuliaTesting/ReferenceTests.jl/pull/77#issuecomment-779469226"}]}]}],"thread_ts":"1613484321.099400","reply_count":18,"reply_users_count":4,"latest_reply":"1613781357.000300","reply_users":["U8MPCDJAY","U6A936746","U9YTNSWCA","UHDQQ4GN6"],"subscribed":false}},{"client_msg_id":"f009e51a-c52f-430d-9844-f77ee3a4172b","type":"message","text":"It’s <https://github.com/JuliaPlots/Plots.jl/issues/2127>","user":"U6A936746","ts":"1613781357.000100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SjD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It’s "},{"type":"link","url":"https://github.com/JuliaPlots/Plots.jl/issues/2127"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"},{"client_msg_id":"bb59e2d2-bb8d-437b-8c59-629d65a20caf","type":"message","text":"And it's only the GR backend on linux, right?","user":"UHDQQ4GN6","ts":"1613781357.000300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7c4J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And it's only the GR backend on linux, right?"}]}]}],"thread_ts":"1613484321.099400","parent_user_id":"U6A936746"}]