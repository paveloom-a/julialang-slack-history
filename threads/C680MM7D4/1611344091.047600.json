[{"client_msg_id":"97c5781e-cf44-498e-9891-b7bd01c864c6","type":"message","text":"had to free up some hard drive space and noticed my artifacts folder is 23 GB (!!!) any tips for pruning this?","user":"UN97XTLCV","ts":"1611344091.047600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V+1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"had to free up some hard drive space and noticed my artifacts folder is 23 GB (!!!) any tips for pruning this?"}]}]}],"thread_ts":"1611344091.047600","reply_count":22,"reply_users_count":4,"latest_reply":"1611438120.079000","reply_users":["UDB26738Q","UN97XTLCV","U0179G7FG4F","U68QW0PUZ"],"subscribed":false},{"client_msg_id":"af3ede4b-8bb5-428a-8c7c-42034923e692","type":"message","text":"`]gc`","user":"UDB26738Q","ts":"1611344107.047700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y4p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"]gc","style":{"code":true}}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV","reactions":[{"name":"+1","users":["UGD4K0Z25","USU9FRPEU","UN97XTLCV"],"count":3}]},{"client_msg_id":"ff48e1da-8992-431c-8552-3a16b118ec22","type":"message","text":"also, that's nuts:\n```$ du -hsc artifacts/\n288G    artifacts/\n288G    total```\n:stuck_out_tongue:","user":"UDB26738Q","ts":"1611344232.048100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hlEYi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"also, that's nuts:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"$ du -hsc artifacts/\n288G    artifacts/\n288G    total"}]},{"type":"rich_text_section","elements":[{"type":"emoji","name":"stuck_out_tongue"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV","reactions":[{"name":"ahhhhhhh","users":["UN97XTLCV","UGD4K0Z25","U01CQTKB86N","U66M57AN4","UPQP0RWTH"],"count":5}]},{"client_msg_id":"fc2b45d2-e8d6-455c-a43c-bb154e76b89a","type":"message","text":"(I think this directory was &gt;1TB until last week)","user":"UDB26738Q","ts":"1611344270.048300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/sfP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(I think this directory was >1TB until last week)"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"3a35c8d1-13a9-4f46-896a-9fc2f7ffa06e","type":"message","text":"if you want to cleanup packages and artifacts effectively with `]gc`, you need to look at `logs/manifest_usage.tom` and `logs/artifacts_usage.tom`","user":"UDB26738Q","ts":"1611344352.048700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q1IXP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you want to cleanup packages and artifacts effectively with "},{"type":"text","text":"]gc","style":{"code":true}},{"type":"text","text":", you need to look at "},{"type":"text","text":"logs/manifest_usage.tom","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"logs/artifacts_usage.tom","style":{"code":true}}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"4c289b01-1882-4a6c-89c2-714745910bed","type":"message","text":"there might be some dangling stuff which will keep some artifacts and packages forever","user":"UDB26738Q","ts":"1611344424.049400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Yhm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there might be some dangling stuff which will keep some artifacts and packages forever"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"642aedba-354d-4e81-ab0d-926799049da7","type":"message","text":"okay, that helped a bit! (I also found an 18GB cache of python packages for a version im not using so that freed up quite a lot!), down to 20GB artifacts","user":"UN97XTLCV","ts":"1611344489.049600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ttz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"okay, that helped a bit! (I also found an 18GB cache of python packages for a version im not using so that freed up quite a lot!), down to 20GB artifacts"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"7e07bde2-5fc7-494e-9895-d97dd68c4044","type":"message","text":"I think 20 GB are still a bit too much for a normal user","user":"UDB26738Q","ts":"1611344520.049800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OiM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think 20 GB are still a bit too much for a normal user"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"44f508e2-1ce9-453f-8ee1-feba72887222","type":"message","text":"my bet is in something in `logs/artifacts_usage.tom`","user":"UDB26738Q","ts":"1611344538.050000","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1611344557.000000"},"blocks":[{"type":"rich_text","block_id":"0P24S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"my bet is in something in "},{"type":"text","text":"logs/artifacts_usage.tom","style":{"code":true}}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"43337b8d-34b4-4c7b-902c-53df0d834b9e","type":"message","text":"I'm 9gb for not too much installed","user":"U0179G7FG4F","ts":"1611344706.050300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZGFN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm 9gb for not too much installed"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"type":"message","text":"<@UDB26738Q> any ideas?","files":[{"id":"F01KT1FLFC4","created":1611344719,"timestamp":1611344719,"name":"artifact_usage.toml","title":"artifact_usage.toml","mimetype":"text/plain","filetype":"toml","pretty_type":"TOML","user":"UN97XTLCV","editable":true,"size":22305,"mode":"snippet","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01KT1FLFC4/artifact_usage.toml","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01KT1FLFC4/download/artifact_usage.toml","permalink":"https://julialang.slack.com/files/UN97XTLCV/F01KT1FLFC4/artifact_usage.toml","permalink_public":"https://slack-files.com/T68168MUP-F01KT1FLFC4-db16e73274","edit_link":"https://julialang.slack.com/files/UN97XTLCV/F01KT1FLFC4/artifact_usage.toml/edit","preview":"[[\"/Users/miles/.julia/packages/Arpack_jll/HCY9Y/Artifacts.toml\"]]\ntime = 2020-04-01T13:18:02.082Z\n\n[[\"/Users/miles/.julia/packages/Arpack_jll/V7Qow/Artifacts.toml\"]]\ntime = 2021-01-15T15:03:12.398Z","preview_highlight":"<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre><span class=\"cm-atom\">[[&quot;/Users/miles/.julia/packages/Arpack_jll/HCY9Y/Artifacts.toml&quot;]]</span></pre></div>\n<div><pre><span class=\"cm-property\">time</span> = <span class=\"cm-atom\">2020-04-01T13:18:02.082Z</span></pre></div>\n<div><pre>&#8203;</pre></div>\n<div><pre><span class=\"cm-atom\">[[&quot;/Users/miles/.julia/packages/Arpack_jll/V7Qow/Artifacts.toml&quot;]]</span></pre></div>\n<div><pre><span class=\"cm-property\">time</span> = <span class=\"cm-atom\">2021-01-15T15:03:12.398Z</span></pre></div>\n</div>\n</div>\n","lines":660,"lines_more":655,"preview_is_truncated":true,"is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"Yfq+","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":" any ideas?"}]}]}],"user":"UN97XTLCV","display_as_bot":false,"ts":"1611344750.050500","thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"b0fee81b-445f-4816-b79a-bbf14e5025d3","type":"message","text":"if you just delete everything in the folder, and `]up` it should re-download it, right?","user":"U0179G7FG4F","ts":"1611344755.050900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dGs=R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you just delete everything in the folder, and "},{"type":"text","text":"]up","style":{"code":true}},{"type":"text","text":" it should re-download it, right?"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"1caa8105-96d2-4858-90a7-d20ce5337ed8","type":"message","text":"yeah, my internet is not fast enough to make that a trivial task, unfortunately","user":"UN97XTLCV","ts":"1611344797.051100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=rm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, my internet is not fast enough to make that a trivial task, unfortunately"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV","reactions":[{"name":"raised_hands","users":["U0179G7FG4F"],"count":1}]},{"client_msg_id":"66a45040-195c-4626-916b-cdc44ba60e50","type":"message","text":"`[[\"/Users/miles/dev/julia/XPA_jll/Artifacts.toml\"]]`\ncan probably go.  anything outside of `~/.julia/packages/` or `~/.julia/dev` can go, unless you use often that specific artifact","user":"UDB26738Q","ts":"1611344854.051300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7QB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"[[\"/Users/miles/dev/julia/XPA_jll/Artifacts.toml\"]]","style":{"code":true}},{"type":"text","text":"\ncan probably go.  anything outside of "},{"type":"text","text":"~/.julia/packages/","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"~/.julia/dev","style":{"code":true}},{"type":"text","text":" can go, unless you use often that specific artifact"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"30881184-499e-4149-ad37-388693c741ac","type":"message","text":"but then look also in `logs/manifest_usage.toml`.  if there manifests you don't use and don't care about, remove them, otherwise they'll keep the corresponding packages forever","user":"UDB26738Q","ts":"1611344913.051500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MkF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but then look also in "},{"type":"text","text":"logs/manifest_usage.toml","style":{"code":true}},{"type":"text","text":".  if there manifests you don't use and don't care about, remove them, otherwise they'll keep the corresponding packages forever"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"20d610e7-d3da-4e2a-b39e-33f30006216c","type":"message","text":"the first time I cleaned up `logs/manifest_usage.toml`, `]gc` removed some hundreds of super old packages","user":"UDB26738Q","ts":"1611345043.051800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DpuOs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the first time I cleaned up "},{"type":"text","text":"logs/manifest_usage.toml","style":{"code":true}},{"type":"text","text":", "},{"type":"text","text":"]gc","style":{"code":true}},{"type":"text","text":" removed some hundreds of super old packages"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"219ddaf1-2272-4b25-9267-c08ce3b02474","type":"message","text":"What should I be finding helpful inside logs/artifacts_usage.toml and logs/manifest_usate.toml and how does that inform the getting rid of unneeded files?","user":"U68QW0PUZ","ts":"1611437696.077600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vErAz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What should I be finding helpful inside logs/artifacts_usage.toml and logs/manifest_usate.toml and how does that inform the getting rid of unneeded files?"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"b650c1c6-a3fa-4a47-8be6-e7f7f5e8872d","type":"message","text":"and there is logs/orphaned.toml with 347 files listed\nand logs/scratch_usage.toml with 8 entries","user":"U68QW0PUZ","ts":"1611437791.077900","team":"T68168MUP","edited":{"user":"U68QW0PUZ","ts":"1611437848.000000"},"blocks":[{"type":"rich_text","block_id":"VAr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and there is logs/orphaned.toml with 347 files listed\nand logs/scratch_usage.toml with 8 entries"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"7ab792bf-d0cb-4995-946b-daa867d1028c","type":"message","text":"keep in mind that `]gc` preserves packages in the environments in `logs/manifest_usage.toml`: if there are environments you don't care about, remove them, and `]gc` will be happy to remove packages (and package versions) that were only there.  exactly same logic for the artifacts","user":"UDB26738Q","ts":"1611437875.078200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zfr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"keep in mind that "},{"type":"text","text":"]gc","style":{"code":true}},{"type":"text","text":" preserves packages in the environments in "},{"type":"text","text":"logs/manifest_usage.toml","style":{"code":true}},{"type":"text","text":": if there are environments you don't care about, remove them, and "},{"type":"text","text":"]gc","style":{"code":true}},{"type":"text","text":" will be happy to remove packages (and package versions) that were only there.  exactly same logic for the artifacts"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"4e0c0608-fac8-4119-afd5-f90bab299681","type":"message","text":"thank you","user":"U68QW0PUZ","ts":"1611437896.078400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iElTN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thank you"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"b2693a7b-783b-4964-becf-9436a179f1e5","type":"message","text":"That is one of the more compelling reasons to use multiple focused environments that I have seen.","user":"U68QW0PUZ","ts":"1611437970.078600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PaG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That is one of the more compelling reasons to use multiple focused environments that I have seen."}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"230f9366-e844-4e96-9015-66dbebe56aed","type":"message","text":"Are scratchspaces of no additional use and so become deletion fodder after they have been scratched?","user":"U68QW0PUZ","ts":"1611438099.078800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CIR/s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Are scratchspaces of no additional use and so become deletion fodder after they have been scratched?"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV"},{"client_msg_id":"1bf3d6b8-9276-4903-8374-b13c8bba16a3","type":"message","text":"<https://github.com/JuliaPackaging/Scratch.jl>","user":"UDB26738Q","ts":"1611438120.079000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1OZiT","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaPackaging/Scratch.jl"}]}]}],"thread_ts":"1611344091.047600","parent_user_id":"UN97XTLCV","reactions":[{"name":"+1::skin-tone-3","users":["U68QW0PUZ"],"count":1}]}]