[{"client_msg_id":"5066d163-1da8-4c82-9c64-a98b672af8b0","type":"message","text":"Are there any CPU architectures that have a bunch of 1 bit registers? It seems like you might be able to make a cool architecture where all boolean-returning functions would write to one of a special set of registers that only store booleans, and all instructions had a field for a conditional register that determined if the instruction would run. It seems to me like this type of architecture would remove the expense of small branches which would be really useful","user":"U0179G7FG4F","ts":"1616309232.254500","team":"T68168MUP","edited":{"user":"U0179G7FG4F","ts":"1616309246.000000"},"blocks":[{"type":"rich_text","block_id":"ADCH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Are there any CPU architectures that have a bunch of 1 bit registers? It seems like you might be able to make a cool architecture where all boolean-returning functions would write to one of a special set of registers that only store booleans, and all instructions had a field for a conditional register that determined if the instruction would run. It seems to me like this type of architecture would remove the expense of small branches which would be really useful"}]}]}],"thread_ts":"1616309232.254500","reply_count":33,"reply_users_count":2,"latest_reply":"1616314779.263000","reply_users":["UAUPJLBQX","UH24GRBLL"],"subscribed":false},{"client_msg_id":"61300e43-388a-4ce1-94b6-457c3b4c1cea","type":"message","text":"AVX512 and SVE (ARM) both have dedicated bitmask registers, which are like a SIMD version of what you suggest.","user":"UAUPJLBQX","ts":"1616313804.256000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Fd7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"AVX512 and SVE (ARM) both have dedicated bitmask registers, which are like a SIMD version of what you suggest."}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"8dfa3220-44cb-4d51-8496-80c07fac19d9","type":"message","text":"I'm not sure about SVE (but would guess it would be similar), but with AVX512 you can also use these mask registers with the scalar variants of SIMD instructions","user":"UAUPJLBQX","ts":"1616314000.256400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SRT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure about SVE (but would guess it would be similar), but with AVX512 you can also use these mask registers with the scalar variants of SIMD instructions"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"c4614168-c4e7-43d5-969c-ea41ee6162bb","type":"message","text":"which would give you exactly what you're asking for.","user":"UAUPJLBQX","ts":"1616314023.256600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LUG+y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which would give you exactly what you're asking for."}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"29e17c23-6d13-488b-aa15-19864a6ca528","type":"message","text":"There is 0 overhead to using them.","user":"UAUPJLBQX","ts":"1616314084.256800","team":"T68168MUP","edited":{"user":"UAUPJLBQX","ts":"1616314095.000000"},"blocks":[{"type":"rich_text","block_id":"8ra","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There is 0 overhead to using them."}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"e30eaea1-bd31-4d09-ac11-ce08e81a4dac","type":"message","text":"the cost of branching is not in using a \"big\" integer compared to a single bit, it's in figuring out which branch to take","user":"UH24GRBLL","ts":"1616314156.257100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5/uh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the cost of branching is not in using a \"big\" integer compared to a single bit, it's in figuring out which branch to take"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"8b9f7fd1-3561-4f5d-9f8f-4be6518f3eb7","type":"message","text":"There is no branch with the opmask registers","user":"UAUPJLBQX","ts":"1616314182.257300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CAAo=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There is no branch with the opmask registers"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"76dbe8ec-ee29-48fe-a6ed-350c68c4bfc4","type":"message","text":"and no overhead in applying them to an instruction.","user":"UAUPJLBQX","ts":"1616314204.257500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JjlT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and no overhead in applying them to an instruction."}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"1e48ba74-8c94-489c-91ca-af5a0727cde8","type":"message","text":"I meant in regards to\n\n&gt; boolean-returning functions would write to one of a special set of registers that only store booleans\n","user":"UH24GRBLL","ts":"1616314223.257700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uNDw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I meant in regards to\n\n"}]},{"type":"rich_text_quote","elements":[{"type":"text","text":"boolean-returning functions would write to one of a special set of registers that only store booleans"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"3a691dfd-5c30-43ce-8afb-661fbe4743f9","type":"message","text":"Ah.","user":"UAUPJLBQX","ts":"1616314234.257900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pcr0H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah."}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"544e366b-4568-4557-b083-32598ae8872f","type":"message","text":"and not everything is SIMDable, as you well know :p","user":"UH24GRBLL","ts":"1616314239.258100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3lw/B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and not everything is SIMDable, as you well know :p"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"fb0b2c91-d270-461e-909c-378a476d6008","type":"message","text":"That's why I pointed out it works for scalar variants as well, not just the SIMD variants","user":"UAUPJLBQX","ts":"1616314266.258300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mXd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's why I pointed out it works for scalar variants as well, not just the SIMD variants"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"ad7ec60a-d2f5-447d-a206-921535e7d323","type":"message","text":"but it would force you to take \"both sides\" of the branch","user":"UAUPJLBQX","ts":"1616314276.258500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3bt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but it would force you to take \"both sides\" of the branch"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"9f8ba77c-5758-4c1e-a577-6b7ce63162e5","type":"message","text":"yup","user":"UH24GRBLL","ts":"1616314284.258700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"suftF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yup"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"d2e2c3fa-d95e-4011-80af-70fd188efcee","type":"message","text":"(turning off the instructions on the side you aren't taking)","user":"UAUPJLBQX","ts":"1616314288.258900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yRc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(turning off the instructions on the side you aren't taking)"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"69d6a721-690e-4b0d-8353-174ee603e6f5","type":"message","text":"meaning either the branch is relatively trivial, or it is only worthwhile if you're SIMD","user":"UAUPJLBQX","ts":"1616314308.259100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ah6f","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"meaning either the branch is relatively trivial, or it is only worthwhile if you're SIMD"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"e485411e-bc65-40fe-86d6-16777ff9155f","type":"message","text":"Also, the reason for being bits for SIMD is so that 64 bits is enough to mask a 512 bit vector of bytes","user":"UAUPJLBQX","ts":"1616314341.259300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GOm75","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also, the reason for being bits for SIMD is so that 64 bits is enough to mask a 512 bit vector of bytes"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"1940c08d-8d22-43e0-a044-313f240259ab","type":"message","text":"it's not something you can use everywhere though, e.g. you can't just replace a single `cmp` with an opmask and hope it's fast (which I assume is what <@U0179G7FG4F> was thinking of)","user":"UH24GRBLL","ts":"1616314360.259500","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1616314574.000000"},"blocks":[{"type":"rich_text","block_id":"cqVEe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's not something you can use everywhere though, e.g. you can't just replace a single "},{"type":"text","text":"cmp","style":{"code":true}},{"type":"text","text":" with an opmask and hope it's fast (which I assume is what "},{"type":"user","user_id":"U0179G7FG4F"},{"type":"text","text":" was thinking of)"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"dc955803-b481-41cf-b9fa-abae6620f8ab","type":"message","text":"keeps the registers smaller / if they're dedicated to booleans, may as well make them the smallest possible size","user":"UAUPJLBQX","ts":"1616314368.259700","team":"T68168MUP","edited":{"user":"UAUPJLBQX","ts":"1616314375.000000"},"blocks":[{"type":"rich_text","block_id":"8no","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"keeps the registers smaller / if they're dedicated to booleans, may as well make them the smallest possible size"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"8727ca52-36b9-40a5-ae83-789aefbfb9b3","type":"message","text":"addressing single bits would require a lot of extra special access hardware though, not sure that's worth the die space","user":"UH24GRBLL","ts":"1616314398.260000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"g90","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"addressing single bits would require a lot of extra special access hardware though, not sure that's worth the die space"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"399de6c6-45fe-451e-9e68-ef6fff61831c","type":"message","text":"best to keep things in word size (or multiples thereof)","user":"UH24GRBLL","ts":"1616314414.260200","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1616314469.000000"},"blocks":[{"type":"rich_text","block_id":"o=N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"best to keep things in word size (or multiples thereof)"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"7dd5365e-e670-4535-b2b0-219ea851f89b","type":"message","text":"Not sure what you mean exactly","user":"UAUPJLBQX","ts":"1616314620.260600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P4RRe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not sure what you mean exactly"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"6a13ad1a-fc7c-4ac3-9549-0dc0bd6f224c","type":"message","text":"loading single bits from memory?","user":"UAUPJLBQX","ts":"1616314627.260800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WTv5/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"loading single bits from memory?"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"16db33be-7cc8-421e-95e9-8adc3044b20f","type":"message","text":"`BitArray`s already have that problem","user":"UAUPJLBQX","ts":"1616314635.261000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J6imv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"BitArray","style":{"code":true}},{"type":"text","text":"s already have that problem"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"c21e0421-3976-47bd-9669-2f6ed2b71253","type":"message","text":"let's assume there was an architecture that used single bits as a boolean store for boolean operations","user":"UH24GRBLL","ts":"1616314652.261200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4/cJC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"let's assume there was an architecture that used single bits as a boolean store for boolean operations"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"36d959d4-96a2-4c5c-b4df-5d3fde477b36","type":"message","text":"(and I agree, they can be cumbersome to work with)","user":"UAUPJLBQX","ts":"1616314652.261400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KCi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(and I agree, they can be cumbersome to work with)"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"60decb9b-926a-482d-84f8-5c11364ee4e7","type":"message","text":"AVX512?","user":"UAUPJLBQX","ts":"1616314672.261600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"imkN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"AVX512?"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"6e2fcbc4-3298-4308-8f31-bd79f2db623c","type":"message","text":"how would you get that information out of those registers to interface with anything else (hardware wise)?","user":"UH24GRBLL","ts":"1616314691.261800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TJqIv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how would you get that information out of those registers to interface with anything else (hardware wise)?"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"8a2a6c38-7b63-4e47-b30f-e73d07f49eca","type":"message","text":"`kmovd`","user":"UAUPJLBQX","ts":"1616314702.262000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F=HCx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"kmovd","style":{"code":true}}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"341afa75-7e67-45a0-a68b-9c7951b4739e","type":"message","text":"I'm not talking about vectorextensions! I'm talking hypotheticals","user":"UH24GRBLL","ts":"1616314716.262200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IpM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not talking about vectorextensions! I'm talking hypotheticals"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"335789b3-8aed-403f-93fc-6c5545e9ad9b","type":"message","text":"Well, we have an actual example?","user":"UAUPJLBQX","ts":"1616314730.262400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"guYX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, we have an actual example?"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"9672d66b-111d-4ddb-bc25-036b455efc13","type":"message","text":"The main way you use it is having it apply to operations while still in the registers","user":"UAUPJLBQX","ts":"1616314754.262600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E=rn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The main way you use it is having it apply to operations while still in the registers"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"463bb31e-a923-4cc3-aa50-070837a2735a","type":"message","text":"and comparisons automatically create them in those registers","user":"UAUPJLBQX","ts":"1616314769.262800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XO7A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and comparisons automatically create them in those registers"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"},{"client_msg_id":"e40ba577-02cf-4ddb-98fc-99e86fb446e2","type":"message","text":"so moving them in/out isn't all that typical","user":"UAUPJLBQX","ts":"1616314779.263000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aVb1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so moving them in/out isn't all that typical"}]}]}],"thread_ts":"1616309232.254500","parent_user_id":"U0179G7FG4F"}]