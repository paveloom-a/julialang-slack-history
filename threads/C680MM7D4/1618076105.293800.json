[{"client_msg_id":"a28dba77-7510-4419-9f20-16ff19ce5844","type":"message","text":"How to create a binary random BitMatrix with a specific proportion of ones ?","user":"U01FTFACYJ0","ts":"1618076105.293800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Awa3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How to create a binary random BitMatrix with a specific proportion of ones ?"}]}]}],"thread_ts":"1618076105.293800","reply_count":13,"reply_users_count":3,"latest_reply":"1618077989.300300","reply_users":["UM30MT6RF","U01FTFACYJ0","U8D9768Q6"],"is_locked":false,"subscribed":false},{"client_msg_id":"dd404dbc-1904-4e39-a41d-549879ad298d","type":"message","text":"`rand(n) .&lt; p` is probably the easiest way, although this will create a temporary array of floats.","user":"UM30MT6RF","ts":"1618076374.293900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SCBht","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"rand(n) .< p","style":{"code":true}},{"type":"text","text":" is probably the easiest way, although this will create a temporary array of floats."}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0"},{"client_msg_id":"2fc04156-44e3-445d-9a4b-93ef6852bfd0","type":"message","text":"`a = rand(4,4) .&lt; 0.5`\n`4×4 BitArray{2}:`\n `1  1  0  0`\n `0  0  0  0`\n `0  1  0  1`\n `0  0  0  1`\n\n\n`sum(a)`\n`5` \n\nmmm.. doent work","user":"U01FTFACYJ0","ts":"1618076689.294800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sWqiB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"a = rand(4,4) .< 0.5","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"4×4 BitArray{2}:","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":" 1  1  0  0","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":" 0  0  0  0","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":" 0  1  0  1","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":" 0  0  0  1","style":{"code":true}},{"type":"text","text":"\n\n\n"},{"type":"text","text":"sum(a)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"5 ","style":{"code":true}},{"type":"text","text":"\n\nmmm.. doent work"}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0"},{"client_msg_id":"2b47393e-df5b-4557-87b8-e6d0660b4d55","type":"message","text":"What doesn't work?","user":"U8D9768Q6","ts":"1618076729.295200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QBnkL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What doesn't work?"}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0"},{"client_msg_id":"92195dc1-5fc1-43e6-a7cd-fe81ac5cd7ef","type":"message","text":"I alway get different results, I would like the exact proprortion of ones, in this case the 50%","user":"U01FTFACYJ0","ts":"1618076757.295600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HSlT4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I alway get different results, I would like the exact proprortion of ones, in this case the 50%"}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0"},{"client_msg_id":"2920e58d-dbfa-403a-9b50-1803b303858e","type":"message","text":"Oh I see. That's not too hard then, you just make a BitArray where the first `n` elements are `true` and the rest are `false`, then use `Random.shuffle!`","user":"U8D9768Q6","ts":"1618076813.296000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wLCGr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh I see. That's not too hard then, you just make a BitArray where the first "},{"type":"text","text":"n","style":{"code":true}},{"type":"text","text":" elements are "},{"type":"text","text":"true","style":{"code":true}},{"type":"text","text":" and the rest are "},{"type":"text","text":"false","style":{"code":true}},{"type":"text","text":", then use "},{"type":"text","text":"Random.shuffle!","style":{"code":true}}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0","reactions":[{"name":"+1","users":["UDB26738Q","UM30MT6RF","U0179G7FG4F","U0138UTB7A4","U67G3QRJM","U6740K1SP"],"count":6},{"name":"open_mouth","users":["U0138UTB7A4","UL4JREGCV"],"count":2}]},{"client_msg_id":"9cfa8bac-ced6-46cd-8cc9-41fb1d9e812e","type":"message","text":"```using Random: shuffle!\n\nfoo(N, n) = shuffle!((1:N) .&lt;= n)\n\n\njulia&gt; foo(10, 3)\n10-element BitVector:\n 0\n 1\n 0\n 1\n 0\n 0\n 0\n 0\n 0\n 1\n\njulia&gt; foo(10, 3)\n10-element BitVector:\n 0\n 0\n 0\n 1\n 0\n 1\n 0\n 1\n 0\n 0```","user":"U8D9768Q6","ts":"1618077056.297300","team":"T68168MUP","edited":{"user":"U8D9768Q6","ts":"1618077161.000000"},"blocks":[{"type":"rich_text","block_id":"AbqkM","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Random: shuffle!\n\nfoo(N, n) = shuffle!((1:N) .<= n)\n\n\njulia> foo(10, 3)\n10-element BitVector:\n 0\n 1\n 0\n 1\n 0\n 0\n 0\n 0\n 0\n 1\n\njulia> foo(10, 3)\n10-element BitVector:\n 0\n 0\n 0\n 1\n 0\n 1\n 0\n 1\n 0\n 0"}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0","reactions":[{"name":"thumbsup_all","users":["U01FTFACYJ0"],"count":1}]},{"client_msg_id":"7ab7bdf3-5dbf-4f5f-b550-fe2ffed4d224","type":"message","text":"but how to get a matrix ?","user":"U01FTFACYJ0","ts":"1618077319.298000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IW+8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but how to get a matrix ?"}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0"},{"client_msg_id":"03836d3d-8153-4572-aa5a-77d875536b2f","type":"message","text":"By making a matrix instead of a vector","user":"U8D9768Q6","ts":"1618077333.298300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cBy+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"By making a matrix instead of a vector"}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0"},{"client_msg_id":"eb2438dd-9c6e-4b55-86ea-ecee8b6e0b8b","type":"message","text":"```foo(N, M, n) = shuffle!(reshape(1:(N*M), N, M) .&lt;= n)\n\njulia&gt; foo(5,6,3)\n5×6 BitMatrix:\n 0  0  0  0  0  0\n 0  0  0  0  0  0\n 0  0  0  0  0  0\n 0  0  0  0  0  1\n 0  0  0  1  1  0```","user":"U8D9768Q6","ts":"1618077492.298600","team":"T68168MUP","edited":{"user":"U8D9768Q6","ts":"1618077534.000000"},"blocks":[{"type":"rich_text","block_id":"rF4","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"foo(N, M, n) = shuffle!(reshape(1:(N*M), N, M) .<= n)\n\njulia> foo(5,6,3)\n5×6 BitMatrix:\n 0  0  0  0  0  0\n 0  0  0  0  0  0\n 0  0  0  0  0  0\n 0  0  0  0  0  1\n 0  0  0  1  1  0"}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0","reactions":[{"name":"heart","users":["U01FTFACYJ0"],"count":1}]},{"client_msg_id":"ca88a0eb-9006-4d0d-b233-920afbc1d236","type":"message","text":"perfect, thanks so much!","user":"U01FTFACYJ0","ts":"1618077588.299400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FUkOV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"perfect, thanks so much!"}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0"},{"client_msg_id":"f2f22532-2874-4efc-9e93-ba7c98c1ea26","type":"message","text":"The vector `1:(N*M)` has the same number of elements as an `N, M` matrix, so you can just create that, then `reshape` it, then do the same `.&lt;= n` trick to make a `BitMatrix`  where the first `n` elements are `true` and the rest `false`, then you just `shuffle!`.","user":"U8D9768Q6","ts":"1618077654.299700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AF+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The vector "},{"type":"text","text":"1:(N*M)","style":{"code":true}},{"type":"text","text":" has the same number of elements as an "},{"type":"text","text":"N, M","style":{"code":true}},{"type":"text","text":" matrix, so you can just create that, then "},{"type":"text","text":"reshape","style":{"code":true}},{"type":"text","text":" it, then do the same "},{"type":"text","text":".<= n","style":{"code":true}},{"type":"text","text":" trick to make a "},{"type":"text","text":"BitMatrix","style":{"code":true}},{"type":"text","text":"  where the first "},{"type":"text","text":"n","style":{"code":true}},{"type":"text","text":" elements are "},{"type":"text","text":"true","style":{"code":true}},{"type":"text","text":" and the rest "},{"type":"text","text":"false","style":{"code":true}},{"type":"text","text":", then you just "},{"type":"text","text":"shuffle!","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0"},{"client_msg_id":"34282eca-5950-4ae9-9399-5e1279ac0243","type":"message","text":"Happy to help :slightly_smiling_face:","user":"U8D9768Q6","ts":"1618077660.299900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PUs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Happy to help "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0","reactions":[{"name":"thumbsup_all","users":["U01FTFACYJ0","UKG4WF8PJ"],"count":2}]},{"client_msg_id":"0270e45c-851d-4daf-a095-841752c07e1c","type":"message","text":"And just in case you're paranoid (like me) that this might not actually be an even random distribution, you can just do it a lot of times, sum up the results and check that the distribution is uniform\n```N = 10_000_000\nmean(1:N) do _\n    foo(5, 6, 3)\nend\n\n#+RESULTS:\n 5×6 Matrix{Float64}:\n  0.100091   0.100023   0.100203  0.0999244  0.100053   0.0999755\n  0.099939   0.100191   0.100063  0.0999268  0.100002   0.10007\n  0.0999981  0.0999767  0.100006  0.0999593  0.0999465  0.0998295\n  0.100012   0.0999997  0.099944  0.100035   0.0999073  0.0999063\n  0.0999751  0.100091   0.100015  0.0999798  0.100006   0.0999515```","user":"U8D9768Q6","ts":"1618077989.300300","team":"T68168MUP","edited":{"user":"U8D9768Q6","ts":"1618078172.000000"},"blocks":[{"type":"rich_text","block_id":"NWY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And just in case you're paranoid (like me) that this might not actually be an even random distribution, you can just do it a lot of times, sum up the results and check that the distribution is uniform\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"N = 10_000_000\nmean(1:N) do _\n    foo(5, 6, 3)\nend\n\n#+RESULTS:\n 5×6 Matrix{Float64}:\n  0.100091   0.100023   0.100203  0.0999244  0.100053   0.0999755\n  0.099939   0.100191   0.100063  0.0999268  0.100002   0.10007\n  0.0999981  0.0999767  0.100006  0.0999593  0.0999465  0.0998295\n  0.100012   0.0999997  0.099944  0.100035   0.0999073  0.0999063\n  0.0999751  0.100091   0.100015  0.0999798  0.100006   0.0999515"}]}]}],"thread_ts":"1618076105.293800","parent_user_id":"U01FTFACYJ0","reactions":[{"name":"thumbsup_all","users":["U01FTFACYJ0"],"count":1}]}]