[{"client_msg_id":"5fa98651-d840-4975-9bf7-d33c7ece6e4d","type":"message","text":"Taking the name of this channel literally, are there any vectorized RNGs in Julia? <https://github.com/lemire/SIMDxorshift|Here> in one in C. I find that often operations that might be vectorized are bottlenecked by the serial nature of RNGs, producing just a stream of random floats.","user":"U011V2YN59N","ts":"1617892396.178800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nylPF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Taking the name of this channel literally, are there any vectorized RNGs in Julia? "},{"type":"link","url":"https://github.com/lemire/SIMDxorshift","text":"Here"},{"type":"text","text":" in one in C. I find that often operations that might be vectorized are bottlenecked by the serial nature of RNGs, producing just a stream of random floats."}]}]}],"thread_ts":"1617892396.178800","reply_count":22,"reply_users_count":6,"latest_reply":"1617897526.208900","reply_users":["UDB26738Q","U011V2YN59N","UH24GRBLL","UJ7DVTVQ8","U67BJLYCS","U6QPTG69E"],"is_locked":false,"subscribed":false,"reactions":[{"name":"mind_blown","users":["UPUBAM63X"],"count":1}]},{"client_msg_id":"6f1cb63e-435b-49d9-a25d-16ed11aa3307","type":"message","text":"<#CB0GNN03X|rng> is the right channel :slightly_smiling_face:","user":"UDB26738Q","ts":"1617892434.179100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BsEca","elements":[{"type":"rich_text_section","elements":[{"type":"channel","channel_id":"CB0GNN03X"},{"type":"text","text":" is the right channel "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"40a6ed4c-d39a-42cd-b98b-3871de463185","type":"message","text":"ah, thanks. I shared there. Is it ok if I leave this here? this channel is much more active.","user":"U011V2YN59N","ts":"1617892630.179700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MMTY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, thanks. I shared there. Is it ok if I leave this here? this channel is much more active."}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"8c3c1ad1-effa-4d0e-b4b1-525f29464a94","type":"message","text":"julias default RNG already produces a state vector internally","user":"UH24GRBLL","ts":"1617892984.182200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u/Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"julias default RNG already produces a state vector internally"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"18841795-76ea-498b-b0c4-4a3d1ebcf65f","type":"message","text":"<@UH24GRBLL> I don't think julia exposes that to speed up, eg. sampling vectors of random variates, does it?","user":"U011V2YN59N","ts":"1617893558.190000","team":"T68168MUP","edited":{"user":"U011V2YN59N","ts":"1617893574.000000"},"blocks":[{"type":"rich_text","block_id":"Mp+82","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UH24GRBLL"},{"type":"text","text":" I don't think julia exposes that to speed up, eg. sampling vectors of random variates, does it?"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"cd61bfb9-1e95-422e-9962-fbf1f8ae9341","type":"message","text":"not sure what you mean by that","user":"UH24GRBLL","ts":"1617893788.191100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PONjr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not sure what you mean by that"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"812c97fa-7dcf-4f44-a5dc-c55141a456c5","type":"message","text":"in any case, I think there was a misunderstanding here","user":"UH24GRBLL","ts":"1617893795.191300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"baNO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in any case, I think there was a misunderstanding here"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"3134e923-770c-45e1-aa6c-25813a5624c9","type":"message","text":"I thought you were talking about filling vectors with random numbers (which julias default `rand` already does), but your link seems to talk about SIMD","user":"UH24GRBLL","ts":"1617893820.191700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OcX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I thought you were talking about filling vectors with random numbers (which julias default "},{"type":"text","text":"rand","style":{"code":true}},{"type":"text","text":" already does), but your link seems to talk about SIMD"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"d13b2a7d-242f-4e59-a1b8-4506ac5b7609","type":"message","text":"the relevant issue to track is <https://github.com/JuliaLang/julia/issues/27614>","user":"UH24GRBLL","ts":"1617893832.191900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wNMr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the relevant issue to track is "},{"type":"link","url":"https://github.com/JuliaLang/julia/issues/27614"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"811c510d-7575-4253-b4b2-e416c0424ff1","type":"message","text":"TL;DR it's complicated and not necessarily conclusive - though I'm sure work in this area would be appreciated","user":"UH24GRBLL","ts":"1617893854.192100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aM7pf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"TL;DR it's complicated and not necessarily conclusive - though I'm sure work in this area would be appreciated"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"0d48abbe-52aa-4fc3-894b-8be82b238260","type":"message","text":"<@UH24GRBLL> I was speaking about both. Currently `rand!` , and functions that call RNG (like the samplers in Distributions.jl) just serially fill vectors as far as I know. I think many applications could get a significant speedup from incorporating SIMD operations.\n\nI am not sure that issue addresses my question. I am not asking about Julia's default RNG, I usually use xorshift RNGs from `RandomNumbers.jl` for performance. I am just asking generally about RNG implementations in Julia.","user":"U011V2YN59N","ts":"1617894448.202400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rWSSS","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UH24GRBLL"},{"type":"text","text":" I was speaking about both. Currently "},{"type":"text","text":"rand!","style":{"code":true}},{"type":"text","text":" , and functions that call RNG (like the samplers in Distributions.jl) just serially fill vectors as far as I know. I think many applications could get a significant speedup from incorporating SIMD operations.\n\nI am not sure that issue addresses my question. I am not asking about Julia's default RNG, I usually use xorshift RNGs from `RandomNumbers.jl` for performance. I am just asking generally about RNG implementations in Julia."}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"05b9de45-35d3-4a91-b745-0aafec3e7b6b","type":"message","text":"that issue is about using a different RNG by default, which may enable other optimizations (like the one you're asking about) as well","user":"UH24GRBLL","ts":"1617894523.203900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qApz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that issue is about using a different RNG by default, which may enable other optimizations (like the one you're asking about) as well"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"c2513327-5a75-40c9-8e55-f4155a6f8fe0","type":"message","text":"the reason the default RNG currently can't fill a vector with multiple elements at the same time is because MersenneTwister doesn't allow that conceptually","user":"UH24GRBLL","ts":"1617894607.204200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qkw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the reason the default RNG currently can't fill a vector with multiple elements at the same time is because MersenneTwister doesn't allow that conceptually"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"e0feea32-6e43-413d-950c-a31e105e0bba","type":"message","text":"There is a package about Xorshift and the like, though I don't recall the name","user":"UH24GRBLL","ts":"1617894634.204400","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1617894641.000000"},"blocks":[{"type":"rich_text","block_id":"l+uN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There is a package about Xorshift and the like, though I don't recall the name"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"1f6e9464-5821-47eb-a9cf-a6ebc296a2b8","type":"message","text":"<https://github.com/JuliaSIMD/VectorizedRNG.jl>","user":"UJ7DVTVQ8","ts":"1617894674.204700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YVvlf","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaSIMD/VectorizedRNG.jl"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"c0f720bf-ba93-4db3-ad2c-1a24492f6610","type":"message","text":"Yes I think most performance-concerned applications are already replacing the default RNG, so the default doesn't rly matter.\n\n<@UJ7DVTVQ8> ah thanks! this is what I meant","user":"U011V2YN59N","ts":"1617894730.204900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HNRY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes I think most performance-concerned applications are already replacing the default RNG, so the default doesn't rly matter.\n\n"},{"type":"user","user_id":"UJ7DVTVQ8"},{"type":"text","text":" ah thanks! this is what I meant"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"50d2e22a-0bfd-4e44-8438-51940f2c7e38","type":"message","text":"the default always matters","user":"UH24GRBLL","ts":"1617894932.205100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sud","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the default always matters"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"6bbff576-d392-4648-8b5c-c32ce1ec8940","type":"message","text":"CUDA.jl has a vectorized rng ;)","user":"U67BJLYCS","ts":"1617894988.205300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rAH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"CUDA.jl has a vectorized rng ;)"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"3535971b-2ccf-45cf-97bc-1b1838fad2dc","type":"message","text":"CUDA.jl _needs_ to have a vectorized RNG :p","user":"UH24GRBLL","ts":"1617895298.205500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GnEa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"CUDA.jl "},{"type":"text","text":"needs","style":{"italic":true}},{"type":"text","text":" to have a vectorized RNG :p"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"5825fb14-80bb-41e0-a790-14dc200210c7","type":"message","text":"I'm not sure I understood the question, but the default RNG `MersenneTwister` does use SIMD: it uses the dSFMT library, which stands for \"Double precision SIMD-oriented Fast Mersenne Twister \"","user":"U6QPTG69E","ts":"1617896643.205800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FAl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure I understood the question, but the default RNG "},{"type":"text","text":"MersenneTwister","style":{"code":true}},{"type":"text","text":" does use SIMD: it uses the dSFMT library, which stands for \"Double precision SIMD-oriented Fast Mersenne Twister \""}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"569d013a-81da-4298-a6b6-ff1375511881","type":"message","text":"And dSFMT is used not only for floats but also for bit integers","user":"U6QPTG69E","ts":"1617896720.206000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oliR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And dSFMT is used not only for floats but also for bit integers"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"80dc48e0-1b8c-4ad5-9807-d3899f71556a","type":"message","text":"(in `Random`)","user":"U6QPTG69E","ts":"1617896729.206200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CPzh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(in "},{"type":"text","text":"Random","style":{"code":true}},{"type":"text","text":")"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"},{"client_msg_id":"a039af95-4466-47b1-8849-305b64d972d7","type":"message","text":"<@U6QPTG69E> Oh! yes that is partially what I was asking. Thanks!","user":"U011V2YN59N","ts":"1617897526.208900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9Im","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6QPTG69E"},{"type":"text","text":" Oh! yes that is partially what I was asking. Thanks!"}]}]}],"thread_ts":"1617892396.178800","parent_user_id":"U011V2YN59N"}]