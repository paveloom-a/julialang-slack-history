[{"client_msg_id":"CF6B302A-AD18-4A8A-AFEE-44CD91A943E9","type":"message","text":"When you say Julia S-expressions, do you mean like the output of `Meta.show_sexpr`?","user":"U8D9768Q6","ts":"1617206457.309300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"S3fPR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When you say Julia S-expressions, do you mean like the output of "},{"type":"text","text":"Meta.show_sexpr","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1617206457.309300","reply_count":18,"reply_users_count":4,"latest_reply":"1617241470.339700","reply_users":["U6QGE7S86","U8D9768Q6","U6A936746","U67G3QRJM"],"is_locked":false,"subscribed":false},{"client_msg_id":"7514ddfc-49e8-4cd9-9671-d975f06a8e17","type":"message","text":"Might be - I'm back again at parsing Mathematica - I figured out how to dump a Mathematica S-expression, so that's some progress on Not-Reinventing-The-Wheel for splitting out the Assumptions for an integral rule.","user":"U6QGE7S86","ts":"1617206875.312200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D37","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Might be - I'm back again at parsing Mathematica - I figured out how to dump a Mathematica S-expression, so that's some progress on Not-Reinventing-The-Wheel for splitting out the Assumptions for an integral rule."}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"0a8bcca7-9835-4215-b69e-2828f43f5dd8","type":"message","text":"My thinking is that I might use a dictionary of simple replacements for Julia calls and then morph that back into Julia.","user":"U6QGE7S86","ts":"1617206919.312400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nfni","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My thinking is that I might use a dictionary of simple replacements for Julia calls and then morph that back into Julia."}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"ed17c4e4-3875-4fbe-bb0d-2e64a871f99a","type":"message","text":"Ah I see. <https://github.com/JuliaInterop/MathLink.jl/> has some facilities for translating mathematica expressions to julia expressions","user":"U8D9768Q6","ts":"1617207123.312900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gKp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah I see. "},{"type":"link","url":"https://github.com/JuliaInterop/MathLink.jl/"},{"type":"text","text":" has some facilities for translating mathematica expressions to julia expressions"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"6e5d032d-955b-43f6-8a09-c7d2bc5bdce7","type":"message","text":"Yup, I've played around with it. I don't yet see how to apply it to my usecase though. (Not that it can't, I'm just not getting it.)","user":"U6QGE7S86","ts":"1617207247.313100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ygP1+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yup, I've played around with it. I don't yet see how to apply it to my usecase though. (Not that it can't, I'm just not getting it.)"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"737e19d1-ea09-4983-b379-58387b16d460","type":"message","text":"some discussion here\n<https://discourse.julialang.org/t/best-practices-for-converting-a-mathematica-expression-to-julia/18335/6>\nApparently you can also go via SymPy.jl?\n(instead of MathLink.jl)","user":"U6A936746","ts":"1617207473.313400","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1617207516.000000"},"attachments":[{"service_name":"JuliaLang","title":"Best Practices for converting a Mathematica expression to Julia","title_link":"https://discourse.julialang.org/t/best-practices-for-converting-a-mathematica-expression-to-julia/18335/6","text":"Ah, this stops working now for SymPy v1.0.10.","fallback":"JuliaLang: Best Practices for converting a Mathematica expression to Julia","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","ts":1576347885,"from_url":"https://discourse.julialang.org/t/best-practices-for-converting-a-mathematica-expression-to-julia/18335/6","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/best-practices-for-converting-a-mathematica-expression-to-julia/18335/6"}],"blocks":[{"type":"rich_text","block_id":"WRn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"some discussion here\n"},{"type":"link","url":"https://discourse.julialang.org/t/best-practices-for-converting-a-mathematica-expression-to-julia/18335/6"},{"type":"text","text":"\nApparently you can also go via SymPy.jl?\n(instead of MathLink.jl)"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"1af2d94d-abc7-4bb4-9615-fd7c75e6e019","type":"message","text":"Yup, I've tried using the sympy.mathematica converter and it fails for at least 2 reasons:","user":"U6QGE7S86","ts":"1617207521.313800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"44rGY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yup, I've tried using the sympy.mathematica converter and it fails for at least 2 reasons:"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"d9e478fa-bdfa-470f-b215-c0013bf2691a","type":"message","text":"It doesn't have a full dictionary of all the Mathematica functions I care about in Integration, so I had to build a huge dict of all the missing calls  (Doable, I built the dict and passed it in)","user":"U6QGE7S86","ts":"1617207586.314000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0p0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It doesn't have a full dictionary of all the Mathematica functions I care about in Integration, so I had to build a huge dict of all the missing calls  (Doable, I built the dict and passed it in)"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"7d52f39a-01c2-456a-a007-6d944f2260c5","type":"message","text":"2. It has to be able to deal with local scope renamings: sometimes you get some integrals that use some gnarly abbreviations like `With[foo  = SuperLongerWayMoreInconvenientButDescriptiveFoo[]] ...ActualCalculations[foo[x]]`","user":"U6QGE7S86","ts":"1617207642.314200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0tFq0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"2. It has to be able to deal with local scope renamings: sometimes you get some integrals that use some gnarly abbreviations like "},{"type":"text","text":"With[foo  = SuperLongerWayMoreInconvenientButDescriptiveFoo[]] ...ActualCalculations[foo[x]]","style":{"code":true}}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"affe6c8e-bcaa-4490-b2cb-447690f6de60","type":"message","text":"And the Sympy parser just bails on that.","user":"U6QGE7S86","ts":"1617207653.314400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p5fWz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And the Sympy parser just bails on that."}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"11be2f17-5c9b-49d8-a72a-e579483806a3","type":"message","text":"It might be worth contacting Mathematica support with a feature request. (Not a short term solution)\nMathematic can output python code: <https://reference.wolfram.com/language/ref/format/PythonExpression.html>\nwhy not output Julia code also.\n\nEspecially since Mathematica already supports running julia code. So they have some interest.\n<https://reference.wolfram.com/language/ref/externalevaluationsystem/Julia.html>","user":"U6A936746","ts":"1617207691.314600","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1617207705.000000"},"blocks":[{"type":"rich_text","block_id":"MKs+Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It might be worth contacting Mathematica support with a feature request. (Not a short term solution)\nMathematic can output python code: "},{"type":"link","url":"https://reference.wolfram.com/language/ref/format/PythonExpression.html"},{"type":"text","text":"\nwhy not output Julia code also.\n\nEspecially since Mathematica already supports running julia code. So they have some interest.\n"},{"type":"link","url":"https://reference.wolfram.com/language/ref/externalevaluationsystem/Julia.html"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"ff1fe3a5-c8ac-4ca1-842c-bf11eeb41ac7","type":"message","text":"Oh, wish I'd thougth about that some weeks ago - but since this is my GSoC proposal I think I have to hunker down and try doing this anyways.","user":"U6QGE7S86","ts":"1617207740.315100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i99DO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, wish I'd thougth about that some weeks ago - but since this is my GSoC proposal I think I have to hunker down and try doing this anyways."}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"6d9804ca-8365-4148-9f12-6cfed76850c4","type":"message","text":"Yeah, it also bails on parsing the `Conditions`, which you need to know about to apply the different integration rules:\n```\njulia&gt; vstructs[end-1].givens\n\"FreeQ[{a, b, c, n, p}, x] &amp;&amp; EqQ[n2, 2*n] &amp;&amp; EqQ[b^2 - 4*a*c, 0] &amp;&amp; IntegerQ[p - 1/2]\"\n\njulia&gt; parsetosympy(ans, sympydictfixes)\nERROR: PyError ($(Expr(:escape, :(ccall(#= /home/mrg/.julia/packages/PyCall/tqyST/src/pyfncall.jl:43 =# @pysym(:PyObject_Call), PyPtr, (PyPtr, PyPtr, PyPtr), o, pyargsptr, kw))))) &lt;class 'ValueError'&gt;\nValueError('Currently list is not supported.')\n  ...```","user":"U6QGE7S86","ts":"1617207864.315300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QrZ2j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, it also bails on parsing the "},{"type":"text","text":"Conditions","style":{"code":true}},{"type":"text","text":", which you need to know about to apply the different integration rules:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\njulia> vstructs[end-1].givens\n\"FreeQ[{a, b, c, n, p}, x] && EqQ[n2, 2*n] && EqQ[b^2 - 4*a*c, 0] && IntegerQ[p - 1/2]\"\n\njulia> parsetosympy(ans, sympydictfixes)\nERROR: PyError ($(Expr(:escape, :(ccall(#= /home/mrg/.julia/packages/PyCall/tqyST/src/pyfncall.jl:43 =# @pysym(:PyObject_Call), PyPtr, (PyPtr, PyPtr, PyPtr), o, pyargsptr, kw))))) <class 'ValueError'>\nValueError('Currently list is not supported.')\n  ..."}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"7a5ffed1-00ce-429e-aa7a-f72483ae526f","type":"message","text":"where `sympydictfixes`  is the 250ish Functions dict that are called and I need a Julia translation for","user":"U6QGE7S86","ts":"1617207894.315500","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617207905.000000"},"blocks":[{"type":"rich_text","block_id":"iAF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"where "},{"type":"text","text":"sympydictfixes","style":{"code":true}},{"type":"text","text":"  is the 250ish Functions dict that are called and I need a Julia translation for"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"type":"message","subtype":"thread_broadcast","text":"I've been ripgreppin' all day erry day now, so others may also find this useful:\n<https://github.com/akavel/up>","user":"U6QGE7S86","ts":"1617212960.320300","thread_ts":"1617206457.309300","root":{"client_msg_id":"CF6B302A-AD18-4A8A-AFEE-44CD91A943E9","type":"message","text":"When you say Julia S-expressions, do you mean like the output of `Meta.show_sexpr`?","user":"U8D9768Q6","ts":"1617206457.309300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"S3fPR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When you say Julia S-expressions, do you mean like the output of "},{"type":"text","text":"Meta.show_sexpr","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1617206457.309300","reply_count":18,"reply_users_count":4,"latest_reply":"1617241470.339700","reply_users":["U6QGE7S86","U8D9768Q6","U6A936746","U67G3QRJM"],"is_locked":false,"subscribed":false},"blocks":[{"type":"rich_text","block_id":"Bf/O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I've been ripgreppin' all day erry day now, so others may also find this useful:\n"},{"type":"link","url":"https://github.com/akavel/up"}]}]}],"client_msg_id":"a525fe4e-943d-42d9-b880-5dad7faaf1f9"},{"client_msg_id":"c6365f9f-19b2-4dd2-b8c4-e26457fa5cec","type":"message","text":"to use this I just `cat MySuperBigFile.txt | up` and then start adding `|rg pattern`  and chaining them","user":"U6QGE7S86","ts":"1617213181.320600","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617213217.000000"},"blocks":[{"type":"rich_text","block_id":"rXH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"to use this I just "},{"type":"text","text":"cat MySuperBigFile.txt | up","style":{"code":true}},{"type":"text","text":" and then start adding "},{"type":"text","text":"|rg pattern","style":{"code":true}},{"type":"text","text":"  and chaining them"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"857285d9-d4ef-4c53-a87b-0b5b4789c270","type":"message","text":"Can’t you just do a few replacements and turn that into Julia code?","user":"U67G3QRJM","ts":"1617240792.339000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Vsa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can’t you just do a few replacements and turn that into Julia code?"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"e8773756-7bf6-4136-ad0f-ffbb13e58d63","type":"message","text":"*Julia syntax","user":"U67G3QRJM","ts":"1617240797.339200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TSU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"*Julia syntax"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"},{"client_msg_id":"5B884678-CC70-4F6D-9C99-99564E34EC8B","type":"message","text":"The trick is automating it","user":"U8D9768Q6","ts":"1617241470.339700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"COzhj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The trick is automating it"}]}]}],"thread_ts":"1617206457.309300","parent_user_id":"U8D9768Q6"}]