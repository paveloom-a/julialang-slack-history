[{"client_msg_id":"f3d82c8c-9c4b-4f47-a83c-c1ad4918ab83","type":"message","text":"should one expect the order of json entries to remain the same after a `write(read(\"test.json\"))` ?","user":"UH8A351DJ","ts":"1612116179.399500","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1612116182.000000"},"blocks":[{"type":"rich_text","block_id":"j+k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"should one expect the order of json entries to remain the same after a "},{"type":"text","text":"write(read(\"test.json\"))","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1612116179.399500","reply_count":14,"reply_users_count":5,"latest_reply":"1612151487.418100","reply_users":["U67SCG4HG","UH8A351DJ","U6A936746","UPUBAM63X","UB7JS9CHF"],"subscribed":false},{"client_msg_id":"1eceadd5-6569-46a3-bd46-a383477e46d9","type":"message","text":"It reads to a `Dict`, right? Since those are unordered I don't think so.","user":"U67SCG4HG","ts":"1612116931.400000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pOyH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It reads to a "},{"type":"text","text":"Dict","style":{"code":true}},{"type":"text","text":", right? Since those are unordered I don't think so."}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ"},{"client_msg_id":"d5f6151e-0d9f-460b-b94f-eb7715cb3230","type":"message","text":"sorry, I guess I'm not talking about Julia specific but JSON as a format in general","user":"UH8A351DJ","ts":"1612116991.400200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=/+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sorry, I guess I'm not talking about Julia specific but JSON as a format in general"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ"},{"client_msg_id":"d1f89f8e-bbe1-46a1-bb0b-93b2dddcb5b8","type":"message","text":"need to re-run 2 days worth of work because an application (seems) to expect a config json file with entries in a specific order","user":"UH8A351DJ","ts":"1612117041.400400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uGwE5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"need to re-run 2 days worth of work because an application (seems) to expect a config json file with entries in a specific order"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ"},{"client_msg_id":"b02097c7-b414-493b-8ee2-b68bac4468f7","type":"message","text":"Yes, JSON in general is supposed to be an ordered format","user":"U6A936746","ts":"1612119181.400600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PWdd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, JSON in general is supposed to be an ordered format"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ"},{"client_msg_id":"efdecbd3-5766-47b2-91c3-f20490566502","type":"message","text":"But I suspect many implementations of parsers, including JSON.jl by default parse into an unordered dictionary, potentially one with a salted hash (like pythons dictionary) which means order of iteration changes between processes","user":"U6A936746","ts":"1612119287.400800","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1612119329.000000"},"blocks":[{"type":"rich_text","block_id":"0Yb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But I suspect many implementations of parsers, including JSON.jl by default parse into an unordered dictionary, potentially one with a salted hash (like pythons dictionary) which means order of iteration changes between processes"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ"},{"client_msg_id":"bf5d9e24-c930-472a-a888-cf59e331c5d4","type":"message","text":"welp, fml then lol:\n```julia&gt; a = tempname()\n\"/scratch/jl_YMCMDd\"\n\njulia&gt; open(a, \"w\") do f\n           write(a, JSON3.write(OrderedDict(\"a1\"=&gt;1, \"a2\"=&gt;2)))\n       end\n\njulia&gt; JSON3.read(read(a, String), Dict) |&gt; JSON3.write\n\"{\\\"a2\\\":2,\\\"a1\\\":1}\"\n\njulia&gt; JSON3.read(read(a, String)) |&gt; JSON3.write\n\"{\\\"a1\\\":1,\\\"a2\\\":2}\"\n\njulia&gt; JSON3.read(read(a, String), OrderedDict) |&gt; JSON3.write\nERROR: MethodError: no method matching keytype(::Type{OrderedDict})```","user":"UH8A351DJ","ts":"1612119585.401200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d1rD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"welp, fml then lol:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> a = tempname()\n\"/scratch/jl_YMCMDd\"\n\njulia> open(a, \"w\") do f\n           write(a, JSON3.write(OrderedDict(\"a1\"=>1, \"a2\"=>2)))\n       end\n\njulia> JSON3.read(read(a, String), Dict) |> JSON3.write\n\"{\\\"a2\\\":2,\\\"a1\\\":1}\"\n\njulia> JSON3.read(read(a, String)) |> JSON3.write\n\"{\\\"a1\\\":1,\\\"a2\\\":2}\"\n\njulia> JSON3.read(read(a, String), OrderedDict) |> JSON3.write\nERROR: MethodError: no method matching keytype(::Type{OrderedDict})"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ"},{"client_msg_id":"5aabd111-074e-4c0d-9140-4bf56ca8c63f","type":"message","text":"so by default JSON3 preserves the order, but because I needed mutability, I stabbed myself in the back","user":"UH8A351DJ","ts":"1612119606.401400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"g5NmP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so by default JSON3 preserves the order, but because I needed mutability, I stabbed myself in the back"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ","reactions":[{"name":"hocho","users":["UH8A351DJ"],"count":1},{"name":"selfie","users":["UH8A351DJ"],"count":1}]},{"client_msg_id":"28b252f3-22a8-45d5-a2a0-cae8bed9908a","type":"message","text":"however, I couldn't have done better because OrderedDict is not supported (yet)","user":"UH8A351DJ","ts":"1612119620.401600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XqhE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"however, I couldn't have done better because OrderedDict is not supported (yet)"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ"},{"client_msg_id":"053b9878-d73d-48e6-bec0-089305f6e17a","type":"message","text":"Hmm if `keytype(::Type{Dict})` is defined in Base then it should be defined for OrderedDict also. Open a issue/PR to OrderedCollectons.jl?\n\nYou can probably make it work by defining\n `Base.keytype(::Type{OrderedDict})=Any`","user":"U6A936746","ts":"1612120096.402100","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1612120107.000000"},"blocks":[{"type":"rich_text","block_id":"c4YJk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm if "},{"type":"text","text":"keytype(::Type{Dict})","style":{"code":true}},{"type":"text","text":" is defined in Base then it should be defined for OrderedDict also. Open a issue/PR to OrderedCollectons.jl?\n\nYou can probably make it work by defining\n"},{"type":"text","text":" Base.keytype(::Type{OrderedDict})=Any","style":{"code":true}}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ","reactions":[{"name":"+1","users":["UH8A351DJ","UPUBAM63X"],"count":2}]},{"client_msg_id":"13f7613e-2492-49a8-8e35-6c2ec07b7df2","type":"message","text":"wait, I'm being a small brain:\n```JSON3.read(read(a, String)) |&gt; OrderedDict```\nwill do. And OrderedDict is mutable already","user":"UH8A351DJ","ts":"1612120178.402400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wuRa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"wait, I'm being a small brain:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"JSON3.read(read(a, String)) |> OrderedDict"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"will do. And OrderedDict is mutable already"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ"},{"client_msg_id":"069747dd-1c2a-414e-adfb-ff8b8d69df3b","type":"message","text":"OrderedDict saves lives!","user":"UPUBAM63X","ts":"1612121140.402800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p/l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OrderedDict saves lives!"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ"},{"client_msg_id":"7bcae82a-d436-4171-b879-eee22d55df43","type":"message","text":"I’m pretty sure that the JSON standard states that those are supposed to be *unordered*","user":"UB7JS9CHF","ts":"1612145737.416700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eVgwg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m pretty sure that the JSON standard states that those are supposed to be "},{"type":"text","text":"unordered","style":{"bold":true}}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ","reactions":[{"name":"today-i-learned","users":["U6A936746"],"count":1}]},{"client_msg_id":"349a2bf4-a728-47ca-9f8e-dbdac9088ab6","type":"message","text":"(i.e. you should never rely on ordering being retained)","user":"UB7JS9CHF","ts":"1612145760.416900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NnAgR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(i.e. you should never rely on ordering being retained)"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ","reactions":[{"name":"correct_answer","users":["UPUBAM63X"],"count":1}]},{"client_msg_id":"0095be46-c5b1-42f2-9b36-a6e3be220c9d","type":"message","text":"<https://www.json.org/json-en.html>\nyou're right, good to know it wasn't technically my fault","user":"UH8A351DJ","ts":"1612151487.418100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B9nL","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://www.json.org/json-en.html"},{"type":"text","text":"\nyou're right, good to know it wasn't technically my fault"}]}]}],"thread_ts":"1612116179.399500","parent_user_id":"UH8A351DJ"}]