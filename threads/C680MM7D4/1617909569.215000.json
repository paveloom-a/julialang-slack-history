[{"client_msg_id":"bd9aa37e-fe46-4f70-bb14-bfc88342199e","type":"message","text":"Is anyone else too scared to comment on a github issue some times? I recently tried to help with some debugging, on a code base I have no idea about. I am quite certain what I commented may be obvious/wrong and now I feel like that comment will be there for eternity and my stupidity is archived for posterity.","user":"U010LT79LKX","ts":"1617909569.215000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3X2q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is anyone else too scared to comment on a github issue some times? I recently tried to help with some debugging, on a code base I have no idea about. I am quite certain what I commented may be obvious/wrong and now I feel like that comment will be there for eternity and my stupidity is archived for posterity."}]}]}],"thread_ts":"1617909569.215000","reply_count":27,"reply_users_count":3,"latest_reply":"1617912921.224700","reply_users":["U010LT79LKX","U9VG1AYSG","UC4QQPG4A"],"is_locked":false,"subscribed":false},{"client_msg_id":"805aa679-1b81-41ed-b45a-abee524e9d3c","type":"message","text":"I posted it anyways because I didn't think of the implications and now deleting it would be worse","user":"U010LT79LKX","ts":"1617909616.215500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r498","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I posted it anyways because I didn't think of the implications and now deleting it would be worse"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"c0d537dc-b821-4d63-908e-24b591bd2aef","type":"message","text":"I don't know if I'd put it quite that way, but I do sometimes find it rather hard to decide if a comment on an issue or PR is appropriate.  For one, if you are a user, it's pretty easy to come to the conclusion that something is wrong, or suboptimal, but to miss some crucial detail about the internals that may be relevant","user":"U9VG1AYSG","ts":"1617909744.215800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LDama","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't know if I'd put it quite that way, but I do sometimes find it rather hard to decide if a comment on an issue or PR is appropriate.  For one, if you are a user, it's pretty easy to come to the conclusion that something is wrong, or suboptimal, but to miss some crucial detail about the internals that may be relevant"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"81b39299-d43b-4266-a5fa-a48b85c28ed5","type":"message","text":"Telling my opinion is easier to deal with. If I am polite, most people don't mind. In fact I will end up learning something. But, its an issue like this comment of mine, where I am actually trying to do the debugging :stuck_out_tongue:\n<https://github.com/JuliaMath/Interpolations.jl/issues/396#issuecomment-815755838>","user":"U010LT79LKX","ts":"1617909958.216400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+aBy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Telling my opinion is easier to deal with. If I am polite, most people don't mind. In fact I will end up learning something. But, its an issue like this comment of mine, where I am actually trying to do the debugging "},{"type":"emoji","name":"stuck_out_tongue"},{"type":"text","text":"\n"},{"type":"link","url":"https://github.com/JuliaMath/Interpolations.jl/issues/396#issuecomment-815755838"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"6cd86a7d-5e0a-4681-bcac-fb7f0f81f1e7","type":"message","text":"If interpolations already has the gradients somewhere (<https://github.com/JuliaMath/Interpolations.jl/blob/ec3501365408df72396d8e5e3db59ca223ce766f/src/Interpolations.jl#L413>) then we just (TM) need to wrap it in `@adjoint`","user":"UC4QQPG4A","ts":"1617910287.216600","team":"T68168MUP","edited":{"user":"UC4QQPG4A","ts":"1617910300.000000"},"blocks":[{"type":"rich_text","block_id":"Oga","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If interpolations already has the gradients somewhere ("},{"type":"link","url":"https://github.com/JuliaMath/Interpolations.jl/blob/ec3501365408df72396d8e5e3db59ca223ce766f/src/Interpolations.jl#L413"},{"type":"text","text":") then we just (TM) need to wrap it in "},{"type":"text","text":"@adjoint","style":{"code":true}}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"da74f420-27c0-4336-bf29-d9b1849758e2","type":"message","text":"do you mean if I just add @adjoint to that line it will start working in flux?","user":"U010LT79LKX","ts":"1617910400.216900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"36Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"do you mean if I just add @adjoint to that line it will start working in flux?"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"d64f0b3c-83cb-4ca4-a2e0-a0de6224c4bc","type":"message","text":"I can test that and get back to you if you want. I already have some code to reproduce the error.","user":"U010LT79LKX","ts":"1617910427.217100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qac1v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can test that and get back to you if you want. I already have some code to reproduce the error."}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"5e8cb1cc-7a47-44b9-b118-b3acc9764faa","type":"message","text":"Oh not exactly. It would be something like\n```@adjoint function some_f_calling_interpolation(args....)\n  some_f(args...), d -&gt; gradient(itp, d, ...)\nend```\nSorry I haven’t used Interpolations.jl in a while. You could do something like `itp(x)` iirc","user":"UC4QQPG4A","ts":"1617910634.217500","team":"T68168MUP","edited":{"user":"UC4QQPG4A","ts":"1617910648.000000"},"blocks":[{"type":"rich_text","block_id":"jfEL/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh not exactly. It would be something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@adjoint function some_f_calling_interpolation(args....)\n  some_f(args...), d -> gradient(itp, d, ...)\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Sorry I haven’t used Interpolations.jl in a while. You could do something like "},{"type":"text","text":"itp(x)","style":{"code":true}},{"type":"text","text":" iirc"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"fd5ee288-3543-4424-b95e-b8a37c957d11","type":"message","text":"yes itp(x) interpolates at x","user":"U010LT79LKX","ts":"1617910671.218000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jWn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes itp(x) interpolates at x"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"2d166db4-a836-4d5d-8182-c23f86ae526e","type":"message","text":"can you point me to doc where the @adjoint thing is explained?","user":"U010LT79LKX","ts":"1617910706.218200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UmJw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you point me to doc where the @adjoint thing is explained?"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"9b08583e-c24e-45d3-82c8-ade1f2972e14","type":"message","text":"<https://fluxml.ai/Zygote.jl/latest/adjoints/#Custom-Adjoints-2>\n\nThat or defining an `rrule`","user":"UC4QQPG4A","ts":"1617910944.218600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"X4xwg","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://fluxml.ai/Zygote.jl/latest/adjoints/#Custom-Adjoints-2"},{"type":"text","text":"\n\nThat or defining an "},{"type":"text","text":"rrule","style":{"code":true}}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"b7a3e156-2799-4c61-b483-aab0ca436c40","type":"message","text":"thanks, I was searching for this in Flux documentation, of course its in Zygote","user":"U010LT79LKX","ts":"1617910998.218800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8mNc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks, I was searching for this in Flux documentation, of course its in Zygote"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"e87123ae-f4e6-470a-adac-08142b03404a","type":"message","text":"How does `itp(x)` relate to `interpolate` ?\n\nIs it `itp(x) == interpolate(x, itp)`?","user":"UC4QQPG4A","ts":"1617911022.219000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FD1N0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How does "},{"type":"text","text":"itp(x)","style":{"code":true}},{"type":"text","text":" relate to "},{"type":"text","text":"interpolate","style":{"code":true}},{"type":"text","text":" ?\n\nIs it "},{"type":"text","text":"itp(x) == interpolate(x, itp)","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"122b1a70-28da-4cfd-aae4-4d386648c791","type":"message","text":"no, interpolate is how you calculate itp. Then itp is called like a functor","user":"U010LT79LKX","ts":"1617911098.219200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XRi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, interpolate is how you calculate itp. Then itp is called like a functor"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"2e04ec7b-a8d8-4bc9-973b-ee3061f94df3","type":"message","text":"`itp = interpolate([1 2 3; 4 5 6], BSpline(Linear()));`","user":"U010LT79LKX","ts":"1617911131.219600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F6D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"itp = interpolate([1 2 3; 4 5 6], BSpline(Linear()));","style":{"code":true}}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"fc9fbaf4-b647-4971-aa59-420a5d142058","type":"message","text":"an example","user":"U010LT79LKX","ts":"1617911140.219800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"khY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"an example"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"6658406b-bfe0-44b5-baa1-8ad2a5a693e7","type":"message","text":"Ah that makes sense","user":"UC4QQPG4A","ts":"1617911145.220000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z40U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah that makes sense"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"cb1fc0a6-170f-45be-a767-20f04a328700","type":"message","text":"but then that functor could be wrapped with @adjoint, right?","user":"U010LT79LKX","ts":"1617911188.220200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8tBKx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but then that functor could be wrapped with @adjoint, right?"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"28f2e03e-f398-449e-8d55-81dea31ba50c","type":"message","text":"because gradient is defined for all abstract splines","user":"U010LT79LKX","ts":"1617911211.220600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OkN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"because gradient is defined for all abstract splines"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"7e62e735-adbc-4fdb-b620-107afd57b280","type":"message","text":"Right yeah so you’d want to wrap the function `itp(x)` calls because otherwise the syntax is abit different. Where is the `itp(x)` defined?","user":"UC4QQPG4A","ts":"1617911527.221300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l+Hx6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right yeah so you’d want to wrap the function "},{"type":"text","text":"itp(x)","style":{"code":true}},{"type":"text","text":" calls because otherwise the syntax is abit different. Where is the "},{"type":"text","text":"itp(x)","style":{"code":true}},{"type":"text","text":" defined?"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"b0e3d39e-359c-4342-a508-ba48b6f04fde","type":"message","text":"I have no idea about that","user":"U010LT79LKX","ts":"1617911545.221500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZSX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have no idea about that"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"0a7bf54d-8f0d-45ad-a688-3a8759925c4f","type":"message","text":"can I call which macro or something? I have my REPL open","user":"U010LT79LKX","ts":"1617911555.221700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Xeg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can I call which macro or something? I have my REPL open"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"1f33285b-657b-4ea7-977b-8f85e0310681","type":"message","text":"I would think so","user":"UC4QQPG4A","ts":"1617911577.221900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1nm6H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would think so"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"a83795a9-e2c1-4fce-9cf4-f8530f1baf95","type":"message","text":"<https://github.com/JuliaMath/Interpolations.jl/blob/ec3501365408df72396d8e5e3db59ca223ce766f/src/b-splines/indexing.jl#L5>","user":"U010LT79LKX","ts":"1617911703.222400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B5A+I","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaMath/Interpolations.jl/blob/ec3501365408df72396d8e5e3db59ca223ce766f/src/b-splines/indexing.jl#L5"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"5a82a95e-b111-4367-883e-9a90a417297c","type":"message","text":"this is what @which returned for a linear spline","user":"U010LT79LKX","ts":"1617911712.222600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ian","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is what @which returned for a linear spline"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"1c89420e-b83c-4dec-a6a3-e6e9a960fdf7","type":"message","text":"its that function for all models. so we just need to wrap that function","user":"U010LT79LKX","ts":"1617911870.223000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gxQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"its that function for all models. so we just need to wrap that function"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"38aef290-f7c3-4f56-89b7-7996b07e662d","type":"message","text":"I suppose it is then.  I would then write an rrule that goes something like\n```julia&gt; function rrule(itp::AbstractInterpolation, x...)\n         y = itp(x...)\n         function back(Δ)\n           (Composite{typeof(y)}(;coefs = Δ .* Interpolations.gradient(itp, x...)), ntuple(_ -&gt; DoesNotExist(), length(x))...)\n         end\n         y, back\n       end```\nI am not sure what all specifics will be needed, but it will be along these lines","user":"UC4QQPG4A","ts":"1617912744.224200","team":"T68168MUP","edited":{"user":"UC4QQPG4A","ts":"1617913084.000000"},"blocks":[{"type":"rich_text","block_id":"49sM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I suppose it is then.  I would then write an rrule that goes something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> function rrule(itp::AbstractInterpolation, x...)\n         y = itp(x...)\n         function back(Δ)\n           (Composite{typeof(y)}(;coefs = Δ .* Interpolations.gradient(itp, x...)), ntuple(_ -> DoesNotExist(), length(x))...)\n         end\n         y, back\n       end"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I am not sure what all specifics will be needed, but it will be along these lines"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"},{"client_msg_id":"1b6e8507-bcaa-46b8-8031-d325691f6b4d","type":"message","text":"I will cc <@U6PQP41C3> to check what I just wrote, because it is way past my bedtime rn :stuck_out_tongue:","user":"UC4QQPG4A","ts":"1617912921.224700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4Qr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I will cc "},{"type":"user","user_id":"U6PQP41C3"},{"type":"text","text":" to check what I just wrote, because it is way past my bedtime rn "},{"type":"emoji","name":"stuck_out_tongue"}]}]}],"thread_ts":"1617909569.215000","parent_user_id":"U010LT79LKX"}]