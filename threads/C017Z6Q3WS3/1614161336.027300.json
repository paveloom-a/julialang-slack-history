[{"client_msg_id":"ddb34f94-9062-4966-8a86-7ff755fbf90c","type":"message","text":"I tried to implement a button similar to `PlutoUI.Button` but with a different label and value:\n```begin\n\tstruct Button2\n\t\tlabel::String\n\t\tval::String\n\tend\n\tfunction Base.show(io::IO, ::MIME\"text/html\", button::Button2)\n\t\tprint(io, \"\"\"&lt;input type=\"button\" value=\"$(Markdown.htmlesc(button.label))\"&gt;\"\"\")\n\tend\n\tfunction Base.get(bt::Button2)\n\t\treturn bt.val\n\tend\nend```\nI can verify that the correct `get` method is called, and returns `bt.val` but for some reason the variable still gets assigned `bt.label`. What am I missing?","user":"U67SCG4HG","ts":"1614161336.027300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+jJWo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tried to implement a button similar to "},{"type":"text","text":"PlutoUI.Button","style":{"code":true}},{"type":"text","text":" but with a different label and value:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"begin\n\tstruct Button2\n\t\tlabel::String\n\t\tval::String\n\tend\n\tfunction Base.show(io::IO, ::MIME\"text/html\", button::Button2)\n\t\tprint(io, \"\"\"<input type=\"button\" value=\"$(Markdown.htmlesc(button.label))\">\"\"\")\n\tend\n\tfunction Base.get(bt::Button2)\n\t\treturn bt.val\n\tend\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I can verify that the correct "},{"type":"text","text":"get","style":{"code":true}},{"type":"text","text":" method is called, and returns "},{"type":"text","text":"bt.val","style":{"code":true}},{"type":"text","text":" but for some reason the variable still gets assigned "},{"type":"text","text":"bt.label","style":{"code":true}},{"type":"text","text":". What am I missing?"}]}]}],"thread_ts":"1614161336.027300","reply_count":6,"reply_users_count":2,"latest_reply":"1614174085.028600","reply_users":["U67SCG4HG","U0183UYP2FK"],"subscribed":false},{"type":"message","text":"","files":[{"id":"F01PJFFNY9F","created":1614161346,"timestamp":1614161346,"name":"Screenshot from 2021-02-24 11-08-20.png","title":"Screenshot from 2021-02-24 11-08-20.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U67SCG4HG","editable":false,"size":38856,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01PJFFNY9F/screenshot_from_2021-02-24_11-08-20.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01PJFFNY9F/download/screenshot_from_2021-02-24_11-08-20.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01PJFFNY9F-1c4ebcd8d6/screenshot_from_2021-02-24_11-08-20_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01PJFFNY9F-1c4ebcd8d6/screenshot_from_2021-02-24_11-08-20_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01PJFFNY9F-1c4ebcd8d6/screenshot_from_2021-02-24_11-08-20_360.png","thumb_360_w":360,"thumb_360_h":179,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01PJFFNY9F-1c4ebcd8d6/screenshot_from_2021-02-24_11-08-20_480.png","thumb_480_w":480,"thumb_480_h":239,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01PJFFNY9F-1c4ebcd8d6/screenshot_from_2021-02-24_11-08-20_160.png","original_w":718,"original_h":357,"thumb_tiny":"AwAXADDSNID70vHSjHvQAZFGaMUtACUtFFADcc9KXH1o70tACUtFFABRRRQB/9k=","permalink":"https://julialang.slack.com/files/U67SCG4HG/F01PJFFNY9F/screenshot_from_2021-02-24_11-08-20.png","permalink_public":"https://slack-files.com/T68168MUP-F01PJFFNY9F-8244c55908","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"U67SCG4HG","display_as_bot":false,"ts":"1614161350.027400","thread_ts":"1614161336.027300","parent_user_id":"U67SCG4HG"},{"client_msg_id":"51bcf223-a197-4857-b9b1-f949e63b05fa","type":"message","text":"Looking at the macro expansion I don't understand what can be wrong:\n```quote\n    #= /home/fredrik/.julia/packages/Pluto/uSLhP/src/runner/PlutoRunner.jl:1116 =#\n    local var\"#174#el\" = Button2(\"label\", \"value\")\n    #= /home/fredrik/.julia/packages/Pluto/uSLhP/src/runner/PlutoRunner.jl:1117 =#\n    global variable2 = if (Main.PlutoRunner.Core).applicable((Main.PlutoRunner.Base).get, var\"#174#el\")\n                (Main.PlutoRunner.Base).get(var\"#174#el\")\n            else\n                Main.PlutoRunner.missing\n            end\n    #= /home/fredrik/.julia/packages/Pluto/uSLhP/src/runner/PlutoRunner.jl:1118 =#\n    (Main.PlutoRunner.PlutoRunner).Bond(var\"#174#el\", :variable2)\nend```\n","user":"U67SCG4HG","ts":"1614161757.027800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mGH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looking at the macro expansion I don't understand what can be wrong:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"quote\n    #= /home/fredrik/.julia/packages/Pluto/uSLhP/src/runner/PlutoRunner.jl:1116 =#\n    local var\"#174#el\" = Button2(\"label\", \"value\")\n    #= /home/fredrik/.julia/packages/Pluto/uSLhP/src/runner/PlutoRunner.jl:1117 =#\n    global variable2 = if (Main.PlutoRunner.Core).applicable((Main.PlutoRunner.Base).get, var\"#174#el\")\n                (Main.PlutoRunner.Base).get(var\"#174#el\")\n            else\n                Main.PlutoRunner.missing\n            end\n    #= /home/fredrik/.julia/packages/Pluto/uSLhP/src/runner/PlutoRunner.jl:1118 =#\n    (Main.PlutoRunner.PlutoRunner).Bond(var\"#174#el\", :variable2)\nend"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1614161336.027300","parent_user_id":"U67SCG4HG"},{"client_msg_id":"ecd11730-8582-4880-b473-9d02481b584f","type":"message","text":"It literally assigns `variable2` to the value of `get(...)`...\nIs there something happening in the `Bond` here that updates the variable to something else?","user":"U67SCG4HG","ts":"1614161807.028000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pYa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It literally assigns "},{"type":"text","text":"variable2","style":{"code":true}},{"type":"text","text":" to the value of "},{"type":"text","text":"get(...)","style":{"code":true}},{"type":"text","text":"...\nIs there something happening in the "},{"type":"text","text":"Bond","style":{"code":true}},{"type":"text","text":" here that updates the variable to something else?"}]}]}],"thread_ts":"1614161336.027300","parent_user_id":"U67SCG4HG"},{"client_msg_id":"b5673616-6568-4c07-b22d-ed7ec0ff0a12","type":"message","text":"Okay, so evaluating the macroexpnaded code line by line confirms that before `Bond(...)` the value is correct, but after it is wrong.","user":"U67SCG4HG","ts":"1614163026.028200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qtb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Okay, so evaluating the macroexpnaded code line by line confirms that before "},{"type":"text","text":"Bond(...)","style":{"code":true}},{"type":"text","text":" the value is correct, but after it is wrong."}]}]}],"thread_ts":"1614161336.027300","parent_user_id":"U67SCG4HG"},{"client_msg_id":"51883BA3-8F7F-432B-99E1-E08505DEDD4E","type":"message","text":"Isn’t the `get` function only for the default value? Pluto binds the julia variable to the value in the first html element, which is why “label” was assigned instead of the number of times the button was pressed. I believe, to get the behavior you want, you would have to put a div that contains the value you want to bind to the variable *before* the button :)","user":"U0183UYP2FK","ts":"1614173823.028400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9KV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Isn’t the "},{"type":"text","text":"get","style":{"code":true}},{"type":"text","text":" function only for the default value? Pluto binds the julia variable to the value in the first html element, which is why “label” was assigned instead of the number of times the button was pressed. I believe, to get the behavior you want, you would have to put a div that contains the value you want to bind to the variable "},{"type":"text","text":"before","style":{"bold":true}},{"type":"text","text":" the button :)"}]}]}],"thread_ts":"1614161336.027300","parent_user_id":"U67SCG4HG"},{"client_msg_id":"1c6f8d1c-3088-4291-82e7-be1130c26290","type":"message","text":"Yea I figured that out. Bit strange that the `@bind` macro calls `get` at all then, that's what caught me off guard.","user":"U67SCG4HG","ts":"1614174085.028600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=xDL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yea I figured that out. Bit strange that the "},{"type":"text","text":"@bind","style":{"code":true}},{"type":"text","text":" macro calls "},{"type":"text","text":"get","style":{"code":true}},{"type":"text","text":" at all then, that's what caught me off guard."}]}]}],"thread_ts":"1614161336.027300","parent_user_id":"U67SCG4HG","reactions":[{"name":"+1","users":["U0183UYP2FK","UH8A351DJ"],"count":2}]}]