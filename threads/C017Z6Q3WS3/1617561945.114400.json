[{"client_msg_id":"13c15a63-b60e-4b9f-bb03-93755202d2ea","type":"message","text":"How breaking will it be when package management gets included into pluto? A major scenario I have in mind is `include(\"../startup.jl\")` in notebooks, with startup.jl in the project directory with something like\n```import Pkg\nPkg.activate(...)\n\nusing ...\nusing ...```\nWill it continue working?","user":"UGTUKUHLN","ts":"1617561945.114400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VJuK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How breaking will it be when package management gets included into pluto? A major scenario I have in mind is "},{"type":"text","text":"include(\"../startup.jl\")","style":{"code":true}},{"type":"text","text":" in notebooks, with startup.jl in the project directory with something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"import Pkg\nPkg.activate(...)\n\nusing ...\nusing ..."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Will it continue working?"}]}]}],"thread_ts":"1617561945.114400","reply_count":6,"reply_users_count":2,"latest_reply":"1617720240.126800","reply_users":["UUTL3EKN3","UGTUKUHLN"],"is_locked":false,"subscribed":false},{"client_msg_id":"0776930a-cfc1-4d24-8fd2-407a986fab53","type":"message","text":"inlcuding a Pkg.activate call in your notebook will be the magic keyword to disable the new package manager. i had not considered this use case, but i dont think it will be easy to detect and support properly","user":"UUTL3EKN3","ts":"1617650885.121700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qG3/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"inlcuding a Pkg.activate call in your notebook will be the magic keyword to disable the new package manager. i had not considered this use case, but i dont think it will be easy to detect and support properly"}]}]}],"thread_ts":"1617561945.114400","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"cb558f80-3000-4c31-b89a-3fd55b146d3f","type":"message","text":"i guess you can change it to\n\n```begin\nimport Pkg\nPkg.activate()\ninclude(...)\nend```\nand that will work","user":"UUTL3EKN3","ts":"1617650929.121900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E38j+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"i guess you can change it to\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"begin\nimport Pkg\nPkg.activate()\ninclude(...)\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and that will work"}]}]}],"thread_ts":"1617561945.114400","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"ca9edfd2-59d3-4b70-979a-4a81a9fd1d62","type":"message","text":"Oh, that's unfortunate...\nCurrently I just put `include(\"../startup.jl\")` into all my notebooks and scripts. `startup.jl` contains `Pkg.activate` call and main project-specific imports so that not to repeat them everywhere.","user":"UGTUKUHLN","ts":"1617706720.126100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dAXg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, that's unfortunate...\nCurrently I just put "},{"type":"text","text":"include(\"../startup.jl\")","style":{"code":true}},{"type":"text","text":" into all my notebooks and scripts. "},{"type":"text","text":"startup.jl","style":{"code":true}},{"type":"text","text":" contains "},{"type":"text","text":"Pkg.activate","style":{"code":true}},{"type":"text","text":" call and main project-specific imports so that not to repeat them everywhere."}]}]}],"thread_ts":"1617561945.114400","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"d54e23cc-3d23-4afe-82f3-ff9ff8f888e9","type":"message","text":"Do you think an option to `Pluto.run` like `disable_pkg_magic=true` is feasible?","user":"UGTUKUHLN","ts":"1617706756.126300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ym3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you think an option to "},{"type":"text","text":"Pluto.run","style":{"code":true}},{"type":"text","text":" like "},{"type":"text","text":"disable_pkg_magic=true","style":{"code":true}},{"type":"text","text":" is feasible?"}]}]}],"thread_ts":"1617561945.114400","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"f3be93f8-164c-44cc-b442-c4fcd1dff71c","type":"message","text":"it’s not, because it breaks the design goal of making a notebook file a self-descriptive unit of reproducibility. what are your concerns with my suggested solution?","user":"UUTL3EKN3","ts":"1617713693.126600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=/Lc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it’s not, because it breaks the design goal of making a notebook file a self-descriptive unit of reproducibility. what are your concerns with my suggested solution?"}]}]}],"thread_ts":"1617561945.114400","parent_user_id":"UGTUKUHLN"},{"client_msg_id":"27ccf09e-2665-4f45-84b9-8858f5b4e0a6","type":"message","text":"Two concerns: it breaks all existing notebooks which rely on a Pkg environment specified in some `include`d file; it forces adding several boilerplate lines to every notebook that is a part of a larger project - `include(\"../startup.jl\")` vs\n```begin\nimport Pkg\nPkg.activate()\ninclude(\"../startup.jl\")\nend```\nAnd making notebooks completely self-contained and reproducible is not possible anyway, outside of simple cases. Analysis code relies on datasets existing somewhere in the file system, on source files that are not a part of a versioned package (but part of a git-backed local Project), etc. So I don't see any UX issues with allowing users to opt-out of the Pluto's Pkg magic. Those who like normal Julia Pkg environments with Project and Manifest files would just specify this option and be done.","user":"UGTUKUHLN","ts":"1617720240.126800","team":"T68168MUP","edited":{"user":"UGTUKUHLN","ts":"1617720454.000000"},"blocks":[{"type":"rich_text","block_id":"dygX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Two concerns: it breaks all existing notebooks which rely on a Pkg environment specified in some "},{"type":"text","text":"include","style":{"code":true}},{"type":"text","text":"d file; it forces adding several boilerplate lines to every notebook that is a part of a larger project - "},{"type":"text","text":"include(\"../startup.jl\")","style":{"code":true}},{"type":"text","text":" vs\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"begin\nimport Pkg\nPkg.activate()\ninclude(\"../startup.jl\")\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"And making notebooks completely self-contained and reproducible is not possible anyway, outside of simple cases. Analysis code relies on datasets existing somewhere in the file system, on source files that are not a part of a versioned package (but part of a git-backed local Project), etc. So I don't see any UX issues with allowing users to opt-out of the Pluto's Pkg magic. Those who like normal Julia Pkg environments with Project and Manifest files would just specify this option and be done."}]}]}],"thread_ts":"1617561945.114400","parent_user_id":"UGTUKUHLN"}]