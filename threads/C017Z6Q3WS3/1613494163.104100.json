[{"client_msg_id":"884c5823-ea08-46ff-a554-3aa7fc1c301e","type":"message","text":"So Iâ€™m trying to setup a pluto static HTML export github action for Yao.jl tutorial, but I need to insert a nav bar on the top of the pluto HTML. but Iâ€™m not sure where Pluto emits the HTML? anyone can guide me to the related lines of code in Pluto so I can make a PR to support this?","user":"UC6SUUPRC","ts":"1613494163.104100","team":"T68168MUP","edited":{"user":"UC6SUUPRC","ts":"1613494179.000000"},"blocks":[{"type":"rich_text","block_id":"cpLa+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So Iâ€™m trying to setup a pluto static HTML export github action for Yao.jl tutorial, but I need to insert a nav bar on the top of the pluto HTML. but Iâ€™m not sure where Pluto emits the HTML? anyone can guide me to the related lines of code in Pluto so I can make a PR to support this?"}]}]}],"thread_ts":"1613494163.104100","reply_count":10,"reply_users_count":3,"latest_reply":"1613511554.106700","reply_users":["UH8A351DJ","UCD4Z3NJZ","UC6SUUPRC"],"subscribed":false},{"client_msg_id":"7a1797fc-4807-4092-82df-9f870bd13a1c","type":"message","text":"hack: put a cell at the top of every notebook for navigation purpose?","user":"UH8A351DJ","ts":"1613496336.104300","team":"T68168MUP","edited":{"user":"UH8A351DJ","ts":"1613496345.000000"},"blocks":[{"type":"rich_text","block_id":"k35h","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hack: put a cell at the top of every notebook for navigation purpose?"}]}]}],"thread_ts":"1613494163.104100","parent_user_id":"UC6SUUPRC"},{"client_msg_id":"69f5a26c-7fc4-4ec3-968e-5546dc3a7183","type":"message","text":"The HTML code of Pluto notebook looks very simple, what about parsing it to XML first, remove the &lt;html&gt; tags et. al, and then render it back to html?","user":"UCD4Z3NJZ","ts":"1613509722.104600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fn9wb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The HTML code of Pluto notebook looks very simple, what about parsing it to XML first, remove the <html> tags et. al, and then render it back to html?"}]}]}],"thread_ts":"1613494163.104100","parent_user_id":"UC6SUUPRC"},{"client_msg_id":"a85f8ad2-ccc7-4977-932f-b287f1204ddd","type":"message","text":"This is a sample of generated html file: view-source:<https://giggleliu.github.io/NiLang.jl/dev/notebooks/documentation.html> , it has only 68 lines of code.","user":"UCD4Z3NJZ","ts":"1613509848.104800","team":"T68168MUP","edited":{"user":"UCD4Z3NJZ","ts":"1613509864.000000"},"attachments":[{"title":":zap: Pluto.jl :zap:","title_link":"https://giggleliu.github.io/NiLang.jl/dev/notebooks/documentation.html","text":"Pluto.jl notebooks","fallback":"âš¡ Pluto.jl âš¡","from_url":"https://giggleliu.github.io/NiLang.jl/dev/notebooks/documentation.html","service_icon":"https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/img/favicon-16x16.png","service_name":"giggleliu.github.io","id":1,"original_url":"https://giggleliu.github.io/NiLang.jl/dev/notebooks/documentation.html"}],"blocks":[{"type":"rich_text","block_id":"X=Z5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This is a sample of generated html file: view-source:"},{"type":"link","url":"https://giggleliu.github.io/NiLang.jl/dev/notebooks/documentation.html"},{"type":"text","text":" , it has only 68 lines of code."}]}]}],"thread_ts":"1613494163.104100","parent_user_id":"UC6SUUPRC"},{"client_msg_id":"b12f4ed7-3277-41dd-a4a6-5bfe827a24d2","type":"message","text":"<@UC6SUUPRC> Can you provide a link to your template file (an how it is rendered)? Let me see if I can help","user":"UCD4Z3NJZ","ts":"1613509895.105200","team":"T68168MUP","edited":{"user":"UCD4Z3NJZ","ts":"1613509931.000000"},"blocks":[{"type":"rich_text","block_id":"94GP","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UC6SUUPRC"},{"type":"text","text":" Can you provide a link to your template file (an how it is rendered)? Let me see if I can help"}]}]}],"thread_ts":"1613494163.104100","parent_user_id":"UC6SUUPRC"},{"client_msg_id":"c5b2112d-4bc9-4e2e-bb7c-ea0a972e4457","type":"message","text":"currently I insert the nav bar into Documenter and Literate generated Jupyter Notebooks, so Iâ€™m trying to do the same for Pluto: <https://github.com/QuantumBFS/tutorials/blob/master/make.jl#L12>","user":"UC6SUUPRC","ts":"1613509993.105600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rVK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"currently I insert the nav bar into Documenter and Literate generated Jupyter Notebooks, so Iâ€™m trying to do the same for Pluto: "},{"type":"link","url":"https://github.com/QuantumBFS/tutorials/blob/master/make.jl#L12"}]}]}],"thread_ts":"1613494163.104100","parent_user_id":"UC6SUUPRC"},{"client_msg_id":"0ff1834b-71f5-483f-b9b4-8a3fc1485ad0","type":"message","text":"<@UH8A351DJ> I think then you will download the nav bar too when you download the notebook, which is kinda strangeâ€¦","user":"UC6SUUPRC","ts":"1613510034.105800","team":"T68168MUP","edited":{"user":"UC6SUUPRC","ts":"1613510041.000000"},"blocks":[{"type":"rich_text","block_id":"xFyIb","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UH8A351DJ"},{"type":"text","text":" I think then you will download the nav bar too when you download the notebook, which is kinda strangeâ€¦"}]}]}],"thread_ts":"1613494163.104100","parent_user_id":"UC6SUUPRC"},{"client_msg_id":"4e9ed963-fcb5-478c-9b0d-1fafe78416fa","type":"message","text":"yeah I guess but it's just a html/markdown cell, which is easy enough to `;` or delete by the \"user\"","user":"UH8A351DJ","ts":"1613510998.106100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VCblZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah I guess but it's just a html/markdown cell, which is easy enough to "},{"type":"text","text":";","style":{"code":true}},{"type":"text","text":" or delete by the \"user\""}]}]}],"thread_ts":"1613494163.104100","parent_user_id":"UC6SUUPRC"},{"client_msg_id":"62678922-4399-40d1-ac75-6399f4926771","type":"message","text":"ok I guess the true reason is Iâ€™m too lazy to copy paste this for tons of pluto notebooks in our tutorialâ€¦ but yeah I agree this could be a workaround","user":"UC6SUUPRC","ts":"1613511305.106300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ofc3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok I guess the true reason is Iâ€™m too lazy to copy paste this for tons of pluto notebooks in our tutorialâ€¦ but yeah I agree this could be a workaround"}]}]}],"thread_ts":"1613494163.104100","parent_user_id":"UC6SUUPRC"},{"client_msg_id":"abb27572-48c1-4e56-a38d-14a2858b1624","type":"message","text":"```using Gumbo\n\nconst pluto_html = raw\"\"\"\n<!DOCTYPE html>\n&lt;html lang=\"en\"&gt;\n\n&lt;head&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width\" /&gt;\n    &lt;title&gt;âš¡ Pluto.jl âš¡&lt;/title&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;script&gt;\n        console.log(\"Pluto.jl, by Fons van der Plas (<https://github.com/fonsp>) and MikoÅ‚aj Bochenski (<https://github.com/malyvsen>) ðŸŒˆ\")\n    &lt;/script&gt;\n    &lt;meta name=\"author\" content=\"Fons van der Plas; MikoÅ‚aj Bochenski\" /&gt;\n    &lt;link rel=\"license\" href=\"<https://github.com/fonsp/Pluto.jl/blob/master/LICENSE>\" /&gt;\n    &lt;meta name=\"theme-color\" content=\"#ffffff\" /&gt;\n    &lt;link rel=\"pluto-logo-small\" href=\"<https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/img/favicon_unsaturated.svg>\" /&gt;\n\n    &lt;link rel=\"pluto-sw\" href=\"<https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/sw.js>\" /&gt;\n    &lt;script&gt;\n        navigator.serviceWorker?.register(document.head.querySelector(\"link[rel='pluto-sw']\").getAttribute(\"href\"), { scope: \"./\" }).catch(console.warn)\n    &lt;/script&gt;\n\n    &lt;script src=\"<https://cdn.jsdelivr.net/npm/lodash@4.17.20/lodash.min.js>\" defer&gt;&lt;/script&gt;\n    &lt;script src=\"<https://cdn.jsdelivr.net/npm/@observablehq/stdlib@3.3.1/dist/stdlib.js>\" defer&gt;&lt;/script&gt;\n    &lt;script src=\"<https://cdn.jsdelivr.net/npm/iframe-resizer@4.2.11/js/iframeResizer.min.js>\" defer&gt;&lt;/script&gt;\n    &lt;script data-pluto-file=\"launch-parameters\"&gt;\nwindow.pluto_notebookfile = undefined\nwindow.pluto_disable_ui = true\nwindow.pluto_bind_server_url = undefined\nwindow.pluto_binder_url = undefined\n&lt;/script&gt;\n&lt;!-- [automatically generated launch parameters can be inserted here] --&gt;\n\n\n    &lt;script src=\"<https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/editor.js>\" type=\"module\" defer&gt;&lt;/script&gt;\n    &lt;script src=\"<https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/warn_old_browsers.js>\"&gt;&lt;/script&gt;\n\n    &lt;script src=\"<https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/common/SetupMathJax.js>\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" id=\"MathJax-script\" src=\"<https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg-full.js>\" async&gt;&lt;/script&gt;\n\n&lt;/head&gt;\n\n&lt;body class=\"loading no-MÎ±Î¸Jax\"&gt;&lt;/body&gt;\n\n&lt;/html&gt;\n\"\"\"\n\nh = parsehtml(pluto_html)\n\nconst base_url = raw\"<https://yaoquantum.org>\"\n\ntop_nav = parsehtml(\"\"\"\n&lt;div id=\"top\" class=\"navbar-wrapper\"&gt;\n&lt;nav class=\"navbar fixed-top navbar-expand-lg navbar-dark\"&gt;\n    &lt;a class=\"navbar-brand\" href=\"$base_url\"&gt;\n        &lt;img src=\"$base_url/assets/images/logo-light.png\"&gt;\n    &lt;/a&gt;\n    &lt;button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"&gt;\n      &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n    &lt;/button&gt;\n  \n    &lt;div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\"&gt;\n      &lt;ul class=\"navbar-nav mr-auto\"&gt;\n        &lt;li class=\"nav-item active\"&gt;\n          &lt;a class=\"nav-link\" href=\"#\"&gt;Tutorial&lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item\"&gt;\n            &lt;a class=\"nav-link\" href=\"<https://docs.yaoquantum.org/dev>\"&gt;Documentation&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item\"&gt;\n            &lt;a class=\"nav-link\" href=\"$base_url/benchmark\"&gt;Benchmark&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item\"&gt;\n          &lt;a class=\"nav-link\" href=\"<http://yaoquantum.org/soc>\"&gt;SoC&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item\"&gt;\n          &lt;a class=\"nav-link\" href=\"<http://yaoquantum.org/research>\"&gt;Research&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item\"&gt;\n            &lt;a class=\"nav-link\" href=\"<https://github.com/QuantumBFS/Yao.jl>\"&gt;GitHub&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"nav-item\"&gt;\n          &lt;a class=\"nav-link\" href=\"<https://github.com/QuantumBFS/Yao.jl/blob/master/CONTRIBUTING.md>\"&gt;Contribute&lt;/a&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;/nav&gt;\n&lt;/div&gt;\n\"\"\").root.children[2].children[1]\n\nbody = h.root.children[2]\npush!(body.children, top_nav)\npluto_html_withnavigator = string(h)```","user":"UCD4Z3NJZ","ts":"1613511554.106500","team":"T68168MUP","edited":{"user":"UCD4Z3NJZ","ts":"1613511603.000000"},"blocks":[{"type":"rich_text","block_id":"bIAC","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Gumbo\n\nconst pluto_html = raw\"\"\"\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta name=\"viewport\" content=\"width=device-width\" />\n    <title>âš¡ Pluto.jl âš¡</title>\n    <meta charset=\"utf-8\" />\n    <script>\n        console.log(\"Pluto.jl, by Fons van der Plas ("},{"type":"link","url":"https://github.com/fonsp"},{"type":"text","text":") and MikoÅ‚aj Bochenski ("},{"type":"link","url":"https://github.com/malyvsen"},{"type":"text","text":") ðŸŒˆ\")\n    </script>\n    <meta name=\"author\" content=\"Fons van der Plas; MikoÅ‚aj Bochenski\" />\n    <link rel=\"license\" href=\""},{"type":"link","url":"https://github.com/fonsp/Pluto.jl/blob/master/LICENSE"},{"type":"text","text":"\" />\n    <meta name=\"theme-color\" content=\"#ffffff\" />\n    <link rel=\"pluto-logo-small\" href=\""},{"type":"link","url":"https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/img/favicon_unsaturated.svg"},{"type":"text","text":"\" />\n\n    <link rel=\"pluto-sw\" href=\""},{"type":"link","url":"https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/sw.js"},{"type":"text","text":"\" />\n    <script>\n        navigator.serviceWorker?.register(document.head.querySelector(\"link[rel='pluto-sw']\").getAttribute(\"href\"), { scope: \"./\" }).catch(console.warn)\n    </script>\n\n    <script src=\""},{"type":"link","url":"https://cdn.jsdelivr.net/npm/lodash@4.17.20/lodash.min.js"},{"type":"text","text":"\" defer></script>\n    <script src=\""},{"type":"link","url":"https://cdn.jsdelivr.net/npm/@observablehq/stdlib@3.3.1/dist/stdlib.js"},{"type":"text","text":"\" defer></script>\n    <script src=\""},{"type":"link","url":"https://cdn.jsdelivr.net/npm/iframe-resizer@4.2.11/js/iframeResizer.min.js"},{"type":"text","text":"\" defer></script>\n    <script data-pluto-file=\"launch-parameters\">\nwindow.pluto_notebookfile = undefined\nwindow.pluto_disable_ui = true\nwindow.pluto_bind_server_url = undefined\nwindow.pluto_binder_url = undefined\n</script>\n<!-- [automatically generated launch parameters can be inserted here] -->\n\n\n    <script src=\""},{"type":"link","url":"https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/editor.js"},{"type":"text","text":"\" type=\"module\" defer></script>\n    <script src=\""},{"type":"link","url":"https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/warn_old_browsers.js"},{"type":"text","text":"\"></script>\n\n    <script src=\""},{"type":"link","url":"https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@05e5b68/frontend/common/SetupMathJax.js"},{"type":"text","text":"\"></script>\n    <script type=\"text/javascript\" id=\"MathJax-script\" src=\""},{"type":"link","url":"https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg-full.js"},{"type":"text","text":"\" async></script>\n\n</head>\n\n<body class=\"loading no-MÎ±Î¸Jax\"></body>\n\n</html>\n\"\"\"\n\nh = parsehtml(pluto_html)\n\nconst base_url = raw\""},{"type":"link","url":"https://yaoquantum.org"},{"type":"text","text":"\"\n\ntop_nav = parsehtml(\"\"\"\n<div id=\"top\" class=\"navbar-wrapper\">\n<nav class=\"navbar fixed-top navbar-expand-lg navbar-dark\">\n    <a class=\"navbar-brand\" href=\"$base_url\">\n        <img src=\"$base_url/assets/images/logo-light.png\">\n    </a>\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n      <span class=\"navbar-toggler-icon\"></span>\n    </button>\n  \n    <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n      <ul class=\"navbar-nav mr-auto\">\n        <li class=\"nav-item active\">\n          <a class=\"nav-link\" href=\"#\">Tutorial<span class=\"sr-only\">(current)</span></a>\n        </li>\n        <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\""},{"type":"link","url":"https://docs.yaoquantum.org/dev"},{"type":"text","text":"\">Documentation</a>\n        </li>\n        <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"$base_url/benchmark\">Benchmark</a>\n        </li>\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\""},{"type":"link","url":"http://yaoquantum.org/soc"},{"type":"text","text":"\">SoC</a>\n        </li>\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\""},{"type":"link","url":"http://yaoquantum.org/research"},{"type":"text","text":"\">Research</a>\n        </li>\n        <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\""},{"type":"link","url":"https://github.com/QuantumBFS/Yao.jl"},{"type":"text","text":"\">GitHub</a>\n        </li>\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\""},{"type":"link","url":"https://github.com/QuantumBFS/Yao.jl/blob/master/CONTRIBUTING.md"},{"type":"text","text":"\">Contribute</a>\n        </li>\n      </ul>\n    </div>\n</nav>\n</div>\n\"\"\").root.children[2].children[1]\n\nbody = h.root.children[2]\npush!(body.children, top_nav)\npluto_html_withnavigator = string(h)"}]}]}],"thread_ts":"1613494163.104100","parent_user_id":"UC6SUUPRC"},{"client_msg_id":"abb27572-48c1-4e56-a38d-14a2858b1624","type":"message","text":"Here is a demo, I didn't really tried deploying this, but I suppose it should work. I think what you need to do is insert the navigator to the right children of the parsed HTML node.","user":"UCD4Z3NJZ","ts":"1613511554.106700","team":"T68168MUP","edited":{"user":"UCD4Z3NJZ","ts":"1613511628.000000"},"blocks":[{"type":"rich_text","block_id":"KHHXy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here is a demo, I didn't really tried deploying this, but I suppose it should work. I think what you need to do is insert the navigator to the right children of the parsed HTML node."}]}]}],"thread_ts":"1613494163.104100","parent_user_id":"UC6SUUPRC","reactions":[{"name":"+1","users":["UC6SUUPRC"],"count":1}]}]