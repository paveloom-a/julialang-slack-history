[{"type":"message","text":"Can somebody explain, why sending a batch of WebSocket messages from browser to wsserver (Julia, HTTP.jl) has the following effects:\n1. If multiple messages are sent in a cycle (in one JS task?), then time from the first request (from browser) to the first response (from server) is delayed to ~300ms (see first screenshot).\n2. If multiple messages are sent, each wrapped into `setInterval` (from different browser tasks?), then the time from the first request to the first response is normal about ~30ms, but messages sent with high rate are consuming websocket channel bandwidth(?), so that response rate is lower and thus responses are delayed longer and longer after a bunch of requests (see second screenshot).\nSo, how should I balance them to get a constant response delay at some fixed message rate?","files":[{"id":"F01QNCUGJGZ","created":1614929671,"timestamp":1614929671,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"UB2QSHWPN","editable":false,"size":277176,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01QNCUGJGZ/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01QNCUGJGZ/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01QNCUGJGZ-439cbd9cf1/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01QNCUGJGZ-439cbd9cf1/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01QNCUGJGZ-439cbd9cf1/image_360.png","thumb_360_w":349,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01QNCUGJGZ-439cbd9cf1/image_480.png","thumb_480_w":465,"thumb_480_h":480,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01QNCUGJGZ-439cbd9cf1/image_160.png","original_w":668,"original_h":689,"thumb_tiny":"AwAwAC6jRRRQA9ACOacQAKYvSlNKwrDiBim4FB6GmUWCwUUUUxjl6UppF6UpFAAehplSEcGmYNABj24peKOMUmaAFzjpRknvSZ+lJQA7J9aSkooA/9k=","permalink":"https://julialang.slack.com/files/UB2QSHWPN/F01QNCUGJGZ/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01QNCUGJGZ-2ae3338f16","is_starred":false,"has_rich_preview":false},{"id":"F01QNCYS341","created":1614929775,"timestamp":1614929775,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"UB2QSHWPN","editable":false,"size":428326,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01QNCYS341/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01QNCYS341/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01QNCYS341-e39f4cd6e8/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01QNCYS341-e39f4cd6e8/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01QNCYS341-e39f4cd6e8/image_360.png","thumb_360_w":360,"thumb_360_h":316,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01QNCYS341-e39f4cd6e8/image_480.png","thumb_480_w":480,"thumb_480_h":422,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01QNCYS341-e39f4cd6e8/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01QNCYS341-e39f4cd6e8/image_720.png","thumb_720_w":720,"thumb_720_h":633,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01QNCYS341-e39f4cd6e8/image_800.png","thumb_800_w":800,"thumb_800_h":703,"original_w":817,"original_h":718,"thumb_tiny":"AwAqADCjRRRQBIoBUZFLgZ6UL90cUfxdKkQhAzSYpW69KT8KBDKKXBowaooeo+XvRj5u9CtgdRRuGeopCEYc96TH1pSeeopM/SlqAe+KX8P1plFUMcf880maSigBc0ZpKKAP/9k=","permalink":"https://julialang.slack.com/files/UB2QSHWPN/F01QNCYS341/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01QNCYS341-d7d4f94476","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"qTjJQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can somebody explain, why sending a batch of WebSocket messages from browser to wsserver (Julia, HTTP.jl) has the following effects:\n"}]},{"type":"rich_text_list","style":"ordered","indent":0,"elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If multiple messages are sent in a cycle (in one JS task?), then time from the first request (from browser) to the first response (from server) is delayed to ~300ms (see first screenshot)."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"If multiple messages are sent, each wrapped into "},{"type":"text","text":"setInterval","style":{"code":true}},{"type":"text","text":" (from different browser tasks?), then the time from the first request to the first response is normal about ~30ms, but messages sent with high rate are consuming websocket channel bandwidth(?), so that response rate is lower and thus responses are delayed longer and longer after a bunch of requests (see second screenshot)."}]}]},{"type":"rich_text_section","elements":[{"type":"text","text":"So, how should I balance them to get a constant response delay at some fixed message rate?"}]}]}],"user":"UB2QSHWPN","ts":"1614929782.029700","edited":{"user":"UB2QSHWPN","ts":"1614929858.000000"},"thread_ts":"1614929782.029700","reply_count":1,"reply_users_count":1,"latest_reply":"1615801509.002400","reply_users":["U0176DTGS76"],"subscribed":false},{"client_msg_id":"64b74b15-7806-4272-b665-ccdd183a85a1","type":"message","text":"did you solve your issue? I was curious as to whether you have some browser compiling a frequently repeated task…","user":"U0176DTGS76","ts":"1615801509.002400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Yd1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"did you solve your issue? I was curious as to whether you have some browser compiling a frequently repeated task…"}]}]}],"thread_ts":"1614929782.029700","parent_user_id":"UB2QSHWPN"}]