[{"client_msg_id":"cea42725-25f4-4d1e-8632-780126de33f0","type":"message","text":"Does anyone know how `Statistics.quantile` treats `NaN` and why?\n```julia&gt; using StatsBase\njulia&gt; b = rand(20,20)\njulia&gt; b[3,3] = NaN\njulia&gt; quantile(vec(b), 0.5)\n0.5152183269708394\n\njulia&gt; quantile(b[isfinite.(b)], 0.5)\n0.5118644684150617```\nThe numbers differ - not really sure why?\n\nThe docs <https://docs.julialang.org/en/v1/stdlib/Statistics/#Statistics.quantile> mysteriously say “An ArgumentError is thrown if v contains NaN or missing values.”","user":"U73KENNG4","ts":"1613114642.082600","team":"T68168MUP","edited":{"user":"U73KENNG4","ts":"1613115819.000000"},"blocks":[{"type":"rich_text","block_id":"C5/K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does anyone know how "},{"type":"text","text":"Statistics.quantile","style":{"code":true}},{"type":"text","text":" treats "},{"type":"text","text":"NaN","style":{"code":true}},{"type":"text","text":" and why?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using StatsBase\njulia> b = rand(20,20)\njulia> b[3,3] = NaN\njulia> quantile(vec(b), 0.5)\n0.5152183269708394\n\njulia> quantile(b[isfinite.(b)], 0.5)\n0.5118644684150617"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"The numbers differ - not really sure why?\n\nThe docs "},{"type":"link","url":"https://docs.julialang.org/en/v1/stdlib/Statistics/#Statistics.quantile"},{"type":"text","text":" mysteriously say “An ArgumentError is thrown if v contains NaN or missing values.”"}]}]}],"thread_ts":"1613114642.082600","reply_count":3,"reply_users_count":2,"latest_reply":"1613117608.083600","reply_users":["UHDQQ4GN6","U73KENNG4"],"subscribed":false},{"client_msg_id":"2a41e666-4a7a-4398-9556-4d8cd81de9c1","type":"message","text":"Not certain, but it appears to assume that its partial sort has moved all `NaN`s to the end, which is definitely not happening.","user":"UHDQQ4GN6","ts":"1613117481.083200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"beq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not certain, but it appears to assume that its partial sort has moved all "},{"type":"text","text":"NaN","style":{"code":true}},{"type":"text","text":"s to the end, which is definitely not happening."}]}]}],"thread_ts":"1613114642.082600","parent_user_id":"U73KENNG4"},{"client_msg_id":"71f4f05a-07c7-4fad-babd-2e1d3661d1a2","type":"message","text":"<https://github.com/JuliaLang/Statistics.jl/blob/master/src/Statistics.jl#L971-L972>","user":"UHDQQ4GN6","ts":"1613117486.083400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FDwI","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/Statistics.jl/blob/master/src/Statistics.jl#L971-L972"}]}]}],"thread_ts":"1613114642.082600","parent_user_id":"U73KENNG4"},{"client_msg_id":"dd432ee4-89ff-4b2a-a300-85f73eb3fe8f","type":"message","text":"very interesting - though sorting the NaNs to the end would explain why the quantile value gets higher in the presences of NaN","user":"U73KENNG4","ts":"1613117608.083600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aV3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"very interesting - though sorting the NaNs to the end would explain why the quantile value gets higher in the presences of NaN"}]}]}],"thread_ts":"1613114642.082600","parent_user_id":"U73KENNG4"}]