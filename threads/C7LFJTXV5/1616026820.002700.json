[{"client_msg_id":"2a58fd46-024a-42be-b599-0fa3f9292998","type":"message","text":"Looking at the Zygote docs I got the impression that `pullback` merely runs a forward pass and constructs the pullback function (which once generated should be cached right?). Why does `pullback(f, x)` need more time than `f(x)` even after repeated runs?","user":"UBGQUAG8K","ts":"1616026820.002700","team":"T68168MUP","edited":{"user":"UBGQUAG8K","ts":"1616027470.000000"},"blocks":[{"type":"rich_text","block_id":"EFC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looking at the Zygote docs I got the impression that "},{"type":"text","text":"pullback","style":{"code":true}},{"type":"text","text":" merely runs a forward pass and constructs the pullback function (which once generated should be cached right?). Why does "},{"type":"text","text":"pullback(f, x)","style":{"code":true}},{"type":"text","text":" need more time than "},{"type":"text","text":"f(x)","style":{"code":true}},{"type":"text","text":" even after repeated runs?"}]}]}],"thread_ts":"1616026820.002700","reply_count":1,"reply_users_count":1,"latest_reply":"1616044886.003000","reply_users":["UD0NS8PDF"],"subscribed":false},{"client_msg_id":"6a78fefa-4de7-4bc0-ac15-5225c2f5a383","type":"message","text":"It should be compiled once, but forward pass must be re-computed for each new `x`, and the backward pass (usually) depends on that too, so must also be re-computed:\n```julia&gt; Zygote.pullback(x -&gt; x^2, 2)\n(4, Zygote.var\"#43#44\"{typeof(∂(#5))}(∂(#5)))\n\njulia&gt; ans[2](1)\n(4,)\n\njulia&gt; Zygote.pullback(x -&gt; x^2, 3)\n(9, Zygote.var\"#43#44\"{typeof(∂(#7))}(∂(#7)))\n\njulia&gt; ans[2](1)\n(6,)```","user":"UD0NS8PDF","ts":"1616044886.003000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6t+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It should be compiled once, but forward pass must be re-computed for each new "},{"type":"text","text":"x","style":{"code":true}},{"type":"text","text":", and the backward pass (usually) depends on that too, so must also be re-computed:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> Zygote.pullback(x -> x^2, 2)\n(4, Zygote.var\"#43#44\"{typeof(∂(#5))}(∂(#5)))\n\njulia> ans[2](1)\n(4,)\n\njulia> Zygote.pullback(x -> x^2, 3)\n(9, Zygote.var\"#43#44\"{typeof(∂(#7))}(∂(#7)))\n\njulia> ans[2](1)\n(6,)"}]}]}],"thread_ts":"1616026820.002700","parent_user_id":"UBGQUAG8K"}]