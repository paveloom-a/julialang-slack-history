[{"client_msg_id":"82cbac36-6aa2-4d9d-8e67-e7dc1151dfb0","type":"message","text":"I think this used to be possible but I am getting \"Can't differentiate foreigncall expression\" now?","user":"UDVQM5U1Z","ts":"1613677424.155600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zhT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think this used to be possible but I am getting \"Can't differentiate foreigncall expression\" now?"}]}]}],"thread_ts":"1613677424.155600","reply_count":11,"reply_users_count":3,"latest_reply":"1613750758.159200","reply_users":["UH9KWTTD3","UDVQM5U1Z","U6A936746"],"subscribed":false},{"client_msg_id":"f863b3e2-69ee-4e74-b47b-75e83c588173","type":"message","text":"Zygote (the AD tool in Flux) can’t differentiate code that is written in another language (it can’t “see” the operations within that foreign call).","user":"UH9KWTTD3","ts":"1613677981.156600","team":"T68168MUP","edited":{"user":"UH9KWTTD3","ts":"1613678111.000000"},"blocks":[{"type":"rich_text","block_id":"qORg9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Zygote (the AD tool in Flux) can’t differentiate code that is written in another language (it can’t “see” the operations within that foreign call)."}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z"},{"client_msg_id":"fb511928-7017-44b6-b997-045726ab7354","type":"message","text":"You can define your own `Zygote.@adjoint` for the external function though","user":"UH9KWTTD3","ts":"1613678050.156800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tcA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can define your own "},{"type":"text","text":"Zygote.@adjoint","style":{"code":true}},{"type":"text","text":" for the external function though"}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z"},{"client_msg_id":"e517bdc5-f265-4fc6-8891-d47948f7621f","type":"message","text":"Ah!","user":"UDVQM5U1Z","ts":"1613678059.157000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SvBiH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah!"}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z"},{"client_msg_id":"5d9143a6-cea7-4901-87d9-dbda63595073","type":"message","text":"If you know what the derivative is","user":"UH9KWTTD3","ts":"1613678061.157200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BFpDY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you know what the derivative is"}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z"},{"client_msg_id":"5836e5b1-b411-4ae3-98dc-df109cadf7c9","type":"message","text":"That rings some bells","user":"UDVQM5U1Z","ts":"1613678064.157400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XRU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That rings some bells"}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z"},{"client_msg_id":"2fac619a-c017-4b12-b192-b2ad44cd5bda","type":"message","text":"I should be able to do that","user":"UDVQM5U1Z","ts":"1613678068.157600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N+=H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I should be able to do that"}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z"},{"client_msg_id":"a8afe78b-eac5-4f01-ad3d-7701c9b3c60e","type":"message","text":"Thanks so much!","user":"UDVQM5U1Z","ts":"1613678131.157900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HSO0B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks so much!"}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z"},{"client_msg_id":"e78b2719-910e-4794-8bd1-77be68e2e5fb","type":"message","text":"No problem!","user":"UH9KWTTD3","ts":"1613678137.158100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZBb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No problem!"}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z"},{"client_msg_id":"41197e34-c24a-457e-a159-15280d960bf3","type":"message","text":"Worked a treat!","user":"UDVQM5U1Z","ts":"1613678608.158300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2f/b","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Worked a treat!"}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z","reactions":[{"name":"100","users":["UH9KWTTD3"],"count":1}]},{"client_msg_id":"24b91d68-1ef0-403d-a0c6-c134e08f19e0","type":"message","text":"Recommend against defining `Zygote.@adjoint` s, and instead defining `ChainRulesCore.rrule` s.\nThey are basically the same thing (with minor differences in convention),\nbut ChainRules is AD independent.\nSo if you define the ChainRules it will not only work in Zygote, but it will also work in ReversePropagation.jl and when it comes out it will work in Diffractor, also there is a branch of Nabla that it works on.\n\nZygoteRules is slowly being deprecated infavor of ChainRulesCore. We’re not super hard pushing it, because there are a few corner cases that you can’t do (higher order functions). but  soon those will be resolved and we will.\nIt’s probably going to keep working for a long time, but still no sense making more of it.","user":"U6A936746","ts":"1613736914.159000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"El5/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Recommend against defining "},{"type":"text","text":"Zygote.@adjoint","style":{"code":true}},{"type":"text","text":" s, and instead defining "},{"type":"text","text":"ChainRulesCore.rrule","style":{"code":true}},{"type":"text","text":" s.\nThey are basically the same thing (with minor differences in convention),\nbut ChainRules is AD independent.\nSo if you define the ChainRules it will not only work in Zygote, but it will also work in ReversePropagation.jl and when it comes out it will work in Diffractor, also there is a branch of Nabla that it works on.\n\nZygoteRules is slowly being deprecated infavor of ChainRulesCore. We’re not super hard pushing it, because there are a few corner cases that you can’t do (higher order functions). but  soon those will be resolved and we will.\nIt’s probably going to keep working for a long time, but still no sense making more of it."}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z","reactions":[{"name":"heart","users":["UDVQM5U1Z","U7THT3TM3"],"count":2},{"name":"+1","users":["UMY1LV01G","U7THT3TM3"],"count":2}]},{"client_msg_id":"0dd0f723-7b7d-4c20-a03e-07810a173b2b","type":"message","text":"Thanks, I will update my code so I dont get caught out by this!","user":"UDVQM5U1Z","ts":"1613750758.159200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ozq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks, I will update my code so I dont get caught out by this!"}]}]}],"thread_ts":"1613677424.155600","parent_user_id":"UDVQM5U1Z"}]