[{"client_msg_id":"f93929b3-094e-427a-bb1d-16dca0aa3c17","type":"message","text":"Do you have reproducers?","user":"UC4QQPG4A","ts":"1617297609.070300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OGkmd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you have reproducers?"}]}]}],"thread_ts":"1617297609.070300","reply_count":13,"reply_users_count":3,"latest_reply":"1617305013.073800","reply_users":["UBQ05LZ52","UH9KWTTD3","UC4QQPG4A"],"is_locked":false,"subscribed":false},{"type":"message","text":"hey. haven't reduced it to an atomic problem yet. will do that now :)","user":"UBQ05LZ52","ts":"1617297688.071400","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"right now i'm using a Metalhead model but it gives a Flux.Chain\n```\nargs = Args()\nm = build_model(args.blockexpansion)\n@save datadir(\"sims\", \"TESTMODEL_saving_loading.bson\") m\n```","user":"UBQ05LZ52","ts":"1617297771.071600","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"gives:\n```\nERROR: type Method has no field ambig\nStacktrace:\n  [1] getproperty(x::Method, f::Symbol)\n    @ Base ./Base.jl:33\n  [2] structdata(meth::Method)\n    @ BSON ~/.julia/packages/BSON/XAts7/src/anonymous.jl:15\n...\n```","user":"UBQ05LZ52","ts":"1617297833.071800","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"ah okay, i think it fails because of an anonymous function..","user":"UBQ05LZ52","ts":"1617298079.072000","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"works: ```\nresnet = wide_resnet50(;blockexpansion=1)\nmf = Flux.Chain(\n    Conv((3, 3), 3 =&gt; 64, stride=1, pad=(1, 1)),\n        BatchNorm(64, relu),\n        resnet[3:end-4]...,\n        GlobalMeanPool(),\n    )\n@save datadir(\"sims\", \"TESTMODEL_saving_loading.bson\") mf\n```","user":"UBQ05LZ52","ts":"1617298126.072200","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"doesn't work:\n```\nresnet = wide_resnet50(;blockexpansion=1)\nmf = Flux.Chain(\n    Conv((3, 3), 3 =&gt; 64, stride=1, pad=(1, 1)),\n        BatchNorm(64, relu),\n        resnet[3:end-4]...,\n        GlobalMeanPool(),\n        x -&gt; reshape(x, :, size(x,4)),\n    )\n@save datadir(\"sims\", \"TESTMODEL_saving_loading.bson\") mf\n```","user":"UBQ05LZ52","ts":"1617298164.072400","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"okay, just using `Flux.flatten` instead of `x -&gt; reshape(x, :, size(x,4))` works. do you still think it is worth a bug report? in julia v1.5.2 using the former just worked","user":"UBQ05LZ52","ts":"1617298502.072600","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"client_msg_id":"7c2c27df-9b44-400f-865b-2510eef70350","type":"message","text":"What version of BSON?","user":"UH9KWTTD3","ts":"1617304373.072800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ttlbV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What version of BSON?"}]}]}],"thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"client_msg_id":"baaeac52-7310-4d4c-8db4-63eb46d22733","type":"message","text":"Yes, anonymous functions should work","user":"UH9KWTTD3","ts":"1617304699.073000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j0bt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, anonymous functions should work"}]}]}],"thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"client_msg_id":"a836737a-4d2b-4dc3-a5f5-1208fb8c095c","type":"message","text":"So a bug report would be appreciated","user":"UH9KWTTD3","ts":"1617304706.073200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dAd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So a bug report would be appreciated"}]}]}],"thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"client_msg_id":"5e69e6d4-5224-43ba-b568-ddce76536719","type":"message","text":"<https://github.com/JuliaIO/BSON.jl/issues/80>","user":"UH9KWTTD3","ts":"1617304727.073400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V63","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaIO/BSON.jl/issues/80"}]}]}],"thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"client_msg_id":"e1aa0592-0037-4cef-bba0-b552a8409446","type":"message","text":"Looks like there is already an issue","user":"UH9KWTTD3","ts":"1617304733.073600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QURV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looks like there is already an issue"}]}]}],"thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"client_msg_id":"9a8394e9-f8a9-47e1-9c6a-c491e9e9faa2","type":"message","text":"So Julia changed some closures and their representations","user":"UC4QQPG4A","ts":"1617305013.073800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mtpL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So Julia changed some closures and their representations"}]}]}],"thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A","reactions":[{"name":"+1::skin-tone-5","users":["UH9KWTTD3"],"count":1}]}]