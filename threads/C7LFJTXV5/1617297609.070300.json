[{"client_msg_id":"f93929b3-094e-427a-bb1d-16dca0aa3c17","type":"message","text":"Do you have reproducers?","user":"UC4QQPG4A","ts":"1617297609.070300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OGkmd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you have reproducers?"}]}]}],"thread_ts":"1617297609.070300","reply_count":7,"reply_users_count":1,"latest_reply":"1617298502.072600","reply_users":["UBQ05LZ52"],"is_locked":false,"subscribed":false},{"type":"message","text":"hey. haven't reduced it to an atomic problem yet. will do that now :)","user":"UBQ05LZ52","ts":"1617297688.071400","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"right now i'm using a Metalhead model but it gives a Flux.Chain\n```\nargs = Args()\nm = build_model(args.blockexpansion)\n@save datadir(\"sims\", \"TESTMODEL_saving_loading.bson\") m\n```","user":"UBQ05LZ52","ts":"1617297771.071600","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"gives:\n```\nERROR: type Method has no field ambig\nStacktrace:\n  [1] getproperty(x::Method, f::Symbol)\n    @ Base ./Base.jl:33\n  [2] structdata(meth::Method)\n    @ BSON ~/.julia/packages/BSON/XAts7/src/anonymous.jl:15\n...\n```","user":"UBQ05LZ52","ts":"1617297833.071800","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"ah okay, i think it fails because of an anonymous function..","user":"UBQ05LZ52","ts":"1617298079.072000","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"works: ```\nresnet = wide_resnet50(;blockexpansion=1)\nmf = Flux.Chain(\n    Conv((3, 3), 3 =&gt; 64, stride=1, pad=(1, 1)),\n        BatchNorm(64, relu),\n        resnet[3:end-4]...,\n        GlobalMeanPool(),\n    )\n@save datadir(\"sims\", \"TESTMODEL_saving_loading.bson\") mf\n```","user":"UBQ05LZ52","ts":"1617298126.072200","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"doesn't work:\n```\nresnet = wide_resnet50(;blockexpansion=1)\nmf = Flux.Chain(\n    Conv((3, 3), 3 =&gt; 64, stride=1, pad=(1, 1)),\n        BatchNorm(64, relu),\n        resnet[3:end-4]...,\n        GlobalMeanPool(),\n        x -&gt; reshape(x, :, size(x,4)),\n    )\n@save datadir(\"sims\", \"TESTMODEL_saving_loading.bson\") mf\n```","user":"UBQ05LZ52","ts":"1617298164.072400","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"},{"type":"message","text":"okay, just using `Flux.flatten` instead of `x -&gt; reshape(x, :, size(x,4))` works. do you still think it is worth a bug report? in julia v1.5.2 using the former just worked","user":"UBQ05LZ52","ts":"1617298502.072600","team":"T68168MUP","thread_ts":"1617297609.070300","parent_user_id":"UC4QQPG4A"}]