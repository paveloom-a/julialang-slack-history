[{"client_msg_id":"26fc6186-d722-414a-bb97-e2d2e8518b45","type":"message","text":"<@UC4QQPG4A> Oh that is good. Okay. So is there a good tutorial or example for using a function instead of the `chain` call. I am new to flux, so I was doing the 60 minute blitz, and that is very helpful. But then I compared that to the model zoo phoneme's example, and that example was a bit too advanced--meaning that there are a lot of syntax calls that I was not sure how to interpret; for example `vcat.(forward.(tokens), flip(backward, tokens))`. What is the next tutorial to look at after the 60 minute blitz, or is there any prescribed sequence for going through the model zoo examples. Like I said, the challenge is just understanding some of the syntactic manipulations, more than anything else.","user":"UDDSTBX19","ts":"1613401457.122200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Tiam6","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UC4QQPG4A"},{"type":"text","text":" Oh that is good. Okay. So is there a good tutorial or example for using a function instead of the "},{"type":"text","text":"chain","style":{"code":true}},{"type":"text","text":" call. I am new to flux, so I was doing the 60 minute blitz, and that is very helpful. But then I compared that to the model zoo phoneme's example, and that example was a bit too advanced--meaning that there are a lot of syntax calls that I was not sure how to interpret; for example "},{"type":"text","text":"vcat.(forward.(tokens), flip(backward, tokens))","style":{"code":true}},{"type":"text","text":". What is the next tutorial to look at after the 60 minute blitz, or is there any prescribed sequence for going through the model zoo examples. Like I said, the challenge is just understanding some of the syntactic manipulations, more than anything else."}]}]}],"thread_ts":"1613401457.122200","reply_count":12,"reply_users_count":3,"latest_reply":"1613713630.158800","reply_users":["U01724Q3PGW","UDDSTBX19","UP345RMJR"],"subscribed":false},{"client_msg_id":"f8b57868-2596-4e59-88d9-2d348a854819","type":"message","text":"There's not really a clear order to follow them. I would maybe take a look at some of the vision models in the model zoo; they're maybe the most straightforward to get a feeling. After that, there's not a clear answer. There's some more advanced stuff <https://github.com/sdobber/FluxArchitectures|here> and <https://github.com/chengchingwen/Transformers.jl/tree/master/src|here>. I was working on a PR to add more examples of sequence models, check <https://github.com/FluxML/model-zoo/pull/272|here>. It's not complete though.","user":"U01724Q3PGW","ts":"1613424522.124600","team":"T68168MUP","edited":{"user":"U01724Q3PGW","ts":"1613424555.000000"},"blocks":[{"type":"rich_text","block_id":"XCQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There's not really a clear order to follow them. I would maybe take a look at some of the vision models in the model zoo; they're maybe the most straightforward to get a feeling. After that, there's not a clear answer. There's some more advanced stuff "},{"type":"link","url":"https://github.com/sdobber/FluxArchitectures","text":"here"},{"type":"text","text":" and "},{"type":"link","url":"https://github.com/chengchingwen/Transformers.jl/tree/master/src","text":"here"},{"type":"text","text":". I was working on a PR to add more examples of sequence models, check ","style":{"unlink":true}},{"type":"link","url":"https://github.com/FluxML/model-zoo/pull/272","text":"here"},{"type":"text","text":". It's not complete though.","style":{"unlink":true}}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19","reactions":[{"name":"+1","users":["UDDSTBX19"],"count":1}]},{"client_msg_id":"2d170c38-b334-4e34-a328-57f735d907ea","type":"message","text":"<@U01724Q3PGW> Oh thanks for the suggestions there. Yeah, that is very helpful. I can take a look at those links. Haha, I don't think I would have found them if you did not mention them. Thanks again.","user":"UDDSTBX19","ts":"1613430475.125000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pp8","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U01724Q3PGW"},{"type":"text","text":" Oh thanks for the suggestions there. Yeah, that is very helpful. I can take a look at those links. Haha, I don't think I would have found them if you did not mention them. Thanks again."}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"},{"client_msg_id":"d5665eb6-f52f-43e8-8294-f382874be7be","type":"message","text":"I also found some of the `Zygote` tutorials helpful in answering some of my questions about the api for the `gradient()` function, etc.","user":"UDDSTBX19","ts":"1613430588.125200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xuR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I also found some of the "},{"type":"text","text":"Zygote","style":{"code":true}},{"type":"text","text":" tutorials helpful in answering some of my questions about the api for the "},{"type":"text","text":"gradient()","style":{"code":true}},{"type":"text","text":" function, etc."}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"},{"client_msg_id":"6a5affd2-641d-4d91-b322-41cf51d9bafe","type":"message","text":"<@U01724Q3PGW> Hi, your example looks great for the time series. Do you have any further advancements with the code. The first train function gives me dimensions error, for instance. Thanks!","user":"UP345RMJR","ts":"1613496145.127800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bg2y","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U01724Q3PGW"},{"type":"text","text":" Hi, your example looks great for the time series. Do you have any further advancements with the code. The first train function gives me dimensions error, for instance. Thanks!"}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"},{"client_msg_id":"6839936d-fbe0-4f43-b5dd-c0063a24373d","type":"message","text":"<@U01724Q3PGW> I will put the error here too\n```julia&gt; plot(single_step_24h, linear)\nERROR: MethodError: no method matching *(::Array{Float32,2}, ::Base.ReshapedArray{Float32,3,SubArray{Float32,2,LinearAlgebra.Adjoint{Float32,Array{Float32,2}},Tuple{Base.Slice{Base.OneTo{Int64}},UnitRange{Int64}},false},Tuple{Base.MultiplicativeInverses.SignedMultiplicativeInverse{Int64}}})\nClosest candidates are:\n  *(::Any, ::Any, ::Any, ::Any...) at operators.jl:538\n  *(::ChainRulesCore.Zero, ::Any) at /Users/luboshanus/.julia/packages/ChainRulesCore/qeIhO/src/differential_arithmetic.jl:68\n  *(::ChainRulesCore.One, ::Any) at /Users/luboshanus/.julia/packages/ChainRulesCore/qeIhO/src/differential_arithmetic.jl:98\n  ...\nStacktrace:\n [1] (::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}})(::Base.ReshapedArray{Float32,3,SubArray{Float32,2,LinearAlgebra.Adjoint{Float32,Array{Float32,2}},Tuple{Base.Slice{Base.OneTo{Int64}},UnitRange{Int64}},false},Tuple{Base.MultiplicativeInverses.SignedMultiplicativeInverse{Int64}}}) at /Users/luboshanus/.julia/packages/Flux/sY3yx/src/layers/basic.jl:123\n [2] (::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}})(::Base.ReshapedArray{Float32,3,SubArray{Float32,2,LinearAlgebra.Adjoint{Float32,Array{Float32,2}},Tuple{Base.Slice{Base.OneTo{Int64}},UnitRange{Int64}},false},Tuple{Base.MultiplicativeInverses.SignedMultiplicativeInverse{Int64}}}) at /Users/luboshanus/.julia/packages/Flux/sY3yx/src/layers/basic.jl:134\n [3] plot(::WindowGenerator, ::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}}; set::Symbol) at /Users/luboshanus/GitHub/DistrNN11/scripts/Flux_TimeSeries/00_Dinhobl_EX_flux_time_series.jl:345\n [4] plot(::WindowGenerator, ::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}}) at /Users/luboshanus/GitHub/DistrNN11/scripts/Flux_TimeSeries/00_Dinhobl_EX_flux_time_series.jl:339\n [5] top-level scope at REPL[213]:1```","user":"UP345RMJR","ts":"1613497604.128000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CUb","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U01724Q3PGW"},{"type":"text","text":" I will put the error here too\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> plot(single_step_24h, linear)\nERROR: MethodError: no method matching *(::Array{Float32,2}, ::Base.ReshapedArray{Float32,3,SubArray{Float32,2,LinearAlgebra.Adjoint{Float32,Array{Float32,2}},Tuple{Base.Slice{Base.OneTo{Int64}},UnitRange{Int64}},false},Tuple{Base.MultiplicativeInverses.SignedMultiplicativeInverse{Int64}}})\nClosest candidates are:\n  *(::Any, ::Any, ::Any, ::Any...) at operators.jl:538\n  *(::ChainRulesCore.Zero, ::Any) at /Users/luboshanus/.julia/packages/ChainRulesCore/qeIhO/src/differential_arithmetic.jl:68\n  *(::ChainRulesCore.One, ::Any) at /Users/luboshanus/.julia/packages/ChainRulesCore/qeIhO/src/differential_arithmetic.jl:98\n  ...\nStacktrace:\n [1] (::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}})(::Base.ReshapedArray{Float32,3,SubArray{Float32,2,LinearAlgebra.Adjoint{Float32,Array{Float32,2}},Tuple{Base.Slice{Base.OneTo{Int64}},UnitRange{Int64}},false},Tuple{Base.MultiplicativeInverses.SignedMultiplicativeInverse{Int64}}}) at /Users/luboshanus/.julia/packages/Flux/sY3yx/src/layers/basic.jl:123\n [2] (::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}})(::Base.ReshapedArray{Float32,3,SubArray{Float32,2,LinearAlgebra.Adjoint{Float32,Array{Float32,2}},Tuple{Base.Slice{Base.OneTo{Int64}},UnitRange{Int64}},false},Tuple{Base.MultiplicativeInverses.SignedMultiplicativeInverse{Int64}}}) at /Users/luboshanus/.julia/packages/Flux/sY3yx/src/layers/basic.jl:134\n [3] plot(::WindowGenerator, ::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}}; set::Symbol) at /Users/luboshanus/GitHub/DistrNN11/scripts/Flux_TimeSeries/00_Dinhobl_EX_flux_time_series.jl:345\n [4] plot(::WindowGenerator, ::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}}) at /Users/luboshanus/GitHub/DistrNN11/scripts/Flux_TimeSeries/00_Dinhobl_EX_flux_time_series.jl:339\n [5] top-level scope at REPL[213]:1"}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"},{"client_msg_id":"2cd425b9-5b77-4345-9b19-0d3805d1e58b","type":"message","text":"It appears in the train function too, there I needed to drop  dims=2 in `x` and `y` to be able to train… Now it looks similar in the plot, I actually don’t want to change everything since it worked for you. Maybe you can help easily before I rewrite it.","user":"UP345RMJR","ts":"1613497721.128200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4Na63","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It appears in the train function too, there I needed to drop  dims=2 in "},{"type":"text","text":"x","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"y","style":{"code":true}},{"type":"text","text":" to be able to train… Now it looks similar in the plot, I actually don’t want to change everything since it worked for you. Maybe you can help easily before I rewrite it."}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"},{"client_msg_id":"60b3e98b-662d-4943-bb67-6719a4ae98cd","type":"message","text":"I think that Flux.Dense does not accept array of 3 dimensions.","user":"UP345RMJR","ts":"1613497868.128400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lvz3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think that Flux.Dense does not accept array of 3 dimensions."}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"},{"client_msg_id":"311c4788-ad53-4839-ae59-d79d39e3b854","type":"message","text":"If I don’t do any modifications to your code, first error is this:\n```julia&gt; @time linear = train_model!(linear, single_step_1h, opt; bs=32, epochs=20)\n┌ Warning: The specified values for size and/or count will result in 6 unused data points\n└ @ MLDataPattern ~/.julia/packages/MLDataPattern/KlSmO/src/dataview.jl:205\nERROR: MethodError: no method matching *(::Array{Float32,2}, ::Array{Float32,3})\nClosest candidates are:\n  *(::Any, ::Any, ::Any, ::Any...) at operators.jl:538\n  *(::ChainRulesCore.One, ::Any) at /Users/luboshanus/.julia/packages/ChainRulesCore/7d1hl/src/differential_arithmetic.jl:98\n  *(::ChainRulesCore.DoesNotExist, ::Any) at /Users/luboshanus/.julia/packages/ChainRulesCore/7d1hl/src/differential_arithmetic.jl:28\n  ...\nStacktrace:\n [1] macro expansion at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface2.jl:0 [inlined]\n [2] _pullback(::Zygote.Context, ::typeof(*), ::Array{Float32,2}, ::Array{Float32,3}) at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface2.jl:9\n [3] Dense at /Users/luboshanus/.julia/packages/Flux/goUGu/src/layers/basic.jl:123 [inlined]\n [4] _pullback(::Zygote.Context, ::typeof(invoke), ::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}}, ::Type{Tuple{AbstractArray}}, ::Array{Float32,3}) at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface2.jl:0\n [5] Dense at /Users/luboshanus/.julia/packages/Flux/goUGu/src/layers/basic.jl:134 [inlined]\n [6] _pullback(::Zygote.Context, ::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}}, ::Array{Float32,3}) at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface2.jl:0\n [7] #31 at ./REPL[154]:17 [inlined]\n [8] _pullback(::Zygote.Context, ::var\"#31#32\") at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface2.jl:0\n [9] pullback(::Function, ::Zygote.Params) at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface.jl:167\n [10] gradient(::Function, ::Zygote.Params) at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface.jl:48\n [11] train_model!(::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}}, ::WindowGenerator, ::ADAM; epochs::Int64, bs::Int64, dev::Function, conv::Bool) at ./REPL[154]:16\n [12] top-level scope at ./timing.jl:174 [inlined]\n [13] top-level scope at ./REPL[155]:0```","user":"UP345RMJR","ts":"1613508483.128600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G6DA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If I don’t do any modifications to your code, first error is this:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time linear = train_model!(linear, single_step_1h, opt; bs=32, epochs=20)\n┌ Warning: The specified values for size and/or count will result in 6 unused data points\n└ @ MLDataPattern ~/.julia/packages/MLDataPattern/KlSmO/src/dataview.jl:205\nERROR: MethodError: no method matching *(::Array{Float32,2}, ::Array{Float32,3})\nClosest candidates are:\n  *(::Any, ::Any, ::Any, ::Any...) at operators.jl:538\n  *(::ChainRulesCore.One, ::Any) at /Users/luboshanus/.julia/packages/ChainRulesCore/7d1hl/src/differential_arithmetic.jl:98\n  *(::ChainRulesCore.DoesNotExist, ::Any) at /Users/luboshanus/.julia/packages/ChainRulesCore/7d1hl/src/differential_arithmetic.jl:28\n  ...\nStacktrace:\n [1] macro expansion at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface2.jl:0 [inlined]\n [2] _pullback(::Zygote.Context, ::typeof(*), ::Array{Float32,2}, ::Array{Float32,3}) at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface2.jl:9\n [3] Dense at /Users/luboshanus/.julia/packages/Flux/goUGu/src/layers/basic.jl:123 [inlined]\n [4] _pullback(::Zygote.Context, ::typeof(invoke), ::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}}, ::Type{Tuple{AbstractArray}}, ::Array{Float32,3}) at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface2.jl:0\n [5] Dense at /Users/luboshanus/.julia/packages/Flux/goUGu/src/layers/basic.jl:134 [inlined]\n [6] _pullback(::Zygote.Context, ::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}}, ::Array{Float32,3}) at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface2.jl:0\n [7] #31 at ./REPL[154]:17 [inlined]\n [8] _pullback(::Zygote.Context, ::var\"#31#32\") at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface2.jl:0\n [9] pullback(::Function, ::Zygote.Params) at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface.jl:167\n [10] gradient(::Function, ::Zygote.Params) at /Users/luboshanus/.julia/packages/Zygote/KpME9/src/compiler/interface.jl:48\n [11] train_model!(::Dense{typeof(identity),Array{Float32,2},Array{Float32,1}}, ::WindowGenerator, ::ADAM; epochs::Int64, bs::Int64, dev::Function, conv::Bool) at ./REPL[154]:16\n [12] top-level scope at ./timing.jl:174 [inlined]\n [13] top-level scope at ./REPL[155]:0"}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"},{"client_msg_id":"501d728a-951e-4897-be85-45918e6bd3ad","type":"message","text":"It's been about a month since I last worked on it, so there's a chance that there's been some changes to flux since I last updated the Project.toml. IIRC it's on Flux#master in the toml, so you may want to take that out.","user":"U01724Q3PGW","ts":"1613530393.132700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bMf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's been about a month since I last worked on it, so there's a chance that there's been some changes to flux since I last updated the Project.toml. IIRC it's on Flux#master in the toml, so you may want to take that out."}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"},{"client_msg_id":"9ebd9659-9fbd-4b89-8dda-3875444a586b","type":"message","text":"Ok, thanks, and if you go step by step in the code, does it work for you?","user":"UP345RMJR","ts":"1613660319.154200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wi3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, thanks, and if you go step by step in the code, does it work for you?"}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"},{"client_msg_id":"623d973a-4b40-4d6a-b26a-5ef23e20be6f","type":"message","text":"I just updated it and ran it for the first time in a while, and it errors on the same spot as is posted above. Let me see if I can quickly fix.","user":"U01724Q3PGW","ts":"1613698245.158600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uUX7p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I just updated it and ran it for the first time in a while, and it errors on the same spot as is posted above. Let me see if I can quickly fix."}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"},{"client_msg_id":"118bc67d-9343-49f3-9547-85fda6d952a5","type":"message","text":"before you run the script, try adding `]add Flux#master`. That seemed to work for me.","user":"U01724Q3PGW","ts":"1613713630.158800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IAS3Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"before you run the script, try adding "},{"type":"text","text":"]add Flux#master","style":{"code":true}},{"type":"text","text":". That seemed to work for me."}]}]}],"thread_ts":"1613401457.122200","parent_user_id":"UDDSTBX19"}]