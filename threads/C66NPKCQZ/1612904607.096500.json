[{"client_msg_id":"1ba98837-a95d-486d-bbb2-9a016604fbf0","type":"message","text":"Problem is that a macro has limited scope, @fastmath doesn't propagate to function calls, and if it would work like @inbounds the rounding would depend on compiler heuristics determining whether function calls inline or not (but I'm not an expert...)","user":"U6N6VQE30","ts":"1612904607.096500","team":"T68168MUP","edited":{"user":"U6N6VQE30","ts":"1612904810.000000"},"blocks":[{"type":"rich_text","block_id":"ikD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Problem is that a macro has limited scope, @fastmath doesn't propagate to function calls, and if it would work like @inbounds the rounding would depend on compiler heuristics determining whether function calls inline or not (but I'm not an expert...)"}]}]}],"thread_ts":"1612904607.096500","reply_count":2,"reply_users_count":2,"latest_reply":"1612937773.100900","reply_users":["UM30MT6RF","UMDEUKM29"],"subscribed":false,"reactions":[{"name":"eyes","users":["U68QW0PUZ"],"count":1}]},{"client_msg_id":"90fce378-628b-47bf-9376-96064286aa71","type":"message","text":"This could in theory be made to work, but the question is more whether we actually want that. `@fastmath` is pretty broken, and if used on code you didn't write it may return complete garbage in some situations","user":"UM30MT6RF","ts":"1612905004.100700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"o+=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This could in theory be made to work, but the question is more whether we actually want that. "},{"type":"text","text":"@fastmath","style":{"code":true}},{"type":"text","text":" is pretty broken, and if used on code you didn't write it may return complete garbage in some situations"}]}]}],"thread_ts":"1612904607.096500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"e803f60c-39ea-4b3b-a699-08597fcd8126","type":"message","text":"That is the usual answer and it's not wrong, but it's pretty rare, and usually only concerns specialized code that explicitly does arithmetic tricks. So ideally you'd annotate that code with explicit fastmath disable, and just fastmath the rest","user":"UMDEUKM29","ts":"1612937773.100900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"b=7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That is the usual answer and it's not wrong, but it's pretty rare, and usually only concerns specialized code that explicitly does arithmetic tricks. So ideally you'd annotate that code with explicit fastmath disable, and just fastmath the rest"}]}]}],"thread_ts":"1612904607.096500","parent_user_id":"U6N6VQE30"}]