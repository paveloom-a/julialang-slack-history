[{"type":"message","text":"Hi, I would love some help on this. In Equation 9, they are trying to calculate the approximation of the Hessian diagonal. But while doing that, they actually calculate the Hessian itself (by taking the second derivative of the gradient) in Equation 8. Doesn't that ruin the point of trying to approximate the Hessian diagonal? Because they are calculating the approximate of the Hessian with the Hessian itself.","files":[{"id":"F01S52LV7HQ","created":1616500070,"timestamp":1616500070,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U01PP5BA1C4","editable":false,"size":69447,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01S52LV7HQ/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01S52LV7HQ/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01S52LV7HQ-2881d83f57/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01S52LV7HQ-2881d83f57/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01S52LV7HQ-2881d83f57/image_360.png","thumb_360_w":360,"thumb_360_h":348,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01S52LV7HQ-2881d83f57/image_160.png","original_w":462,"original_h":446,"thumb_tiny":"AwAuADDQfr7U3B7f5/Wlk+926UnXv/L/AAoAB36n8/8AGlGT1/z+tJn34/D/AAoOOnGfwoAXp6/5/Ghc7h/9f/GkOMHpkfSlX7w9R9KAHlQeufzpMfP0OPrTX++Og49qTj0H04oAeCeeKMnB45FR5GOMD8qBjPb07UAS5PHFKfpUXy9OP0oXG8dD+VADnzn/APXSc8//AF6eVBOSAaQoMcAUAN5z3z+NHPHX9acFI+7tH4UvPtQBGc57/rSj7w6/rTxnHOKXntQB/9k=","permalink":"https://julialang.slack.com/files/U01PP5BA1C4/F01S52LV7HQ/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01S52LV7HQ-94f5d4ae97","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"z/a+v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi, I would love some help on this. In Equation 9, they are trying to calculate the approximation of the Hessian diagonal. But while doing that, they actually calculate the Hessian itself (by taking the second derivative of the gradient) in Equation 8. Doesn't that ruin the point of trying to approximate the Hessian diagonal? Because they are calculating the approximate of the Hessian with the Hessian itself."}]}]}],"user":"U01PP5BA1C4","display_as_bot":false,"ts":"1616500191.003100","thread_ts":"1616500191.003100","reply_count":5,"reply_users_count":2,"latest_reply":"1616502846.004200","reply_users":["UMDEUKM29","U01PP5BA1C4"],"is_locked":false,"subscribed":false},{"client_msg_id":"abef6ad8-4ce5-4e1c-ba79-f6e58ca8aa12","type":"message","text":"I think they mean you can get hessian-vector multiplies without computing the full hessian by differentiating the gradient in the direction z","user":"UMDEUKM29","ts":"1616500589.003400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"och","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think they mean you can get hessian-vector multiplies without computing the full hessian by differentiating the gradient in the direction z"}]}]}],"thread_ts":"1616500191.003100","parent_user_id":"U01PP5BA1C4"},{"client_msg_id":"ccc94c91-70a0-44da-9036-a80b55a79acb","type":"message","text":"That z is a random vector which they are using to approximate the Hessian diagonal.\nThey are taking the derivative of the gradients w.r.t the parameters <@UMDEUKM29>","user":"U01PP5BA1C4","ts":"1616502326.003600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rrs+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That z is a random vector which they are using to approximate the Hessian diagonal.\nThey are taking the derivative of the gradients w.r.t the parameters "},{"type":"user","user_id":"UMDEUKM29"}]}]}],"thread_ts":"1616500191.003100","parent_user_id":"U01PP5BA1C4"},{"client_msg_id":"12814479-fe2c-4683-ade5-4f650745619e","type":"message","text":"I think this is because people like to use ML frameworks that allow you to take gradients and not much else, so you try to reformulate everything in terms of computing gradients","user":"UMDEUKM29","ts":"1616502409.003800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QcK0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think this is because people like to use ML frameworks that allow you to take gradients and not much else, so you try to reformulate everything in terms of computing gradients"}]}]}],"thread_ts":"1616500191.003100","parent_user_id":"U01PP5BA1C4"},{"client_msg_id":"0d517b8e-d4c1-4204-a968-deec0c930ea2","type":"message","text":"```v = [2 * torch.randint_like(p, high=2) - 1 for p in params]\nfor v1 in v:\n    dist.all_reduce(v1)\n    for v_i in v:\n    v_i[v_i &lt; 0.] = -1.\n    v_i[v_i &gt;= 0.] = 1.\n\nhvs = torch.autograd.grad(grads,params,grad_outputs=v, only_inputs=True,retain_graph=True)```\nThis is the pytorch code for those equations that im trying to convert it to Julia but having a really difficult time with the autograd.grad part <@UMDEUKM29>\nDo I just take the gradient using Zygote and then matrix multiply with z? or hows that??","user":"U01PP5BA1C4","ts":"1616502810.004000","team":"T68168MUP","edited":{"user":"U01PP5BA1C4","ts":"1616502907.000000"},"blocks":[{"type":"rich_text","block_id":"GD2O","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"v = [2 * torch.randint_like(p, high=2) - 1 for p in params]\nfor v1 in v:\n    dist.all_reduce(v1)\n    for v_i in v:\n    v_i[v_i < 0.] = -1.\n    v_i[v_i >= 0.] = 1.\n\nhvs = torch.autograd.grad(grads,params,grad_outputs=v, only_inputs=True,retain_graph=True)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"This is the pytorch code for those equations that im trying to convert it to Julia but having a really difficult time with the autograd.grad part "},{"type":"user","user_id":"UMDEUKM29"},{"type":"text","text":"\nDo I just take the gradient using Zygote and then matrix multiply with z? or hows that??"}]}]}],"thread_ts":"1616500191.003100","parent_user_id":"U01PP5BA1C4"},{"client_msg_id":"975e5e52-2903-4aef-bf27-a849eeaf7b9c","type":"message","text":"don't ask me, I know nothing about these things, try the AD or ML channels","user":"UMDEUKM29","ts":"1616502846.004200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VWIhj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"don't ask me, I know nothing about these things, try the AD or ML channels"}]}]}],"thread_ts":"1616500191.003100","parent_user_id":"U01PP5BA1C4","reactions":[{"name":"+1","users":["U01PP5BA1C4"],"count":1}]}]