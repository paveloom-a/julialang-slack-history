[{"client_msg_id":"8b1a536f-8728-431b-85b9-48856470abcf","type":"message","text":"Does anyone know if there’s a Julia implementation of Quaternion step differentiation?","user":"UDSG73JTH","ts":"1614437236.006800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KxVV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does anyone know if there’s a Julia implementation of Quaternion step differentiation?"}]}]}],"thread_ts":"1614437236.006800","reply_count":18,"reply_users_count":5,"latest_reply":"1614885723.012600","reply_users":["U67G3QRJM","UGHS7LC64","UDSG73JTH","U72B7LTMX","U67D54KS8"],"subscribed":false},{"client_msg_id":"55bcd9e9-7d59-4bb6-8f71-39cde459dff2","type":"message","text":"What is step differentiation?","user":"U67G3QRJM","ts":"1614448748.007300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rqYGl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What is step differentiation?"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"a50072b9-782b-4c0b-b709-ea207f524490","type":"message","text":"I'm not sure what you are looking for either, but maybe have a look at <https://github.com/JuliaGeometry/Rotations.jl>","user":"UGHS7LC64","ts":"1614451967.007500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ekT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure what you are looking for either, but maybe have a look at "},{"type":"link","url":"https://github.com/JuliaGeometry/Rotations.jl"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"ddee1516-1308-4c64-ae80-2659a6f97dd6","type":"message","text":"I’m using “step” in the same way as is used to describe complex “step” differentiation; $f(x+ih)$. Using quaternions can differentiate (a subset of?) complex functions.","user":"UDSG73JTH","ts":"1614454508.007700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"b5DE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m using “step” in the same way as is used to describe complex “step” differentiation; $f(x+ih)$. Using quaternions can differentiate (a subset of?) complex functions."}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"df92daf0-962b-4d0a-8d41-60b441d999bd","type":"message","text":"So it seems like it should just be 1 line of Julia to do yourself?","user":"U67G3QRJM","ts":"1614455828.008000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HeMMH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So it seems like it should just be 1 line of Julia to do yourself?"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"6b6aa595-d583-4aba-9589-7ecc6d9edfcf","type":"message","text":"That does seem like it might be a good idea, though","user":"U67G3QRJM","ts":"1614456158.008200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/BonO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That does seem like it might be a good idea, though"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"b0514388-5192-4450-8b91-aaf2ffd26d35","type":"message","text":"<https://arxiv.org/abs/2010.09543>","user":"U67G3QRJM","ts":"1614456198.008400","team":"T68168MUP","attachments":[{"service_name":"arXiv.org","title":"Quaternionic Step Derivative: Automatic Differentiation of...","title_link":"https://arxiv.org/abs/2010.09543","text":"Complex Step Derivative (CSD) allows easy and accurate differentiation up to machine precision of real functions by evaluating them a small imaginary step next to the real line. The current paper...","fallback":"arXiv.org: Quaternionic Step Derivative: Automatic Differentiation of...","from_url":"https://arxiv.org/abs/2010.09543","service_icon":"https://static.arxiv.org/static/browse/0.3.2.6/images/icons/favicon.ico","id":1,"original_url":"https://arxiv.org/abs/2010.09543"}],"blocks":[{"type":"rich_text","block_id":"YRE","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://arxiv.org/abs/2010.09543"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"9d89fcf5-79f6-4060-892b-89366ff60669","type":"message","text":"It seems as though it should. I had a quick go, but it didn’t work out according to my (naive?) expectiations.","user":"UDSG73JTH","ts":"1614521399.008700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dhs8y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It seems as though it should. I had a quick go, but it didn’t work out according to my (naive?) expectiations."}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"8766fe8b-db17-4953-b363-5a3c47a2ef14","type":"message","text":"That’s the article I found. I haven’t read it yet though.","user":"UDSG73JTH","ts":"1614521481.008900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nQsR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That’s the article I found. I haven’t read it yet though."}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"a70c7fbb-e900-4bb4-bf53-cbf5a7f80965","type":"message","text":":sweat_smile: the first paragraph of section 2…","user":"UDSG73JTH","ts":"1614522472.009100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P/QU","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"sweat_smile"},{"type":"text","text":" the first paragraph of section 2…"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"52812daa-abfb-4bcc-8bf8-28dad81a3924","type":"message","text":"Why not just use automatic differentiation? Although I'm not sure which package can handle complex numbers right now.","user":"U67G3QRJM","ts":"1614524538.009300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rkAgl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Why not just use automatic differentiation? Although I'm not sure which package can handle complex numbers right now."}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH","reactions":[{"name":"point_up","users":["U6A936746","U72B7LTMX"],"count":2}]},{"client_msg_id":"ca52c306-2017-4be7-bb22-93235152cabb","type":"message","text":"I don’t think any can handle complex numbers yet. I need to evaluate the derivative of functions at complex locations in a way that’s amenable to forward rather than reverse differentiation.","user":"UDSG73JTH","ts":"1614525788.009500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9Y2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t think any can handle complex numbers yet. I need to evaluate the derivative of functions at complex locations in a way that’s amenable to forward rather than reverse differentiation."}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"8c7cdfaa-b692-436e-8919-869b843e6a9f","type":"message","text":"Did you try forwarddiff.jl? It now is supposed to have \"limited support\" for complex functions","user":"U67G3QRJM","ts":"1614537975.009700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5K9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Did you try forwarddiff.jl? It now is supposed to have \"limited support\" for complex functions"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"3ce0466e-1a4f-4b05-9678-0601d450fda9","type":"message","text":"Just tried it. Seems my use case is outside of the supported functionality\n```julia&gt; ForwardDiff.derivative(f, x)\nERROR: MethodError: no method matching derivative(::typeof(f), ::ComplexF64)\nClosest candidates are:\n  derivative(::F, ::R) where {F, R&lt;:Real}```","user":"UDSG73JTH","ts":"1614538142.009900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ynweB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Just tried it. Seems my use case is outside of the supported functionality\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> ForwardDiff.derivative(f, x)\nERROR: MethodError: no method matching derivative(::typeof(f), ::ComplexF64)\nClosest candidates are:\n  derivative(::F, ::R) where {F, R<:Real}"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"client_msg_id":"0baff3d4-7e4a-4c21-a4ec-f28d02a34f36","type":"message","text":"<@U67G3QRJM> I made a gist of a working (but susceptible to floating point errors) implementation <https://gist.github.com/jwscook/e096706547684ef091dd8c3b98b611cb>","user":"UDSG73JTH","ts":"1614715475.010900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"R8f","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U67G3QRJM"},{"type":"text","text":" I made a gist of a working (but susceptible to floating point errors) implementation "},{"type":"link","url":"https://gist.github.com/jwscook/e096706547684ef091dd8c3b98b611cb"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH","reactions":[{"name":"+1","users":["U67G3QRJM"],"count":1}]},{"client_msg_id":"5feaed7a-fa8a-4fc3-9618-ed96121ec773","type":"message","text":"Any ad is susceptible to round off error. Use IntervalArithmetic.jl to bound that","user":"U67G3QRJM","ts":"1614717114.011200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UlrAW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Any ad is susceptible to round off error. Use IntervalArithmetic.jl to bound that"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"},{"type":"message","subtype":"thread_broadcast","text":"As far as I understand, complex step differentiation is a \"hacky\" way to achieve automatic differentiation. I don't see a need for it if forward-mode automatic differentiation (e.g. using Dual numbers) is available.","user":"U72B7LTMX","ts":"1614885165.012000","thread_ts":"1614437236.006800","root":{"client_msg_id":"8b1a536f-8728-431b-85b9-48856470abcf","type":"message","text":"Does anyone know if there’s a Julia implementation of Quaternion step differentiation?","user":"UDSG73JTH","ts":"1614437236.006800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KxVV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does anyone know if there’s a Julia implementation of Quaternion step differentiation?"}]}]}],"thread_ts":"1614437236.006800","reply_count":18,"reply_users_count":5,"latest_reply":"1614885723.012600","reply_users":["U67G3QRJM","UGHS7LC64","UDSG73JTH","U72B7LTMX","U67D54KS8"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"jYuly","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"As far as I understand, complex step differentiation is a \"hacky\" way to achieve automatic differentiation. I don't see a need for it if forward-mode automatic differentiation (e.g. using Dual numbers) is available."}]}]}],"client_msg_id":"29eab17e-ea1e-41ed-be9a-50d4b6fac960"},{"client_msg_id":"47c05a3c-8d57-4caf-9237-4d925e371b9b","type":"message","text":"<https://julialang.slack.com/archives/C66NPKCQZ/p1614525788009500?thread_ts=1614437236.006800&amp;cid=C66NPKCQZ|https://julialang.slack.com/archives/C66NPKCQZ/p1614525788009500?thread_ts=1614437236.006800&amp;cid=C66NPKCQZ>","user":"U67D54KS8","ts":"1614885539.012300","team":"T68168MUP","attachments":[{"from_url":"https://julialang.slack.com/archives/C66NPKCQZ/p1614525788009500?thread_ts=1614437236.006800&amp;cid=C66NPKCQZ","fallback":"[February 28th, 2021 7:23 AM] cookjws: I don’t think any can handle complex numbers yet. I need to evaluate the derivative of functions at complex locations in a way that’s amenable to forward rather than reverse differentiation.","ts":"1614525788.009500","author_id":"UDSG73JTH","author_subname":"James Cook","channel_id":"C66NPKCQZ","channel_name":"maths","is_msg_unfurl":true,"is_reply_unfurl":true,"text":"I don’t think any can handle complex numbers yet. I need to evaluate the derivative of functions at complex locations in a way that’s amenable to forward rather than reverse differentiation.","author_name":"James Cook","author_link":"https://julialang.slack.com/team/UDSG73JTH","author_icon":"https://secure.gravatar.com/avatar/13f298f0f34a331cf7acd848387223b7.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0002-48.png","mrkdwn_in":["text"],"id":1,"original_url":"https://julialang.slack.com/archives/C66NPKCQZ/p1614525788009500?thread_ts=1614437236.006800&amp;cid=C66NPKCQZ","footer":"From a thread in #maths"}],"blocks":[{"type":"rich_text","block_id":"GQuo","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://julialang.slack.com/archives/C66NPKCQZ/p1614525788009500?thread_ts=1614437236.006800&cid=C66NPKCQZ","text":"https://julialang.slack.com/archives/C66NPKCQZ/p1614525788009500?thread_ts=1614437236.006800&cid=C66NPKCQZ"}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH","reactions":[{"name":"+1","users":["U72B7LTMX"],"count":1}]},{"client_msg_id":"a2bd6859-0f2b-445f-b496-a83e4588bc23","type":"message","text":"\"Complex step differentiation\" is a way to compute derivatives (approximations, due to  some truncation error, though less than with finite differences) of functions over the Real domain.\nPerhaps \"quaternion step differentiation\" is a way to get derivatives of functions on complex domains. But my feeling is that it's still a \"hack\"","user":"U72B7LTMX","ts":"1614885723.012600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Rli","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"\"Complex step differentiation\" is a way to compute derivatives (approximations, due to  some truncation error, though less than with finite differences) of functions over the Real domain.\nPerhaps \"quaternion step differentiation\" is a way to get derivatives of functions on complex domains. But my feeling is that it's still a \"hack\""}]}]}],"thread_ts":"1614437236.006800","parent_user_id":"UDSG73JTH"}]