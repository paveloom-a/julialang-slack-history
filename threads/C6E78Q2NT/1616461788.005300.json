[{"client_msg_id":"0dd6f0a7-93bb-4323-b3c8-76d1adeec5ab","type":"message","text":"Suppose I’m using FileTrees.jl (or Dagger, if you like) to read and process multiple xml files in multiple directories. Is it better to use multithreading (which I take to be `cpus-per-task` in SLURM) or multiprocessing (which I take to be  the `nodes=??` setting in SLURM)?","user":"US8V7JSKB","ts":"1616461788.005300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wzo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Suppose I’m using FileTrees.jl (or Dagger, if you like) to read and process multiple xml files in multiple directories. Is it better to use multithreading (which I take to be "},{"type":"text","text":"cpus-per-task","style":{"code":true}},{"type":"text","text":" in SLURM) or multiprocessing (which I take to be  the "},{"type":"text","text":"nodes=??","style":{"code":true}},{"type":"text","text":" setting in SLURM)?"}]}]}],"thread_ts":"1616461788.005300","reply_count":4,"reply_users_count":2,"latest_reply":"1616466850.006000","reply_users":["U6A0PD8CR","US8V7JSKB"],"subscribed":false},{"client_msg_id":"28c7fb55-5e04-4a72-affc-edd2a50fa61a","type":"message","text":"Increase `cpus-per-task` first, and then `nodes`. *But* don't launch Julia with multiple threads, because Distributed isn't yet thread-safe, so bad things will happen. Instead do multiprocessing, with multiple Julia processes per node.","user":"U6A0PD8CR","ts":"1616466248.005400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tuh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Increase "},{"type":"text","text":"cpus-per-task","style":{"code":true}},{"type":"text","text":" first, and then "},{"type":"text","text":"nodes","style":{"code":true}},{"type":"text","text":". "},{"type":"text","text":"But","style":{"bold":true}},{"type":"text","text":" don't launch Julia with multiple threads, because Distributed isn't yet thread-safe, so bad things will happen. Instead do multiprocessing, with multiple Julia processes per node."}]}]}],"thread_ts":"1616461788.005300","parent_user_id":"US8V7JSKB"},{"client_msg_id":"3960a98f-2e29-44cd-a8eb-a3c43a807adc","type":"message","text":"When you say “don’t launch Julia with multiple threads”, is that just another way of saying, “don’t use multithreading; only use multiprocessing instead (for now)“?","user":"US8V7JSKB","ts":"1616466821.005600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lf/H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When you say “don’t launch Julia with multiple threads”, is that just another way of saying, “don’t use multithreading; only use multiprocessing instead (for now)“?"}]}]}],"thread_ts":"1616461788.005300","parent_user_id":"US8V7JSKB"},{"client_msg_id":"4ae7009f-a4bf-4e6a-bdb4-95e79e12f928","type":"message","text":"Yep","user":"U6A0PD8CR","ts":"1616466834.005800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"c6pN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yep"}]}]}],"thread_ts":"1616461788.005300","parent_user_id":"US8V7JSKB"},{"client_msg_id":"95169420-e088-48c8-8385-0159f3dfecb3","type":"message","text":"It's unfortunate","user":"U6A0PD8CR","ts":"1616466850.006000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GrBtQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's unfortunate"}]}]}],"thread_ts":"1616461788.005300","parent_user_id":"US8V7JSKB"}]