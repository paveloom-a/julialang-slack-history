[{"client_msg_id":"51ab4246-cdf8-4b64-bb6f-272e1f79c7d9","type":"message","text":"Could someone explain to me how to use a custom reduction function for @distributed loops? I’m trying to do something like\n```using Distributed\nxs = [1]\nreduce_x(xs,x) = x in xs ? xs : push!(xs,x)\nxs = @distributed (reduce_x) for _ in 1:10\n    rand(1:20)   # some costly function\nend```\nSo that a costly functions is executed in parallel on some workers, and the main process reduces those with a custom function `reduce_x` that extends an array `xs` in case the costly function returned a new unique result.","user":"UHZUXBR2P","ts":"1611838549.004000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"krOVQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could someone explain to me how to use a custom reduction function for @distributed loops? I’m trying to do something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Distributed\nxs = [1]\nreduce_x(xs,x) = x in xs ? xs : push!(xs,x)\nxs = @distributed (reduce_x) for _ in 1:10\n    rand(1:20)   # some costly function\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"So that a costly functions is executed in parallel on some workers, and the main process reduces those with a custom function "},{"type":"text","text":"reduce_x","style":{"code":true}},{"type":"text","text":" that extends an array "},{"type":"text","text":"xs","style":{"code":true}},{"type":"text","text":" in case the costly function returned a new unique result."}]}]}],"thread_ts":"1611838549.004000","reply_count":1,"reply_users_count":1,"latest_reply":"1611839711.004100","reply_users":["UHZUXBR2P"],"subscribed":false},{"client_msg_id":"50d42768-609d-4906-91b7-b7e9b3de5f05","type":"message","text":"Hmm, that seems to work\n```reduce_x(x::Int,y::Int) = x == y ? [x] : [x,y]\nreduce_x(x::Int,y::Array{Int,1}) = x in y ? y : push!(y,x)\nreduce_x(x::Array{Int,1},y::Int) = y in x ? x : push!(x,y)\n\nxs = @distributed (reduce_x) for i in 1:100\n    rand(1:5)\nend```","user":"UHZUXBR2P","ts":"1611839711.004100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IT+Be","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm, that seems to work\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"reduce_x(x::Int,y::Int) = x == y ? [x] : [x,y]\nreduce_x(x::Int,y::Array{Int,1}) = x in y ? y : push!(y,x)\nreduce_x(x::Array{Int,1},y::Int) = y in x ? x : push!(x,y)\n\nxs = @distributed (reduce_x) for i in 1:100\n    rand(1:5)\nend"}]}]}],"thread_ts":"1611838549.004000","parent_user_id":"UHZUXBR2P"}]