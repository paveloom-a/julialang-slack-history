[{"client_msg_id":"bfe4f465-3214-4ec9-bdd8-d91a7958746c","type":"message","text":"Hey <@U687RKK0E> and <@U67BXBF99> - is this the finalizers issue you discussed in the call?","user":"U6QGE7S86","ts":"1611791884.013900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DUB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey "},{"type":"user","user_id":"U687RKK0E"},{"type":"text","text":" and "},{"type":"user","user_id":"U67BXBF99"},{"type":"text","text":" - is this the finalizers issue you discussed in the call?"}]}]}],"thread_ts":"1611791884.013900","reply_count":13,"reply_users_count":2,"latest_reply":"1612483785.040400","reply_users":["U6QGE7S86","U687RKK0E"],"subscribed":false},{"client_msg_id":"acb0d431-67a7-49dc-963e-174971b302bf","type":"message","text":"Alright - any direct pointers/ readings/ exercises on how to begin tackling this issue? I have a passing knowledge of some things that may come up yn a systems programming course but I'm not afraid to try.","user":"U6QGE7S86","ts":"1611899967.016100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rVS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Alright - any direct pointers/ readings/ exercises on how to begin tackling this issue? I have a passing knowledge of some things that may come up yn a systems programming course but I'm not afraid to try."}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86"},{"client_msg_id":"732ece34-940c-4528-a979-899ab51161d5","type":"message","text":"In threading.c:jl_start_threads, we need to start one more thread with a custom thread function that waits on a condition and then runs a list of finalizers when signaled.","user":"U687RKK0E","ts":"1611939062.016500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VpopD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In threading.c:jl_start_threads, we need to start one more thread with a custom thread function that waits on a condition and then runs a list of finalizers when signaled."}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86"},{"client_msg_id":"005a674d-796c-40bc-bbd1-874011becbb5","type":"message","text":"Where we currently run finalizers at the end of gc_collect, instead signal the condition.","user":"U687RKK0E","ts":"1611939094.016700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rJNvT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Where we currently run finalizers at the end of gc_collect, instead signal the condition."}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b0d50cca-7457-4da7-b48f-b517ba6a89d2","type":"message","text":"(If julia is started with &gt;1 thread)","user":"U687RKK0E","ts":"1611939130.016900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2D6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(If julia is started with >1 thread)"}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86","reactions":[{"name":"+1","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"f53083a8-ffa8-4103-a144-599aad93791b","type":"message","text":"Alright - I'm back.\nMeatspace sucks for a while.\nAlright - brb crash coursing C for a sec because this C code still looks scary.","user":"U6QGE7S86","ts":"1612318296.017400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QFrP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Alright - I'm back.\nMeatspace sucks for a while.\nAlright - brb crash coursing C for a sec because this C code still looks scary."}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86","reactions":[{"name":"heart","users":["U687RKK0E"],"count":1}]},{"type":"message","subtype":"thread_broadcast","text":"(If anyone has a handy tutorial for advance C programming just a bit beyond structs it's more than welcome at this point)","user":"U6QGE7S86","ts":"1612318339.017600","thread_ts":"1611791884.013900","root":{"client_msg_id":"bfe4f465-3214-4ec9-bdd8-d91a7958746c","type":"message","text":"Hey <@U687RKK0E> and <@U67BXBF99> - is this the finalizers issue you discussed in the call?","user":"U6QGE7S86","ts":"1611791884.013900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DUB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey "},{"type":"user","user_id":"U687RKK0E"},{"type":"text","text":" and "},{"type":"user","user_id":"U67BXBF99"},{"type":"text","text":" - is this the finalizers issue you discussed in the call?"}]}]}],"thread_ts":"1611791884.013900","reply_count":13,"reply_users_count":2,"latest_reply":"1612483785.040400","reply_users":["U6QGE7S86","U687RKK0E"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"unB9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(If anyone has a handy tutorial for advance C programming just a bit beyond structs it's more than welcome at this point)"}]}]}],"client_msg_id":"942ca386-7081-4b68-b762-aaa53438a6f9"},{"client_msg_id":"e0fb884e-418e-45a4-a1fc-3f8f7bfb339e","type":"message","text":"Should the custom thread function go in `gc.c`, `threading.c` or `partr.c`?","user":"U6QGE7S86","ts":"1612376088.018800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vsR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Should the custom thread function go in "},{"type":"text","text":"gc.c","style":{"code":true}},{"type":"text","text":", "},{"type":"text","text":"threading.c","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"partr.c","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86"},{"client_msg_id":"8508e841-c246-4f74-838d-2984578ec36c","type":"message","text":"Should it mirror `partr.c:jl_threadfun` or be spawned right after the loop thread in `threading.c:jl_start_threads`","user":"U6QGE7S86","ts":"1612376177.019000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YI4VY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Should it mirror "},{"type":"text","text":"partr.c:jl_threadfun","style":{"code":true}},{"type":"text","text":" or be spawned right after the loop thread in "},{"type":"text","text":"threading.c:jl_start_threads","style":{"code":true}}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86"},{"client_msg_id":"be13e4c7-760c-45e9-9052-7176181d987d","type":"message","text":"It will be similar to jl_threadfun, since it needs most of the same init calls. I'd put it in gc.c since it's part of the GC.","user":"U687RKK0E","ts":"1612377985.019200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"azPH5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It will be similar to jl_threadfun, since it needs most of the same init calls. I'd put it in gc.c since it's part of the GC."}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86"},{"client_msg_id":"74b629a5-e83f-422e-9574-856f95ba12ba","type":"message","text":"oh, WOW turns out a `ptls` is a `PARTR thread local storage`  ?","user":"U6QGE7S86","ts":"1612483034.039700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iXsMb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, WOW turns out a "},{"type":"text","text":"ptls","style":{"code":true}},{"type":"text","text":" is a "},{"type":"text","text":"PARTR thread local storage","style":{"code":true}},{"type":"text","text":"  ?"}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b56975c0-29d1-4fb2-9664-3051f24ca496","type":"message","text":"Alright - I think I have something small, buggy but it's probs best to get the ball rolling.\n\nWhat's the Standard Operation Procedure for working this deep in Base for running tests and submitting a PR?","user":"U6QGE7S86","ts":"1612483558.039900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YV=w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Alright - I think I have something small, buggy but it's probs best to get the ball rolling.\n\nWhat's the Standard Operation Procedure for working this deep in Base for running tests and submitting a PR?"}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86"},{"client_msg_id":"065541fc-b74f-48a5-9495-3bd7a22382a9","type":"message","text":"Exciting! Put up a draft PR!","user":"U687RKK0E","ts":"1612483692.040100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/1iR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Exciting! Put up a draft PR!"}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86","reactions":[{"name":"heart","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"7449f879-3125-4a12-83c8-eaf3bbbd42be","type":"message","text":"OK. Just promise to take it slowly and not laugh at my C/misunderstandings - there's too many moving parts here but I'm willing to learn.","user":"U6QGE7S86","ts":"1612483785.040400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A6nDc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK. Just promise to take it slowly and not laugh at my C/misunderstandings - there's too many moving parts here but I'm willing to learn."}]}]}],"thread_ts":"1611791884.013900","parent_user_id":"U6QGE7S86"}]