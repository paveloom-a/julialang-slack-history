[{"client_msg_id":"33872a18-2f12-4c0b-becc-1e5a2d8b39af","type":"message","text":"I tested 1.5 and 1.6. But my problem isn't the exception, which is correct: it's how I could rethrow it *outside of the task* without losing the original backtrace.","user":"U67431ELR","ts":"1607972444.168600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Joo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tested 1.5 and 1.6. But my problem isn't the exception, which is correct: it's how I could rethrow it *outside of the task* without losing the original backtrace."}]}]}],"thread_ts":"1607972444.168600","reply_count":8,"reply_users_count":2,"latest_reply":"1607980415.172400","reply_users":["UP9P4JFNJ","U67431ELR"],"subscribed":false},{"client_msg_id":"1a859b99-22ec-4b3e-8bf2-d5a0ae6c8547","type":"message","text":"Why not copy `t.backtrace` or `put!` it through a channel?","user":"UP9P4JFNJ","ts":"1607978572.170900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tEgI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Why not copy "},{"type":"text","text":"t.backtrace","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"put!","style":{"code":true}},{"type":"text","text":" it through a channel?"}]}]}],"thread_ts":"1607972444.168600","parent_user_id":"U67431ELR"},{"client_msg_id":"ddcafc17-166a-4c6a-83f7-b8d21a2bed9c","type":"message","text":"But what can I do with the backtrace? Can I throw it somehow?","user":"U67431ELR","ts":"1607978633.171100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jQx+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But what can I do with the backtrace? Can I throw it somehow?"}]}]}],"thread_ts":"1607972444.168600","parent_user_id":"U67431ELR"},{"client_msg_id":"5394f8c0-643f-4d8c-b8fa-e839f5104bea","type":"message","text":"you could do\n```julia&gt; throw((t.exception, t.backtrace))\nERROR: (UndefVarError(:nonexistent), Union{Ptr{Nothing}, Base.InterpreterIP}[Ptr{Nothing} @0x0000000106b2b11f, Ptr{Nothing} @0x0000000106bc2685, Ptr{Nothing} @0x000000014a48c87a, Ptr{Nothing} @0x000000014a48c961, Ptr{Nothing} @0x000000014a48c97c, Ptr{Nothing} @0x0000000106bca09a])\nStacktrace:\n [1] top-level scope at REPL[97]:1```","user":"UP9P4JFNJ","ts":"1607979133.171300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Aaz6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you could do\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> throw((t.exception, t.backtrace))\nERROR: (UndefVarError(:nonexistent), Union{Ptr{Nothing}, Base.InterpreterIP}[Ptr{Nothing} @0x0000000106b2b11f, Ptr{Nothing} @0x0000000106bc2685, Ptr{Nothing} @0x000000014a48c87a, Ptr{Nothing} @0x000000014a48c961, Ptr{Nothing} @0x000000014a48c97c, Ptr{Nothing} @0x0000000106bca09a])\nStacktrace:\n [1] top-level scope at REPL[97]:1"}]}]}],"thread_ts":"1607972444.168600","parent_user_id":"U67431ELR"},{"client_msg_id":"02aebd0b-38aa-4855-ac1b-2711bd84cc9f","type":"message","text":"Mmm, what would the user do with that message? :confused:","user":"U67431ELR","ts":"1607979250.171600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h5YL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Mmm, what would the user do with that message? "},{"type":"emoji","name":"confused"}]}]}],"thread_ts":"1607972444.168600","parent_user_id":"U67431ELR"},{"client_msg_id":"3adf8bc7-0958-4dc5-8d1a-661bc2ad7875","type":"message","text":"you must somehow deliver `stacktrace(t.backtrace)` to the user. This is readable in the end. How you deliver it, depends on your situation. Throwing is one. One way with throwing would be to define your own exception, throwing the task `t` with it and then returning to the user the `stacktrace(t.backtrace)`. I don’t have a receipt for it.","user":"UP9P4JFNJ","ts":"1607980066.171800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0XhsJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you must somehow deliver "},{"type":"text","text":"stacktrace(t.backtrace) ","style":{"code":true}},{"type":"text","text":"to the user. This is readable in the end. How you deliver it, depends on your situation. Throwing is one. One way with throwing would be to define your own exception, throwing the task "},{"type":"text","text":"t","style":{"code":true}},{"type":"text","text":" with it and then returning to the user the "},{"type":"text","text":"stacktrace(t.backtrace)","style":{"code":true}},{"type":"text","text":". I don’t have a receipt for it."}]}]}],"thread_ts":"1607972444.168600","parent_user_id":"U67431ELR"},{"client_msg_id":"625ec6ab-7069-41e8-be4e-e59bc227f49c","type":"message","text":"for readability there is also `Base.print_stackframe`","user":"UP9P4JFNJ","ts":"1607980136.172000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dlNK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for readability there is also "},{"type":"text","text":"Base.print_stackframe","style":{"code":true}}]}]}],"thread_ts":"1607972444.168600","parent_user_id":"U67431ELR"},{"client_msg_id":"ef590b41-cb19-422e-b611-89ed2d2dea57","type":"message","text":"Thanks. Ideally I would throw an exception of the same type that the one that happened in the code he provided (`UndefVarError` in the example), with the stacktrace attached to it, so that users can catch particular exception types if needed. Returning something custom isn't ideal.","user":"U67431ELR","ts":"1607980324.172200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FQzQp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks. Ideally I would throw an exception of the same type that the one that happened in the code he provided ("},{"type":"text","text":"UndefVarError","style":{"code":true}},{"type":"text","text":" in the example), with the stacktrace attached to it, so that users can catch particular exception types if needed. Returning something custom isn't ideal."}]}]}],"thread_ts":"1607972444.168600","parent_user_id":"U67431ELR"},{"client_msg_id":"09d4f8ec-0a18-4dd3-a46a-f39601baa6d8","type":"message","text":"Sorry, I don’t find `print_stackframe` anymore. :unamused:","user":"UP9P4JFNJ","ts":"1607980415.172400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vCb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sorry, I don’t find "},{"type":"text","text":"print_stackframe","style":{"code":true}},{"type":"text","text":" anymore. "},{"type":"emoji","name":"unamused"}]}]}],"thread_ts":"1607972444.168600","parent_user_id":"U67431ELR"}]