[{"client_msg_id":"79df7517-65a6-4543-9a12-2d84215c2343","type":"message","text":"I want to finally parallelize my code and to gauge my success I wish to see how it scales with the number of threads. Is there a way of accomplishing this without restarting Julia over and over again?\n\nI was thinking maybe starting Julia with the maximum number of threads, then in the `Threads.@threads` loop only work in the first `n` threads, letting the other idle. Will this work the way I expect?","user":"UC6LC14MA","ts":"1612855279.080300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+g2/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I want to finally parallelize my code and to gauge my success I wish to see how it scales with the number of threads. Is there a way of accomplishing this without restarting Julia over and over again?\n\nI was thinking maybe starting Julia with the maximum number of threads, then in the "},{"type":"text","text":"Threads.@threads","style":{"code":true}},{"type":"text","text":" loop only work in the first "},{"type":"text","text":"n","style":{"code":true}},{"type":"text","text":" threads, letting the other idle. Will this work the way I expect?"}]}]}],"thread_ts":"1612855279.080300","reply_count":3,"reply_users_count":2,"latest_reply":"1612865345.081700","reply_users":["UC7AF7NSU","UC6LC14MA"],"subscribed":false},{"client_msg_id":"9c4a0a6b-1488-4206-86ab-40671bd2d265","type":"message","text":"* You can use a data-parallel API with `basesize` <https://juliafolds.github.io/data-parallelism/howto/faq/#can_i_change_the_number_of_execution_threads_without_restarting_julia>\n\n* `FoldsThreads.TaskPoolEx` has `ntasks` that can put explicit limit. It's not very efficient but it could be good enough for some quick tests. <https://juliafolds.github.io/FoldsThreads.jl/dev/#FoldsThreads.TaskPoolEx>\n\n* But setting `--threads` is the most reliable (and sometimes the only available) approach.","user":"UC7AF7NSU","ts":"1612860458.081300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5VU6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"* You can use a data-parallel API with "},{"type":"text","text":"basesize","style":{"code":true}},{"type":"text","text":" "},{"type":"link","url":"https://juliafolds.github.io/data-parallelism/howto/faq/#can_i_change_the_number_of_execution_threads_without_restarting_julia"},{"type":"text","text":"\n\n* "},{"type":"text","text":"FoldsThreads.TaskPoolEx","style":{"code":true}},{"type":"text","text":" has "},{"type":"text","text":"ntasks","style":{"code":true}},{"type":"text","text":" that can put explicit limit. It's not very efficient but it could be good enough for some quick tests. "},{"type":"link","url":"https://juliafolds.github.io/FoldsThreads.jl/dev/#FoldsThreads.TaskPoolEx"},{"type":"text","text":"\n\n* But setting "},{"type":"text","text":"--threads","style":{"code":true}},{"type":"text","text":" is the most reliable (and sometimes the only available) approach."}]}]}],"thread_ts":"1612855279.080300","parent_user_id":"UC6LC14MA"},{"client_msg_id":"c7f29145-e8c9-4ae4-bfb8-3f926c03c5cd","type":"message","text":"Interesting, thanks! My use case is more `exp(A)*v` for various linear operators `A`, so I usually try to be clever how I divide things into logical chunks (rather than reduction-type operations), but maybe I can find some inspiration here.","user":"UC6LC14MA","ts":"1612861283.081500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rP+3h","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Interesting, thanks! My use case is more "},{"type":"text","text":"exp(A)*v","style":{"code":true}},{"type":"text","text":" for various linear operators "},{"type":"text","text":"A","style":{"code":true}},{"type":"text","text":", so I usually try to be clever how I divide things into logical chunks (rather than reduction-type operations), but maybe I can find some inspiration here."}]}]}],"thread_ts":"1612855279.080300","parent_user_id":"UC6LC14MA"},{"client_msg_id":"10096946-d3d9-428e-8061-5a1292f190ab","type":"message","text":"`@floop` is a superset of `@threads`. it can handle in-place operations.","user":"UC7AF7NSU","ts":"1612865345.081700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"avhqL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@floop","style":{"code":true}},{"type":"text","text":" is a superset of "},{"type":"text","text":"@threads","style":{"code":true}},{"type":"text","text":". it can handle in-place operations."}]}]}],"thread_ts":"1612855279.080300","parent_user_id":"UC6LC14MA"}]