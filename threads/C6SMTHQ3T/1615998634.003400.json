[{"client_msg_id":"ae8b0991-c834-4047-8f9b-d074623265a5","type":"message","text":"Want to check my understanding with some experts. I'm using Threads.@threads in for loops at various locations in a program. If there is a point within a loop which is already threaded, I probably shouldn't start another Threads.@threads for... at that point as well, correct? I.e. it should be one or the other and it's a question of where the overhead and memory hit is most worth it for the parallelism. Doing it in both spots will just clog the threads so that the one which *should* be multithreaded can't because the thread is busy?","user":"U01BD7YGV27","ts":"1615998634.003400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sII","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Want to check my understanding with some experts. I'm using Threads.@threads in for loops at various locations in a program. If there is a point within a loop which is already threaded, I probably shouldn't start another Threads.@threads for... at that point as well, correct? I.e. it should be one or the other and it's a question of where the overhead and memory hit is most worth it for the parallelism. Doing it in both spots will just clog the threads so that the one which "},{"type":"text","text":"should","style":{"bold":true}},{"type":"text","text":" be multithreaded can't because the thread is busy?"}]}]}],"thread_ts":"1615998634.003400","reply_count":8,"reply_users_count":3,"latest_reply":"1615999087.006000","reply_users":["U011V2YN59N","U67BJLYCS","U01BD7YGV27"],"subscribed":false},{"client_msg_id":"70816ef5-2eec-40a5-ac94-11322a045e55","type":"message","text":"note: definitely not an expert\n\nyeah you usually want to multithread at the highest level only, unless you are doing multiprocessing also","user":"U011V2YN59N","ts":"1615998719.003900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SKPuu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"note: definitely not an expert\n\nyeah you usually want to multithread at the highest level only, unless you are doing multiprocessing also"}]}]}],"thread_ts":"1615998634.003400","parent_user_id":"U01BD7YGV27"},{"client_msg_id":"30f7ed80-f3b6-4531-9431-85906d259cbb","type":"message","text":"I find that usually I have some process that is mostly serial, and then I do that many times in an embarassingly parallel way","user":"U011V2YN59N","ts":"1615998748.004100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"m4AF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I find that usually I have some process that is mostly serial, and then I do that many times in an embarassingly parallel way"}]}]}],"thread_ts":"1615998634.003400","parent_user_id":"U01BD7YGV27"},{"client_msg_id":"84298bd8-ec0c-4391-af9e-33656ce7dd97","type":"message","text":"so that embarassingly parallel part is the part to stick your `Threads.@threads` annotation to","user":"U011V2YN59N","ts":"1615998774.004500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+d60t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so that embarassingly parallel part is the part to stick your "},{"type":"text","text":"Threads.@threads","style":{"code":true}},{"type":"text","text":" annotation to"}]}]}],"thread_ts":"1615998634.003400","parent_user_id":"U01BD7YGV27"},{"client_msg_id":"5fdb57b6-2ce3-49fe-8fc8-212a3d89258a","type":"message","text":"Two notes:\n1. nested `@threads` is fine, we turn the inner `@threads` loop of","user":"U67BJLYCS","ts":"1615998795.005000","team":"T68168MUP","edited":{"user":"U67BJLYCS","ts":"1615998810.000000"},"blocks":[{"type":"rich_text","block_id":"pZg+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Two notes:\n1. nested "},{"type":"text","text":"@threads","style":{"code":true}},{"type":"text","text":" is fine, we turn the inner "},{"type":"text","text":"@threads","style":{"code":true}},{"type":"text","text":" loop of"}]}]}],"thread_ts":"1615998634.003400","parent_user_id":"U01BD7YGV27"},{"client_msg_id":"9de0b284-d4e2-4769-b8b2-33c05226221a","type":"message","text":"oh, TIL","user":"U011V2YN59N","ts":"1615998813.005400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VYPJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, TIL"}]}]}],"thread_ts":"1615998634.003400","parent_user_id":"U01BD7YGV27"},{"client_msg_id":"a2eff5d7-04e9-425a-9a7a-f1ec62f556e6","type":"message","text":"2. Julia uses `Task` as a unit of concurrency, you can run many task over a group of N threads","user":"U67BJLYCS","ts":"1615998846.005600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HQyaY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"2. Julia uses "},{"type":"text","text":"Task","style":{"code":true}},{"type":"text","text":" as a unit of concurrency, you can run many task over a group of N threads"}]}]}],"thread_ts":"1615998634.003400","parent_user_id":"U01BD7YGV27"},{"client_msg_id":"3e62c9d9-1f41-419e-a159-72c565000e7f","type":"message","text":"so even if you are not using `@threads` we don't oversubscribe the system.","user":"U67BJLYCS","ts":"1615998878.005800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"++m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so even if you are not using "},{"type":"text","text":"@threads","style":{"code":true}},{"type":"text","text":" we don't oversubscribe the system."}]}]}],"thread_ts":"1615998634.003400","parent_user_id":"U01BD7YGV27"},{"client_msg_id":"689f3190-ff37-4d5e-a1d5-fe251c08e8d3","type":"message","text":"Ahh I see. Thanks so much for the help!","user":"U01BD7YGV27","ts":"1615999087.006000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YNXt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ahh I see. Thanks so much for the help!"}]}]}],"thread_ts":"1615998634.003400","parent_user_id":"U01BD7YGV27"}]