[{"client_msg_id":"52a8859f-ac34-4364-8bc0-feea29138fe3","type":"message","text":"On a tangent, when should I use `Threads.@threads`, and when is `Threads.@spawn` more appropriate?","user":"UC6LC14MA","ts":"1612855390.081000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LGC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"On a tangent, when should I use "},{"type":"text","text":"Threads.@threads","style":{"code":true}},{"type":"text","text":", and when is "},{"type":"text","text":"Threads.@spawn","style":{"code":true}},{"type":"text","text":" more appropriate?"}]}]}],"thread_ts":"1612855390.081000","reply_count":6,"reply_users_count":3,"latest_reply":"1612894378.083300","reply_users":["U8D9768Q6","UC6LC14MA","U6740K1SP"],"subscribed":false},{"client_msg_id":"70f91371-32e1-4952-9583-103eeaf2c8a4","type":"message","text":"One major difference is that `Threads.@threads` is not composable. I.e. you can't nest them","user":"U8D9768Q6","ts":"1612885836.082000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/hDS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"One major difference is that "},{"type":"text","text":"Threads.@threads","style":{"code":true}},{"type":"text","text":" is not composable. I.e. you can't nest them"}]}]}],"thread_ts":"1612855390.081000","parent_user_id":"UC6LC14MA"},{"client_msg_id":"989dc4df-25a4-47a5-a024-c016b1c578c8","type":"message","text":"Right, I see how that will be useful for multidimensional loops","user":"UC6LC14MA","ts":"1612886598.082200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vawMi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right, I see how that will be useful for multidimensional loops"}]}]}],"thread_ts":"1612855390.081000","parent_user_id":"UC6LC14MA"},{"client_msg_id":"0809e46e-cc17-4234-aa30-0791e05f62de","type":"message","text":"Yeah, `@threads for` is a static schedule — and it splits your work (the iteration space) up into `nthreaads()` parts (based upon indexing).","user":"U6740K1SP","ts":"1612893338.082600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"R2R3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, "},{"type":"text","text":"@threads for","style":{"code":true}},{"type":"text","text":" is a static schedule — and it splits your work (the iteration space) up into "},{"type":"text","text":"nthreaads()","style":{"code":true}},{"type":"text","text":" parts (based upon indexing)."}]}]}],"thread_ts":"1612855390.081000","parent_user_id":"UC6LC14MA"},{"client_msg_id":"e82efd1e-a3ed-4cad-aa5c-c829c40e46a0","type":"message","text":"As compared to `for …; Threads.@spawn` , which would create one task per iteration that can be consumed by any thread and does not require an indexable iterable.","user":"U6740K1SP","ts":"1612893386.082800","team":"T68168MUP","edited":{"user":"U6740K1SP","ts":"1612893820.000000"},"blocks":[{"type":"rich_text","block_id":"VEcg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"As compared to "},{"type":"text","text":"for …; Threads.@spawn","style":{"code":true}},{"type":"text","text":" , which would create one task per iteration that can be consumed by any thread and does not require an indexable iterable."}]}]}],"thread_ts":"1612855390.081000","parent_user_id":"UC6LC14MA"},{"client_msg_id":"70d2f106-d64e-498f-8d42-6e94a83a5af6","type":"message","text":"`@threads` is good for _lots_ of small iterations that take roughly the same amount of time. Manually `@spawn`ing tasks is good for beefier individual work-items that can have wildly different runtimes.","user":"U6740K1SP","ts":"1612893519.083000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"krVQ4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"`@threads` is good for "},{"type":"text","text":"lots","style":{"italic":true}},{"type":"text","text":" of small iterations that take roughly the same amount of time. Manually "},{"type":"text","text":"@spawn","style":{"code":true}},{"type":"text","text":"ing tasks is good for beefier individual work-items that can have wildly different runtimes."}]}]}],"thread_ts":"1612855390.081000","parent_user_id":"UC6LC14MA"},{"client_msg_id":"d044ae81-5f5f-4d71-bb33-96cd83bf1fa0","type":"message","text":"FLoops.jl / ThreadsX.jl / Folds.jl / Transducers.jl cover both of these spaces","user":"U8D9768Q6","ts":"1612894378.083300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2JKBr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"FLoops.jl / ThreadsX.jl / Folds.jl / Transducers.jl cover both of these spaces"}]}]}],"thread_ts":"1612855390.081000","parent_user_id":"UC6LC14MA"}]