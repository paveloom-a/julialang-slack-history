[{"client_msg_id":"f542e946-0053-4e48-bc8c-b72bef977de3","type":"message","text":"That things like whether a space is shown after commas in lists of say dicts and type parameters are changed between Julia versions (Julia 1.6 added them after commas). Either choice to me seems perfectly fine and I generally don't care, but by changing it between versions it now broke about a gazillion doc tests in the packages I maintain, _and_ now I can't have doc tests that work on all the Julia versions that the package supports. Those kind of small changes might look like an improvement in isolation, but often IMHO just the fact that this can cause a lot of churn downstream might make such cosmetic changes not worth it.","user":"U68UUUFPS","ts":"1617557721.268800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0oz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That things like whether a space is shown after commas in lists of say dicts and type parameters are changed between Julia versions (Julia 1.6 added them after commas). Either choice to me seems perfectly fine and I generally don't care, but by changing it between versions it now broke about a gazillion doc tests in the packages I maintain, "},{"type":"text","text":"and","style":{"italic":true}},{"type":"text","text":" now I can't have doc tests that work on all the Julia versions that the package supports. Those kind of small changes might look like an improvement in isolation, but often IMHO just the fact that this can cause a lot of churn downstream might make such cosmetic changes not worth it."}]}]}],"thread_ts":"1617557721.268800","reply_count":8,"reply_users_count":6,"latest_reply":"1617584956.271600","reply_users":["UDB26738Q","U68UUUFPS","U01HD5VFXJM","U6A936746","UD0NS8PDF","USU9FRPEU"],"is_locked":false,"subscribed":false,"reactions":[{"name":"100","users":["UDXST8ARK","UJ7DVTVQ8","UB7JS9CHF","U695B1S2X"],"count":4}]},{"client_msg_id":"cfec4185-5e14-4304-a8e6-dcc0e78c4ead","type":"message","text":"but this also means you're testing someone else's code :upside_down_face: (to be clear, I also had this kind of issue several times in the past and started using regex matching instead of exact matching, useful especially for whitespaces changes)","user":"UDB26738Q","ts":"1617559031.269200","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1617559058.000000"},"blocks":[{"type":"rich_text","block_id":"A5Ydz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but this also means you're testing someone else's code "},{"type":"emoji","name":"upside_down_face"},{"type":"text","text":" (to be clear, I also had this kind of issue several times in the past and started using regex matching instead of exact matching, useful especially for whitespaces changes)"}]}]}],"thread_ts":"1617557721.268800","parent_user_id":"U68UUUFPS","reactions":[{"name":"+1","users":["UE4DPAS4W"],"count":1}]},{"client_msg_id":"6ea01558-01bd-4333-88b5-fea972812afc","type":"message","text":"I mean, sure, I can find lots of ways to fix this. But that is not a good use of my time... I want to use the time I have for Julia to add features, not adjust things for cosmetic changes that in my mind add almost no value one way or another.","user":"U68UUUFPS","ts":"1617559258.269500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oNRkw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I mean, sure, I can find lots of ways to fix this. But that is not a good use of my time... I want to use the time I have for Julia to add features, not adjust things for cosmetic changes that in my mind add almost no value one way or another."}]}]}],"thread_ts":"1617557721.268800","parent_user_id":"U68UUUFPS","reactions":[{"name":"point_up","users":["U6A936746","U695B1S2X","UDXST8ARK","UAUCGGD6C","URN898S15"],"count":5}]},{"client_msg_id":"7e8174ba-00b9-4422-998d-fdda22595ffd","type":"message","text":"I'd say that's a issue with the idea of relying on doctests because it's testing the display, not the underlying data. No reason the display should be as stable as the underlying API, because display is intended for human use.","user":"U01HD5VFXJM","ts":"1617563077.269800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Fh=A4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd say that's a issue with the idea of relying on doctests because it's testing the display, not the underlying data. No reason the display should be as stable as the underlying API, because display is intended for human use."}]}]}],"thread_ts":"1617557721.268800","parent_user_id":"U68UUUFPS"},{"client_msg_id":"c4720f40-beb9-40d7-a3a2-acc63bee5ce6","type":"message","text":"Yeah, sure.\nBut still I agree with David.\nEven through exact string representation shouldn't be restricted by SemVer, it also shouldn't be changed without a good reason.\nChanging `Tuple{Int,Int}` to `Tuple{Int, Int}` is not a good reason.\nChanging\n`Array{Int,2}` to `Matrix{Int}` is.","user":"U6A936746","ts":"1617563603.270000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"45kD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, sure.\nBut still I agree with David.\nEven through exact string representation shouldn't be restricted by SemVer, it also shouldn't be changed without a good reason.\nChanging "},{"type":"text","text":"Tuple{Int,Int} ","style":{"code":true}},{"type":"text","text":"to "},{"type":"text","text":"Tuple{Int, Int}","style":{"code":true}},{"type":"text","text":" is not a good reason.\nChanging\n"},{"type":"text","text":"Array{Int,2}","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"Matrix{Int} ","style":{"code":true}},{"type":"text","text":"is."}]}]}],"thread_ts":"1617557721.268800","parent_user_id":"U68UUUFPS"},{"client_msg_id":"e11f1f23-5c59-4eab-ab77-42dea0e21b15","type":"message","text":"Though this isn't the first time this happened. So I have already mostly restricted my doctests to run on a single Julia version.\n\nI'm general I am not a fan of how doctests work.\nI kind of wish they just checked that the code didn't error.\nMaybe optional a fuzzy string match threshold to see they are not totally wrong. But default to none\n\nLeave the actual testing for the actual tests, where hopefully it will be more clear and direct about what is being tested","user":"U6A936746","ts":"1617563858.270200","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1617563925.000000"},"blocks":[{"type":"rich_text","block_id":"JiZB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Though this isn't the first time this happened. So I have already mostly restricted my doctests to run on a single Julia version.\n\nI'm general I am not a fan of how doctests work.\nI kind of wish they just checked that the code didn't error.\nMaybe optional a fuzzy string match threshold to see they are not totally wrong. But default to none\n\nLeave the actual testing for the actual tests, where hopefully it will be more clear and direct about what is being tested"}]}]}],"thread_ts":"1617557721.268800","parent_user_id":"U68UUUFPS","reactions":[{"name":"point_up","users":["U695B1S2X","URN898S15"],"count":2}]},{"client_msg_id":"459608ae-65cd-43b1-b135-66bfb7d92aa4","type":"message","text":"It’s a pain, but let me defend doctests. If they do a decent job of explaining what a function does, then they also (sometimes) make it really obvious when someone else’s PR is about to break something considered public. In a rush people have a tendency to comment out or remove offending tests buried in some arcane testing loop. But changing the headline description of what the thing does is a bigger step.","user":"UD0NS8PDF","ts":"1617565563.270600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aOYbL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It’s a pain, but let me defend doctests. If they do a decent job of explaining what a function does, then they also (sometimes) make it really obvious when someone else’s PR is about to break something considered public. In a rush people have a tendency to comment out or remove offending tests buried in some arcane testing loop. But changing the headline description of what the thing does is a bigger step."}]}]}],"thread_ts":"1617557721.268800","parent_user_id":"U68UUUFPS","reactions":[{"name":"+1","users":["U01HD5VFXJM","U66M57AN4"],"count":2}]},{"client_msg_id":"a2ca1f24-bbe8-46fe-9cf7-6c84a743159b","type":"message","text":"&gt; In a rush people have a tendency to comment out or remove offending tests buried in some arcane testing loop.\n\nIdk. I am dubious of this.\nI see where you are coming from but I am not sure the premises of removed tests is common.\n\nI have never seen this done.\nAnd if I did see it, it wouldn't pass code review.\nWhenever I have seen tests removed it's been for a good reason, e.g. because it's testing internals that were removed.\n\nOn the other hand I have seen doctests disabled completely or removed individually because they are flaky to some unrelated change in another package or Julia itself.\nOr because they were setup wrong (mostly not dev'ing parent directory in the `docs/Manifest.toml`)","user":"U6A936746","ts":"1617566272.270800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zYMLP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"> In a rush people have a tendency to comment out or remove offending tests buried in some arcane testing loop.\n\nIdk. I am dubious of this.\nI see where you are coming from but I am not sure the premises of removed tests is common.\n\nI have never seen this done.\nAnd if I did see it, it wouldn't pass code review.\nWhenever I have seen tests removed it's been for a good reason, e.g. because it's testing internals that were removed.\n\nOn the other hand I have seen doctests disabled completely or removed individually because they are flaky to some unrelated change in another package or Julia itself.\nOr because they were setup wrong (mostly not dev'ing parent directory in the `docs/Manifest.toml`)"}]}]}],"thread_ts":"1617557721.268800","parent_user_id":"U68UUUFPS"},{"client_msg_id":"a5f1f477-6608-4fad-9118-22b610fe5076","type":"message","text":"I headed this off by in a couple of packages when I saw the nightly tests start to fail. My solution was just to use `||` so that the display could be either this or that.","user":"USU9FRPEU","ts":"1617584956.271600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3Zo5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I headed this off by in a couple of packages when I saw the nightly tests start to fail. My solution was just to use "},{"type":"text","text":"||","style":{"code":true}},{"type":"text","text":" so that the display could be either this or that."}]}]}],"thread_ts":"1617557721.268800","parent_user_id":"U68UUUFPS"}]