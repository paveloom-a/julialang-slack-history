[{"client_msg_id":"dce514c4-5f65-4a5a-8868-d90fab820021","type":"message","text":"The use of `@pure` in base/irrationals.jl is pretty boarderline.\nIts well outside what is allowed by the `@pure` functions can’t call generic functions.\nIt also is really boarderline on the rule that all inputs should be so constrained that only know methods should be called (not user defined able methods). It makes it if you say that user can’t define methods on `Rational{T}` for their own type `T`.","user":"U6A936746","ts":"1608676887.119900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"S/5K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The use of "},{"type":"text","text":"@pure","style":{"code":true}},{"type":"text","text":" in base/irrationals.jl is pretty boarderline.\nIts well outside what is allowed by the "},{"type":"text","text":"@pure","style":{"code":true}},{"type":"text","text":" functions can’t call generic functions.\nIt also is really boarderline on the rule that all inputs should be so constrained that only know methods should be called (not user defined able methods). It makes it if you say that user can’t define methods on "},{"type":"text","text":"Rational{T}","style":{"code":true}},{"type":"text","text":" for their own type "},{"type":"text","text":"T","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1608676887.119900","reply_count":5,"reply_users_count":2,"latest_reply":"1608678093.123900","reply_users":["U0179G7FG4F","U6A936746"],"subscribed":false},{"client_msg_id":"cfdd759c-9eda-43c7-8e74-52684e799a0d","type":"message","text":"Is there any chance we could kill `@pure` and replace it with a version that people could actually use and not be wrong? (If we really need it, we could introduce a `@__DO_NOT_EVER_USE_PURE`)","user":"U0179G7FG4F","ts":"1608677356.122500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"29ZJj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there any chance we could kill "},{"type":"text","text":"@pure","style":{"code":true}},{"type":"text","text":" and replace it with a version that people could actually use and not be wrong? (If we really need it, we could introduce a "},{"type":"text","text":"@__DO_NOT_EVER_USE_PURE","style":{"code":true}},{"type":"text","text":")"}]}]}],"thread_ts":"1608676887.119900","parent_user_id":"U6A936746"},{"client_msg_id":"7e47a6d9-f8b6-44b9-bffd-0fb18f8e067a","type":"message","text":"I wish `@pure` had a scarier name, like `@mt_ignorant_nosides`\n(Method Table Ignorant, No side effects).","user":"U6A936746","ts":"1608677507.122800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fxq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I wish "},{"type":"text","text":"@pure","style":{"code":true}},{"type":"text","text":" had a scarier name, like "},{"type":"text","text":"@mt_ignorant_nosides","style":{"code":true}},{"type":"text","text":"\n(Method Table Ignorant, No side effects)."}]}]}],"thread_ts":"1608676887.119900","parent_user_id":"U6A936746"},{"client_msg_id":"3abc64dd-4aa9-41f9-95e7-e22804ec884f","type":"message","text":"&gt;  Is there any chance we could kill `@pure` and replace it with a version that people could actually use and not be wrong?\n&gt; (If we really need it, we could introduce a `@__DO_NOT_EVER_USE_PURE`)\nWe already have it, it is just normal functions.\nAnd the  `@__DO_NOT_EVER_USE_PURE`  is `@pure`\nthe times that someone needs `@pure` are so so rare.\nI would not be surprised if we can actually remove them from `base/irational.jl` now.","user":"U6A936746","ts":"1608677611.123000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KZR","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":" Is there any chance we could kill "},{"type":"text","text":"@pure","style":{"code":true}},{"type":"text","text":" and replace it with a version that people could actually use and not be wrong?\n(If we really need it, we could introduce a "},{"type":"text","text":"@__DO_NOT_EVER_USE_PURE","style":{"code":true}},{"type":"text","text":")"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nWe already have it, it is just normal functions.\nAnd the  "},{"type":"text","text":"@__DO_NOT_EVER_USE_PURE","style":{"code":true}},{"type":"text","text":"  is "},{"type":"text","text":"@pure","style":{"code":true}},{"type":"text","text":"\nthe times that someone needs "},{"type":"text","text":"@pure","style":{"code":true}},{"type":"text","text":" are so so rare.\nI would not be surprised if we can actually remove them from "},{"type":"text","text":"base/irational.jl","style":{"code":true}},{"type":"text","text":" now."}]}]}],"thread_ts":"1608676887.119900","parent_user_id":"U6A936746"},{"client_msg_id":"a25d3f8a-309b-4afb-a3d3-31d4a75e85dd","type":"message","text":"right, but since people seem to want to mark functions `@pure`, we could be nice and give them a macro that doesn't do anything","user":"U0179G7FG4F","ts":"1608677664.123200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XG4vR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"right, but since people seem to want to mark functions "},{"type":"text","text":"@pure","style":{"code":true}},{"type":"text","text":", we could be nice and give them a macro that doesn't do anything"}]}]}],"thread_ts":"1608676887.119900","parent_user_id":"U6A936746"},{"client_msg_id":"6678552e-1d91-4b2c-bfb7-dc6fb8e2d89e","type":"message","text":"Its kind of sad that telling the compiler a function is pure doesn’t actually do anything useful.\nI think someone explained it as the compiler can workout purity just fine on its own, so you telling it doesn’t help, if just gives you the chance to make a mistake and lie to it.\n(this means normal purity, not the more agressive thing that `@pure`  requires)","user":"U6A936746","ts":"1608678093.123900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NkkXm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Its kind of sad that telling the compiler a function is pure doesn’t actually do anything useful.\nI think someone explained it as the compiler can workout purity just fine on its own, so you telling it doesn’t help, if just gives you the chance to make a mistake and lie to it.\n(this means normal purity, not the more agressive thing that "},{"type":"text","text":"@pure","style":{"code":true}},{"type":"text","text":"  requires)"}]}]}],"thread_ts":"1608676887.119900","parent_user_id":"U6A936746"}]