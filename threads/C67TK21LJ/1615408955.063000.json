[{"client_msg_id":"4bca63fa-2c41-49be-be23-742e05c1feec","type":"message","text":"I really want to understand when and why things precompile. I am frustrated of waiting for  precompilation of the same plotting libraries for each script/experiment/plot.","user":"U6C937ENB","ts":"1615408955.063000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tj8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I really want to understand when and why things precompile. I am frustrated of waiting for  precompilation of the same plotting libraries for each script/experiment/plot."}]}]}],"thread_ts":"1615408955.063000","reply_count":13,"reply_users_count":7,"latest_reply":"1615477287.069500","reply_users":["U881D0W2C","UDDUC4R1Q","U6A936746","U67D54KS8","U6C937ENB","UPSSPPBFV","U6740K1SP"],"subscribed":false},{"client_msg_id":"1c54b647-c1a5-4b9b-bea9-500fff3fbd27","type":"message","text":"IMO, we *really* need a “per-environment caching” or something like that. On the one hand, one is inclined to use environments as much as possible (i.e. one is supposed to think of them as “low-cost”). On the other hand, switching between environments can easily trigger re-precompilation if the same package is in both environments (which makes them “high-cost” effectively).","user":"U881D0W2C","ts":"1615410941.063100","team":"T68168MUP","edited":{"user":"U881D0W2C","ts":"1615410969.000000"},"blocks":[{"type":"rich_text","block_id":"ddgB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"IMO, we "},{"type":"text","text":"really","style":{"bold":true}},{"type":"text","text":" need a “per-environment caching” or something like that. On the one hand, one is inclined to use environments as much as possible (i.e. one is supposed to think of them as “low-cost”). On the other hand, switching between environments can easily trigger re-precompilation if the same package is in both environments (which makes them “high-cost” effectively)."}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"},{"client_msg_id":"91205ada-989a-405f-8542-7af62e1f4a2e","type":"message","text":"I thought we had that as of one of the minor releases","user":"UDDUC4R1Q","ts":"1615411665.063400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oUr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I thought we had that as of one of the minor releases"}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"},{"client_msg_id":"1c16ba01-09b3-423a-b8f1-7aba7bf498a0","type":"message","text":"<@U67D54KS8>  added per environment caching in julia 1.3. iirc","user":"U6A936746","ts":"1615412950.063600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qcv/r","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U67D54KS8"},{"type":"text","text":"  added per environment caching in julia 1.3. iirc"}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB","reactions":[{"name":"+1","users":["U881D0W2C","UKG4WF8PJ","U6740K1SP"],"count":3}]},{"client_msg_id":"b6a8351c-4624-41ba-a9a9-1e3e019f41d7","type":"message","text":"And since 1.3 I haven't seen recompilation triggered just from changing environments","user":"U6A936746","ts":"1615412989.063800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8mW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And since 1.3 I haven't seen recompilation triggered just from changing environments"}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"},{"client_msg_id":"b60944bc-46be-4594-94ae-ade64fa4b2ff","type":"message","text":"Yep","user":"U67D54KS8","ts":"1615413074.064000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ya1m4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yep"}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"},{"client_msg_id":"93c8e9e5-c717-4984-b10c-9883ab848826","type":"message","text":"but then, positively, _what_ triggers recompile?","user":"U6C937ENB","ts":"1615413332.064200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q7+DM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but then, positively, "},{"type":"text","text":"what","style":{"italic":true}},{"type":"text","text":" triggers recompile?"}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"},{"client_msg_id":"4a206bab-9f3e-4175-9747-fb610d16c0ed","type":"message","text":"When none of the existing cache files matches with what is needed. It can be due to another julia version being used, another version of a dependency being used, etc","user":"U67D54KS8","ts":"1615413500.064400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hMQi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When none of the existing cache files matches with what is needed. It can be due to another julia version being used, another version of a dependency being used, etc"}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"},{"client_msg_id":"95afcdcb-f1a1-4cb4-bc9f-ca8036f5b58e","type":"message","text":"So how is decided if the environment uses a newer version ?","user":"U6C937ENB","ts":"1615414254.065100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aNC8G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So how is decided if the environment uses a newer version ?"}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"},{"client_msg_id":"03051d40-b723-44c7-97d7-8c3d66f396c8","type":"message","text":"It uses the one that you see in Pkg.status","user":"U67D54KS8","ts":"1615443080.065500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LOaMi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It uses the one that you see in Pkg.status"}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"},{"client_msg_id":"67a63527-0d77-4cf9-9303-e674632ce787","type":"message","text":"I never see precompilation happening unless I do a `Pkg.update` in that environment first.","user":"UPSSPPBFV","ts":"1615446803.065700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rP2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I never see precompilation happening unless I do a "},{"type":"text","text":"Pkg.update","style":{"code":true}},{"type":"text","text":" in that environment first."}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"},{"client_msg_id":"f3aa258e-63a1-4724-8988-e635ef357a97","type":"message","text":"Packages loaded from the global shared environment can trigger precompilation when loaded together with packages from different environments I guess.","user":"U881D0W2C","ts":"1615447196.065900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fNrb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Packages loaded from the global shared environment can trigger precompilation when loaded together with packages from different environments I guess."}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB","reactions":[{"name":"heart","users":["U6C937ENB"],"count":1}]},{"client_msg_id":"b43a6b90-a30e-48b1-8901-71cfca43e453","type":"message","text":"I.e. switching between environments can still trigger precompilation when using packages from a shared env, right?","user":"U881D0W2C","ts":"1615447247.066100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B1WqB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I.e. switching between environments can still trigger precompilation when using packages from a shared env, right?"}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"},{"client_msg_id":"2df92c6e-6d9a-4a3c-890d-d067a3a68b8a","type":"message","text":"It’s also an LRU cache — 10 deep IIRC","user":"U6740K1SP","ts":"1615477287.069500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kxsr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It’s also an LRU cache — 10 deep IIRC"}]}]}],"thread_ts":"1615408955.063000","parent_user_id":"U6C937ENB"}]