[{"client_msg_id":"f6f20c71-9994-4866-83a5-fb4d9a63d05d","type":"message","text":":grapes: 1.6 type inference regressions.\nSome things that used to infer to down to 1 type are now infering down down to a small union.\nI think something has changed in constant folding and type-inference","user":"U6A936746","ts":"1616695258.131600","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1616695365.000000"},"blocks":[{"type":"rich_text","block_id":"Tj5","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"grapes"},{"type":"text","text":" 1.6 type inference regressions.\nSome things that used to infer to down to 1 type are now infering down down to a small union.\nI think something has changed in constant folding and type-inference"}]}]}],"thread_ts":"1616695258.131600","reply_count":8,"reply_users_count":3,"latest_reply":"1616697879.134300","reply_users":["U6A936746","U680THK2S","U9VG1AYSG"],"is_locked":false,"subscribed":false,"reactions":[{"name":"slow_parrot","users":["UDB26738Q","U677NAWV8"],"count":2},{"name":"ahhhhhhh","users":["UGU761DU2","U011V2YN59N","U9VG1AYSG"],"count":3},{"name":"worried","users":["U9VG1AYSG"],"count":1}]},{"client_msg_id":"40e74297-a431-4a75-85b9-3f62e15e70c3","type":"message","text":"It’s probably not too bad for performance,\nbut it means I have a few dozen or a few hundred tests to go and inspect.","user":"U6A936746","ts":"1616695430.131900","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1616695444.000000"},"blocks":[{"type":"rich_text","block_id":"qBr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It’s probably not too bad for performance,\nbut it means I have a few dozen or a few hundred tests to go and inspect."}]}]}],"thread_ts":"1616695258.131600","parent_user_id":"U6A936746"},{"client_msg_id":"5ddff0f7-abb0-454b-97d8-287e6fa47dbb","type":"message","text":"like on the one hard using `Test.@inferred` is bad cos there is no promises of inference.\nOTOH if we don’t make sure most operators in ChainRules infer then AD is going to *suck*","user":"U6A936746","ts":"1616695501.132200","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1616695532.000000"},"blocks":[{"type":"rich_text","block_id":"qRXgt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"like on the one hard using "},{"type":"text","text":"Test.@inferred","style":{"code":true}},{"type":"text","text":" is bad cos there is no promises of inference.\nOTOH if we don’t make sure most operators in ChainRules infer then AD is going to "},{"type":"text","text":"suck","style":{"bold":true}}]}]}],"thread_ts":"1616695258.131600","parent_user_id":"U6A936746"},{"client_msg_id":"add4116f-f4dc-489c-a7ab-da1803e33c4e","type":"message","text":"Do I hate myself enough to go and dig into these tonight, in the last hour of my day?\nCaffine first","user":"U6A936746","ts":"1616695627.132700","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1616695639.000000"},"blocks":[{"type":"rich_text","block_id":"Vvf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do I hate myself enough to go and dig into these tonight, in the last hour of my day?\nCaffine first"}]}]}],"thread_ts":"1616695258.131600","parent_user_id":"U6A936746"},{"client_msg_id":"7babc543-07b2-4fc7-9e77-121f2727b9a2","type":"message","text":"Open an issue?","user":"U680THK2S","ts":"1616696190.133000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7ET","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Open an issue?"}]}]}],"thread_ts":"1616695258.131600","parent_user_id":"U6A936746","reactions":[{"name":"heavy_check_mark","users":["U6A936746"],"count":1}]},{"client_msg_id":"71cd84c7-8713-42af-889c-13219b8ef993","type":"message","text":"I've been super nervous about this prospect ever since the core devs started talking about it, but have yet to encounter any obvious, glaring issues myself","user":"U9VG1AYSG","ts":"1616696828.133500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QMy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I've been super nervous about this prospect ever since the core devs started talking about it, but have yet to encounter any obvious, glaring issues myself"}]}]}],"thread_ts":"1616695258.131600","parent_user_id":"U6A936746"},{"client_msg_id":"c125991b-92cf-44a6-942f-35e38e0893eb","type":"message","text":"My big glaring one was fixed before release, (though we don’t know how)\nSo I am not too worried","user":"U6A936746","ts":"1616697108.133800","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1616697117.000000"},"blocks":[{"type":"rich_text","block_id":"DdDG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My big glaring one was fixed before release, (though we don’t know how)\nSo I am not too worried"}]}]}],"thread_ts":"1616695258.131600","parent_user_id":"U6A936746"},{"client_msg_id":"55e7bc85-e51e-49f0-ab9f-ec2ade07d3b2","type":"message","text":"one of the reasons I get nervous is because it seems in the long run it's impossible to set a single global algorithm that is equally desirable in all cases, in the long run it should be a compiler option.  He said, not having seen quite how ridiculous the cases are where type inference now fails","user":"U9VG1AYSG","ts":"1616697225.134100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EAwK0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"one of the reasons I get nervous is because it seems in the long run it's impossible to set a single global algorithm that is equally desirable in all cases, in the long run it should be a compiler option.  He said, not having seen quite how ridiculous the cases are where type inference now fails"}]}]}],"thread_ts":"1616695258.131600","parent_user_id":"U6A936746","reactions":[{"name":"100","users":["UDGT4PM41"],"count":1}]},{"client_msg_id":"af2da318-20e4-4b25-a105-3ba74c0f8be4","type":"message","text":"The failure this time was probably harmless  since it was still a small union","user":"U6A936746","ts":"1616697879.134300","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1616697930.000000"},"blocks":[{"type":"rich_text","block_id":"mLM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The failure this time was probably harmless  since it was still a small union"}]}]}],"thread_ts":"1616695258.131600","parent_user_id":"U6A936746"}]