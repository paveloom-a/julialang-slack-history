[{"client_msg_id":"94d6ba19-6a6e-4a5e-b1ec-3c68f9872aa6","type":"message","text":":grapes: Structs with undefined fields. Just left like that, lying around.","user":"URN898S15","ts":"1609595361.256700","team":"T68168MUP","edited":{"user":"URN898S15","ts":"1609595435.000000"},"blocks":[{"type":"rich_text","block_id":"WJZN4","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"grapes"},{"type":"text","text":" Structs with undefined fields. Just left like that, lying around."}]}]}],"thread_ts":"1609595361.256700","reply_count":68,"reply_users_count":3,"latest_reply":"1609603972.271400","reply_users":["URN898S15","U85R3JJ8L","UH24GRBLL"],"subscribed":false,"reactions":[{"name":"+1","users":["U6A936746","UKG4WF8PJ"],"count":2}]},{"client_msg_id":"df324871-5c86-44bb-aeb6-8e3280e1cb14","type":"message","text":"I mean `Tridiagonal`, why???","user":"URN898S15","ts":"1609595563.257000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aJD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I mean "},{"type":"text","text":"Tridiagonal","style":{"code":true}},{"type":"text","text":", why???"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"d4117369-1e65-4564-b2e3-cf3cea6dbdc3","type":"message","text":"To store something for the LU decompositon?","user":"U85R3JJ8L","ts":"1609596018.257300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"y=Hr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"To store something for the LU decompositon?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"type":"message","text":"?","files":[{"id":"F01HW4L498S","created":1609596564,"timestamp":1609596564,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"UH24GRBLL","editable":false,"size":42242,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01HW4L498S/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01HW4L498S/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01HW4L498S-2868cc96e6/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01HW4L498S-2868cc96e6/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01HW4L498S-2868cc96e6/image_360.png","thumb_360_w":360,"thumb_360_h":79,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01HW4L498S-2868cc96e6/image_480.png","thumb_480_w":480,"thumb_480_h":105,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01HW4L498S-2868cc96e6/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01HW4L498S-2868cc96e6/image_720.png","thumb_720_w":720,"thumb_720_h":158,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01HW4L498S-2868cc96e6/image_800.png","thumb_800_w":800,"thumb_800_h":175,"thumb_960":"https://files.slack.com/files-tmb/T68168MUP-F01HW4L498S-2868cc96e6/image_960.png","thumb_960_w":960,"thumb_960_h":210,"original_w":1001,"original_h":219,"thumb_tiny":"AwAKADCmGbHWkyT1pBTh0oAac0c0tFACZNJTqKAP/9k=","permalink":"https://julialang.slack.com/files/UH24GRBLL/F01HW4L498S/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01HW4L498S-5953f926bf","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"XtayG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"?"}]}]}],"user":"UH24GRBLL","display_as_bot":false,"ts":"1609596567.257500","thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"95a5bd3d-d985-4ccd-9ea4-e1dcded534b2","type":"message","text":"seems pretty well defined to me :thinking_face:","user":"UH24GRBLL","ts":"1609596577.257900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"501mi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"seems pretty well defined to me "},{"type":"emoji","name":"thinking_face"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"03623b45-d594-42c5-ad7c-8c562eb6aa30","type":"message","text":"If you create a Tridiagonal matrix it will be undefined","user":"U85R3JJ8L","ts":"1609596712.258100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YJWT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you create a Tridiagonal matrix it will be undefined"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"1beba1b8-2bb8-483b-8592-a12b0552a396","type":"message","text":"The lu!(T::Tridiagonal) is the only function which creates a Tridiagonal matrix where du2 is set.","user":"U85R3JJ8L","ts":"1609596768.258300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+gPDI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The lu!(T::Tridiagonal) is the only function which creates a Tridiagonal matrix where du2 is set."}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"0e18b3a2-9b71-4013-981f-464fe2a2ee95","type":"message","text":"yeah","user":"UH24GRBLL","ts":"1609596784.258500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/sVJ8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"a17c8433-c978-4962-b635-662473280744","type":"message","text":"not sure why that's a problem though :thinking_face:","user":"UH24GRBLL","ts":"1609596797.258700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"T3J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not sure why that's a problem though "},{"type":"emoji","name":"thinking_face"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"783947a0-9737-4bf1-a9c6-aeceeac6750b","type":"message","text":"Immutable objects with undefined fields might look useless I guess","user":"U85R3JJ8L","ts":"1609596948.258900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kuKoa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Immutable objects with undefined fields might look useless I guess"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"c7770bee-a1e9-4811-b4ce-5afcadedae18","type":"message","text":"I think we are talking about `#undef` and not \"well defined\"","user":"U85R3JJ8L","ts":"1609596964.259100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nFk0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think we are talking about "},{"type":"text","text":"#undef","style":{"code":true}},{"type":"text","text":" and not \"well defined\""}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"66851def-e704-48c3-ab30-57861aabdb26","type":"message","text":"yeah","user":"UH24GRBLL","ts":"1609597035.259300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Luv7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"0dff531b-1deb-491a-acb1-ee4319530735","type":"message","text":"would `Union{Nothing, V}` really be better here though?","user":"UH24GRBLL","ts":"1609597052.259500","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1609597057.000000"},"blocks":[{"type":"rich_text","block_id":"0Vbyb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"would "},{"type":"text","text":"Union{Nothing, V}","style":{"code":true}},{"type":"text","text":" really be better here though?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"5b8416c0-a716-47f7-b29b-438d6696091a","type":"message","text":"what does `Nothing` cost anyway :thinking_face:","user":"UH24GRBLL","ts":"1609597096.259800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u9r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what does "},{"type":"text","text":"Nothing","style":{"code":true}},{"type":"text","text":" cost anyway "},{"type":"emoji","name":"thinking_face"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"4910ee3f-507a-4051-9fb5-22a9408217cc","type":"message","text":"compile and inference time","user":"U85R3JJ8L","ts":"1609597212.260000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zdQJl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"compile and inference time"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"0ff071af-5516-47f2-aef8-d188c5dcf5ff","type":"message","text":":stuck_out_tongue:","user":"U85R3JJ8L","ts":"1609597224.260200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"apwwM","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"stuck_out_tongue"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"2ddce948-8661-4ec4-858c-211818d89cc4","type":"message","text":"other than that :D","user":"UH24GRBLL","ts":"1609597231.260400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qhJb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"other than that :D"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"fc9719d9-f32f-4b61-a259-e4c31ede44ec","type":"message","text":"the code hasn't been touched since 2017, so I think that's just from before the small union optimization?","user":"UH24GRBLL","ts":"1609597323.260600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0/Dnw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the code hasn't been touched since 2017, so I think that's just from before the small union optimization?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"8feaf55a-2503-4830-958e-49f5bb212df4","type":"message","text":"I dimly recall there being some work around making `Union{Nothing, T}` specifically faster","user":"UH24GRBLL","ts":"1609597339.260800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SWnS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I dimly recall there being some work around making "},{"type":"text","text":"Union{Nothing, T}","style":{"code":true}},{"type":"text","text":" specifically faster"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"985f6146-211f-46ba-8f1f-77cd2cf9c774","type":"message","text":"so might just be that leaving it `#undef` was the fastest thing available","user":"UH24GRBLL","ts":"1609597365.261000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q39qG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so might just be that leaving it "},{"type":"text","text":"#undef","style":{"code":true}},{"type":"text","text":" was the fastest thing available"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"21b3a709-bee9-4779-870b-902244cfb7bc","type":"message","text":"Absolutely `Union{Nothing,T}` !! But in the type paramer. Explicitly stating that the field might not contain an array, and leaving an accesable field value istead of `undef` is much better practise.","user":"URN898S15","ts":"1609597639.261200","team":"T68168MUP","edited":{"user":"URN898S15","ts":"1609597819.000000"},"blocks":[{"type":"rich_text","block_id":"eA3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Absolutely "},{"type":"text","text":"Union{Nothing,T}","style":{"code":true}},{"type":"text","text":" !! But in the type paramer. Explicitly stating that the field might not contain an array, and leaving an accesable field value istead of `undef` is much better practise."}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"9e03981d-0a88-484f-8ad8-8f0b041d2574","type":"message","text":"eehh... du2 is very internal","user":"UH24GRBLL","ts":"1609597846.261600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QcR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"eehh... du2 is very internal"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"d70866de-3833-4e1c-aaac-8c7f69c0a20f","type":"message","text":"In my case I want to generically swap the arrays for `CuArray`, along with every other kind of array wrapper. But we have to special-case the undef field, or run `isdefined` on every field","user":"URN898S15","ts":"1609597853.261800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YM6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In my case I want to generically swap the arrays for "},{"type":"text","text":"CuArray","style":{"code":true}},{"type":"text","text":", along with every other kind of array wrapper. But we have to special-case the undef field, or run "},{"type":"text","text":"isdefined","style":{"code":true}},{"type":"text","text":" on every field"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"3a2e573d-7806-4723-91dc-061159062356","type":"message","text":"I'm not sure why you would argue for undef fields over `nothing`","user":"URN898S15","ts":"1609597925.262000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hsIM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure why you would argue for undef fields over "},{"type":"text","text":"nothing","style":{"code":true}}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"210c5c90-b1c1-4a6c-a2b5-e8fede7bd26d","type":"message","text":"I mean, all those type parameters are `&lt;: AbstractVector` anyway","user":"UH24GRBLL","ts":"1609597941.262200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Req","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I mean, all those type parameters are "},{"type":"text","text":"<: AbstractVector","style":{"code":true}},{"type":"text","text":" anyway"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"ac2e9a80-69d1-4a80-84ad-ed112a43d4ed","type":"message","text":"isn't there some `CuVector`?","user":"UH24GRBLL","ts":"1609597950.262400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9+j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"isn't there some "},{"type":"text","text":"CuVector","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"2aa92c58-4ce5-4baf-aa2e-515fcbc3b49c","type":"message","text":"Yeah, but you have to check if du2 is undefinded before rewrapping it","user":"URN898S15","ts":"1609597980.262600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FeWy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, but you have to check if du2 is undefinded before rewrapping it"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"aaa7248f-df69-4563-8a62-beee23f4111b","type":"message","text":"I'm not arguing for undef, I'm saying that it's internal to the object and an implementation detail","user":"UH24GRBLL","ts":"1609597987.262800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Vs2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not arguing for undef, I'm saying that it's internal to the object and an implementation detail"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"a0fd208a-9ba8-44d8-9826-3f0954313d5e","type":"message","text":"But practically, we are all swapping arrays with `CuArray` now.","user":"URN898S15","ts":"1609598013.263000","team":"T68168MUP","edited":{"user":"URN898S15","ts":"1609598068.000000"},"blocks":[{"type":"rich_text","block_id":"Y8+Ig","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But practically, we are all swapping arrays with "},{"type":"text","text":"CuArray","style":{"code":true}},{"type":"text","text":" now."}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"477ba99b-637d-4dc1-bfd0-7510a12cb041","type":"message","text":"internal or not","user":"URN898S15","ts":"1609598025.263200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"K2LJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"internal or not"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"dc4b0696-ee60-4060-9a6b-8bf690e6bbba","type":"message","text":"I'm confused, why does `Tridiagonal` having that field require you to check it everywhere?","user":"UH24GRBLL","ts":"1609598055.263400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kUqH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm confused, why does "},{"type":"text","text":"Tridiagonal","style":{"code":true}},{"type":"text","text":" having that field require you to check it everywhere?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"813ed316-631d-4ce9-86f9-c9bbf48b5fed","type":"message","text":"it's only used for LU factorization","user":"UH24GRBLL","ts":"1609598073.263700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VWktm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's only used for LU factorization"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"db6b2241-8413-497f-af58-4eb55bbbcc13","type":"message","text":"So how do you convert it for GPU without using `isdefined`","user":"URN898S15","ts":"1609598099.263900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D3S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So how do you convert it for GPU without using "},{"type":"text","text":"isdefined","style":{"code":true}}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"64431802-2800-44be-9b1a-0c66d92260bf","type":"message","text":"I don't understand how having that field `#undef` influences whether or not `Tridiagonal` can wrap `CuVector`","user":"UH24GRBLL","ts":"1609598137.264100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sEEqc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't understand how having that field "},{"type":"text","text":"#undef","style":{"code":true}},{"type":"text","text":" influences whether or not "},{"type":"text","text":"Tridiagonal","style":{"code":true}},{"type":"text","text":" can wrap "},{"type":"text","text":"CuVector","style":{"code":true}}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"56c8de0b-7c9f-4b41-8238-e4411436105c","type":"message","text":"they are all vectors","user":"URN898S15","ts":"1609598152.264300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q44j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"they are all vectors"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"065c2231-8ddd-40a4-8ed6-a4002d461c7d","type":"message","text":"you need to swap all 3/4","user":"URN898S15","ts":"1609598159.264500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"983x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you need to swap all 3/4"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"4fde9805-7a12-4764-a662-a85bf69e35d8","type":"message","text":"so?","user":"UH24GRBLL","ts":"1609598173.264700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sbgA2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"3695e1ca-043c-4ada-81cc-e295655fbe11","type":"message","text":"but check if the 4th is defined","user":"URN898S15","ts":"1609598175.264900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pd7Hl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but check if the 4th is defined"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"c46e9023-2cf1-42e2-87a9-6dff7e81a1a3","type":"message","text":"so you need `isdefined` and special casing??","user":"URN898S15","ts":"1609598189.265100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h3W1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so you need "},{"type":"text","text":"isdefined","style":{"code":true}},{"type":"text","text":" and special casing??"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"35ff3bfc-8f00-4c36-ac84-278cc23be84b","type":"message","text":"my whole point?","user":"URN898S15","ts":"1609598194.265300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MH0w+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"my whole point?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"b5b88215-d24c-445b-855e-37538c483933","type":"message","text":"I don't understand","user":"UH24GRBLL","ts":"1609598197.265500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W8Mx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't understand"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"561de7ad-8ada-445e-9d98-d5bd06b81bf8","type":"message","text":"the only `isdefined` I see in the tridiag.jl file is when constructing a Tridiagonal from a Tridiagonal","user":"UH24GRBLL","ts":"1609598242.265700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZIL6O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the only "},{"type":"text","text":"isdefined","style":{"code":true}},{"type":"text","text":" I see in the tridiag.jl file is when constructing a Tridiagonal from a Tridiagonal"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"c9103eb8-8197-4e9e-8b4b-1e9a2b14016f","type":"message","text":"lu.jl doesn't have any isdefined at all","user":"UH24GRBLL","ts":"1609598260.265900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"urX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"lu.jl doesn't have any isdefined at all"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"3f3d2a1a-2d69-4a09-a54c-1a8037f170e8","type":"message","text":"though I wonder why\n\n```U = Array(Bidiagonal(getfield(getfield(F, :factors), :d), getfield(getfield(F, :factors), :du), d))```\nwas written this way - it's from 2014, so maybe that was style back then","user":"UH24GRBLL","ts":"1609598316.266100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BwNr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"though I wonder why\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"U = Array(Bidiagonal(getfield(getfield(F, :factors), :d), getfield(getfield(F, :factors), :du), d))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nwas written this way - it's from 2014, so maybe that was style back then"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"8e57faf4-33b5-4123-b294-b2720e88e1cd","type":"message","text":"are you trying to wrap an object of type `Tridiagonal` in a `CuMatrix`..?","user":"UH24GRBLL","ts":"1609598359.266300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fSOs8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"are you trying to wrap an object of type "},{"type":"text","text":"Tridiagonal","style":{"code":true}},{"type":"text","text":" in a "},{"type":"text","text":"CuMatrix","style":{"code":true}},{"type":"text","text":"..?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"148cf92a-f01a-4dd4-a7bc-3de9d00f1226","type":"message","text":"I think he takes a `Tridiagonal{Vector{Float}}` and transfers it to `Tridiagonal{CuVector}`","user":"U85R3JJ8L","ts":"1609598447.266500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dBy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think he takes a "},{"type":"text","text":"Tridiagonal{Vector{Float}}","style":{"code":true}},{"type":"text","text":" and transfers it to "},{"type":"text","text":"Tridiagonal{CuVector}","style":{"code":true}}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"010fa17b-86ea-452d-80f4-962e196e7d5b","type":"message","text":"ah, I see","user":"UH24GRBLL","ts":"1609598551.266700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=HL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, I see"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"d587e5e9-59bc-40d1-8781-9c3be2206840","type":"message","text":"But instead of checking `isdefined` you have to check  `!== nothing` ? Or is there a `CuVector(T::Union{Nothing, Vector{Float64}})` constructor?","user":"U85R3JJ8L","ts":"1609598570.266900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EBm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But instead of checking "},{"type":"text","text":"isdefined","style":{"code":true}},{"type":"text","text":" you have to check  "},{"type":"text","text":"!== nothing","style":{"code":true}},{"type":"text","text":" ? Or is there a "},{"type":"text","text":"CuVector(T::Union{Nothing, Vector{Float64}})","style":{"code":true}},{"type":"text","text":" constructor?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"71aacdbe-68d3-4e43-a594-0c29cdd087ff","type":"message","text":"the constructor wouldn't be faster, since you have to check `!== nothing` anyway","user":"UH24GRBLL","ts":"1609598601.267100","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1609598606.000000"},"blocks":[{"type":"rich_text","block_id":"RMkG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the constructor wouldn't be faster, since you have to check "},{"type":"text","text":"!== nothing","style":{"code":true}},{"type":"text","text":" anyway"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"c99eed30-35ce-416c-8540-2c0499bf978c","type":"message","text":"and it has to be the `!==` instead of `isnothing` because the latter may not compile away","user":"UH24GRBLL","ts":"1609598624.267400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xt0p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and it has to be the "},{"type":"text","text":"!==","style":{"code":true}},{"type":"text","text":" instead of "},{"type":"text","text":"isnothing","style":{"code":true}},{"type":"text","text":" because the latter may not compile away"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"29aeaeaf-dc0f-4f72-9c58-1901ba4ecd80","type":"message","text":"I think `isdefined` does though, it's not a generic function","user":"UH24GRBLL","ts":"1609598656.267600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0pskp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think "},{"type":"text","text":"isdefined","style":{"code":true}},{"type":"text","text":" does though, it's not a generic function"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"c5734101-790c-41ac-afd2-fa5b70587e98","type":"message","text":"Yes, but it makes for cleaner code I guess?","user":"U85R3JJ8L","ts":"1609598680.267800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7jQm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, but it makes for cleaner code I guess?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"type":"message","text":"so does `F.factors.d` instead of `getfield(getfield(F, :factors), :d)`, but that would mean refactoring all of that old code ¯\\_(ツ)_/¯","user":"UH24GRBLL","ts":"1609598725.268000","team":"T68168MUP","thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"f54c703d-9cdc-4f57-9711-ba77c0ff8b49","type":"message","text":"<@URN898S15> tbh, I'd just run `isdefined` on every field and be done with it - you'd have to catch  `nothing` either way","user":"UH24GRBLL","ts":"1609598906.268200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=8vZ","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"URN898S15"},{"type":"text","text":" tbh, I'd just run "},{"type":"text","text":"isdefined","style":{"code":true}},{"type":"text","text":" on every field and be done with it - you'd have to catch  "},{"type":"text","text":"nothing","style":{"code":true}},{"type":"text","text":" either way"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"77231250-c26c-48d0-885f-332c59f0e363","type":"message","text":"also, just because a struct has a certain field, doesn't mean that struct has a constructor matching that field/the number of fields in the number of arguments.","user":"UH24GRBLL","ts":"1609598938.268400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e5o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"also, just because a struct has a certain field, doesn't mean that struct has a constructor matching that field/the number of fields in the number of arguments."}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"c17bce48-8576-436a-afbe-02104c088020","type":"message","text":"See <https://github.com/JuliaGPU/Adapt.jl/blob/master/src/wrappers.jl#L35>","user":"URN898S15","ts":"1609598945.268600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vwXF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"See "},{"type":"link","url":"https://github.com/JuliaGPU/Adapt.jl/blob/master/src/wrappers.jl#L35"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"21ed91d2-6c4a-4aec-8465-d6a232868c95","type":"message","text":"so automatic conversion is probbably out of the question anyway","user":"UH24GRBLL","ts":"1609598952.268800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=FzV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so automatic conversion is probbably out of the question anyway"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"13c46f2d-b6a1-47bf-8f81-04107f3d6a6b","type":"message","text":"du2 is ignored","user":"URN898S15","ts":"1609598956.269000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ztQ6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"du2 is ignored"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"39ddb573-22f6-4a4c-9acc-80ebc556beb9","type":"message","text":"yeah, you're not getting around special casing here","user":"UH24GRBLL","ts":"1609599083.269200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7tr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, you're not getting around special casing here"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"e3fd8647-6e05-4f11-a2c0-a446e2060d4c","type":"message","text":"As long as theres no undef you can. ConstructionBase.jl takes care of field/parameter mismatch. I'm writing a PR to include these few types that don't fit rn","user":"URN898S15","ts":"1609599124.269400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gamc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"As long as theres no undef you can. ConstructionBase.jl takes care of field/parameter mismatch. I'm writing a PR to include these few types that don't fit rn"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"1c1f9142-324c-4ec2-b688-af6bfa222b84","type":"message","text":"ConstructionBase is opt-in though","user":"UH24GRBLL","ts":"1609599175.269600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8dK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ConstructionBase is opt-in though"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"cd7d71f2-48eb-4130-b0f4-43dc291fceaf","type":"message","text":"I don't think you can assume that in the general case - though if you only care about a subset, that's fine","user":"UH24GRBLL","ts":"1609599206.269800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ynt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think you can assume that in the general case - though if you only care about a subset, that's fine"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"f3b53595-f2ec-43f7-8e2c-eb983cc36a48","type":"message","text":"it's not necessarily opt-in for base","user":"URN898S15","ts":"1609599236.270000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y=yuO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's not necessarily opt-in for base"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"6cffbc55-32c9-4d47-8c37-7e0b1715eeb9","type":"message","text":"at all","user":"URN898S15","ts":"1609599238.270200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7/OM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"at all"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"c1e3429f-a659-49d7-bf06-7dae307187d0","type":"message","text":"well as long as `ConstructionBase` has its interface defined on `Base` code, sure, but I'm talking about other types that would be able to handle `CuVector` fine, but do something like `Tridiagonal`","user":"UH24GRBLL","ts":"1609599329.270400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L0Mc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well as long as "},{"type":"text","text":"ConstructionBase","style":{"code":true}},{"type":"text","text":" has its interface defined on "},{"type":"text","text":"Base","style":{"code":true}},{"type":"text","text":" code, sure, but I'm talking about other types that would be able to handle "},{"type":"text","text":"CuVector","style":{"code":true}},{"type":"text","text":" fine, but do something like "},{"type":"text","text":"Tridiagonal","style":{"code":true}}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"cc2695a9-21b1-4055-a989-80c37c435a6e","type":"message","text":"Either that type has to know about ConstructionBase or ConstructionBase has to know about the type (which is what you're doing with Tridiagonal, if I understand correctly)","user":"UH24GRBLL","ts":"1609599349.270600","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1609599363.000000"},"blocks":[{"type":"rich_text","block_id":"PWB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Either that type has to know about ConstructionBase or ConstructionBase has to know about the type (which is what you're doing with Tridiagonal, if I understand correctly)"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"type":"message","subtype":"thread_broadcast","text":"Do people know of any other base objects with lingering undef fields, besides  `Tridiagonal` ? It's hard to grep for","user":"URN898S15","ts":"1609603596.270900","thread_ts":"1609595361.256700","root":{"client_msg_id":"94d6ba19-6a6e-4a5e-b1ec-3c68f9872aa6","type":"message","text":":grapes: Structs with undefined fields. Just left like that, lying around.","user":"URN898S15","ts":"1609595361.256700","team":"T68168MUP","edited":{"user":"URN898S15","ts":"1609595435.000000"},"blocks":[{"type":"rich_text","block_id":"WJZN4","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"grapes"},{"type":"text","text":" Structs with undefined fields. Just left like that, lying around."}]}]}],"thread_ts":"1609595361.256700","reply_count":68,"reply_users_count":3,"latest_reply":"1609603972.271400","reply_users":["URN898S15","U85R3JJ8L","UH24GRBLL"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"+=ty","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do people know of any other base objects with lingering undef fields, besides  "},{"type":"text","text":"Tridiagonal","style":{"code":true}},{"type":"text","text":" ? It's hard to grep for"}]}]}],"client_msg_id":"b2f2b2f8-572e-41ed-99ee-c81fa103c5af"},{"client_msg_id":"88e78242-6283-4d62-92ee-ffd02dfc42c4","type":"message","text":"`Distributed.Worker`?","user":"UH24GRBLL","ts":"1609603958.271200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OLL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Distributed.Worker","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"},{"client_msg_id":"a275a035-5f7a-47cb-89bd-57a7585c61f5","type":"message","text":"presumably Base also has to check `isdefined`, so grepping for that kind of helps","user":"UH24GRBLL","ts":"1609603972.271400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ljt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"presumably Base also has to check "},{"type":"text","text":"isdefined","style":{"code":true}},{"type":"text","text":", so grepping for that kind of helps"}]}]}],"thread_ts":"1609595361.256700","parent_user_id":"URN898S15"}]