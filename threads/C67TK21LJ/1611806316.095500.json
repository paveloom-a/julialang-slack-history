[{"client_msg_id":"f17bf7ba-95ab-4503-88f2-8308f2976c8d","type":"message","text":"```function float2rational(x::T) where T\n    iszero(x) &amp;&amp; return 0//1\n    isfinite(x) || return x\n    e = exponent(x)\n    m = Base.significand_bits(T)\n    b = Base.exponent_bias(T)\n    issub = issubnormal(x)\n    expo = (issub ? 1-b : e) - m\n    ee = expo &gt;= 0 ? (big(2)^expo)//1 : 1//(big(2)^(-expo))\n    ss = reinterpret(Unsigned, x) &amp; Base.significand_mask(T)\n    issub || (ss = ss | (1 &lt;&lt; m))\n    dec = ss * ee\n    signbit(x) ? -dec : dec\nend```\nThis might work?","user":"U6788D83U","ts":"1611806316.095500","team":"T68168MUP","edited":{"user":"U6788D83U","ts":"1611809587.000000"},"blocks":[{"type":"rich_text","block_id":"MO6eL","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function float2rational(x::T) where T\n    iszero(x) && return 0//1\n    isfinite(x) || return x\n    e = exponent(x)\n    m = Base.significand_bits(T)\n    b = Base.exponent_bias(T)\n    issub = issubnormal(x)\n    expo = (issub ? 1-b : e) - m\n    ee = expo >= 0 ? (big(2)^expo)//1 : 1//(big(2)^(-expo))\n    ss = reinterpret(Unsigned, x) & Base.significand_mask(T)\n    issub || (ss = ss | (1 << m))\n    dec = ss * ee\n    signbit(x) ? -dec : dec\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"This might work?"}]}]}],"thread_ts":"1611806316.095500","reply_count":5,"reply_users_count":2,"latest_reply":"1611809620.096800","reply_users":["U6788D83U","U67G3QRJM"],"subscribed":false,"reactions":[{"name":"100","users":["U67G3QRJM"],"count":1},{"name":"+1","users":["UGU761DU2"],"count":1}]},{"client_msg_id":"7152ba5b-ba35-4c69-8c1f-95869461c5d3","type":"message","text":"```julia&gt; @printf \"%.100f\" float(pi)\n3.1415926535897931159979634685441851615905761718750000000000000000000000000000000000000000000000000000\njulia&gt; float(rational2decimal(float(pi)))\n3.141592653589793115997963468544185161590576171875```","user":"U6788D83U","ts":"1611806789.095700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Awe7","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @printf \"%.100f\" float(pi)\n3.1415926535897931159979634685441851615905761718750000000000000000000000000000000000000000000000000000\njulia> float(rational2decimal(float(pi)))\n3.141592653589793115997963468544185161590576171875"}]}]}],"thread_ts":"1611806316.095500","parent_user_id":"U6788D83U"},{"client_msg_id":"4920fd7f-b085-4f85-a40d-62aae9fe6bab","type":"message","text":"What is rational2decimal?","user":"U67G3QRJM","ts":"1611808195.096000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V=4l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What is rational2decimal?"}]}]}],"thread_ts":"1611806316.095500","parent_user_id":"U6788D83U"},{"client_msg_id":"48060d34-392f-45a1-97b8-1a8547cf7780","type":"message","text":"There is also\n```julia&gt; rationalize(float(pi), tol=1e-30)\n884279719003555//281474976710656```","user":"U67G3QRJM","ts":"1611808252.096200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hx6G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There is also\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> rationalize(float(pi), tol=1e-30)\n884279719003555//281474976710656"}]}]}],"thread_ts":"1611806316.095500","parent_user_id":"U6788D83U"},{"client_msg_id":"a4f7ebf9-867b-4bdd-a717-e15e9b4d38e2","type":"message","text":"ha, it doesn’t handle subnormals correctly either\n```julia&gt; rationalize(BigInt, reinterpret(Float64, 1), tol=0.0)\n0//1\n\njulia&gt; reinterpret(Float64, 1)\n5.0e-324```","user":"U6788D83U","ts":"1611808716.096400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pttIJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ha, it doesn’t handle subnormals correctly either\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> rationalize(BigInt, reinterpret(Float64, 1), tol=0.0)\n0//1\n\njulia> reinterpret(Float64, 1)\n5.0e-324"}]}]}],"thread_ts":"1611806316.095500","parent_user_id":"U6788D83U"},{"client_msg_id":"29b81520-d0ca-41d7-92f6-0c28e9869f43","type":"message","text":"The updated version should work with subnormals\n```julia&gt; big(reinterpret(Float64, 1))\n4.940656458412465441765687928682213723650598026143247644255856825006755072702088e-324\n\njulia&gt; float(float2rational(reinterpret(Float64, 1)))\n4.940656458412465441765687928682213723650598026143247644255856825006755072702088e-324```","user":"U6788D83U","ts":"1611809620.096800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CxBW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The updated version should work with subnormals\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> big(reinterpret(Float64, 1))\n4.940656458412465441765687928682213723650598026143247644255856825006755072702088e-324\n\njulia> float(float2rational(reinterpret(Float64, 1)))\n4.940656458412465441765687928682213723650598026143247644255856825006755072702088e-324"}]}]}],"thread_ts":"1611806316.095500","parent_user_id":"U6788D83U","reactions":[{"name":"+1","users":["U67G3QRJM"],"count":1}]}]