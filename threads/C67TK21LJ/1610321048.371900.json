[{"client_msg_id":"3847de0a-e8eb-4ce7-bbfd-9def178acc1a","type":"message","text":"```julia&gt; versioninfo()\nJulia Version 1.5.3\nCommit 788b2c77c1 (2020-11-09 13:37 UTC)\nPlatform Info:\n  OS: Linux (x86_64-pc-linux-gnu)\n  CPU: AMD Ryzen 7 2700X Eight-Core Processor\n  WORD_SIZE: 64\n  LIBM: libopenlibm\n  LLVM: libLLVM-9.0.1 (ORCJIT, znver1)\n\njulia&gt; ^(2,-3)\n0.125\n\njulia&gt; b = -3; ^(2,b)\nERROR: DomainError with -3:\nCannot raise an integer x to a negative power -3.\nMake x or -3 a float by adding a zero decimal (e.g., 2.0^-3 or 2^-3.0 instead of 2^-3), or write 1/x^3, float(x)^-3, x^float(-3) or (x//1)^-3\nStacktrace:\n [1] throw_domerr_powbysq(::Int64, ::Int64) at ./intfuncs.jl:228\n [2] power_by_squaring(::Int64, ::Int64) at ./intfuncs.jl:249\n [3] ^(::Int64, ::Int64) at ./intfuncs.jl:273\n [4] top-level scope at REPL[7]:1\n\njulia&gt; @less ^(2,-3)```\nshows\n```^(x::T, p::T) where {T&lt;:Integer} = power_by_squaring(x,p)```\nbut\n```julia&gt; Base.power_by_squaring(2,-3)\nERROR: DomainError with -3:\nCannot raise an integer x to a negative power -3.\nMake x or -3 a float by adding a zero decimal (e.g., 2.0^-3 or 2^-3.0 instead of 2^-3), or write 1/x^3, float(x)^-3, x^float(-3) or (x//1)^-3\nStacktrace:\n [1] throw_domerr_powbysq(::Int64, ::Int64) at ./intfuncs.jl:228\n [2] power_by_squaring(::Int64, ::Int64) at ./intfuncs.jl:249\n [3] top-level scope at REPL[9]:1```\nWhat's happening here?","user":"U011U6S97BP","ts":"1610321048.371900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9vsAz","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> versioninfo()\nJulia Version 1.5.3\nCommit 788b2c77c1 (2020-11-09 13:37 UTC)\nPlatform Info:\n  OS: Linux (x86_64-pc-linux-gnu)\n  CPU: AMD Ryzen 7 2700X Eight-Core Processor\n  WORD_SIZE: 64\n  LIBM: libopenlibm\n  LLVM: libLLVM-9.0.1 (ORCJIT, znver1)\n\njulia> ^(2,-3)\n0.125\n\njulia> b = -3; ^(2,b)\nERROR: DomainError with -3:\nCannot raise an integer x to a negative power -3.\nMake x or -3 a float by adding a zero decimal (e.g., 2.0^-3 or 2^-3.0 instead of 2^-3), or write 1/x^3, float(x)^-3, x^float(-3) or (x//1)^-3\nStacktrace:\n [1] throw_domerr_powbysq(::Int64, ::Int64) at ./intfuncs.jl:228\n [2] power_by_squaring(::Int64, ::Int64) at ./intfuncs.jl:249\n [3] ^(::Int64, ::Int64) at ./intfuncs.jl:273\n [4] top-level scope at REPL[7]:1\n\njulia> @less ^(2,-3)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"shows\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"^(x::T, p::T) where {T<:Integer} = power_by_squaring(x,p)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"but\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> Base.power_by_squaring(2,-3)\nERROR: DomainError with -3:\nCannot raise an integer x to a negative power -3.\nMake x or -3 a float by adding a zero decimal (e.g., 2.0^-3 or 2^-3.0 instead of 2^-3), or write 1/x^3, float(x)^-3, x^float(-3) or (x//1)^-3\nStacktrace:\n [1] throw_domerr_powbysq(::Int64, ::Int64) at ./intfuncs.jl:228\n [2] power_by_squaring(::Int64, ::Int64) at ./intfuncs.jl:249\n [3] top-level scope at REPL[9]:1"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"What's happening here?"}]}]}],"thread_ts":"1610321048.371900","reply_count":5,"reply_users_count":3,"latest_reply":"1610322699.374700","reply_users":["U011U6S97BP","UD0NS8PDF","UDB26738Q"],"subscribed":false},{"client_msg_id":"c8057703-d7ec-4437-843a-96521f090b97","type":"message","text":"anothoer example:\n```julia&gt; ^(2,-3)\n0.125\n\njulia&gt; ^(2,1-4)\nERROR: DomainError with -3:\nCannot raise an integer x to a negative power -3.\nMake x or -3 a float by adding a zero decimal (e.g., 2.0^-3 or 2^-3.0 instead of 2^-3), or write 1/x^3, float(x)^-3, x^float(-3) or (x//1)^-3\nStacktrace:\n [1] throw_domerr_powbysq(::Int64, ::Int64) at ./intfuncs.jl:228\n [2] power_by_squaring(::Int64, ::Int64) at ./intfuncs.jl:249\n [3] ^(::Int64, ::Int64) at ./intfuncs.jl:273\n [4] top-level scope at REPL[12]:1```","user":"U011U6S97BP","ts":"1610321212.372200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LQoyP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"anothoer example:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> ^(2,-3)\n0.125\n\njulia> ^(2,1-4)\nERROR: DomainError with -3:\nCannot raise an integer x to a negative power -3.\nMake x or -3 a float by adding a zero decimal (e.g., 2.0^-3 or 2^-3.0 instead of 2^-3), or write 1/x^3, float(x)^-3, x^float(-3) or (x//1)^-3\nStacktrace:\n [1] throw_domerr_powbysq(::Int64, ::Int64) at ./intfuncs.jl:228\n [2] power_by_squaring(::Int64, ::Int64) at ./intfuncs.jl:249\n [3] ^(::Int64, ::Int64) at ./intfuncs.jl:273\n [4] top-level scope at REPL[12]:1"}]}]}],"thread_ts":"1610321048.371900","parent_user_id":"U011U6S97BP"},{"client_msg_id":"e99fb07c-ed6f-43a1-a9d7-453721019b4e","type":"message","text":"```julia&gt; f(x) = x^-3;\n\njulia&gt; @code_lowered f(2)\nCodeInfo(\n1 ─ %1 = Core.apply_type(Base.Val, -3)\n│   %2 = (%1)()\n│   %3 = Base.literal_pow(Main.:^, x, %2)\n└──      return %3```\n","user":"UD0NS8PDF","ts":"1610321232.372400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AsDtA","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> f(x) = x^-3;\n\njulia> @code_lowered f(2)\nCodeInfo(\n1 ─ %1 = Core.apply_type(Base.Val, -3)\n│   %2 = (%1)()\n│   %3 = Base.literal_pow(Main.:^, x, %2)\n└──      return %3"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1610321048.371900","parent_user_id":"U011U6S97BP","reactions":[{"name":"eyes","users":["U011U6S97BP"],"count":1}]},{"client_msg_id":"261ec709-f7fc-4023-ae0e-2d492d2d27af","type":"message","text":"to be clear, `a ^ b` is lowered to `Base.literal_pow` only when `b` is a literal integer","user":"UDB26738Q","ts":"1610321319.372600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v24H2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"to be clear, "},{"type":"text","text":"a ^ b","style":{"code":true}},{"type":"text","text":" is lowered to "},{"type":"text","text":"Base.literal_pow","style":{"code":true}},{"type":"text","text":" only when "},{"type":"text","text":"b","style":{"code":true}},{"type":"text","text":" is a literal integer"}]}]}],"thread_ts":"1610321048.371900","parent_user_id":"U011U6S97BP","reactions":[{"name":"eyes","users":["U011U6S97BP"],"count":1}]},{"client_msg_id":"de97a4bb-4362-4c53-a4cb-316dd0e24ed3","type":"message","text":"and `@less` isn’t smart enough to know this .It is a bit weird!","user":"UD0NS8PDF","ts":"1610321434.373400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t3t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and "},{"type":"text","text":"@less","style":{"code":true}},{"type":"text","text":" isn’t smart enough to know this .It is a bit weird!"}]}]}],"thread_ts":"1610321048.371900","parent_user_id":"U011U6S97BP","reactions":[{"name":"joy","users":["U011U6S97BP"],"count":1}]},{"client_msg_id":"5ba8f432-4c09-4ace-ad4d-d7891cbba7e5","type":"message","text":"Thanks, I figured it out!\n```julia&gt; Base.literal_pow(^,2,Base.Val{3}())\n8\n\njulia&gt; Base.literal_pow(^,2,Base.Val{-3}())\n0.125```\nAnd found a related closed issue:\n<https://github.com/JuliaLang/julia/issues/20527>","user":"U011U6S97BP","ts":"1610322699.374700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DBnN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks, I figured it out!\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> Base.literal_pow(^,2,Base.Val{3}())\n8\n\njulia> Base.literal_pow(^,2,Base.Val{-3}())\n0.125"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"And found a related closed issue:\n"},{"type":"link","url":"https://github.com/JuliaLang/julia/issues/20527"}]}]}],"thread_ts":"1610321048.371900","parent_user_id":"U011U6S97BP"}]