[{"client_msg_id":"b736134c-fb21-48b5-bbd3-4d757aa5dce4","type":"message","text":"I'm afraid the replies to the hackernews comment (in the 1.6 release post) pointing out julia is not top on the list in <https://github.com/kostya/benchmarks> weren't entirely accurate... Too often benchmarks with questionable julia timings include compilation time, but in this case the benchmark is reasonably fair (timing starts halfway in a function by sending some message through a socket, and sometimes a verification test is run before the benchmark). I (and some others) jumped a bit too quickly to the conclusion that the benchmark was unfair/skew, and one comment which correctly points that out got downvoted to oblivion :sweat_smile:","user":"U6N6VQE30","ts":"1616712210.056500","team":"T68168MUP","edited":{"user":"U6N6VQE30","ts":"1616712228.000000"},"blocks":[{"type":"rich_text","block_id":"9XMs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm afraid the replies to the hackernews comment (in the 1.6 release post) pointing out julia is not top on the list in "},{"type":"link","url":"https://github.com/kostya/benchmarks"},{"type":"text","text":" weren't entirely accurate... Too often benchmarks with questionable julia timings include compilation time, but in this case the benchmark is reasonably fair (timing starts halfway in a function by sending some message through a socket, and sometimes a verification test is run before the benchmark). I (and some others) jumped a bit too quickly to the conclusion that the benchmark was unfair/skew, and one comment which correctly points that out got downvoted to oblivion "},{"type":"emoji","name":"sweat_smile"}]}]}],"thread_ts":"1616712210.056500","reply_count":11,"reply_users_count":2,"latest_reply":"1616722755.065200","reply_users":["UDB26738Q","U6N6VQE30"],"is_locked":false,"subscribed":false,"reactions":[{"name":"y_combinator","users":["UGU761DU2","U66M57AN4","UKG4WF8PJ"],"count":3}]},{"client_msg_id":"05109a3a-3717-48cc-83e2-9df0d5b3f85b","type":"message","text":"Where do you see how they benchmark Julia?","user":"UDB26738Q","ts":"1616713621.058000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F6eP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Where do you see how they benchmark Julia?"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"9857972c-8079-41aa-ba85-bfc1e84d10bf","type":"message","text":"well, it's written in ruby :smile: it took me a moment to parse it","user":"U6N6VQE30","ts":"1616713708.058200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P8Q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, it's written in ruby "},{"type":"emoji","name":"smile"},{"type":"text","text":" it took me a moment to parse it"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"6f18c3e2-5141-4dc9-a2ee-6201fd7e0a32","type":"message","text":"<https://github.com/kostya/benchmarks/blob/master/base64/test.jl#L11-L27>","user":"U6N6VQE30","ts":"1616713783.058400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/24Ji","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/kostya/benchmarks/blob/master/base64/test.jl#L11-L27"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"d9fe40c4-610a-447d-9da1-f5637da1a260","type":"message","text":"but if you don't want to look at ruby you can see it uses this notify() function and repeats the stuff between it 8000 times on a string of length 131072 and it even calls base64encode() ahead of time within the function because why not","user":"U6N6VQE30","ts":"1616713895.058600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xaU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but if you don't want to look at ruby you can see it uses this notify() function and repeats the stuff between it 8000 times on a string of length 131072 and it even calls base64encode() ahead of time within the function because why not"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"434de379-1a03-465b-937b-2dc531904903","type":"message","text":"and running `make test[smth.jl]` executes `../xtime.rb julia --optimize=3 --check-bounds=no test.jl`\n`","user":"U6N6VQE30","ts":"1616714033.058800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uq8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and running "},{"type":"text","text":"make test[smth.jl]","style":{"code":true}},{"type":"text","text":" executes "},{"type":"text","text":"../xtime.rb julia --optimize=3 --check-bounds=no test.jl","style":{"code":true}},{"type":"text","text":"\n`"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"ae2b90ec-7165-4fb5-af91-7664c7c163b7","type":"message","text":"I'm trying to understand how this works, to no avail","user":"UDB26738Q","ts":"1616720357.064200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FVq56","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm trying to understand how this works, to no avail"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"51e54d92-89fe-4a58-bc87-779bd5cdb7bb","type":"message","text":"I tried to execute `../xtime.rb julia --optimize=3 --check-bounds=no test.jl` (after changing the path to the energy file in the `xtime` script, because it can't be read anyway), I get\n```% ../xtime.rb julia-master --optimize=3 --check-bounds=no test.jl\nencode aaaa... to YWFh: 1431666688, 3.2305638790130615\ndecode YWFh... to aaaa: 1073741824, 1.6625781059265137```\nbut not sure what to do with this","user":"UDB26738Q","ts":"1616720436.064400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KFraI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tried to execute "},{"type":"text","text":"../xtime.rb julia --optimize=3 --check-bounds=no test.jl","style":{"code":true}},{"type":"text","text":" (after changing the path to the energy file in the "},{"type":"text","text":"xtime","style":{"code":true}},{"type":"text","text":" script, because it can't be read anyway), I get\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"% ../xtime.rb julia-master --optimize=3 --check-bounds=no test.jl\nencode aaaa... to YWFh: 1431666688, 3.2305638790130615\ndecode YWFh... to aaaa: 1073741824, 1.6625781059265137"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"but not sure what to do with this"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"45f7220b-46d5-47e4-b03e-11271754c3fd","type":"message","text":"oh, `3.2305638790130615` and `1.6625781059265137` are the times of the two operations, repeated 8192 times","user":"UDB26738Q","ts":"1616720524.064600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"buu=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, "},{"type":"text","text":"3.2305638790130615","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"1.6625781059265137","style":{"code":true}},{"type":"text","text":" are the times of the two operations, repeated 8192 times"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"1b83830c-173a-46a8-b1f3-45ce166b2009","type":"message","text":"ok, this worked\n```% make 'run[test.jl]'\nmake run[test.jl]\nmkdir -p target\n../common/julia/julia_fmt.jl test.jl\n   Updating registry at `~/.julia/registries/General`\n   Updating git-repo `<https://github.com/JuliaRegistries/General.git>`\n  Resolving package versions...\n  Installed Tokenize ─────── v0.5.13\n  Installed CommonMark ───── v0.8.1\n  Installed JuliaFormatter ─ v0.13.5\n  Installed CSTParser ────── v2.5.0\nUpdating `~/.julia/environments/v1.5/Project.toml`\n  [98e50ef6] + JuliaFormatter v0.13.5\nUpdating `~/.julia/environments/v1.5/Manifest.toml`\n  [00ebfdb7] + CSTParser v2.5.0\n  [a80b9123] + CommonMark v0.8.1\n  [a8cc5b0e] + Crayons v4.0.4\n  [e30172f5] + Documenter v0.26.3\n  [b5f81e59] + IOCapture v0.1.1\n  [98e50ef6] + JuliaFormatter v0.13.5\n  [f50d1b31] ↑ Rmath_jll v0.2.2+1 ⇒ v0.2.2+2\n  [0796e94c] + Tokenize v0.5.13\n  [5c2747f8] + URIs v1.2.0\nFormatting test.jl\n../xtime.rb julia --optimize=3 --check-bounds=no test.jl\n\"Julia\"\nencode aaaa... to YWFh: 1431666688, 3.4576218128204346\ndecode YWFh... to aaaa: 1073741824, 1.7702271938323975\n5.228 s, 265 Mb, 0.0 J```\n(thanks for installing extra packages in my global environment)","user":"UDB26738Q","ts":"1616720814.064800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oVZ5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, this worked\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"% make 'run[test.jl]'\nmake run[test.jl]\nmkdir -p target\n../common/julia/julia_fmt.jl test.jl\n   Updating registry at `~/.julia/registries/General`\n   Updating git-repo `"},{"type":"link","url":"https://github.com/JuliaRegistries/General.git"},{"type":"text","text":"`\n  Resolving package versions...\n  Installed Tokenize ─────── v0.5.13\n  Installed CommonMark ───── v0.8.1\n  Installed JuliaFormatter ─ v0.13.5\n  Installed CSTParser ────── v2.5.0\nUpdating `~/.julia/environments/v1.5/Project.toml`\n  [98e50ef6] + JuliaFormatter v0.13.5\nUpdating `~/.julia/environments/v1.5/Manifest.toml`\n  [00ebfdb7] + CSTParser v2.5.0\n  [a80b9123] + CommonMark v0.8.1\n  [a8cc5b0e] + Crayons v4.0.4\n  [e30172f5] + Documenter v0.26.3\n  [b5f81e59] + IOCapture v0.1.1\n  [98e50ef6] + JuliaFormatter v0.13.5\n  [f50d1b31] ↑ Rmath_jll v0.2.2+1 ⇒ v0.2.2+2\n  [0796e94c] + Tokenize v0.5.13\n  [5c2747f8] + URIs v1.2.0\nFormatting test.jl\n../xtime.rb julia --optimize=3 --check-bounds=no test.jl\n\"Julia\"\nencode aaaa... to YWFh: 1431666688, 3.4576218128204346\ndecode YWFh... to aaaa: 1073741824, 1.7702271938323975\n5.228 s, 265 Mb, 0.0 J"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"(thanks for installing extra packages in my global environment)"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"02d9f63f-9f22-4cbd-bcf8-c20d80eb7618","type":"message","text":"uhm, ok, I agree that compilation shouldn't matter much, at least in this benchmark","user":"UDB26738Q","ts":"1616721313.065000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kb+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"uhm, ok, I agree that compilation shouldn't matter much, at least in this benchmark"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"},{"client_msg_id":"51ba648d-a3c0-4d09-a95c-9783bf3ce10b","type":"message","text":"for the bf benchmark I get much slower time with their `xtime.rb` script than with `@btime` :laughing:  but memory consumption is several orders of magnitude lower with `@btime` (208 bytes vs 170 MB).  I suspect they include whole julia runtime?","user":"UDB26738Q","ts":"1616722755.065200","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1616722913.000000"},"blocks":[{"type":"rich_text","block_id":"i4X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for the bf benchmark I get much slower time with their "},{"type":"text","text":"xtime.rb","style":{"code":true}},{"type":"text","text":" script than with "},{"type":"text","text":"@btime","style":{"code":true}},{"type":"text","text":" "},{"type":"emoji","name":"laughing"},{"type":"text","text":"  but memory consumption is several orders of magnitude lower with "},{"type":"text","text":"@btime","style":{"code":true}},{"type":"text","text":" (208 bytes vs 170 MB).  I suspect they include whole julia runtime?"}]}]}],"thread_ts":"1616712210.056500","parent_user_id":"U6N6VQE30"}]