[{"client_msg_id":"ef7939e1-a319-4b93-afd0-9508327343f2","type":"message","text":"Hi everyone,\nI am a beginner developer and in the process of making a\n library in rust i faced a problem that you can't store fuctions in\ncollection as functions are not first class object. And then i find out\nabout juila .Now i have written a 30 line library. please review this\nlibrary and provide suggestions for me to improvement. I have just\nstarted julia programming yesterday.\nimghdr is an a inbuilt module of python for detection of image type.\nrepo link:\n<https://github.com/Agent-Hellboy/ImgHdr.jl>","user":"U01J9BNFM4G","ts":"1608795234.302500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q8K=0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi everyone,\nI am a beginner developer and in the process of making a\n library in rust i faced a problem that you can't store fuctions in\ncollection as functions are not first class object. And then i find out\nabout juila .Now i have written a 30 line library. please review this\nlibrary and provide suggestions for me to improvement. I have just\nstarted julia programming yesterday.\nimghdr is an a inbuilt module of python for detection of image type.\nrepo link:\n"},{"type":"link","url":"https://github.com/Agent-Hellboy/ImgHdr.jl"}]}]}],"thread_ts":"1608795234.302500","reply_count":16,"reply_users_count":3,"latest_reply":"1608865228.307200","reply_users":["UCB7L9W49","U01J9BNFM4G","UB7JS9CHF"],"subscribed":false},{"client_msg_id":"402037dc-acc1-4c99-8fcc-11c0e973fa7e","type":"message","text":"Hi there and welcome!\nFor a beginner your code doesn't look too bad! If it works the way you want it to I wouldn't change too much.\nSome ideas:\nAny reason you are using Mmap instead of a \"normal\" load function?\nIn theory you could put all these checks in the same function with if/else, I'm guessing there is a good reason why you didn't do this?\nYou can make things a little more tidy if you do the comparison like `all(h[1:4] .== [0x47, 0x49, 0x46, 0x38])` .\nIf you are interested in making this as fast as possible (it doesn't look like it has to be) there might be some further improvements that go a little deeper than maybe necessary on the second day :wink:).\nFinally, the usual place to ask these questions is in <#C6A044SQH|helpdesk> or on the Julia Discourse, you might get a better response there. Best of luck!","user":"UCB7L9W49","ts":"1608796744.302600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jfT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi there and welcome!\nFor a beginner your code doesn't look too bad! If it works the way you want it to I wouldn't change too much.\nSome ideas:\nAny reason you are using Mmap instead of a \"normal\" load function?\nIn theory you could put all these checks in the same function with if/else, I'm guessing there is a good reason why you didn't do this?\nYou can make things a little more tidy if you do the comparison like "},{"type":"text","text":"all(h[1:4] .== [0x47, 0x49, 0x46, 0x38])","style":{"code":true}},{"type":"text","text":" .\nIf you are interested in making this as fast as possible (it doesn't look like it has to be) there might be some further improvements that go a little deeper than maybe necessary on the second day "},{"type":"emoji","name":"wink"},{"type":"text","text":").\nFinally, the usual place to ask these questions is in "},{"type":"channel","channel_id":"C6A044SQH"},{"type":"text","text":" or on the Julia Discourse, you might get a better response there. Best of luck!"}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"03eb3eda-0f3b-4470-b29a-b0881259dc43","type":"message","text":"Thanks <@UCB7L9W49> for the suggestions. I will do the changes.","user":"U01J9BNFM4G","ts":"1608798081.302800","team":"T68168MUP","edited":{"user":"U01J9BNFM4G","ts":"1608799184.000000"},"blocks":[{"type":"rich_text","block_id":"O1FF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks "},{"type":"user","user_id":"UCB7L9W49"},{"type":"text","text":" for the suggestions. I will do the changes."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"bd464f83-fe7e-4098-8e8a-c33cbead55a8","type":"message","text":"To answer your question of why i am in hurry, because this is just a practice package for me before an actual package.","user":"U01J9BNFM4G","ts":"1608798158.303000","team":"T68168MUP","edited":{"user":"U01J9BNFM4G","ts":"1608798328.000000"},"blocks":[{"type":"rich_text","block_id":"A+2X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"To answer your question of why i am in hurry, because this is just a practice package for me before an actual package."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"1b909617-25e7-43f5-8940-ffca9ea5ce0d","type":"message","text":"One more question do you think if the image type does not match the implemented type it is good to return nothing. can i throw an exception with a message that the associated type is not supported/the file is not an image.","user":"U01J9BNFM4G","ts":"1608798255.303200","team":"T68168MUP","edited":{"user":"U01J9BNFM4G","ts":"1608798295.000000"},"blocks":[{"type":"rich_text","block_id":"=vIJy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"One more question do you think if the image type does not match the implemented type it is good to return nothing. can i throw an exception with a message that the associated type is not supported/the file is not an image."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"1abc1a06-331e-45d3-8ba9-84692264c46e","type":"message","text":"Btw do the tests look promising to you.","user":"U01J9BNFM4G","ts":"1608798370.303600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nJMwe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Btw do the tests look promising to you."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"27ebb8d9-5de7-4c20-bb1a-fb88f33adbb2","type":"message","text":"&gt; One more question do you think if the image type does not match the implemented type it is good to return nothing\nI guess this really depends on what you want to do with the function. In general it's a good idea to always return the same type so if you chose strings for everything else a string would be good choice here as well. But again, this really depends.","user":"UCB7L9W49","ts":"1608799231.303900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ncBP","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"One more question do you think if the image type does not match the implemented type it is good to return nothing"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I guess this really depends on what you want to do with the function. In general it's a good idea to always return the same type so if you chose strings for everything else a string would be good choice here as well. But again, this really depends."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"e2e3adce-d562-4db5-bd20-b5855f47f792","type":"message","text":"&gt; can i throw an exception with a message that the associated type is not supported/the file is not an image\nSure, I don't see why you couldn't. Again, depends on the use-case.","user":"UCB7L9W49","ts":"1608799259.304100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jvi","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"can i throw an exception with a message that the associated type is not supported/the file is not an image"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Sure, I don't see why you couldn't. Again, depends on the use-case."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"1f9a9dde-a7a3-4c2a-8826-2e29de80be60","type":"message","text":"&gt; Btw do the tests look promising to you.\nYes, so far the test look good, however, I'm not really experienced with that (shame on me, I know :smile:).","user":"UCB7L9W49","ts":"1608799312.304300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RUHbe","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Btw do the tests look promising to you."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, so far the test look good, however, I'm not really experienced with that (shame on me, I know "},{"type":"emoji","name":"smile"},{"type":"text","text":")."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"7911faf4-0991-4d44-aeaf-489a40b5a513","type":"message","text":"I haven't thrown the error because in python after completion of a for loop we can use an else block and throw the exception but here i can't.:grin:","user":"U01J9BNFM4G","ts":"1608800093.304700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VglV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I haven't thrown the error because in python after completion of a for loop we can use an else block and throw the exception but here i can't."},{"type":"emoji","name":"grin"}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"68cce7c3-a6e9-4e7c-8b1d-677ad588163e","type":"message","text":"Well, if you get through the whole for-loop you know nothing matched (otherwise I would have returned already) so then you can just throw?","user":"UCB7L9W49","ts":"1608801070.304900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yj4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, if you get through the whole for-loop you know nothing matched (otherwise I would have returned already) so then you can just throw?"}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"f79e77b3-74d2-4a4d-9190-912aae8bed9f","type":"message","text":"Okay.","user":"U01J9BNFM4G","ts":"1608803409.305100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1Rsl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Okay."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"521980ce-7fe1-41f3-8a02-580f908d1ae8","type":"message","text":"This could be done in a much simpler way, by having a vector of tuples, each one with the header bytes to be matched, and the string to return if they match.\nAlso, the `startswith` function can be used, which would be more efficient.","user":"UB7JS9CHF","ts":"1608841894.305900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hYW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This could be done in a much simpler way, by having a vector of tuples, each one with the header bytes to be matched, and the string to return if they match.\nAlso, the "},{"type":"text","text":"startswith","style":{"code":true}},{"type":"text","text":" function can be used, which would be more efficient."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"8df3dbf9-1d29-42ee-8354-9d16d3ac81d9","type":"message","text":"It could be done in just a few lines, by implementing it that way.","user":"UB7JS9CHF","ts":"1608841910.306100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Lk=7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It could be done in just a few lines, by implementing it that way."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"746e54be-ed25-4879-b397-1e62b85fe6f9","type":"message","text":"Also, you can simply read in the first N bytes, where N is the most you’d need to figure out the different types (I think N would be 5 for the tests you have here).","user":"UB7JS9CHF","ts":"1608841977.306300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bKVU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also, you can simply read in the first N bytes, where N is the most you’d need to figure out the different types (I think N would be 5 for the tests you have here)."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"ffe053e2-2c0c-4d4b-bc4b-4adfb13858a0","type":"message","text":"No need to read in the entire file.","user":"UB7JS9CHF","ts":"1608841988.306500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mb6t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No need to read in the entire file."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"3c72cb10-41da-4699-9e04-b1c35f1f1356","type":"message","text":"Okay, I will do the changes. I have no idea of  startwith function previously and also I don't know whether Julia has a byte type like python and about reading whole file. I thought of making a package to detect file and all the office document has same magic number so you have to parse more bytes to distinguish between xls and doc. But for now I will consider all your advice as this package is just to detect image type.","user":"U01J9BNFM4G","ts":"1608865228.307200","team":"T68168MUP","edited":{"user":"U01J9BNFM4G","ts":"1608867063.000000"},"blocks":[{"type":"rich_text","block_id":"5Qr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Okay, I will do the changes. I have no idea of  startwith function previously and also I don't know whether Julia has a byte type like python and about reading whole file. I thought of making a package to detect file and all the office document has same magic number so you have to parse more bytes to distinguish between xls and doc. But for now I will consider all your advice as this package is just to detect image type."}]}]}],"thread_ts":"1608795234.302500","parent_user_id":"U01J9BNFM4G"}]