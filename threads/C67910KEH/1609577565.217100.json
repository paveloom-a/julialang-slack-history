[{"client_msg_id":"117fe92d-c9aa-46d8-94a9-726ea3d996f6","type":"message","text":"Is there a way to check programatically that a method compiles with absolutely no runtime dynamism, besides proxies like timing and allocations? feel like I'm missing something","user":"URN898S15","ts":"1609577565.217100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UGBtR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way to check programatically that a method compiles with absolutely no runtime dynamism, besides proxies like timing and allocations? feel like I'm missing something"}]}]}],"thread_ts":"1609577565.217100","reply_count":122,"reply_users_count":4,"latest_reply":"1609583224.242400","reply_users":["UH24GRBLL","URN898S15","U7HAYKY9X","U7THT3TM3"],"subscribed":false},{"client_msg_id":"4103ba14-42d1-4bfe-ae93-b0c6b9c3fedd","type":"message","text":"check `@code_warntype`","user":"UH24GRBLL","ts":"1609578475.217200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q3H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"check "},{"type":"text","text":"@code_warntype","style":{"code":true}}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"ff3ad1ae-b023-4261-bbec-c4b447e04899","type":"message","text":"that'll tell you if at any point something resolves to `Any`, requiring dynamic lookups","user":"UH24GRBLL","ts":"1609578492.217400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+VKTG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that'll tell you if at any point something resolves to "},{"type":"text","text":"Any","style":{"code":true}},{"type":"text","text":", requiring dynamic lookups"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"a891c966-2085-4073-ac73-09f38de36e27","type":"message","text":"I mean programatically","user":"URN898S15","ts":"1609578506.217600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W5IU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I mean programatically"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"7199bd56-4bfe-41ab-9b44-8b757ccee3a2","type":"message","text":"it's the red parts that are problematic, yellow are usually fine","user":"UH24GRBLL","ts":"1609578506.217800","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1609578519.000000"},"blocks":[{"type":"rich_text","block_id":"Ehq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's the red parts that are problematic, yellow are usually fine"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"9bce3db9-27d3-4a98-bb58-399b658d1a86","type":"message","text":"at what point?","user":"UH24GRBLL","ts":"1609578526.218100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5h7XQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"at what point?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"7eed23ed-3fc1-45c1-a6bb-505fd1e6066c","type":"message","text":"Tests","user":"URN898S15","ts":"1609578533.218300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zyyF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Tests"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"ecde8b5b-502e-4033-96fd-8a620292642a","type":"message","text":"for performance/GPU","user":"URN898S15","ts":"1609578539.218500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"M6=u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for performance/GPU"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"2705a5ca-70bb-493f-8cbd-e7c26d3b5164","type":"message","text":"so the runtime is never called","user":"URN898S15","ts":"1609578549.218700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i7cb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so the runtime is never called"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"4c4c8592-cd19-4bc8-b3a2-1ffb623e8ff5","type":"message","text":"I mean I have a lot of high performance packages, the problem is keeping them like that with no effort","user":"URN898S15","ts":"1609578575.218900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lHV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I mean I have a lot of high performance packages, the problem is keeping them like that with no effort"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"15a1d3f0-2734-4f52-a0ec-807b92ea8e43","type":"message","text":"`@inferred`","user":"UH24GRBLL","ts":"1609578578.219100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uRw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@inferred","style":{"code":true}}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"84267245-f404-44a8-9704-9de8f620142a","type":"message","text":"Thats just the results","user":"URN898S15","ts":"1609578587.219300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SUCS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thats just the results"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"d661c42b-d17e-4644-9dd8-6ae9672f7569","type":"message","text":"Internally it can still be dynamic","user":"URN898S15","ts":"1609578595.219500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cdk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Internally it can still be dynamic"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"fdf7f88c-3d4e-4f8b-82da-75ba0d0ec4a6","type":"message","text":"sure, but presumably the instability is introduced by one of your methods","user":"UH24GRBLL","ts":"1609578646.219700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7VcUU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure, but presumably the instability is introduced by one of your methods"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"f9df85e7-f7e8-45e5-bc14-e7622d7cb245","type":"message","text":"there are a few in Base that are unstable, but only because there's no way to write them in a stable way","user":"UH24GRBLL","ts":"1609578670.219900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bX6v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there are a few in Base that are unstable, but only because there's no way to write them in a stable way"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"5fa0ce4d-bec5-4e9f-b114-192fdad532a2","type":"message","text":"The point is testing to guarantee that no changes will break GPU compatability","user":"URN898S15","ts":"1609578679.220100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/a0C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The point is testing to guarantee that no changes will break GPU compatability"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"dc5f70a0-dff0-4a20-b58f-96eb80a13264","type":"message","text":"Yes, I got that","user":"UH24GRBLL","ts":"1609578690.220300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"O4OH6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, I got that"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"cb74b1b4-8a79-4e7f-a0ed-ef847ca36d89","type":"message","text":"no checking everything manually with every PR","user":"URN898S15","ts":"1609578692.220500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=IcgO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no checking everything manually with every PR"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"807249c6-5453-4a9d-a8a5-97deb79b72a7","type":"message","text":"I'm saying that you can write tests with `@inferred` for the small parts","user":"UH24GRBLL","ts":"1609578713.220700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=gA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm saying that you can write tests with "},{"type":"text","text":"@inferred","style":{"code":true}},{"type":"text","text":" for the small parts"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"d9ccfd50-8e7b-4a97-ad0a-d7bd8a378993","type":"message","text":"recusive method stability changes quite regulaly","user":"URN898S15","ts":"1609578718.220900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rHZ0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"recusive method stability changes quite regulaly"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"fadb4b68-bc5a-4d4c-a2db-333bc93d744c","type":"message","text":"@inferred is not enough, thats why im asking","user":"URN898S15","ts":"1609578729.221100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ALdyY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@inferred is not enough, thats why im asking"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"7ba040e1-cc7c-4eda-a67d-3d59bf056794","type":"message","text":"I'm not sure I understand - if the result of the recursion is unstable, surely the whole call will be as well?","user":"UH24GRBLL","ts":"1609578778.221300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"meg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure I understand - if the result of the recursion is unstable, surely the whole call will be as well?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"bbea2cd6-0f8e-452b-9dbf-d8504e2948c9","type":"message","text":"Not if the result is just e.g. a Bool no matter what","user":"URN898S15","ts":"1609578798.221500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Iou","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not if the result is just e.g. a Bool no matter what"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"e9b69259-67e0-4679-a184-58666397c639","type":"message","text":"`@inferred` is just about results","user":"URN898S15","ts":"1609578815.221700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SjffW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@inferred","style":{"code":true}},{"type":"text","text":" is just about results"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"7e61f4db-e626-4706-af99-bd8d281c9243","type":"message","text":"not overall dynamism","user":"URN898S15","ts":"1609578821.221900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cEz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not overall dynamism"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"1a2a92e4-b774-4e20-aa67-ba84c7d5c595","type":"message","text":"if you have `f` recursing into `f` and `f` is unstable, how can the top level be stable but inner calls not?","user":"UH24GRBLL","ts":"1609578850.222100","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1609578854.000000"},"blocks":[{"type":"rich_text","block_id":"Q9tI3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you have "},{"type":"text","text":"f","style":{"code":true}},{"type":"text","text":" recursing into "},{"type":"text","text":"f","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"f","style":{"code":true}},{"type":"text","text":" is unstable, how can the top level be stable but inner calls not?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"cb1a3f07-85e4-4485-84bd-05243e4031f1","type":"message","text":"If you have a conditional at the end?","user":"URN898S15","ts":"1609578874.222400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KHG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you have a conditional at the end?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"82966f94-9477-45c7-bc32-39ad248cfd05","type":"message","text":"It has to return a Bool","user":"URN898S15","ts":"1609578882.222600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TO+3D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It has to return a Bool"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"a13b2506-3bce-45c2-aad7-e32047a20d4c","type":"message","text":"can you show me an example?","user":"UH24GRBLL","ts":"1609578889.222800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HL0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you show me an example?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"eebb46b3-2a30-4ed9-9982-28bb00249c19","type":"message","text":"it's kind of hard to suggest something without a concrete thing","user":"UH24GRBLL","ts":"1609578898.223000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"75dn+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's kind of hard to suggest something without a concrete thing"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"899d9a83-6f62-4305-94a2-8d96675a88b0","type":"message","text":"Its very concrete lol, I just need someone who knows","user":"URN898S15","ts":"1609578926.223200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IQje","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Its very concrete lol, I just need someone who knows"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"a869864a-3252-4f7e-a86b-eb629bedd2bb","type":"message","text":"about the internals","user":"URN898S15","ts":"1609578933.223400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VdF4X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"about the internals"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"2f46c0f8-4697-464f-ba96-ad5e0313826d","type":"message","text":"but in regards to your original question, short of walking the results of `code_typed` there's nothing I know of","user":"UH24GRBLL","ts":"1609578958.223600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zZ+pG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but in regards to your original question, short of walking the results of "},{"type":"text","text":"code_typed","style":{"code":true}},{"type":"text","text":" there's nothing I know of"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"bed9aa37-ce5c-4c4c-ae3a-d84856b01710","type":"message","text":"this may be different from what's actually run though, because julia is inherently dynamic","user":"UH24GRBLL","ts":"1609578986.223800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0Cj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this may be different from what's actually run though, because julia is inherently dynamic"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"9668165f-871b-4435-ba81-cfc96d4af5fe","type":"message","text":"Thats kind of my point. I don't either, and I need to lock everything down if I am going to promise GPU compilation works","user":"URN898S15","ts":"1609578996.224000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jb+/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thats kind of my point. I don't either, and I need to lock everything down if I am going to promise GPU compilation works"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"1dfb0ed4-1710-4312-b6d5-63e937f623b0","type":"message","text":"`code_typed` should do what you want then","user":"UH24GRBLL","ts":"1609579012.224200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=TF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"code_typed","style":{"code":true}},{"type":"text","text":" should do what you want then"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"859ae257-b6bd-4b2f-a595-885a1c0431e6","type":"message","text":"``` code_typed(f, types; optimize=true, debuginfo=:default)\n\n Returns an array of type-inferred lowered form (IR) for the methods matching the given generic function and type signature.```","user":"UH24GRBLL","ts":"1609579025.224400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EPI","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":" code_typed(f, types; optimize=true, debuginfo=:default)\n\n Returns an array of type-inferred lowered form (IR) for the methods matching the given generic function and type signature."}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"6031a43b-01fd-402b-8ae4-915edebe89fb","type":"message","text":"Again, thats not programatic","user":"URN898S15","ts":"1609579030.224600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sMztU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Again, thats not programatic"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"56de2c96-da98-4c11-8241-6aabbc9eef9b","type":"message","text":"sure it is","user":"UH24GRBLL","ts":"1609579034.224800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HrS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure it is"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"477963bd-b733-4099-8338-6e033f1cda14","type":"message","text":"that's not the macro","user":"UH24GRBLL","ts":"1609579037.225000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f9BO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's not the macro"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"b503ee32-f119-4d8d-acb7-049e1dd66b0d","type":"message","text":":)","user":"UH24GRBLL","ts":"1609579044.225200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LYzm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":":)"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"b51bca62-c5a0-4fe2-b8da-a5bb2f102d83","type":"message","text":"Oh you mean walking the IR?","user":"URN898S15","ts":"1609579066.225400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2=c","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh you mean walking the IR?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"7f4142bf-56c2-4728-8661-3c5d4c1be572","type":"message","text":"yeah that was my thought, but seems like there should be a macro for that","user":"URN898S15","ts":"1609579084.225600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U7m3G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah that was my thought, but seems like there should be a macro for that"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"a8d17c1f-8825-41d6-bf9a-b36b8a5bf336","type":"message","text":"yes, there's not really much else you can do","user":"UH24GRBLL","ts":"1609579086.225800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AvS=d","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, there's not really much else you can do"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"27c53a87-0f91-4cc0-b959-4b2f22feb4f0","type":"message","text":"Ok sounds like I have to make another package :flushed:","user":"URN898S15","ts":"1609579115.226000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qIbJH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok sounds like I have to make another package "},{"type":"emoji","name":"flushed"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"62101a6b-db39-4648-8784-c71fe5c0948b","type":"message","text":"I mean, if you really want to avoid having to dive into every PR for type instability, there's nothing much to do other than sprinkling `@inferred` everywhere and keeping your API small enough to test with that macro","user":"UH24GRBLL","ts":"1609579157.226200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nCqM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I mean, if you really want to avoid having to dive into every PR for type instability, there's nothing much to do other than sprinkling "},{"type":"text","text":"@inferred","style":{"code":true}},{"type":"text","text":" everywhere and keeping your API small enough to test with that macro"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"f8b9e4d7-be22-4ea5-af1b-e937784401fb","type":"message","text":"if you have large recursions that do lots of complex things, best to break them up into smaller functions and subrecursions anyway","user":"UH24GRBLL","ts":"1609579177.226400","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1609579290.000000"},"blocks":[{"type":"rich_text","block_id":"FlcDL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you have large recursions that do lots of complex things, best to break them up into smaller functions and subrecursions anyway"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"9546de30-6cb1-4f05-9ffa-fe51cbf7b97c","type":"message","text":"that can eliminate a lot of type instabilites by itself","user":"UH24GRBLL","ts":"1609579193.226600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GxRJi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that can eliminate a lot of type instabilites by itself"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"5401ffae-2f76-4d84-8eac-e2b06055b9e8","type":"message","text":"that's why I was asking about when this sort of instability occurs, because it sounds like that's what's happening :)","user":"UH24GRBLL","ts":"1609579244.226800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lm9h","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's why I was asking about when this sort of instability occurs, because it sounds like that's what's happening :)"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"f08e6d32-d328-4a25-9336-0c2a43a49cdb","type":"message","text":"No everything is fine structurally, I use tiny primitive  functions. But when you need constant propagation for abstract types things get ugly","user":"URN898S15","ts":"1609579302.227100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YYbU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No everything is fine structurally, I use tiny primitive  functions. But when you need constant propagation for abstract types things get ugly"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"40f0cc0c-6328-47a4-84df-21b8f6af1949","type":"message","text":"The option is to just `Val` everything and be done with it","user":"URN898S15","ts":"1609579329.227300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w9E6L","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The option is to just "},{"type":"text","text":"Val","style":{"code":true}},{"type":"text","text":" everything and be done with it"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"789ac866-8f6f-4035-975f-17f6bca68cab","type":"message","text":"relying on constant propagation is almost always a bad thing imo, it's not guaranteed to propagate everywhere","user":"UH24GRBLL","ts":"1609579331.227500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"khIbB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"relying on constant propagation is almost always a bad thing imo, it's not guaranteed to propagate everywhere"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"8a4e6104-eece-4b94-bf71-8dc9c2182c80","type":"message","text":"but its not elegant","user":"URN898S15","ts":"1609579337.227700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5hgkH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but its not elegant"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"9c64c21c-a553-4556-a63d-840a06f7bc23","type":"message","text":"even `Val` will not propagate everywhere, IIRC - on top of killing compile times for complex things","user":"UH24GRBLL","ts":"1609579353.227900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nlTOX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"even "},{"type":"text","text":"Val","style":{"code":true}},{"type":"text","text":" will not propagate everywhere, IIRC - on top of killing compile times for complex things"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"184599ca-8ed6-4c8e-92f0-522bbdffbebf","type":"message","text":"But how else do you handle multiple abstract type arguments","user":"URN898S15","ts":"1609579359.228100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WYMS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But how else do you handle multiple abstract type arguments"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"f83e13a5-2150-443f-882a-af42471f2276","type":"message","text":"tuples of abstract type are UnionAll","user":"URN898S15","ts":"1609579369.228300","team":"T68168MUP","edited":{"user":"URN898S15","ts":"1609579385.000000"},"blocks":[{"type":"rich_text","block_id":"b3hS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"tuples of abstract type are UnionAll"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"3d608127-804c-4c73-bf92-d20320b39d07","type":"message","text":"avoid the abstract types entirely","user":"UH24GRBLL","ts":"1609579392.228600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cLM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"avoid the abstract types entirely"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"6575c1b5-5cd2-4644-894f-0b5047baac6b","type":"message","text":"subtying is a powerful thing","user":"URN898S15","ts":"1609579416.228800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nLz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"subtying is a powerful thing"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"3dba49d1-15a9-4f2c-a0f4-8b2e827f73f1","type":"message","text":"subtyping stands in the way of non-dynamic dispatch though","user":"UH24GRBLL","ts":"1609579437.229000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y=EH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"subtyping stands in the way of non-dynamic dispatch though"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"3b31ecda-784f-4522-b720-19841599ed61","type":"message","text":"well, sometimes","user":"UH24GRBLL","ts":"1609579469.229200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"woS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, sometimes"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"a47f356f-a40e-482d-bf24-aa0b2a4b7527","type":"message","text":"it doesn't, I mean DimentionalData is now fully compile time with abstract types","user":"URN898S15","ts":"1609579473.229400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dPsw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it doesn't, I mean DimentionalData is now fully compile time with abstract types"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"7cb21354-2843-41f7-93e7-215903efe5f5","type":"message","text":"I just need to guarantee it","user":"URN898S15","ts":"1609579481.229600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hWAsD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I just need to guarantee it"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"fec52641-8dc2-4ffc-8e1e-d9baefeb9707","type":"message","text":"I don't think you can guarantee it, as julia itself doesn't guarantee to infer everything 100% of the time","user":"UH24GRBLL","ts":"1609579521.229800","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1609579523.000000"},"blocks":[{"type":"rich_text","block_id":"7W3dk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think you can guarantee it, as julia itself doesn't guarantee to infer everything 100% of the time"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"5f1e2a81-5e51-4712-8f81-02c1850a59d4","type":"message","text":"it's a conscious tradeoff, compile time for run time","user":"UH24GRBLL","ts":"1609579534.230100","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1609579547.000000"},"blocks":[{"type":"rich_text","block_id":"DCESv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's a conscious tradeoff, compile time for run time"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"e95f9e7e-b87d-4a60-b300-74b232ac48b4","type":"message","text":"but within certain bounds you pretty much can","user":"URN898S15","ts":"1609579554.230400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oRE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but within certain bounds you pretty much can"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"a2a26cec-aea9-485b-aec4-c76d00d98092","type":"message","text":"like X arguments on version Y","user":"URN898S15","ts":"1609579578.230600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PeW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"like X arguments on version Y"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"90c67da8-ef02-4f72-bcda-1299b77f0a45","type":"message","text":"the bounds are based on heuristics, which may change with versions","user":"UH24GRBLL","ts":"1609579591.230800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"I3GK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the bounds are based on heuristics, which may change with versions"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"e52e1433-6604-46fb-84b6-af449246c2bb","type":"message","text":"will be compiled","user":"URN898S15","ts":"1609579593.231000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ABld","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"will be compiled"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"9e3fa419-8660-451d-af07-e962ddfdd938","type":"message","text":"totally","user":"URN898S15","ts":"1609579601.231200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y++","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"totally"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"bbe3cdc3-8ec5-48ee-b6da-d22704daa51a","type":"message","text":"everything is compiled, just the lookup for which compiled method (+following compilation) may occur at runtime","user":"UH24GRBLL","ts":"1609579632.231400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gsjXD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"everything is compiled, just the lookup for which compiled method (+following compilation) may occur at runtime"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"1e781ec1-60cc-49b4-b7e7-87cf786fad42","type":"message","text":"but again, I feel like this stems from relying too much on constant propagation","user":"UH24GRBLL","ts":"1609579679.231600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yxvi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but again, I feel like this stems from relying too much on constant propagation"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"debc455c-ab9e-408a-bce4-4c677abfc10c","type":"message","text":"Clearly, I mean compiled to code that doesn't need the julia runtime","user":"URN898S15","ts":"1609579684.231800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TmcWp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Clearly, I mean compiled to code that doesn't need the julia runtime"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"1a20d5ee-8cb5-46de-b94e-a48b52feaf6d","type":"message","text":"what concrete example have you written that you'd expect to always be inferred, with no dynamic dispatch in the call?","user":"UH24GRBLL","ts":"1609579705.232000","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1609579730.000000"},"blocks":[{"type":"rich_text","block_id":"OQhZi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what concrete example have you written that you'd expect to always be inferred, with no dynamic dispatch in the call?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"3e3f4e96-4824-4cdb-9f70-713125192764","type":"message","text":"There is a package for your question in the OP, right now I'm blanking on the name. It's used in e g. Juno's profiler","user":"U7HAYKY9X","ts":"1609579826.232300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XS8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There is a package for your question in the OP, right now I'm blanking on the name. It's used in e g. Juno's profiler"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"6d2c182a-c310-4156-8252-752ce751f37b","type":"message","text":"Traceur!","user":"U7HAYKY9X","ts":"1609579833.232500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dafg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Traceur!"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"e8c67d38-7f01-413e-857a-830653b45d1d","type":"message","text":"that's also not programmatic though","user":"UH24GRBLL","ts":"1609580057.232700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"m18MH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's also not programmatic though"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"636bfa9e-a387-49be-a81a-4c0e3afc365f","type":"message","text":"and I think they're going to change architecture some time in the future, when the custom compiler hooks are in","user":"UH24GRBLL","ts":"1609580090.232900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NCA7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and I think they're going to change architecture some time in the future, when the custom compiler hooks are in"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"ed896f6d-788f-4b70-80cc-5fdca212dace","type":"message","text":"they're relying on Cassete right now","user":"UH24GRBLL","ts":"1609580098.233100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MPOAa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"they're relying on Cassete right now"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"888c8d47-14e0-489e-b3bc-14e92400f0f9","type":"message","text":"`@test_nowarn @trace f(x)`  :smiley:","user":"URN898S15","ts":"1609580358.233300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hTefw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@test_nowarn @trace f(x)","style":{"code":true}},{"type":"text","text":"  "},{"type":"emoji","name":"smiley"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"7e6c71bb-3ccb-4275-a035-5e6c0ffdb70e","type":"message","text":"hmm, seems to warn about things that actually compile away","user":"URN898S15","ts":"1609580585.233500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/Qm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm, seems to warn about things that actually compile away"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"ea509275-c445-496f-a188-8c2b874cfc0f","type":"message","text":"Maybe moving the goalposts is better - compilation guaranteed using `Val`, 99% guaranteed otherwise.","user":"URN898S15","ts":"1609580772.233700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zMCX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe moving the goalposts is better - compilation guaranteed using "},{"type":"text","text":"Val","style":{"code":true}},{"type":"text","text":", 99% guaranteed otherwise."}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"b5236f6a-abf5-4a97-92c4-01d7e82adc43","type":"message","text":"Cassette is not the most reliable tool","user":"UH24GRBLL","ts":"1609580884.233900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xVWh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Cassette is not the most reliable tool"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"b2c0d40f-8653-41f2-84f6-17614f5c17ae","type":"message","text":"but again, relying on constant propagation through different layers of recursion with (seemingly) nontrivial transforms feels like the danger zone","user":"UH24GRBLL","ts":"1609580958.234100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ht5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but again, relying on constant propagation through different layers of recursion with (seemingly) nontrivial transforms feels like the danger zone"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"e7df6d2a-cbcc-4092-9b9d-05972f2895fd","type":"message","text":"No I wrap it as soon as possible.","user":"URN898S15","ts":"1609581039.234300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cZ3s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No I wrap it as soon as possible."}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"5f716cca-5f26-4864-a1d5-a6fc654d57b2","type":"message","text":"Bat doing that for N arguments is hard","user":"URN898S15","ts":"1609581076.234500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GtSUH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Bat doing that for N arguments is hard"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"f4698563-a0e4-49e6-b4bf-351dfbd4fd5a","type":"message","text":"tbh, I'd be more surprised if it works for an unknown number of arguments at all","user":"UH24GRBLL","ts":"1609581122.234700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SkdD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"tbh, I'd be more surprised if it works for an unknown number of arguments at all"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"0f6f62c3-b0c4-44b9-aa69-3805bff3946f","type":"message","text":"I'd expect it to break after 4-6","user":"UH24GRBLL","ts":"1609581134.234900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=xy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd expect it to break after 4-6"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"e0444f1b-bb07-4dae-8883-55c17455fc2e","type":"message","text":"Yeah it does","user":"URN898S15","ts":"1609581141.235100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zoa0W","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah it does"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"ebc63898-aae6-49ed-97ae-0f22ff5e1702","type":"message","text":"iirc that was the cutoff for when the compiler said \"that's enough\"","user":"UH24GRBLL","ts":"1609581153.235300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1OA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"iirc that was the cutoff for when the compiler said \"that's enough\""}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"67f3988d-8c30-48c9-b10f-6d09fa9266f8","type":"message","text":"Unless you manually define the methods","user":"URN898S15","ts":"1609581157.235500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+YWQY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Unless you manually define the methods"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"9eb8d206-acc5-4845-97ab-6bd6b0c58fee","type":"message","text":"yes","user":"UH24GRBLL","ts":"1609581161.235700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EAaz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"931aa747-3349-44a7-b768-12dc827f7d04","type":"message","text":"It can be more like 3 sometimes","user":"URN898S15","ts":"1609581194.235900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"flO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It can be more like 3 sometimes"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"44d50924-4710-43e7-b702-be91764f3a89","type":"message","text":"depends on which heuristic exactly fails, but yes","user":"UH24GRBLL","ts":"1609581204.236100","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1609581207.000000"},"blocks":[{"type":"rich_text","block_id":"h1Mb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"depends on which heuristic exactly fails, but yes"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"f15f3dc7-4b38-4c8d-9683-6aa995e5cb56","type":"message","text":"iirc the one with 3 was the number of abstract arguments in a call","user":"UH24GRBLL","ts":"1609581233.236400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zmbl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"iirc the one with 3 was the number of abstract arguments in a call"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"6a32b2df-c89a-4cb2-b7df-75bad9cec385","type":"message","text":"so the question should be - why does the compiler only see abstract arguments at that point?","user":"UH24GRBLL","ts":"1609581252.236600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mgZZE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so the question should be - why does the compiler only see abstract arguments at that point?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"916dbb04-6bf1-4c86-b553-5f0601ddb6d6","type":"message","text":"if you can fix/avoid that, you should be good","user":"UH24GRBLL","ts":"1609581267.236800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KFnzP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you can fix/avoid that, you should be good"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"6b8333ab-17bc-403f-96c2-0ac7ce43e689","type":"message","text":"I suspect it's from splatting an abstractly typed vector/tuple?","user":"UH24GRBLL","ts":"1609581281.237000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vwry","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I suspect it's from splatting an abstractly typed vector/tuple?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"7894533d-c275-4af5-9bc7-d95ce122cfba","type":"message","text":"if it's the tuple, you can probably get around the limit by making sure that the inferred type for those tuples is concrete and not a UnionAll","user":"UH24GRBLL","ts":"1609581314.237200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"g2cU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if it's the tuple, you can probably get around the limit by making sure that the inferred type for those tuples is concrete and not a UnionAll"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"7ffd02ec-fa02-4b1e-8e26-77e4d65643d3","type":"message","text":"if it's a vector.. well there's no good way around it","user":"UH24GRBLL","ts":"1609581331.237400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GNwo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if it's a vector.. well there's no good way around it"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"b2383540-465d-43d6-b485-96567423b9d4","type":"message","text":"but yeah, it's hard to give a concrete suggestion without a concrete example","user":"UH24GRBLL","ts":"1609581380.237600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mVa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but yeah, it's hard to give a concrete suggestion without a concrete example"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"1d4e117f-66aa-4362-89ba-fb3fd5d9a70b","type":"message","text":"Yeah thats it exactly. Multiple tuples that can have abstract contents. Been working on how to funel all prop to a single method with variants to handle enough args. Seems to work fine, although a bit ugly","user":"URN898S15","ts":"1609581428.237800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GvKD=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah thats it exactly. Multiple tuples that can have abstract contents. Been working on how to funel all prop to a single method with variants to handle enough args. Seems to work fine, although a bit ugly"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"0ed1b314-7e76-437c-98ea-6a270316b9c1","type":"message","text":"For examples, this whole page :sweat_smile:: <https://github.com/rafaqz/DimensionalData.jl/blob/de150bc664fb8114207c920c2857c7c7ac38c069/src/primitives.jl>","user":"URN898S15","ts":"1609581558.238000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lN0O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For examples, this whole page "},{"type":"emoji","name":"sweat_smile"},{"type":"text","text":": "},{"type":"link","url":"https://github.com/rafaqz/DimensionalData.jl/blob/de150bc664fb8114207c920c2857c7c7ac38c069/src/primitives.jl"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"f9026e6b-d452-4a14-84e1-bb55973e1c09","type":"message","text":"I mean that all works, but Isn't locked down in tests. I could probably count `@code_native` output to be less than 10 lines :joy:","user":"URN898S15","ts":"1609581688.238200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1l1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I mean that all works, but Isn't locked down in tests. I could probably count "},{"type":"text","text":"@code_native","style":{"code":true}},{"type":"text","text":" output to be less than 10 lines "},{"type":"emoji","name":"joy"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"4ec79a4e-b8ff-4907-8c3d-58d57825ae40","type":"message","text":"But again it's a proxy","user":"URN898S15","ts":"1609581709.238400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3Hbm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But again it's a proxy"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"67bc73a1-d698-445d-a2a6-ac1209be9cc1","type":"message","text":"Isn't it simpler to guarantee the user of your API \"if you put concrete stuff in you will get concrete stuff out, abstract types will not work\"?","user":"UH24GRBLL","ts":"1609581830.238600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Fd1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Isn't it simpler to guarantee the user of your API \"if you put concrete stuff in you will get concrete stuff out, abstract types will not work\"?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"44ba82af-d441-4b2c-881b-bf83647b04fa","type":"message","text":"Or do you actually require it to work for abstract typed containers as well","user":"UH24GRBLL","ts":"1609581851.238800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oip","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or do you actually require it to work for abstract typed containers as well"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"ee56ba6f-af06-4f51-9dec-dcbb9fba226f","type":"message","text":"because I don't think that'll ever work consistently","user":"UH24GRBLL","ts":"1609581862.239000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JN9B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"because I don't think that'll ever work consistently"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"7c3d6f3f-bea8-40b2-ac36-299676a13c8a","type":"message","text":"Selecting all dimensions `&lt;: XDim` is very useful. But I don't know the concrete types people make","user":"URN898S15","ts":"1609581903.239200","team":"T68168MUP","edited":{"user":"URN898S15","ts":"1609581942.000000"},"blocks":[{"type":"rich_text","block_id":"uHG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Selecting all dimensions `<: XDim` is very useful. But I don't know the concrete types people make"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"c0df398c-3104-4086-96ae-da27572c139e","type":"message","text":"`Val{XDim}()` is fine, just ugly.","user":"URN898S15","ts":"1609581986.239600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BGwe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Val{XDim}()","style":{"code":true}},{"type":"text","text":" is fine, just ugly."}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"a75b7bd4-ee1a-4349-9ba5-6620f88d5d4a","type":"message","text":"I don't know","user":"UH24GRBLL","ts":"1609582078.239800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f4JW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't know"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"8e00d4ad-9d53-43a9-9a7c-8827201ba885","type":"message","text":"I think if you only guarantee support for stuff defined via `@dim`, that's good enough","user":"UH24GRBLL","ts":"1609582109.240000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4N8bg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think if you only guarantee support for stuff defined via "},{"type":"text","text":"@dim","style":{"code":true}},{"type":"text","text":", that's good enough"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"fd6887b9-98ab-4faa-8d3b-e219b475f528","type":"message","text":"Probably using traits is the answer to this too, like everything else","user":"URN898S15","ts":"1609582112.240200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qFojq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Probably using traits is the answer to this too, like everything else"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"452d0b37-80c8-4ba0-9e57-638702a79841","type":"message","text":"and you can make sure your invariants hold for that case","user":"UH24GRBLL","ts":"1609582121.240400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qwF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and you can make sure your invariants hold for that case"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"cd825ece-1baa-4538-9a25-8604bb7e2cef","type":"message","text":"This should really be a gripe: abstract types are useless","user":"URN898S15","ts":"1609582193.240600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u16","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This should really be a gripe: abstract types are useless"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"cdeac519-1f57-4f2a-bb10-541710a7be90","type":"message","text":"why?","user":"UH24GRBLL","ts":"1609582255.240800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kOxw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"why?"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"fe60663d-d1dc-46a3-a87b-82bdc3b6b48a","type":"message","text":"they are different things to traits","user":"UH24GRBLL","ts":"1609582281.241000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SXP8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"they are different things to traits"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"216f7adc-16cc-42dc-ba7c-f16d6fab528c","type":"message","text":"That was hyperbole... its just not easy to use them in methods to specify groups of things.","user":"URN898S15","ts":"1609582396.241200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rCE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That was hyperbole... its just not easy to use them in methods to specify groups of things."}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"418c9cd4-29b1-482d-8be4-2e296bbdae79","type":"message","text":"Because of constant prop issues","user":"URN898S15","ts":"1609582417.241400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jgW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Because of constant prop issues"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"87b8b865-329b-4006-a8d0-963a9a443233","type":"message","text":"I don't think that's true","user":"UH24GRBLL","ts":"1609582562.241600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OMz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think that's true"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"8a027bd1-4390-4c90-9944-f2aa6d208aa7","type":"message","text":"you're basically trying to use type parameters as values, and that's not a case type parametrs should be used for :man-shrugging:","user":"UH24GRBLL","ts":"1609582792.241800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i64","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you're basically trying to use type parameters as values, and that's not a case type parametrs should be used for "},{"type":"emoji","name":"man-shrugging"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"4ae95310-a7c9-466a-892e-fa16fb2f191e","type":"message","text":"I don't think traits would help with resolving that at all, because at it's core you're still relying on the compiler figuring out the correct trait given the type parameters","user":"UH24GRBLL","ts":"1609582908.242000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EQZTg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think traits would help with resolving that at all, because at it's core you're still relying on the compiler figuring out the correct trait given the type parameters"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"ddc8bb5e-d4d8-4d0e-97ee-71fa8a0f7e85","type":"message","text":"if the types are concrete, it'll work out, but if it's abstract, I don't think it will because you run into the same limitation on dispatching on abstract types","user":"UH24GRBLL","ts":"1609582989.242200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BBi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if the types are concrete, it'll work out, but if it's abstract, I don't think it will because you run into the same limitation on dispatching on abstract types"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"},{"client_msg_id":"167a6a34-ce4b-43d8-a1bd-803a843a0b8b","type":"message","text":"To answer the original question, you can also try running your code with Traceur.jl","user":"U7THT3TM3","ts":"1609583224.242400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wGNg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"To answer the original question, you can also try running your code with Traceur.jl"}]}]}],"thread_ts":"1609577565.217100","parent_user_id":"URN898S15"}]