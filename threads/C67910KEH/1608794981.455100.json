[{"client_msg_id":"69848784-0d67-4984-931c-d3cdff75df8f","type":"message","text":"Hi everyone,\nI am a beginner developer and in the process of making a library in rust i faced a problem that you can't store fuctions in collection as functions are not first class object. And then i find out about juila .Now i have written a 30 line library. please review this library and provide suggestions for me to improvement. I have just started julia programming yesterday.\nimghdr is an a inbuilt module of python for detection of image type.\nrepo link:\n<https://github.com/Agent-Hellboy/ImgHdr.jl>","user":"U01J9BNFM4G","ts":"1608794981.455100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6Hh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi everyone,\nI am a beginner developer and in the process of making a library in rust i faced a problem that you can't store fuctions in collection as functions are not first class object. And then i find out about juila .Now i have written a 30 line library. please review this library and provide suggestions for me to improvement. I have just started julia programming yesterday.\nimghdr is an a inbuilt module of python for detection of image type.\nrepo link:\n"},{"type":"link","url":"https://github.com/Agent-Hellboy/ImgHdr.jl"}]}]}],"thread_ts":"1608794981.455100","reply_count":10,"reply_users_count":3,"latest_reply":"1608867570.473000","reply_users":["UTHKW0GSH","U01J9BNFM4G","U8D9768Q6"],"subscribed":false},{"client_msg_id":"6e914cbb-f33e-4f5d-9192-17bc82fb9cf0","type":"message","text":"I'd put the file loading outside the test function definition and only call it once in `check`","user":"UTHKW0GSH","ts":"1608798809.456000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G++","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd put the file loading outside the test function definition and only call it once in "},{"type":"text","text":"check","style":{"code":true}}]}]}],"thread_ts":"1608794981.455100","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"100ecb0c-9013-4215-9690-37cce6b1d397","type":"message","text":"Also the test functions have a destinct pattern that could be generalized perhaps","user":"UTHKW0GSH","ts":"1608798843.456200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"K=u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also the test functions have a destinct pattern that could be generalized perhaps"}]}]}],"thread_ts":"1608794981.455100","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"8f7e67e2-596a-47d2-9bd0-fe78b5568f4b","type":"message","text":"Thanks <@UTHKW0GSH>. I am not getting your second point.","user":"U01J9BNFM4G","ts":"1608799047.456400","team":"T68168MUP","edited":{"user":"U01J9BNFM4G","ts":"1608799228.000000"},"blocks":[{"type":"rich_text","block_id":"L51sz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks "},{"type":"user","user_id":"UTHKW0GSH"},{"type":"text","text":". I am not getting your second point."}]}]}],"thread_ts":"1608794981.455100","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"df8cd5c4-be82-4162-bf8c-fd9975552204","type":"message","text":"You could define some custom types and iterate over those, but it's only a suggestion:\n\n```\nabstract type FileType end\nstruct Gif &lt;: FileType end\n\nisfile(::Gif, h) = h[1] == gif_byte1 &amp;&amp; etc\n\nfunction test_filetype(ft::FileType, file)\n   if isfile(ft, file) \n      return lowercase(string(ft))\n   end\nend\n```","user":"UTHKW0GSH","ts":"1608799261.456700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h8g","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You could define some custom types and iterate over those, but it's only a suggestion:\n\n```\nabstract type FileType end\nstruct Gif <: FileType end\n\nisfile(::Gif, h) = h[1] == gif_byte1 && etc\n\nfunction test_filetype(ft::FileType, file)\n   if isfile(ft, file) \n      return lowercase(string(ft))\n   end\nend\n```"}]}]}],"thread_ts":"1608794981.455100","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"09a3b4e2-3f71-4353-87c1-862e5f8a40a4","type":"message","text":"Okay.","user":"U01J9BNFM4G","ts":"1608799331.456900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eHzl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Okay."}]}]}],"thread_ts":"1608794981.455100","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"0f4ef334-b23b-4e32-afe0-f5228d8ef39d","type":"message","text":"Also for global module variables like your `tests = []` it's best to use `const tests = Function[]` to declare it of constant type","user":"UTHKW0GSH","ts":"1608799416.457100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Kb8DI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also for global module variables like your "},{"type":"text","text":"tests = []","style":{"code":true}},{"type":"text","text":" it's best to use "},{"type":"text","text":"const tests = Function[]","style":{"code":true}},{"type":"text","text":" to declare it of constant type"}]}]}],"thread_ts":"1608794981.455100","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"7dfbe910-3403-4da3-935b-d664bf9b8e6b","type":"message","text":"sure.","user":"U01J9BNFM4G","ts":"1608799538.457300","team":"T68168MUP","edited":{"user":"U01J9BNFM4G","ts":"1608799554.000000"},"blocks":[{"type":"rich_text","block_id":"i6HRn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure."}]}]}],"thread_ts":"1608794981.455100","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"A0D11C15-5238-4047-861F-AC883CEAF282","type":"message","text":"Note that since `Function` is an abstract type, a `Function[]` may still not be very efficient depending on the use case","user":"U8D9768Q6","ts":"1608824374.460600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Db1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Note that since "},{"type":"text","text":"Function","style":{"code":true}},{"type":"text","text":" is an abstract type, a "},{"type":"text","text":"Function[]","style":{"code":true}},{"type":"text","text":" may still not be very efficient depending on the use case"}]}]}],"thread_ts":"1608794981.455100","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"FCE71DC1-0E42-4BA3-8CB1-B3AB6B63153D","type":"message","text":"If you want to keep track of which file is where at compile time, you’ll need a `Tuple`. If your program can’t predict the order of the functions statically, then just use a vector. ","user":"U8D9768Q6","ts":"1608824917.462500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VeK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you want to keep track of which file is where at compile time, you’ll need a "},{"type":"text","text":"Tuple","style":{"code":true}},{"type":"text","text":". If your program can’t predict the order of the functions statically, then just use a vector. "}]}]}],"thread_ts":"1608794981.455100","parent_user_id":"U01J9BNFM4G"},{"client_msg_id":"8730e034-9ee0-4f5c-9e83-b2e586fc856d","type":"message","text":"okay, I have to read more about these things. Btw i have no such particular use case. this library should be used to dected file type. It's not possible for me to get intution of efficiency with such a small experiance i have. I am not getting your first point.","user":"U01J9BNFM4G","ts":"1608867570.473000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FEN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"okay, I have to read more about these things. Btw i have no such particular use case. this library should be used to dected file type. It's not possible for me to get intution of efficiency with such a small experiance i have. I am not getting your first point."}]}]}],"thread_ts":"1608794981.455100","parent_user_id":"U01J9BNFM4G"}]