[{"client_msg_id":"b6135be1-8baa-4b8d-958a-a61d4df7ce57","type":"message","text":"like `sols = Vector{Core.Compiler.return_type(_simulate, Tuple{typeof(params)})}()`","user":"U66QZ3QF3","ts":"1613453927.140700","team":"T68168MUP","edited":{"user":"U66QZ3QF3","ts":"1613453944.000000"},"blocks":[{"type":"rich_text","block_id":"ES5Ql","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"like "},{"type":"text","text":"sols = Vector{Core.Compiler.return_type(_simulate, Tuple{typeof(params)})}()","style":{"code":true}}]}]}],"thread_ts":"1613453927.140700","reply_count":17,"reply_users_count":2,"latest_reply":"1613455211.144300","reply_users":["U6Z8377N2","U66QZ3QF3"],"subscribed":false},{"client_msg_id":"4f239ac8-7d66-4c3b-b976-e1151bed3616","type":"message","text":"Weird, i get\n```julia&gt; sols = run_sims(ModelParameters())\nERROR: MethodError: no method matching Array{Any,N} where N()```","user":"U6Z8377N2","ts":"1613454001.141000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zg14","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Weird, i get\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> sols = run_sims(ModelParameters())\nERROR: MethodError: no method matching Array{Any,N} where N()"}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"36f462f3-03d1-4972-adcf-e00012829171","type":"message","text":"with\n```function run_sims(params) \n    nsims = 5\n    #sols = []\n    sols = Array{Core.Compiler.return_type(_simulate, Tuple{typeof(params)})}()\n    for sim in 1:nsims       \n        println(\"sim: $sim\")   \n        sample_params(params)\n        push!(sols, _simulate(params))\n        #println(\"inc:$inc, lat: $lat, asymp: $asy, pre: $pre symp: $sym\")\n    end\n    return sols\nend```","user":"U6Z8377N2","ts":"1613454012.141200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5dlTb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"with\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function run_sims(params) \n    nsims = 5\n    #sols = []\n    sols = Array{Core.Compiler.return_type(_simulate, Tuple{typeof(params)})}()\n    for sim in 1:nsims       \n        println(\"sim: $sim\")   \n        sample_params(params)\n        push!(sols, _simulate(params))\n        #println(\"inc:$inc, lat: $lat, asymp: $asy, pre: $pre symp: $sym\")\n    end\n    return sols\nend"}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"5f3fc8f5-e86b-429c-86ec-c68bb84e8157","type":"message","text":"nvmd, forgot the dimension part of the array","user":"U6Z8377N2","ts":"1613454042.141400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0JTj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"nvmd, forgot the dimension part of the array"}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"09bb9181-08e9-471e-bca9-a2713a5dc2b3","type":"message","text":"Yeah. It's easier to use `Vector` basically always.","user":"U66QZ3QF3","ts":"1613454229.141600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3=zgQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah. It's easier to use "},{"type":"text","text":"Vector","style":{"code":true}},{"type":"text","text":" basically always."}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"89d661ee-969d-48ae-ba83-a53f45716cae","type":"message","text":"It's the type you can `push!` to.","user":"U66QZ3QF3","ts":"1613454239.141800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HEGp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's the type you can "},{"type":"text","text":"push!","style":{"code":true}},{"type":"text","text":" to."}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"456197ad-5e35-4430-a0bf-4536c882c9f9","type":"message","text":"Not sure why but it dosn't really work\n```\njulia&gt; typeof(sols)\nArray{Any,1}```","user":"U6Z8377N2","ts":"1613454239.142000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"S4P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not sure why but it dosn't really work\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\njulia> typeof(sols)\nArray{Any,1}"}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"e580070a-740d-44d5-8006-12e521e9f87e","type":"message","text":"`Vector{T} === Array{T, 1}`","user":"U66QZ3QF3","ts":"1613454259.142200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v/NJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Vector{T} === Array{T, 1}","style":{"code":true}}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"97dfbf4c-6a02-4c71-bc21-50867d6e7acc","type":"message","text":"Oh I see you mean `return_type` gives `Any`?","user":"U66QZ3QF3","ts":"1613454271.142400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tSyG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh I see you mean "},{"type":"text","text":"return_type","style":{"code":true}},{"type":"text","text":" gives "},{"type":"text","text":"Any","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"c49d2a97-cb9b-46c4-9539-ea35929961f1","type":"message","text":"The can definitely happen.","user":"U66QZ3QF3","ts":"1613454280.142600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WauT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The can definitely happen."}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"2e88e454-f5d7-490c-bf97-74f8cea7549f","type":"message","text":"Yes","user":"U6Z8377N2","ts":"1613454306.142800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/E2H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes"}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"7b7e98b6-611e-44f1-b346-f589f858ead5","type":"message","text":"```println(Core.Compiler.return_type(_simulate, Tuple{typeof(params)}))```\nreturns `Any`.  Here is the `_simulate` function,\n```function _simulate(params) \n    # code removed\n    prob = ODEProblem(aModel!, u0, tspan, params)\n    sol = solve(prob, Rodas4(autodiff=false), dt=0.5, adaptive=false, callback=cbset)\n    return sol\nend```\n","user":"U6Z8377N2","ts":"1613454342.143000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/2MNy","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"println(Core.Compiler.return_type(_simulate, Tuple{typeof(params)}))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"returns "},{"type":"text","text":"Any","style":{"code":true}},{"type":"text","text":".  Here is the "},{"type":"text","text":"_simulate","style":{"code":true}},{"type":"text","text":" function,\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function _simulate(params) \n    # code removed\n    prob = ODEProblem(aModel!, u0, tspan, params)\n    sol = solve(prob, Rodas4(autodiff=false), dt=0.5, adaptive=false, callback=cbset)\n    return sol\nend"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"dd2f87d8-1b0a-453a-a558-9af11a1540cd","type":"message","text":"The compiler should realize `sol` is an ODE solution","user":"U6Z8377N2","ts":"1613454363.143200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5c1t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The compiler should realize "},{"type":"text","text":"sol","style":{"code":true}},{"type":"text","text":" is an ODE solution"}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"f67c9506-11db-4d26-a9b0-45517e1a1820","type":"message","text":"Depends how `solve` is written.","user":"U66QZ3QF3","ts":"1613454378.143400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"K7bLd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Depends how "},{"type":"text","text":"solve","style":{"code":true}},{"type":"text","text":" is written."}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"1e8d9168-09cc-4503-8536-73e6b9679300","type":"message","text":"In any case... is the speed of dealing with `sols` going to be a bottleneck for you? Sometimes `Vector{Any}` is a good solution - there's not that much performance penalty for a small number of large objects inside.","user":"U66QZ3QF3","ts":"1613454523.143600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tc1jZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In any case... is the speed of dealing with "},{"type":"text","text":"sols","style":{"code":true}},{"type":"text","text":" going to be a bottleneck for you? Sometimes "},{"type":"text","text":"Vector{Any}","style":{"code":true}},{"type":"text","text":" is a good solution - there's not that much performance penalty for a small number of large objects inside."}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"94e8f775-68ff-42da-931d-ead3bf39c4e6","type":"message","text":"Not really I suppose","user":"U6Z8377N2","ts":"1613455165.143800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"illzN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not really I suppose"}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"74674028-7875-40b1-962a-5cab16291993","type":"message","text":"I did do\n```_tmpsol = _simulate(params)\n    #sols = []\n    #sols = Array{Core.Compiler.return_type(_simulate, Tuple{typeof(params)}), 1}()\n    sols = Array{typeof(_tmpsol), 1}()```","user":"U6Z8377N2","ts":"1613455176.144000","team":"T68168MUP","edited":{"user":"U6Z8377N2","ts":"1613455180.000000"},"blocks":[{"type":"rich_text","block_id":"MnF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I did do\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"_tmpsol = _simulate(params)\n    #sols = []\n    #sols = Array{Core.Compiler.return_type(_simulate, Tuple{typeof(params)}), 1}()\n    sols = Array{typeof(_tmpsol), 1}()"}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"},{"client_msg_id":"d383a4f8-5035-4865-9fe3-f700b1b7c4ca","type":"message","text":"which works, so things are okay. I wonder if `map` will also retain the type information.","user":"U6Z8377N2","ts":"1613455211.144300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yh0jo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which works, so things are okay. I wonder if "},{"type":"text","text":"map","style":{"code":true}},{"type":"text","text":" will also retain the type information."}]}]}],"thread_ts":"1613453927.140700","parent_user_id":"U66QZ3QF3"}]