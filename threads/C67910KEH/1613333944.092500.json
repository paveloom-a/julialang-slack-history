[{"client_msg_id":"22a8ad87-c268-42e3-a0d6-4bc5763af36b","type":"message","text":"hello all, I believe there is a bug in 1.6 where `bytesavailable` always returns 0.  Has anyone run into this?  several of us started discussing it on zulip\n```julia&gt; open(io -&gt; write(io, \"what up\"), \"testfile.txt\", \"w+\")\n7\n\njulia&gt; f = open(\"testfile.txt\")\nIOStream(&lt;file testfile.txt&gt;)\n\njulia&gt; bytesavailable(f)\n0\n\njulia&gt; readavailable(f)\n7-element Vector{UInt8}:\n 0x77\n 0x68\n 0x61\n 0x74\n 0x20\n 0x75\n 0x70```","user":"U9VG1AYSG","ts":"1613333944.092500","team":"T68168MUP","edited":{"user":"U9VG1AYSG","ts":"1613334432.000000"},"blocks":[{"type":"rich_text","block_id":"UgIwt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hello all, I believe there is a bug in 1.6 where "},{"type":"text","text":"bytesavailable","style":{"code":true}},{"type":"text","text":" always returns 0.  Has anyone run into this?  several of us started discussing it on zulip\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> open(io -> write(io, \"what up\"), \"testfile.txt\", \"w+\")\n7\n\njulia> f = open(\"testfile.txt\")\nIOStream(<file testfile.txt>)\n\njulia> bytesavailable(f)\n0\n\njulia> readavailable(f)\n7-element Vector{UInt8}:\n 0x77\n 0x68\n 0x61\n 0x74\n 0x20\n 0x75\n 0x70"}]}]}],"thread_ts":"1613333944.092500","reply_count":41,"reply_users_count":4,"latest_reply":"1613336085.107200","reply_users":["U01FKQQ7J0J","U01HD5VFXJM","U9VG1AYSG","UH24GRBLL"],"subscribed":false},{"client_msg_id":"35bb92d6-bc4f-44b2-b39d-3c5cb58416f7","type":"message","text":"I think this is because `bytesavailable` and `readavailable` have different interpretations of \"available\".  `bytesavailable` returns the number of bytes available without blocking (e.g. already buffered in memory) whereas `readavailable` will read all bytes on a stream, blocking if necessary.","user":"U01FKQQ7J0J","ts":"1613334969.095000","team":"T68168MUP","edited":{"user":"U01FKQQ7J0J","ts":"1613335104.000000"},"blocks":[{"type":"rich_text","block_id":"MIKl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think this is because "},{"type":"text","text":"bytesavailable","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"readavailable","style":{"code":true}},{"type":"text","text":" have different interpretations of \"available\".  "},{"type":"text","text":"bytesavailable","style":{"code":true}},{"type":"text","text":" returns the number of bytes available without blocking (e.g. already buffered in memory) whereas "},{"type":"text","text":"readavailable","style":{"code":true}},{"type":"text","text":" will read all bytes on a stream, blocking if necessary."}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"e1fa3b84-f755-40fc-97b2-ba2a5b4b9958","type":"message","text":"fwiw the example behaves the same in 1.5.3","user":"U01HD5VFXJM","ts":"1613335052.096600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Kf3rN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"fwiw the example behaves the same in 1.5.3"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"56fbd84c-5c57-475e-8090-e6dadb1cb990","type":"message","text":"I'm very confused by that, can you give me an example where `readavailable` blocks? I thought it could not block","user":"U9VG1AYSG","ts":"1613335094.097400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2u1H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm very confused by that, can you give me an example where "},{"type":"text","text":"readavailable","style":{"code":true}},{"type":"text","text":" blocks? I thought it could not block"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"0201b4c1-8f85-4979-82d8-1b449f337e88","type":"message","text":"I don't think I've ever seen it block","user":"U9VG1AYSG","ts":"1613335100.097600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wCw/C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think I've ever seen it block"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"bfc3baa9-7884-45c0-80fe-8aee06f73184","type":"message","text":"In these days of fast solid state storage you might not notice :sweat_smile:","user":"U01FKQQ7J0J","ts":"1613335192.098100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kmL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In these days of fast solid state storage you might not notice "},{"type":"emoji","name":"sweat_smile"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"76dc38a4-60ea-4609-851e-c22aea799342","type":"message","text":"How about on a socket?","user":"U01FKQQ7J0J","ts":"1613335204.098300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TMF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How about on a socket?"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"d89ad6f9-0cdb-421d-98e2-645cf1cff328","type":"message","text":"network streams with slow connections also go through `readavailable`, which may block","user":"UH24GRBLL","ts":"1613335218.098500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NKsD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"network streams with slow connections also go through "},{"type":"text","text":"readavailable","style":{"code":true}},{"type":"text","text":", which may block"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"161132ec-2c18-4905-aa9d-e04c62b8e38e","type":"message","text":"I don't ever remember seeing it block on a TCP socket","user":"U9VG1AYSG","ts":"1613335226.098700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PoPw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't ever remember seeing it block on a TCP socket"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"5c97a361-7501-4cb2-9a1b-9d0d112274ce","type":"message","text":"yes, that's very much possible","user":"UH24GRBLL","ts":"1613335239.098900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"csl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, that's very much possible"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"129453f3-b922-4c6d-b29d-9103a53e5af3","type":"message","text":"so it sounds like what you are saying is that something can block it, but whatevers blocking it is just way faster than e.g. waiting for a server to put more in the stream?","user":"U9VG1AYSG","ts":"1613335273.099100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ORCu1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so it sounds like what you are saying is that something can block it, but whatevers blocking it is just way faster than e.g. waiting for a server to put more in the stream?"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"fe85c4c0-7d72-48ab-ab85-7303c1a1bd69","type":"message","text":"in your specific case, your internet is fast enough apparently","user":"UH24GRBLL","ts":"1613335294.099300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AO92k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in your specific case, your internet is fast enough apparently"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"0f794c36-6e9c-4db3-b470-d67d5275fd2d","type":"message","text":"what I'm saying is that it can block if it's waiting on some TCP packet that received out of order","user":"UH24GRBLL","ts":"1613335313.099500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bTn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what I'm saying is that it can block if it's waiting on some TCP packet that received out of order"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"a290b31b-fe6f-405f-9700-e2e80342b667","type":"message","text":"well usually if I'm messing around with this kind of stuff it's all on localhost anyway, so yeah, I guess not a real test","user":"U9VG1AYSG","ts":"1613335319.099700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"olU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well usually if I'm messing around with this kind of stuff it's all on localhost anyway, so yeah, I guess not a real test"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"a1a0a50d-5ef2-4b7c-a039-7c1de7ba602b","type":"message","text":"right","user":"UH24GRBLL","ts":"1613335325.100100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kUd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"right"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"8e344018-1f65-47fc-9cf7-69c503c607bd","type":"message","text":"oh... yeah that kind of makes sense","user":"U9VG1AYSG","ts":"1613335330.100400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TSPlE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh... yeah that kind of makes sense"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"8c498248-e5e5-47ac-b331-d147753563db","type":"message","text":"localhost is fasttracked through the kernel, it's not even hitting networking hardware","user":"UH24GRBLL","ts":"1613335339.100700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"C9P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"localhost is fasttracked through the kernel, it's not even hitting networking hardware"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"320ab590-c45e-43de-a70d-57fe707887f7","type":"message","text":"so basically you are saying that any time you are reading, you have to plan on it blocking? there's not really a way around that","user":"U9VG1AYSG","ts":"1613335377.101600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5vOgD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so basically you are saying that any time you are reading, you have to plan on it blocking? there's not really a way around that"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"ed073cab-7c3f-4f07-a0d8-33eae95e235c","type":"message","text":"yep, exactly","user":"UH24GRBLL","ts":"1613335386.101800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FFyu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yep, exactly"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"645042f1-781c-4d00-81b4-7a65ad5d68fa","type":"message","text":"even local harddrive reads can fail/block if the memory controller in the harddrive is busy/broken","user":"UH24GRBLL","ts":"1613335403.102000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l4Qvd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"even local harddrive reads can fail/block if the memory controller in the harddrive is busy/broken"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"0a7a354e-8bfa-40a1-9b3a-3fa237cf3725","type":"message","text":"or if the path you're reading is a network drive - poof, you're hitting network IO","user":"UH24GRBLL","ts":"1613335417.102300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HiL4y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"or if the path you're reading is a network drive - poof, you're hitting network IO"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"5751700b-f359-445b-a6fb-91e027ca7a65","type":"message","text":"well, does it still make sense to use `readavailable` if I don't want to wait for the server to put more bytes in the stream? because that's usually the context in which I use it","user":"U9VG1AYSG","ts":"1613335423.102500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jafF9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, does it still make sense to use "},{"type":"text","text":"readavailable","style":{"code":true}},{"type":"text","text":" if I don't want to wait for the server to put more bytes in the stream? because that's usually the context in which I use it"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"447fd71a-1617-4310-94dd-9de7cfde3175","type":"message","text":"I/O is fraught with potential blocking","user":"U01FKQQ7J0J","ts":"1613335436.102700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+jPx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I/O is fraught with potential blocking"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"11118a37-eff7-484f-b77d-fabe2d37d430","type":"message","text":"I guess it's ok if it blocks because of TCP IO, but I don't want it to block just because there are only N bytes in the stream and I don't know what N is","user":"U9VG1AYSG","ts":"1613335447.102900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hP/A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess it's ok if it blocks because of TCP IO, but I don't want it to block just because there are only N bytes in the stream and I don't know what N is"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"e98dd490-b94a-410f-94f4-e51827b14510","type":"message","text":"that's why the warning in the doc says to use `read`","user":"UH24GRBLL","ts":"1613335501.103100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L4me","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's why the warning in the doc says to use "},{"type":"text","text":"read","style":{"code":true}}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"5cce1c9d-977a-416f-bbc2-f48ea556b252","type":"message","text":"Depends on the situation.  I don't think one would use `readavailable` to implement an remote terminal app :sweat_smile:","user":"U01FKQQ7J0J","ts":"1613335515.103300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ABZTm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Depends on the situation.  I don't think one would use "},{"type":"text","text":"readavailable","style":{"code":true}},{"type":"text","text":" to implement an remote terminal app "},{"type":"emoji","name":"sweat_smile"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"f5961e20-337d-4f70-82df-52fcab199b1a","type":"message","text":"```read(s::IO, nb=typemax(Int))\n\nRead at most nb bytes from s, returning a Vector{UInt8} of the bytes read.```\nis probably best for your usecase","user":"UH24GRBLL","ts":"1613335518.103500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KAY","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"read(s::IO, nb=typemax(Int))\n\nRead at most nb bytes from s, returning a Vector{UInt8} of the bytes read."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nis probably best for your usecase"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"e877fc45-cc2a-46b1-b0cb-f9228c004ff5","type":"message","text":"I guess the truly correct thing to do is that you really just have to go by protocol, and not this kind of stuff","user":"U9VG1AYSG","ts":"1613335519.103700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7vB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess the truly correct thing to do is that you really just have to go by protocol, and not this kind of stuff"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"f993fd36-a831-4fcf-ac78-ee3a035595b9","type":"message","text":"yeah, ok, makes sense","user":"U9VG1AYSG","ts":"1613335535.103900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"krZoJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, ok, makes sense"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"460aadba-f2e0-4404-aa3d-0ee3719f46da","type":"message","text":"that depends on which protocol you're talking about","user":"UH24GRBLL","ts":"1613335537.104100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5xNR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that depends on which protocol you're talking about"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"9815f7f8-8cfe-4162-b381-5190308743d6","type":"message","text":"`read` and `readavailable` are very low level primitives - parsing and protocls are usually built on top of them, using the sent data","user":"UH24GRBLL","ts":"1613335561.104300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bmqh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"read","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"readavailable","style":{"code":true}},{"type":"text","text":" are very low level primitives - parsing and protocls are usually built on top of them, using the sent data"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"256a231e-3515-4def-b5ee-6438e8a0eeae","type":"message","text":"making sure that whatever you've read is valid for your usecase isn't something `read` can do (well, except if you do `read(io::IO, T)`, but even that needs validation on your end)","user":"UH24GRBLL","ts":"1613335615.104500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L8Kq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"making sure that whatever you've read is valid for your usecase isn't something "},{"type":"text","text":"read","style":{"code":true}},{"type":"text","text":" can do (well, except if you do "},{"type":"text","text":"read(io::IO, T)","style":{"code":true}},{"type":"text","text":", but even that needs validation on your end)"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"4afcbed6-eb67-438d-8bbc-bfb2bd36454f","type":"message","text":"yeah, makes sense","user":"U9VG1AYSG","ts":"1613335638.104900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nDIcz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, makes sense"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"b5c116cf-461d-4816-9756-ffc5eff36d13","type":"message","text":"I think calling `readavailable` on a TCP socket would only return once the remote side closed the connection.  That could be a long time!","user":"U01FKQQ7J0J","ts":"1613335644.105200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zi=F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think calling "},{"type":"text","text":"readavailable","style":{"code":true}},{"type":"text","text":" on a TCP socket would only return once the remote side closed the connection.  That could be a long time!"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"e8b031f9-2d0b-49a9-a9f6-45fd772fe74f","type":"message","text":"I don't think that's the case, I think it only waits on TCP packets","user":"U9VG1AYSG","ts":"1613335667.105400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"o=u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think that's the case, I think it only waits on TCP packets"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"7878e85c-99e5-4a7b-8a6b-4525fa8639da","type":"message","text":"I don't think it waits until the stream is closed, I think it'll just take whatever is in the kernel buffer and block if the kernel buffer is empty","user":"UH24GRBLL","ts":"1613335701.106000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9ji","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think it waits until the stream is closed, I think it'll just take whatever is in the kernel buffer and block if the kernel buffer is empty"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"4997a5af-24d9-4df8-b522-a3f0125d23d9","type":"message","text":"Oh, I guess it t blocks until some bytes are available.  It's not \"read_fully\"","user":"U01FKQQ7J0J","ts":"1613335709.106200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eiU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, I guess it t blocks until some bytes are available.  It's not \"read_fully\""}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"9067fc04-0384-4e22-b01b-212b35d1b572","type":"message","text":"yep","user":"UH24GRBLL","ts":"1613335714.106400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2/Bs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yep"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"4b2d338d-c934-48b8-a321-5352689300fd","type":"message","text":"ah, ok, I'm glad I understand this stuff so much better now","user":"U9VG1AYSG","ts":"1613336021.106600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"un=NM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, ok, I'm glad I understand this stuff so much better now"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"2bec16a8-1c86-4229-9402-75437babb9df","type":"message","text":"though I still find the discrepancy between `readavailable` and `bytesavailable` quite confusing","user":"U9VG1AYSG","ts":"1613336036.106800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xq0F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"though I still find the discrepancy between "},{"type":"text","text":"readavailable","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"bytesavailable","style":{"code":true}},{"type":"text","text":" quite confusing"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"912047d4-d852-45ef-8cca-cfac4ffa7501","type":"message","text":"Just to round out the discussion, calling `read(f, 1)` on newly opened file `f` will return 1 byte and (typically) lead to additional bytes being buffered so then `bytesavailable` will return non-zero.","user":"U01FKQQ7J0J","ts":"1613336063.107000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q7G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Just to round out the discussion, calling "},{"type":"text","text":"read(f, 1)","style":{"code":true}},{"type":"text","text":" on newly opened file "},{"type":"text","text":"f","style":{"code":true}},{"type":"text","text":" will return 1 byte and (typically) lead to additional bytes being buffered so then "},{"type":"text","text":"bytesavailable","style":{"code":true}},{"type":"text","text":" will return non-zero."}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"d4775be8-278a-4bfd-b67c-849199769781","type":"message","text":"makes sense","user":"U9VG1AYSG","ts":"1613336085.107200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zHud","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"makes sense"}]}]}],"thread_ts":"1613333944.092500","parent_user_id":"U9VG1AYSG"}]