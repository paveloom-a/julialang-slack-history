[{"client_msg_id":"3a08f9c0-a4e3-4257-8e06-92269465f4fe","type":"message","text":"Does anyone know why this is allocating?\n```function K(X, σ_squ, res=nothing)\n    (d, n) = size(X)\n    \n    if isnothing(res)\n        res = uninitialized(n, n)\n    end\n\n    res .= exp.(-pairwise(SqEuclidean(), X, X, dims=2)/(2*σ_squ))\nend```\nRunning\n```n = 100\nd = 50\n\nxs = rand(Float, d, n)\nres = uninitialized(n, n)\n@btime K(xs, 2, res)```\ngives me `134.033 μs (8 allocations: 118.39 KiB)`\nThe following is also allocating:\n```function test(a, b, c)\n    c .= a * b\nend\n\n@btime test(a,b,c)  #  2.469 ms (2 allocations: 1.91 MiB)```\n","user":"U7PD3M3L5","ts":"1613032683.388900","team":"T68168MUP","edited":{"user":"U7PD3M3L5","ts":"1613033538.000000"},"blocks":[{"type":"rich_text","block_id":"BYB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does anyone know why this is allocating?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function K(X, σ_squ, res=nothing)\n    (d, n) = size(X)\n    \n    if isnothing(res)\n        res = uninitialized(n, n)\n    end\n\n    res .= exp.(-pairwise(SqEuclidean(), X, X, dims=2)/(2*σ_squ))\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Running\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"n = 100\nd = 50\n\nxs = rand(Float, d, n)\nres = uninitialized(n, n)\n@btime K(xs, 2, res)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"gives me "},{"type":"text","text":"134.033 μs (8 allocations: 118.39 KiB)","style":{"code":true}},{"type":"text","text":"\nThe following is also allocating:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function test(a, b, c)\n    c .= a * b\nend\n\n@btime test(a,b,c)  #  2.469 ms (2 allocations: 1.91 MiB)"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1613032683.388900","reply_count":39,"reply_users_count":4,"latest_reply":"1613038295.398400","reply_users":["U7HAYKY9X","UH24GRBLL","U7PD3M3L5","U67431ELR"],"subscribed":false},{"client_msg_id":"00db7421-1d10-4887-8de1-a23f2f617734","type":"message","text":"In your test, what is a and b?","user":"U7HAYKY9X","ts":"1613034366.389100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1bR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In your test, what is a and b?"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"345b882c-d5cf-4f7d-adf2-247cade06259","type":"message","text":"if `a` and `b` are matrices, it allocates the result before copying it to `c`. you probably want three argument `mul!` instead","user":"UH24GRBLL","ts":"1613034662.389700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"loS1l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if "},{"type":"text","text":"a","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"b","style":{"code":true}},{"type":"text","text":" are matrices, it allocates the result before copying it to "},{"type":"text","text":"c","style":{"code":true}},{"type":"text","text":". you probably want three argument "},{"type":"text","text":"mul!","style":{"code":true}},{"type":"text","text":" instead"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"f08db4de-af6c-410d-9d88-e08f7aeb5360","type":"message","text":"you probably want to interpolate `xs` and `res` into the measurement like `@btime K($xs, 2, $res)`","user":"UH24GRBLL","ts":"1613034778.389900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HVfS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you probably want to interpolate "},{"type":"text","text":"xs","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"res","style":{"code":true}},{"type":"text","text":" into the measurement like "},{"type":"text","text":"@btime K($xs, 2, $res)","style":{"code":true}}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"e2c19997-bedc-41b3-bf97-4e276ecd94fa","type":"message","text":"where does `pairwise` and `uninitialized` come from?","user":"UH24GRBLL","ts":"1613034839.390100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hIdv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"where does "},{"type":"text","text":"pairwise","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"uninitialized","style":{"code":true}},{"type":"text","text":" come from?"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"9e660cf3-5c73-46eb-80e4-b81730d6944d","type":"message","text":"`a`  and `b`  are both given by `rand(500, 500)`","user":"U7PD3M3L5","ts":"1613035105.390300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"arzPc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"a","style":{"code":true}},{"type":"text","text":"  and "},{"type":"text","text":"b","style":{"code":true}},{"type":"text","text":"  are both given by "},{"type":"text","text":"rand(500, 500)","style":{"code":true}}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"1ab3d650-7903-4e71-bcfd-1f8cc7f38761","type":"message","text":"pairwise is from `Distances.jl` , unitialized is my own shorthand for allocating an undef array","user":"U7PD3M3L5","ts":"1613035143.390500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6i2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"pairwise is from "},{"type":"text","text":"Distances.jl","style":{"code":true}},{"type":"text","text":" , unitialized is my own shorthand for allocating an undef array"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"ef983967-af56-4126-a281-44d56a3ebb63","type":"message","text":"its basically Array(undef, n, n)","user":"U7PD3M3L5","ts":"1613035160.390700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jEIVr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"its basically Array(undef, n, n)"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"1047a668-347f-43e5-9612-06af53bd82db","type":"message","text":"what's the exact definition of `uninitialized`?","user":"UH24GRBLL","ts":"1613035469.390900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kl2x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what's the exact definition of "},{"type":"text","text":"uninitialized","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"108f5d06-897a-415e-abd8-a6d98b9bc61b","type":"message","text":"it may be type unstable","user":"UH24GRBLL","ts":"1613035476.391100","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1613035481.000000"},"blocks":[{"type":"rich_text","block_id":"nbx8o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it may be type unstable"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"d81c3f64-1119-4e58-89d9-5c3b3717e3cf","type":"message","text":"what does `@code_warntype` say? Anything red?","user":"UH24GRBLL","ts":"1613035493.391400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dNl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what does "},{"type":"text","text":"@code_warntype","style":{"code":true}},{"type":"text","text":" say? Anything red?"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"f189e36e-2dfe-4516-a52f-0de0552cf466","type":"message","text":"uninitialized is not executed in the code I have sent you, I am supplying `res`","user":"U7PD3M3L5","ts":"1613035913.391600","team":"T68168MUP","edited":{"user":"U7PD3M3L5","ts":"1613035927.000000"},"blocks":[{"type":"rich_text","block_id":"d2x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"uninitialized is not executed in the code I have sent you, I am supplying "},{"type":"text","text":"res","style":{"code":true}}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"419e01f6-4ec9-474c-9cc2-85facb38d93f","type":"message","text":"what is the type of `res`?","user":"UH24GRBLL","ts":"1613036039.391900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+obcI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what is the type of "},{"type":"text","text":"res","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"caf65f9a-58a7-49c3-b9ad-ffc171237bfb","type":"message","text":"I can't run the code without recreating the state you have, so I have to ask these probing questions, sorry","user":"UH24GRBLL","ts":"1613036106.392100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ziAa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can't run the code without recreating the state you have, so I have to ask these probing questions, sorry"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"ad18cffc-13ea-455f-9643-4fcb887e0b9f","type":"message","text":"at the moment, I can't run `uninitialized` and thus can't recreate `res`","user":"UH24GRBLL","ts":"1613036124.392300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cgf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"at the moment, I can't run "},{"type":"text","text":"uninitialized","style":{"code":true}},{"type":"text","text":" and thus can't recreate "},{"type":"text","text":"res","style":{"code":true}}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"e52296ec-8144-4944-8c1d-bbbdd8b1fc90","type":"message","text":"in the `test` example, what is `c`?","user":"UH24GRBLL","ts":"1613036150.392500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"THx0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in the "},{"type":"text","text":"test","style":{"code":true}},{"type":"text","text":" example, what is "},{"type":"text","text":"c","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"ed899f5e-0526-405b-b26c-318e9eb8c9ab","type":"message","text":"ah ok, thanks for making such an effort. Wait a sec, I'll make a new testcase without uninitialized","user":"U7PD3M3L5","ts":"1613036219.392700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1hv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah ok, thanks for making such an effort. Wait a sec, I'll make a new testcase without uninitialized"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"b713b786-f862-415d-ad1b-fd69e0930832","type":"message","text":"I'll first have to apply your tips from above","user":"U7PD3M3L5","ts":"1613036282.392900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Lr+W","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'll first have to apply your tips from above"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5","reactions":[{"name":"+1","users":["UH24GRBLL"],"count":1}]},{"client_msg_id":"19290848-1323-48c7-a4be-555b84a86931","type":"message","text":"julia makes it easy to create temporary environments that don't interfere with other projects on the same machine, so if the example is self contained it's often very easy to give concrete help :)","user":"UH24GRBLL","ts":"1613036475.393200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2BBDm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"julia makes it easy to create temporary environments that don't interfere with other projects on the same machine, so if the example is self contained it's often very easy to give concrete help :)"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"361c6353-50bd-4560-b7bf-5f90e4598c32","type":"message","text":"that and experience about what allocates","user":"UH24GRBLL","ts":"1613036486.393400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ll=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that and experience about what allocates"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"75fb1240-03aa-441e-8d9b-30b523701760","type":"message","text":"This:\n```using Distances\nusing BenchmarkTools\n\nfunction K(X, σ_squ, res=nothing)\n    (d, n) = size(X)\n    if isnothing(res)\n        res = similar(X, n, n)\n    end\n    res .= exp.(-pairwise(SqEuclidean(), X, X, dims=2)/(2*σ_squ))\nend\n\nn = 100\nd = 50\nxs = rand(Float32, d, n)\nres = Array{Float32}(undef, n, n)\n@btime K($xs, 2, $res)```\nallocates 120kb: `124.474 μs (8 allocations: 118.39 KiB)`","user":"U7PD3M3L5","ts":"1613036490.393600","team":"T68168MUP","edited":{"user":"U7PD3M3L5","ts":"1613036521.000000"},"blocks":[{"type":"rich_text","block_id":"PfhNi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Distances\nusing BenchmarkTools\n\nfunction K(X, σ_squ, res=nothing)\n    (d, n) = size(X)\n    if isnothing(res)\n        res = similar(X, n, n)\n    end\n    res .= exp.(-pairwise(SqEuclidean(), X, X, dims=2)/(2*σ_squ))\nend\n\nn = 100\nd = 50\nxs = rand(Float32, d, n)\nres = Array{Float32}(undef, n, n)\n@btime K($xs, 2, $res)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"allocates 120kb: "},{"type":"text","text":"124.474 μs (8 allocations: 118.39 KiB)","style":{"code":true}}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"86335bd7-ed85-491e-83f8-6e54797454a3","type":"message","text":"the multiplication works without allocation when using `mul!`  as you suggested, thanks","user":"U7PD3M3L5","ts":"1613036629.394700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WQJN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the multiplication works without allocation when using "},{"type":"text","text":"mul!","style":{"code":true}},{"type":"text","text":"  as you suggested, thanks"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"2edea9c8-d07e-41f1-a6da-45a9253a5774","type":"message","text":"`Array{Float32}`  is an abstract type - it's missing the dimensionality. You either want `Matrix{Float32}` (since you're using 2 dimensions) or `Array{Float32,2}`","user":"UH24GRBLL","ts":"1613036720.394900","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1613036738.000000"},"blocks":[{"type":"rich_text","block_id":"cRmUk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Array{Float32}","style":{"code":true}},{"type":"text","text":"  is an abstract type - it's missing the dimensionality. You either want "},{"type":"text","text":"Matrix{Float32}","style":{"code":true}},{"type":"text","text":" (since you're using 2 dimensions) or "},{"type":"text","text":"Array{Float32,2}","style":{"code":true}}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"ad50ed06-b554-4d0b-88ea-18566139e03f","type":"message","text":"both forms are equivalent, `Matrix{T}` is an alias for `Array{T,2}`","user":"UH24GRBLL","ts":"1613036765.395200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MszpA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"both forms are equivalent, "},{"type":"text","text":"Matrix{T}","style":{"code":true}},{"type":"text","text":" is an alias for "},{"type":"text","text":"Array{T,2}","style":{"code":true}}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"765550d0-3d47-445d-9b58-5c6eb9c94212","type":"message","text":"is that not inferred when I pass in the `n, n` ?","user":"U7PD3M3L5","ts":"1613036770.395400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aw4U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is that not inferred when I pass in the "},{"type":"text","text":"n, n","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"4475c004-0f6f-4863-98a7-10c498387965","type":"message","text":"it is inferred, I just checked","user":"U7PD3M3L5","ts":"1613036800.395600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fd1k+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is inferred, I just checked"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"71ca510b-e924-497f-b34a-74db969f3234","type":"message","text":"yes, but it's better to be explicit here to avoid making the mistake of thinking it is always inferred","user":"UH24GRBLL","ts":"1613036827.395800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BKk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, but it's better to be explicit here to avoid making the mistake of thinking it is always inferred"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"f75be926-bbdb-4cc6-baa2-bbd99068c0c2","type":"message","text":"inferrence is allowed to give up","user":"UH24GRBLL","ts":"1613036836.396000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PGq=E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"inferrence is allowed to give up"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"c35e3472-6549-4dc1-b644-eec607a14f1a","type":"message","text":"the remaining allocations probably stem from `pairwise` allocating and possibly the result of the division allocating as well","user":"UH24GRBLL","ts":"1613036865.396200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eft","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the remaining allocations probably stem from "},{"type":"text","text":"pairwise","style":{"code":true}},{"type":"text","text":" allocating and possibly the result of the division allocating as well"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"6fb0bbec-2d2c-4a8d-801a-d90e0da5ca88","type":"message","text":"`res .= exp.(-pairwise(SqEuclidean(), X, X, dims=2) ./ (2 .* σ_squ))` probably has fewer allocations","user":"UH24GRBLL","ts":"1613036899.396400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l6P/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"res .= exp.(-pairwise(SqEuclidean(), X, X, dims=2) ./ (2 .* σ_squ))","style":{"code":true}},{"type":"text","text":" probably has fewer allocations"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"4fba72db-be8a-46c7-9bf6-b8336697a4dd","type":"message","text":"thanks, I'll check in a sec","user":"U7PD3M3L5","ts":"1613037387.396600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dVC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks, I'll check in a sec"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"19c7a73f-9114-462a-9b8b-ab5df7acfe6f","type":"message","text":"you can also save yourself the `isnothing` check if you do `res=similar(X, n, n)` in the function head","user":"UH24GRBLL","ts":"1613037448.396800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DQ53l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you can also save yourself the "},{"type":"text","text":"isnothing","style":{"code":true}},{"type":"text","text":" check if you do "},{"type":"text","text":"res=similar(X, n, n)","style":{"code":true}},{"type":"text","text":" in the function head"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"e32da7fc-8fdc-4830-8097-f7ebd26e3c99","type":"message","text":"I'd also suggest using `pairwise!(R, dist, X, Y, dims=i)` instead of `pairwise`","user":"UH24GRBLL","ts":"1613037600.397000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ao6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd also suggest using "},{"type":"text","text":"pairwise!(R, dist, X, Y, dims=i)","style":{"code":true}},{"type":"text","text":" instead of "},{"type":"text","text":"pairwise","style":{"code":true}}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"a28c92fc-7e53-43c9-9907-1b05cdc073ea","type":"message","text":"Also use `.-` and `./`.","user":"U67431ELR","ts":"1613037853.397200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hGKZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also use "},{"type":"text","text":".-","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"./","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"b14c7b8a-8a7b-41c4-8e6c-03de3c6563de","type":"message","text":"`.-A` only works on 1.6, IIRC","user":"UH24GRBLL","ts":"1613037913.397400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7y/r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":".-A","style":{"code":true}},{"type":"text","text":" only works on 1.6, IIRC"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"7b452ef5-1a1f-4a7a-9ece-8bb0bcb76a40","type":"message","text":"`res .= exp.(-pairwise!(res, SqEuclidean(), X, X, dims=2) ./ (2 .* σ_squ))` should bring it down to 1 allocation","user":"UH24GRBLL","ts":"1613037996.397600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E0SZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"res .= exp.(-pairwise!(res, SqEuclidean(), X, X, dims=2) ./ (2 .* σ_squ))","style":{"code":true}},{"type":"text","text":" should bring it down to 1 allocation"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"9339685f-6d88-4f84-b9a8-0505ba3d55fb","type":"message","text":"You mean ``res .= exp.(.-pairwise!(res, SqEuclidean(), X, X, dims=2) ./ (2 .* σ_squ))` ?","user":"U67431ELR","ts":"1613038044.397800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eCR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You mean `"},{"type":"text","text":"res .= exp.(.-pairwise!(res, SqEuclidean(), X, X, dims=2) ./ (2 .* σ_squ))","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"7340223e-f758-48a9-abb2-f0115b60d894","type":"message","text":"yes, but that version with `.-` iirc only works on 1.6, not 1.5","user":"UH24GRBLL","ts":"1613038154.398000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LyiaP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, but that version with "},{"type":"text","text":".-","style":{"code":true}},{"type":"text","text":" iirc only works on 1.6, not 1.5"}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"86860fce-e247-46cc-8c9f-1785d2e21671","type":"message","text":"That syntax works even on 1.0.","user":"U67431ELR","ts":"1613038207.398200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uBuN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That syntax works even on 1.0."}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"48380dd2-4fd5-48c3-ad85-ded92ff51657","type":"message","text":"you're right - I was thinking of `.!`","user":"UH24GRBLL","ts":"1613038295.398400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FXUVT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you're right - I was thinking of "},{"type":"text","text":".!","style":{"code":true}}]}]}],"thread_ts":"1613032683.388900","parent_user_id":"U7PD3M3L5"}]