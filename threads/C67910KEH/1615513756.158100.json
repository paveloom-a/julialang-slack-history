[{"client_msg_id":"ca779924-0463-4add-80de-ac401040db0f","type":"message","text":"I'm working on an interface of `qr_mumps` , a software for sparse QR factorizations and I have questions for expert in C interface.\n I have two mutable structures <https://github.com/JuliaSmoothOptimizers/qr_mumps.jl/blob/master/src/wrapper/qr_mumps_common.jl#L9-L23> and <https://github.com/JuliaSmoothOptimizers/qr_mumps.jl/blob/master/src/wrapper/qr_mumps_common.jl#L38-L49> .\n\n1 - Should I use `Ref{...}` or `Ptr{...}` when I use them (`qrm_spmat` / `qrm_spfct`) in `ccall` ?\n2 - Should I use `Ref{...}` or `Ptr{...}` when I use vectors in `ccall` ?\n\nIf I understand well the documentation, everytime that we want the memory to be managed by either Julia or C, we should use a `Ref{...}` (<https://docs.julialang.org/en/v1/manual/calling-c-and-fortran-code/#When-to-use-T,-Ptr{T}-and-Ref{T}>).\nFor example, with this part of code I use both : <https://github.com/JuliaSmoothOptimizers/qr_mumps.jl/blob/master/src/wrapper/qr_mumps_api.jl#L417-L422> , am I doing something wrong ?\n\nThe last question is :\n3 - how I protect `irn`, `jcn` and `val` (<https://github.com/JuliaSmoothOptimizers/qr_mumps.jl/blob/master/src/wrapper/qr_mumps_api.jl#L24-L26>) from the GC ?","user":"UGG8Z375L","ts":"1615513756.158100","team":"T68168MUP","edited":{"user":"UGG8Z375L","ts":"1615516136.000000"},"blocks":[{"type":"rich_text","block_id":"b1vU0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm working on an interface of "},{"type":"text","text":"qr_mumps","style":{"code":true}},{"type":"text","text":" , a software for sparse QR factorizations and I have questions for expert in C interface.\n I have two mutable structures "},{"type":"link","url":"https://github.com/JuliaSmoothOptimizers/qr_mumps.jl/blob/master/src/wrapper/qr_mumps_common.jl#L9-L23"},{"type":"text","text":" and "},{"type":"link","url":"https://github.com/JuliaSmoothOptimizers/qr_mumps.jl/blob/master/src/wrapper/qr_mumps_common.jl#L38-L49"},{"type":"text","text":" .\n\n1 - Should I use "},{"type":"text","text":"Ref{...}","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"Ptr{...}","style":{"code":true}},{"type":"text","text":" when I use them ("},{"type":"text","text":"qrm_spmat","style":{"code":true}},{"type":"text","text":" / "},{"type":"text","text":"qrm_spfct","style":{"code":true}},{"type":"text","text":") in "},{"type":"text","text":"ccall","style":{"code":true}},{"type":"text","text":" ?\n2 - Should I use "},{"type":"text","text":"Ref{...}","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"Ptr{...}","style":{"code":true}},{"type":"text","text":" when I use vectors in "},{"type":"text","text":"ccall","style":{"code":true}},{"type":"text","text":" ?\n\nIf I understand well the documentation, everytime that we want the memory to be managed by either Julia or C, we should use a "},{"type":"text","text":"Ref{...}","style":{"code":true}},{"type":"text","text":" ("},{"type":"link","url":"https://docs.julialang.org/en/v1/manual/calling-c-and-fortran-code/#When-to-use-T,-Ptr{T}-and-Ref{T}"},{"type":"text","text":").\nFor example, with this part of code I use both : "},{"type":"link","url":"https://github.com/JuliaSmoothOptimizers/qr_mumps.jl/blob/master/src/wrapper/qr_mumps_api.jl#L417-L422"},{"type":"text","text":" , am I doing something wrong ?\n\nThe last question is :\n3 - how I protect "},{"type":"text","text":"irn","style":{"code":true}},{"type":"text","text":", "},{"type":"text","text":"jcn","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"val","style":{"code":true}},{"type":"text","text":" ("},{"type":"link","url":"https://github.com/JuliaSmoothOptimizers/qr_mumps.jl/blob/master/src/wrapper/qr_mumps_api.jl#L24-L26"},{"type":"text","text":") from the GC ?"}]}]}],"thread_ts":"1615513756.158100","reply_count":1,"reply_users_count":1,"latest_reply":"1615567781.182100","reply_users":["U6G4M02N4"],"subscribed":false},{"client_msg_id":"dc91cc43-0ebb-43ab-85f8-48b2d1b10574","type":"message","text":"Looking forward to qr_mumps.jl!","user":"U6G4M02N4","ts":"1615567781.182100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2JLv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looking forward to qr_mumps.jl!"}]}]}],"thread_ts":"1615513756.158100","parent_user_id":"UGG8Z375L"}]