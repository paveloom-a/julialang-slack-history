[{"client_msg_id":"2779f9f6-513d-4f87-be6f-8a3c6ff4db8b","type":"message","text":"This is also surprising/somewhat evil, in the same vein as above:\n```g1() = Dict{Symbol, Vector{Float64}}(\n            :Z =&gt; [0.0, 0.0, 0.5],\n            :A =&gt; [0.5, 0.5, 0.5])\ng2() = Dict(:Z =&gt; [0.0, 0.0, 0.5],\n            :A =&gt; [0.5, 0.5, 0.5])\n\n@btime g1() # 254.061 ns (8 allocations: 896 bytes)\n@btime g2() # 233.819 ns (6 allocations: 832 bytes)```\nAdding the (correct) type annotation on the Dict leads to extra allocations :open_mouth:.\nThere's no difference if there's just one element in the Dict but for more than one element `g2` adds 2 allocations per new element, while `g1` just adds 1 allocation per element.","user":"UCE6XE42Z","ts":"1612978134.373400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gKpP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This is also surprising/somewhat evil, in the same vein as above:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"g1() = Dict{Symbol, Vector{Float64}}(\n            :Z => [0.0, 0.0, 0.5],\n            :A => [0.5, 0.5, 0.5])\ng2() = Dict(:Z => [0.0, 0.0, 0.5],\n            :A => [0.5, 0.5, 0.5])\n\n@btime g1() # 254.061 ns (8 allocations: 896 bytes)\n@btime g2() # 233.819 ns (6 allocations: 832 bytes)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Adding the (correct) type annotation on the Dict leads to extra allocations "},{"type":"emoji","name":"open_mouth"},{"type":"text","text":".\nThere's no difference if there's just one element in the Dict but for more than one element "},{"type":"text","text":"g2","style":{"code":true}},{"type":"text","text":" adds 2 allocations per new element, while "},{"type":"text","text":"g1","style":{"code":true}},{"type":"text","text":" just adds 1 allocation per element."}]}]}],"thread_ts":"1612978134.373400","reply_count":1,"reply_users_count":1,"latest_reply":"1612978291.373500","reply_users":["UDB26738Q"],"subscribed":false},{"client_msg_id":"f9d6920d-4854-4e91-85e9-adddf403e0c6","type":"message","text":"especially surprising since the latter calls the former:\n```Dict(ps::Pair{K,V}...) where {K,V} = Dict{K,V}(ps)```\n:confused:","user":"UDB26738Q","ts":"1612978291.373500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zODh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"especially surprising since the latter calls the former:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Dict(ps::Pair{K,V}...) where {K,V} = Dict{K,V}(ps)"}]},{"type":"rich_text_section","elements":[{"type":"emoji","name":"confused"}]}]}],"thread_ts":"1612978134.373400","parent_user_id":"UCE6XE42Z"}]