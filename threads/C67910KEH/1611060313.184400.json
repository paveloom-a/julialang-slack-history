[{"client_msg_id":"e1ed4dfa-ef8c-40a1-81c7-2b394340a7ba","type":"message","text":"`@btime` returns the value of an expression whilst printing timing to the REPL,  `@belapsed` returns the time taken (or perhaps the minimum over a bunch of trials), `@benchmark` returns a structure with timing data. But what if I want *both* the value of the expression and also the time taken to evaluate it. Can that be done in a oner?","user":"UQNDMRP35","ts":"1611060313.184400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W2K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"@btime","style":{"code":true}},{"type":"text","text":" returns the value of an expression whilst printing timing to the REPL,  "},{"type":"text","text":"@belapsed","style":{"code":true}},{"type":"text","text":" returns the time taken (or perhaps the minimum over a bunch of trials), "},{"type":"text","text":"@benchmark","style":{"code":true}},{"type":"text","text":" returns a structure with timing data. But what if I want "},{"type":"text","text":"both","style":{"bold":true}},{"type":"text","text":" the value of the expression and also the time taken to evaluate it. Can that be done in a oner?"}]}]}],"thread_ts":"1611060313.184400","reply_count":6,"reply_users_count":3,"latest_reply":"1611067331.187600","reply_users":["UDB26738Q","UQNDMRP35","U6A936746"],"subscribed":false},{"client_msg_id":"b3fa9b19-d791-4a63-8203-5f6923f43c73","type":"message","text":"can be done manually by looking at the definition of `@belapsed` and `@btime`","user":"UDB26738Q","ts":"1611060383.184500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B9lS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can be done manually by looking at the definition of "},{"type":"text","text":"@belapsed","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"@btime","style":{"code":true}}]}]}],"thread_ts":"1611060313.184400","parent_user_id":"UQNDMRP35"},{"client_msg_id":"3be52fe2-2286-47a8-9c24-b77169edf62f","type":"message","text":"Ok, I didn't think to do that. I'll have a look. Thanks!","user":"UQNDMRP35","ts":"1611060445.184700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0kdZU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, I didn't think to do that. I'll have a look. Thanks!"}]}]}],"thread_ts":"1611060313.184400","parent_user_id":"UQNDMRP35"},{"client_msg_id":"3b90dabb-287f-4f4c-bd7a-92116d13af8f","type":"message","text":"```julia&gt; bench = BenchmarkTools.@benchmarkable sin(1.23)\nBenchmark(evals=1, seconds=5.0, samples=10000)\n\njulia&gt; BenchmarkTools.warmup(bench)\nBenchmarkTools.Trial: \n  memory estimate:  0 bytes\n  allocs estimate:  0\n  --------------\n  minimum time:     172.000 ns (0.00% GC)\n  median time:      172.000 ns (0.00% GC)\n  mean time:        172.000 ns (0.00% GC)\n  maximum time:     172.000 ns (0.00% GC)\n  --------------\n  samples:          1\n  evals/sample:     1\n\njulia&gt; trial, result = BenchmarkTools.run_result(bench)\n(Trial(13.000 ns), 0.9424888019316975)\n\njulia&gt; trialmin = BenchmarkTools.minimum(trial)\nBenchmarkTools.TrialEstimate: \n  time:             13.000 ns\n  gctime:           0.000 ns (0.00%)\n  memory:           0 bytes\n  allocs:           0\n\njulia&gt; BenchmarkTools.time(trialmin)\n13.0\n\njulia&gt; result\n0.9424888019316975```","user":"UDB26738Q","ts":"1611060570.184900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oxIT","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> bench = BenchmarkTools.@benchmarkable sin(1.23)\nBenchmark(evals=1, seconds=5.0, samples=10000)\n\njulia> BenchmarkTools.warmup(bench)\nBenchmarkTools.Trial: \n  memory estimate:  0 bytes\n  allocs estimate:  0\n  --------------\n  minimum time:     172.000 ns (0.00% GC)\n  median time:      172.000 ns (0.00% GC)\n  mean time:        172.000 ns (0.00% GC)\n  maximum time:     172.000 ns (0.00% GC)\n  --------------\n  samples:          1\n  evals/sample:     1\n\njulia> trial, result = BenchmarkTools.run_result(bench)\n(Trial(13.000 ns), 0.9424888019316975)\n\njulia> trialmin = BenchmarkTools.minimum(trial)\nBenchmarkTools.TrialEstimate: \n  time:             13.000 ns\n  gctime:           0.000 ns (0.00%)\n  memory:           0 bytes\n  allocs:           0\n\njulia> BenchmarkTools.time(trialmin)\n13.0\n\njulia> result\n0.9424888019316975"}]}]}],"thread_ts":"1611060313.184400","parent_user_id":"UQNDMRP35"},{"client_msg_id":"6519f3ca-2c8f-4c5d-b521-00d4179c5856","type":"message","text":"Very helpful. I will paste that into my \"useful stuff from Julia Slack\" document before this conversation falls down the Slack \"black hole\".","user":"UQNDMRP35","ts":"1611060849.185100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eUg9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Very helpful. I will paste that into my \"useful stuff from Julia Slack\" document before this conversation falls down the Slack \"black hole\"."}]}]}],"thread_ts":"1611060313.184400","parent_user_id":"UQNDMRP35"},{"client_msg_id":"8bddde74-27e8-45bf-a0b3-d965dba94d52","type":"message","text":"It would be good to introduce a `@btimed` that does this to `BenchmarkTooks`.\n(`@timed` in Base is the macro that does what you want).\nAnd then `@btime` , and `@ballocated`  etc can use that under the hook and you can use this","user":"U6A936746","ts":"1611061245.185300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ze2w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It would be good to introduce a "},{"type":"text","text":"@btimed","style":{"code":true}},{"type":"text","text":" that does this to "},{"type":"text","text":"BenchmarkTooks","style":{"code":true}},{"type":"text","text":".\n("},{"type":"text","text":"@timed","style":{"code":true}},{"type":"text","text":" in Base is the macro that does what you want).\nAnd then "},{"type":"text","text":"@btime","style":{"code":true}},{"type":"text","text":" , and "},{"type":"text","text":"@ballocated","style":{"code":true}},{"type":"text","text":"  etc can use that under the hook and you can use this"}]}]}],"thread_ts":"1611060313.184400","parent_user_id":"UQNDMRP35","reactions":[{"name":"+1","users":["U7THT3TM3","UQNDMRP35","U881D0W2C","UCZ7VBGUD"],"count":4}]},{"client_msg_id":"c4873a78-7a6f-44cf-a6b2-9df74be1e891","type":"message","text":"I love Julia. With the input I got from <@UDB26738Q> and <@U6A936746> I simply copied `@btime` into my code, made a couple of edits and hey presto, I had the `@timed` I needed. That's the first time I've even looked at the code of a macro, so was total guesswork but worked first time :grinning: (at least I think it did).","user":"UQNDMRP35","ts":"1611067331.187600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dul","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I love Julia. With the input I got from "},{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":" and "},{"type":"user","user_id":"U6A936746"},{"type":"text","text":" I simply copied "},{"type":"text","text":"@btime","style":{"code":true}},{"type":"text","text":" into my code, made a couple of edits and hey presto, I had the "},{"type":"text","text":"@timed","style":{"code":true}},{"type":"text","text":" I needed. That's the first time I've even looked at the code of a macro, so was total guesswork but worked first time "},{"type":"emoji","name":"grinning"},{"type":"text","text":" (at least I think it did)."}]}]}],"thread_ts":"1611060313.184400","parent_user_id":"UQNDMRP35","reactions":[{"name":"party_wizard","users":["UDB26738Q","U6795JH6H"],"count":2}]}]