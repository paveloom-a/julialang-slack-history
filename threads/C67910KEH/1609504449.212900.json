[{"client_msg_id":"c178fcd7-03eb-41b7-9990-c4fa29634d1b","type":"message","text":"Is it correct to say that invalidations are  especially a problem for Base and Standard Libraries, due to extensive use of `precompile` and being in the system images?\nSince for normal packages most code is loaded before it is used and thus compiled.\nSo while invalidations occur its much less of a problem in practice.\nI didn’t spot anything explictly mentioning system image in <https://julialang.org/blog/2020/08/invalidations/>","user":"U6A936746","ts":"1609504449.212900","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1609504457.000000"},"blocks":[{"type":"rich_text","block_id":"gXL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it correct to say that invalidations are  especially a problem for Base and Standard Libraries, due to extensive use of "},{"type":"text","text":"precompile","style":{"code":true}},{"type":"text","text":" and being in the system images?\nSince for normal packages most code is loaded before it is used and thus compiled.\nSo while invalidations occur its much less of a problem in practice.\nI didn’t spot anything explictly mentioning system image in "},{"type":"link","url":"https://julialang.org/blog/2020/08/invalidations/"}]}]}],"thread_ts":"1609504449.212900","reply_count":5,"reply_users_count":3,"latest_reply":"1609523874.215400","reply_users":["U7HAYKY9X","U6A936746","U67D54KS8"],"subscribed":false},{"client_msg_id":"a87fa8c1-5a8c-477f-a85f-21653dc32436","type":"message","text":"I don't know much about this, but my understanding is:\n• Whether there is a sysimage or not makes no difference. Even if you compile something \"manually\", you still need to precompile it on the same terms as if you had a sysimage.\n• Base is particularly vulnerable because people are more prone to invalidate Base methods, and when they do, tonnes of other methods use them, so lots of functions have to be recompiled. The impact of invalidations depends on how \"funamental\" a package is, and Base is the most fundamental module","user":"U7HAYKY9X","ts":"1609507409.213200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dcOIz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't know much about this, but my understanding is:\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Whether there is a sysimage or not makes no difference. Even if you compile something \"manually\", you still need to precompile it on the same terms as if you had a sysimage."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Base is particularly vulnerable because people are more prone to invalidate Base methods, and when they do, tonnes of other methods use them, so lots of functions have to be recompiled. The impact of invalidations depends on how \"funamental\" a package is, and Base is the most fundamental module"}]}],"style":"bullet","indent":0}]}],"thread_ts":"1609504449.212900","parent_user_id":"U6A936746"},{"client_msg_id":"7cc8c4a3-405f-467e-bd95-cea61a6288e3","type":"message","text":"But maybe I'm missing something","user":"U7HAYKY9X","ts":"1609507514.213400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"a/yp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But maybe I'm missing something"}]}]}],"thread_ts":"1609504449.212900","parent_user_id":"U6A936746"},{"client_msg_id":"f82ec396-1931-4d0a-b432-64d9e90e67fe","type":"message","text":"But most things haven’t been compiled until everything is loaded.\nbecause one writes all the `using` lines at the start.\nbefore calling things.\nCan’t invalidate things that haven’t been compiled yet.\nBut the sysimage is full of stuff that was compiled before all the `using`s were run.","user":"U6A936746","ts":"1609507801.213600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aOX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But most things haven’t been compiled until everything is loaded.\nbecause one writes all the "},{"type":"text","text":"using","style":{"code":true}},{"type":"text","text":" lines at the start.\nbefore calling things.\nCan’t invalidate things that haven’t been compiled yet.\nBut the sysimage is full of stuff that was compiled before all the "},{"type":"text","text":"using","style":{"code":true}},{"type":"text","text":"s were run."}]}]}],"thread_ts":"1609504449.212900","parent_user_id":"U6A936746"},{"client_msg_id":"75d7b225-a720-4766-be59-52db89b15134","type":"message","text":"Oh right, that makes sense.","user":"U7HAYKY9X","ts":"1609507835.213800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4xTy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh right, that makes sense."}]}]}],"thread_ts":"1609504449.212900","parent_user_id":"U6A936746"},{"client_msg_id":"7a1e2ef2-18f6-4c85-8659-e3b268dabd11","type":"message","text":"Less invalidations in Base = more use out of precompile in packages = people start using it in packages = invalidations between packages becomes important","user":"U67D54KS8","ts":"1609523874.215400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5xx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Less invalidations in Base = more use out of precompile in packages = people start using it in packages = invalidations between packages becomes important"}]}]}],"thread_ts":"1609504449.212900","parent_user_id":"U6A936746","reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]}]