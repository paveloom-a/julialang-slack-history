[{"client_msg_id":"202025eb-4799-43ff-9d18-d4771d536a79","type":"message","text":"Question for FourierFlows.jl, will it possible to expand it from doubly-periodic domains (for 2D simulations) to bounded (should be Dirichlet) conditions, ie. allowing for walls instead of infinite domain.","user":"UNJ1EG11C","ts":"1609364801.329600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Quq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Question for FourierFlows.jl, will it possible to expand it from doubly-periodic domains (for 2D simulations) to bounded (should be Dirichlet) conditions, ie. allowing for walls instead of infinite domain."}]}]}],"thread_ts":"1609364801.329600","reply_count":9,"reply_users_count":2,"latest_reply":"1609879679.336000","reply_users":["UMZQBQU67","UNJ1EG11C"],"subscribed":false,"reactions":[{"name":"+1","users":["U01FBLBCP7S"],"count":1}]},{"client_msg_id":"D68D3322-9E62-47C0-BCC9-39A45C24BF15","type":"message","text":"You raised a GitHub issue right? Short answer is that you can do it with a sin/cos basis + FFTW’s cosine transform, but FourierFlows doesn’t help that much (just providing a software framework and time steppers, but no help with the spectral transforms). ","user":"UMZQBQU67","ts":"1609780013.334200","team":"T68168MUP","thread_ts":"1609364801.329600","parent_user_id":"UNJ1EG11C"},{"client_msg_id":"05067017-b280-4110-aa97-40b41659d63c","type":"message","text":"Hi Gregory, thanks for replying.  yes I raised the issue haha and saw your reply\n\nWhere should the cosine transform be placed (for example, in this example posed here: <https://fourierflows.github.io/FourierFlowsDocumentation/dev/generated/OneDShallowWaterGeostrophicAdjustment/> should this sin/cos transform be done in the calcN! or in Equation! function","user":"UNJ1EG11C","ts":"1609783326.334400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bOy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi Gregory, thanks for replying.  yes I raised the issue haha and saw your reply\n\nWhere should the cosine transform be placed (for example, in this example posed here: "},{"type":"link","url":"https://fourierflows.github.io/FourierFlowsDocumentation/dev/generated/OneDShallowWaterGeostrophicAdjustment/"},{"type":"text","text":" should this sin/cos transform be done in the calcN! or in Equation! function"}]}]}],"thread_ts":"1609364801.329600","parent_user_id":"UNJ1EG11C"},{"client_msg_id":"4f978113-865c-46a0-997a-476a7419ac5a","type":"message","text":"I think the Coriolis term might break parity for the 1D shallow water equations, which means you cant use the sin/cos basis and preserve spectral accuracy, I think. The point is that u requires a sine basis (when 1D in x, to satisfy the no-penetration condition), while v requires a cosine basis. Thus parity is broken due to the term `f*v` in the u-equation, for example.","user":"UMZQBQU67","ts":"1609879415.334700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gUq8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the Coriolis term might break parity for the 1D shallow water equations, which means you cant use the sin/cos basis and preserve spectral accuracy, I think. The point is that u requires a sine basis (when 1D in x, to satisfy the no-penetration condition), while v requires a cosine basis. Thus parity is broken due to the term "},{"type":"text","text":"f*v","style":{"code":true}},{"type":"text","text":" in the u-equation, for example."}]}]}],"thread_ts":"1609364801.329600","parent_user_id":"UNJ1EG11C"},{"client_msg_id":"32cc9648-653d-485d-b56d-8ff0dfb52ee7","type":"message","text":"You don’t have this problem in the quasi-geostrophic equations though.","user":"UMZQBQU67","ts":"1609879428.334900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GFm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You don’t have this problem in the quasi-geostrophic equations though."}]}]}],"thread_ts":"1609364801.329600","parent_user_id":"UNJ1EG11C"},{"client_msg_id":"748f7884-e656-44a5-a181-90755209020b","type":"message","text":"You’ll have to plan a cosine transform and its inverse and also calculate the appropriate wavenumbers, and add that data to your `Problem` (perhaps as part of `params` ). Then you need to use that plan and wavenumbers in `calcN!` for forward and inverse transforms, and the wavenumbers where appropriate as well.","user":"UMZQBQU67","ts":"1609879537.335100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lU4t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You’ll have to plan a cosine transform and its inverse and also calculate the appropriate wavenumbers, and add that data to your "},{"type":"text","text":"Problem","style":{"code":true}},{"type":"text","text":" (perhaps as part of "},{"type":"text","text":"params","style":{"code":true}},{"type":"text","text":" ). Then you need to use that plan and wavenumbers in "},{"type":"text","text":"calcN!","style":{"code":true}},{"type":"text","text":" for forward and inverse transforms, and the wavenumbers where appropriate as well."}]}]}],"thread_ts":"1609364801.329600","parent_user_id":"UNJ1EG11C"},{"client_msg_id":"9b62214e-c2b6-4a3a-8557-0ad60bbc076d","type":"message","text":"If you work on this it might be nice to document your progress on the github issue. I think its within-scope for FourierFlows to support the sin/cos basis, we just haven’t gone down this road yet.","user":"UMZQBQU67","ts":"1609879589.335300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hGEH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you work on this it might be nice to document your progress on the github issue. I think its within-scope for FourierFlows to support the sin/cos basis, we just haven’t gone down this road yet."}]}]}],"thread_ts":"1609364801.329600","parent_user_id":"UNJ1EG11C"},{"client_msg_id":"4b33d7e0-47ed-42a9-bf93-5157cc504f47","type":"message","text":"here’s a link to the FFTW docs:","user":"UMZQBQU67","ts":"1609879648.335500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uJf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"here’s a link to the FFTW docs:"}]}]}],"thread_ts":"1609364801.329600","parent_user_id":"UNJ1EG11C"},{"client_msg_id":"97c62b96-47c8-4dd6-b604-55af8a2bd68e","type":"message","text":"<http://www.fftw.org/fftw3_doc/Real-even_002fodd-DFTs-_0028cosine_002fsine-transforms_0029.html>","user":"UMZQBQU67","ts":"1609879649.335700","team":"T68168MUP","attachments":[{"title":"Real even/odd DFTs (cosine/sine transforms) (FFTW 3.3.9)","title_link":"http://www.fftw.org/fftw3_doc/Real-even_002fodd-DFTs-_0028cosine_002fsine-transforms_0029.html","text":"Real even/odd DFTs (cosine/sine transforms) (FFTW 3.3.9)","fallback":"Real even/odd DFTs (cosine/sine transforms) (FFTW 3.3.9)","from_url":"http://www.fftw.org/fftw3_doc/Real-even_002fodd-DFTs-_0028cosine_002fsine-transforms_0029.html","service_icon":"http://www.fftw.org/favicon.ico","service_name":"fftw.org","id":1,"original_url":"http://www.fftw.org/fftw3_doc/Real-even_002fodd-DFTs-_0028cosine_002fsine-transforms_0029.html"}],"blocks":[{"type":"rich_text","block_id":"mok=","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"http://www.fftw.org/fftw3_doc/Real-even_002fodd-DFTs-_0028cosine_002fsine-transforms_0029.html"}]}]}],"thread_ts":"1609364801.329600","parent_user_id":"UNJ1EG11C"},{"client_msg_id":"5a98c7d1-35f5-4882-9996-a91e8024a8a9","type":"message","text":"Alright!  Thanks so much for elaborating.  This is likely beyond the scope of my knowledge in math and numerical methods for now, but I will like to try something when I have some spare time!","user":"UNJ1EG11C","ts":"1609879679.336000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EqKG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Alright!  Thanks so much for elaborating.  This is likely beyond the scope of my knowledge in math and numerical methods for now, but I will like to try something when I have some spare time!"}]}]}],"thread_ts":"1609364801.329600","parent_user_id":"UNJ1EG11C"}]