[{"client_msg_id":"a6aa1eea-6324-40b2-92e3-28345d68c369","type":"message","text":"I would personally design a type for this, something like `WindowedSpatialAverage` that allows me to specify the window along each `i, j, k`. Then making it a callable object of one argument (nominally of `model`, though its irrelevant in this case) allows it to be used with an output writer and time-averaging.","user":"UMZQBQU67","ts":"1613600717.056700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zazT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would personally design a type for this, something like "},{"type":"text","text":"WindowedSpatialAverage","style":{"code":true}},{"type":"text","text":" that allows me to specify the window along each "},{"type":"text","text":"i, j, k","style":{"code":true}},{"type":"text","text":". Then making it a callable object of one argument (nominally of "},{"type":"text","text":"model","style":{"code":true}},{"type":"text","text":", though its irrelevant in this case) allows it to be used with an output writer and time-averaging."}]}]}],"thread_ts":"1613600717.056700","reply_count":7,"reply_users_count":2,"latest_reply":"1613847016.011800","reply_users":["UEP056STX","UMZQBQU67"],"subscribed":false},{"client_msg_id":"c0e31372-e3ce-4218-a224-69fe29aa9921","type":"message","text":"What do you think of adding a more flexible `WindowedField` type that can be passed to `AveragedField`?","user":"UEP056STX","ts":"1613764997.057400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AGS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What do you think of adding a more flexible "},{"type":"text","text":"WindowedField","style":{"code":true}},{"type":"text","text":" type that can be passed to "},{"type":"text","text":"AveragedField","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1613600717.056700","parent_user_id":"UMZQBQU67"},{"client_msg_id":"00390cab-58df-4f3d-a2ad-2554e553f162","type":"message","text":"Posted this in another thread but the main idea is that it could be created from a `Field` + a `FieldSlicer`:\n```u_window = WindowedField(model.velocities.u, field_slicer=FieldSlicer(j=20:50))```\nand we could make sure that\n```AveragedField(u_window, dims=(1, 2))```\ndoes the right thing by averaging all of x and y from j=20:50?","user":"UEP056STX","ts":"1613765033.057600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+/CG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Posted this in another thread but the main idea is that it could be created from a "},{"type":"text","text":"Field","style":{"code":true}},{"type":"text","text":" + a "},{"type":"text","text":"FieldSlicer","style":{"code":true}},{"type":"text","text":":\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"u_window = WindowedField(model.velocities.u, field_slicer=FieldSlicer(j=20:50))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and we could make sure that\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"AveragedField(u_window, dims=(1, 2))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"does the right thing by averaging all of x and y from j=20:50?"}]}]}],"thread_ts":"1613600717.056700","parent_user_id":"UMZQBQU67"},{"client_msg_id":"a8b2538e-28ee-4def-92f5-644199704e3e","type":"message","text":"Ignore my comments. I missed your post in the other thread.","user":"UEP056STX","ts":"1613774548.058500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+Cfa5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ignore my comments. I missed your post in the other thread."}]}]}],"thread_ts":"1613600717.056700","parent_user_id":"UMZQBQU67"},{"client_msg_id":"13b12d72-d701-44b5-b76c-68317e4fc445","type":"message","text":"That’s a cool design for sure","user":"UMZQBQU67","ts":"1613846918.011200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fErG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That’s a cool design for sure"}]}]}],"thread_ts":"1613600717.056700","parent_user_id":"UMZQBQU67"},{"client_msg_id":"a55abe6a-be75-4f0d-9728-643e096e4fed","type":"message","text":"The only reason I suggested something else was because I thought it would be easier to implement","user":"UMZQBQU67","ts":"1613846929.011400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EDO6U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The only reason I suggested something else was because I thought it would be easier to implement"}]}]}],"thread_ts":"1613600717.056700","parent_user_id":"UMZQBQU67"},{"client_msg_id":"92b6736a-857d-46b3-bcd1-dd2a667e8ec5","type":"message","text":"I think we’d have to define a few more functions to get a `WindowedField` to work and also figure out what happens when you index out of bounds, etc","user":"UMZQBQU67","ts":"1613846969.011600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"a+i7k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think we’d have to define a few more functions to get a "},{"type":"text","text":"WindowedField","style":{"code":true}},{"type":"text","text":" to work and also figure out what happens when you index out of bounds, etc"}]}]}],"thread_ts":"1613600717.056700","parent_user_id":"UMZQBQU67"},{"client_msg_id":"f573ec07-9de1-421f-be0b-e4e5a1d101d6","type":"message","text":"Some stuff would be required to make it work with `OutputWriters` (because `FieldSlicer` associated with an output writer tries to calculate indices appropriate to the field type begin outputted)","user":"UMZQBQU67","ts":"1613847016.011800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"af+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Some stuff would be required to make it work with "},{"type":"text","text":"OutputWriters","style":{"code":true}},{"type":"text","text":" (because "},{"type":"text","text":"FieldSlicer","style":{"code":true}},{"type":"text","text":" associated with an output writer tries to calculate indices appropriate to the field type begin outputted)"}]}]}],"thread_ts":"1613600717.056700","parent_user_id":"UMZQBQU67","reactions":[{"name":"+1","users":["UEP056STX"],"count":1}]}]