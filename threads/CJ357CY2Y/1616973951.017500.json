[{"client_msg_id":"19194730-77f1-4f9e-a477-fb0e7254bd65","type":"message","text":"In dynamos, when constructing IR from scratch (i.e. `IR()`, not `IR(f, args...)` ), how do we construct an argument list? I tried this:\n\n```@dynamo function __splatnew__(a...)\n    ir = IR()\n    vT = argument!(ir)      # argument for a type to be constructed\n    vargs = argument!(ir)   # argument for its field values\n    vres = push!(ir, Expr(:splatnew, vT, vargs))\n    return!(ir, vres)\n    return ir\nend```\nbut it results in an undefined variable\n```struct Point x; y end\n\n@code_ir __splatnew__(Point, (1, 2))```\nresult:\n```1: (%1, %2)\n  %3 = %splatnew(%2, IRTools.Inner.Undefined())\n  return %3```\nany examples of building functions from the grounds up?","user":"U72B014PN","ts":"1616973951.017500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"moh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In dynamos, when constructing IR from scratch (i.e. "},{"type":"text","text":"IR()","style":{"code":true}},{"type":"text","text":", not "},{"type":"text","text":"IR(f, args...)","style":{"code":true}},{"type":"text","text":" ), how do we construct an argument list? I tried this:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@dynamo function __splatnew__(a...)\n    ir = IR()\n    vT = argument!(ir)      # argument for a type to be constructed\n    vargs = argument!(ir)   # argument for its field values\n    vres = push!(ir, Expr(:splatnew, vT, vargs))\n    return!(ir, vres)\n    return ir\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nbut it results in an undefined variable\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"struct Point x; y end\n\n@code_ir __splatnew__(Point, (1, 2))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"result:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"1: (%1, %2)\n  %3 = %splatnew(%2, IRTools.Inner.Undefined())\n  return %3"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"any examples of building functions from the grounds up?"}]}]}],"thread_ts":"1616973951.017500","reply_count":6,"reply_users_count":3,"latest_reply":"1617049183.018800","reply_users":["UM30MT6RF","UN45LV5K6","U72B014PN"],"is_locked":false,"subscribed":false},{"client_msg_id":"68f0ab4e-107a-4419-a137-6927cd833c57","type":"message","text":"The number of slots need to match that of the dynamo. Here, there is just one vararg slot, so instead of adding two slots, you would have to manually destructure the first slot, which should always be a tuple.","user":"UM30MT6RF","ts":"1616975166.017700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"huX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The number of slots need to match that of the dynamo. Here, there is just one vararg slot, so instead of adding two slots, you would have to manually destructure the first slot, which should always be a tuple."}]}]}],"thread_ts":"1616973951.017500","parent_user_id":"U72B014PN","reactions":[{"name":"thinking_face","users":["U72B014PN"],"count":1}]},{"client_msg_id":"075a35a5-914d-47b0-97d7-3b5ddaf0fea6","type":"message","text":"You can also manually replicate what a dynamo is doing, e.g. <https://github.com/TuringLang/IRTracker.jl/blob/master/src/tracker.jl#L27> (there I'm adding an argument). This takes a while to figure out for each use case, though.","user":"UN45LV5K6","ts":"1617017749.018000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hxAl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can also manually replicate what a dynamo is doing, e.g. "},{"type":"link","url":"https://github.com/TuringLang/IRTracker.jl/blob/master/src/tracker.jl#L27"},{"type":"text","text":" (there I'm adding an argument). This takes a while to figure out for each use case, though."}]}]}],"thread_ts":"1616973951.017500","parent_user_id":"U72B014PN"},{"client_msg_id":"d06b9dee-1b1b-45d5-a744-0b5e51ab2d93","type":"message","text":"Is there a good source of information about `meta` ? I feel a little behind in understanding of that code in the IRTracker","user":"U72B014PN","ts":"1617045797.018200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y+DO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a good source of information about "},{"type":"text","text":"meta","style":{"code":true}},{"type":"text","text":" ? I feel a little behind in understanding of that code in the IRTracker"}]}]}],"thread_ts":"1616973951.017500","parent_user_id":"U72B014PN"},{"client_msg_id":"9e48f5ed-888a-43a5-9b61-dc6f590820d1","type":"message","text":"With `@dynamo` , I ended up with this:\n\n```@dynamo function __splatnew__(a...)\n    ir = <http://IRTools.IR|IRTools.IR>()\n    arg_tuple = IRTools.argument!(ir)\n    vT = push!(ir, Expr(:call, getfield, arg_tuple, 1))\n    vargs = push!(ir, Expr(:call, getfield, arg_tuple, 2))\n    vres = push!(ir, Expr(:splatnew, vT, vargs))\n    IRTools.return!(ir, vres)\n    return ir\nend\n\n\nstruct Point x; y end\n\n__splatnew__(Point, (1, 2))```\n","user":"U72B014PN","ts":"1617045832.018400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Uyp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"With "},{"type":"text","text":"@dynamo","style":{"code":true}},{"type":"text","text":" , I ended up with this:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@dynamo function __splatnew__(a...)\n    ir = IRTools.IR()\n    arg_tuple = IRTools.argument!(ir)\n    vT = push!(ir, Expr(:call, getfield, arg_tuple, 1))\n    vargs = push!(ir, Expr(:call, getfield, arg_tuple, 2))\n    vres = push!(ir, Expr(:splatnew, vT, vargs))\n    IRTools.return!(ir, vres)\n    return ir\nend\n\n\nstruct Point x; y end\n\n__splatnew__(Point, (1, 2))"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1616973951.017500","parent_user_id":"U72B014PN"},{"client_msg_id":"f530d65b-c8d2-4684-a5f8-83c6ec3f4be8","type":"message","text":"Works ~100x faster than `IRTools.func()`  btw. Thanks for the suggestion!","user":"U72B014PN","ts":"1617045873.018600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e6wDP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Works ~100x faster than "},{"type":"text","text":"IRTools.func()","style":{"code":true}},{"type":"text","text":"  btw. Thanks for the suggestion!"}]}]}],"thread_ts":"1616973951.017500","parent_user_id":"U72B014PN"},{"client_msg_id":"b80af184-83e8-42a4-901f-814026144923","type":"message","text":"&gt; Is there a good source of information about meta ? I feel a little behind in understanding of that code in the IRTracker\nDo you mean the meta function or the meta field?","user":"UM30MT6RF","ts":"1617049183.018800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RjPos","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Is there a good source of information about meta ? I feel a little behind in understanding of that code in the IRTracker"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Do you mean the meta function or the meta field?"}]}]}],"thread_ts":"1616973951.017500","parent_user_id":"U72B014PN"}]