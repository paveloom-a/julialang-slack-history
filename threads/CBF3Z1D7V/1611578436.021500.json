[{"client_msg_id":"8ECFF6D9-C429-4805-8A5A-708A0DD2FBB8","type":"message","text":"This download failure has stuck around.. It’s reproducible when running the tests locally on ubuntu <https://github.com/JuliaLang/Pkg.jl/pull/2357#pullrequestreview-574889549|https://github.com/JuliaLang/Pkg.jl/pull/2357#pullrequestreview-574889549>","user":"U8MPCDJAY","ts":"1611578436.021500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6niOM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This download failure has stuck around.. It’s reproducible when running the tests locally on ubuntu "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2357#pullrequestreview-574889549","text":"https://github.com/JuliaLang/Pkg.jl/pull/2357#pullrequestreview-574889549"}]}]}],"thread_ts":"1611578436.021500","reply_count":24,"reply_users_count":2,"latest_reply":"1611602429.032200","reply_users":["UDB26738Q","U8MPCDJAY"],"subscribed":false},{"client_msg_id":"9a7e0b08-39df-4192-8ed6-42a6f00cae30","type":"message","text":"where is  `isolate` defined?","user":"UDB26738Q","ts":"1611578764.021600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QIJRN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"where is  "},{"type":"text","text":"isolate","style":{"code":true}},{"type":"text","text":" defined?"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"201fdb00-be33-45fc-bc71-d596bbb2b23b","type":"message","text":"for the record, instead of\n```for i in 1:10\n    @testset \"Debugging: Downloads.download. Rep $i\" begin```\nyou can do\n```@testset \"Debugging: Downloads.download. Rep $i\" for i in 1:10```\n:wink:","user":"UDB26738Q","ts":"1611578811.021800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FVd7W","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for the record, instead of\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"for i in 1:10\n    @testset \"Debugging: Downloads.download. Rep $i\" begin"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"you can do\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@testset \"Debugging: Downloads.download. Rep $i\" for i in 1:10"}]},{"type":"rich_text_section","elements":[{"type":"emoji","name":"wink"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY","reactions":[{"name":"+1","users":["U8MPCDJAY"],"count":1}]},{"client_msg_id":"fd6e5d05-f096-4838-977a-66518d13cfe3","type":"message","text":"the first two for loops work for me, the last twos fail because of `isolate`","user":"UDB26738Q","ts":"1611578847.022000","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1611578911.000000"},"blocks":[{"type":"rich_text","block_id":"rvD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the first two for loops work for me, the last twos fail because of "},{"type":"text","text":"isolate","style":{"code":true}}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"521DAC09-F843-40BF-BA1C-98DC64A273C2","type":"message","text":"Oh so it errors earlier for you than it does on CI?","user":"U8MPCDJAY","ts":"1611578936.022900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ic50z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh so it errors earlier for you than it does on CI?"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"ba87fcdd-be63-47fb-ad26-d1963ca7a7c9","type":"message","text":"I'm just trying to launch that file as it is (well, almost, I had to add `using Pkg, Test`)","user":"UDB26738Q","ts":"1611578971.023200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0Tg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm just trying to launch that file as it is (well, almost, I had to add "},{"type":"text","text":"using Pkg, Test","style":{"code":true}},{"type":"text","text":")"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"15a18f7c-e83d-4370-8b7a-4851ecc70dc9","type":"message","text":"I have no idea where `isolate` comes from though","user":"UDB26738Q","ts":"1611578978.023400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"waJgp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have no idea where "},{"type":"text","text":"isolate","style":{"code":true}},{"type":"text","text":" comes from though"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"3821317A-610A-439E-814E-5A75E3AB095A","type":"message","text":"<https://github.com/JuliaLang/Pkg.jl/blob/1f12cac2e35261bf93063383bafe8f2072731469/test/utils.jl#L18|https://github.com/JuliaLang/Pkg.jl/blob/1f12cac2e35261bf93063383bafe8f2072731469/test/utils.jl#L18>","user":"U8MPCDJAY","ts":"1611579012.023700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2Bt","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/blob/1f12cac2e35261bf93063383bafe8f2072731469/test/utils.jl#L18","text":"https://github.com/JuliaLang/Pkg.jl/blob/1f12cac2e35261bf93063383bafe8f2072731469/test/utils.jl#L18"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"7250697e-7871-4807-9939-871066679969","type":"message","text":"module?","user":"UDB26738Q","ts":"1611579036.023900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A4t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"module?"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"6c178ee7-471f-4d05-b7d0-3ff4b2709460","type":"message","text":"Utils","user":"UDB26738Q","ts":"1611579044.024100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9JqPh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Utils"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"9092a786-ae1b-429f-b058-68ed7cacf177","type":"message","text":"oh, it's in the tests","user":"UDB26738Q","ts":"1611579060.024300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+J14","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, it's in the tests"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY","reactions":[{"name":"+1","users":["U8MPCDJAY"],"count":1}]},{"client_msg_id":"0D3D95A4-1892-4387-A013-C472AB36A67A","type":"message","text":"If you’re running it locally, I’d run the test fully","user":"U8MPCDJAY","ts":"1611579181.025400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jvc3M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you’re running it locally, I’d run the test fully"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"975EA0CA-9211-42F3-8E69-18C86535858B","type":"message","text":"I put those right at the start ","user":"U8MPCDJAY","ts":"1611579191.025900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q=P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I put those right at the start "}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"ebf74876-ee1a-4227-89b1-04910880de58","type":"message","text":"```Test Summary:                                         |\nDebugging: PlatformEngines.download, isolated. Rep 10 | No tests\n  Installing known registries into `/tmp/jl_V7LGsA`\n     Cloning registry from \"/home/mose/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/test/registries/General\"\n       Added registry `General` to `/tmp/jl_V7LGsA/registries/General`\n   Resolving package versions...\ntarball downloads: Error During Test at /tmp/foo.jl:30\n  Got exception outside of a @test\n  Error when installing package Parsers:\n  failed to get tarball from [\"<https://github.com/JuliaData/Parsers.jl.git>\"]\n  Stacktrace:\n   [1] pkgerror(msg::String)\n     @ Pkg.Types ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Types.jl:52\n   [2] macro expansion\n     @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:763 [inlined]\n   [3] (::Pkg.Operations.var\"#58#62\"{Bool, Pkg.Types.Context, Dict{Base.UUID, Vector{String}}, Channel{Any}, Channel{Tuple{Pkg.Types.PackageSpec, String}}})()\n     @ Pkg.Operations ./task.jl:406\n  Stacktrace:\n    [1] pkgerror(::String, ::Vararg{String, N} where N)\n      @ Pkg.Types ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Types.jl:52\n    [2] macro expansion\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:781 [inlined]\n    [3] macro expansion\n      @ ./task.jl:382 [inlined]\n    [4] download_source(ctx::Pkg.Types.Context, pkgs::Vector{Pkg.Types.PackageSpec}, urls::Dict{Base.UUID, Vector{String}}; readonly::Bool)\n      @ Pkg.Operations ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:731\n    [5] #download_source#54\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:706 [inlined]\n    [6] download_source\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:704 [inlined]\n    [7] add(ctx::Pkg.Types.Context, pkgs::Vector{Pkg.Types.PackageSpec}, new_git::Vector{Base.UUID}; preserve::Pkg.Types.PreserveLevel, platform::Base.BinaryPlatforms.Platform)\n      @ Pkg.Operations ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:1210\n    [8] add(ctx::Pkg.Types.Context, pkgs::Vector{Pkg.Types.PackageSpec}; preserve::Pkg.Types.PreserveLevel, platform::Base.BinaryPlatforms.Platform, kwargs::Base.Iterators.Pairs{Symbol, Bool, Tuple{Symbol}, NamedTuple{(:use_only_tarballs_for_downloads,), Tuple{Bool}}})\n      @ Pkg.API ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:197\n    [9] add(pkgs::Vector{Pkg.Types.PackageSpec}; kwargs::Base.Iterators.Pairs{Symbol, Bool, Tuple{Symbol}, NamedTuple{(:use_only_tarballs_for_downloads,), Tuple{Bool}}})\n      @ Pkg.API ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:73\n   [10] #add#21\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:70 [inlined]\n   [11] #add#20\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:69 [inlined]\n   [12] macro expansion\n      @ /tmp/foo.jl:31 [inlined]\n   [13] macro expansion\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Test/src/Test.jl:1146 [inlined]\n   [14] (::var\"#23#25\")()\n      @ Main /tmp/foo.jl:31\n   [15] (::Main.Utils.var\"#4#7\"{Bool, var\"#23#25\"})()\n      @ Main.Utils ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/test/utils.jl:52\n   [16] withenv(::Main.Utils.var\"#4#7\"{Bool, var\"#23#25\"}, ::Pair{String, Nothing}, ::Vararg{Pair{String, Nothing}, N} where N)\n      @ Base ./env.jl:161\n   [17] isolate(fn::var\"#23#25\"; loaded_depot::Bool)\n      @ Main.Utils ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/test/utils.jl:43\n   [18] isolate(fn::Function)\n      @ Main.Utils ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/test/utils.jl:18\n   [19] macro expansion\n      @ /tmp/foo.jl:29 [inlined]\n   [20] macro expansion\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Test/src/Test.jl:1146 [inlined]\n   [21] top-level scope\n      @ /tmp/foo.jl:29\n   [22] include(fname::String)\n      @ Base.MainInclude ./client.jl:444\n   [23] top-level scope\n      @ REPL[9]:1\n   [24] eval(m::Module, e::Any)\n      @ Core ./boot.jl:360\n   [25] eval_user_input(ast::Any, backend::REPL.REPLBackend)\n      @ REPL ~/repo/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:139\n   [26] repl_backend_loop(backend::REPL.REPLBackend)\n      @ REPL ~/repo/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:200\n   [27] start_repl_backend(backend::REPL.REPLBackend, consumer::Any)\n      @ REPL ~/repo/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:185\n   [28] run_repl(repl::REPL.AbstractREPL, consumer::Any; backend_on_current_task::Bool)\n      @ REPL ~/repo/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:317\n   [29] run_repl(repl::REPL.AbstractREPL, consumer::Any)\n      @ REPL ~/repo/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:305\n   [30] (::Base.var\"#865#867\"{Bool, Bool, Bool})(REPL::Module)\n      @ Base ./client.jl:387\n   [31] #invokelatest#2\n      @ ./essentials.jl:707 [inlined]\n   [32] invokelatest\n      @ ./essentials.jl:706 [inlined]\n   [33] run_main_repl(interactive::Bool, quiet::Bool, banner::Bool, history_file::Bool, color_set::Bool)\n      @ Base ./client.jl:372\n   [34] exec_options(opts::Base.JLOptions)\n      @ Base ./client.jl:302\n   [35] _start()\n      @ Base ./client.jl:485\nTest Summary:               | Error  Total\nDebugging: downloads. Rep 1 |     1      1\n  tarball downloads         |     1      1\nERROR: LoadError: Some tests did not pass: 0 passed, 0 failed, 1 errored, 0 broken.\nin expression starting at /tmp/foo.jl:27```","user":"UDB26738Q","ts":"1611579249.026200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=rAoW","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Test Summary:                                         |\nDebugging: PlatformEngines.download, isolated. Rep 10 | No tests\n  Installing known registries into `/tmp/jl_V7LGsA`\n     Cloning registry from \"/home/mose/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/test/registries/General\"\n       Added registry `General` to `/tmp/jl_V7LGsA/registries/General`\n   Resolving package versions...\ntarball downloads: Error During Test at /tmp/foo.jl:30\n  Got exception outside of a @test\n  Error when installing package Parsers:\n  failed to get tarball from [\""},{"type":"link","url":"https://github.com/JuliaData/Parsers.jl.git"},{"type":"text","text":"\"]\n  Stacktrace:\n   [1] pkgerror(msg::String)\n     @ Pkg.Types ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Types.jl:52\n   [2] macro expansion\n     @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:763 [inlined]\n   [3] (::Pkg.Operations.var\"#58#62\"{Bool, Pkg.Types.Context, Dict{Base.UUID, Vector{String}}, Channel{Any}, Channel{Tuple{Pkg.Types.PackageSpec, String}}})()\n     @ Pkg.Operations ./task.jl:406\n  Stacktrace:\n    [1] pkgerror(::String, ::Vararg{String, N} where N)\n      @ Pkg.Types ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Types.jl:52\n    [2] macro expansion\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:781 [inlined]\n    [3] macro expansion\n      @ ./task.jl:382 [inlined]\n    [4] download_source(ctx::Pkg.Types.Context, pkgs::Vector{Pkg.Types.PackageSpec}, urls::Dict{Base.UUID, Vector{String}}; readonly::Bool)\n      @ Pkg.Operations ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:731\n    [5] #download_source#54\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:706 [inlined]\n    [6] download_source\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:704 [inlined]\n    [7] add(ctx::Pkg.Types.Context, pkgs::Vector{Pkg.Types.PackageSpec}, new_git::Vector{Base.UUID}; preserve::Pkg.Types.PreserveLevel, platform::Base.BinaryPlatforms.Platform)\n      @ Pkg.Operations ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/Operations.jl:1210\n    [8] add(ctx::Pkg.Types.Context, pkgs::Vector{Pkg.Types.PackageSpec}; preserve::Pkg.Types.PreserveLevel, platform::Base.BinaryPlatforms.Platform, kwargs::Base.Iterators.Pairs{Symbol, Bool, Tuple{Symbol}, NamedTuple{(:use_only_tarballs_for_downloads,), Tuple{Bool}}})\n      @ Pkg.API ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:197\n    [9] add(pkgs::Vector{Pkg.Types.PackageSpec}; kwargs::Base.Iterators.Pairs{Symbol, Bool, Tuple{Symbol}, NamedTuple{(:use_only_tarballs_for_downloads,), Tuple{Bool}}})\n      @ Pkg.API ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:73\n   [10] #add#21\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:70 [inlined]\n   [11] #add#20\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:69 [inlined]\n   [12] macro expansion\n      @ /tmp/foo.jl:31 [inlined]\n   [13] macro expansion\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Test/src/Test.jl:1146 [inlined]\n   [14] (::var\"#23#25\")()\n      @ Main /tmp/foo.jl:31\n   [15] (::Main.Utils.var\"#4#7\"{Bool, var\"#23#25\"})()\n      @ Main.Utils ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/test/utils.jl:52\n   [16] withenv(::Main.Utils.var\"#4#7\"{Bool, var\"#23#25\"}, ::Pair{String, Nothing}, ::Vararg{Pair{String, Nothing}, N} where N)\n      @ Base ./env.jl:161\n   [17] isolate(fn::var\"#23#25\"; loaded_depot::Bool)\n      @ Main.Utils ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/test/utils.jl:43\n   [18] isolate(fn::Function)\n      @ Main.Utils ~/repo/julia/usr/share/julia/stdlib/v1.6/Pkg/test/utils.jl:18\n   [19] macro expansion\n      @ /tmp/foo.jl:29 [inlined]\n   [20] macro expansion\n      @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Test/src/Test.jl:1146 [inlined]\n   [21] top-level scope\n      @ /tmp/foo.jl:29\n   [22] include(fname::String)\n      @ Base.MainInclude ./client.jl:444\n   [23] top-level scope\n      @ REPL[9]:1\n   [24] eval(m::Module, e::Any)\n      @ Core ./boot.jl:360\n   [25] eval_user_input(ast::Any, backend::REPL.REPLBackend)\n      @ REPL ~/repo/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:139\n   [26] repl_backend_loop(backend::REPL.REPLBackend)\n      @ REPL ~/repo/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:200\n   [27] start_repl_backend(backend::REPL.REPLBackend, consumer::Any)\n      @ REPL ~/repo/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:185\n   [28] run_repl(repl::REPL.AbstractREPL, consumer::Any; backend_on_current_task::Bool)\n      @ REPL ~/repo/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:317\n   [29] run_repl(repl::REPL.AbstractREPL, consumer::Any)\n      @ REPL ~/repo/julia/usr/share/julia/stdlib/v1.6/REPL/src/REPL.jl:305\n   [30] (::Base.var\"#865#867\"{Bool, Bool, Bool})(REPL::Module)\n      @ Base ./client.jl:387\n   [31] #invokelatest#2\n      @ ./essentials.jl:707 [inlined]\n   [32] invokelatest\n      @ ./essentials.jl:706 [inlined]\n   [33] run_main_repl(interactive::Bool, quiet::Bool, banner::Bool, history_file::Bool, color_set::Bool)\n      @ Base ./client.jl:372\n   [34] exec_options(opts::Base.JLOptions)\n      @ Base ./client.jl:302\n   [35] _start()\n      @ Base ./client.jl:485\nTest Summary:               | Error  Total\nDebugging: downloads. Rep 1 |     1      1\n  tarball downloads         |     1      1\nERROR: LoadError: Some tests did not pass: 0 passed, 0 failed, 1 errored, 0 broken.\nin expression starting at /tmp/foo.jl:27"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"ebf74876-ee1a-4227-89b1-04910880de58","type":"message","text":"is this the failure you get?","user":"UDB26738Q","ts":"1611579249.026400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=rAoW-dFhMy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is this the failure you get?"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"D97FC8B5-CF04-484D-A3CE-CA4D8118940F","type":"message","text":"Similar.. you might not be properly using that Pkg branch as the error messages are more verbose in it","user":"U8MPCDJAY","ts":"1611579345.027600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oCeV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Similar.. you might not be properly using that Pkg branch as the error messages are more verbose in it"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"7dfe12f9-d3cb-499c-bc8e-e61a5c643b1f","type":"message","text":"I'm simply using my 2-month old Pkg :smile:","user":"UDB26738Q","ts":"1611579400.027800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ngr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm simply using my 2-month old Pkg "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"f792b761-32d7-4292-9143-639d0f165924","type":"message","text":"wanted to see whether there was any difference","user":"UDB26738Q","ts":"1611579420.028000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Endq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"wanted to see whether there was any difference"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"AE9800B8-7608-44FE-9A1D-D966FB4FD0F5","type":"message","text":"What julia version are you using?","user":"U8MPCDJAY","ts":"1611580293.028500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2Lb1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What julia version are you using?"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"636a0a8c-110f-4fc4-bebb-0ba60d7ee57d","type":"message","text":"```julia&gt; versioninfo()\nJulia Version 1.6.0-DEV.1581\nCommit 377aa809eb (2020-11-26 01:44 UTC)```","user":"UDB26738Q","ts":"1611580318.028700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kgFGH","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> versioninfo()\nJulia Version 1.6.0-DEV.1581\nCommit 377aa809eb (2020-11-26 01:44 UTC)"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"BB3D7F22-B5D4-4BBB-BC51-3F8D92E12289","type":"message","text":"So something within the isolated Pkg.add test has caused GitHub to start temporarily 403-ing tarball requests, but only on linux ","user":"U8MPCDJAY","ts":"1611580498.031100","team":"T68168MUP","edited":{"user":"U8MPCDJAY","ts":"1611580512.000000"},"blocks":[{"type":"rich_text","block_id":"TxEJ7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So something within the isolated Pkg.add test has caused GitHub to start temporarily 403-ing tarball requests, but only on linux "}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"type":"message","subtype":"thread_broadcast","text":"This has boiled down to this, which reliably 403's locally on ubuntu but not MacOS\n```import Downloads\n\ntesturl1 = \"<https://api.github.com/repos/JuliaData/Parsers.jl/tarball/50c9a9ed8c714945e01cd53a21007ed3865ed714>\"\ntesturl2 = \"<https://api.github.com/repos/JuliaIO/JSON.jl/tarball/81690084b6198a2e1da36fcfda16eeca9f9f24e4>\"\ndest1, io = mktemp()\ndest2, io = mktemp()\n\nfor i in 1:10\n    Base.Experimental.@sync begin\n        @async Downloads.download(testurl1, dest1, verbose = true)\n        @async Downloads.download(testurl2, dest2, verbose = true)\n    end\nend```\n<https://github.com/JuliaLang/Pkg.jl/pull/2357#issuecomment-767041712>","user":"U8MPCDJAY","ts":"1611602153.031500","thread_ts":"1611578436.021500","root":{"client_msg_id":"8ECFF6D9-C429-4805-8A5A-708A0DD2FBB8","type":"message","text":"This download failure has stuck around.. It’s reproducible when running the tests locally on ubuntu <https://github.com/JuliaLang/Pkg.jl/pull/2357#pullrequestreview-574889549|https://github.com/JuliaLang/Pkg.jl/pull/2357#pullrequestreview-574889549>","user":"U8MPCDJAY","ts":"1611578436.021500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6niOM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This download failure has stuck around.. It’s reproducible when running the tests locally on ubuntu "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2357#pullrequestreview-574889549","text":"https://github.com/JuliaLang/Pkg.jl/pull/2357#pullrequestreview-574889549"}]}]}],"thread_ts":"1611578436.021500","reply_count":24,"reply_users_count":2,"latest_reply":"1611602429.032200","reply_users":["UDB26738Q","U8MPCDJAY"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"Gpd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This has boiled down to this, which reliably 403's locally on ubuntu but not MacOS\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"import Downloads\n\ntesturl1 = \""},{"type":"link","url":"https://api.github.com/repos/JuliaData/Parsers.jl/tarball/50c9a9ed8c714945e01cd53a21007ed3865ed714"},{"type":"text","text":"\"\ntesturl2 = \""},{"type":"link","url":"https://api.github.com/repos/JuliaIO/JSON.jl/tarball/81690084b6198a2e1da36fcfda16eeca9f9f24e4"},{"type":"text","text":"\"\ndest1, io = mktemp()\ndest2, io = mktemp()\n\nfor i in 1:10\n    Base.Experimental.@sync begin\n        @async Downloads.download(testurl1, dest1, verbose = true)\n        @async Downloads.download(testurl2, dest2, verbose = true)\n    end\nend"}]},{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2357#issuecomment-767041712"}]}]}],"client_msg_id":"7eee3169-96fd-4f48-8732-b302ef05f95e"},{"client_msg_id":"f64adbae-32fa-4f35-8dbd-238864415d68","type":"message","text":"<@UDB26738Q> could you try this in your 2-month old master?","user":"U8MPCDJAY","ts":"1611602267.031800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LK7Yk","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":" could you try this in your 2-month old master?"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"52bfea90-51df-4f36-8f55-def0c1cf77bf","type":"message","text":"```ERROR: LoadError: TaskFailedException\nStacktrace:&lt; HTTP/2 200 \n&lt; date: Mon, 25 Jan 2021 19:18:24 GMT\n&lt; content-type: application/x-gzip\n&lt; content-length: 54032\n&lt; access-control-allow-origin: <https://render.githubusercontent.com>\n&lt; content-disposition: attachment; filename=JuliaData-Parsers.jl-50c9a9ed8c714945e01cd53a21007ed3865ed714-50c9a9e.tar.gz\n&lt; content-security-policy: default-src 'none'; style-src 'unsafe-inline'; sandbox\n&lt; etag: \"4187b31b5f2c14ac0bb6a4297c425e3cd4d511407db137279191e6fb9448e50b\"\n&lt; strict-transport-security: max-age=31536000\n&lt; vary: Authorization,Accept-Encoding\n&lt; x-content-type-options: nosniff\n&lt; x-frame-options: deny\n&lt; x-xss-protection: 1; mode=block\n&lt; vary: Accept-Encoding\n&lt; x-github-request-id: BF5C:D0B6:327D:4171:600F197F\n&lt; \n* Connection #2 to host <http://codeload.github.com|codeload.github.com> left intact\n\n  [1] try_yieldto(undo::typeof(Base.ensure_rescheduled))\n    @ Base ./task.jl:705\n  [2] wait\n    @ ./task.jl:764 [inlined]\n  [3] wait(c::Base.GenericCondition{ReentrantLock})\n    @ Base ./condition.jl:106\n  [4] take_buffered(c::Channel{Any})\n    @ Base ./channels.jl:389\n  [5] take!\n    @ ./channels.jl:383 [inlined]\n  [6] sync_end(c::Channel{Any})\n    @ Base.Experimental ./experimental.jl:63\n  [7] macro expansion\n    @ experimental.jl:101 [inlined]\n  [8] top-level scope\n    @ /tmp/foo.jl:7\n  [9] include(fname::String)\n    @ Base.MainInclude ./client.jl:444\n [10] top-level scope\n    @ REPL[1]:1\n\n    nested task error: HTTP/2 403 while requesting <https://api.github.com/repos/JuliaIO/JSON.jl/tarball/81690084b6198a2e1da36fcfda16eeca9f9f24e4>\n    Stacktrace:\n     [1] (::Downloads.var\"#3#4\"{Nothing, Vector{Pair{String, String}}, Float64, Nothing, Bool, Nothing, String})(output::IOStream)\n       @ Downloads ~/repo/julia/usr/share/julia/stdlib/v1.6/Downloads/src/Downloads.jl:220\n     [2] open(f::Downloads.var\"#3#4\"{Nothing, Vector{Pair{String, String}}, Float64, Nothing, Bool, Nothing, String}, args::String; kwargs::Base.Iterators.Pairs{Symbol, Bool, Tuple{Symbol}, NamedTuple{(:write,), Tuple{Bool}}})\n       @ Base ./io.jl:330\n     [3] arg_write(f::Function, arg::String)\n       @ ArgTools ~/repo/julia/usr/share/julia/stdlib/v1.6/ArgTools/src/ArgTools.jl:86\n     [4] #download#2\n       @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Downloads/src/Downloads.jl:208 [inlined]\n     [5] (::var\"#6#8\")()\n       @ Main ./task.jl:406```","user":"UDB26738Q","ts":"1611602327.032000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"epmF","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ERROR: LoadError: TaskFailedException\nStacktrace:< HTTP/2 200 \n< date: Mon, 25 Jan 2021 19:18:24 GMT\n< content-type: application/x-gzip\n< content-length: 54032\n< access-control-allow-origin: "},{"type":"link","url":"https://render.githubusercontent.com"},{"type":"text","text":"\n< content-disposition: attachment; filename=JuliaData-Parsers.jl-50c9a9ed8c714945e01cd53a21007ed3865ed714-50c9a9e.tar.gz\n< content-security-policy: default-src 'none'; style-src 'unsafe-inline'; sandbox\n< etag: \"4187b31b5f2c14ac0bb6a4297c425e3cd4d511407db137279191e6fb9448e50b\"\n< strict-transport-security: max-age=31536000\n< vary: Authorization,Accept-Encoding\n< x-content-type-options: nosniff\n< x-frame-options: deny\n< x-xss-protection: 1; mode=block\n< vary: Accept-Encoding\n< x-github-request-id: BF5C:D0B6:327D:4171:600F197F\n< \n* Connection #2 to host codeload.github.com left intact\n\n  [1] try_yieldto(undo::typeof(Base.ensure_rescheduled))\n    @ Base ./task.jl:705\n  [2] wait\n    @ ./task.jl:764 [inlined]\n  [3] wait(c::Base.GenericCondition{ReentrantLock})\n    @ Base ./condition.jl:106\n  [4] take_buffered(c::Channel{Any})\n    @ Base ./channels.jl:389\n  [5] take!\n    @ ./channels.jl:383 [inlined]\n  [6] sync_end(c::Channel{Any})\n    @ Base.Experimental ./experimental.jl:63\n  [7] macro expansion\n    @ experimental.jl:101 [inlined]\n  [8] top-level scope\n    @ /tmp/foo.jl:7\n  [9] include(fname::String)\n    @ Base.MainInclude ./client.jl:444\n [10] top-level scope\n    @ REPL[1]:1\n\n    nested task error: HTTP/2 403 while requesting "},{"type":"link","url":"https://api.github.com/repos/JuliaIO/JSON.jl/tarball/81690084b6198a2e1da36fcfda16eeca9f9f24e4"},{"type":"text","text":"\n    Stacktrace:\n     [1] (::Downloads.var\"#3#4\"{Nothing, Vector{Pair{String, String}}, Float64, Nothing, Bool, Nothing, String})(output::IOStream)\n       @ Downloads ~/repo/julia/usr/share/julia/stdlib/v1.6/Downloads/src/Downloads.jl:220\n     [2] open(f::Downloads.var\"#3#4\"{Nothing, Vector{Pair{String, String}}, Float64, Nothing, Bool, Nothing, String}, args::String; kwargs::Base.Iterators.Pairs{Symbol, Bool, Tuple{Symbol}, NamedTuple{(:write,), Tuple{Bool}}})\n       @ Base ./io.jl:330\n     [3] arg_write(f::Function, arg::String)\n       @ ArgTools ~/repo/julia/usr/share/julia/stdlib/v1.6/ArgTools/src/ArgTools.jl:86\n     [4] #download#2\n       @ ~/repo/julia/usr/share/julia/stdlib/v1.6/Downloads/src/Downloads.jl:208 [inlined]\n     [5] (::var\"#6#8\")()\n       @ Main ./task.jl:406"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"3c063fba-621a-4d13-8615-d2803622b363","type":"message","text":"thanks. So github suddenly doesn’t like something about this. It’s not a julia change","user":"U8MPCDJAY","ts":"1611602429.032200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6px","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks. So github suddenly doesn’t like something about this. It’s not a julia change"}]}]}],"thread_ts":"1611578436.021500","parent_user_id":"U8MPCDJAY"}]