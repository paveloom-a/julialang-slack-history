[{"client_msg_id":"5da5a853-d803-405a-92d6-2622f6b7def5","type":"message","text":"For Pluto, I am planning to a have an isolated package project for each notebook, with the manifest embedded in the notebook file. Two recent comments on the pull request express a concern for “bloat”:\n&gt; <https://github.com/fonsp/Pluto.jl/pull/844#issuecomment-817076975>\n&gt; I’d like to advocate against this use of the `Manifest.toml` as I think this is liable to lead to gigantic bloat in `.julia`’s package version cache, as well as making users unnecessarily encounter pre-compilation much more often.\nI don’t have the intuition needed to judge how much of a problem is (but I do like the idea of using the Manifest). What do you think? I remember talking about this with Stefan and Elliot on our call, but I can’t quite remember the answer.","user":"UUTL3EKN3","ts":"1618049484.191400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZMT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For Pluto, I am planning to a have an isolated package project for each notebook, with the manifest embedded in the notebook file. Two recent comments on the pull request express a concern for “bloat”:\n"}]},{"type":"rich_text_quote","elements":[{"type":"link","url":"https://github.com/fonsp/Pluto.jl/pull/844#issuecomment-817076975"},{"type":"text","text":"\nI’d like to advocate against this use of the "},{"type":"text","text":"Manifest.toml","style":{"code":true}},{"type":"text","text":" as I think this is liable to lead to gigantic bloat in "},{"type":"text","text":".julia","style":{"code":true}},{"type":"text","text":"’s package version cache, as well as making users unnecessarily encounter pre-compilation much more often."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI don’t have the intuition needed to judge how much of a problem is (but I do like the idea of using the Manifest). What do you think? I remember talking about this with Stefan and Elliot on our call, but I can’t quite remember the answer."}]}]}],"thread_ts":"1618049484.191400","reply_count":7,"reply_users_count":3,"latest_reply":"1618062636.193000","reply_users":["UUTL3EKN3","U67SCG4HG","U67D54KS8"],"is_locked":false,"subscribed":false},{"type":"message","subtype":"thread_broadcast","text":"A more concrete question from me would be: “If I add a couple of common packages to a clean environment today, and again 7 days later, will the second environment be very different?”","user":"UUTL3EKN3","ts":"1618049598.191500","thread_ts":"1618049484.191400","root":{"client_msg_id":"5da5a853-d803-405a-92d6-2622f6b7def5","type":"message","text":"For Pluto, I am planning to a have an isolated package project for each notebook, with the manifest embedded in the notebook file. Two recent comments on the pull request express a concern for “bloat”:\n&gt; <https://github.com/fonsp/Pluto.jl/pull/844#issuecomment-817076975>\n&gt; I’d like to advocate against this use of the `Manifest.toml` as I think this is liable to lead to gigantic bloat in `.julia`’s package version cache, as well as making users unnecessarily encounter pre-compilation much more often.\nI don’t have the intuition needed to judge how much of a problem is (but I do like the idea of using the Manifest). What do you think? I remember talking about this with Stefan and Elliot on our call, but I can’t quite remember the answer.","user":"UUTL3EKN3","ts":"1618049484.191400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZMT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For Pluto, I am planning to a have an isolated package project for each notebook, with the manifest embedded in the notebook file. Two recent comments on the pull request express a concern for “bloat”:\n"}]},{"type":"rich_text_quote","elements":[{"type":"link","url":"https://github.com/fonsp/Pluto.jl/pull/844#issuecomment-817076975"},{"type":"text","text":"\nI’d like to advocate against this use of the "},{"type":"text","text":"Manifest.toml","style":{"code":true}},{"type":"text","text":" as I think this is liable to lead to gigantic bloat in "},{"type":"text","text":".julia","style":{"code":true}},{"type":"text","text":"’s package version cache, as well as making users unnecessarily encounter pre-compilation much more often."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI don’t have the intuition needed to judge how much of a problem is (but I do like the idea of using the Manifest). What do you think? I remember talking about this with Stefan and Elliot on our call, but I can’t quite remember the answer."}]}]}],"thread_ts":"1618049484.191400","reply_count":7,"reply_users_count":3,"latest_reply":"1618062636.193000","reply_users":["UUTL3EKN3","U67SCG4HG","U67D54KS8"],"is_locked":false,"subscribed":false},"blocks":[{"type":"rich_text","block_id":"=FP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"A more concrete question from me would be: “If I add a couple of common packages to a clean environment today, and again 7 days later, will the second environment be very different?”"}]}]}],"client_msg_id":"3bd5d6b1-b8c3-4084-afbe-7c9da8dc05fd"},{"client_msg_id":"c42f8555-6006-4bdd-bd91-4df31fb9482e","type":"message","text":"I don't understand why more projects would result in more bloat.","user":"U67SCG4HG","ts":"1618049800.191800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5Wus","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't understand why more projects would result in more bloat."}]}]}],"thread_ts":"1618049484.191400","parent_user_id":"UUTL3EKN3"},{"client_msg_id":"897c25e1-2b0b-49f1-99a2-9036fc0e76b0","type":"message","text":"For the other question: That completely depends on if those common package have made any new releases.","user":"U67SCG4HG","ts":"1618049823.192000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ef0Ds","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For the other question: That completely depends on if those common package have made any new releases."}]}]}],"thread_ts":"1618049484.191400","parent_user_id":"UUTL3EKN3"},{"client_msg_id":"c7610083-3055-40de-84ad-9fa777a1fb32","type":"message","text":"Thanks Fredrik! My second question is mostly asking for your experiences/intuition. I know that e.g. Plots releases a patch every 7 days, but what about the changes to the entire set of indirect dependencies? And is that the right way to think about the “bloat/overhead” question?","user":"UUTL3EKN3","ts":"1618050403.192200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/x9hT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks Fredrik! My second question is mostly asking for your experiences/intuition. I know that e.g. Plots releases a patch every 7 days, but what about the changes to the entire set of indirect dependencies? And is that the right way to think about the “bloat/overhead” question?"}]}]}],"thread_ts":"1618049484.191400","parent_user_id":"UUTL3EKN3"},{"client_msg_id":"a1336aaa-8fb8-410a-891f-b3f89d48af5f","type":"message","text":"&gt; I don’t understand why more projects would result in more bloat.\nMy interpretation of the comment is that you would get more “bloat” if notebooks are created some time apart, and you continue working on both during the next months, hence my second question. But let me know if this concern is invalid.\n\nWe could also solve this by making it easy to update the notebook’s dependencies before running it.","user":"UUTL3EKN3","ts":"1618050585.192400","team":"T68168MUP","edited":{"user":"UUTL3EKN3","ts":"1618050618.000000"},"blocks":[{"type":"rich_text","block_id":"29F","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"I don’t understand why more projects would result in more bloat."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nMy interpretation of the comment is that you would get more “bloat” if notebooks are created some time apart, and you continue working on both during the next months, hence my second question. But let me know if this concern is invalid.\n\nWe could also solve this by making it easy to update the notebook’s dependencies before running it."}]}]}],"thread_ts":"1618049484.191400","parent_user_id":"UUTL3EKN3"},{"client_msg_id":"bd831164-6147-4bda-927b-8ef8105dd351","type":"message","text":"The whole system is designed in a way that having multiple projects should work well. If it doesn't, it is up to us to fix it. As an example, one such fix was <https://github.com/JuliaLang/julia/pull/32651>. I personally don't really worry about any bloatness from storing the manifest inside notebooks as you describe. Most of the versions of common dependencies would be the same and share precompilation files.","user":"U67D54KS8","ts":"1618057707.192700","team":"T68168MUP","edited":{"user":"U67D54KS8","ts":"1618057735.000000"},"blocks":[{"type":"rich_text","block_id":"BFH8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The whole system is designed in a way that having multiple projects should work well. If it doesn't, it is up to us to fix it. As an example, one such fix was "},{"type":"link","url":"https://github.com/JuliaLang/julia/pull/32651"},{"type":"text","text":". I personally don't really worry about any bloatness from storing the manifest inside notebooks as you describe. Most of the versions of common dependencies would be the same and share precompilation files."}]}]}],"thread_ts":"1618049484.191400","parent_user_id":"UUTL3EKN3","reactions":[{"name":"+1","users":["U6A936746"],"count":1},{"name":"100","users":["U6A936746"],"count":1}]},{"client_msg_id":"0eda5c15-cf5c-44b5-ae37-a0c5ef8ea4a5","type":"message","text":"Yea I don't understand the bloat worry at all","user":"U67SCG4HG","ts":"1618062636.193000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"deQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yea I don't understand the bloat worry at all"}]}]}],"thread_ts":"1618049484.191400","parent_user_id":"UUTL3EKN3"}]