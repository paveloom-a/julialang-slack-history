[{"type":"message","text":"Using nightly in VS Code, I frequently see precompile getting stuck with apparently 3 further packages to precompile left, but it doen't say which packages and just freezes with no further output. Any ideas wher to start debugging? A random guess would be that VS Code might load additional packages for the languageserver, that are not in the environment, which might confuse Pkg?","files":[{"id":"F01JLC9KPG9","created":1610046837,"timestamp":1610046837,"name":"Screenshot from 2021-01-07 20-07-55.png","title":"Screenshot from 2021-01-07 20-07-55.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"UM30MT6RF","editable":false,"size":52790,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01JLC9KPG9/screenshot_from_2021-01-07_20-07-55.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01JLC9KPG9/download/screenshot_from_2021-01-07_20-07-55.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01JLC9KPG9-66b333b326/screenshot_from_2021-01-07_20-07-55_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01JLC9KPG9-66b333b326/screenshot_from_2021-01-07_20-07-55_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01JLC9KPG9-66b333b326/screenshot_from_2021-01-07_20-07-55_360.png","thumb_360_w":360,"thumb_360_h":129,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01JLC9KPG9-66b333b326/screenshot_from_2021-01-07_20-07-55_480.png","thumb_480_w":480,"thumb_480_h":172,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01JLC9KPG9-66b333b326/screenshot_from_2021-01-07_20-07-55_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01JLC9KPG9-66b333b326/screenshot_from_2021-01-07_20-07-55_720.png","thumb_720_w":720,"thumb_720_h":258,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01JLC9KPG9-66b333b326/screenshot_from_2021-01-07_20-07-55_800.png","thumb_800_w":800,"thumb_800_h":287,"original_w":823,"original_h":295,"thumb_tiny":"AwARADChnGM5zRn3pmR70E+5oAdn6UbvpTMn1pcn1NACkn1ApOvcUmT60ZPrQAUUUUAFFFFABRRRQB//2Q==","permalink":"https://julialang.slack.com/files/UM30MT6RF/F01JLC9KPG9/screenshot_from_2021-01-07_20-07-55.png","permalink_public":"https://slack-files.com/T68168MUP-F01JLC9KPG9-b55e4ab6a4","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"+XJh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Using nightly in VS Code, I frequently see precompile getting stuck with apparently 3 further packages to precompile left, but it doen't say which packages and just freezes with no further output. Any ideas wher to start debugging? A random guess would be that VS Code might load additional packages for the languageserver, that are not in the environment, which might confuse Pkg?"}]}]}],"user":"UM30MT6RF","display_as_bot":false,"ts":"1610046839.021500","thread_ts":"1610046839.021500","reply_count":18,"reply_users_count":4,"latest_reply":"1610050195.025300","reply_users":["U67SCG4HG","U67D54KS8","UM30MT6RF","U8MPCDJAY"],"subscribed":false},{"client_msg_id":"377dbfea-8826-45ad-84e4-b3654ba35e29","type":"message","text":"<@U8MPCDJAY> ^","user":"U67SCG4HG","ts":"1610047143.021900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XFQC","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U8MPCDJAY"},{"type":"text","text":" ^"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"12e878d5-11cb-40fe-81a8-eec81a065dfc","type":"message","text":"Project and Manifest are helpful to repro","user":"U67D54KS8","ts":"1610047225.022100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qY5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Project and Manifest are helpful to repro"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"d82536e3-578c-4e86-a4b2-699e8b7e53d1","type":"message","text":"My current Manifest is a bit messy, but I think I have seen it with simpler ones before. Will try to reduce it a bit","user":"UM30MT6RF","ts":"1610047951.022300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Eih","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My current Manifest is a bit messy, but I think I have seen it with simpler ones before. Will try to reduce it a bit"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"44cd2145-9304-4be9-a938-07d1f47ab0fb","type":"message","text":"I’ve been meaning to add more debug output to precompile. If I prepared a Pkg PR, would you be able to give it a go?","user":"U8MPCDJAY","ts":"1610048774.022500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yCJC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’ve been meaning to add more debug output to precompile. If I prepared a Pkg PR, would you be able to give it a go?"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"21468540-a3f3-483e-abba-e7bee7b3495c","type":"message","text":"Sure","user":"UM30MT6RF","ts":"1610048790.022700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MJY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sure"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"1fb69f24-71f6-435a-b463-9e3fe00027c7","type":"message","text":"great, thanks","user":"U8MPCDJAY","ts":"1610048797.022900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tOhB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"great, thanks"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"e6d70305-4c7b-426e-8de7-95ad9f82fd9d","type":"message","text":"<https://github.com/JuliaLang/Pkg.jl/pull/2321>","user":"U8MPCDJAY","ts":"1610049502.023100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s7h","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/pull/2321"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"5a83e62b-f431-4334-a5cc-2c0ade7470b8","type":"message","text":"That should give a list of packages, and then the full deps map (which is much busier)","user":"U8MPCDJAY","ts":"1610049532.023300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s=vx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That should give a list of packages, and then the full deps map (which is much busier)"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"8d5040bc-36e8-4476-be49-1d959d3b8b6c","type":"message","text":"and any marked as circular deps","user":"U8MPCDJAY","ts":"1610049566.023500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LeS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and any marked as circular deps"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"2eedbcf9-eb4c-47d8-a9ea-ec503f54d07f","type":"message","text":"I’m hoping it will allow you to identify which packages in the list never get started","user":"U8MPCDJAY","ts":"1610049576.023700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wDrXx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m hoping it will allow you to identify which packages in the list never get started"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"974c2922-ec6a-42f2-a8d3-932321e2ba4b","type":"message","text":"Is the best way to test this to push where I cloned Pkg to onto my LOAD_PATH?","user":"UM30MT6RF","ts":"1610049763.023900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dDa2F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is the best way to test this to push where I cloned Pkg to onto my LOAD_PATH?"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"6a66a61a-79c0-48dc-9587-7cac2f8140c6","type":"message","text":"The way I do it is:\n- change the uuid\n- launch julia from the place I cloned it from with `--project`, then `import Pkg` before any other Pkg operation","user":"U8MPCDJAY","ts":"1610049836.024100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dC=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The way I do it is:\n- change the uuid\n- launch julia from the place I cloned it from with "},{"type":"text","text":"--project","style":{"code":true}},{"type":"text","text":", then "},{"type":"text","text":"import Pkg","style":{"code":true}},{"type":"text","text":" before any other Pkg operation"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"98ceba86-eb61-4789-b5ff-a673e17bfb04","type":"message","text":"but I don’t know about doing that from within vscode","user":"U8MPCDJAY","ts":"1610049849.024300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0dGnb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but I don’t know about doing that from within vscode"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"9768f50a-fa84-4d8d-a874-abf6c4b2ecae","type":"message","text":"oh, and you’ll need to\n`JULIA_DEBUG=Pkg` before load","user":"U8MPCDJAY","ts":"1610049956.024500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0eT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, and you’ll need to\n"},{"type":"text","text":"JULIA_DEBUG=Pkg","style":{"code":true}},{"type":"text","text":" before load"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"c4763c16-7c37-4fde-9ebe-ad0b965d79eb","type":"message","text":"Should be the same in vscod","user":"U67SCG4HG","ts":"1610050114.024700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CzZk+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Should be the same in vscod"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"208fb1d1-6219-4dae-bd28-999ee6c43428","type":"message","text":"But I actually want to activate another environment though","user":"UM30MT6RF","ts":"1610050154.024900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+ZV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But I actually want to activate another environment though"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"7afbe8df-6b3e-4509-98e0-ae0c0a392888","type":"message","text":"You can just do that **after** you have loaded your custom Pkg","user":"U67SCG4HG","ts":"1610050179.025100","team":"T68168MUP","edited":{"user":"U67SCG4HG","ts":"1610050198.000000"},"blocks":[{"type":"rich_text","block_id":"dmB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can just do that *"},{"type":"text","text":"after","style":{"bold":true}},{"type":"text","text":"* you have loaded your custom Pkg"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"},{"client_msg_id":"7718e810-f9e8-4cbe-8a5e-7dcb9c4e1991","type":"message","text":"Ah, I see/ will trz that","user":"UM30MT6RF","ts":"1610050195.025300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YzSk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, I see/ will trz that"}]}]}],"thread_ts":"1610046839.021500","parent_user_id":"UM30MT6RF"}]