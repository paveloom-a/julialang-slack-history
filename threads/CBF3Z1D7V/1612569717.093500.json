[{"client_msg_id":"16134c9d-89d4-44f7-b47c-3c75d2401a7a","type":"message","text":"oh, I was misunderstanding... it seems worse than that, this seems even to be a problem on 1.5, I have CI/CD breaking right now from this","user":"U9VG1AYSG","ts":"1612569717.093500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hyg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, I was misunderstanding... it seems worse than that, this seems even to be a problem on 1.5, I have CI/CD breaking right now from this"}]}]}],"thread_ts":"1612569717.093500","reply_count":25,"reply_users_count":3,"latest_reply":"1612571048.107000","reply_users":["UDB26738Q","U9VG1AYSG","U7THT3TM3"],"subscribed":false},{"client_msg_id":"28242398-3610-4946-99bb-33cadec99d83","type":"message","text":"you can set `JULIA_PKG_SERVER=\"\"` on CI","user":"UDB26738Q","ts":"1612569759.093600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DOtQJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you can set "},{"type":"text","text":"JULIA_PKG_SERVER=\"\"","style":{"code":true}},{"type":"text","text":" on CI"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG","reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"d9bdc81e-3d48-4a44-acca-214135a0ca5e","type":"message","text":"yeah, I just did that","user":"U9VG1AYSG","ts":"1612569914.094600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"495","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, I just did that"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"4F4E7DA3-4663-4138-9980-1644E7252408","type":"message","text":"If you use GitHub Actions and are using the Julia-buildpkg and/or Julia-runtest actions, this is done automatically for you ","user":"U7THT3TM3","ts":"1612569934.095600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PPas","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you use GitHub Actions and are using the Julia-buildpkg and/or Julia-runtest actions, this is done automatically for you "}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"5349ADD0-3C35-424F-AED8-C994EE844E38","type":"message","text":"If you use GitHub Actions but don't use the above actions, currently you need do it manually. ","user":"U7THT3TM3","ts":"1612569955.096600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HRw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you use GitHub Actions but don't use the above actions, currently you need do it manually. "}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"c19f4177-748b-4665-ad05-74f87d2d5047","type":"message","text":"oh? so I guess they don't recommend using Pkg server for CI/CD yet","user":"U9VG1AYSG","ts":"1612569969.096900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aBKzo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh? so I guess they don't recommend using Pkg server for CI/CD yet"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"7b9519bb-4e39-4745-b6f6-ec6d9cdddfa7","type":"message","text":"I was doing it on gitlab","user":"U9VG1AYSG","ts":"1612569973.097100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xyz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was doing it on gitlab"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"039DB061-1D31-4173-A8D2-FA113AE6CA74","type":"message","text":"So, to clarify, we do use Pkg server on GHA","user":"U7THT3TM3","ts":"1612570215.097600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HNst","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So, to clarify, we do use Pkg server on GHA"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"BFB76F79-23BA-4FD3-8058-54E0A54B018F","type":"message","text":"We just clone the General registry over Git","user":"U7THT3TM3","ts":"1612570224.098100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UOik","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We just clone the General registry over Git"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"D2C3F768-990F-468C-AA20-1E194D9EA51C","type":"message","text":"So we get the best of both worlds","user":"U7THT3TM3","ts":"1612570231.098500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KE3s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So we get the best of both worlds"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"23C9F830-4E09-43CF-8420-4C07E9B79C77","type":"message","text":"We clone the General registry over Git, so you always have access to the latest package versions in the General registry","user":"U7THT3TM3","ts":"1612570253.099300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PJTVD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We clone the General registry over Git, so you always have access to the latest package versions in the General registry"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"AA6EE089-D0BE-44AA-8464-FF0285512842","type":"message","text":"But, whenever possible, we still download things from the Pkg server. (If the Pkg server is outdated, then we silently and gracefully fall back to obtaining things from GitHub.)","user":"U7THT3TM3","ts":"1612570286.100600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w7tJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But, whenever possible, we still download things from the Pkg server. (If the Pkg server is outdated, then we silently and gracefully fall back to obtaining things from GitHub.)"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"2daa0952-3c81-47fc-aefd-fe3c6e2b1b34","type":"message","text":"is there a way to use it for packages but not the registry?  would that make sense?  I'd assume there are similar sync issues with packages, but I've only experienced problems with the registry","user":"U9VG1AYSG","ts":"1612570338.100800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uvv2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there a way to use it for packages but not the registry?  would that make sense?  I'd assume there are similar sync issues with packages, but I've only experienced problems with the registry"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"01C93C22-8489-47D9-A79D-78880336108D","type":"message","text":"That's exactly what we do in GHA","user":"U7THT3TM3","ts":"1612570479.101200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A6q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's exactly what we do in GHA"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"411071D2-1845-4687-80DB-DDF76B5F1622","type":"message","text":"See <https://github.com/julia-actions/julia-runtest/pull/17|https://github.com/julia-actions/julia-runtest/pull/17> and <https://github.com/julia-actions/julia-buildpkg/pull/6|https://github.com/julia-actions/julia-buildpkg/pull/6>","user":"U7THT3TM3","ts":"1612570518.101500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cDWx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"See "},{"type":"link","url":"https://github.com/julia-actions/julia-runtest/pull/17","text":"https://github.com/julia-actions/julia-runtest/pull/17"},{"type":"text","text":" and "},{"type":"link","url":"https://github.com/julia-actions/julia-buildpkg/pull/6","text":"https://github.com/julia-actions/julia-buildpkg/pull/6"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"fc36413d-d204-41ec-b320-23490107a914","type":"message","text":"so the sync problems are only happening with the registry?","user":"U9VG1AYSG","ts":"1612570540.102200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+2BW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so the sync problems are only happening with the registry?"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"7569E3E0-6440-494D-96DA-BFB48C08675C","type":"message","text":"That's correct","user":"U7THT3TM3","ts":"1612570548.102500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BMqi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's correct"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"5561C4D0-9C00-4B9D-8098-8342506A203D","type":"message","text":"If the package is available in the registry, then you will get it one way or another","user":"U7THT3TM3","ts":"1612570558.103100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"S6Jz0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If the package is available in the registry, then you will get it one way or another"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"522251A7-FE9D-4A3C-AE84-B84E31EAFAD0","type":"message","text":"This issue only arises if your registry is out of date, which is why I think my PR to Pkg will fix it","user":"U7THT3TM3","ts":"1612570573.103700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"I3Fp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This issue only arises if your registry is out of date, which is why I think my PR to Pkg will fix it"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"6312af69-2040-4d77-8bb0-a908e3a20e21","type":"message","text":"I guess I don't understand how Pkg server works then.  I thought it had to cache everything in order to avoid cloning extra parts of the git tree, but from what you are saying it sounds like it gets the packages from git anyway... unless somehow this bug only affects the registry, maybe because of the large number of files or something","user":"U9VG1AYSG","ts":"1612570632.103900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RZ=tE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess I don't understand how Pkg server works then.  I thought it had to cache everything in order to avoid cloning extra parts of the git tree, but from what you are saying it sounds like it gets the packages from git anyway... unless somehow this bug only affects the registry, maybe because of the large number of files or something"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"06098B52-A376-4847-9C21-8F1A9CB841AF","type":"message","text":"No the Pkg server can become out of date for both registries and packages","user":"U7THT3TM3","ts":"1612570995.104700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pxxsa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No the Pkg server can become out of date for both registries and packages"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"E9CB4F00-E286-4477-8886-CB7F5235F834","type":"message","text":"But the Pkg client is smart","user":"U7THT3TM3","ts":"1612571001.105100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A=u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But the Pkg client is smart"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"3D4BA59D-FE5E-4742-B777-CA0E8C3DC14E","type":"message","text":"If the registry has a version of a package","user":"U7THT3TM3","ts":"1612571007.105500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YhUfC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If the registry has a version of a package"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"DFCBDC3E-1419-410D-8434-6BAE165403D6","type":"message","text":"But the Pkg server does not have it","user":"U7THT3TM3","ts":"1612571011.105800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AUl1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But the Pkg server does not have it"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"B7F13A63-B6BB-4343-BB5D-F336C4B17226","type":"message","text":"Then the Pkg client will clone the package over git, I.e. bypassing the Pkg server","user":"U7THT3TM3","ts":"1612571036.106700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nTi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Then the Pkg client will clone the package over git, I.e. bypassing the Pkg server"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"},{"client_msg_id":"6e6720b7-2e0d-4a6b-b818-47c4888fda2a","type":"message","text":"ohhhh, that makes sense","user":"U9VG1AYSG","ts":"1612571048.107000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"egE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ohhhh, that makes sense"}]}]}],"thread_ts":"1612569717.093500","parent_user_id":"U9VG1AYSG"}]