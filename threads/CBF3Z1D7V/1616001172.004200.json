[{"client_msg_id":"21881729-cdf5-4ddf-be95-c8614dee5137","type":"message","text":"Hey Pkg devs! A few months ago I talked with <@U66GD0880> and <@U6795JH6H> about Pluto’s upcoming built-in package management. By now the base feature set is done, and I am looking for feedback! I made a 6 min video showing the main points: <https://youtu.be/jQEZTZM1GXE> Maybe I can join the next Pkg call to discuss?","user":"UUTL3EKN3","ts":"1616001172.004200","team":"T68168MUP","attachments":[{"service_name":"YouTube","service_url":"https://www.youtube.com/","title":"PlutoPkg demo","title_link":"https://youtu.be/jQEZTZM1GXE","author_name":"Fons van der Plas","author_link":"https://www.youtube.com/c/FonsvanderPlas0","thumb_url":"https://i.ytimg.com/vi/jQEZTZM1GXE/hqdefault.jpg","thumb_width":480,"thumb_height":360,"fallback":"YouTube Video: PlutoPkg demo","video_html":"<iframe width=\"400\" height=\"225\" src=\"https://www.youtube.com/embed/jQEZTZM1GXE?feature=oembed&autoplay=1&iv_load_policy=3\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>","video_html_width":400,"video_html_height":225,"from_url":"https://youtu.be/jQEZTZM1GXE","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/youtube.png","id":1,"original_url":"https://youtu.be/jQEZTZM1GXE"}],"blocks":[{"type":"rich_text","block_id":"CWDsl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey Pkg devs! A few months ago I talked with "},{"type":"user","user_id":"U66GD0880"},{"type":"text","text":" and "},{"type":"user","user_id":"U6795JH6H"},{"type":"text","text":" about Pluto’s upcoming built-in package management. By now the base feature set is done, and I am looking for feedback! I made a 6 min video showing the main points: "},{"type":"link","url":"https://youtu.be/jQEZTZM1GXE"},{"type":"text","text":" Maybe I can join the next Pkg call to discuss?"}]}]}],"thread_ts":"1616001172.004200","reply_count":11,"reply_users_count":5,"latest_reply":"1616026548.010400","reply_users":["UCZ7VBGUD","UUTL3EKN3","U67D54KS8","U6QGE7S86","U66GD0880"],"subscribed":false,"reactions":[{"name":"call_me_hand","users":["UDB26738Q","U7THT3TM3","U6795JH6H","U8MPCDJAY","U66GD0880","U6A936746","U6BNE7LTZ"],"count":7},{"name":"tada","users":["U67BJLYCS","UCZ7VBGUD","U6BNE7LTZ","UM30MT6RF","U6QGE7S86"],"count":5},{"name":"call_me_hand::skin-tone-5","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"ca0da913-f2e3-436d-a051-0f849d9ad1ff","type":"message","text":"I’ve been using the `JULIA_PROJECT` environmental variable to set the pkg environment (instead of `Pkg.activate` in the notebook). Maybe that variable being set could also trigger the opt-out mechanism? (looks amazing btw!)","user":"UCZ7VBGUD","ts":"1616003609.005200","team":"T68168MUP","edited":{"user":"UCZ7VBGUD","ts":"1616003621.000000"},"blocks":[{"type":"rich_text","block_id":"Rce","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’ve been using the "},{"type":"text","text":"JULIA_PROJECT","style":{"code":true}},{"type":"text","text":" environmental variable to set the pkg environment (instead of "},{"type":"text","text":"Pkg.activate","style":{"code":true}},{"type":"text","text":" in the notebook). Maybe that variable being set could also trigger the opt-out mechanism? (looks amazing btw!)"}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3","reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"36c42177-22ef-4e82-96d2-f15a507e6f68","type":"message","text":"<@UCZ7VBGUD> thanks for bringing it up! This definitely needs some thought and I could use some help with the best way to handle all the different ways of setting the environment. :exploding_head:","user":"UUTL3EKN3","ts":"1616015263.006700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dVMF","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UCZ7VBGUD"},{"type":"text","text":" thanks for bringing it up! This definitely needs some thought and I could use some help with the best way to handle all the different ways of setting the environment. "},{"type":"emoji","name":"exploding_head"}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3"},{"client_msg_id":"ab2b7b08-66ef-40d7-aefb-2f75f172b06a","type":"message","text":"Perhaps looking at `Base.active_project()` is possible","user":"U67D54KS8","ts":"1616015442.006900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HwJsM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Perhaps looking at "},{"type":"text","text":"Base.active_project()","style":{"code":true}},{"type":"text","text":" is possible"}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3","reactions":[{"name":"+1","users":["UUTL3EKN3"],"count":1}]},{"client_msg_id":"6b01ef57-0a1f-4434-850c-cb88900a3f41","type":"message","text":"one headache is that you also want to be able to set the server’s environment without affected the notebooks","user":"UUTL3EKN3","ts":"1616015556.007100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"R4N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"one headache is that you also want to be able to set the server’s environment without affected the notebooks"}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3"},{"client_msg_id":"577c818d-649c-428e-bd9e-05b54992ad40","type":"message","text":"The only ways I know to get the project activated on the worker processes that the notebooks run in is to either set the environmental variable or to activate from within the notebook, but there definitely could be other ways... I think maybe you can also set it via `Pluto.Configuration.CompilerOptions(project=\"...\")` ? But that’s inside Pluto already anyway.","user":"UCZ7VBGUD","ts":"1616022285.008100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ERqI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The only ways I know to get the project activated on the worker processes that the notebooks run in is to either set the environmental variable or to activate from within the notebook, but there definitely could be other ways... I think maybe you can also set it via "},{"type":"text","text":"Pluto.Configuration.CompilerOptions(project=\"...\")","style":{"code":true}},{"type":"text","text":" ? But that’s inside Pluto already anyway."}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3"},{"client_msg_id":"41f726f1-8b73-4faa-9bbe-3fa375fcf77d","type":"message","text":"This is really cool <@UUTL3EKN3>! I think I missed it in the video - but how does this format still respect the \"You can run pluto .jl files as normal Julia files\" promise?","user":"U6QGE7S86","ts":"1616026086.009000","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1616026096.000000"},"blocks":[{"type":"rich_text","block_id":"tZB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This is really cool "},{"type":"user","user_id":"UUTL3EKN3"},{"type":"text","text":"! I think I missed it in the video - but how does this format still respect the \"You can run pluto .jl files as normal Julia files\" promise?"}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3"},{"client_msg_id":"b3b0bd7f-935d-464d-b2cb-251f50109302","type":"message","text":"So the official way is to have a cell with\n```begin\nimport Pkg\nPkg.activate(\"...\")\n...\nend```\nwhich also works with the new system. Is this what you meant?\n\nI think you can also set the notebook project using `Pluto.run(project=\"…\")`, but this has the disadvantage that the notebook is no longer self-contained, you now also need to store/share the script to run the notebook.","user":"UUTL3EKN3","ts":"1616026097.009300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uND","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So the official way is to have a cell with\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"begin\nimport Pkg\nPkg.activate(\"...\")\n...\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"which also works with the new system. Is this what you meant?\n\nI think you can also set the notebook project using "},{"type":"text","text":"Pluto.run(project=\"…\")","style":{"code":true}},{"type":"text","text":", but this has the disadvantage that the notebook is no longer self-contained, you now also need to store/share the script to run the notebook."}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3"},{"client_msg_id":"25078d0e-a19e-4dd6-8ff1-c6f8d991c042","type":"message","text":"<@U6QGE7S86> yes and no, the notebook is still a legal .jl file that you can run, and just like today, it needs extra care to get the packages working","user":"UUTL3EKN3","ts":"1616026156.009500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1UI9","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6QGE7S86"},{"type":"text","text":" yes and no, the notebook is still a legal .jl file that you can run, and just like today, it needs extra care to get the packages working"}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3","reactions":[{"name":"+1::skin-tone-5","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"6c3fc03c-9141-4548-a0f5-5d45be6c0116","type":"message","text":"Ah gotcha. Thanks!","user":"U6QGE7S86","ts":"1616026186.009700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZkFi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah gotcha. Thanks!"}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3"},{"client_msg_id":"07583b77-deb1-4304-bd5c-52661f0ba68b","type":"message","text":"now that you mention it, at the bottom of the PR I wrote about a function that activates a notebook file as if it were a package environment. That would also let you include a notebook file with its packages loaded correctly. I’ll experiment with this!","user":"UUTL3EKN3","ts":"1616026269.010000","team":"T68168MUP","edited":{"user":"UUTL3EKN3","ts":"1616026335.000000"},"blocks":[{"type":"rich_text","block_id":"YKB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"now that you mention it, at the bottom of the PR I wrote about a function that activates a notebook file as if it were a package environment. That would also let you include a notebook file with its packages loaded correctly. I’ll experiment with this!"}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3","reactions":[{"name":"100","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"44fb95ad-dc3f-40fa-9296-a949b66636c6","type":"message","text":"IMO it wouldn’t be too bad to have a “pluto-managed’ notebook do some magic to activate itself as an environment when run as a `.jl` file.","user":"U66GD0880","ts":"1616026548.010400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2utVu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"IMO it wouldn’t be too bad to have a “pluto-managed’ notebook do some magic to activate itself as an environment when run as a "},{"type":"text","text":".jl","style":{"code":true}},{"type":"text","text":" file."}]}]}],"thread_ts":"1616001172.004200","parent_user_id":"UUTL3EKN3"}]