[{"client_msg_id":"6132b00b-94ed-401c-8395-b68a46cd5b04","type":"message","text":"I'm working on a builder for a project that uses `libgomp` so I am trying to add `CompilerSupportLibraries` but I can't get it to actually download when the wizard sets up the environment. Is there some trick I am missing? I have tried even adding it to the `Project.toml` before even entering the wizard but still gives the red arrow.\n```\t\t\t# Step 3: Build for Linux x86_64 {libc=glibc}\n\nYou will now be dropped into the cross-compilation environment.\nPlease compile the package. Your initial compilation target is x86_64-linux-gnu\nThe $prefix environment variable contains the target directory.\nOnce you are done, exit by typing `exit` or `^D`\n\n   Resolving package versions...\n    Updating `/tmp/jl_ZoBwfE/4ZZ5g0G6/x86_64-linux-gnu-libgfortran3-cxx03/.project/Project.toml`\n  [bc6bbf8a] + Eigen_jll v3.3.7+1\n  [48b6455b] + FLANN_jll v1.9.1+0\n  [28df3c45] + boost_jll v1.71.0+3\n→ [e66e0078] + CompilerSupportLibraries_jll v0.4.0+1\n        Info packages marked with → not downloaded, use `instantiate` to download\n    Updating `/tmp/jl_ZoBwfE/4ZZ5g0G6/x86_64-linux-gnu-libgfortran3-cxx03/.project/Manifest.toml`\n...```","user":"UQYEMLNQ4","ts":"1618084485.282700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xIPoX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm working on a builder for a project that uses "},{"type":"text","text":"libgomp","style":{"code":true}},{"type":"text","text":" so I am trying to add "},{"type":"text","text":"CompilerSupportLibraries","style":{"code":true}},{"type":"text","text":" but I can't get it to actually download when the wizard sets up the environment. Is there some trick I am missing? I have tried even adding it to the "},{"type":"text","text":"Project.toml","style":{"code":true}},{"type":"text","text":" before even entering the wizard but still gives the red arrow.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\t\t\t# Step 3: Build for Linux x86_64 {libc=glibc}\n\nYou will now be dropped into the cross-compilation environment.\nPlease compile the package. Your initial compilation target is x86_64-linux-gnu\nThe $prefix environment variable contains the target directory.\nOnce you are done, exit by typing `exit` or `^D`\n\n   Resolving package versions...\n    Updating `/tmp/jl_ZoBwfE/4ZZ5g0G6/x86_64-linux-gnu-libgfortran3-cxx03/.project/Project.toml`\n  [bc6bbf8a] + Eigen_jll v3.3.7+1\n  [48b6455b] + FLANN_jll v1.9.1+0\n  [28df3c45] + boost_jll v1.71.0+3\n→ [e66e0078] + CompilerSupportLibraries_jll v0.4.0+1\n        Info packages marked with → not downloaded, use `instantiate` to download\n    Updating `/tmp/jl_ZoBwfE/4ZZ5g0G6/x86_64-linux-gnu-libgfortran3-cxx03/.project/Manifest.toml`\n..."}]}]}],"thread_ts":"1618084485.282700","reply_count":12,"reply_users_count":2,"latest_reply":"1618089894.285500","reply_users":["UDB26738Q","UQYEMLNQ4"],"is_locked":false,"subscribed":false},{"client_msg_id":"0bb68485-3748-4230-b21c-a3142535a308","type":"message","text":"julia v1.6.0?  `CompilerSupportLibraries_jll` is a JLL now","user":"UDB26738Q","ts":"1618084555.283100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vZAgW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"julia v1.6.0?  "},{"type":"text","text":"CompilerSupportLibraries_jll","style":{"code":true}},{"type":"text","text":" is a JLL now"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"3817f3f4-2dab-41c0-a71f-a59005f8199a","type":"message","text":"correct, `1.6.0` with the project and manifest from the .ci dir from yggdrasil.","user":"UQYEMLNQ4","ts":"1618084690.283500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SFUQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"correct, "},{"type":"text","text":"1.6.0","style":{"code":true}},{"type":"text","text":" with the project and manifest from the .ci dir from yggdrasil."}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"e6eb79b0-80f5-4161-9459-08eefc231855","type":"message","text":"ok, so I don't think that warning is worrying, it should be normal","user":"UDB26738Q","ts":"1618084726.283700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nlyUx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, so I don't think that warning is worrying, it should be normal"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"36075216-02f6-48ed-a32a-6b75aadd981b","type":"message","text":"How do I get it to instantiate though? Do I have to add then instantiate outside the wizard to pre-download? Otherwise I get a ton of CMake warnings about something runtime libraries (forgot to copy paste warning messages)","user":"UQYEMLNQ4","ts":"1618084968.283900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7a/AZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How do I get it to instantiate though? Do I have to add then instantiate outside the wizard to pre-download? Otherwise I get a ton of CMake warnings about something runtime libraries (forgot to copy paste warning messages)"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"e5a2d5e3-1005-4348-aa1f-cfebade7865c","type":"message","text":"I don't get it why it's a problem :thinking_face:","user":"UDB26738Q","ts":"1618085699.284100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d5ga","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't get it why it's a problem "},{"type":"emoji","name":"thinking_face"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"bb3c2def-d924-42b2-9da1-9ba887960458","type":"message","text":"I am getting a bunch of cmake warnings like:\n\n```-- Configuring done\nCMake Warning at cmake/pcl_targets.cmake:222 (add_library):\n  Cannot generate a safe runtime search path for target pcl_common because\n  files in some directories may conflict with libraries in implicit\n  directories:\n\n    runtime library [libgomp.so.1] in /opt/x86_64-linux-gnu/x86_64-linux-gnu/lib64 may be hidden by files in:\n      /opt/x86_64-linux-gnu/x86_64-linux-gnu/sys-root/usr/local/lib\n\n  Some of these libraries may not be found correctly.\nCall Stack (most recent call first):\n  common/CMakeLists.txt:176 (PCL_ADD_LIBRARY)```\nand I thought CSL was needed to point to the correct `libgomp` or is there another way?","user":"UQYEMLNQ4","ts":"1618086922.284300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dPpB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am getting a bunch of cmake warnings like:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"-- Configuring done\nCMake Warning at cmake/pcl_targets.cmake:222 (add_library):\n  Cannot generate a safe runtime search path for target pcl_common because\n  files in some directories may conflict with libraries in implicit\n  directories:\n\n    runtime library [libgomp.so.1] in /opt/x86_64-linux-gnu/x86_64-linux-gnu/lib64 may be hidden by files in:\n      /opt/x86_64-linux-gnu/x86_64-linux-gnu/sys-root/usr/local/lib\n\n  Some of these libraries may not be found correctly.\nCall Stack (most recent call first):\n  common/CMakeLists.txt:176 (PCL_ADD_LIBRARY)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and I thought CSL was needed to point to the correct "},{"type":"text","text":"libgomp","style":{"code":true}},{"type":"text","text":" or is there another way?"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"60c87dc1-7d77-4413-8933-e4fea0ed1231","type":"message","text":"CSL is really needed only for runtime, those libraries are always there in the build environment","user":"UDB26738Q","ts":"1618087029.284500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DCr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"CSL is really needed only for runtime, those libraries are always there in the build environment"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"e2957d06-2d6e-4167-a51b-07df1a38efde","type":"message","text":"```% julia -e 'using BinaryBuilderBase; BinaryBuilderBase.runshell(Platform(\"x86_64\", \"linux\"); verbose=false)'    \nsandbox:${WORKSPACE} # qfind /opt/${target} -name \"libgomp*.so\"\n/opt/x86_64-linux-gnu/x86_64-linux-gnu/lib64/libgomp.so```","user":"UDB26738Q","ts":"1618087144.284700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wpt","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"% julia -e 'using BinaryBuilderBase; BinaryBuilderBase.runshell(Platform(\"x86_64\", \"linux\"); verbose=false)'    \nsandbox:${WORKSPACE} # qfind /opt/${target} -name \"libgomp*.so\"\n/opt/x86_64-linux-gnu/x86_64-linux-gnu/lib64/libgomp.so"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"2fc706b4-4aef-4f13-b61d-f9649f497904","type":"message","text":"ahh ok I see now. Should I be deleting one of the `libgomp` then like the `libexpat` issue to correct that?","user":"UQYEMLNQ4","ts":"1618087593.284900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"K4wQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ahh ok I see now. Should I be deleting one of the "},{"type":"text","text":"libgomp","style":{"code":true}},{"type":"text","text":" then like the "},{"type":"text","text":"libexpat","style":{"code":true}},{"type":"text","text":" issue to correct that?"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"4daa0299-b4a0-4709-a566-9ae1e060bff3","type":"message","text":"uhm, this should be the only one good `libgomp` in the environment","user":"UDB26738Q","ts":"1618087755.285100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OdL2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"uhm, this should be the only one good "},{"type":"text","text":"libgomp","style":{"code":true}},{"type":"text","text":" in the environment"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"f3cc670a-1c5f-4c67-a019-02a9ecf3e6c4","type":"message","text":"The `/opt/x86_64-linux-gnu/x86_64-linux-gnu/sys-root/usr/local` path that it is complaining about is a symlink to `/workspace/destdir` and I have 3 `libgomp` in there (libgomp.so,\nlibgomp.so.1,\nlibgomp.so.1.0.0). Should I not have any in there?","user":"UQYEMLNQ4","ts":"1618089358.285300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"g6C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The "},{"type":"text","text":"/opt/x86_64-linux-gnu/x86_64-linux-gnu/sys-root/usr/local","style":{"code":true}},{"type":"text","text":" path that it is complaining about is a symlink to "},{"type":"text","text":"/workspace/destdir","style":{"code":true}},{"type":"text","text":" and I have 3 "},{"type":"text","text":"libgomp","style":{"code":true}},{"type":"text","text":" in there (libgomp.so,\nlibgomp.so.1,\nlibgomp.so.1.0.0). Should I not have any in there?"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"3d3b00c5-4d5d-4ae7-9860-20311d2078af","type":"message","text":"Uhm, it's probably easier if you can open a pull request with wathever you have now, I'm not really sure what's going on","user":"UDB26738Q","ts":"1618089894.285500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Nm7W","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Uhm, it's probably easier if you can open a pull request with wathever you have now, I'm not really sure what's going on"}]}]}],"thread_ts":"1618084485.282700","parent_user_id":"UQYEMLNQ4"}]