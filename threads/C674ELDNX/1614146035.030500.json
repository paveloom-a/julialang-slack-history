[{"client_msg_id":"468e2549-0a2a-4379-a2dc-8c2f894ca30c","type":"message","text":"The Great Apple Silicon Party is finally upon us (gasp!).  I can build Julia and try to install packages and it all works…. except for the fact that very, very few JLLs are actually built for Apple Silicon.  It’s time to figure out how to build things for apple silicon by default.\n\nThe only complicating factor is that any JLL that supports apple silicon will need to be Julia 1.6+, since it generates `Artifacts.toml` files that are illegal.  Absent a clever workaround for that issue, I think the best path forward is as follows:\n\n* Change `supported_platforms()` in BB to include `armv6l` and `aarch64-darwin` in the list by default.\n* Set BB to default `julia_compat` to `1.6+`.\n* Rebuild a lot of stuff","user":"U66GD0880","ts":"1614146035.030500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1qE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The Great Apple Silicon Party is finally upon us (gasp!).  I can build Julia and try to install packages and it all works…. except for the fact that very, very few JLLs are actually built for Apple Silicon.  It’s time to figure out how to build things for apple silicon by default.\n\nThe only complicating factor is that any JLL that supports apple silicon will need to be Julia 1.6+, since it generates "},{"type":"text","text":"Artifacts.toml","style":{"code":true}},{"type":"text","text":" files that are illegal.  Absent a clever workaround for that issue, I think the best path forward is as follows:\n\n* Change "},{"type":"text","text":"supported_platforms()","style":{"code":true}},{"type":"text","text":" in BB to include "},{"type":"text","text":"armv6l","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"aarch64-darwin","style":{"code":true}},{"type":"text","text":" in the list by default.\n* Set BB to default "},{"type":"text","text":"julia_compat","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"1.6+","style":{"code":true}},{"type":"text","text":".\n* Rebuild a lot of stuff"}]}]}],"thread_ts":"1614146035.030500","reply_count":15,"reply_users_count":5,"latest_reply":"1614698432.127000","reply_users":["UCTJ1TGBV","UDB26738Q","U012FH66MFW","U66GD0880","U679T6QF7"],"subscribed":false,"reactions":[{"name":"apple","users":["U66GD0880","U66SR8JHX","UGU761DU2"],"count":3},{"name":"arrow_right","users":["U66GD0880","U66SR8JHX","UGU761DU2"],"count":3},{"name":"green_apple","users":["U66GD0880","U66SR8JHX","UGU761DU2"],"count":3},{"name":"clapping","users":["UCTJ1TGBV","U66SGEWAC","U6G4M02N4","UGU761DU2"],"count":4},{"name":"+1","users":["U680THK2S","U66SR8JHX","U012FH66MFW","U6G4M02N4","UGU761DU2","U679T6QF7"],"count":6}]},{"client_msg_id":"64be1cc1-d091-4b4d-b13b-ce53aa4318ec","type":"message","text":"How does the performance feel?","user":"UCTJ1TGBV","ts":"1614147381.031300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5UXsZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How does the performance feel?"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"c2b19f24-eabd-404b-8891-68f38bf2b690","type":"message","text":"Rebuilding is going to be complicated... The version number must change and not all users may be happy to not support older versions...","user":"UDB26738Q","ts":"1614158715.032500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"b4Hds","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Rebuilding is going to be complicated... The version number must change and not all users may be happy to not support older versions..."}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"f90f9f7c-2ba5-446f-ba9d-d0ef2932367e","type":"message","text":"perhaps we can for a time using something similar to what I did for the CxxWrap using JLLs: offer two versions, one which has compat Julia &lt; 1.6 and no Apple Silion, and another which has compat Julia &gt;= 1.6 and has it?","user":"U012FH66MFW","ts":"1614174764.033400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ULRK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"perhaps we can for a time using something similar to what I did for the CxxWrap using JLLs: offer two versions, one which has compat Julia < 1.6 and no Apple Silion, and another which has compat Julia >= 1.6 and has it?"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"f5b9c4b1-2b8a-4bad-bc7b-5d9da0e0c1ed","type":"message","text":"perhaps one can add even some infrastructure (somewhere?!?) to make this less work / less painful ...","user":"U012FH66MFW","ts":"1614174811.033600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oGK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"perhaps one can add even some infrastructure (somewhere?!?) to make this less work / less painful ..."}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880","reactions":[{"name":"+1","users":["UDB26738Q"],"count":1}]},{"client_msg_id":"edb81560-eee8-4736-b8ae-dc89921f063b","type":"message","text":"might not be worth it, though, just waned to mentionit","user":"U012FH66MFW","ts":"1614174820.033800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iWGif","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"might not be worth it, though, just waned to mentionit"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"db752900-b183-41c4-99d4-76b9602636da","type":"message","text":"I'll switch to Julia 1.6 ASAP (but not all my users will be able to do so)","user":"U012FH66MFW","ts":"1614174830.034000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oSBFB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'll switch to Julia 1.6 ASAP (but not all my users will be able to do so)"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"33a3ede2-61cf-49c2-85cf-4de7f6becbb7","type":"message","text":"Starting from new packages is a good option (as long as dependencies are already available for the new platforms)","user":"UDB26738Q","ts":"1614195687.034200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5Rce","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Starting from new packages is a good option (as long as dependencies are already available for the new platforms)"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"7424ece4-7c6d-4b8c-ab5b-37a1ca33d162","type":"message","text":"<https://github.com/JuliaPackaging/BinaryBuilder.jl/pull/1020> this should at least prevent some foot shooting until we have better tooling to handle this","user":"UDB26738Q","ts":"1614206451.034500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oSk","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaPackaging/BinaryBuilder.jl/pull/1020"},{"type":"text","text":" this should at least prevent some foot shooting until we have better tooling to handle this"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"a58229a8-6448-47c6-bffd-486aedf47c5c","type":"message","text":"we can release openspecfun 0.5.4 and build it in Yggdrasil for the new platforms: <https://github.com/JuliaMath/openspecfun/compare/v0.5.3...master>.  `OpenSpecFun_jll` has 1149 dependents: <https://juliahub.com/ui/Packages/OpenSpecFun_jll/TDl1L/0.5.3+4?t=2>","user":"UDB26738Q","ts":"1614210633.034700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WJLV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"we can release openspecfun 0.5.4 and build it in Yggdrasil for the new platforms: "},{"type":"link","url":"https://github.com/JuliaMath/openspecfun/compare/v0.5.3...master"},{"type":"text","text":".  "},{"type":"text","text":"OpenSpecFun_jll","style":{"code":true}},{"type":"text","text":" has 1149 dependents: "},{"type":"link","url":"https://juliahub.com/ui/Packages/OpenSpecFun_jll/TDl1L/0.5.3+4?t=2"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880","reactions":[{"name":"+1","users":["U66GD0880"],"count":1}]},{"client_msg_id":"d822ebc9-f09a-4956-b7d2-7113ba0bc264","type":"message","text":"I think it would be nice if along with Mosè’s PR, we have a check in BB to see if we are only bumping a build number, and if we are, check to ensure that the generated project info is _exactly_ the same as the old one; e.g. no changing `compat`, no changing dependencies, etc…","user":"U66GD0880","ts":"1614211299.035000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=sP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think it would be nice if along with Mosè’s PR, we have a check in BB to see if we are only bumping a build number, and if we are, check to ensure that the generated project info is "},{"type":"text","text":"exactly","style":{"italic":true}},{"type":"text","text":" the same as the old one; e.g. no changing "},{"type":"text","text":"compat","style":{"code":true}},{"type":"text","text":", no changing dependencies, etc…"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"17234775-fb22-4190-908f-fc1d82f1e977","type":"message","text":"if it’s not exactly the same, we should refuse to build","user":"U66GD0880","ts":"1614211306.035200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EXwAi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if it’s not exactly the same, we should refuse to build"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"a1317a07-1f16-4441-b93c-3317a1291f7d","type":"message","text":"Is there an issue for this? It would be nice to be able to reference such an issue for one off requests like this: <https://github.com/JuliaIO/CodecLz4.jl/issues/34>","user":"U679T6QF7","ts":"1614697408.126300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CnIBZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there an issue for this? It would be nice to be able to reference such an issue for one off requests like this: "},{"type":"link","url":"https://github.com/JuliaIO/CodecLz4.jl/issues/34"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"ce0e6e3e-0775-4052-9fd6-e34f07b831e3","type":"message","text":"no, not yet","user":"UDB26738Q","ts":"1614697490.126500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f2O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, not yet"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"9a0ca9ce-504f-4507-ae49-f0a9f871a502","type":"message","text":"for the specific case, we can build v1.9.3 for the new platforms (but require at least Julia v1.6)","user":"UDB26738Q","ts":"1614697774.126700","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1614697789.000000"},"blocks":[{"type":"rich_text","block_id":"z8u9h","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for the specific case, we can build v1.9.3 for the new platforms (but require at least Julia v1.6)"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880"},{"client_msg_id":"4adc9f68-6f8a-4afe-a220-bf8e94b0cc2b","type":"message","text":"(as long as you're happy to have new builds only for Julia v1.6+)","user":"UDB26738Q","ts":"1614698432.127000","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1614698441.000000"},"blocks":[{"type":"rich_text","block_id":"q=DG5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(as long as you're happy to have new builds only for Julia v1.6+)"}]}]}],"thread_ts":"1614146035.030500","parent_user_id":"U66GD0880","reactions":[{"name":"+1","users":["U679T6QF7"],"count":1}]}]