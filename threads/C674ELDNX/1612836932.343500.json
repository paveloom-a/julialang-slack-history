[{"client_msg_id":"6db6cd40-235a-4b5e-a907-ca88d6622065","type":"message","text":"so the ZeroMQ_jll archive I got is using the wrong API :confused:","user":"U67BJLYCS","ts":"1612836932.343500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"izZP3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so the ZeroMQ_jll archive I got is using the wrong API "},{"type":"emoji","name":"confused"}]}]}],"thread_ts":"1612836932.343500","reply_count":29,"reply_users_count":3,"latest_reply":"1612839276.350400","reply_users":["UDB26738Q","U67BJLYCS","U66GD0880"],"subscribed":false},{"client_msg_id":"02a72b21-c11f-4b46-aa9a-2b02650695ed","type":"message","text":"Why? It's not infrequent that we need to manually pass `-Wl,-rpath-link=...`. Honestly, I've never got why we have to do that manually, from time to time","user":"UDB26738Q","ts":"1612837298.344600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PB/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Why? It's not infrequent that we need to manually pass "},{"type":"text","text":"-Wl,-rpath-link=...","style":{"code":true}},{"type":"text","text":". Honestly, I've never got why we have to do that manually, from time to time"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"1303f0ae-30fb-41cb-8094-eafce0e4be19","type":"message","text":"ah first time for me","user":"U67BJLYCS","ts":"1612837431.344800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WG+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah first time for me"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"b707e19d-811d-4977-9e5b-1e4d051d1cf9","type":"message","text":"<https://github.com/JuliaPackaging/Yggdrasil/blob/be205597f9793b11705c654bde7a4343bbbc8a1e/A/Arpack/build_tarballs.jl#L16|https://github.com/JuliaPackaging/Yggdrasil/blob/be205597f9793b11705c654bde7a4343bbbc8a1e/A/Arpack/build_tarballs.jl#L16>","user":"UDB26738Q","ts":"1612837548.345000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ETa","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/blob/be205597f9793b11705c654bde7a4343bbbc8a1e/A/Arpack/build_tarballs.jl#L16","text":"https://github.com/JuliaPackaging/Yggdrasil/blob/be205597f9793b11705c654bde7a4343bbbc8a1e/A/Arpack/build_tarballs.jl#L16"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"ac33352e-3a3e-4b47-94af-562477de5443","type":"message","text":"Well, maybe it is infrequent, but sometimes it happens. Not frequently enough to bother me to investigate though","user":"UDB26738Q","ts":"1612837603.345200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+mrZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, maybe it is infrequent, but sometimes it happens. Not frequently enough to bother me to investigate though"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"7bbdf834-9c40-4517-9362-feb5520cfc1b","type":"message","text":":heart:","user":"U67BJLYCS","ts":"1612837629.345400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rW+","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"heart"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"1353aded-4a33-4a35-9e72-2cdd565e9fad","type":"message","text":"the reason is that the compiler linker doesn’t honor transitive rpaths","user":"U66GD0880","ts":"1612837814.345600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"I4V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the reason is that the compiler linker doesn’t honor transitive rpaths"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"49df6e28-02ce-44df-97e7-0fddb0dd01e7","type":"message","text":"so you build lib A, then build lib B that links against lib A, and you embed an RPATH into B that correctly points to A","user":"U66GD0880","ts":"1612837836.345800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KHG7K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so you build lib A, then build lib B that links against lib A, and you embed an RPATH into B that correctly points to A"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"f3f3f5e5-0032-4458-ace1-c42584482013","type":"message","text":"but when you build C that links against B, it can’t find A because it doesn’t look up the rpath inside of B to find A","user":"U66GD0880","ts":"1612837849.346000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PGLnd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but when you build C that links against B, it can’t find A because it doesn’t look up the rpath inside of B to find A"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"fa583bbb-f030-4c60-bbe9-cd7595a0d94a","type":"message","text":"so you have to provide the path to A when you build C","user":"U66GD0880","ts":"1612837857.346200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KVq0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so you have to provide the path to A when you build C"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"941e1308-f7fb-4dec-8819-e9bb508edacd","type":"message","text":"I think this happens when we build C libraries linking to C++ libraries? The compiler would not look for libstdc++ at the link stage because it doesn't know it needs it for the dependency","user":"UDB26738Q","ts":"1612838014.346400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l3Ebl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think this happens when we build C libraries linking to C++ libraries? The compiler would not look for libstdc++ at the link stage because it doesn't know it needs it for the dependency"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"ae328536-905a-4f73-8396-080af0ca13f6","type":"message","text":"But can't we somehow push that directory in the default rpath-link?","user":"UDB26738Q","ts":"1612838069.346600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V2qr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But can't we somehow push that directory in the default rpath-link?"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"14f91ca6-59fa-4c2d-9967-6d53ed2c5cd7","type":"message","text":"Hmmm, yeah, actually we could","user":"U66GD0880","ts":"1612838224.346800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yEeg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmmm, yeah, actually we could"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"a61869ff-8dca-47b1-ae7a-35d712b951b0","type":"message","text":"we could just add `-Wl,rpath-link,$(libstdcxx_dir)` inside the `g++` wrapper","user":"U66GD0880","ts":"1612838251.347000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"utY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"we could just add "},{"type":"text","text":"-Wl,rpath-link,$(libstdcxx_dir)","style":{"code":true}},{"type":"text","text":" inside the "},{"type":"text","text":"g++","style":{"code":true}},{"type":"text","text":" wrapper"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"c666d3c9-05fc-4ebc-8654-c94472e65571","type":"message","text":"that should be totally harmless","user":"U66GD0880","ts":"1612838255.347200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xoh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that should be totally harmless"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"ec3526de-4b07-4ff6-aff5-6084ba2414d2","type":"message","text":"(famous last words)","user":"U66GD0880","ts":"1612838277.347400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5YPoh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(famous last words)"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"cf05bf49-d8cc-4550-b193-5016749de180","type":"message","text":"Maybe in gcc?","user":"UDB26738Q","ts":"1612838348.347600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zbpg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe in gcc?"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"8040ce10-b5d9-4c59-810e-177551fa5b79","type":"message","text":"Since this happens when linking C objects","user":"UDB26738Q","ts":"1612838400.347800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"K2=4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Since this happens when linking C objects"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"C4D7BD16-D8A8-4E9D-B864-30ED12A57206","type":"message","text":"Sorry, that’s what I meant. In gcc. ","user":"U66GD0880","ts":"1612838536.348200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j6Ec0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sorry, that’s what I meant. In gcc. "}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"191d285f-3508-4534-8504-575c96a40617","type":"message","text":"For ntohll and htonll: <https://github.com/PDAL/PDAL/pull/3326|https://github.com/PDAL/PDAL/pull/3326>","user":"UDB26738Q","ts":"1612838913.348400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TVhOr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For ntohll and htonll: "},{"type":"link","url":"https://github.com/PDAL/PDAL/pull/3326","text":"https://github.com/PDAL/PDAL/pull/3326"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"ae2f8bfc-1da2-4e8a-b261-d5cc4d4ebe73","type":"message","text":":confused:","user":"U67BJLYCS","ts":"1612838945.348600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xpHVw","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"confused"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"84bb30d6-682f-4db8-95c9-6cbe83fb647b","type":"message","text":"thanks for the hint","user":"U67BJLYCS","ts":"1612839053.348800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"142u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks for the hint"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"62417070-7139-4d83-9100-7fc9954a8fb6","type":"message","text":"<https://github.com/zeromq/czmq/blob/7f744f730941dc8ca68750cd977a38a655d1a646/src/zosc.c#L22>","user":"U67BJLYCS","ts":"1612839155.349000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MVL7I","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/zeromq/czmq/blob/7f744f730941dc8ca68750cd977a38a655d1a646/src/zosc.c#L22"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"b306b9f3-eef8-47ff-9651-0fcedd802134","type":"message","text":"It's in msvc probably","user":"UDB26738Q","ts":"1612839180.349200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CSM8K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's in msvc probably"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"7891d115-b210-4569-818c-74dfcf5cbc47","type":"message","text":"But those functions aren't standard and mingw likes standards very much","user":"UDB26738Q","ts":"1612839210.349400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FyyC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But those functions aren't standard and mingw likes standards very much"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"603a3b5b-a261-4a52-81c2-1e1810d7b91b","type":"message","text":"yeah the question is are those in the winsock2.h","user":"U67BJLYCS","ts":"1612839244.349600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6vTxR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah the question is are those in the winsock2.h"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"4a92057c-a103-4f54-bae8-f0a07db18256","type":"message","text":"I don't think so","user":"UDB26738Q","ts":"1612839261.349800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5D61","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think so"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"3cbc762c-0315-48b8-88f3-4d9577fa05a2","type":"message","text":"<https://docs.microsoft.com/en-us/windows/win32/api/winsock2/>","user":"U67BJLYCS","ts":"1612839267.350000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SIH","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://docs.microsoft.com/en-us/windows/win32/api/winsock2/"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"9906db85-436a-4676-af72-689d4ad6b5e0","type":"message","text":"has `htonll`","user":"U67BJLYCS","ts":"1612839274.350200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pjb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"has "},{"type":"text","text":"htonll","style":{"code":true}}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"cec64007-f2c2-49d3-a230-ea1bfb05702a","type":"message","text":"(not at the computer)","user":"UDB26738Q","ts":"1612839276.350400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ye0/i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(not at the computer)"}]}]}],"thread_ts":"1612836932.343500","parent_user_id":"U67BJLYCS"}]