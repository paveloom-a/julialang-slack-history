[{"client_msg_id":"c57c14fa-0957-48b1-a650-ee109c2cf326","type":"message","text":"I am slightly confused by the `dont_dlopen` flag now: I think at some point I added it to our `LibraryProduct`s because the auditor would refuse them otherwise. But at julia-runtime in the jll the library was loaded fine. Now it seems `dont_dlopen` also affects the resulting `_jll` and the library is not loaded anymore which causes another jll that depends on it to fail to load as this one doesn't have `dont_dlopen`.\nI get the following error (the corresponding version is yanked now):\n```julia&gt; using polymake_jll\njulia&gt; using libpolymake_julia_jll\nERROR: InitError: could not load library \"/software/julia/depots/julia-153/artifacts/eb5cd45d7e62284ad0eaba0329c8319989a22c4d/lib/libpolymake_julia.so\"\nlibpolymake.so.4.3: cannot open shared object file: No such file or directory```\n`libpolymake_julia_jll` depends on `polymake_jll` (which provides `libpolymake.so` but with `dont_dlopen`)\ndlopen'ing that library manually with the full path (`polymake_jll.libpolymake_path`) does work fine though.\nAny suggestions?","user":"U01CH05FTMM","ts":"1613398298.444700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"M4XkS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am slightly confused by the "},{"type":"text","text":"dont_dlopen","style":{"code":true}},{"type":"text","text":" flag now: I think at some point I added it to our `LibraryProduct`s because the auditor would refuse them otherwise. But at julia-runtime in the jll the library was loaded fine. Now it seems "},{"type":"text","text":"dont_dlopen","style":{"code":true}},{"type":"text","text":" also affects the resulting "},{"type":"text","text":"_jll","style":{"code":true}},{"type":"text","text":" and the library is not loaded anymore which causes another jll that depends on it to fail to load as this one doesn't have "},{"type":"text","text":"dont_dlopen","style":{"code":true}},{"type":"text","text":".\nI get the following error (the corresponding version is yanked now):\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using polymake_jll\njulia> using libpolymake_julia_jll\nERROR: InitError: could not load library \"/software/julia/depots/julia-153/artifacts/eb5cd45d7e62284ad0eaba0329c8319989a22c4d/lib/libpolymake_julia.so\"\nlibpolymake.so.4.3: cannot open shared object file: No such file or directory"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"libpolymake_julia_jll","style":{"code":true}},{"type":"text","text":" depends on "},{"type":"text","text":"polymake_jll","style":{"code":true}},{"type":"text","text":" (which provides "},{"type":"text","text":"libpolymake.so","style":{"code":true}},{"type":"text","text":" but with "},{"type":"text","text":"dont_dlopen","style":{"code":true}},{"type":"text","text":")\ndlopen'ing that library manually with the full path ("},{"type":"text","text":"polymake_jll.libpolymake_path","style":{"code":true}},{"type":"text","text":") does work fine though.\nAny suggestions?"}]}]}],"thread_ts":"1613398298.444700","reply_count":6,"reply_users_count":2,"latest_reply":"1613398552.445800","reply_users":["UDB26738Q","U01CH05FTMM"],"subscribed":false},{"client_msg_id":"adf45f8d-e17a-48b5-88fc-c3a6151c057e","type":"message","text":"oh yeah, `dont_dlopen` now actually does what it says: it doesn't dlopen a library <https://github.com/JuliaPackaging/JLLWrappers.jl/pull/24>","user":"UDB26738Q","ts":"1613398378.444800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LLbx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh yeah, "},{"type":"text","text":"dont_dlopen","style":{"code":true}},{"type":"text","text":" now actually does what it says: it doesn't dlopen a library "},{"type":"link","url":"https://github.com/JuliaPackaging/JLLWrappers.jl/pull/24"}]}]}],"thread_ts":"1613398298.444700","parent_user_id":"U01CH05FTMM"},{"client_msg_id":"ec997740-fd17-414d-8106-62254b8239fc","type":"message","text":"I thought that was referring to the auditor instead of the jll","user":"U01CH05FTMM","ts":"1613398439.445000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lFG3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I thought that was referring to the auditor instead of the jll"}]}]}],"thread_ts":"1613398298.444700","parent_user_id":"U01CH05FTMM"},{"client_msg_id":"a97aadae-8a8f-4864-8eca-a1ec3e08a9d6","type":"message","text":"it was meant to refer to the JLL as well, but it was actually never implemented by mistake","user":"UDB26738Q","ts":"1613398466.445200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rXr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it was meant to refer to the JLL as well, but it was actually never implemented by mistake"}]}]}],"thread_ts":"1613398298.444700","parent_user_id":"U01CH05FTMM"},{"client_msg_id":"4bd2bf3b-9f2f-4907-8e87-3cc45f5e4308","type":"message","text":"and there is no LD_LIBRARY_PATH set that would make the dependent package find the other library?","user":"U01CH05FTMM","ts":"1613398486.445400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MKI9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and there is no LD_LIBRARY_PATH set that would make the dependent package find the other library?"}]}]}],"thread_ts":"1613398298.444700","parent_user_id":"U01CH05FTMM"},{"client_msg_id":"98ee257e-8b96-4bea-8694-139bd7f51de1","type":"message","text":"isn't there? :thinking_face:","user":"UDB26738Q","ts":"1613398516.445600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u4bo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"isn't there? "},{"type":"emoji","name":"thinking_face"}]}]}],"thread_ts":"1613398298.444700","parent_user_id":"U01CH05FTMM"},{"client_msg_id":"3369aeec-38e7-4fe2-8410-73976c926c7d","type":"message","text":"it doesn't seem so","user":"U01CH05FTMM","ts":"1613398552.445800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G1n","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it doesn't seem so"}]}]}],"thread_ts":"1613398298.444700","parent_user_id":"U01CH05FTMM"}]