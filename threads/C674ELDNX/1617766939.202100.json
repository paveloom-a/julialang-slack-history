[{"client_msg_id":"30fe02cc-a9dd-41d5-97b0-1950c93e878e","type":"message","text":"tyring to build `primecount` and getting a weird error, does anyone speak C++?\n```\n[  1%] Building CXX object lib/primesieve/CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o\ncd /workspace/srcdir/primecount/lib/primesieve &amp;&amp; /opt/bin/x86_64-linux-gnu-libgfortran3-cxx03/x86_64-linux-gnu-g++ --sysroot=/opt/x86_64-linux-gnu/x86_64-linux-gnu/sys-root/   -I/workspace/srcdir/primecount/lib/primesieve/include  -O3 -DNDEBUG   -std=gnu++11 -o CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o -c /workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp\n/workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp: In member function 'void primesieve::MemoryPool::allocateBuckets()':\n/workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp:73:8: error: 'align' is not a member of 'std'\n   if (!std::align(sizeof(Bucket), sizeof(Bucket), ptr, bytes))\n        ^\nmake[2]: *** [lib/primesieve/CMakeFiles/libprimesieve-static.dir/build.make:226: lib/primesieve/CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o] Error 1\nmake[2]: Leaving directory '/workspace/srcdir/primecount'\nmake[1]: *** [CMakeFiles/Makefile2:173: lib/primesieve/CMakeFiles/libprimesieve-static.dir/all] Error 2\nmake[1]: Leaving directory '/workspace/srcdir/primecount'\nmake: *** [Makefile:150: all] Error 2```","user":"U6QGE7S86","ts":"1617766939.202100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tSt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"tyring to build "},{"type":"text","text":"primecount","style":{"code":true}},{"type":"text","text":" and getting a weird error, does anyone speak C++?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\n[  1%] Building CXX object lib/primesieve/CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o\ncd /workspace/srcdir/primecount/lib/primesieve && /opt/bin/x86_64-linux-gnu-libgfortran3-cxx03/x86_64-linux-gnu-g++ --sysroot=/opt/x86_64-linux-gnu/x86_64-linux-gnu/sys-root/   -I/workspace/srcdir/primecount/lib/primesieve/include  -O3 -DNDEBUG   -std=gnu++11 -o CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o -c /workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp\n/workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp: In member function 'void primesieve::MemoryPool::allocateBuckets()':\n/workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp:73:8: error: 'align' is not a member of 'std'\n   if (!std::align(sizeof(Bucket), sizeof(Bucket), ptr, bytes))\n        ^\nmake[2]: *** [lib/primesieve/CMakeFiles/libprimesieve-static.dir/build.make:226: lib/primesieve/CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o] Error 1\nmake[2]: Leaving directory '/workspace/srcdir/primecount'\nmake[1]: *** [CMakeFiles/Makefile2:173: lib/primesieve/CMakeFiles/libprimesieve-static.dir/all] Error 2\nmake[1]: Leaving directory '/workspace/srcdir/primecount'\nmake: *** [Makefile:150: all] Error 2"}]}]}],"thread_ts":"1617766939.202100","reply_count":54,"reply_users_count":4,"latest_reply":"1617817659.215100","reply_users":["U6QGE7S86","U674T3KB3","U6N6VQE30","UDB26738Q"],"is_locked":false,"subscribed":false},{"client_msg_id":"9492b24a-70e4-4c27-b4a5-3fcc2e31058d","type":"message","text":"Trying to build this <https://github.com/kimwalisch/primecount> in the wizard","user":"U6QGE7S86","ts":"1617766963.202200","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617766973.000000"},"blocks":[{"type":"rich_text","block_id":"sVhN=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Trying to build this "},{"type":"link","url":"https://github.com/kimwalisch/primecount"},{"type":"text","text":" in the wizard"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"04e3bd0c-e185-43db-904e-50a8825491c2","type":"message","text":"Wrong c++ version perhaps","user":"U674T3KB3","ts":"1617767016.202500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IMa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Wrong c++ version perhaps"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"c499b024-5722-4dcc-9c8c-b50f38b7bf27","type":"message","text":"I tried using Clang11 and GCC 4.8.5","user":"U6QGE7S86","ts":"1617767036.202700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JVm6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tried using Clang11 and GCC 4.8.5"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"590dc227-ed0a-46f8-9f87-08923f455b4f","type":"message","text":"Might need a `--std=` flag","user":"U674T3KB3","ts":"1617767039.202900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MBu+u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Might need a "},{"type":"text","text":"--std=","style":{"code":true}},{"type":"text","text":" flag"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"04ba3946-d626-4aa4-ad1e-fffa2fb82ce7","type":"message","text":"Or a newer gcc version","user":"U674T3KB3","ts":"1617767045.203100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q2ZM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or a newer gcc version"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"689a2d4d-028d-428d-9ef3-7c01d52134c4","type":"message","text":"Will try with newer gcc","user":"U6QGE7S86","ts":"1617767051.203300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gqRdt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Will try with newer gcc"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"cb56da68-873b-4597-96fd-31c067b595c0","type":"message","text":"thx Keno","user":"U6QGE7S86","ts":"1617767054.203500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2pnB8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thx Keno"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"fd3f21cb-4c27-416c-b6c2-19e6ccf5e4e9","type":"message","text":"Check the documentation","user":"U674T3KB3","ts":"1617767056.203700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jdaq9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Check the documentation"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"edd03276-44db-4854-804e-f480444ebdbc","type":"message","text":"For which c++ version it's in","user":"U674T3KB3","ts":"1617767067.203900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y7i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For which c++ version it's in"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"0967362e-8bc5-4bac-896b-523c00caaf59","type":"message","text":"Yeah they say C++11 or greater","user":"U6QGE7S86","ts":"1617767081.204100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GmaN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah they say C++11 or greater"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"606c2fab-840a-41c6-b28d-1d34649b2186","type":"message","text":"Will try bumping gcc version","user":"U6QGE7S86","ts":"1617767156.204300","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617767212.000000"},"blocks":[{"type":"rich_text","block_id":"gKji","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Will try bumping gcc version"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"10d6ebe7-b051-4000-8353-db0d34144992","type":"message","text":"Yup, dass hat geklappt! (Yes, that worked!)","user":"U6QGE7S86","ts":"1617767547.204600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3x4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yup, dass hat geklappt! (Yes, that worked!)"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"f476b5fe-8cfa-4ba5-86b7-85407196c48f","type":"message","text":"Dankeschön!","user":"U6QGE7S86","ts":"1617767568.204800","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617767577.000000"},"blocks":[{"type":"rich_text","block_id":"bTJCT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Dankeschön!"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b5cd788b-aa37-40af-b368-08644f166365","type":"message","text":"Compare it againste <http://github.com/haampie/FastPrimeSieve.jl|github.com/haampie/FastPrimeSieve.jl>, should be the same algorithm up to n=2^32","user":"U6N6VQE30","ts":"1617776742.205100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e6Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Compare it againste "},{"type":"link","url":"http://github.com/haampie/FastPrimeSieve.jl","text":"github.com/haampie/FastPrimeSieve.jl"},{"type":"text","text":", should be the same algorithm up to n=2^32"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"578117d3-350f-460b-b21c-9329a8864458","type":"message","text":"<@U6N6VQE30> post on the thread on Discourse, brb run.","user":"U6QGE7S86","ts":"1617801360.205300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2=9l","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6N6VQE30"},{"type":"text","text":" post on the thread on Discourse, brb run."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"41d01d9c-bfb8-4d90-bb6e-59a81d13c7f4","type":"message","text":"which thread?","user":"U6N6VQE30","ts":"1617801381.205500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uCC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which thread?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b5107ff9-c863-4135-86c8-8885c0d7e83e","type":"message","text":"<https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz|https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz>","user":"U6QGE7S86","ts":"1617801424.205700","team":"T68168MUP","attachments":[{"service_name":"JuliaLang","title":"Number of primes below a given number","title_link":"https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz","text":"Bravo! :clap: It’s still mind blowing to me that that’s all it takes to build binaries that work on every platform where Julia runs and make it available to every Julia user.","fallback":"JuliaLang: Number of primes below a given number","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","ts":1617773967,"from_url":"https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz"}],"blocks":[{"type":"rich_text","block_id":"L3F","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz","text":"https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"34efa06c-6231-40f8-b72f-8273b904e018","type":"message","text":"<@U6N6VQE30>\n```\njulia&gt; @time run(`$(primecount()) 1e8`);\n5761455\n  0.010639 seconds (467 allocations: 33.453 KiB)\n\njulia&gt; @time FastPrimeSieve.pcountprimes(1e8, segment_length=128*1024, threads = 8);\n  0.025880 seconds (128 allocations: 1.307 MiB)```","user":"U6QGE7S86","ts":"1617813963.206000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4iV","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6N6VQE30"},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\njulia> @time run(`$(primecount()) 1e8`);\n5761455\n  0.010639 seconds (467 allocations: 33.453 KiB)\n\njulia> @time FastPrimeSieve.pcountprimes(1e8, segment_length=128*1024, threads = 8);\n  0.025880 seconds (128 allocations: 1.307 MiB)"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"c46f31ac-94cd-4c12-8c0e-83e8d887f281","type":"message","text":"with <https://github.com/JuliaPackaging/Yggdrasil/pull/2779> there will be shared libraries to call into, instead of running an external program","user":"UDB26738Q","ts":"1617814046.206200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OT3x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"with "},{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/pull/2779"},{"type":"text","text":" there will be shared libraries to call into, instead of running an external program"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"e3ed4d52-ff71-4dfe-9fbc-28efbce27638","type":"message","text":"Oh right, lemme pull the latest then and rerun this.","user":"U6QGE7S86","ts":"1617814132.206400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4CoTJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh right, lemme pull the latest then and rerun this."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"323bbfc5-8065-4b1e-8454-4457df76e9c4","type":"message","text":"<https://github.com/JuliaRegistries/General/pull/33760> needs to be merged first :stuck_out_tongue:","user":"UDB26738Q","ts":"1617814253.206600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e2XG","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaRegistries/General/pull/33760"},{"type":"text","text":" needs to be merged first "},{"type":"emoji","name":"stuck_out_tongue"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"2d282e12-c7ff-46c2-b6fe-d7ae77da8f79","type":"message","text":"Yeah I just bumped into that, :sweat_smile: thanks.","user":"U6QGE7S86","ts":"1617814266.206800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2c7/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah I just bumped into that, "},{"type":"emoji","name":"sweat_smile"},{"type":"text","text":" thanks."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"dc92f21b-dc6a-46a5-97c2-6c715b1c2cbb","type":"message","text":"Any chance you can verify that the `v6.5` version is indeed using the `POPCNT` instructions?\n<https://github.com/kimwalisch/primecount#performance-tips>","user":"U6QGE7S86","ts":"1617814609.207000","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617814625.000000"},"blocks":[{"type":"rich_text","block_id":"XCz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Any chance you can verify that the "},{"type":"text","text":"v6.5","style":{"code":true}},{"type":"text","text":" version is indeed using the "},{"type":"text","text":"POPCNT","style":{"code":true}},{"type":"text","text":" instructions?\n"},{"type":"link","url":"https://github.com/kimwalisch/primecount#performance-tips"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"c4f7324f-962f-4568-81e5-9fbffb91c3ec","type":"message","text":"it is: <https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId=9987&amp;view=logs&amp;j=f61b47be-64bf-59de-f2ce-824ddaa2089c&amp;t=18f539dd-131e-505d-3cde-3744c10c5bc9&amp;l=172>","user":"UDB26738Q","ts":"1617814823.207300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XVk5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is: "},{"type":"link","url":"https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId=9987&view=logs&j=f61b47be-64bf-59de-f2ce-824ddaa2089c&t=18f539dd-131e-505d-3cde-3744c10c5bc9&l=172"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b0a76a1e-20f9-4bcd-a979-28e435af5f69","type":"message","text":"Whoah! Neat!","user":"U6QGE7S86","ts":"1617814852.207500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GK6cU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Whoah! Neat!"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"7a73dacf-e499-4b82-b026-e5cbc1693eec","type":"message","text":"in fact auditor complains that the libs and executable are for avx2 :weary:","user":"UDB26738Q","ts":"1617814868.207700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5L7r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in fact auditor complains that the libs and executable are for avx2 "},{"type":"emoji","name":"weary"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"0755db67-8a7f-4e7e-876a-642771e27439","type":"message","text":"this is actually something useful to test microarchitectures with","user":"UDB26738Q","ts":"1617814890.207900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N20","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is actually something useful to test microarchitectures with"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"5213e5a7-10aa-4edb-9b9c-18f8e522a214","type":"message","text":"auditor?","user":"U6QGE7S86","ts":"1617814901.208100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FT=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"auditor?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"478bc0e4-b7e1-4f8d-84fb-12f512884460","type":"message","text":"that's what spits all warnings you see in <https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId=9980&amp;view=results>","user":"UDB26738Q","ts":"1617814923.208300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"47qc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's what spits all warnings you see in "},{"type":"link","url":"https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId=9980&view=results"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"point_up::skin-tone-5","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"4fc981f5-30ea-4a8e-860e-0838042482ca","type":"message","text":"Oh right!","user":"U6QGE7S86","ts":"1617814952.208500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WNHMn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh right!"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"a73a6bb1-b764-46ed-84a0-c3ca0b22ec95","type":"message","text":"after building, we do so some sanity checks to make somewhat sure everything is ok","user":"UDB26738Q","ts":"1617814959.208700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aUSdN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"after building, we do so some sanity checks to make somewhat sure everything is ok"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"970dfc25-375a-42e9-af29-2d663d6caef7","type":"message","text":"well, not terrible performance","user":"U6N6VQE30","ts":"1617815262.209000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Lbz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, not terrible performance"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"888410bf-5567-4f70-b2e6-0425486f12de","type":"message","text":"how does Primes do?","user":"U6N6VQE30","ts":"1617815268.209200","team":"T68168MUP","edited":{"user":"U6N6VQE30","ts":"1617815270.000000"},"blocks":[{"type":"rich_text","block_id":"f0D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how does Primes do?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"ae5f7c00-6304-46a8-b63e-488b9d525014","type":"message","text":"I think they don't have a `primecount` function, so this is collecting an array:","user":"U6QGE7S86","ts":"1617815527.209500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Mp3z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think they don't have a "},{"type":"text","text":"primecount","style":{"code":true}},{"type":"text","text":" function, so this is collecting an array:"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"f7936ff4-325b-490a-bdfc-67f9b8492c4e","type":"message","text":"```\njulia&gt; @time Primes.primes(Int(1e8)) |&gt; length\n  0.458666 seconds (7 allocations: 69.530 MiB, 21.61% gc time)\n5761455```","user":"U6QGE7S86","ts":"1617815550.209700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Td0","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\njulia> @time Primes.primes(Int(1e8)) |> length\n  0.458666 seconds (7 allocations: 69.530 MiB, 21.61% gc time)\n5761455"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"3257a2b9-a30d-4ae7-9d8c-e98085ef44bb","type":"message","text":"is `primecount` using multiple threads?","user":"UDB26738Q","ts":"1617815805.209900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"y+5w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is "},{"type":"text","text":"primecount","style":{"code":true}},{"type":"text","text":" using multiple threads?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"3ea83688-df80-49b2-be4f-baf1b70e54e5","type":"message","text":"Think so.","user":"U6QGE7S86","ts":"1617815820.210100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D2J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Think so."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"19e9ab40-b61c-4ec9-bb98-f88bc5eec9fb","type":"message","text":"Don't think Primes.jl is multithreaded.","user":"U6QGE7S86","ts":"1617815832.210300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AjRlK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Don't think Primes.jl is multithreaded."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"5dfad7b2-60c4-4669-a6bf-320dca9047fe","type":"message","text":"but not the expert here.","user":"U6QGE7S86","ts":"1617815842.210500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EH7Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but not the expert here."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"a13d8e2c-3e7d-467e-8888-58354ee39a8f","type":"message","text":"<@UDB26738Q> what are the `libprimecount` and `libprimesieve` for?","user":"U6QGE7S86","ts":"1617816383.211900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fJfk9","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":" what are the "},{"type":"text","text":"libprimecount","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"libprimesieve","style":{"code":true}},{"type":"text","text":" for?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"41c8b7e1-8f44-421c-b724-fd888313a6ae","type":"message","text":"I guess you can call into those libraries, which is probably a bit more efficient than running external programs","user":"UDB26738Q","ts":"1617816434.212100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EQM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess you can call into those libraries, which is probably a bit more efficient than running external programs"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"8eab4194-33f8-49e9-ab29-b04ddc239c9b","type":"message","text":"... Is this the day I figure out how to use `@ccall`? :beaker:","user":"U6QGE7S86","ts":"1617816974.212300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4RDt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"... Is this the day I figure out how to use "},{"type":"text","text":"@ccall","style":{"code":true}},{"type":"text","text":"? "},{"type":"emoji","name":"beaker"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"0b532a65-283a-460a-85e2-b8f01293d965","type":"message","text":"that's a good excuse, yes","user":"UDB26738Q","ts":"1617816987.212500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sbhjG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's a good excuse, yes"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"8e9ba6bb-a3c0-47cb-96b0-2cb8adbb8938","type":"message","text":"the C API looks rather straightforward: <https://github.com/kimwalisch/primecount/blob/d9be227d8150fd9a157d8a6de66e21e0859fe13b/README.md#c-api>","user":"UDB26738Q","ts":"1617817044.212700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5o78","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the C API looks rather straightforward: "},{"type":"link","url":"https://github.com/kimwalisch/primecount/blob/d9be227d8150fd9a157d8a6de66e21e0859fe13b/README.md#c-api"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"966963ff-1b98-4e28-9f61-8ddd3af46abe","type":"message","text":"yeah I'm looking at that right now","user":"U6QGE7S86","ts":"1617817063.212900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3w=Wn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah I'm looking at that right now"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"e5ab259d-b50c-4bad-9d14-31b05789f61b","type":"message","text":"And this is what I have:\n```julia&gt; @ccall libprimecount.primecount_pi(\"1e8\"::Cstring)::Cstring\nCstring(0x0000040ca251d1de)```","user":"U6QGE7S86","ts":"1617817077.213100","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617817080.000000"},"blocks":[{"type":"rich_text","block_id":"8dcIy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And this is what I have:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @ccall libprimecount.primecount_pi(\"1e8\"::Cstring)::Cstring\nCstring(0x0000040ca251d1de)"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"16fb7063-9ea4-4edb-9929-8938c9e6e16d","type":"message","text":"I think all those `Cstring` should be `Clong`","user":"UDB26738Q","ts":"1617817133.213400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nbg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think all those "},{"type":"text","text":"Cstring","style":{"code":true}},{"type":"text","text":" should be "},{"type":"text","text":"Clong","style":{"code":true}}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"404fa738-913e-426c-b4bd-fd4e9f182741","type":"message","text":":tada:\n```julia&gt; @ccall libprimecount.primecount_pi(1e8::Clong)::Clong\n5761455```","user":"U6QGE7S86","ts":"1617817177.213600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sAdB","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"tada"},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @ccall libprimecount.primecount_pi(1e8::Clong)::Clong\n5761455"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"tada","users":["UDB26738Q"],"count":1}]},{"client_msg_id":"69cc098d-6de9-465d-be56-1a9f4d716066","type":"message","text":"```julia&gt; @ccall libprimecount.primecount_pi(1_000_000_000::Clong)::Clong\n50847534```","user":"UDB26738Q","ts":"1617817178.213800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hJmKP","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @ccall libprimecount.primecount_pi(1_000_000_000::Clong)::Clong\n50847534"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"6d008657-9e3f-42e6-aa19-6bd2b56bf56b","type":"message","text":"how would you pass in the `--gourdon` flags?","user":"U6QGE7S86","ts":"1617817246.214200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zb5VI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how would you pass in the "},{"type":"text","text":"--gourdon","style":{"code":true}},{"type":"text","text":" flags?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"179b914e-029a-4fdf-9a14-08ac5fc9992c","type":"message","text":"no idea, probably you need to read the documentation","user":"UDB26738Q","ts":"1617817302.214400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"n=lB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no idea, probably you need to read the documentation"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"f8a930ae-4e4b-4670-b11e-4cf7c46dde41","type":"message","text":"Ohhh neat:\n```julia&gt; myprimecount(x) = @ccall libprimecount.primecount_pi(x::Clong)::Clong\nmyprimecount (generic function with 1 method)\n\njulia&gt; @time myprimecount(1e8)\n  0.001004 seconds\n5761455```\n```julia&gt; @time myprimecount(1e14)\n  0.149201 seconds\n3204941750802```","user":"U6QGE7S86","ts":"1617817575.214600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sMQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ohhh neat:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> myprimecount(x) = @ccall libprimecount.primecount_pi(x::Clong)::Clong\nmyprimecount (generic function with 1 method)\n\njulia> @time myprimecount(1e8)\n  0.001004 seconds\n5761455"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time myprimecount(1e14)\n  0.149201 seconds\n3204941750802"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"385598d5-bfae-4a66-82a9-5e6d0f17dbe4","type":"message","text":"```julia&gt; @btime readchomp(`$(primecount()) 1e8`)\n  2.457 ms (748 allocations: 244.77 KiB)\n\"5761455\"\n\njulia&gt; @btime @ccall libprimecount.primecount_pi(1e8::Clong)::Clong\n  180.688 μs (0 allocations: 0 bytes)\n5761455```\nyeah, calling into the library directly is much faster","user":"UDB26738Q","ts":"1617817586.214800","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1617817607.000000"},"blocks":[{"type":"rich_text","block_id":"vOm7","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @btime readchomp(`$(primecount()) 1e8`)\n  2.457 ms (748 allocations: 244.77 KiB)\n\"5761455\"\n\njulia> @btime @ccall libprimecount.primecount_pi(1e8::Clong)::Clong\n  180.688 μs (0 allocations: 0 bytes)\n5761455"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, calling into the library directly is much faster"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"7b25bc5c-e08e-48e2-9978-8b0f7759d6ca","type":"message","text":"the executable seems to have a base ~2.5 ms overhead for me","user":"UDB26738Q","ts":"1617817659.215100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OWj9H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the executable seems to have a base ~2.5 ms overhead for me"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"}]