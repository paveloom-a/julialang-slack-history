[{"client_msg_id":"30fe02cc-a9dd-41d5-97b0-1950c93e878e","type":"message","text":"tyring to build `primecount` and getting a weird error, does anyone speak C++?\n```\n[  1%] Building CXX object lib/primesieve/CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o\ncd /workspace/srcdir/primecount/lib/primesieve &amp;&amp; /opt/bin/x86_64-linux-gnu-libgfortran3-cxx03/x86_64-linux-gnu-g++ --sysroot=/opt/x86_64-linux-gnu/x86_64-linux-gnu/sys-root/   -I/workspace/srcdir/primecount/lib/primesieve/include  -O3 -DNDEBUG   -std=gnu++11 -o CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o -c /workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp\n/workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp: In member function 'void primesieve::MemoryPool::allocateBuckets()':\n/workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp:73:8: error: 'align' is not a member of 'std'\n   if (!std::align(sizeof(Bucket), sizeof(Bucket), ptr, bytes))\n        ^\nmake[2]: *** [lib/primesieve/CMakeFiles/libprimesieve-static.dir/build.make:226: lib/primesieve/CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o] Error 1\nmake[2]: Leaving directory '/workspace/srcdir/primecount'\nmake[1]: *** [CMakeFiles/Makefile2:173: lib/primesieve/CMakeFiles/libprimesieve-static.dir/all] Error 2\nmake[1]: Leaving directory '/workspace/srcdir/primecount'\nmake: *** [Makefile:150: all] Error 2```","user":"U6QGE7S86","ts":"1617766939.202100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tSt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"tyring to build "},{"type":"text","text":"primecount","style":{"code":true}},{"type":"text","text":" and getting a weird error, does anyone speak C++?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\n[  1%] Building CXX object lib/primesieve/CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o\ncd /workspace/srcdir/primecount/lib/primesieve && /opt/bin/x86_64-linux-gnu-libgfortran3-cxx03/x86_64-linux-gnu-g++ --sysroot=/opt/x86_64-linux-gnu/x86_64-linux-gnu/sys-root/   -I/workspace/srcdir/primecount/lib/primesieve/include  -O3 -DNDEBUG   -std=gnu++11 -o CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o -c /workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp\n/workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp: In member function 'void primesieve::MemoryPool::allocateBuckets()':\n/workspace/srcdir/primecount/lib/primesieve/src/MemoryPool.cpp:73:8: error: 'align' is not a member of 'std'\n   if (!std::align(sizeof(Bucket), sizeof(Bucket), ptr, bytes))\n        ^\nmake[2]: *** [lib/primesieve/CMakeFiles/libprimesieve-static.dir/build.make:226: lib/primesieve/CMakeFiles/libprimesieve-static.dir/src/MemoryPool.cpp.o] Error 1\nmake[2]: Leaving directory '/workspace/srcdir/primecount'\nmake[1]: *** [CMakeFiles/Makefile2:173: lib/primesieve/CMakeFiles/libprimesieve-static.dir/all] Error 2\nmake[1]: Leaving directory '/workspace/srcdir/primecount'\nmake: *** [Makefile:150: all] Error 2"}]}]}],"thread_ts":"1617766939.202100","reply_count":126,"reply_users_count":5,"latest_reply":"1617830252.239000","reply_users":["U6QGE7S86","U674T3KB3","U6N6VQE30","UDB26738Q","UCZ7VBGUD"],"is_locked":false,"subscribed":false},{"client_msg_id":"9492b24a-70e4-4c27-b4a5-3fcc2e31058d","type":"message","text":"Trying to build this <https://github.com/kimwalisch/primecount> in the wizard","user":"U6QGE7S86","ts":"1617766963.202200","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617766973.000000"},"blocks":[{"type":"rich_text","block_id":"sVhN=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Trying to build this "},{"type":"link","url":"https://github.com/kimwalisch/primecount"},{"type":"text","text":" in the wizard"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"04e3bd0c-e185-43db-904e-50a8825491c2","type":"message","text":"Wrong c++ version perhaps","user":"U674T3KB3","ts":"1617767016.202500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IMa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Wrong c++ version perhaps"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"c499b024-5722-4dcc-9c8c-b50f38b7bf27","type":"message","text":"I tried using Clang11 and GCC 4.8.5","user":"U6QGE7S86","ts":"1617767036.202700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JVm6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tried using Clang11 and GCC 4.8.5"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"590dc227-ed0a-46f8-9f87-08923f455b4f","type":"message","text":"Might need a `--std=` flag","user":"U674T3KB3","ts":"1617767039.202900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MBu+u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Might need a "},{"type":"text","text":"--std=","style":{"code":true}},{"type":"text","text":" flag"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"04ba3946-d626-4aa4-ad1e-fffa2fb82ce7","type":"message","text":"Or a newer gcc version","user":"U674T3KB3","ts":"1617767045.203100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q2ZM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or a newer gcc version"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"689a2d4d-028d-428d-9ef3-7c01d52134c4","type":"message","text":"Will try with newer gcc","user":"U6QGE7S86","ts":"1617767051.203300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gqRdt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Will try with newer gcc"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"cb56da68-873b-4597-96fd-31c067b595c0","type":"message","text":"thx Keno","user":"U6QGE7S86","ts":"1617767054.203500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2pnB8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thx Keno"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"fd3f21cb-4c27-416c-b6c2-19e6ccf5e4e9","type":"message","text":"Check the documentation","user":"U674T3KB3","ts":"1617767056.203700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jdaq9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Check the documentation"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"edd03276-44db-4854-804e-f480444ebdbc","type":"message","text":"For which c++ version it's in","user":"U674T3KB3","ts":"1617767067.203900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y7i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For which c++ version it's in"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"0967362e-8bc5-4bac-896b-523c00caaf59","type":"message","text":"Yeah they say C++11 or greater","user":"U6QGE7S86","ts":"1617767081.204100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GmaN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah they say C++11 or greater"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"606c2fab-840a-41c6-b28d-1d34649b2186","type":"message","text":"Will try bumping gcc version","user":"U6QGE7S86","ts":"1617767156.204300","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617767212.000000"},"blocks":[{"type":"rich_text","block_id":"gKji","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Will try bumping gcc version"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"10d6ebe7-b051-4000-8353-db0d34144992","type":"message","text":"Yup, dass hat geklappt! (Yes, that worked!)","user":"U6QGE7S86","ts":"1617767547.204600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3x4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yup, dass hat geklappt! (Yes, that worked!)"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"f476b5fe-8cfa-4ba5-86b7-85407196c48f","type":"message","text":"Dankeschön!","user":"U6QGE7S86","ts":"1617767568.204800","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617767577.000000"},"blocks":[{"type":"rich_text","block_id":"bTJCT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Dankeschön!"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b5cd788b-aa37-40af-b368-08644f166365","type":"message","text":"Compare it againste <http://github.com/haampie/FastPrimeSieve.jl|github.com/haampie/FastPrimeSieve.jl>, should be the same algorithm up to n=2^32","user":"U6N6VQE30","ts":"1617776742.205100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e6Y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Compare it againste "},{"type":"link","url":"http://github.com/haampie/FastPrimeSieve.jl","text":"github.com/haampie/FastPrimeSieve.jl"},{"type":"text","text":", should be the same algorithm up to n=2^32"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"578117d3-350f-460b-b21c-9329a8864458","type":"message","text":"<@U6N6VQE30> post on the thread on Discourse, brb run.","user":"U6QGE7S86","ts":"1617801360.205300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2=9l","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6N6VQE30"},{"type":"text","text":" post on the thread on Discourse, brb run."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"41d01d9c-bfb8-4d90-bb6e-59a81d13c7f4","type":"message","text":"which thread?","user":"U6N6VQE30","ts":"1617801381.205500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uCC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which thread?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b5107ff9-c863-4135-86c8-8885c0d7e83e","type":"message","text":"<https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz|https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz>","user":"U6QGE7S86","ts":"1617801424.205700","team":"T68168MUP","attachments":[{"service_name":"JuliaLang","title":"Number of primes below a given number","title_link":"https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz","text":"Bravo! :clap: It’s still mind blowing to me that that’s all it takes to build binaries that work on every platform where Julia runs and make it available to every Julia user.","fallback":"JuliaLang: Number of primes below a given number","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","ts":1617773967,"from_url":"https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz"}],"blocks":[{"type":"rich_text","block_id":"L3F","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz","text":"https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/23?u=miguelraz"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"34efa06c-6231-40f8-b72f-8273b904e018","type":"message","text":"<@U6N6VQE30>\n```\njulia&gt; @time run(`$(primecount()) 1e8`);\n5761455\n  0.010639 seconds (467 allocations: 33.453 KiB)\n\njulia&gt; @time FastPrimeSieve.pcountprimes(1e8, segment_length=128*1024, threads = 8);\n  0.025880 seconds (128 allocations: 1.307 MiB)```","user":"U6QGE7S86","ts":"1617813963.206000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4iV","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6N6VQE30"},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\njulia> @time run(`$(primecount()) 1e8`);\n5761455\n  0.010639 seconds (467 allocations: 33.453 KiB)\n\njulia> @time FastPrimeSieve.pcountprimes(1e8, segment_length=128*1024, threads = 8);\n  0.025880 seconds (128 allocations: 1.307 MiB)"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"c46f31ac-94cd-4c12-8c0e-83e8d887f281","type":"message","text":"with <https://github.com/JuliaPackaging/Yggdrasil/pull/2779> there will be shared libraries to call into, instead of running an external program","user":"UDB26738Q","ts":"1617814046.206200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OT3x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"with "},{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/pull/2779"},{"type":"text","text":" there will be shared libraries to call into, instead of running an external program"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"e3ed4d52-ff71-4dfe-9fbc-28efbce27638","type":"message","text":"Oh right, lemme pull the latest then and rerun this.","user":"U6QGE7S86","ts":"1617814132.206400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4CoTJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh right, lemme pull the latest then and rerun this."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"323bbfc5-8065-4b1e-8454-4457df76e9c4","type":"message","text":"<https://github.com/JuliaRegistries/General/pull/33760> needs to be merged first :stuck_out_tongue:","user":"UDB26738Q","ts":"1617814253.206600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e2XG","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaRegistries/General/pull/33760"},{"type":"text","text":" needs to be merged first "},{"type":"emoji","name":"stuck_out_tongue"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"2d282e12-c7ff-46c2-b6fe-d7ae77da8f79","type":"message","text":"Yeah I just bumped into that, :sweat_smile: thanks.","user":"U6QGE7S86","ts":"1617814266.206800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2c7/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah I just bumped into that, "},{"type":"emoji","name":"sweat_smile"},{"type":"text","text":" thanks."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"dc92f21b-dc6a-46a5-97c2-6c715b1c2cbb","type":"message","text":"Any chance you can verify that the `v6.5` version is indeed using the `POPCNT` instructions?\n<https://github.com/kimwalisch/primecount#performance-tips>","user":"U6QGE7S86","ts":"1617814609.207000","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617814625.000000"},"blocks":[{"type":"rich_text","block_id":"XCz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Any chance you can verify that the "},{"type":"text","text":"v6.5","style":{"code":true}},{"type":"text","text":" version is indeed using the "},{"type":"text","text":"POPCNT","style":{"code":true}},{"type":"text","text":" instructions?\n"},{"type":"link","url":"https://github.com/kimwalisch/primecount#performance-tips"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"c4f7324f-962f-4568-81e5-9fbffb91c3ec","type":"message","text":"it is: <https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId=9987&amp;view=logs&amp;j=f61b47be-64bf-59de-f2ce-824ddaa2089c&amp;t=18f539dd-131e-505d-3cde-3744c10c5bc9&amp;l=172>","user":"UDB26738Q","ts":"1617814823.207300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XVk5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is: "},{"type":"link","url":"https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId=9987&view=logs&j=f61b47be-64bf-59de-f2ce-824ddaa2089c&t=18f539dd-131e-505d-3cde-3744c10c5bc9&l=172"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b0a76a1e-20f9-4bcd-a979-28e435af5f69","type":"message","text":"Whoah! Neat!","user":"U6QGE7S86","ts":"1617814852.207500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GK6cU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Whoah! Neat!"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"7a73dacf-e499-4b82-b026-e5cbc1693eec","type":"message","text":"in fact auditor complains that the libs and executable are for avx2 :weary:","user":"UDB26738Q","ts":"1617814868.207700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5L7r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in fact auditor complains that the libs and executable are for avx2 "},{"type":"emoji","name":"weary"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"0755db67-8a7f-4e7e-876a-642771e27439","type":"message","text":"this is actually something useful to test microarchitectures with","user":"UDB26738Q","ts":"1617814890.207900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"N20","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is actually something useful to test microarchitectures with"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"5213e5a7-10aa-4edb-9b9c-18f8e522a214","type":"message","text":"auditor?","user":"U6QGE7S86","ts":"1617814901.208100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FT=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"auditor?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"478bc0e4-b7e1-4f8d-84fb-12f512884460","type":"message","text":"that's what spits all warnings you see in <https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId=9980&amp;view=results>","user":"UDB26738Q","ts":"1617814923.208300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"47qc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's what spits all warnings you see in "},{"type":"link","url":"https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId=9980&view=results"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"point_up::skin-tone-5","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"4fc981f5-30ea-4a8e-860e-0838042482ca","type":"message","text":"Oh right!","user":"U6QGE7S86","ts":"1617814952.208500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WNHMn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh right!"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"a73a6bb1-b764-46ed-84a0-c3ca0b22ec95","type":"message","text":"after building, we do so some sanity checks to make somewhat sure everything is ok","user":"UDB26738Q","ts":"1617814959.208700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aUSdN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"after building, we do so some sanity checks to make somewhat sure everything is ok"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"970dfc25-375a-42e9-af29-2d663d6caef7","type":"message","text":"well, not terrible performance","user":"U6N6VQE30","ts":"1617815262.209000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Lbz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, not terrible performance"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"888410bf-5567-4f70-b2e6-0425486f12de","type":"message","text":"how does Primes do?","user":"U6N6VQE30","ts":"1617815268.209200","team":"T68168MUP","edited":{"user":"U6N6VQE30","ts":"1617815270.000000"},"blocks":[{"type":"rich_text","block_id":"f0D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how does Primes do?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"ae5f7c00-6304-46a8-b63e-488b9d525014","type":"message","text":"I think they don't have a `primecount` function, so this is collecting an array:","user":"U6QGE7S86","ts":"1617815527.209500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Mp3z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think they don't have a "},{"type":"text","text":"primecount","style":{"code":true}},{"type":"text","text":" function, so this is collecting an array:"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"f7936ff4-325b-490a-bdfc-67f9b8492c4e","type":"message","text":"```\njulia&gt; @time Primes.primes(Int(1e8)) |&gt; length\n  0.458666 seconds (7 allocations: 69.530 MiB, 21.61% gc time)\n5761455```","user":"U6QGE7S86","ts":"1617815550.209700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Td0","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\njulia> @time Primes.primes(Int(1e8)) |> length\n  0.458666 seconds (7 allocations: 69.530 MiB, 21.61% gc time)\n5761455"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"3257a2b9-a30d-4ae7-9d8c-e98085ef44bb","type":"message","text":"is `primecount` using multiple threads?","user":"UDB26738Q","ts":"1617815805.209900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"y+5w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is "},{"type":"text","text":"primecount","style":{"code":true}},{"type":"text","text":" using multiple threads?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"3ea83688-df80-49b2-be4f-baf1b70e54e5","type":"message","text":"Think so.","user":"U6QGE7S86","ts":"1617815820.210100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D2J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Think so."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"19e9ab40-b61c-4ec9-bb98-f88bc5eec9fb","type":"message","text":"Don't think Primes.jl is multithreaded.","user":"U6QGE7S86","ts":"1617815832.210300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AjRlK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Don't think Primes.jl is multithreaded."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"5dfad7b2-60c4-4669-a6bf-320dca9047fe","type":"message","text":"but not the expert here.","user":"U6QGE7S86","ts":"1617815842.210500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EH7Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but not the expert here."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"a13d8e2c-3e7d-467e-8888-58354ee39a8f","type":"message","text":"<@UDB26738Q> what are the `libprimecount` and `libprimesieve` for?","user":"U6QGE7S86","ts":"1617816383.211900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fJfk9","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":" what are the "},{"type":"text","text":"libprimecount","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"libprimesieve","style":{"code":true}},{"type":"text","text":" for?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"41c8b7e1-8f44-421c-b724-fd888313a6ae","type":"message","text":"I guess you can call into those libraries, which is probably a bit more efficient than running external programs","user":"UDB26738Q","ts":"1617816434.212100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EQM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess you can call into those libraries, which is probably a bit more efficient than running external programs"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"8eab4194-33f8-49e9-ab29-b04ddc239c9b","type":"message","text":"... Is this the day I figure out how to use `@ccall`? :beaker:","user":"U6QGE7S86","ts":"1617816974.212300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4RDt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"... Is this the day I figure out how to use "},{"type":"text","text":"@ccall","style":{"code":true}},{"type":"text","text":"? "},{"type":"emoji","name":"beaker"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"0b532a65-283a-460a-85e2-b8f01293d965","type":"message","text":"that's a good excuse, yes","user":"UDB26738Q","ts":"1617816987.212500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sbhjG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's a good excuse, yes"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"8e9ba6bb-a3c0-47cb-96b0-2cb8adbb8938","type":"message","text":"the C API looks rather straightforward: <https://github.com/kimwalisch/primecount/blob/d9be227d8150fd9a157d8a6de66e21e0859fe13b/README.md#c-api>","user":"UDB26738Q","ts":"1617817044.212700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5o78","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the C API looks rather straightforward: "},{"type":"link","url":"https://github.com/kimwalisch/primecount/blob/d9be227d8150fd9a157d8a6de66e21e0859fe13b/README.md#c-api"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"966963ff-1b98-4e28-9f61-8ddd3af46abe","type":"message","text":"yeah I'm looking at that right now","user":"U6QGE7S86","ts":"1617817063.212900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3w=Wn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah I'm looking at that right now"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"e5ab259d-b50c-4bad-9d14-31b05789f61b","type":"message","text":"And this is what I have:\n```julia&gt; @ccall libprimecount.primecount_pi(\"1e8\"::Cstring)::Cstring\nCstring(0x0000040ca251d1de)```","user":"U6QGE7S86","ts":"1617817077.213100","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617817080.000000"},"blocks":[{"type":"rich_text","block_id":"8dcIy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And this is what I have:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @ccall libprimecount.primecount_pi(\"1e8\"::Cstring)::Cstring\nCstring(0x0000040ca251d1de)"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"16fb7063-9ea4-4edb-9929-8938c9e6e16d","type":"message","text":"I think all those `Cstring` should be `Clong`","user":"UDB26738Q","ts":"1617817133.213400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nbg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think all those "},{"type":"text","text":"Cstring","style":{"code":true}},{"type":"text","text":" should be "},{"type":"text","text":"Clong","style":{"code":true}}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"404fa738-913e-426c-b4bd-fd4e9f182741","type":"message","text":":tada:\n```julia&gt; @ccall libprimecount.primecount_pi(1e8::Clong)::Clong\n5761455```","user":"U6QGE7S86","ts":"1617817177.213600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sAdB","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"tada"},{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @ccall libprimecount.primecount_pi(1e8::Clong)::Clong\n5761455"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"tada","users":["UDB26738Q"],"count":1}]},{"client_msg_id":"69cc098d-6de9-465d-be56-1a9f4d716066","type":"message","text":"```julia&gt; @ccall libprimecount.primecount_pi(1_000_000_000::Clong)::Clong\n50847534```","user":"UDB26738Q","ts":"1617817178.213800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hJmKP","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @ccall libprimecount.primecount_pi(1_000_000_000::Clong)::Clong\n50847534"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"6d008657-9e3f-42e6-aa19-6bd2b56bf56b","type":"message","text":"how would you pass in the `--gourdon` flags?","user":"U6QGE7S86","ts":"1617817246.214200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zb5VI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how would you pass in the "},{"type":"text","text":"--gourdon","style":{"code":true}},{"type":"text","text":" flags?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"179b914e-029a-4fdf-9a14-08ac5fc9992c","type":"message","text":"no idea, probably you need to read the documentation","user":"UDB26738Q","ts":"1617817302.214400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"n=lB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no idea, probably you need to read the documentation"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"f8a930ae-4e4b-4670-b11e-4cf7c46dde41","type":"message","text":"Ohhh neat:\n```julia&gt; myprimecount(x) = @ccall libprimecount.primecount_pi(x::Clong)::Clong\nmyprimecount (generic function with 1 method)\n\njulia&gt; @time myprimecount(1e8)\n  0.001004 seconds\n5761455```\n```julia&gt; @time myprimecount(1e14)\n  0.149201 seconds\n3204941750802```","user":"U6QGE7S86","ts":"1617817575.214600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sMQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ohhh neat:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> myprimecount(x) = @ccall libprimecount.primecount_pi(x::Clong)::Clong\nmyprimecount (generic function with 1 method)\n\njulia> @time myprimecount(1e8)\n  0.001004 seconds\n5761455"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time myprimecount(1e14)\n  0.149201 seconds\n3204941750802"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"385598d5-bfae-4a66-82a9-5e6d0f17dbe4","type":"message","text":"```julia&gt; @btime readchomp(`$(primecount()) 1e8`)\n  2.457 ms (748 allocations: 244.77 KiB)\n\"5761455\"\n\njulia&gt; @btime @ccall libprimecount.primecount_pi(1e8::Clong)::Clong\n  180.688 μs (0 allocations: 0 bytes)\n5761455```\nyeah, calling into the library directly is much faster","user":"UDB26738Q","ts":"1617817586.214800","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1617817607.000000"},"blocks":[{"type":"rich_text","block_id":"vOm7","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @btime readchomp(`$(primecount()) 1e8`)\n  2.457 ms (748 allocations: 244.77 KiB)\n\"5761455\"\n\njulia> @btime @ccall libprimecount.primecount_pi(1e8::Clong)::Clong\n  180.688 μs (0 allocations: 0 bytes)\n5761455"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, calling into the library directly is much faster"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"7b25bc5c-e08e-48e2-9978-8b0f7759d6ca","type":"message","text":"the executable seems to have a base ~2.5 ms overhead for me","user":"UDB26738Q","ts":"1617817659.215100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OWj9H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the executable seems to have a base ~2.5 ms overhead for me"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"7e1db988-0a87-45fd-a6f1-428ca9afe717","type":"message","text":"Hoo boy, yeah that's hefty.","user":"U6QGE7S86","ts":"1617817927.215300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x3KV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hoo boy, yeah that's hefty."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"18b07d9b-310d-4264-a971-c94e60d1aef8","type":"message","text":"how'dya measure the overhead?","user":"U6QGE7S86","ts":"1617818018.215500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p2y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how'dya measure the overhead?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"f79d4ebd-2046-44f0-9e21-7759dcafefa6","type":"message","text":"difference between `@btime` for executable and library for different values, I've always found ~2-2.5 ms","user":"UDB26738Q","ts":"1617818106.216000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tzTJC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"difference between "},{"type":"text","text":"@btime","style":{"code":true}},{"type":"text","text":" for executable and library for different values, I've always found ~2-2.5 ms"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"ddce8aaf-13ba-4413-8b7d-c54986fb0d04","type":"message","text":"Nice. Is there a syscall in there for going through executables maybe? That would explain part of it. I'm guessing calling the library (in single threaded contexts) just about equal to calling a Julia function right?","user":"U6QGE7S86","ts":"1617818556.216300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pqc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nice. Is there a syscall in there for going through executables maybe? That would explain part of it. I'm guessing calling the library (in single threaded contexts) just about equal to calling a Julia function right?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"c21e242c-680a-468f-be78-d9c288d1ddd8","type":"message","text":"I don't think the overhead comes from julia, it's just the executable that's slower, probably does some other stuff","user":"UDB26738Q","ts":"1617818661.216600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SXfi1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think the overhead comes from julia, it's just the executable that's slower, probably does some other stuff"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"822ec81b-242b-41ff-a4ec-e76977dcccbc","type":"message","text":"How does single threaded perf compare btw?","user":"U6N6VQE30","ts":"1617822562.216900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"R27","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How does single threaded perf compare btw?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"bed4f7ef-53fd-40c5-8923-feb75688370b","type":"message","text":"FastPrimeSieve vs primesieve","user":"U6N6VQE30","ts":"1617822588.217100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e5DB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"FastPrimeSieve vs primesieve"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"338f6843-4ecd-4d2c-baba-068ae7698ab7","type":"message","text":"brb","user":"U6QGE7S86","ts":"1617822594.217300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TS0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"brb"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"8b3a9aaf-6777-4abf-a007-198cb22916e4","type":"message","text":"I never optimized the threaded version","user":"U6N6VQE30","ts":"1617822601.217500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mTtA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I never optimized the threaded version"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"91830acf-f3c5-46a4-93b8-ef25f0bec57c","type":"message","text":"Because in that time i only had a macbook air with 2 threads","user":"U6N6VQE30","ts":"1617822616.217700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Igu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Because in that time i only had a macbook air with 2 threads"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"dad3e25d-b9e9-4e78-ba80-2f74fc3f5bc9","type":"message","text":"I don't know what the `primesive` is in `primecount`.","user":"U6QGE7S86","ts":"1617822644.217900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Lr7yI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't know what the "},{"type":"text","text":"primesive","style":{"code":true}},{"type":"text","text":" is in "},{"type":"text","text":"primecount","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"87ac04df-90bf-4428-a86d-03a4f2c8e512","type":"message","text":"Also idk if they do something smart if you really just want to count primes","user":"U6N6VQE30","ts":"1617822647.218100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d0SP1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also idk if they do something smart if you really just want to count primes"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"03758967-3cd7-4703-b5e1-2a7d05397eca","type":"message","text":"I think the sieve should offer an iterator interface just like FastPrimeSieve where you get a bunch of bits where 1s are prime and 0s not","user":"U6N6VQE30","ts":"1617822734.218300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U9MM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the sieve should offer an iterator interface just like FastPrimeSieve where you get a bunch of bits where 1s are prime and 0s not"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"ca30afa3-5ce9-4919-8bf7-2b2ecefe6f53","type":"message","text":"And count would use that iterator and accumulate","user":"U6N6VQE30","ts":"1617822765.218500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"04=V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And count would use that iterator and accumulate"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"70c3a669-5c8d-4948-84ed-c6c9d9826b86","type":"message","text":"Also try 10^6 and 10^9","user":"U6N6VQE30","ts":"1617822847.218700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D8hv7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also try 10^6 and 10^9"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"4fd133dd-13b0-444f-9ac4-0006f150b0fa","type":"message","text":"There are different strategies for different ranges :upside_down_face:","user":"U6N6VQE30","ts":"1617822918.218900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wbc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There are different strategies for different ranges "},{"type":"emoji","name":"upside_down_face"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"a354729c-7144-4dbd-b692-74d41077c6ac","type":"message","text":"2^32 - 2^64 is where libprimesieve should beat FastPrimeSieve","user":"U6N6VQE30","ts":"1617822965.219100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MSVmY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"2^32 - 2^64 is where libprimesieve should beat FastPrimeSieve"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"f8b88d50-83eb-4d05-a870-198b6578820a","type":"message","text":"```\njulia&gt; @btime FastPrimeSieve.pcountprimes(10^6)\n  72.097 μs (117 allocations: 421.03 KiB)\n78498\n\njulia&gt; @btime myprimecount(10^6)\n  20.314 μs (0 allocations: 0 bytes)\n78498```","user":"U6QGE7S86","ts":"1617823000.219300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OgKyx","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"\njulia> @btime FastPrimeSieve.pcountprimes(10^6)\n  72.097 μs (117 allocations: 421.03 KiB)\n78498\n\njulia> @btime myprimecount(10^6)\n  20.314 μs (0 allocations: 0 bytes)\n78498"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"cb487756-1ed8-4f14-a61e-471046bf14b9","type":"message","text":"```julia&gt; @btime FastPrimeSieve.pcountprimes(10^9)\n  55.373 ms (126 allocations: 877.58 KiB)\n50847534\n\njulia&gt; @btime myprimecount(10^9)\n  619.689 μs (0 allocations: 0 bytes)\n50847534```","user":"U6QGE7S86","ts":"1617823060.219500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B+rE","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @btime FastPrimeSieve.pcountprimes(10^9)\n  55.373 ms (126 allocations: 877.58 KiB)\n50847534\n\njulia> @btime myprimecount(10^9)\n  619.689 μs (0 allocations: 0 bytes)\n50847534"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"20aafb80-8e40-4cd9-b6be-8390cf74fccf","type":"message","text":"```julia&gt; nthreads()\n8```","user":"U6QGE7S86","ts":"1617823112.219700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zu9vP","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> nthreads()\n8"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"8ac8d0ea-2fff-43c3-a652-62c836d8cf60","type":"message","text":"BTW, judging by CPU usage I can confirm libprimecount seems to use all threads","user":"UDB26738Q","ts":"1617823145.219900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kcb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"BTW, judging by CPU usage I can confirm libprimecount seems to use all threads"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"italian-chef-kiss","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"677b1bc0-8c95-4a24-9bf3-6421372440d1","type":"message","text":"FastPrimeSieve doesn't figure out the l1 cache size, you have to provide it, so you may want to play around with the params","user":"U6N6VQE30","ts":"1617823252.220200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ud0Cm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"FastPrimeSieve doesn't figure out the l1 cache size, you have to provide it, so you may want to play around with the params"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"9bc89c43-cd57-47c2-a6ac-f8156c9b170d","type":"message","text":"Oh right","user":"U6QGE7S86","ts":"1617823266.220400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kmjd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh right"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"f544874b-a0a6-49f2-bb5b-f62daa0f6109","type":"message","text":"segment_size or smth","user":"U6N6VQE30","ts":"1617823277.220600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ASg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"segment_size or smth"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"75d549c4-00a8-4e1c-bf72-1273b9ae5c86","type":"message","text":"But still, significantly slower :(","user":"U6N6VQE30","ts":"1617823298.220800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qhqq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But still, significantly slower :("}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"slow_parrot","users":["UDB26738Q","U6QGE7S86"],"count":2}]},{"client_msg_id":"1338e678-574a-4db8-8b1c-ac64562e47c5","type":"message","text":"`hwloc-ls` says my L1d is 32kb","user":"U6QGE7S86","ts":"1617823301.221000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8yU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hwloc-ls","style":{"code":true}},{"type":"text","text":" says my L1d is 32kb"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"07d57226-40cb-40b4-8029-1d94b7c94627","type":"message","text":"Okay, then the default is probably not bad","user":"U6N6VQE30","ts":"1617823336.221400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1wL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Okay, then the default is probably not bad"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"ca5dda41-edaf-4687-8ddc-84a7ed13152c","type":"message","text":"it looks like you have some julia optimisation goals now :stuck_out_tongue_winking_eye:","user":"UDB26738Q","ts":"1617823337.221600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XTSl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it looks like you have some julia optimisation goals now "},{"type":"emoji","name":"stuck_out_tongue_winking_eye"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"7a237302-6491-4765-b700-2cf0d83511d6","type":"message","text":"open a thread on discourse \"why my julia code is slower than this hyper optimised C++ code?\"","user":"UDB26738Q","ts":"1617823425.221800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HDTQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"open a thread on discourse \"why my julia code is slower than this hyper optimised C++ code?\""}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"rolling_on_the_floor_laughing","users":["U6QGE7S86"],"count":1},{"name":"100","users":["U6N6VQE30","U6QGE7S86"],"count":2}]},{"client_msg_id":"6912d6cd-2a35-448c-9e05-1d3bf84a7f59","type":"message","text":"You wouldnt be happy looking at the code","user":"U6N6VQE30","ts":"1617823650.222200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w4A1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You wouldnt be happy looking at the code"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"see_no_evil","users":["UDB26738Q","U6QGE7S86"],"count":2}]},{"client_msg_id":"6e3af7b7-8f20-4bf4-886e-1ba682a71502","type":"message","text":"How is singlethreaded performance <@U6QGE7S86>?","user":"U6N6VQE30","ts":"1617823675.222700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KOIP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How is singlethreaded performance "},{"type":"user","user_id":"U6QGE7S86"},{"type":"text","text":"?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"c7124e03-a8f0-410c-a48a-afbb1148aaff","type":"message","text":"Without the p","user":"U6N6VQE30","ts":"1617823682.222900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p2K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Without the p"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"80d30107-3550-404e-ab28-dc5c5d25e8d9","type":"message","text":"brb","user":"U6QGE7S86","ts":"1617823684.223100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"khS+n","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"brb"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"b5420751-bd87-48ae-ba3d-3daf7380969e","type":"message","text":"If you cant easily set threads in libprimesieve and you are on linux run julia like this:\n\ntaskset -c0 julia ...","user":"U6N6VQE30","ts":"1617823741.223300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p1y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you cant easily set threads in libprimesieve and you are on linux run julia like this:\n\ntaskset -c0 julia ..."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"a6690cf7-33ac-4993-81b0-968d5773ce21","type":"message","text":"no idea how to set threads on libprimesieve tbh","user":"U6QGE7S86","ts":"1617823882.223500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0O9f","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no idea how to set threads on libprimesieve tbh"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"a080c2ff-8c36-4c37-9e12-e1e91074f28c","type":"message","text":"brb with the taskset julia though","user":"U6QGE7S86","ts":"1617823888.223700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vXr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"brb with the taskset julia though"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"7b537f59-9919-4943-8c69-71b8fbc1b711","type":"message","text":"they use openmp, so maybe `OMP_NUM_THREADS=1`?","user":"UDB26738Q","ts":"1617823926.223900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vLLX3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"they use openmp, so maybe "},{"type":"text","text":"OMP_NUM_THREADS=1","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"c378a781-bf8a-4dfc-a6ac-a73b93bcb77e","type":"message","text":"uhm, no","user":"UDB26738Q","ts":"1617824010.224100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NE=m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"uhm, no"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"14ebabc8-4362-47f9-93ce-a776d5f13188","type":"message","text":"```julia&gt; @btime myprimecount(10^6) # with taskset --cpu-id 0 julia\n  20.339 μs (0 allocations: 0 bytes)\n78498\n\njulia&gt; @btime FastPrimeSieve.pcountprimes(10^6, segment_length=32*1024)\n  90.836 μs (25 allocations: 54.05 KiB)\n78498```","user":"U6QGE7S86","ts":"1617824011.224300","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617824034.000000"},"blocks":[{"type":"rich_text","block_id":"9NTK","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @btime myprimecount(10^6) # with taskset --cpu-id 0 julia\n  20.339 μs (0 allocations: 0 bytes)\n78498\n\njulia> @btime FastPrimeSieve.pcountprimes(10^6, segment_length=32*1024)\n  90.836 μs (25 allocations: 54.05 KiB)\n78498"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"9760e3fc-0816-4196-8af6-94aba8aae81f","type":"message","text":"Dont do pcountprimes but countprimes","user":"U6N6VQE30","ts":"1617824175.224600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mLJgx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Dont do pcountprimes but countprimes"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"a3bfde88-7f19-40c0-a161-040b381baf5a","type":"message","text":"The nunber of allocs should be 1","user":"U6N6VQE30","ts":"1617824206.224800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UgD/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The nunber of allocs should be 1"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"98a927bd-ada6-469f-9a66-3a527b30e1a0","type":"message","text":"ah, derp","user":"U6QGE7S86","ts":"1617824218.225000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Zia","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, derp"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"919b90ea-3259-4a43-b529-25d82a7f6178","type":"message","text":"```julia&gt; @btime FastPrimeSieve.countprimes(10^6, segment_length=32*1024)\n  88.198 μs (6 allocations: 52.97 KiB)\n78498```","user":"U6QGE7S86","ts":"1617824228.225200","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617824239.000000"},"blocks":[{"type":"rich_text","block_id":"zEbl","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @btime FastPrimeSieve.countprimes(10^6, segment_length=32*1024)\n  88.198 μs (6 allocations: 52.97 KiB)\n78498"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"37fa9306-449a-44ac-a0ef-367cd4775c70","type":"message","text":"oh, ok `OMP_NUM_THREADS` has to be set before running julia (or maybe before calling the library):\n```# 8 threads\njulia&gt; @btime @ccall libprimecount.primecount_pi((1e14)::Clong)::Clong\n  112.453 ms (0 allocations: 0 bytes)\n3204941750802\n\n# 1 thread\njulia&gt; @btime @ccall libprimecount.primecount_pi((1e14)::Clong)::Clong\n  444.847 ms (0 allocations: 0 bytes)\n3204941750802```","user":"UDB26738Q","ts":"1617824358.225500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2vqLL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, ok "},{"type":"text","text":"OMP_NUM_THREADS","style":{"code":true}},{"type":"text","text":" has to be set before running julia (or maybe before calling the library):\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"# 8 threads\njulia> @btime @ccall libprimecount.primecount_pi((1e14)::Clong)::Clong\n  112.453 ms (0 allocations: 0 bytes)\n3204941750802\n\n# 1 thread\njulia> @btime @ccall libprimecount.primecount_pi((1e14)::Clong)::Clong\n  444.847 ms (0 allocations: 0 bytes)\n3204941750802"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"50723ddb-4068-4365-9297-40d0f980c86b","type":"message","text":"oh, set how?","user":"U6QGE7S86","ts":"1617824395.225700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bE78z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh, set how?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"6b977d2e-7241-4d5b-b8c0-a09e9471b044","type":"message","text":"it's an environment variable, I ran\n```OMP_NUM_THREADS=1 julia```","user":"UDB26738Q","ts":"1617824421.225900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RzgAB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's an environment variable, I ran\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"OMP_NUM_THREADS=1 julia"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"6dedd4cc-84d3-4af0-83f7-0d00e471b702","type":"message","text":"```# set OMP_NUM_THREADS=1 taskset --cpu-list 0 julia and then...\n\njulia&gt; myprimecount(x) = @ccall libprimecount.primecount_pi((x)::Clonglong)::Clonglong\nmyprimecount (generic function with 1 method)\n\njulia&gt; @btime FastPrimeSieve.countprimes(10^6, segment_length=32*1024)\n  88.244 μs (6 allocations: 52.97 KiB)\n78498\n\njulia&gt; @btime myprimecount(10^6)\n  20.046 μs (0 allocations: 0 bytes)\n78498```","user":"U6QGE7S86","ts":"1617824556.226100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YJG","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"# set OMP_NUM_THREADS=1 taskset --cpu-list 0 julia and then...\n\njulia> myprimecount(x) = @ccall libprimecount.primecount_pi((x)::Clonglong)::Clonglong\nmyprimecount (generic function with 1 method)\n\njulia> @btime FastPrimeSieve.countprimes(10^6, segment_length=32*1024)\n  88.244 μs (6 allocations: 52.97 KiB)\n78498\n\njulia> @btime myprimecount(10^6)\n  20.046 μs (0 allocations: 0 bytes)\n78498"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"47c968ed-c639-4e4c-a5b2-a5eb942237a4","type":"message","text":"I'm very close to admitting my implementation is not fastest in this world","user":"U6N6VQE30","ts":"1617824730.226300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"av0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm very close to admitting my implementation is not fastest in this world"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"smile","users":["UDB26738Q","U6QGE7S86"],"count":2}]},{"client_msg_id":"ba5c8cba-d6a1-43a4-aff7-85c7b835b130","type":"message","text":"no shame in being beaten by people who handrolled SIMD","user":"U6QGE7S86","ts":"1617824755.226700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8lBk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no shame in being beaten by people who handrolled SIMD"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"34b2c567-e959-4859-9931-bdc09f9da4f5","type":"message","text":"Can you do singlethreaded 10^8 / 10^9?","user":"U6N6VQE30","ts":"1617824757.226900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ps91","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can you do singlethreaded 10^8 / 10^9?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"f27de135-9883-4967-8a88-4235f6eb35a3","type":"message","text":"It should be mostly equivalent","user":"U6N6VQE30","ts":"1617824786.227100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"io9xs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It should be mostly equivalent"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"22c84d7e-e57b-44f2-93a6-86aa2f32dc79","type":"message","text":"k, last one before actual work","user":"U6QGE7S86","ts":"1617824800.227300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sLYjK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"k, last one before actual work"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"ffb3d20e-d0bf-4f8c-ba00-f1a17d3dae16","type":"message","text":"It's not simd btw, it's basically unrolling a loop by hand that the compiler struggles with","user":"U6N6VQE30","ts":"1617824812.227500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V8qK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's not simd btw, it's basically unrolling a loop by hand that the compiler struggles with"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"af2d3604-2260-444d-8410-63467e34e5b1","type":"message","text":"And in julia that's done with macros","user":"U6N6VQE30","ts":"1617824839.227700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dQ4Uk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And in julia that's done with macros"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"3b90812c-79c0-441f-9e25-6fa1b3387f3a","type":"message","text":"```#OMP_NUM_THREADS=1 taskset --cpu-list 0 julia and then...\n\njulia&gt; @btime FastPrimeSieve.countprimes(10^8, segment_length=32*1024)\n  11.712 ms (7 allocations: 78.11 KiB)\n5761455\n\njulia&gt; @btime myprimecount(10^8)\n  188.844 μs (0 allocations: 0 bytes)\n5761455```","user":"U6QGE7S86","ts":"1617824962.227900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r=wzQ","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"#OMP_NUM_THREADS=1 taskset --cpu-list 0 julia and then...\n\njulia> @btime FastPrimeSieve.countprimes(10^8, segment_length=32*1024)\n  11.712 ms (7 allocations: 78.11 KiB)\n5761455\n\njulia> @btime myprimecount(10^8)\n  188.844 μs (0 allocations: 0 bytes)\n5761455"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"7f7e09da-8d98-4596-b0f1-33def0eb27fc","type":"message","text":"Sigh :(","user":"U6N6VQE30","ts":"1617824999.228100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cbb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sigh :("}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"upside_down_face","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"7ae88b78-e1c4-4413-9f38-9a47050cb7e8","type":"message","text":"At least it's faster than primes.jl (i hope :p)","user":"U6N6VQE30","ts":"1617825025.228400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UVr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"At least it's faster than primes.jl (i hope :p)"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"30709c1d-2f4a-4811-8806-e3ed1e13a279","type":"message","text":"Hold up","user":"U6N6VQE30","ts":"1617825125.228600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7J0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hold up"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"e288b914-93e0-4897-9016-8c0872d2441f","type":"message","text":"Is this using a dedicated algorithm?","user":"U6N6VQE30","ts":"1617825135.228800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zGChH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is this using a dedicated algorithm?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"9bd1da5a-7594-4f16-9305-b43bfa7eccaf","type":"message","text":"```julia&gt; @btime FastPrimeSieve.countprimes(10^8)\n  11.739 ms (7 allocations: 78.11 KiB)\n5761455\n\njulia&gt; @btime Primes.primes(10^8) |&gt; length\n  350.355 ms (7 allocations: 69.53 MiB)\n5761455```","user":"U6QGE7S86","ts":"1617825151.229000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kRNSa","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @btime FastPrimeSieve.countprimes(10^8)\n  11.739 ms (7 allocations: 78.11 KiB)\n5761455\n\njulia> @btime Primes.primes(10^8) |> length\n  350.355 ms (7 allocations: 69.53 MiB)\n5761455"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"608eb1f4-00dd-45c4-9587-52de6bd243d1","type":"message","text":"Good :p","user":"U6N6VQE30","ts":"1617825210.229200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"M7C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Good :p"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"dacdba9e-c7c6-415c-b344-a93c1f8e71f8","type":"message","text":"<https://github.com/kimwalisch/primecount|https://github.com/kimwalisch/primecount> is this it? It seems to do math tricks to speed up the count function","user":"U6N6VQE30","ts":"1617825240.229400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PntI0","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/kimwalisch/primecount","text":"https://github.com/kimwalisch/primecount"},{"type":"text","text":" is this it? It seems to do math tricks to speed up the count function"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"+1","users":["UDB26738Q"],"count":1},{"name":"+1::skin-tone-5","users":["U6QGE7S86"],"count":1}]},{"client_msg_id":"014b115c-e554-4e5f-aa3a-03fb6c941eb2","type":"message","text":"Maybe counting doesn't require you to know what the prime numbers really are?","user":"U6N6VQE30","ts":"1617825275.229600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1J5rm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe counting doesn't require you to know what the prime numbers really are?"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"15b2f6a0-65ea-4693-851d-f0e2486cc89a","type":"message","text":"yes, the docs say their algo is\n```In 1985 J. C. Lagarias, V. S. Miller and A. M. Odlyzko published a new algorithm based on Meissel's formula which has a lower runtime complexity of operations `O(x^(2/3)/log(x))` and which uses only `O(x^(1/3)log^2(x))` space.```","user":"U6QGE7S86","ts":"1617825275.229800","team":"T68168MUP","edited":{"user":"U6QGE7S86","ts":"1617825299.000000"},"blocks":[{"type":"rich_text","block_id":"5Q8NR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, the docs say their algo is\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"In 1985 J. C. Lagarias, V. S. Miller and A. M. Odlyzko published a new algorithm based on Meissel's formula which has a lower runtime complexity of operations `O(x^(2/3)/log(x))` and which uses only `O(x^(1/3)log^2(x))` space."}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"eeeed10f-68ce-4985-ac57-ba0dbb6f9d7e","type":"message","text":"Okay, then i feel better","user":"U6N6VQE30","ts":"1617825296.230200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MDbYm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Okay, then i feel better"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"bb88cc8f-339c-4f3e-8bb1-a87e707eafd5","type":"message","text":"I guess my algorithm is n / lg n","user":"U6N6VQE30","ts":"1617825369.231400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ovQn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess my algorithm is n / lg n"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"4329e148-bf4a-45a5-a8b3-1b27862cb787","type":"message","text":"Or n lg lg n, i forgot","user":"U6N6VQE30","ts":"1617825441.231600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MlEE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or n lg lg n, i forgot"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"ff4e2eb5-2ac1-42c9-b761-cc431c960a52","type":"message","text":"We should compare computing the sum of prime numbers or smth like that","user":"U6N6VQE30","ts":"1617825474.232000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"X8F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We should compare computing the sum of prime numbers or smth like that"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"D82498DA-F60A-4AF8-BAA6-5EF8B624A612","type":"message","text":"The primecount author has something for that too <https://github.com/kimwalisch/primesum|https://github.com/kimwalisch/primesum> :smile:","user":"UCZ7VBGUD","ts":"1617828092.237800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9YC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The primecount author has something for that too "},{"type":"link","url":"https://github.com/kimwalisch/primesum","text":"https://github.com/kimwalisch/primesum"},{"type":"text","text":" "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"66127c3a-94c9-40ed-9c43-5494c14e730e","type":"message","text":":|","user":"U6N6VQE30","ts":"1617828131.238000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/niBZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":":|"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86"},{"client_msg_id":"1feba75a-c44e-4e18-99e3-02b83b05047a","type":"message","text":"Sum of squares","user":"U6N6VQE30","ts":"1617828204.238200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JCGXs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sum of squares"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"joy","users":["U6QGE7S86","UDB26738Q","UCZ7VBGUD"],"count":3}]},{"client_msg_id":"44578873-8ef6-436d-9dbc-e017d17963d6","type":"message","text":"Thabks <@UCZ7VBGUD>, I added that to the Discourse","user":"U6QGE7S86","ts":"1617830252.239000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gYG+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thabks "},{"type":"user","user_id":"UCZ7VBGUD"},{"type":"text","text":", I added that to the Discourse"}]}]}],"thread_ts":"1617766939.202100","parent_user_id":"U6QGE7S86","reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]}]