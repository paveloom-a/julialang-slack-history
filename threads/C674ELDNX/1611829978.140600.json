[{"client_msg_id":"002bf3a2-6c75-46da-b2a1-46266a8d892d","type":"message","text":"OS: Linux, Julia v\"1.3.0\"\n\nI'm trying to build binary of a Foo C/C++ package using `run_wizard()` And when I run\n```autoreconf -fiv\n./configure --prefix=${prefix} --build=${MACHTYPE} --host=${target}```\nI got this error `Configure has not found BLAS libraries for your system.  Please install BLAS or provide appropriate -l and -L flags to LIBS and LDFLAGS to allow configure to locate the dcopy function.`\nfrom BB troubleshooting (<https://docs.binarybuilder.org/dev/troubleshooting/#Libraries-of-the-dependencies-can't-be-found>)\nI added\n```export LDFLAGS=\"-L${libdir}\"\nexport LIBS=\"-l${libdir}\"```\nand ran `./configure...`\nagain. Now I am running into `C++ compiler cannot create executables` error.\nThe config.log has the following (looks like -V and -qversion are wrong flags\n```configure:4950: $? = 0\nconfigure:4939: c++ -v &gt;&amp;5\nUsing built-in specs.\nCOLLECT_GCC=/opt/x86_64-linux-gnu/bin/x86_64-linux-gnu-g++\nCOLLECT_LTO_WRAPPER=/opt/x86_64-linux-gnu/bin/../libexec/gcc/x86_64-linux-gnu/9.1.0/lto-wrapper\nTarget: x86_64-linux-gnu\nConfigured with: /workspace/srcdir/gcc-9.1.0/configure --prefix=/workspace/destdir --target=x86_64-linux-gnu --host=x86_64-linux-musl --build=x86_64-linux-musl --disable-multilib --disable-werror --enable-shared --enable-host-shared --enable-threads=posix --with-sysroot=/workspace/destdir/x86_64-linux-gnu/sys-root --program-prefix=x86_64-linux-gnu- --disable-bootstrap --with-arch=core2 --enable-languages=c,c++,fortran,objc,obj-c++\nThread model: posix\ngcc version 9.1.0 (GCC)\nconfigure:4950: $? = 0\nconfigure:4939: c++ -V &gt;&amp;5\nx86_64-linux-gnu-g++: error: unrecognized command line option '-V'\nx86_64-linux-gnu-g++: fatal error: no input files\ncompilation terminated.\nconfigure:4950: $? = 1\nconfigure:4939: c++ -qversion &gt;&amp;5\nx86_64-linux-gnu-g++: error: unrecognized command line option '-qversion'; did you mean '--version'?\nx86_64-linux-gnu-g++: fatal error: no input files\ncompilation terminated.\nconfigure:4950: $? = 1\nconfigure:4970: checking whether the C++ compiler works\nconfigure:4992: c++   -l/workspace/destdir/lib conftest.cpp -L/workspace/destdir/lib &gt;&amp;5\n/opt/x86_64-linux-gnu/bin/../lib/gcc/x86_64-linux-gnu/9.1.0/../../../../x86_64-linux-gnu/bin/ld: cannot find -l/workspace/destdir/lib\ncollect2: error: ld returned 1 exit status\nconfigure:4996: $? = 1\nconfigure:5034: result: no```\nFrom arch wiki <https://bbs.archlinux.org/viewtopic.php?id=163913> I see that this error is due to setting wrong ldflags.\n\nWhat can I do to resolve this error? Am I missing something?","user":"UN5FQHFNY","ts":"1611829978.140600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bgKFw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OS: Linux, Julia v\"1.3.0\"\n\nI'm trying to build binary of a Foo C/C++ package using "},{"type":"text","text":"run_wizard()","style":{"code":true}},{"type":"text","text":" And when I run\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"autoreconf -fiv\n./configure --prefix=${prefix} --build=${MACHTYPE} --host=${target}"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I got this error "},{"type":"text","text":"Configure has not found BLAS libraries for your system.  Please install BLAS or provide appropriate -l and -L flags to LIBS and LDFLAGS to allow configure to locate the dcopy function.","style":{"code":true}},{"type":"text","text":"\nfrom BB troubleshooting ("},{"type":"link","url":"https://docs.binarybuilder.org/dev/troubleshooting/#Libraries-of-the-dependencies-can't-be-found"},{"type":"text","text":")\nI added\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"export LDFLAGS=\"-L${libdir}\"\nexport LIBS=\"-l${libdir}\""}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and ran "},{"type":"text","text":"./configure...","style":{"code":true}},{"type":"text","text":"\nagain. Now I am running into "},{"type":"text","text":"C++ compiler cannot create executables","style":{"code":true}},{"type":"text","text":" error.\nThe config.log has the following (looks like -V and -qversion are wrong flags\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"configure:4950: $? = 0\nconfigure:4939: c++ -v >&5\nUsing built-in specs.\nCOLLECT_GCC=/opt/x86_64-linux-gnu/bin/x86_64-linux-gnu-g++\nCOLLECT_LTO_WRAPPER=/opt/x86_64-linux-gnu/bin/../libexec/gcc/x86_64-linux-gnu/9.1.0/lto-wrapper\nTarget: x86_64-linux-gnu\nConfigured with: /workspace/srcdir/gcc-9.1.0/configure --prefix=/workspace/destdir --target=x86_64-linux-gnu --host=x86_64-linux-musl --build=x86_64-linux-musl --disable-multilib --disable-werror --enable-shared --enable-host-shared --enable-threads=posix --with-sysroot=/workspace/destdir/x86_64-linux-gnu/sys-root --program-prefix=x86_64-linux-gnu- --disable-bootstrap --with-arch=core2 --enable-languages=c,c++,fortran,objc,obj-c++\nThread model: posix\ngcc version 9.1.0 (GCC)\nconfigure:4950: $? = 0\nconfigure:4939: c++ -V >&5\nx86_64-linux-gnu-g++: error: unrecognized command line option '-V'\nx86_64-linux-gnu-g++: fatal error: no input files\ncompilation terminated.\nconfigure:4950: $? = 1\nconfigure:4939: c++ -qversion >&5\nx86_64-linux-gnu-g++: error: unrecognized command line option '-qversion'; did you mean '--version'?\nx86_64-linux-gnu-g++: fatal error: no input files\ncompilation terminated.\nconfigure:4950: $? = 1\nconfigure:4970: checking whether the C++ compiler works\nconfigure:4992: c++   -l/workspace/destdir/lib conftest.cpp -L/workspace/destdir/lib >&5\n/opt/x86_64-linux-gnu/bin/../lib/gcc/x86_64-linux-gnu/9.1.0/../../../../x86_64-linux-gnu/bin/ld: cannot find -l/workspace/destdir/lib\ncollect2: error: ld returned 1 exit status\nconfigure:4996: $? = 1\nconfigure:5034: result: no"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"From arch wiki "},{"type":"link","url":"https://bbs.archlinux.org/viewtopic.php?id=163913"},{"type":"text","text":" I see that this error is due to setting wrong ldflags.\n\nWhat can I do to resolve this error? Am I missing something?"}]}]}],"thread_ts":"1611829978.140600","reply_count":9,"reply_users_count":3,"latest_reply":"1611831375.142400","reply_users":["UDB26738Q","UN5FQHFNY","U01CH05FTMM"],"subscribed":false},{"client_msg_id":"28b1a3ca-d2cb-4cb9-a1db-40c05ea6bdb8","type":"message","text":"Patch the configure script not to use wrong flags? (why would they use non-existing flags in the first place?)","user":"UDB26738Q","ts":"1611830599.140700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L9m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Patch the configure script not to use wrong flags? (why would they use non-existing flags in the first place?)"}]}]}],"thread_ts":"1611829978.140600","parent_user_id":"UN5FQHFNY"},{"client_msg_id":"7ff627c1-5881-4bd6-aa2b-fd88cec686be","type":"message","text":"Unrelated: why gcc 9? A c++ package built with gcc 9 won't likely work with any released Julia version","user":"UDB26738Q","ts":"1611830650.140900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yH7V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Unrelated: why gcc 9? A c++ package built with gcc 9 won't likely work with any released Julia version"}]}]}],"thread_ts":"1611829978.140600","parent_user_id":"UN5FQHFNY"},{"client_msg_id":"c5fd69f2-dd3c-4278-969f-f8268dc65f3e","type":"message","text":"^^ Oh I thought patching source file should be avoided.","user":"UN5FQHFNY","ts":"1611830716.141100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"raY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"^^ Oh I thought patching source file should be avoided."}]}]}],"thread_ts":"1611829978.140600","parent_user_id":"UN5FQHFNY"},{"client_msg_id":"d933269c-3452-434f-b833-c51d85caf5ee","type":"message","text":"^ Ah that i saw ` c++ -v &gt;&amp;5` in the log. So changed gcc to 9.0.1 from default 4.8.5 (thinking that was the problem)","user":"UN5FQHFNY","ts":"1611830761.141300","team":"T68168MUP","edited":{"user":"UN5FQHFNY","ts":"1611830783.000000"},"blocks":[{"type":"rich_text","block_id":"AV5Hb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"^ Ah that i saw ` c++ -v >&5` in the log. So changed gcc to 9.0.1 from default 4.8.5 (thinking that was the problem)"}]}]}],"thread_ts":"1611829978.140600","parent_user_id":"UN5FQHFNY"},{"client_msg_id":"347fcc41-ac57-4ada-806e-d3ccbc8b4666","type":"message","text":"If the source code is wrong you can only patch it... :shrugging:","user":"UDB26738Q","ts":"1611830794.141600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gcjo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If the source code is wrong you can only patch it... "},{"type":"emoji","name":"shrugging"}]}]}],"thread_ts":"1611829978.140600","parent_user_id":"UN5FQHFNY"},{"client_msg_id":"d3b97a46-4462-4416-8413-ef9b793672da","type":"message","text":"But I have no idea why they're doing something wrong, maybe there is something else","user":"UDB26738Q","ts":"1611830819.141800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"otL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But I have no idea why they're doing something wrong, maybe there is something else"}]}]}],"thread_ts":"1611829978.140600","parent_user_id":"UN5FQHFNY"},{"client_msg_id":"0a4a3d7a-93f2-48ab-9ec2-e46b4a57eca0","type":"message","text":"^^ Ok I'll try making a patched config file.","user":"UN5FQHFNY","ts":"1611831084.142000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xreU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"^^ Ok I'll try making a patched config file."}]}]}],"thread_ts":"1611829978.140600","parent_user_id":"UN5FQHFNY"},{"client_msg_id":"99dc79e0-8cc9-4173-a8e8-7d4fdb15dbe6","type":"message","text":"^ Oh. I'll try to see what else might be the reason. Thank you","user":"UN5FQHFNY","ts":"1611831112.142200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+jlVM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"^ Oh. I'll try to see what else might be the reason. Thank you"}]}]}],"thread_ts":"1611829978.140600","parent_user_id":"UN5FQHFNY"},{"client_msg_id":"2a172701-9dad-4476-bc3d-157aff93da24","type":"message","text":"That `export LIBS=\"-l${libdir}\"` is wrong, it should be either `-lsomelibrary` or just remove that variable","user":"U01CH05FTMM","ts":"1611831375.142400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"srsUO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That "},{"type":"text","text":"export LIBS=\"-l${libdir}\"","style":{"code":true}},{"type":"text","text":" is wrong, it should be either "},{"type":"text","text":"-lsomelibrary","style":{"code":true}},{"type":"text","text":" or just remove that variable"}]}]}],"thread_ts":"1611829978.140600","parent_user_id":"UN5FQHFNY"}]