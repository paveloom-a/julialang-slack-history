[{"client_msg_id":"c701a9c8-2558-4689-a949-4f1e89e58859","type":"message","text":"<@U68A3ASP9> search for products is in <https://github.com/JuliaPackaging/BinaryBuilderBase.jl/blob/master/src/Products.jl|https://github.com/JuliaPackaging/BinaryBuilderBase.jl/blob/master/src/Products.jl> but this file wasn't changed in the last 2 months","user":"UDB26738Q","ts":"1613558562.459900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9jLV","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U68A3ASP9"},{"type":"text","text":" search for products is in "},{"type":"link","url":"https://github.com/JuliaPackaging/BinaryBuilderBase.jl/blob/master/src/Products.jl","text":"https://github.com/JuliaPackaging/BinaryBuilderBase.jl/blob/master/src/Products.jl"},{"type":"text","text":" but this file wasn't changed in the last 2 months"}]}]}],"thread_ts":"1613558562.459900","reply_count":21,"reply_users_count":2,"latest_reply":"1613560066.464300","reply_users":["UDB26738Q","U68A3ASP9"],"subscribed":false},{"client_msg_id":"14440e66-a7ac-4f5e-8349-37b5625cddb0","type":"message","text":"I actually saw a similar error yesterday and making the file executable seemed to fix it. Even though I was confused as the audit should automatically fix that, I didn't really have the time to dig deeper","user":"UDB26738Q","ts":"1613558679.460100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uLbi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I actually saw a similar error yesterday and making the file executable seemed to fix it. Even though I was confused as the audit should automatically fix that, I didn't really have the time to dig deeper"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"ac889c29-f763-4914-87be-aaf0e0b0fdb7","type":"message","text":"ok thanks. any idea where the symlinks come from?","user":"U68A3ASP9","ts":"1613558695.460300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z7aSz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok thanks. any idea where the symlinks come from?"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"4a6798d5-86c7-4582-8ddc-ff35f151e43b","type":"message","text":"I `mv` e.g. `nvdisasm` from `CUDA_full` to `$prefix`, but after some time that file is a symlink to the original `CUDA_full` artifact again (which I don't want, and doesn't work since I moved the file out of it breaking the artifact)","user":"U68A3ASP9","ts":"1613558736.460500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rjB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I "},{"type":"text","text":"mv","style":{"code":true}},{"type":"text","text":" e.g. "},{"type":"text","text":"nvdisasm","style":{"code":true}},{"type":"text","text":" from "},{"type":"text","text":"CUDA_full","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"$prefix","style":{"code":true}},{"type":"text","text":", but after some time that file is a symlink to the original "},{"type":"text","text":"CUDA_full","style":{"code":true}},{"type":"text","text":" artifact again (which I don't want, and doesn't work since I moved the file out of it breaking the artifact)"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"c3c92982-1045-449e-91cc-95da7bfc4bee","type":"message","text":"Nope :confused:","user":"UDB26738Q","ts":"1613558814.460700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pSz6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nope "},{"type":"emoji","name":"confused"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"5abe0bd1-fa92-4b46-8e07-a08eccf56b32","type":"message","text":"ok np, let me debug a little then :slightly_smiling_face:","user":"U68A3ASP9","ts":"1613558884.460900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1NW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok np, let me debug a little then "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q","reactions":[{"name":"pray","users":["UDB26738Q"],"count":1},{"name":"julia-debugger","users":["UDB26738Q"],"count":1}]},{"client_msg_id":"5f7c7cdd-7a74-4a8f-8512-7add1f536af8","type":"message","text":"huh, `$prefix` in the container points to `/workspace/destdir`, but there's also a `/workspace/x86_64-linux-gnu-libgfortran3-cxx11/destdir` which is where the auditor/BB finds those broken symlinks in...","user":"U68A3ASP9","ts":"1613559118.461300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NgR4R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"huh, "},{"type":"text","text":"$prefix","style":{"code":true}},{"type":"text","text":" in the container points to "},{"type":"text","text":"/workspace/destdir","style":{"code":true}},{"type":"text","text":", but there's also a "},{"type":"text","text":"/workspace/x86_64-linux-gnu-libgfortran3-cxx11/destdir","style":{"code":true}},{"type":"text","text":" which is where the auditor/BB finds those broken symlinks in..."}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"ef9a4a13-fa75-4720-91bd-7f837ab40ea6","type":"message","text":"aha","user":"U68A3ASP9","ts":"1613559395.461500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"I1OF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"aha"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"a8b73956-6080-499c-b469-56945adb4bfd","type":"message","text":"<https://github.com/JuliaPackaging/BinaryBuilderBase.jl/commit/c91148e1bbcae698793b8e3b5ca8feed0644d332#diff-48f90c9f7d86cf3e80c85fa66b31702f51d91cb8f6ce531575d7cc1f85f200f9R356> vs <https://github.com/JuliaPackaging/Yggdrasil/blob/fa5de893f6333992bd11b3a2c34d8c350fa278a0/C/CUDA/CUDA%4011.2/build_tarballs.jl#L14>","user":"U68A3ASP9","ts":"1613559415.461700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"42dc/","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaPackaging/BinaryBuilderBase.jl/commit/c91148e1bbcae698793b8e3b5ca8feed0644d332#diff-48f90c9f7d86cf3e80c85fa66b31702f51d91cb8f6ce531575d7cc1f85f200f9R356"},{"type":"text","text":" vs "},{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/blob/fa5de893f6333992bd11b3a2c34d8c350fa278a0/C/CUDA/CUDA%4011.2/build_tarballs.jl#L14"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"3b7e160b-b21a-44ff-8139-f0c38bbafcc0","type":"message","text":"note that LLVM will have the same issue: <https://github.com/JuliaPackaging/Yggdrasil/blob/fa5de893f6333992bd11b3a2c34d8c350fa278a0/L/LLVM/common.jl#L268-L269>","user":"U68A3ASP9","ts":"1613559443.461900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Uziyd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"note that LLVM will have the same issue: "},{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/blob/fa5de893f6333992bd11b3a2c34d8c350fa278a0/L/LLVM/common.jl#L268-L269"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"67077f24-6e08-4ffb-9167-b3ea767b9d7f","type":"message","text":"cc <@U67BJLYCS>","user":"U68A3ASP9","ts":"1613559449.462100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eGoe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cc "},{"type":"user","user_id":"U67BJLYCS"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"8d950709-76bc-4ad8-81b1-33bd06b1af5e","type":"message","text":"changing to `rm -rf ${prefix}/*` should work","user":"U68A3ASP9","ts":"1613559462.462300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mZbzd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"changing to "},{"type":"text","text":"rm -rf ${prefix}/*","style":{"code":true}},{"type":"text","text":" should work"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"48185914-06cd-48e7-9902-546c7626ee03","type":"message","text":"Oh wow","user":"UDB26738Q","ts":"1613559641.462500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uMkW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh wow"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"04119bc4-37fe-4179-b43c-b87fee6cb85b","type":"message","text":"So the problem is that `rm -rf ${prefix}` deletes the symlink and not its content?","user":"UDB26738Q","ts":"1613559833.462700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vy0Fv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So the problem is that "},{"type":"text","text":"rm -rf ${prefix}","style":{"code":true}},{"type":"text","text":" deletes the symlink and not its content?"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"3845fb41-17ce-4624-a547-d4697ce7e6e0","type":"message","text":"yup","user":"U68A3ASP9","ts":"1613559854.462900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CJ0AF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yup"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"c78a58a8-775d-473c-813d-d0b626809af8","type":"message","text":"I'll add a commit that fixes all instances of this bug (just CUDA and LLVM)","user":"U68A3ASP9","ts":"1613559884.463100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DgS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'll add a commit that fixes all instances of this bug (just CUDA and LLVM)"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"988869f4-ed35-437a-97ed-7706a460f1d0","type":"message","text":"Ok, makes sense, but I still don't understand the error I saw yesterday then :sweat_smile: I don't think symlinks were involved","user":"UDB26738Q","ts":"1613559926.463300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3nz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, makes sense, but I still don't understand the error I saw yesterday then "},{"type":"emoji","name":"sweat_smile"},{"type":"text","text":" I don't think symlinks were involved"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"ff107076-4e01-4279-80cf-b0c7616327dd","type":"message","text":"does `[skip ci] [skip build]` work? it seems to have kicked off a mass rebuild of CUDA artifacts","user":"U68A3ASP9","ts":"1613559995.463500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MqCb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does "},{"type":"text","text":"[skip ci] [skip build]","style":{"code":true}},{"type":"text","text":" work? it seems to have kicked off a mass rebuild of CUDA artifacts"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"c740c544-22e1-401a-9163-84322d41455f","type":"message","text":"It should","user":"UDB26738Q","ts":"1613560012.463700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"axyAS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It should"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"28efd2e2-e36d-4a1f-8c9b-225c5ab89e69","type":"message","text":"which I'd like to avoid since it guarantees conflicts in General :stuck_out_tongue:","user":"U68A3ASP9","ts":"1613560019.463900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"o+UhQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which I'd like to avoid since it guarantees conflicts in General "},{"type":"emoji","name":"stuck_out_tongue"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"0d9d3c08-e513-4999-9b58-9b3594ccff6c","type":"message","text":"The former should prevent build on master, the latter in the pull request","user":"UDB26738Q","ts":"1613560046.464100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p+zW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The former should prevent build on master, the latter in the pull request"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"},{"client_msg_id":"89f9af64-3035-4ef6-bfd6-52f701118931","type":"message","text":"okay","user":"U68A3ASP9","ts":"1613560066.464300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+cMBM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"okay"}]}]}],"thread_ts":"1613558562.459900","parent_user_id":"UDB26738Q"}]