[{"client_msg_id":"15aacfaa-4647-4258-abd9-c30ddb475848","type":"message","text":"It  says \"Generating meta.json\" -- I see three places that print that","user":"U012FH66MFW","ts":"1610158967.412400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Nl9jB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It  says \"Generating meta.json\" -- I see three places that print that"}]}]}],"thread_ts":"1610158967.412400","reply_count":52,"reply_users_count":2,"latest_reply":"1610161166.423400","reply_users":["UDB26738Q","U012FH66MFW"],"subscribed":false},{"client_msg_id":"ed170ad6-01c3-4ba5-9a99-3a0a78462dc0","type":"message","text":"<https://github.com/JuliaPackaging/Yggdrasil/blob/ccf612850d25045e433cb86a9e14df12db94a6e6/azure-pipelines.yml#L121>","user":"UDB26738Q","ts":"1610158987.412500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vDt","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/blob/ccf612850d25045e433cb86a9e14df12db94a6e6/azure-pipelines.yml#L121"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"f3c7d2b0-4ff7-4838-9165-d72e41b16bcf","type":"message","text":"yeah, just noticed the \"Downloading sources...\" makes it unique","user":"U012FH66MFW","ts":"1610159038.412800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oGODz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, just noticed the \"Downloading sources...\" makes it unique"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"8d30dccb-cbdb-4533-853e-2caeb0b5a3e3","type":"message","text":"thanks","user":"U012FH66MFW","ts":"1610159040.413000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aP2zI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"2478d15a-2973-42bb-b9fd-e4c7e13f2041","type":"message","text":"so the problem ~is~ might be in BB, which contains functions `merge_json_objects` and `cleanup_merged_object` which deal with the meta JSON and in particular rely on the specific encoding, which of course now is different...","user":"U012FH66MFW","ts":"1610159388.413200","team":"T68168MUP","edited":{"user":"U012FH66MFW","ts":"1610159513.000000"},"blocks":[{"type":"rich_text","block_id":"a7Mc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so the problem "},{"type":"text","text":"is","style":{"strike":true}},{"type":"text","text":" might be in BB, which contains functions "},{"type":"text","text":"merge_json_objects","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"cleanup_merged_object","style":{"code":true}},{"type":"text","text":" which deal with the meta JSON and in particular rely on the specific encoding, which of course now is different..."}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"e06fe20b-be0e-4607-809c-3d047193843d","type":"message","text":"... ok just edited that remark of mine... I am not sure anymore that's the exact problem, but it's in any case something I did not test, because I wasn't aware of this","user":"U012FH66MFW","ts":"1610159557.413700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aw5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"... ok just edited that remark of mine... I am not sure anymore that's the exact problem, but it's in any case something I did not test, because I wasn't aware of this"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"04676621-c8a6-4cbe-a28e-6eda18f5e4e0","type":"message","text":"<https://github.com/JuliaBinaryWrappers/Singular_jll.jl/commit/d41a3f47063294405d6af1f2fa489a05842db6fe> does it look good?","user":"UDB26738Q","ts":"1610159572.413900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TOII","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaBinaryWrappers/Singular_jll.jl/commit/d41a3f47063294405d6af1f2fa489a05842db6fe"},{"type":"text","text":" does it look good?"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"556fb161-d56c-487e-9e93-2903a2e14ea3","type":"message","text":"<https://github.com/JuliaRegistries/General/pull/27614/files>","user":"UDB26738Q","ts":"1610159611.414100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qho","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaRegistries/General/pull/27614/files"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"02f73db5-19e7-4bf7-9238-1f0406143615","type":"message","text":"indeed it does, the compat spec for `FLINT_jll` is correct now!","user":"U012FH66MFW","ts":"1610159617.414300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sAvH2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"indeed it does, the compat spec for "},{"type":"text","text":"FLINT_jll","style":{"code":true}},{"type":"text","text":" is correct now!"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"62ecff0c-0321-4095-94ea-06704090af9b","type":"message","text":"no wait","user":"U012FH66MFW","ts":"1610159647.414500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aWH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no wait"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"668ad694-582c-4d24-8472-f8fb4fa2851f","type":"message","text":"huhhmmmm","user":"U012FH66MFW","ts":"1610159657.414700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VfvI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"huhhmmmm"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"3950433c-f06f-4c5b-8f30-75e5de0d0ed4","type":"message","text":"I always get confused between the different ways to encode compat versions between VersionSpec; Project.toml; and the registry...","user":"U012FH66MFW","ts":"1610159675.414900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"etw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I always get confused between the different ways to encode compat versions between VersionSpec; Project.toml; and the registry..."}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"79255528-3560-4d79-ae02-43d1ac0962b6","type":"message","text":"me too","user":"UDB26738Q","ts":"1610159690.415100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"daW4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"me too"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"19cb35f3-f011-4d05-9f55-92401f897e32","type":"message","text":"but the changes look consistent to me","user":"UDB26738Q","ts":"1610159748.415300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rD4G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but the changes look consistent to me"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"60f76d80-0e51-43e0-84d0-e61ee625d524","type":"message","text":"the VersionSpec in the Singular_jll builder is specifying `VersionSpec(\"200.700\")` which should be the same as `~200.700` in `Project.toml`; confirmed as follows:\n```julia&gt; Pkg.Types.semver_spec(\"~200.700\")\nVersionSpec(\"200.700\")\n\njulia&gt; Pkg.Types.semver_spec(\"^200.700\")\nVersionSpec(\"200.700.0-200\")```","user":"U012FH66MFW","ts":"1610159782.415500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wIpU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the VersionSpec in the Singular_jll builder is specifying "},{"type":"text","text":"VersionSpec(\"200.700\")","style":{"code":true}},{"type":"text","text":" which should be the same as "},{"type":"text","text":"~200.700","style":{"code":true}},{"type":"text","text":" in "},{"type":"text","text":"Project.toml","style":{"code":true}},{"type":"text","text":"; confirmed as follows:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> Pkg.Types.semver_spec(\"~200.700\")\nVersionSpec(\"200.700\")\n\njulia> Pkg.Types.semver_spec(\"^200.700\")\nVersionSpec(\"200.700.0-200\")"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"1f0c44cd-03b9-4251-93e2-c7bf15ae136a","type":"message","text":"but it produced `FLINT_jll = \"200.700\"` in `Project.toml` not `FLINT_jll = \"~200.700\"`","user":"U012FH66MFW","ts":"1610159812.415700","team":"T68168MUP","edited":{"user":"U012FH66MFW","ts":"1610159845.000000"},"blocks":[{"type":"rich_text","block_id":"I88","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but it produced "},{"type":"text","text":"FLINT_jll = \"200.700\"","style":{"code":true}},{"type":"text","text":" in "},{"type":"text","text":"Project.toml","style":{"code":true}},{"type":"text","text":" not "},{"type":"text","text":"FLINT_jll = \"~200.700\"","style":{"code":true}}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"3ddb82ed-b7fd-4b32-b15d-4160df02ee06","type":"message","text":"`\"200.700\"` is equivalent to `\"^200.700\"`","user":"UDB26738Q","ts":"1610159837.415900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0HQq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"\"200.700\"","style":{"code":true}},{"type":"text","text":" is equivalent to "},{"type":"text","text":"\"^200.700\"","style":{"code":true}}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"565fb5e9-6443-431e-a393-d8bcefc9712f","type":"message","text":"`^` is the default","user":"UDB26738Q","ts":"1610159848.416200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IlYT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"^","style":{"code":true}},{"type":"text","text":" is the default"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"b9a58a9a-6a0e-44bb-aee1-1d0c5ffa1e95","type":"message","text":"typo, I meant `~`","user":"U012FH66MFW","ts":"1610159858.416400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2o7t9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"typo, I meant "},{"type":"text","text":"~","style":{"code":true}}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"a9d962dc-6e95-4397-9d29-98ff12a4f486","type":"message","text":"well, if the entry in the registry is wrong, you're better off commenting to stop registration","user":"UDB26738Q","ts":"1610159891.416600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dZAV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, if the entry in the registry is wrong, you're better off commenting to stop registration"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"89ba5bda-eef8-4196-98d5-7055bfa6915f","type":"message","text":"so in the registry you'd expect\n``` FLINT_jll = \"200.700.0-200.700\" ```\n?","user":"UDB26738Q","ts":"1610159957.416800","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1610159968.000000"},"blocks":[{"type":"rich_text","block_id":"b1Xv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so in the registry you'd expect\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":" FLINT_jll = \"200.700.0-200.700\" "}]},{"type":"rich_text_section","elements":[{"type":"text","text":"?"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"46f83bb5-5210-455d-8458-a75b392fb049","type":"message","text":"yup -- but the registry is not to blame as the `Project.toml` is already wrong","user":"U012FH66MFW","ts":"1610160030.417100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"c50","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yup -- but the registry is not to blame as the "},{"type":"text","text":"Project.toml","style":{"code":true}},{"type":"text","text":" is already wrong"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"2a47bd93-1bd8-46ea-b317-9a8ddef9231d","type":"message","text":"yeah, just to understand","user":"UDB26738Q","ts":"1610160043.417300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3/+4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, just to understand"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"203d6222-14de-48da-b6b1-8a4aeda2e46d","type":"message","text":"sure, sure, I just wanted to make sure I am unambiguous (as this is confusing enough already)","user":"U012FH66MFW","ts":"1610160064.417500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YTSVz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure, sure, I just wanted to make sure I am unambiguous (as this is confusing enough already)"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"701d0075-5ec7-4de7-b130-89ce285d325d","type":"message","text":"so I guess now I need to look at the code which \"serializes\" the VersionSpec into the `Project.toml`","user":"U012FH66MFW","ts":"1610160066.417700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xVHm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so I guess now I need to look at the code which \"serializes\" the VersionSpec into the "},{"type":"text","text":"Project.toml","style":{"code":true}}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"504be6d9-af0b-4ed0-91e5-11bc93399984","type":"message","text":"I don't really understand all the Pkg stuff honestly :smile:","user":"UDB26738Q","ts":"1610160071.417900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1HDA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't really understand all the Pkg stuff honestly "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"f9f5d3df-652a-4096-98cf-f830f89f7a42","type":"message","text":"can't say that I do, I just am trying to scrape by :wink:","user":"U012FH66MFW","ts":"1610160097.418100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iOo6L","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can't say that I do, I just am trying to scrape by "},{"type":"emoji","name":"wink"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"46681b5c-7d21-4ad0-bae1-21444ead334b","type":"message","text":"do you happen to know from the top of your head where the Project.toml for the JLLs is generated?","user":"U012FH66MFW","ts":"1610160162.418300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"btYN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"do you happen to know from the top of your head where the Project.toml for the JLLs is generated?"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"6533cd29-5dbc-483d-a21c-75842a5df19d","type":"message","text":"ah probably `rebuild_jll_package` in BB","user":"U012FH66MFW","ts":"1610160217.418500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ICTL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah probably "},{"type":"text","text":"rebuild_jll_package","style":{"code":true}},{"type":"text","text":" in BB"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"8ddc048c-7bf1-48c7-a750-368d369cb236","type":"message","text":"there is a build project function","user":"UDB26738Q","ts":"1610160228.418700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/WEx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there is a build project function"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"9432980e-12e2-4a88-8554-35f4e7c61e7f","type":"message","text":"in `AutoBuild.jl`","user":"UDB26738Q","ts":"1610160242.418900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PY2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in "},{"type":"text","text":"AutoBuild.jl","style":{"code":true}}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"5f2ba90a-11c0-4448-97ee-5900fdd863e2","type":"message","text":"err, `build_jll_package` -- I scrolled to far :joy:","user":"U012FH66MFW","ts":"1610160243.419100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4Qc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"err, "},{"type":"text","text":"build_jll_package","style":{"code":true}},{"type":"text","text":" -- I scrolled to far "},{"type":"emoji","name":"joy"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"ec98e4d3-79f3-436c-a2d5-56b2d94f5fb2","type":"message","text":"yeah, that makes sense","user":"U012FH66MFW","ts":"1610160247.419300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1Fk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, that makes sense"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"9fbefa9c-82fc-4aba-8a65-1a65d2827277","type":"message","text":"and that in turn uses the data from `build_project_dict`","user":"U012FH66MFW","ts":"1610160288.419500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ab1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and that in turn uses the data from "},{"type":"text","text":"build_project_dict","style":{"code":true}}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"52efc2a4-4994-4d2f-b6c0-9df87f90f233","type":"message","text":"aahhhh and *that* I clearly did not adjust","user":"U012FH66MFW","ts":"1610160303.419700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gR1f","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"aahhhh and "},{"type":"text","text":"that","style":{"bold":true}},{"type":"text","text":" I clearly did not adjust"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"9ee5b23c-2396-46da-b130-9ce238f0641f","type":"message","text":"so BBB is (well, was) fine but you needed to update BB accordingly?","user":"UDB26738Q","ts":"1610160405.419900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IsF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so BBB is (well, was) fine but you needed to update BB accordingly?"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"eeec6cbd-1148-47d9-849d-ac97521a3b6a","type":"message","text":"indeed, it has a very naive way of serializing a complex `VersionSpec`: it calls `string()` on it... but that does not produce results suitable for serialization. I know because that was what I tried at first, before turning to that more complicated JSON serialization code from my BBB PR.","user":"U012FH66MFW","ts":"1610160407.420100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5GN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"indeed, it has a very naive way of serializing a complex "},{"type":"text","text":"VersionSpec","style":{"code":true}},{"type":"text","text":": it calls "},{"type":"text","text":"string()","style":{"code":true}},{"type":"text","text":" on it... but that does not produce results suitable for serialization. I know because that was what I tried at first, before turning to that more complicated JSON serialization code from my BBB PR."}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"6b88ee28-06f5-4043-992f-503c63b98b3c","type":"message","text":"I need(ed) to update both BB and BBB","user":"U012FH66MFW","ts":"1610160429.420300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YiQK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I need(ed) to update both BB and BBB"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"0a12faa8-560e-4454-8292-4ebbde5154f1","type":"message","text":"BBB produces the meta.json and so of course it must put all the required info in there","user":"U012FH66MFW","ts":"1610160445.420500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W+jgq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"BBB produces the meta.json and so of course it must put all the required info in there"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"82542118-4514-4f42-a2f3-a7ee0f921a9b","type":"message","text":"BB takes the meta.json and turns it into a Project.toml","user":"U012FH66MFW","ts":"1610160455.420700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+ant","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"BB takes the meta.json and turns it into a Project.toml"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"97c6f442-60bb-4d98-9875-dcec43f0dbf8","type":"message","text":"but all this boils down to is that there needs to be an \"inverse\" to `Pkg.Types.semver_spec` (if one has that, then the BBB change can be drastically simplified, to simply use that). IIRC there is an old Pkg.jl feature request for such a thing ...","user":"U012FH66MFW","ts":"1610160523.420900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ilIlO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but all this boils down to is that there needs to be an \"inverse\" to "},{"type":"text","text":"Pkg.Types.semver_spec","style":{"code":true}},{"type":"text","text":" (if one has that, then the BBB change can be drastically simplified, to simply use that). IIRC there is an old Pkg.jl feature request for such a thing ..."}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"b555e5ac-bd83-4222-b880-a3f87c570ba5","type":"message","text":"I see","user":"UDB26738Q","ts":"1610160593.421100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KJL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"12d4a1c6-2a8d-4e70-ad41-31395592df55","type":"message","text":"of course another alternative would be to just accept semver strings in the builder, and pass those on \"raw\" (after validating them via `semver_spec`) -- that's the \"trick\" I ended up using to implement `julia_compat` ... in retrospect, probably for similar reasons, I just forgot :joy:","user":"U012FH66MFW","ts":"1610160596.421300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iqP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"of course another alternative would be to just accept semver strings in the builder, and pass those on \"raw\" (after validating them via "},{"type":"text","text":"semver_spec","style":{"code":true}},{"type":"text","text":") -- that's the \"trick\" I ended up using to implement "},{"type":"text","text":"julia_compat","style":{"code":true}},{"type":"text","text":" ... in retrospect, probably for similar reasons, I just forgot "},{"type":"emoji","name":"joy"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"99510bff-39d6-4fdb-8c17-e8c3183c5fe8","type":"message","text":"somewhat related: <https://github.com/JuliaLang/Pkg.jl/issues/1155>","user":"U012FH66MFW","ts":"1610160699.421500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YPnyp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"somewhat related: "},{"type":"link","url":"https://github.com/JuliaLang/Pkg.jl/issues/1155"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"18d2c07b-06db-498d-957c-21ec62ffadd9","type":"message","text":".... which is worked around for Registrator.jl here: <https://github.com/JuliaRegistries/Registrator.jl/pull/90/files>","user":"U012FH66MFW","ts":"1610160759.421700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"H4Ds","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":".... which is worked around for Registrator.jl here: "},{"type":"link","url":"https://github.com/JuliaRegistries/Registrator.jl/pull/90/files"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"9e5e297e-7127-48ca-8846-efcd566ec28e","type":"message","text":"but I can't use that, because the `A - B` syntax for compat entries is only supported in Julia &gt;= 1.4 (or so)","user":"U012FH66MFW","ts":"1610160785.421900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gpG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but I can't use that, because the "},{"type":"text","text":"A - B","style":{"code":true}},{"type":"text","text":" syntax for compat entries is only supported in Julia >= 1.4 (or so)"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"cf5f5d08-ff9f-49e6-8c0a-6ba0df543f85","type":"message","text":"`ranges` was mentioned in the error message","user":"UDB26738Q","ts":"1610160792.422100","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1610160793.000000"},"blocks":[{"type":"rich_text","block_id":"zrX8P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ranges","style":{"code":true}},{"type":"text","text":" was mentioned in the error message"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"6422149d-f869-42bd-b3c2-d38968925230","type":"message","text":"yeah, the VersionSpec is a list of version ranges; I added code to BBB to serialize and deserialize those","user":"U012FH66MFW","ts":"1610160819.422400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2/n","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, the VersionSpec is a list of version ranges; I added code to BBB to serialize and deserialize those"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"87e8c6d2-a380-4453-8b72-0ec96e616d22","type":"message","text":"right, I dropped the ball on that error: my guess still is that the code in BB which process the meta json may need to be adapted to the new JSON format","user":"U012FH66MFW","ts":"1610160847.422600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oQsk+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"right, I dropped the ball on that error: my guess still is that the code in BB which process the meta json may need to be adapted to the new JSON format"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"e8888bf2-2cc5-4ad2-a0f0-493ffe1ef2cf","type":"message","text":"but working on that doesn't make sense until I can figure out how to correctly serialize the VersionSpec back into a valid compat entry :wink:","user":"U012FH66MFW","ts":"1610160879.422800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P7Vs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but working on that doesn't make sense until I can figure out how to correctly serialize the VersionSpec back into a valid compat entry "},{"type":"emoji","name":"wink"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"4bd1b791-b5f2-400b-948b-6f49b7762d06","type":"message","text":"one option would be to cheat: only support a subset of all VersionSpec, i.e. just `^x.y` and `~x.y` but no more complex ones... I.e. no `1.2.3-1.2.5` (well, I guess I could transform that to `=1.2.3, =1.2.4, =1.2.5` since prerelease versions are not supposed to be used there anyway...","user":"U012FH66MFW","ts":"1610161094.423000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qSL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"one option would be to cheat: only support a subset of all VersionSpec, i.e. just "},{"type":"text","text":"^x.y","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"~x.y","style":{"code":true}},{"type":"text","text":" but no more complex ones... I.e. no "},{"type":"text","text":"1.2.3-1.2.5","style":{"code":true}},{"type":"text","text":" (well, I guess I could transform that to "},{"type":"text","text":"=1.2.3, =1.2.4, =1.2.5","style":{"code":true}},{"type":"text","text":" since prerelease versions are not supposed to be used there anyway..."}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"bed67590-a3e7-442b-8baf-9f764f025fb5","type":"message","text":"I mean realistically, most users of this will only use a simple VersionSpec in their dependencies...","user":"U012FH66MFW","ts":"1610161122.423200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GfD4g","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I mean realistically, most users of this will only use a simple VersionSpec in their dependencies..."}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"},{"client_msg_id":"5e17741a-8025-455b-99a2-4b198f07ecbe","type":"message","text":"anyway, gotta sleep now and think a bit more about ... I am tempted to say \"just allow passing semver strings, and avoid all the complexity\" but perhaps you or <@U66GD0880> have concerns about that?","user":"U012FH66MFW","ts":"1610161166.423400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l=TvM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"anyway, gotta sleep now and think a bit more about ... I am tempted to say \"just allow passing semver strings, and avoid all the complexity\" but perhaps you or "},{"type":"user","user_id":"U66GD0880"},{"type":"text","text":" have concerns about that?"}]}]}],"thread_ts":"1610158967.412400","parent_user_id":"U012FH66MFW"}]