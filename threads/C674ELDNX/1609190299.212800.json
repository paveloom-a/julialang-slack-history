[{"client_msg_id":"c0382851-63d1-4f59-9e8a-9e419da77e3b","type":"message","text":"I've asked about this before, but it has gotten lost to slack history limit.\nI'm still having some trouble getting a local run of the `GDAL` Yggdrasil script to work.\n\nI am now working on `1.6.0-DEV` (compiled from the `release-1.6` branch)\n\n`Version 1.6.0-DEV.1780 (2020-12-19)`\n`release-1.6/de69b02a48 (fork: 58 commits, 19 days)`\n\nand I am using the `master` branches of `BinaryBuilder` and `BinaryBuilderBase`\n\n`[12aac903] BinaryBuilder v0.3.0 <https://github.com/JuliaPackaging/BinaryBuilder.jl.git#master>`\n`[7f725544] BinaryBuilderBase v0.5.0 <https://github.com/JuliaPackaging/BinaryBuilderBase.jl.git#master>`\n\nrunning `julia build_tarballs.jl --verbose --debug` fails resolving dependency versions like:\n\n```[ Info: Copying content of bundled in srcdir...\n   Resolving package versions...\nERROR: LoadError: Unsatisfiable requirements detected for package LibSSH2_jll [29816b5a]:\n LibSSH2_jll [29816b5a] log:\n ├─possible versions are: 1.9.1 or uninstalled\n └─restricted to versions 1.9.0 by an explicit requirement — no versions left\nStacktrace:\n  [1] check_constraints(graph::Pkg.Resolve.Graph)```\nI have also tried on a nightly build with the same results.\n\n`Version 1.7.0-DEV.45 (2020-12-13)`\n`Commit 8f2b0e7176 (15 days old master)`\n\nIt passes CI and builds in the <https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId=8050&amp;view=logs&amp;j=602baf21-6ef1-59f6-fbf0-2d9fa93f2756&amp;t=01a2bb1e-9661-5612-34b4-6bc9235fd7d7|Azure pipeline> . Are there any other differences in the CI environment that I would need to make to get it working locally?","user":"UQYEMLNQ4","ts":"1609190299.212800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Rjr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I've asked about this before, but it has gotten lost to slack history limit.\nI'm still having some trouble getting a local run of the "},{"type":"text","text":"GDAL","style":{"code":true}},{"type":"text","text":" Yggdrasil script to work.\n\nI am now working on "},{"type":"text","text":"1.6.0-DEV","style":{"code":true}},{"type":"text","text":" (compiled from the "},{"type":"text","text":"release-1.6","style":{"code":true}},{"type":"text","text":" branch)\n\n"},{"type":"text","text":"Version 1.6.0-DEV.1780 (2020-12-19)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"release-1.6/de69b02a48 (fork: 58 commits, 19 days)","style":{"code":true}},{"type":"text","text":"\n\nand I am using the "},{"type":"text","text":"master","style":{"code":true}},{"type":"text","text":" branches of "},{"type":"text","text":"BinaryBuilder","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"BinaryBuilderBase","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"[12aac903] BinaryBuilder v0.3.0 ","style":{"code":true}},{"type":"link","url":"https://github.com/JuliaPackaging/BinaryBuilder.jl.git#master","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"[7f725544] BinaryBuilderBase v0.5.0 ","style":{"code":true}},{"type":"link","url":"https://github.com/JuliaPackaging/BinaryBuilderBase.jl.git#master","style":{"code":true}},{"type":"text","text":"\n\nrunning "},{"type":"text","text":"julia build_tarballs.jl --verbose --debug","style":{"code":true}},{"type":"text","text":" fails resolving dependency versions like:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"[ Info: Copying content of bundled in srcdir...\n   Resolving package versions...\nERROR: LoadError: Unsatisfiable requirements detected for package LibSSH2_jll [29816b5a]:\n LibSSH2_jll [29816b5a] log:\n ├─possible versions are: 1.9.1 or uninstalled\n └─restricted to versions 1.9.0 by an explicit requirement — no versions left\nStacktrace:\n  [1] check_constraints(graph::Pkg.Resolve.Graph)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI have also tried on a nightly build with the same results.\n\n"},{"type":"text","text":"Version 1.7.0-DEV.45 (2020-12-13)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"Commit 8f2b0e7176 (15 days old master)","style":{"code":true}},{"type":"text","text":"\n\nIt passes CI and builds in the "},{"type":"link","url":"https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId=8050&view=logs&j=602baf21-6ef1-59f6-fbf0-2d9fa93f2756&t=01a2bb1e-9661-5612-34b4-6bc9235fd7d7","text":"Azure pipeline"},{"type":"text","text":" . Are there any other differences in the CI environment that I would need to make to get it working locally?"}]}]}],"thread_ts":"1609190299.212800","reply_count":8,"reply_users_count":2,"latest_reply":"1609231017.214400","reply_users":["UDB26738Q","UQYEMLNQ4"],"subscribed":false},{"client_msg_id":"8da6aa35-040e-4d78-89cd-aa67f2af0b9d","type":"message","text":"if you want to use the same environment as Yggdrasil, just instantiate it, it's in the `.ci/` directory","user":"UDB26738Q","ts":"1609190872.212900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jy9wn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you want to use the same environment as Yggdrasil, just instantiate it, it's in the "},{"type":"text","text":".ci/","style":{"code":true}},{"type":"text","text":" directory"}]}]}],"thread_ts":"1609190299.212800","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"72fe07eb-c2af-4c7c-8d6b-fbc13897c2b4","type":"message","text":"Would the difference between the Project.TOML version and master be large?","user":"UQYEMLNQ4","ts":"1609191529.213100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yHx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Would the difference between the Project.TOML version and master be large?"}]}]}],"thread_ts":"1609190299.212800","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"91fde5b2-62c3-4850-9247-b6f0939d2e98","type":"message","text":"not much, but at least you're sure to use _exactly_ the same version of everything (apart from julia)","user":"UDB26738Q","ts":"1609191564.213300","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1609191570.000000"},"blocks":[{"type":"rich_text","block_id":"VQO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not much, but at least you're sure to use "},{"type":"text","text":"exactly","style":{"italic":true}},{"type":"text","text":" the same version of everything (apart from julia)"}]}]}],"thread_ts":"1609190299.212800","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"148c0976-85ae-40f9-ad86-4af4d1bfc20c","type":"message","text":"Ok, that's what I thought. I just tried and I still get the same dependency resolution error after I instantiate the Project.toml?","user":"UQYEMLNQ4","ts":"1609192532.213600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0xR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, that's what I thought. I just tried and I still get the same dependency resolution error after I instantiate the Project.toml?"}]}]}],"thread_ts":"1609190299.212800","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"2aac764e-2b2a-479c-9a44-4220645734cf","type":"message","text":"you may be using a too recent version of julia","user":"UDB26738Q","ts":"1609192646.213800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1zLo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you may be using a too recent version of julia"}]}]}],"thread_ts":"1609190299.212800","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"c564769f-19cf-4ea3-9977-c8d62bbffab2","type":"message","text":"try to use exactly the same one as in yggdrasil","user":"UDB26738Q","ts":"1609192666.214000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FMQ9P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"try to use exactly the same one as in yggdrasil"}]}]}],"thread_ts":"1609190299.212800","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"10b851d4-10d5-4c1c-80de-c6aed3c18768","type":"message","text":"OK, so compiling master from the commit hash (5be3e27e02)?","user":"UQYEMLNQ4","ts":"1609193317.214200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Fyh/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK, so compiling master from the commit hash (5be3e27e02)?"}]}]}],"thread_ts":"1609190299.212800","parent_user_id":"UQYEMLNQ4"},{"client_msg_id":"6cb3c8e8-cf08-403b-8487-3fdd81cd8844","type":"message","text":"Yes, if you compile Julia on that commit + use Yggdrasil environment you should run the same system as Yggdrasil. The issue you're facing is probably due to the jlls in standard libraries, that's why too recent versions of Julia have problems","user":"UDB26738Q","ts":"1609231017.214400","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1609231062.000000"},"blocks":[{"type":"rich_text","block_id":"FvebI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, if you compile Julia on that commit + use Yggdrasil environment you should run the same system as Yggdrasil. The issue you're facing is probably due to the jlls in standard libraries, that's why too recent versions of Julia have problems"}]}]}],"thread_ts":"1609190299.212800","parent_user_id":"UQYEMLNQ4"}]