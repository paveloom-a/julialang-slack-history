[{"client_msg_id":"52191728-6179-4f8d-9874-dbe4d8fd4638","type":"message","text":"<https://twitter.com/foonathan/status/1351251411779133440> can we automatically add this function to the library/programs we compile?  in this way we can remove the log, as we can retrieve the compiler with a function call :troll:","user":"UDB26738Q","ts":"1615923226.006400","team":"T68168MUP","attachments":[{"fallback":"<https://twitter.com/foonathan|@foonathan>: \"How can I detect which C++ compiler is used?\"\n\n\"Oh, that's easy:\"\n\n(via <https://quuxplusone.github.io/blog/2021/01/13/conversion-operator-lookup/>) <https://pbs.twimg.com/media/EsCbqdWXUAIzp6E.png>","ts":1610998416,"author_name":"Jonathan MÃ¼ller","author_link":"https://twitter.com/foonathan/status/1351251411779133440","author_icon":"https://pbs.twimg.com/profile_images/1102873771306815488/VKB4E8bf_normal.png","author_subname":"@foonathan","text":"\"How can I detect which C++ compiler is used?\"\n\n\"Oh, that's easy:\"\n\n(via <https://quuxplusone.github.io/blog/2021/01/13/conversion-operator-lookup/>) <https://pbs.twimg.com/media/EsCbqdWXUAIzp6E.png>","service_name":"twitter","service_url":"https://twitter.com/","from_url":"https://twitter.com/foonathan/status/1351251411779133440","image_url":"https://pbs.twimg.com/media/EsCbqdWXUAIzp6E.png","image_width":764,"image_height":589,"image_bytes":12935,"id":1,"original_url":"https://twitter.com/foonathan/status/1351251411779133440","footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png"}],"blocks":[{"type":"rich_text","block_id":"tca","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://twitter.com/foonathan/status/1351251411779133440"},{"type":"text","text":" can we automatically add this function to the library/programs we compile?  in this way we can remove the log, as we can retrieve the compiler with a function call "},{"type":"emoji","name":"troll"}]}]}],"thread_ts":"1615923226.006400","reply_count":12,"reply_users_count":3,"latest_reply":"1615944405.001800","reply_users":["UDB26738Q","U82RE6STE","USU9FRPEU"],"is_locked":false,"subscribed":false},{"client_msg_id":"efd1fb97-2a9a-4211-a31f-9b82dc9cf12b","type":"message","text":"well, it doesn't actually work for me :thinking_face:","user":"UDB26738Q","ts":"1615923995.006600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vJcG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, it doesn't actually work for me "},{"type":"emoji","name":"thinking_face"}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"client_msg_id":"41253757-8a22-40d8-80e7-0807b91b1585","type":"message","text":"I'm trying to use the code in the linked godbolt page  <https://godbolt.org/z/jo3dc4>, but whatever I try I get\n```undefined reference to `A::operator U2 T2::*()'```\nor\n```undefined reference to `A::operator U1 T1::*()'```\n(depending on the compiler).  unless the compile error was the point :thinking_face:","user":"UDB26738Q","ts":"1615924081.006800","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1615924153.000000"},"blocks":[{"type":"rich_text","block_id":"eujeM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm trying to use the code in the linked godbolt page  "},{"type":"link","url":"https://godbolt.org/z/jo3dc4"},{"type":"text","text":", but whatever I try I get\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"undefined reference to `A::operator U2 T2::*()'"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"or\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"undefined reference to `A::operator U1 T1::*()'"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"(depending on the compiler).  unless the compile error was the point "},{"type":"emoji","name":"thinking_face"}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"client_msg_id":"faf9b432-3821-4a4a-b814-c84e43bb1376","type":"message","text":"getting different errors for different compilers does fit the spec of \"detecting which C++ compiler is used\" :grimacing:","user":"U82RE6STE","ts":"1615931059.007500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4Ekl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"getting different errors for different compilers does fit the spec of \"detecting which C++ compiler is used\" "},{"type":"emoji","name":"grimacing"}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"client_msg_id":"e24d6a83-2c36-4c80-8a7d-513e3b6881cb","type":"message","text":"B..but...","user":"UDB26738Q","ts":"1615933257.007700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UR/CC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"B..but..."}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"type":"message","text":"Here's what I see on Godbolt","files":[{"id":"F01RP2F24TE","created":1615943306,"timestamp":1615943306,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"USU9FRPEU","editable":false,"size":189228,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01RP2F24TE/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01RP2F24TE/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01RP2F24TE-c7d1436385/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01RP2F24TE-c7d1436385/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01RP2F24TE-c7d1436385/image_360.png","thumb_360_w":360,"thumb_360_h":159,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01RP2F24TE-c7d1436385/image_480.png","thumb_480_w":480,"thumb_480_h":211,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01RP2F24TE-c7d1436385/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01RP2F24TE-c7d1436385/image_720.png","thumb_720_w":720,"thumb_720_h":317,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01RP2F24TE-c7d1436385/image_800.png","thumb_800_w":800,"thumb_800_h":352,"thumb_960":"https://files.slack.com/files-tmb/T68168MUP-F01RP2F24TE-c7d1436385/image_960.png","thumb_960_w":960,"thumb_960_h":423,"thumb_1024":"https://files.slack.com/files-tmb/T68168MUP-F01RP2F24TE-c7d1436385/image_1024.png","thumb_1024_w":1024,"thumb_1024_h":451,"original_w":1912,"original_h":842,"thumb_tiny":"AwAVADDR4zS4FVmvYFcgtyDg/KaBqFuSAHPP+yaALGOelLzSZIOM0ufegBuOfu04fQ0mT6ilzQBizQ5mkORyx7U1IfnX5u47VPL/AK1/9401fvD60AbGBRRRQAwtg0obJFNbrQvUUDP/2Q==","permalink":"https://julialang.slack.com/files/USU9FRPEU/F01RP2F24TE/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01RP2F24TE-b593e8280f","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"gE2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here's what I see on Godbolt"}]}]}],"user":"USU9FRPEU","display_as_bot":false,"ts":"1615943329.000100","thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"client_msg_id":"614ec489-075b-4332-9190-4fd8e5ed253f","type":"message","text":"It seems to work: `\"icc\" == unsafe_string(pointer(reinterpret(UInt8,[0x636369])))`","user":"USU9FRPEU","ts":"1615943421.000500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xvOwg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It seems to work: "},{"type":"text","text":"\"icc\" == unsafe_string(pointer(reinterpret(UInt8,[0x636369])))","style":{"code":true}}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"client_msg_id":"860cfaeb-222a-4061-99d2-e7b26e69e7fe","type":"message","text":"I can read what's written in godbolt, but I can't compile a shared library/executable that works","user":"UDB26738Q","ts":"1615943422.000700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NQRNH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can read what's written in godbolt, but I can't compile a shared library/executable that works"}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"client_msg_id":"4bd7a4e8-8d16-460e-915a-02828c03297d","type":"message","text":"This works for me using g++ 10.2.0\n```g++-10 -g -o test.s -S -fdiagnostics-color=always -O2 -std=c++20 test.cpp```","user":"USU9FRPEU","ts":"1615944185.000900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D8/qS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This works for me using g++ 10.2.0\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"g++-10 -g -o test.s -S -fdiagnostics-color=always -O2 -std=c++20 test.cpp"}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"client_msg_id":"364f972d-4450-4593-a9ec-232545c2f046","type":"message","text":"it doesn't run though...............","user":"UDB26738Q","ts":"1615944252.001100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BUn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it doesn't run though..............."}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"client_msg_id":"4636ff27-d68e-48b1-a93e-1f82904a1676","type":"message","text":"you aren't building a library or an executable","user":"UDB26738Q","ts":"1615944278.001300","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1615944305.000000"},"blocks":[{"type":"rich_text","block_id":"URhs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you aren't building a library or an executable"}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"client_msg_id":"1ad5c1bf-fe28-4e86-adcb-d93e2997b292","type":"message","text":"you're stopping before the linking stage, that's were compilation fails","user":"UDB26738Q","ts":"1615944352.001600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q9jrc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you're stopping before the linking stage, that's were compilation fails"}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"},{"client_msg_id":"b0606c3e-2cfa-478d-875f-325f3102161f","type":"message","text":"(linking a library actually does work just because by default the linker on Linux is happy to have undefined symbols, but then when you call into the function it freaks out because of the undefined symbol, of course)","user":"UDB26738Q","ts":"1615944405.001800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s775l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(linking a library actually does work just because by default the linker on Linux is happy to have undefined symbols, but then when you call into the function it freaks out because of the undefined symbol, of course)"}]}]}],"thread_ts":"1615923226.006400","parent_user_id":"UDB26738Q"}]