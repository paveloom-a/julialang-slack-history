[{"client_msg_id":"263cbced-4182-48ad-b48c-a2f4e0a31bc2","type":"message","text":"Do builds that need a libcurl dependency still need to explicitly declare a libssh2, mbedtls and nghttp2 dependency as well? It seems only NetCDF, GDAL and AzStorage builds still do that, and are hence now not working on 1.6 due to <https://github.com/JuliaLang/julia/issues/39015#issuecomment-751690888>. But perhaps since the LibCURL bump at <https://github.com/JuliaPackaging/Yggdrasil/pull/2020> this is no longer needed?","user":"U8D0QF5NZ","ts":"1610389185.437700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KtUy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do builds that need a libcurl dependency still need to explicitly declare a libssh2, mbedtls and nghttp2 dependency as well? It seems only NetCDF, GDAL and AzStorage builds still do that, and are hence now not working on 1.6 due to "},{"type":"link","url":"https://github.com/JuliaLang/julia/issues/39015#issuecomment-751690888"},{"type":"text","text":". But perhaps since the LibCURL bump at "},{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/pull/2020"},{"type":"text","text":" this is no longer needed?"}]}]}],"thread_ts":"1610389185.437700","reply_count":24,"reply_users_count":2,"latest_reply":"1610391086.442600","reply_users":["UDB26738Q","U8D0QF5NZ"],"subscribed":false},{"client_msg_id":"d50150a0-07b0-4b5c-912a-c6eeaef61c7b","type":"message","text":"I don't understand the \"hence\" (i.e., how the things are related)","user":"UDB26738Q","ts":"1610389334.437800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FNzB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't understand the \"hence\" (i.e., how the things are related)"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"b9d8cd83-892f-441e-b664-e0c5c6228835","type":"message","text":"Because it is linked to a specific mbedtls, and that seems to give these issues: <https://github.com/JuliaGeo/GDAL.jl/issues/113>","user":"U8D0QF5NZ","ts":"1610389447.438000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p/k5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Because it is linked to a specific mbedtls, and that seems to give these issues: "},{"type":"link","url":"https://github.com/JuliaGeo/GDAL.jl/issues/113"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"8b92a383-fd5c-4070-be3f-bef2a9a1eac6","type":"message","text":"but how is this related to the fact that we need to explicitly list all indirect dependencies?  that problem would happen also if we didn't have to do that","user":"UDB26738Q","ts":"1610389524.438200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Kgyp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but how is this related to the fact that we need to explicitly list all indirect dependencies?  that problem would happen also if we didn't have to do that"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"132d6f6d-6b1e-40d6-ae6d-1055eb5ed627","type":"message","text":"Hmm I was thinking since we hold back to a LibCURL release that links to mbedtls, perhaps if we use the newer build that uses native tls, we would no longer use mbedtls and thus the problem would disappear?","user":"U8D0QF5NZ","ts":"1610389665.438400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1J61P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm I was thinking since we hold back to a LibCURL release that links to mbedtls, perhaps if we use the newer build that uses native tls, we would no longer use mbedtls and thus the problem would disappear?"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"40738ca4-abf2-4f89-a899-cd0fc4f1f78c","type":"message","text":"in my mind that's an accident, not something causally correlated","user":"UDB26738Q","ts":"1610389707.438600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xfgZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in my mind that's an accident, not something causally correlated"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"ab25f646-f4a5-44ea-9c5d-ad925a069c28","type":"message","text":"Sorry which part is the accident? :slightly_smiling_face:","user":"U8D0QF5NZ","ts":"1610389788.438800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wEeMB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sorry which part is the accident? "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"5bf127dd-c98b-494b-b717-96803c050967","type":"message","text":"the fact that we need different builds for different versions of Julia is independent from the fact that we need to specify indirect dependencies of libcurl (which is a momentarily problem)","user":"UDB26738Q","ts":"1610389913.439000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5jyLA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the fact that we need different builds for different versions of Julia is independent from the fact that we need to specify indirect dependencies of libcurl (which is a momentarily problem)"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"c3a335fb-8c59-4a2a-bfd6-e61889b4aa92","type":"message","text":"I understand that the indirect dependency does not cause this issue, but do you think that removing them may be good going forward?","user":"U8D0QF5NZ","ts":"1610389960.439200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iYBZ4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I understand that the indirect dependency does not cause this issue, but do you think that removing them may be good going forward?"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"6e82888e-cf01-4ac7-8fab-f0888d1d78d1","type":"message","text":"anyway, the fact that we need different builds for different versions of Julia is unfortunate, but honestly I can't think of other solutions.  maybe you should adopt a versioning scheme similar to what <@U012FH66MFW> is using in his packages (multiplying all parts of the version number by 100 and add some other numbers if necessary), which would allow you to easily maintain multiple versions at the same time","user":"UDB26738Q","ts":"1610389991.439400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WgHD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"anyway, the fact that we need different builds for different versions of Julia is unfortunate, but honestly I can't think of other solutions.  maybe you should adopt a versioning scheme similar to what "},{"type":"user","user_id":"U012FH66MFW"},{"type":"text","text":" is using in his packages (multiplying all parts of the version number by 100 and add some other numbers if necessary), which would allow you to easily maintain multiple versions at the same time"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"1d3c7151-318c-49b6-a8aa-dfce8fca75f6","type":"message","text":"the 100x trick is the best idea I've seen so far","user":"UDB26738Q","ts":"1610390054.439600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"n56","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the 100x trick is the best idea I've seen so far"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"fc0f809a-e76c-45ac-a592-ad6bfb778ed5","type":"message","text":"Ok so you don't think that removing the indirect dependencies and using a recent libcurl build will help us here, through not linking to libmbedtls anymore?","user":"U8D0QF5NZ","ts":"1610390165.440000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Huosw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok so you don't think that removing the indirect dependencies and using a recent libcurl build will help us here, through not linking to libmbedtls anymore?"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"bfa3ceab-9cdb-47d2-b56e-e87bd5124279","type":"message","text":"I'm fine with using different builds for different builds if that is needed, though that seems simpler.","user":"U8D0QF5NZ","ts":"1610390204.440200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pvnoe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm fine with using different builds for different builds if that is needed, though that seems simpler."}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"544c8d31-8351-4cc3-b654-828ca11c5241","type":"message","text":"&gt; Ok so you don't think that removing the indirect dependencies and using a recent libcurl build will help us here, through not linking to libmbedtls anymore?\nI mean, it helps with Julia v1.6, but it breaks Julia v1.5","user":"UDB26738Q","ts":"1610390386.440400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iPS","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Ok so you don't think that removing the indirect dependencies and using a recent libcurl build will help us here, through not linking to libmbedtls anymore?"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI mean, it helps with Julia v1.6, but it breaks Julia v1.5"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"8d821f3f-3228-4da2-b825-545351ae26ee","type":"message","text":"so no, it isn't really a _solution_","user":"UDB26738Q","ts":"1610390399.440600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/Hk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so no, it isn't really a "},{"type":"text","text":"solution","style":{"italic":true}}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"79b022a5-2d64-4d9a-8946-ccfcd3460f41","type":"message","text":"if you want to support different versions of Julia, you need different builds, at all times","user":"UDB26738Q","ts":"1610390424.440800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QLnDr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you want to support different versions of Julia, you need different builds, at all times"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"f9cac100-f8d7-4465-b8d5-c23c5a796d0c","type":"message","text":"Oh sorry, I just now noticed `julia_compat = \"1.6\"` in the recent LibCURL","user":"U8D0QF5NZ","ts":"1610390446.441000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8oxM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh sorry, I just now noticed "},{"type":"text","text":"julia_compat = \"1.6\"","style":{"code":true}},{"type":"text","text":" in the recent LibCURL"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"1b06aace-c52f-4574-bdad-9f254aa5519f","type":"message","text":"that's why I suggest having a multi-version build, for different versions of Julia","user":"UDB26738Q","ts":"1610390460.441200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rxdE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's why I suggest having a multi-version build, for different versions of Julia"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"12e427b6-88cc-48d1-81a2-63bc696dc41f","type":"message","text":"Gotcha","user":"U8D0QF5NZ","ts":"1610390479.441400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qo1zg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Gotcha"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"b7f6c6b6-1df3-48be-8e35-3996e8189b1e","type":"message","text":"So just to check, I keep the deps as-is for 1.5, and for 1.6 I can drop the indirect deps?","user":"U8D0QF5NZ","ts":"1610390868.441600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JOYM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So just to check, I keep the deps as-is for 1.5, and for 1.6 I can drop the indirect deps?"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"da8e6415-2070-4afc-802f-59e8bb9c9508","type":"message","text":"no","user":"UDB26738Q","ts":"1610390975.441800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uLL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"d9811096-0f5d-4f40-99b4-af2cca527bbd","type":"message","text":"you still need to explicitly list all dependencies in all cases","user":"UDB26738Q","ts":"1610390990.442000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nlG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you still need to explicitly list all dependencies in all cases"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"465d6485-7452-4350-8aa5-c71b24e64755","type":"message","text":"ok and same versions as well?","user":"U8D0QF5NZ","ts":"1610391014.442200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LKE11","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok and same versions as well?"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"d452c3de-8027-4cc6-8b5b-7ef8dad6178a","type":"message","text":"no, versions will be different, will be those in Julia v1.6","user":"UDB26738Q","ts":"1610391039.442400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s15","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, versions will be different, will be those in Julia v1.6"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"},{"client_msg_id":"504e8511-8a7e-46a3-9bcc-214d79863b72","type":"message","text":"Ok, I'll put up a PR, hope I get it right","user":"U8D0QF5NZ","ts":"1610391086.442600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z8cF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, I'll put up a PR, hope I get it right"}]}]}],"thread_ts":"1610389185.437700","parent_user_id":"U8D0QF5NZ"}]