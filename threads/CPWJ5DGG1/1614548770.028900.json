[{"client_msg_id":"41efd287-2f96-435e-a05f-6cd60cd38e7e","type":"message","text":"I’m seeing a long lag between the julia-buildpkg step finishing and the julia-runtest step starting: <https://github.com/ericphanson/TrackingTimers.jl/runs/1999687418?check_suite_focus=true>. Has anyone seen this? It’s not consistent, e.g. other runs on the same OS/arch don’t have this issue, but a bunch of my runs for this package are hanging like this","user":"UCZ7VBGUD","ts":"1614548770.028900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nx4In","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m seeing a long lag between the julia-buildpkg step finishing and the julia-runtest step starting: "},{"type":"link","url":"https://github.com/ericphanson/TrackingTimers.jl/runs/1999687418?check_suite_focus=true"},{"type":"text","text":". Has anyone seen this? It’s not consistent, e.g. other runs on the same OS/arch don’t have this issue, but a bunch of my runs for this package are hanging like this"}]}]}],"thread_ts":"1614548770.028900","reply_count":20,"reply_users_count":2,"latest_reply":"1614555158.039900","reply_users":["UCZ7VBGUD","UDB26738Q"],"subscribed":false},{"client_msg_id":"c9901100-6828-4791-8fbf-7678598a37e9","type":"message","text":"(mostly I don’t like having the red status badge aha)","user":"UCZ7VBGUD","ts":"1614549813.029000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ACWAa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(mostly I don’t like having the red status badge aha)"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"e5c1b7cd-e7aa-4e4d-8044-52c8c184e8cc","type":"message","text":"I'd cancel, restart and blame github","user":"UDB26738Q","ts":"1614551489.029300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZxMnL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'd cancel, restart and blame github"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD","reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"b6f94084-d3b9-4f20-b6c4-0c42983dc39d","type":"message","text":"no luck, but it seems to be the same three workflows hanging, two on 1.6 and one on nightly, so I’m just going to move nightly CI to a separate workflow and point the badge at release-Julia CI (which I think is reasonable anyway)","user":"UCZ7VBGUD","ts":"1614553152.029600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kQ=C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no luck, but it seems to be the same three workflows hanging, two on 1.6 and one on nightly, so I’m just going to move nightly CI to a separate workflow and point the badge at release-Julia CI (which I think is reasonable anyway)"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"7990fdd0-7d4a-446e-94b7-daddef5f3190","type":"message","text":"You didn't cancel the job, did you? I still see it running. I'd also put a reasonable timeout, to avoid rogue jobs piling up the queue","user":"UDB26738Q","ts":"1614553455.029800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"T1D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You didn't cancel the job, did you? I still see it running. I'd also put a reasonable timeout, to avoid rogue jobs piling up the queue"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"00e556ca-8d45-4492-a6d9-e3d7d595d0b1","type":"message","text":"I'm suggesting to cancel the job because perhaps the log will show some useful information. While the job is running you may not see anything","user":"UDB26738Q","ts":"1614553508.030000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4Lgzn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm suggesting to cancel the job because perhaps the log will show some useful information. While the job is running you may not see anything"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"6743ECF5-1AFE-4B2B-B8FD-9706EA0C5D41","type":"message","text":"I did cancel some of them but not that one","user":"UCZ7VBGUD","ts":"1614554057.030500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u/Ht7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I did cancel some of them but not that one"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"644fb501-fe1b-405b-b786-4332e3b4c9b4","type":"message","text":"it looks like it was stuck in a test?","user":"UDB26738Q","ts":"1614554163.030700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"221EB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it looks like it was stuck in a test?"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"d5ec6683-6499-449a-bf45-afa6265850db","type":"message","text":"that may be a real bug","user":"UDB26738Q","ts":"1614554211.030900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z7wcJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that may be a real bug"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"9cda06a5-16a4-4c13-a4ca-7947bc8b17e5","type":"message","text":"I really recommend putting a timeout (something like 15-20 minutes is reasonable)","user":"UDB26738Q","ts":"1614554234.031100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ExM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I really recommend putting a timeout (something like 15-20 minutes is reasonable)"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD","reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"98C41B24-B6CD-44D1-A354-04CF7716E1C6","type":"message","text":"Interesting, yeah it was. I didn’t realize it was running the tests because the workflow didn’t show any logs for the tests step before I cancelled it","user":"UCZ7VBGUD","ts":"1614554287.032500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pH6E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Interesting, yeah it was. I didn’t realize it was running the tests because the workflow didn’t show any logs for the tests step before I cancelled it"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"2bc6f248-d317-46d0-96fd-e33cdafbbd11","type":"message","text":"yeah, because live logs of github actions are terrible","user":"UDB26738Q","ts":"1614554305.032800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QF+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, because live logs of github actions are terrible"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD","reactions":[{"name":"upside_down_face","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"b941733e-5b1d-40f1-b431-41ad9149bd80","type":"message","text":"cancelling the job is the only way to actually see it","user":"UDB26738Q","ts":"1614554315.033000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"roDc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cancelling the job is the only way to actually see it"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"19255D1C-68D7-449B-82E6-A71E0C0020D2","type":"message","text":"I see, thanks! Good to know ","user":"UCZ7VBGUD","ts":"1614554342.033700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wuI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see, thanks! Good to know "}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"302B67CE-3BC9-4E0C-BEB8-4B91D3FD1BEB","type":"message","text":"I’ll add a timeout when I’m at a computer","user":"UCZ7VBGUD","ts":"1614554352.034100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tMk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’ll add a timeout when I’m at a computer"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"7e60a0f0-6a43-4b4c-940e-7c920834e6ab","type":"message","text":"see for example <https://github.com/JuliaRegistries/General/blob/5950bf8699a7a258f4a9627482a8301f453d9ac7/.github/workflows/ci.yml#L20>","user":"UDB26738Q","ts":"1614554361.034300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bcS+R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"see for example "},{"type":"link","url":"https://github.com/JuliaRegistries/General/blob/5950bf8699a7a258f4a9627482a8301f453d9ac7/.github/workflows/ci.yml#L20"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD","reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"F5A10686-FE0E-462F-BAD8-C6B1517467C2","type":"message","text":"The tests it’s hanging on use Transducers.jl, maybe there’s some upstream issue","user":"UCZ7VBGUD","ts":"1614554491.035300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cZ9rJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The tests it’s hanging on use Transducers.jl, maybe there’s some upstream issue"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"396ff592-9b87-40db-845b-6d1a07e429cc","type":"message","text":"BTW, interesting package!","user":"UDB26738Q","ts":"1614554556.035500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vvh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"BTW, interesting package!"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD","reactions":[{"name":"heart","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"6ed66717-c569-47e6-99b9-a36ef0e72005","type":"message","text":"I used TimerOutputs for a parallel program, this would have come in handy","user":"UDB26738Q","ts":"1614554607.035800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bXHp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I used TimerOutputs for a parallel program, this would have come in handy"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"28834056-2950-431A-8C16-3F242F091C9B","type":"message","text":"Yeah, that’s exactly what motivated me here.. I was playing around with an alternate implementation of `DataFrames.transform` where you could have later transformations use the outputs of earlier ones, and it would lower to Dagger.jl to parallelize it, and I wanted to use TimerOutputs; it worked great when I did it serially, but not in parallel.","user":"UCZ7VBGUD","ts":"1614555049.039500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9nfw+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, that’s exactly what motivated me here.. I was playing around with an alternate implementation of "},{"type":"text","text":"DataFrames.transform","style":{"code":true}},{"type":"text","text":" where you could have later transformations use the outputs of earlier ones, and it would lower to Dagger.jl to parallelize it, and I wanted to use TimerOutputs; it worked great when I did it serially, but not in parallel."}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"e150d288-680a-46de-9caf-3485e5c1dff4","type":"message","text":"in my case I used both MPI and `Base.Threads`.  MPI would see the timer only on the main rank, not sure about the threads, but load across threads is _mostly_ balanced, so that was kinda ok","user":"UDB26738Q","ts":"1614555158.039900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tQOi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in my case I used both MPI and "},{"type":"text","text":"Base.Threads","style":{"code":true}},{"type":"text","text":".  MPI would see the timer only on the main rank, not sure about the threads, but load across threads is "},{"type":"text","text":"mostly","style":{"italic":true}},{"type":"text","text":" balanced, so that was kinda ok"}]}]}],"thread_ts":"1614548770.028900","parent_user_id":"UCZ7VBGUD","reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]}]