[{"client_msg_id":"59da6746-ceda-4804-86bd-e24b2d03d602","type":"message","text":"Another bonus question: the tests pass locally with `]test` in package mode, any idea what test commands I can issue in order to try to reproduce the failure locally?","user":"U6QPTG69E","ts":"1614242947.015000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i9+jR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Another bonus question: the tests pass locally with "},{"type":"text","text":"]test","style":{"code":true}},{"type":"text","text":" in package mode, any idea what test commands I can issue in order to try to reproduce the failure locally?"}]}]}],"thread_ts":"1614242947.015000","reply_count":3,"reply_users_count":2,"latest_reply":"1614249676.015700","reply_users":["U67SCG4HG","U6QPTG69E"],"subscribed":false},{"client_msg_id":"69ce3591-091c-4aff-9f0d-fd5c1d755c5b","type":"message","text":"CI runs with coverage on by default so maybe try run with that locally too?","user":"U67SCG4HG","ts":"1614245191.015100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZYpqS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"CI runs with coverage on by default so maybe try run with that locally too?"}]}]}],"thread_ts":"1614242947.015000","parent_user_id":"U6QPTG69E"},{"client_msg_id":"3edf987a-96c5-4dc9-9bd2-d9e3861b6d90","type":"message","text":"Thanks for the suggestion! but it didn't work","user":"U6QPTG69E","ts":"1614247699.015300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8olAP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for the suggestion! but it didn't work"}]}]}],"thread_ts":"1614242947.015000","parent_user_id":"U6QPTG69E"},{"client_msg_id":"1437182a-90ef-45bf-a2e2-58c373787b55","type":"message","text":"Anyway, I found a fix: in the tests, I setup a `FakePackage` for which I run tests. In the main `runtests.jl`, I had something like the following:\n```using Pkg\nPkg.activate(\"./FakePackage\")\nPkg.develop(ReTest)\nPkg.test(\"FakePackage\")```\nBut it turns out the `ReTest` version used by Pkg was not the one from the PR. Changing the `develop` argument to `PackageSpec(path=\"..\")` wokded as intended.","user":"U6QPTG69E","ts":"1614249676.015700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XnxI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Anyway, I found a fix: in the tests, I setup a "},{"type":"text","text":"FakePackage","style":{"code":true}},{"type":"text","text":" for which I run tests. In the main "},{"type":"text","text":"runtests.jl","style":{"code":true}},{"type":"text","text":", I had something like the following:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Pkg\nPkg.activate(\"./FakePackage\")\nPkg.develop(ReTest)\nPkg.test(\"FakePackage\")"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"But it turns out the "},{"type":"text","text":"ReTest","style":{"code":true}},{"type":"text","text":" version used by Pkg was not the one from the PR. Changing the "},{"type":"text","text":"develop","style":{"code":true}},{"type":"text","text":" argument to "},{"type":"text","text":"PackageSpec(path=\"..\")","style":{"code":true}},{"type":"text","text":" wokded as intended."}]}]}],"thread_ts":"1614242947.015000","parent_user_id":"U6QPTG69E"}]