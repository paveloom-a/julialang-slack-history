[{"client_msg_id":"cdd085ce-cfe5-4b6e-bb79-b8af08189202","type":"message","text":"Are there any recommendations / tutorials on how to setup a self-hosted runner for a julia package?\nI'm not sure how to make it so that only some trusted users can run CI with that setup.","user":"U9MED583T","ts":"1617531738.045700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kRG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Are there any recommendations / tutorials on how to setup a self-hosted runner for a julia package?\nI'm not sure how to make it so that only some trusted users can run CI with that setup."}]}]}],"thread_ts":"1617531738.045700","reply_count":18,"reply_users_count":4,"latest_reply":"1617578314.051600","reply_users":["UDB26738Q","U9MED583T","U6C5KSWAC","U7THT3TM3"],"is_locked":false,"subscribed":false},{"client_msg_id":"6284bd1a-9a27-4f2d-a174-ead2620d1d50","type":"message","text":"You can't restrict who can run workflows. With a private repository you can restrict who has access to the repository at all. With a public repository you can't do anything","user":"UDB26738Q","ts":"1617531910.045800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FH=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can't restrict who can run workflows. With a private repository you can restrict who has access to the repository at all. With a public repository you can't do anything"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"5e620453-f0d6-4f42-b7c1-7cfe6a3049af","type":"message","text":"Is there a way to have trusted users trigger a workflow?","user":"U9MED583T","ts":"1617532355.046000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vEuG9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way to have trusted users trigger a workflow?"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"07d040d7-8704-41a6-8d49-f4a51ba79453","type":"message","text":"What is not clear of\n\n&gt; You can't restrict who can run workflows\n&gt; \n? :slightly_smiling_face: Not with github actions, you may need to look for other options, like buildkite, which however may come at a cost","user":"UDB26738Q","ts":"1617532601.046200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wVh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What is not clear of\n\n"}]},{"type":"rich_text_quote","elements":[{"type":"text","text":"You can't restrict who can run workflows\n"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\n? "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" Not with github actions, you may need to look for other options, like buildkite, which however may come at a cost"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"874a609c-d56e-4546-a015-eeef7bb4ec06","type":"message","text":"All settings in github actions are in the workflow files. In principle you can have a check that only trusted users can run a workflow, but then anyone can open a pull request to remove that check","user":"UDB26738Q","ts":"1617532734.046400","team":"T68168MUP","edited":{"user":"UDB26738Q","ts":"1617532754.000000"},"blocks":[{"type":"rich_text","block_id":"s/xni","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"All settings in github actions are in the workflow files. In principle you can have a check that only trusted users can run a workflow, but then anyone can open a pull request to remove that check"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"5c7ac820-455e-42f3-9e9c-a8a492d0cdbb","type":"message","text":"There are some workarounds, like running the self-hosted runner in a private repo and triggering it from the public repo (which is safe because you can restrict access to the necessary secrets) but at that point you're probably better off using different CI software that supports self-hosted runners for trusted users in public repos out of the box","user":"U6C5KSWAC","ts":"1617532909.046700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YO4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There are some workarounds, like running the self-hosted runner in a private repo and triggering it from the public repo (which is safe because you can restrict access to the necessary secrets) but at that point you're probably better off using different CI software that supports self-hosted runners for trusted users in public repos out of the box"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"72ed4825-c85e-4eb8-a2d7-a1be8e8f6afb","type":"message","text":"There are the moderation settings mentioned in another thread, but they are quite coarse","user":"UDB26738Q","ts":"1617532946.046900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0mGb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There are the moderation settings mentioned in another thread, but they are quite coarse"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"fd1e0c6b-e5e8-402c-a060-1ae34b20d383","type":"message","text":"I see. I saw the SciMLBenchmarks had some benchmarks triggered via a comment by a trusted person <https://github.com/SciML/SciMLBenchmarks.jl/issues/116> and I was wondering how to do something similar","user":"U9MED583T","ts":"1617533394.047100","team":"T68168MUP","edited":{"user":"U9MED583T","ts":"1617533461.000000"},"blocks":[{"type":"rich_text","block_id":"ba58V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see. I saw the SciMLBenchmarks had some benchmarks triggered via a comment by a trusted person "},{"type":"link","url":"https://github.com/SciML/SciMLBenchmarks.jl/issues/116"},{"type":"text","text":" and I was wondering how to do something similar"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"9634a4da-074c-4918-854a-f1b79d4bf220","type":"message","text":"Apparently they use <https://github.com/SciML/SciMLBenchmarks.jl/blob/master/.github/workflows/rebuild.yml|https://github.com/SciML/SciMLBenchmarks.jl/blob/master/.github/workflows/rebuild.yml> but I'm not sure it's restricted to trusted users","user":"UDB26738Q","ts":"1617535960.047400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ObB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Apparently they use "},{"type":"link","url":"https://github.com/SciML/SciMLBenchmarks.jl/blob/master/.github/workflows/rebuild.yml","text":"https://github.com/SciML/SciMLBenchmarks.jl/blob/master/.github/workflows/rebuild.yml"},{"type":"text","text":" but I'm not sure it's restricted to trusted users"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"50efc7b6-3176-4a2a-89f3-86803719122c","type":"message","text":"Access to secrets is restricted, unlike access to self-hosted runners.","user":"U6C5KSWAC","ts":"1617538106.047600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tVNPg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Access to secrets is restricted, unlike access to self-hosted runners."}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"e8eb241e-cd30-46b2-88fb-fd14596c7f50","type":"message","text":"They use that workflow to trigger a build on gitlab, not github. That's a similar setup to what I was describing above","user":"U6C5KSWAC","ts":"1617538144.047800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wkn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"They use that workflow to trigger a build on gitlab, not github. That's a similar setup to what I was describing above"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"40fa5613-3402-4ae5-a978-0ab977b25deb","type":"message","text":"Everyone can trigger the workflow, it just wouldn't do anything for non-trusted users (other than responding with an error message)","user":"U6C5KSWAC","ts":"1617538179.048000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tlhr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Everyone can trigger the workflow, it just wouldn't do anything for non-trusted users (other than responding with an error message)"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"c0baffe1-56bc-4535-9304-9029c583aa7b","type":"message","text":"Oh, I see. Thanks\nI need some large files for testing and was wondering what can I do to access them in CI","user":"U9MED583T","ts":"1617538532.048200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iv3ZN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, I see. Thanks\nI need some large files for testing and was wondering what can I do to access them in CI"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"d0fb8aab-23f2-4dc7-8990-dd23f27d711b","type":"message","text":"If storage is the only issue, I think Drone CI offers free runners for oss projects with more storage than GHA","user":"U6C5KSWAC","ts":"1617539034.048400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"scpyL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If storage is the only issue, I think Drone CI offers free runners for oss projects with more storage than GHA"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"eab1db75-3a2d-4824-bdb4-ba6353bd982a","type":"message","text":"Yes, storage is the only issue, as I would need somewhere around ~10-50GB, but I don't know how to make those available during CI.","user":"U9MED583T","ts":"1617544876.048600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W2E2C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, storage is the only issue, as I would need somewhere around ~10-50GB, but I don't know how to make those available during CI."}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"e5142049-a3df-4076-96af-6b10591fe1d9","type":"message","text":"also Travis has a good storage (we used to cache many BinaryBuilder shards which amounted to about 30 GB), but getting free time for Travis isn't easy as far as I can see","user":"UDB26738Q","ts":"1617545301.048800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DCd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"also Travis has a good storage (we used to cache many BinaryBuilder shards which amounted to about 30 GB), but getting free time for Travis isn't easy as far as I can see"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"},{"client_msg_id":"B7D00309-EE2E-4217-AB50-A5E0EFB3F13E","type":"message","text":"Yeah, for self hosted runners on public repos, I would say use either Buildkite, GitLab, or Drone. Any of those should have an option of the form \"don't run builds if the pull request is made from a fork\".","user":"U7THT3TM3","ts":"1617578168.051200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CUn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, for self hosted runners on public repos, I would say use either Buildkite, GitLab, or Drone. Any of those should have an option of the form \"don't run builds if the pull request is made from a fork\"."}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T","reactions":[{"name":"thankyou","users":["U9MED583T"],"count":1}]},{"client_msg_id":"c82fcd54-1256-4877-b9e9-f8462897dceb","type":"message","text":"they should really start considering similar options in github actions at this point","user":"UDB26738Q","ts":"1617578285.051400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dri","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"they should really start considering similar options in github actions at this point"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T","reactions":[{"name":"+1","users":["U7THT3TM3","U9MED583T"],"count":2}]},{"client_msg_id":"3999f5ad-c3ff-47a6-8013-ffd894b3745d","type":"message","text":"(even though they problem don't care too much about security of self-hosted runners)","user":"UDB26738Q","ts":"1617578314.051600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hH9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(even though they problem don't care too much about security of self-hosted runners)"}]}]}],"thread_ts":"1617531738.045700","parent_user_id":"U9MED583T"}]