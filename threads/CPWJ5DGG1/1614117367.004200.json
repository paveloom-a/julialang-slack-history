[{"client_msg_id":"95565be4-d84c-4dee-a502-8ade070e0bea","type":"message","text":"Question about our use of the `actions/cache` action: What's the point of having three decreasingly-specific restore keys, i.e.:\n```          key: ${{ runner.os }}-test-${{ env.cache-name }}-${{ hashFiles('**/Project.toml') }}\n          restore-keys: |\n            ${{ runner.os }}-test-${{ env.cache-name }}-\n            ${{ runner.os }}-test-\n            ${{ runner.os }}-```\nWhy not just do:\n```key: ${{ runner.os }}-${{ hashFIles('**/Project.toml') }}```\nAnd be done with it?","user":"U6NFPDBV1","ts":"1614117367.004200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PQh5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Question about our use of the "},{"type":"text","text":"actions/cache","style":{"code":true}},{"type":"text","text":" action: What's the point of having three decreasingly-specific restore keys, i.e.:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"          key: ${{ runner.os }}-test-${{ env.cache-name }}-${{ hashFiles('**/Project.toml') }}\n          restore-keys: |\n            ${{ runner.os }}-test-${{ env.cache-name }}-\n            ${{ runner.os }}-test-\n            ${{ runner.os }}-"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Why not just do:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"key: ${{ runner.os }}-${{ hashFIles('**/Project.toml') }}"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"And be done with it?"}]}]}],"thread_ts":"1614117367.004200","reply_count":6,"reply_users_count":3,"latest_reply":"1614122893.011700","reply_users":["UDB26738Q","U7THT3TM3","U6C5KSWAC"],"subscribed":false},{"client_msg_id":"5b5703ea-f454-42a3-8211-f0e67ad2fe7b","type":"message","text":"I think <@U6C5KSWAC> recommended that, but I've seen it elsewhere","user":"UDB26738Q","ts":"1614117504.005100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aQPho","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think "},{"type":"user","user_id":"U6C5KSWAC"},{"type":"text","text":" recommended that, but I've seen it elsewhere"}]}]}],"thread_ts":"1614117367.004200","parent_user_id":"U6NFPDBV1"},{"client_msg_id":"7506c64d-80a7-4441-8335-5639bf7fa248","type":"message","text":"My understanding of the point is that\n1. `test` allows for multiple caches (you may want other caches for other things in other workflows)\n2. the multiple keys let you hit other caches if the project.toml changes (?)","user":"UDB26738Q","ts":"1614117970.006300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"o/f","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My understanding of the point is that\n1. "},{"type":"text","text":"test","style":{"code":true}},{"type":"text","text":" allows for multiple caches (you may want other caches for other things in other workflows)\n2. the multiple keys let you hit other caches if the project.toml changes (?)"}]}]}],"thread_ts":"1614117367.004200","parent_user_id":"U6NFPDBV1"},{"client_msg_id":"20EE431B-5513-4E83-8FB8-60E03C3D207C","type":"message","text":"I'll defer to <@U6C5KSWAC> and <@UDB26738Q> on this","user":"U7THT3TM3","ts":"1614118178.008100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z7v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'll defer to "},{"type":"user","user_id":"U6C5KSWAC"},{"type":"text","text":" and "},{"type":"user","user_id":"UDB26738Q"},{"type":"text","text":" on this"}]}]}],"thread_ts":"1614117367.004200","parent_user_id":"U6NFPDBV1"},{"client_msg_id":"57718510-9000-438D-A9B0-67C1496B941A","type":"message","text":"That being said, <@U6NFPDBV1> what you've suggested makes sense to me, and it should work","user":"U7THT3TM3","ts":"1614118201.009000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"S1=rj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That being said, "},{"type":"user","user_id":"U6NFPDBV1"},{"type":"text","text":" what you've suggested makes sense to me, and it should work"}]}]}],"thread_ts":"1614117367.004200","parent_user_id":"U6NFPDBV1"},{"client_msg_id":"c4c98eca-b00a-4d46-af9f-79df9913f1c1","type":"message","text":"this post <https://discourse.julialang.org/t/recommendation-cache-julia-artifacts-in-ci-services/35484/6> confirms point 2","user":"UDB26738Q","ts":"1614118475.009600","team":"T68168MUP","attachments":[{"service_name":"JuliaLang","title":"Recommendation: cache `~/.julia/artifacts` in CI services","title_link":"https://discourse.julialang.org/t/recommendation-cache-julia-artifacts-in-ci-services/35484/6","text":"If thereâ€™s no exact match for the key, it falls back to the restore-keys: <https://docs.github.com/en/actions/configuring-and-managing-workflows/caching-dependencies-to-speed-up-workflows#matching-a-cache-key> If you change Project.toml, it should still match ${{ runner.os }}-test-${{ env.cache-name }}-, assuming there is a cache. This only works if the cache has been accessed within the last week which is not the case for many packages.","fallback":"JuliaLang: Recommendation: cache `~/.julia/artifacts` in CI services","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","ts":1594641140,"from_url":"https://discourse.julialang.org/t/recommendation-cache-julia-artifacts-in-ci-services/35484/6","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/recommendation-cache-julia-artifacts-in-ci-services/35484/6"}],"blocks":[{"type":"rich_text","block_id":"pBR6N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this post "},{"type":"link","url":"https://discourse.julialang.org/t/recommendation-cache-julia-artifacts-in-ci-services/35484/6"},{"type":"text","text":" confirms point 2"}]}]}],"thread_ts":"1614117367.004200","parent_user_id":"U6NFPDBV1","reactions":[{"name":"+1","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"26933b82-c057-4a40-80af-5ccd91b30415","type":"message","text":"&gt; I think <@U6C5KSWAC> recommended that, but I've seen it elsewhere\nI got it from the GHA docs: <https://docs.github.com/en/actions/guides/caching-dependencies-to-speed-up-workflows#example-using-the-cache-action>","user":"U6C5KSWAC","ts":"1614122893.011700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gAICL","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"I think "},{"type":"user","user_id":"U6C5KSWAC"},{"type":"text","text":" recommended that, but I've seen it elsewhere"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI got it from the GHA docs: "},{"type":"link","url":"https://docs.github.com/en/actions/guides/caching-dependencies-to-speed-up-workflows#example-using-the-cache-action"}]}]}],"thread_ts":"1614117367.004200","parent_user_id":"U6NFPDBV1","reactions":[{"name":"+1","users":["UDB26738Q","U7THT3TM3"],"count":2}]}]