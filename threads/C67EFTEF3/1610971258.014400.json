[{"client_msg_id":"6d6ec594-b1ff-4c7a-bd7d-b6b41aa92f22","type":"message","text":"Is there a way to add a dependency  to the Project.toml file of a package without creating a Manifest.toml file or checking dependencies? `Pkg.add` does a lot of unnecessary work when I am just lazy to find, copy and paste the UUID of the dependency to the Project.toml myself.","user":"U85JBUGGP","ts":"1610971258.014400","team":"T68168MUP","edited":{"user":"U85JBUGGP","ts":"1610971271.000000"},"blocks":[{"type":"rich_text","block_id":"AJ7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way to add a dependency  to the Project.toml file of a package without creating a Manifest.toml file or checking dependencies? "},{"type":"text","text":"Pkg.add","style":{"code":true}},{"type":"text","text":" does a lot of unnecessary work when I am just lazy to find, copy and paste the UUID of the dependency to the Project.toml myself."}]}]}],"thread_ts":"1610971258.014400","reply_count":16,"reply_users_count":3,"latest_reply":"1610979398.018200","reply_users":["UH24GRBLL","U85JBUGGP","UPSSPPBFV"],"subscribed":false},{"client_msg_id":"71419a6b-82f5-4554-adea-2a3f48f9fa1e","type":"message","text":"You can do that, but what unnecessary work is Pkg.add doing?","user":"UH24GRBLL","ts":"1610972662.015000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"szic","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can do that, but what unnecessary work is Pkg.add doing?"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"ebb1fe56-b19e-4110-a798-10f44f72c3b5","type":"message","text":"creating a Manifest file and complaining about unregistered dependencies of my dependency","user":"U85JBUGGP","ts":"1610972876.015200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jmV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"creating a Manifest file and complaining about unregistered dependencies of my dependency"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"dc7bcba8-ed09-4fe0-a5ef-fdadadaa84f1","type":"message","text":"because it treats the package's toml files as \"the environment\" rather than as a dependency list of the package.","user":"U85JBUGGP","ts":"1610972954.015400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r+Bs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"because it treats the package's toml files as \"the environment\" rather than as a dependency list of the package."}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"805ecc25-3f52-4a73-8498-61679bb32aad","type":"message","text":"a Manifest is where the precise versions that are used right now are recorded","user":"UH24GRBLL","ts":"1610974052.015600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"heyL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"a Manifest is where the precise versions that are used right now are recorded"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"4d8cbc54-655c-492c-8890-f250faa49c33","type":"message","text":"if you have unregistered stuff, you'll have to properly add it as a dev dependency to the dependency as well","user":"UH24GRBLL","ts":"1610974085.015800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NbiW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you have unregistered stuff, you'll have to properly add it as a dev dependency to the dependency as well"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"43a955df-19af-44cb-8b2e-0f1194968cfa","type":"message","text":"the toml files are by definition the environment, not sure what you mean?","user":"UH24GRBLL","ts":"1610974109.016000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gWy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the toml files are by definition the environment, not sure what you mean?"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"50a6ca51-8c78-4274-a41a-5c05dc2a99ec","type":"message","text":"Adding a dependency to a package is distinct from adding a package to an environment. I can add a dependency manually and update the Manifest in the global environment without ever having a package-specific Manifest.","user":"U85JBUGGP","ts":"1610974398.016200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7aB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Adding a dependency to a package is distinct from adding a package to an environment. I can add a dependency manually and update the Manifest in the global environment without ever having a package-specific Manifest."}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"a7e59bcd-07e4-435a-8715-3b772427dce4","type":"message","text":"This is what I want to do. I want to add a dependency to a package and update the global environment's Manifest without creating a Manifest for the package.","user":"U85JBUGGP","ts":"1610974459.016400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Mwr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This is what I want to do. I want to add a dependency to a package and update the global environment's Manifest without creating a Manifest for the package."}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"1674d2b1-42ef-437e-b883-51d3b68f2fb5","type":"message","text":"where a dependency can be acquired from is stored in the manifest; if you have unregistered dependencies that can't be downloaded from a Registry (be that General, a LocalRegistry or another one), you have to have a manifest to tell julia where the code is","user":"UH24GRBLL","ts":"1610974530.016600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WlM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"where a dependency can be acquired from is stored in the manifest; if you have unregistered dependencies that can't be downloaded from a Registry (be that General, a LocalRegistry or another one), you have to have a manifest to tell julia where the code is"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"7699bbb7-06fb-406b-8bb1-71ed6d4dd1c3","type":"message","text":"I guess you can also make sure it's available in the LOAD_PATH, but that's not stable for distribution","user":"UH24GRBLL","ts":"1610974575.016800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6Aiqg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess you can also make sure it's available in the LOAD_PATH, but that's not stable for distribution"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"92fc2712-4c64-4b2a-80b8-a54dd808096b","type":"message","text":"My question would be: why are you doing this? Why would you develop packages in Julia but not use the package manager the way it's meant to be used (with one Project.toml and Manifest.toml per package). You're only causing yourself pain and trouble that way. There are very good reasons why package management in Julia is based on the idea of local environments. Why not making use of them?","user":"UPSSPPBFV","ts":"1610976202.017000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7X7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My question would be: why are you doing this? Why would you develop packages in Julia but not use the package manager the way it's meant to be used (with one Project.toml and Manifest.toml per package). You're only causing yourself pain and trouble that way. There are very good reasons why package management in Julia is based on the idea of local environments. Why not making use of them?"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"873838ae-a087-4824-9d5e-9fd49addf74c","type":"message","text":"Most Julia packages don't use Manifest files. One reason is that CI tries to use the Manifest file for testing which makes it only definitely work for a single Julia version, other versions may not be compatible, so we can't test multiple versions. Another reason is that the config in the Manifest file can be different from the one a user gets when using `]add pkgname` locally so if CI uses the Manifest, we don't test the user's installation experience.","user":"U85JBUGGP","ts":"1610978350.017200","team":"T68168MUP","edited":{"user":"U85JBUGGP","ts":"1610978395.000000"},"blocks":[{"type":"rich_text","block_id":"R3d","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Most Julia packages don't use Manifest files. One reason is that CI tries to use the Manifest file for testing which makes it only definitely work for a single Julia version, other versions may not be compatible, so we can't test multiple versions. Another reason is that the config in the Manifest file can be different from the one a user gets when using "},{"type":"text","text":"]add pkgname","style":{"code":true}},{"type":"text","text":" locally so if CI uses the Manifest, we don't test the user's installation experience."}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"2822dc53-b0e7-41d5-88be-f3c958255fd5","type":"message","text":"I don't think that's true. As far as I understand it, most Julia packages _do_ make use of Manifest files when they are being developed. What they don't do is push them to the repository. Which is indeed the right way to do things for library-type packages. But I'm pretty sure most people who develop packages have a Manifest file in their local repos.","user":"UPSSPPBFV","ts":"1610978696.017500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mdyT0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think that's true. As far as I understand it, most Julia packages "},{"type":"text","text":"do","style":{"italic":true}},{"type":"text","text":" make use of Manifest files when they are being developed. What they don't do is push them to the repository. Which is indeed the right way to do things for library-type packages. But I'm pretty sure most people who develop packages have a Manifest file in their local repos."}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP","reactions":[{"name":"100","users":["UH24GRBLL"],"count":1}]},{"client_msg_id":"28a200cb-6e94-4e84-947b-2d53f23c6b51","type":"message","text":"Perhaps, but yes doing that would solve my problem. Thanks!","user":"U85JBUGGP","ts":"1610979183.017800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YJn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Perhaps, but yes doing that would solve my problem. Thanks!"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"26a614cd-0d10-4f9b-ad07-3d7f2b824810","type":"message","text":"You're welcome :slightly_smiling_face:","user":"UPSSPPBFV","ts":"1610979244.018000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mWO1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You're welcome "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"},{"client_msg_id":"b608f1bd-4a03-42a8-bd77-3c96af7c5f41","type":"message","text":"If you're developing a library style package, it's best to put the Manifest.toml in your .gitignore","user":"UH24GRBLL","ts":"1610979398.018200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QnLry","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you're developing a library style package, it's best to put the Manifest.toml in your .gitignore"}]}]}],"thread_ts":"1610971258.014400","parent_user_id":"U85JBUGGP"}]