[{"client_msg_id":"ad476a7b-d912-4e86-a71a-b937e03e8329","type":"message","text":"I have a question. Suppose my global environment in `~/.julia/environments/v1.6/Project.toml`contains just IJulia and Pluto. Then I run a Pluto notebook that does\n```Pkg.activate(mktempdir())\n\tPkg.add([\n\t\t\tPkg.PackageSpec(name=\"PlutoUI\",version=\"0.7\"),\n\t\t\tPkg.PackageSpec(name=\"Plots\"),\n\n\t\t\t])\n\n\tusing PlutoUI, Plots```\nThis takes some relatively large time t1, because Plots. If I totally close the notebook, and then open it again, which takes time t2, is t2 &lt; t1 because Plots was already installed once and some of that was cached, or is t1==t2 because all of that was installed to the tempdir only?\nI’d try testing this, but as I’ve already had Plots installed, it might not be a good test.","user":"U01CQTKB86N","ts":"1617554358.092200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9JDf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a question. Suppose my global environment in "},{"type":"text","text":"~/.julia/environments/v1.6/Project.toml","style":{"code":true}},{"type":"text","text":"contains just IJulia and Pluto. Then I run a Pluto notebook that does\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Pkg.activate(mktempdir())\n\tPkg.add([\n\t\t\tPkg.PackageSpec(name=\"PlutoUI\",version=\"0.7\"),\n\t\t\tPkg.PackageSpec(name=\"Plots\"),\n\n\t\t\t])\n\n\tusing PlutoUI, Plots"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"This takes some relatively large time t1, because Plots. If I totally close the notebook, and then open it again, which takes time t2, is t2 < t1 because Plots was already installed once and some of that was cached, or is t1==t2 because all of that was installed to the tempdir only?\nI’d try testing this, but as I’ve already had Plots installed, it might not be a good test."}]}]}],"thread_ts":"1617554358.092200","reply_count":4,"reply_users_count":2,"latest_reply":"1617559702.093400","reply_users":["UBVE598BC","U01CQTKB86N"],"is_locked":false,"subscribed":false},{"client_msg_id":"c7520f01-0120-485e-bc7f-bb097decc977","type":"message","text":"The `tempdir` only contains the `Project.toml` and `Manifest.toml` for the environment. The actual installation of packages happen in `~/.julia/packages` and is shared between environments. (In principle a package can be garbage collected when there is no environment left pointing to it, but unless you take active measures this won't happen in any kind of short term.)","user":"UBVE598BC","ts":"1617556100.092700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JqRD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The "},{"type":"text","text":"tempdir","style":{"code":true}},{"type":"text","text":" only contains the "},{"type":"text","text":"Project.toml","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"Manifest.toml","style":{"code":true}},{"type":"text","text":" for the environment. The actual installation of packages happen in "},{"type":"text","text":"~/.julia/packages","style":{"code":true}},{"type":"text","text":" and is shared between environments. (In principle a package can be garbage collected when there is no environment left pointing to it, but unless you take active measures this won't happen in any kind of short term.)"}]}]}],"thread_ts":"1617554358.092200","parent_user_id":"U01CQTKB86N","reactions":[{"name":"+1::skin-tone-3","users":["U01CQTKB86N"],"count":1}]},{"client_msg_id":"2918988d-ce71-45a6-b190-78842c38f8c0","type":"message","text":"That said it's possible that the bottleneck is entirely in `using Plots`, and other parts are mostly insignificant.","user":"UBVE598BC","ts":"1617556298.092900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CcozF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That said it's possible that the bottleneck is entirely in "},{"type":"text","text":"using Plots","style":{"code":true}},{"type":"text","text":", and other parts are mostly insignificant."}]}]}],"thread_ts":"1617554358.092200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"cd694678-3c92-40da-af38-01404a0384b5","type":"message","text":"With 1.6 and this short amount of packages I see no problem. With 1.5 and many more packages I got annoyed and edited the notebooks to point to a local Project.toml. Hopefully that’s not needed at all with 1.6.","user":"U01CQTKB86N","ts":"1617556629.093200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TEf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"With 1.6 and this short amount of packages I see no problem. With 1.5 and many more packages I got annoyed and edited the notebooks to point to a local Project.toml. Hopefully that’s not needed at all with 1.6."}]}]}],"thread_ts":"1617554358.092200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"43196f0d-7980-430d-806f-acc9e259a948","type":"message","text":"Btw, if you want to test you can simulate a clean install by pointing `JULIA_DEPOT_PATH` to an empty directory.","user":"UBVE598BC","ts":"1617559702.093400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V2FOX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Btw, if you want to test you can simulate a clean install by pointing "},{"type":"text","text":"JULIA_DEPOT_PATH","style":{"code":true}},{"type":"text","text":" to an empty directory."}]}]}],"thread_ts":"1617554358.092200","parent_user_id":"U01CQTKB86N","reactions":[{"name":"+1::skin-tone-3","users":["U01CQTKB86N"],"count":1}]}]