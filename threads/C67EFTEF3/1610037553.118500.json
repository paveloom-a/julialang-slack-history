[{"client_msg_id":"83727843-e956-49ca-aecf-ffaa3950141d","type":"message","text":"Presumably right now there's no way to do this, but wanted to check to be sure. I'm trying to share a reproducible workflow that involves Conda, PyCall. And I'm running `Conda.add(\"packagename\")` as part of the setup process. Right now, I can add the steps to the README, but it would be nice if that could be automated some how. Like, when I run `Pkg.instantiate` it runs a specific set of predefined Julia code in that project. There isn't a way to do this, right?","user":"ULGMQ3LCB","ts":"1610037553.118500","team":"T68168MUP","edited":{"user":"ULGMQ3LCB","ts":"1610037571.000000"},"blocks":[{"type":"rich_text","block_id":"2s=F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Presumably right now there's no way to do this, but wanted to check to be sure. I'm trying to share a reproducible workflow that involves Conda, PyCall. And I'm running "},{"type":"text","text":"Conda.add(\"packagename\")","style":{"code":true}},{"type":"text","text":" as part of the setup process. Right now, I can add the steps to the README, but it would be nice if that could be automated some how. Like, when I run "},{"type":"text","text":"Pkg.instantiate","style":{"code":true}},{"type":"text","text":" it runs a specific set of predefined Julia code in that project. There isn't a way to do this, right?"}]}]}],"thread_ts":"1610037553.118500","reply_count":9,"reply_users_count":4,"latest_reply":"1610096770.122000","reply_users":["UDB26738Q","ULGMQ3LCB","USBKT1275","U6A936746"],"subscribed":false},{"client_msg_id":"d1d1a726-7fec-412b-9f7f-efcad99749cf","type":"message","text":"you could put it in `deps/build.jl`, but I'm not sure _forcing_ installation of a Conda package in this way is a good idea, I'd at least make it optional","user":"UDB26738Q","ts":"1610037669.118700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dTLn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you could put it in "},{"type":"text","text":"deps/build.jl","style":{"code":true}},{"type":"text","text":", but I'm not sure "},{"type":"text","text":"forcing","style":{"italic":true}},{"type":"text","text":" installation of a Conda package in this way is a good idea, I'd at least make it optional"}]}]}],"thread_ts":"1610037553.118500","parent_user_id":"ULGMQ3LCB","reactions":[{"name":"thankyou","users":["ULGMQ3LCB"],"count":1}]},{"client_msg_id":"2d2a86e3-60d2-4871-9184-201a4c662be5","type":"message","text":"This only works if a user types `build` instead of `instantiate`, right?","user":"ULGMQ3LCB","ts":"1610038126.119000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9b3a","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This only works if a user types "},{"type":"text","text":"build","style":{"code":true}},{"type":"text","text":" instead of "},{"type":"text","text":"instantiate","style":{"code":true}},{"type":"text","text":", right?"}]}]}],"thread_ts":"1610037553.118500","parent_user_id":"ULGMQ3LCB"},{"client_msg_id":"432167fc-a2d4-49ff-b80c-c6e18f22f236","type":"message","text":"in the general case they need to explicitly build, yes, I don't know if `instantiate` does that automatically (I wouldn't expect so)","user":"UDB26738Q","ts":"1610038178.119200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OP0m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in the general case they need to explicitly build, yes, I don't know if "},{"type":"text","text":"instantiate","style":{"code":true}},{"type":"text","text":" does that automatically (I wouldn't expect so)"}]}]}],"thread_ts":"1610037553.118500","parent_user_id":"ULGMQ3LCB"},{"client_msg_id":"a9bdae76-8e6a-4eb1-a764-d143a508f663","type":"message","text":"I'm not sure if there is anything you could \"hook\" to during `instantiate` , but there is `__init__` function which is called when package is loaded for the first time, so you could perform check if library is there in this function.\nMy way to do it would be putting the installation to `deps/build.jl` and in `__init__` perform check that everything is set up correctly.\nWe do something similar with binary we're downloading during setup of some internal package.","user":"USBKT1275","ts":"1610039024.119400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"T7K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure if there is anything you could \"hook\" to during "},{"type":"text","text":"instantiate","style":{"code":true}},{"type":"text","text":" , but there is "},{"type":"text","text":"__init__","style":{"code":true}},{"type":"text","text":" function which is called when package is loaded for the first time, so you could perform check if library is there in this function.\nMy way to do it would be putting the installation to "},{"type":"text","text":"deps/build.jl","style":{"code":true}},{"type":"text","text":" and in "},{"type":"text","text":"__init__","style":{"code":true}},{"type":"text","text":" perform check that everything is set up correctly.\nWe do something similar with binary we're downloading during setup of some internal package."}]}]}],"thread_ts":"1610037553.118500","parent_user_id":"ULGMQ3LCB"},{"client_msg_id":"3ed3ce87-07e1-4dd9-94a2-3a532af75301","type":"message","text":"Is a thereba reason you can't you use `pyimport_conda`?","user":"U6A936746","ts":"1610061134.120900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jRA=S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is a thereba reason you can't you use "},{"type":"text","text":"pyimport_conda","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1610037553.118500","parent_user_id":"ULGMQ3LCB"},{"client_msg_id":"81ef59b7-5116-406c-ac04-8b2718b4e805","type":"message","text":"Are you asking Matej or me? I was planning to use `pyimport_conda`, but I thought I'd have to install that package first.","user":"ULGMQ3LCB","ts":"1610072239.121100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jp4Yp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Are you asking Matej or me? I was planning to use "},{"type":"text","text":"pyimport_conda","style":{"code":true}},{"type":"text","text":", but I thought I'd have to install that package first."}]}]}],"thread_ts":"1610037553.118500","parent_user_id":"ULGMQ3LCB"},{"client_msg_id":"00053fc4-41d2-4809-abe6-730ef0f59137","type":"message","text":"Pyimport_conda installs the package if it isn't already installed in current python env.\nThen imports it\n\nSee readme of <https://github.com/JuliaPy/PyCall.jl|https://github.com/JuliaPy/PyCall.jl>","user":"U6A936746","ts":"1610073195.121300","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1610073211.000000"},"blocks":[{"type":"rich_text","block_id":"H=LZ0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Pyimport_conda installs the package if it isn't already installed in current python env.\nThen imports it\n\nSee readme of "},{"type":"link","url":"https://github.com/JuliaPy/PyCall.jl","text":"https://github.com/JuliaPy/PyCall.jl"}]}]}],"thread_ts":"1610037553.118500","parent_user_id":"ULGMQ3LCB"},{"client_msg_id":"69fb78d7-0b7a-4eed-b257-d04526b30c5e","type":"message","text":"Oh neat! I didn't know it installed it as well! Thanks, I see it in the documentation now. Unrelated to this thread, but is there a way to import it from a specific environment? I couldn't find that in the documentation or when experimenting with it. Like if I did `Conda.add(\"numpy\", :custom)`, I was expecting an function like `pyimport_conda(\"numpy\", \"numpy\", :custom)` to exist.","user":"ULGMQ3LCB","ts":"1610074796.121600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YQ1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh neat! I didn't know it installed it as well! Thanks, I see it in the documentation now. Unrelated to this thread, but is there a way to import it from a specific environment? I couldn't find that in the documentation or when experimenting with it. Like if I did "},{"type":"text","text":"Conda.add(\"numpy\", :custom)","style":{"code":true}},{"type":"text","text":", I was expecting an function like "},{"type":"text","text":"pyimport_conda(\"numpy\", \"numpy\", :custom)","style":{"code":true}},{"type":"text","text":" to exist."}]}]}],"thread_ts":"1610037553.118500","parent_user_id":"ULGMQ3LCB"},{"client_msg_id":"cdb9ccb1-cb72-45c6-a62a-4107a03b98b5","type":"message","text":"I don't recall.","user":"U6A936746","ts":"1610096770.122000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U5phy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't recall."}]}]}],"thread_ts":"1610037553.118500","parent_user_id":"ULGMQ3LCB"}]