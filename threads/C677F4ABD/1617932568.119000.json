[{"client_msg_id":"254e6073-2fab-481a-b34c-9b60dbea3dcd","type":"message","text":"This is half linear algebra ignorance, half Julia: is there a simple formula to find the condition number of a rank one outer product of vectors? Ie for some potentially large `v` find the `cond(v * transpose(v))` without making that potentially massive and dense matrix concrete?","user":"U7Z4938R3","ts":"1617932568.119000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V98","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This is half linear algebra ignorance, half Julia: is there a simple formula to find the condition number of a rank one outer product of vectors? Ie for some potentially large "},{"type":"text","text":"v","style":{"code":true}},{"type":"text","text":" find the "},{"type":"text","text":"cond(v * transpose(v))","style":{"code":true}},{"type":"text","text":" without making that potentially massive and dense matrix concrete?"}]}]}],"thread_ts":"1617932568.119000","reply_count":11,"reply_users_count":7,"latest_reply":"1617956582.125100","reply_users":["U01DD7Z0D89","U7Z4938R3","U7LNECWEA","UB4KR33H9","UJDHH8CG4","U85JBUGGP","U680T6770"],"is_locked":false,"subscribed":false},{"client_msg_id":"d3b60258-cf2a-4eb9-acd0-cef974e9eb17","type":"message","text":"Isn't the condition number of any rank-deficient matrix infinity? In some sense, the condition number is a measure of how close the matrix is to not being full rank, and a rank one outer product is genuinely not full rank.","user":"U01DD7Z0D89","ts":"1617933434.119100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PTA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Isn't the condition number of any rank-deficient matrix infinity? In some sense, the condition number is a measure of how close the matrix is to not being full rank, and a rank one outer product is genuinely not full rank."}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3","reactions":[{"name":"point_up","users":["U011LUQ182G","U7LNECWEA","U85JBUGGP"],"count":3},{"name":"point_up::skin-tone-3","users":["UJ7DVTVQ8"],"count":1}]},{"client_msg_id":"aacb2fb8-ce2a-45c1-8c2a-fdc44f8109ce","type":"message","text":"Hmmm...","user":"U7Z4938R3","ts":"1617933471.119300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MmB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmmm..."}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3"},{"client_msg_id":"71a444fd-2581-4eb3-9781-c4621b203c41","type":"message","text":"<@UJDHH8CG4>","user":"U7Z4938R3","ts":"1617933524.119500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YXdx9","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UJDHH8CG4"}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3"},{"client_msg_id":"68ef7751-434e-4ce4-945a-84cf3664a4d3","type":"message","text":"I don’t know if anything exists offhand, but you could exploit an  SVD algorithm to just iterate over the elements of `v` and compute the condition number as the ratio of the largest to smallest singular values.  I’m not sure how fast it’ll be, but you can avoid making the matrix “concrete”.","user":"U7LNECWEA","ts":"1617938421.120300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Av2c","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t know if anything exists offhand, but you could exploit an  SVD algorithm to just iterate over the elements of "},{"type":"text","text":"v","style":{"code":true}},{"type":"text","text":" and compute the condition number as the ratio of the largest to smallest singular values.  I’m not sure how fast it’ll be, but you can avoid making the matrix “concrete”."}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3"},{"client_msg_id":"b2911905-b719-43db-97a2-078c2ea6d6a4","type":"message","text":"You could make a Matrix type that only stores `v`. But if the `cond` passes that to a C or BLAS routine that requires a dense matrix, it’ll become concrete. It’s a twist on how sparse matrices formats are often stored.","user":"U7LNECWEA","ts":"1617938581.120500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uFLy1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You could make a Matrix type that only stores "},{"type":"text","text":"v","style":{"code":true}},{"type":"text","text":". But if the "},{"type":"text","text":"cond","style":{"code":true}},{"type":"text","text":" passes that to a C or BLAS routine that requires a dense matrix, it’ll become concrete. It’s a twist on how sparse matrices formats are often stored."}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3"},{"client_msg_id":"53d25fa6-d6e9-4bff-942d-dd485c2a7faa","type":"message","text":"OK,  then you sure have answered the quetsion!  Should have tried a few examples first.  OK.  Looks like the condition number is not the way to diagnose poorly conditioned MLE-style problems from the product of the gradients.","user":"U7Z4938R3","ts":"1617938618.120700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FN77k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK,  then you sure have answered the quetsion!  Should have tried a few examples first.  OK.  Looks like the condition number is not the way to diagnose poorly conditioned MLE-style problems from the product of the gradients."}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3"},{"client_msg_id":"2E76FCE3-3EDC-4553-BFE0-C4D3BAC60BD4","type":"message","text":"Yes, it’s infinity.","user":"UB4KR33H9","ts":"1617944191.121200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fP1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes, it’s infinity."}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3"},{"client_msg_id":"7a4b206b-a45d-4a3b-8a15-c4ac23c605e0","type":"message","text":"Hi Jesse. They are correct that it's infinity, which we figured out immediately by trying it. We discussed some alternatives; one is to compute it by simulation, averaging over many draws of the product, which is fine but expensive. There are parametric cases where a closed form formula exists. But in general it isn't the way to check.","user":"UJDHH8CG4","ts":"1617947895.121400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+Sdsi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi Jesse. They are correct that it's infinity, which we figured out immediately by trying it. We discussed some alternatives; one is to compute it by simulation, averaging over many draws of the product, which is fine but expensive. There are parametric cases where a closed form formula exists. But in general it isn't the way to check."}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3"},{"client_msg_id":"cea783f5-c3a6-4805-8653-8b9f27350e94","type":"message","text":"You probably mean the condition number of the Hessian","user":"U85JBUGGP","ts":"1617949860.121700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NMR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You probably mean the condition number of the Hessian"}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3","reactions":[{"name":"+1","users":["UJDHH8CG4","U7LNECWEA"],"count":2}]},{"client_msg_id":"144365eb-98ca-4239-851b-e85cbf5fa3be","type":"message","text":"Or a BFGS approximation of the Hessian","user":"U85JBUGGP","ts":"1617949875.121900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6m9jk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or a BFGS approximation of the Hessian"}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3"},{"client_msg_id":"0fcd5b91-ab4d-4fa0-a4a6-c2420491248f","type":"message","text":"My guess would be that the confusion here is that `E(s*s')` generally has full rank (it’s the same as `E(J)` for a correctly specified model) even though it looks like a rank one matrix.","user":"U680T6770","ts":"1617956582.125100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"11A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My guess would be that the confusion here is that "},{"type":"text","text":"E(s*s')","style":{"code":true}},{"type":"text","text":" generally has full rank (it’s the same as "},{"type":"text","text":"E(J)","style":{"code":true}},{"type":"text","text":" for a correctly specified model) even though it looks like a rank one matrix."}]}]}],"thread_ts":"1617932568.119000","parent_user_id":"U7Z4938R3"}]