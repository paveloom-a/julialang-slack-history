[{"client_msg_id":"2e0e91ac-95d5-4c51-a230-97d4c5ae6a95","type":"message","text":"Would be great if someone with `SparseMatrixCSC` knowledge can shine some light onto <https://discourse.julialang.org/t/index-type-of-sparse-matrix/54828>.","user":"U881D0W2C","ts":"1612780935.108100","team":"T68168MUP","attachments":[{"service_name":"JuliaLang","title":"Index type of sparse matrix","title_link":"https://discourse.julialang.org/t/index-type-of-sparse-matrix/54828","text":"I’m using Arpack.jl to get the lowest few eigenvalues of relatively large N x N matrices. To achive this, I’m first cal sparse(row, col, data) to get the matrix to the appropriate form. Although the matrices I’m working on are large, N should be representable with UInt32, i.e., smaller than 2^32, so this is what I’m using as the type of row and col to save some memory. So far so good - but I get problems when the number of entries in my matrix is larger than 2^32. In this case I get an error sa...","fallback":"JuliaLang: Index type of sparse matrix","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","ts":1612770578,"from_url":"https://discourse.julialang.org/t/index-type-of-sparse-matrix/54828","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/index-type-of-sparse-matrix/54828"}],"blocks":[{"type":"rich_text","block_id":"oqJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Would be great if someone with "},{"type":"text","text":"SparseMatrixCSC","style":{"code":true}},{"type":"text","text":" knowledge can shine some light onto "},{"type":"link","url":"https://discourse.julialang.org/t/index-type-of-sparse-matrix/54828"},{"type":"text","text":"."}]}]}],"thread_ts":"1612780935.108100","reply_count":10,"reply_users_count":3,"latest_reply":"1612800440.111300","reply_users":["U6N6VQE30","U67SCG4HG","U011TRN4QBU"],"subscribed":false},{"client_msg_id":"049f918d-1357-4897-8a70-676edffca985","type":"message","text":"What kinda of reply would you expect? SparseMatrixCSC stores row indices of nonzeros, so you gotta work with an integer type that can represent size(A, 1)","user":"U6N6VQE30","ts":"1612781407.108400","team":"T68168MUP","edited":{"user":"U6N6VQE30","ts":"1612781422.000000"},"blocks":[{"type":"rich_text","block_id":"DidCI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What kinda of reply would you expect? SparseMatrixCSC stores row indices of nonzeros, so you gotta work with an integer type that can represent size(A, 1)"}]}]}],"thread_ts":"1612780935.108100","parent_user_id":"U881D0W2C"},{"client_msg_id":"c7509795-9624-4e9e-b8ca-7d1b15f2d9f8","type":"message","text":"Potentially up to `nnz(A)`, no?","user":"U67SCG4HG","ts":"1612781656.108700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/Rz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Potentially up to "},{"type":"text","text":"nnz(A)","style":{"code":true}},{"type":"text","text":", no?"}]}]}],"thread_ts":"1612780935.108100","parent_user_id":"U881D0W2C"},{"client_msg_id":"42ed7e7f-20f0-4be6-85a7-5aa8244c96cb","type":"message","text":"Oh, your problem is that colptr[i] stores the value index of the i'th column","user":"U6N6VQE30","ts":"1612781705.109000","team":"T68168MUP","edited":{"user":"U6N6VQE30","ts":"1612781711.000000"},"blocks":[{"type":"rich_text","block_id":"ClLjC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, your problem is that colptr[i] stores the value index of the i'th column"}]}]}],"thread_ts":"1612780935.108100","parent_user_id":"U881D0W2C"},{"client_msg_id":"4587319a-29fd-49f5-8cbd-35acfa5f0bf1","type":"message","text":"Yea","user":"U67SCG4HG","ts":"1612781745.109400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EngHR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yea"}]}]}],"thread_ts":"1612780935.108100","parent_user_id":"U881D0W2C"},{"client_msg_id":"30a76dae-e67e-4419-aab7-2e98dcdfa9ba","type":"message","text":"the index type should be able to represent length(nzval)","user":"U6N6VQE30","ts":"1612781746.109600","team":"T68168MUP","edited":{"user":"U6N6VQE30","ts":"1612781754.000000"},"blocks":[{"type":"rich_text","block_id":"b5jDn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the index type should be able to represent length(nzval)"}]}]}],"thread_ts":"1612780935.108100","parent_user_id":"U881D0W2C","reactions":[{"name":"correct_answer","users":["UKG4WF8PJ","U881D0W2C","U67SCG4HG"],"count":3}]},{"client_msg_id":"b0f555c4-79a2-4f33-9ea0-d340fb1475e9","type":"message","text":"it could be split into two integer arrays with different types, but well :man-shrugging:","user":"U6N6VQE30","ts":"1612782032.110000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4Qy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it could be split into two integer arrays with different types, but well "},{"type":"emoji","name":"man-shrugging"}]}]}],"thread_ts":"1612780935.108100","parent_user_id":"U881D0W2C"},{"client_msg_id":"af86b4df-23e4-4aff-9324-b65a4049e1b0","type":"message","text":"We also have a github issue for that.","user":"U011TRN4QBU","ts":"1612794882.110300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xbIe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We also have a github issue for that."}]}]}],"thread_ts":"1612780935.108100","parent_user_id":"U881D0W2C"},{"client_msg_id":"3b19bcb4-4773-41cd-b5ce-45d6fe2764d9","type":"message","text":"<https://github.com/JuliaLang/julia/issues/38790>","user":"U011TRN4QBU","ts":"1612800181.110800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NSB","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/julia/issues/38790"}]}]}],"thread_ts":"1612780935.108100","parent_user_id":"U881D0W2C"},{"client_msg_id":"7bfdd375-84b3-43f9-87d7-efcb896cda74","type":"message","text":"I never really thought about this, but SparseMatrixCSC is not the most memory friendly type for Float16 values :thinking_face:","user":"U6N6VQE30","ts":"1612800366.111000","team":"T68168MUP","edited":{"user":"U6N6VQE30","ts":"1612800376.000000"},"blocks":[{"type":"rich_text","block_id":"ab9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I never really thought about this, but SparseMatrixCSC is not the most memory friendly type for Float16 values "},{"type":"emoji","name":"thinking_face"}]}]}],"thread_ts":"1612780935.108100","parent_user_id":"U881D0W2C"},{"client_msg_id":"fe6e60e1-c870-44c7-94aa-4fd33b338385","type":"message","text":"Maybe `colptr` should be replaced with `diff(colptr)`","user":"U6N6VQE30","ts":"1612800440.111300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"smD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe "},{"type":"text","text":"colptr","style":{"code":true}},{"type":"text","text":" should be replaced with "},{"type":"text","text":"diff(colptr)","style":{"code":true}}]}]}],"thread_ts":"1612780935.108100","parent_user_id":"U881D0W2C"}]