[{"client_msg_id":"b6c954b7-d8fb-430f-8770-6d9e5636ea92","type":"message","text":"Does anyone know how to get a projection matrix out of LowRankModels output?\nLow rank models does the whole PCA via mimimize  `||A - X'Y||`  thing\nand then tells you `X` and `Y`\nso if i PCA from 5 down to 3 I should have a 5x3 projection matrix `P`  that would project up/down into the 3 dimentional space.\nsuch that `P * P' * A  = X'Y ≈ A`\n(This `P` is what MultivariateStats gives it is it’s `proj` field; and is what i expect PCA to look like in general).\nI am trying to workout how to derive `P` from `X` and `Y`\n<@U677NAWV8> thought the answer was `qr(Y).Q` but that has size 3x3","user":"U6A936746","ts":"1613509231.146600","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1613513416.000000"},"blocks":[{"type":"rich_text","block_id":"j+j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does anyone know how to get a projection matrix out of LowRankModels output?\nLow rank models does the whole PCA via mimimize  "},{"type":"text","text":"||A - X'Y||","style":{"code":true}},{"type":"text","text":"  thing\nand then tells you "},{"type":"text","text":"X","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"Y","style":{"code":true}},{"type":"text","text":"\nso if i PCA from 5 down to 3 I should have a 5x3 projection matrix "},{"type":"text","text":"P","style":{"code":true}},{"type":"text","text":"  that would project up/down into the 3 dimentional space.\nsuch that "},{"type":"text","text":"P * P' * A  = X'Y ≈ A","style":{"code":true}},{"type":"text","text":"\n(This "},{"type":"text","text":"P","style":{"code":true}},{"type":"text","text":" is what MultivariateStats gives it is it’s "},{"type":"text","text":"proj","style":{"code":true}},{"type":"text","text":" field; and is what i expect PCA to look like in general).\nI am trying to workout how to derive "},{"type":"text","text":"P","style":{"code":true}},{"type":"text","text":" from "},{"type":"text","text":"X","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"Y","style":{"code":true}},{"type":"text","text":"\n"},{"type":"user","user_id":"U677NAWV8"},{"type":"text","text":" thought the answer was "},{"type":"text","text":"qr(Y).Q","style":{"code":true}},{"type":"text","text":" but that has size 3x3"}]}]}],"thread_ts":"1613509231.146600","reply_count":19,"reply_users_count":3,"latest_reply":"1613512253.151600","reply_users":["UMDEUKM29","U6A936746","UPNRULT51"],"subscribed":false},{"client_msg_id":"2e34b5bc-8e43-4d33-9598-a5dc284f5618","type":"message","text":"What's the dimension of a here?","user":"UMDEUKM29","ts":"1613509414.146900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fUsO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What's the dimension of a here?"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"27b4009b-771c-45ee-9465-f82c703804c2","type":"message","text":"5x5?","user":"UMDEUKM29","ts":"1613509447.147100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"swJKW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"5x5?"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"82717ea4-9a8d-41cd-a602-2e78728d5cb2","type":"message","text":"5x num_obs\nso like 5x50 say","user":"U6A936746","ts":"1613509475.147300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FKn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"5x num_obs\nso like 5x50 say"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"fe656b3b-57e0-4215-a1f1-dceef2bd0411","type":"message","text":"Your convention is weird, usually it's the reverse","user":"UMDEUKM29","ts":"1613509500.147500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"34c=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Your convention is weird, usually it's the reverse"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"70eabaa7-0863-4415-ad78-a1a258d0fac2","type":"message","text":"I agree, but that is what both MultivariateStats and LowRankModels do","user":"U6A936746","ts":"1613509530.147700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/YzPP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I agree, but that is what both MultivariateStats and LowRankModels do"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"304a3688-1816-4716-b2d3-bca6358ed4e8","type":"message","text":"But in any case if you want P P' X to be about X, you need P to be qr of X instead of Y","user":"UMDEUKM29","ts":"1613509571.147900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LEM14","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But in any case if you want P P' X to be about X, you need P to be qr of X instead of Y"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"bc2c4bce-2e8f-403a-ba8d-79a6fff8d624","type":"message","text":"```A is 5x50 (nfeature x nobs)\nP is 5x3  (nfeatures x nlatent)\nX is 3x5 (nlatent x nfeatures)\nY is 3x50 (nlatent x nobs) ```","user":"U6A936746","ts":"1613509645.148200","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1613510390.000000"},"blocks":[{"type":"rich_text","block_id":"GQ4Zv","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"A is 5x50 (nfeature x nobs)\nP is 5x3  (nfeatures x nlatent)\nX is 3x5 (nlatent x nfeatures)\nY is 3x50 (nlatent x nobs) "}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"6e99e89a-0fd8-4f38-a01d-11f65f255772","type":"message","text":"&gt;  But in any case if you want P P’ X to be about X, you need P to be qr of X instead of Y\nWhy do I want `P P' X to be about X` ?","user":"U6A936746","ts":"1613509759.148600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/yhb","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":" But in any case if you want P P’ X to be about X, you need P to be qr of X instead of Y"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nWhy do I want "},{"type":"text","text":"P P' X to be about X","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"d2205a62-9289-4c1c-b90f-de8bd69cd7da","type":"message","text":"In the conventions in which I'm not confused, you have A tall and skinny and you want A - X Y' to be small. X = QQ' X where Q, of the same shape as X, is an orthogonal basis for the range of X, aka qr(X). Q","user":"UMDEUKM29","ts":"1613509770.148800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yJHwc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In the conventions in which I'm not confused, you have A tall and skinny and you want A - X Y' to be small. X = QQ' X where Q, of the same shape as X, is an orthogonal basis for the range of X, aka qr(X). Q"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"9b30ead5-604a-46ff-9625-9a5e47d77c69","type":"message","text":"Isn't this what you want? I'll stop here I think I'll just confuse you further if I'm not using the same convention as you","user":"UMDEUKM29","ts":"1613509836.149000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rkQEO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Isn't this what you want? I'll stop here I think I'll just confuse you further if I'm not using the same convention as you"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"8e28a80e-a947-4299-a329-52e290e94def","type":"message","text":"I want `P` such that ``P * P' * A  = X'Y ≈ A`\nI already have `X` and `Y`  and `A`","user":"U6A936746","ts":"1613509865.149200","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1613510347.000000"},"blocks":[{"type":"rich_text","block_id":"Q8R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I want "},{"type":"text","text":"P","style":{"code":true}},{"type":"text","text":" such that `"},{"type":"text","text":"P * P' * A  = X'Y ≈ A","style":{"code":true}},{"type":"text","text":"\nI already have "},{"type":"text","text":"X","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"Y","style":{"code":true}},{"type":"text","text":"  and "},{"type":"text","text":"A","style":{"code":true}}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"7a6e4b8d-7806-4378-8d1c-71bd12b2ccfe","type":"message","text":"That doesn't match the sizes you gave?","user":"UMDEUKM29","ts":"1613510032.149600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Vet","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That doesn't match the sizes you gave?"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"aaf6acc7-41b8-4a20-9330-168e9e00fcc6","type":"message","text":"Ah sorry will fix","user":"U6A936746","ts":"1613510105.149800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UWl9d","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah sorry will fix"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"fb21d297-8ce9-43fd-b894-b1fe329eae95","type":"message","text":"fixed. I also find this convention sideways, and I lost track. I think it is right now","user":"U6A936746","ts":"1613510397.150400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"POk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"fixed. I also find this convention sideways, and I lost track. I think it is right now"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"b9a85eb7-60bd-4df5-819a-bca008956320","type":"message","text":"I think the problem is that the object returned by `qr` is a bit counterintuitive. Let\n```QR = qr(X')```\nThen `size(QR.Q)` is `(5,5)` and `size(QR.R)` is `(3,3)`, which is not what we expect because we cannot multiply `Q` with `R`!\n(The reason is that `Q` has been extended to form an orthonormal basis.)","user":"UPNRULT51","ts":"1613511125.150600","team":"T68168MUP","edited":{"user":"UPNRULT51","ts":"1613511580.000000"},"blocks":[{"type":"rich_text","block_id":"5Twn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the problem is that the object returned by "},{"type":"text","text":"qr","style":{"code":true}},{"type":"text","text":" is a bit counterintuitive. Let\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"QR = qr(X')"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Then "},{"type":"text","text":"size(QR.Q)","style":{"code":true}},{"type":"text","text":" is "},{"type":"text","text":"(5,5)","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"size(QR.R)","style":{"code":true}},{"type":"text","text":" is "},{"type":"text","text":"(3,3)","style":{"code":true}},{"type":"text","text":", which is not what we expect because we cannot multiply "},{"type":"text","text":"Q","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"R","style":{"code":true}},{"type":"text","text":"!\n(The reason is that "},{"type":"text","text":"Q","style":{"code":true}},{"type":"text","text":" has been extended to form an orthonormal basis.)"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"bf966265-0790-48c2-97fa-94940563750f","type":"message","text":"So what you want is\n```P = QR.Q[:,1:3]```","user":"UPNRULT51","ts":"1613511146.150800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QK+2d","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So what you want is\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"P = QR.Q[:,1:3]"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"72f0fd35-c819-4480-aa41-df0b1d1c5b1d","type":"message","text":"Then\n```P*P'A ≈ X'Y```","user":"UPNRULT51","ts":"1613511220.151000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W4O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Then\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"P*P'A ≈ X'Y"}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746"},{"client_msg_id":"a3b75424-c96e-48f1-a161-40b90241ec5c","type":"message","text":"Nice, thank you.\nThat is exactly what i needed.\nAwesome.","user":"U6A936746","ts":"1613512168.151300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Xe2dD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nice, thank you.\nThat is exactly what i needed.\nAwesome."}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746","reactions":[{"name":"smile","users":["UPNRULT51"],"count":1}]},{"client_msg_id":"9cb4a24c-0798-4a16-8836-95cf9a58c855","type":"message","text":"Just realized you can also write\n```P = Matrix(QR.Q)```\nwhich is slightly more convenient.","user":"UPNRULT51","ts":"1613512253.151600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BjkX3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Just realized you can also write\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"P = Matrix(QR.Q)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"which is slightly more convenient."}]}]}],"thread_ts":"1613509231.146600","parent_user_id":"U6A936746","reactions":[{"name":"ty","users":["U6A936746"],"count":1}]}]