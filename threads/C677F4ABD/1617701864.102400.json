[{"client_msg_id":"72e23714-6a4b-4c65-9a03-b3e8aac076c9","type":"message","text":"I just learned a very valuable lesson about sparse arrays.. I hadn't realized that operating on `view(A, i, j)`  might be a bad idea and also `A(i,j)`  is quite expensive as it extracts a sparse matrix, having to recompute the CSC representation for the new indices... I get huge performance improvements if I just do `Matrix(view(A,i,j))`  when extracting the submatrix. It is super-important to avoid the intermediate step of computing a submatrix in sparse format by using the view. (Just wanted to share this as this was not obvious to me :grin:)","user":"U01L0RJC6FM","ts":"1617701864.102400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kYaLa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I just learned a very valuable lesson about sparse arrays.. I hadn't realized that operating on"},{"type":"text","text":" view(A, i, j)","style":{"code":true}},{"type":"text","text":"  might be a bad idea and also "},{"type":"text","text":"A(i,j)","style":{"code":true}},{"type":"text","text":"  is quite expensive as it extracts a sparse matrix, having to recompute the CSC representation for the new indices... I get huge performance improvements if I just do "},{"type":"text","text":"Matrix(view(A,i,j))","style":{"code":true}},{"type":"text","text":"  when extracting the submatrix. It is super-important to avoid the intermediate step of computing a submatrix in sparse format by using the view. (Just wanted to share this as this was not obvious to me "},{"type":"emoji","name":"grin"},{"type":"text","text":")"}]}]}],"thread_ts":"1617701864.102400","reply_count":1,"reply_users_count":1,"latest_reply":"1617705894.102500","reply_users":["U6A936746"],"is_locked":false,"subscribed":false},{"client_msg_id":"3ca4d8f7-b4e7-4105-bf9a-d604fbdfc673","type":"message","text":"A sparse matrix has to be really sparse before it starts to be faster than a dense matrix.\nI think it might be more common than one actually being sparse enough to be fast to just be too large to fit in memory to do dense.","user":"U6A936746","ts":"1617705894.102500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FiRF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"A sparse matrix has to be really sparse before it starts to be faster than a dense matrix.\nI think it might be more common than one actually being sparse enough to be fast to just be too large to fit in memory to do dense."}]}]}],"thread_ts":"1617701864.102400","parent_user_id":"U01L0RJC6FM"}]