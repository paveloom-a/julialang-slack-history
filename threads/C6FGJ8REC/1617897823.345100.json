[{"client_msg_id":"6175df9d-d552-4350-84f1-dc04b57f0236","type":"message","text":"Really getting into metaprogramming, starting to click! Loving it.","user":"ULNHYTCJC","ts":"1617897823.345100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f94DN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Really getting into metaprogramming, starting to click! Loving it."}]}]}],"thread_ts":"1617897823.345100","reply_count":18,"reply_users_count":2,"latest_reply":"1617903896.354600","reply_users":["UBF9YRB6H","ULNHYTCJC"],"is_locked":false,"subscribed":false,"reactions":[{"name":"100","users":["U8D9768Q6","U6NFPDBV1","U6795JH6H","U67G3QRJM","U013B3NSZGB"],"count":5}]},{"client_msg_id":"2906995d-6d8c-4c2e-aaa7-bfb22ed1d510","type":"message","text":"Are you working on a PR for dataframesmeta?","user":"UBF9YRB6H","ts":"1617898353.345500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zep","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Are you working on a PR for dataframesmeta?"}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"88b23703-018c-4fb5-8d49-76215a179f07","type":"message","text":"Thinking more of a separate package that uses dataframesmeta as a dependency. Thinking it will be too idiosyncratic to be a PR. But happy for it to be heavily drawn on if others find it useful.","user":"ULNHYTCJC","ts":"1617898516.345800","team":"T68168MUP","edited":{"user":"ULNHYTCJC","ts":"1617898537.000000"},"blocks":[{"type":"rich_text","block_id":"P4/n","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thinking more of a separate package that uses dataframesmeta as a dependency. Thinking it will be too idiosyncratic to be a PR. But happy for it to be heavily drawn on if others find it useful."}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"c1d4651d-7568-43d0-b2c9-31e40dea09e8","type":"message","text":"Kind of a decade long goal of finding/stylizing another data management/wrangling tool which is as accessible to new users as Stata.","user":"ULNHYTCJC","ts":"1617898607.346300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A48","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Kind of a decade long goal of finding/stylizing another data management/wrangling tool which is as accessible to new users as Stata."}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"e820aa82-59f6-4ca3-827d-af09ec167fbf","type":"message","text":"I really think DataFramesMeta will be close, soon! Once we get `where` and `@byrow` sorted  out in DataFrames, I think `@chain` with `@transform!` is very close.\n\nPlease file an issue with your more detailed design decisions when you finish working on this package. I don't want people to feel like they have to re-invent the wheel.","user":"UBF9YRB6H","ts":"1617898704.347300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tY1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I really think DataFramesMeta will be close, soon! Once we get "},{"type":"text","text":"where","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"@byrow","style":{"code":true}},{"type":"text","text":" sorted  out in DataFrames, I think "},{"type":"text","text":"@chain","style":{"code":true}},{"type":"text","text":" with "},{"type":"text","text":"@transform!","style":{"code":true}},{"type":"text","text":" is very close.\n\nPlease file an issue with your more detailed design decisions when you finish working on this package. I don't want people to feel like they have to re-invent the wheel."}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"cbaff701-e914-41e3-9821-c7123fdbcb6a","type":"message","text":"Right now I have:\n```n = 7\nx = DataFrame(A=1:n, B=rand(1:2, n), C=rand(1:2, n))\n@mount x\n@make E = :C + :B\n@make (E = round.(:A .^ .5, digits = 1)) iff(:B .&lt; :A .- 1)\n@make by(B) ( H = round(mean(:A),digits = 1)) iff(:A .&gt; 2)```\nProducing\n```7 rows × 5 columns\n    A\tB\tC\tE\tH\n    Int64\tInt64\tInt64\tFloat64?\tFloat64?\n1\t1\t2\t2\t4.0\tmissing\n2\t2\t2\t2\t4.0\tmissing\n3\t3\t2\t1\t3.0\t3.5\n4\t4\t2\t2\t2.0\t3.5\n5\t5\t1\t2\t2.2\t6.0\n6\t6\t1\t2\t2.4\t6.0\n7\t7\t1\t2\t2.6\t6.0```","user":"ULNHYTCJC","ts":"1617898716.347500","team":"T68168MUP","edited":{"user":"ULNHYTCJC","ts":"1617899082.000000"},"blocks":[{"type":"rich_text","block_id":"QMf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Right now I have:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"n = 7\nx = DataFrame(A=1:n, B=rand(1:2, n), C=rand(1:2, n))\n@mount x\n@make E = :C + :B\n@make (E = round.(:A .^ .5, digits = 1)) iff(:B .< :A .- 1)\n@make by(B) ( H = round(mean(:A),digits = 1)) iff(:A .> 2)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Producing\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"7 rows × 5 columns\n    A\tB\tC\tE\tH\n    Int64\tInt64\tInt64\tFloat64?\tFloat64?\n1\t1\t2\t2\t4.0\tmissing\n2\t2\t2\t2\t4.0\tmissing\n3\t3\t2\t1\t3.0\t3.5\n4\t4\t2\t2\t2.0\t3.5\n5\t5\t1\t2\t2.2\t6.0\n6\t6\t1\t2\t2.4\t6.0\n7\t7\t1\t2\t2.6\t6.0"}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"d56f129f-b1cb-4fc7-8664-492525945b25","type":"message","text":"How is that different from DataFramesMeta with `@chain` though?\n\n```julia&gt; @chain x begin \n       @transform E = :C + :B\n       @transform(\n           E = :A .^ .5, \n           F = :A .^ 2, \n           G = 1, \n           status = \"Map 1\"\n       )\n       groupby(:B); @transform H = mean(:A)\n       end\n7×8 DataFrame\n Row │ A      B      C      E        F      G      status  H       \n     │ Int64  Int64  Int64  Float64  Int64  Int64  String  Float64 \n─────┼─────────────────────────────────────────────────────────────\n   1 │     1      1      2  1.0          1      1  Map 1       3.6\n   2 │     2      1      2  1.41421      4      1  Map 1       3.6\n   3 │     3      2      2  1.73205      9      1  Map 1       5.0\n   4 │     4      1      2  2.0         16      1  Map 1       3.6\n   5 │     5      1      2  2.23607     25      1  Map 1       3.6\n   6 │     6      1      2  2.44949     36      1  Map 1       3.6\n   7 │     7      2      2  2.64575     49      1  Map 1       5.0```","user":"UBF9YRB6H","ts":"1617899007.349000","team":"T68168MUP","edited":{"user":"UBF9YRB6H","ts":"1617899135.000000"},"blocks":[{"type":"rich_text","block_id":"nG7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How is that different from DataFramesMeta with "},{"type":"text","text":"@chain","style":{"code":true}},{"type":"text","text":" though?\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @chain x begin \n       @transform E = :C + :B\n       @transform(\n           E = :A .^ .5, \n           F = :A .^ 2, \n           G = 1, \n           status = \"Map 1\"\n       )\n       groupby(:B); @transform H = mean(:A)\n       end\n7×8 DataFrame\n Row │ A      B      C      E        F      G      status  H       \n     │ Int64  Int64  Int64  Float64  Int64  Int64  String  Float64 \n─────┼─────────────────────────────────────────────────────────────\n   1 │     1      1      2  1.0          1      1  Map 1       3.6\n   2 │     2      1      2  1.41421      4      1  Map 1       3.6\n   3 │     3      2      2  1.73205      9      1  Map 1       5.0\n   4 │     4      1      2  2.0         16      1  Map 1       3.6\n   5 │     5      1      2  2.23607     25      1  Map 1       3.6\n   6 │     6      1      2  2.44949     36      1  Map 1       3.6\n   7 │     7      2      2  2.64575     49      1  Map 1       5.0"}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"c5f1a7ed-ecdc-462b-9a3f-b60d9fa90875","type":"message","text":"the only thing missing is the `@iff`, bits. Which doesn't need a \"decade-long\" project and a new package","user":"UBF9YRB6H","ts":"1617899039.349200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZflWv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the only thing missing is the "},{"type":"text","text":"@iff","style":{"code":true}},{"type":"text","text":", bits. Which doesn't need a \"decade-long\" project and a new package"}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC","reactions":[{"name":"wink","users":["ULNHYTCJC"],"count":1}]},{"client_msg_id":"bd19aa54-ed9e-44a2-9560-4650c74ec779","type":"message","text":"LoL, :slightly_smiling_face:","user":"ULNHYTCJC","ts":"1617899133.349500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=zw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"LoL, "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"a66c40df-d758-4825-b415-8fbab4d81dd2","type":"message","text":"That is why I said it is probably be too idiosyncratic. I know, I know you guys/gals who have programming in your blood find `@chain` and other things of this sort second nature. But if you want to teach data management and analysis to medical doctors or economists or whatever who spent years honing their skills in their field, they are going to find the above both confusing and unnecessarily complicated. It will hopefully be more clear as I add functionality.","user":"ULNHYTCJC","ts":"1617899500.350300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tPEHK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That is why I said it is probably be too idiosyncratic. I know, I know you guys/gals who have programming in your blood find "},{"type":"text","text":"@chain","style":{"code":true}},{"type":"text","text":" and other things of this sort second nature. But if you want to teach data management and analysis to medical doctors or economists or whatever who spent years honing their skills in their field, they are going to find the above both confusing and unnecessarily complicated. It will hopefully be more clear as I add functionality."}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"5b30f0d5-e214-4749-80ba-da9a2ca68e33","type":"message","text":"I understand that the above may be confusing. But the differences between the two approaches don't seem very meaningful to me at the moment. For reference, I am an economist and have spent plenty of time teaching new comers data-cleaning.\n\nIt's a bummer that you think the `@chain` approach is too complicated. To be clear, this is the same approach used by `dplyr`, which plenty of new-comers can pick up easily.\n\nThat said, I look forward to seeing more of your design choices! I hope that I can learn from your package and some of your features can be merged into DataFramesMeta.","user":"UBF9YRB6H","ts":"1617899665.350500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"79vZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I understand that the above may be confusing. But the differences between the two approaches don't seem very meaningful to me at the moment. For reference, I am an economist and have spent plenty of time teaching new comers data-cleaning.\n\nIt's a bummer that you think the "},{"type":"text","text":"@chain","style":{"code":true}},{"type":"text","text":" approach is too complicated. To be clear, this is the same approach used by "},{"type":"text","text":"dplyr","style":{"code":true}},{"type":"text","text":", which plenty of new-comers can pick up easily.\n\nThat said, I look forward to seeing more of your design choices! I hope that I can learn from your package and some of your features can be merged into DataFramesMeta."}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"3e956df3-1b45-4867-aaa6-b7c455691996","type":"message","text":"It is not about _complexity_ so much as about _emphasis_. With regards to _dplyr_, I have spent a lot of time posting on the use of both R and Stata with data analysis and simulations (<http://econometricsbysimulation.com/>) and while I am quite experienced with `dplyr`, I have never been entirely happy with it as compared with Stata though it is certainly an improvement over the base R environment.","user":"ULNHYTCJC","ts":"1617901213.351300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kNQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It is not about "},{"type":"text","text":"complexity ","style":{"italic":true}},{"type":"text","text":"so much as about "},{"type":"text","text":"emphasis","style":{"italic":true}},{"type":"text","text":". With regards to "},{"type":"text","text":"dplyr","style":{"italic":true}},{"type":"text","text":", I have spent a lot of time posting on the use of both R and Stata with data analysis and simulations ("},{"type":"link","url":"http://econometricsbysimulation.com/"},{"type":"text","text":") and while I am quite experienced with "},{"type":"text","text":"dplyr","style":{"code":true}},{"type":"text","text":", I have never been entirely happy with it as compared with Stata though it is certainly an improvement over the base R environment."}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"44f1a057-b341-4d2b-acaa-60c7f18349a6","type":"message","text":"Could you clarify what you mean by emphasis?","user":"UBF9YRB6H","ts":"1617902983.352500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qAV3o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could you clarify what you mean by emphasis?"}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"53854171-5b88-43b7-b9cd-92cc296f2c86","type":"message","text":"Lets look at the simplest example. If a lay person had a data set with the variables `x` and `y` then they want to create a new variable `z = x + y` then they would need to write something like `df = @transform df z = :x .+ :y` which is fine but really about 60%-70% of the statement is effectively coding artifacts. Sure we can add the macro `@transform!`  to make it `@transform! df z = :x .+ :y`  but really we have more than half the expression dedicated to something the user doesn't care about. So why not just?\n```@mount df\n@make z = :x .+ :y\n\n## User does something else for 100 lines.\n@make z2 = :x .+ :y     iff(:z .&lt; 0)```","user":"ULNHYTCJC","ts":"1617903213.352900","team":"T68168MUP","edited":{"user":"ULNHYTCJC","ts":"1617903714.000000"},"blocks":[{"type":"rich_text","block_id":"rb383","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Lets look at the simplest example. If a lay person had a data set with the variables "},{"type":"text","text":"x","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"y","style":{"code":true}},{"type":"text","text":" then they want to create a new variable "},{"type":"text","text":"z = x + y","style":{"code":true}},{"type":"text","text":" then they would need to write something like "},{"type":"text","text":"df = @transform df z = :x .+ :y","style":{"code":true}},{"type":"text","text":" which is fine but really about 60%-70% of the statement is effectively coding artifacts. Sure we can add the macro "},{"type":"text","text":"@transform!","style":{"code":true}},{"type":"text","text":"  to make it "},{"type":"text","text":"@transform! df z = :x .+ :y","style":{"code":true}},{"type":"text","text":"  but really we have more than half the expression dedicated to something the user doesn't care about. So why not just?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@mount df\n@make z = :x .+ :y\n\n## User does something else for 100 lines.\n@make z2 = :x .+ :y     iff(:z .< 0)"}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"0ed1d8bc-5dcc-4e50-9759-df79b64c3be1","type":"message","text":"Oh. well I think this is a bit of an anti-pattern. How should I know, 100 lines later, that `df` is he one that's being modified? This approach introduces a hidden state that can be create hard-to-interpret code","user":"UBF9YRB6H","ts":"1617903706.353700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1rz7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh. well I think this is a bit of an anti-pattern. How should I know, 100 lines later, that "},{"type":"text","text":"df","style":{"code":true}},{"type":"text","text":" is he one that's being modified? This approach introduces a hidden state that can be create hard-to-interpret code"}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"724a19a3-35db-42eb-ba7d-1b11a46069b5","type":"message","text":"True. But in 90% of real world applications (in economics at least) there is only one dataset.","user":"ULNHYTCJC","ts":"1617903783.354000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h0Rz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"True. But in 90% of real world applications (in economics at least) there is only one dataset."}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"c8e3429c-a94c-4676-9061-e27aede74762","type":"message","text":"If you have multiple datasets first you figure out how to merge them into one dataset. Then you modify. That is pretty much how everybody talks and acts among econometricians and the like.","user":"ULNHYTCJC","ts":"1617903841.354200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+kw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you have multiple datasets first you figure out how to merge them into one dataset. Then you modify. That is pretty much how everybody talks and acts among econometricians and the like."}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"635b11b5-53e9-4c4c-9658-cbd1f82afbc9","type":"message","text":"I'm not sure that's true, at least in economics. I regularly see people using `use d, clear` multiple times in a Stata code. Or long blocks of `preserve ... restore`. These annoy me and I split them into separate files.","user":"UBF9YRB6H","ts":"1617903857.354400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ypWS8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure that's true, at least in economics. I regularly see people using "},{"type":"text","text":"use d, clear","style":{"code":true}},{"type":"text","text":" multiple times in a Stata code. Or long blocks of "},{"type":"text","text":"preserve ... restore","style":{"code":true}},{"type":"text","text":". These annoy me and I split them into separate files."}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"},{"client_msg_id":"b30f9b91-4c9c-4dac-a69c-f497b36d66c7","type":"message","text":"Agreed. There are some annoying things about Stata that makes sophisticated users frustrated.","user":"ULNHYTCJC","ts":"1617903896.354600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eb=q","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Agreed. There are some annoying things about Stata that makes sophisticated users frustrated."}]}]}],"thread_ts":"1617897823.345100","parent_user_id":"ULNHYTCJC"}]