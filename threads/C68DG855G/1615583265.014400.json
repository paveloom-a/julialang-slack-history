[{"client_msg_id":"8f221d79-680d-4357-81bf-121f2b190376","type":"message","text":"we need to be careful with `libatomic`, so make sure that atomic operations are actually atomic, which requires loading the correct copy of it","user":"U67BXBF99","ts":"1615583265.014400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"62u4g","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"we need to be careful with "},{"type":"text","text":"libatomic","style":{"code":true}},{"type":"text","text":", so make sure that atomic operations are actually atomic, which requires loading the correct copy of it"}]}]}],"thread_ts":"1615583265.014400","reply_count":64,"reply_users_count":2,"latest_reply":"1615610690.032800","reply_users":["U66GD0880","U67BXBF99"],"subscribed":false},{"client_msg_id":"b219dff3-4f36-478a-9d7f-f195855080cf","type":"message","text":"Can you explain this more?  What is a “wrong” `libatomic`, and why would it result in things that are non-atomic?","user":"U66GD0880","ts":"1615584794.019500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6el","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can you explain this more?  What is a “wrong” "},{"type":"text","text":"libatomic","style":{"code":true}},{"type":"text","text":", and why would it result in things that are non-atomic?"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"f3a7bf77-e6ff-482d-9144-2b768474f661","type":"message","text":"The way libatomic works on some systems, it may emulate some operations","user":"U67BXBF99","ts":"1615586143.019900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+pO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The way libatomic works on some systems, it may emulate some operations"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"816a82ff-8ed0-4104-80c3-d4a2b8281d4f","type":"message","text":"The choice of which operations to emulate, and which processor intrinsics to use, and which kernel features to rely on alter whether two atomic calls or fences are compatible","user":"U67BXBF99","ts":"1615586241.020100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cfv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The choice of which operations to emulate, and which processor intrinsics to use, and which kernel features to rely on alter whether two atomic calls or fences are compatible"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"c756a42a-e640-4a0e-b752-04a066794f4d","type":"message","text":"are these compile-time decisions or runtime decisions?","user":"U66GD0880","ts":"1615586271.020300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yaI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"are these compile-time decisions or runtime decisions?"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"caa16f75-80b2-4414-be98-604cbb9ce053","type":"message","text":"both","user":"U67BXBF99","ts":"1615586277.020500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qloG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"both"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"80007828-73aa-4461-bb8e-5d6d1959416a","type":"message","text":"the compiler decides which decisions would be legal at runtime","user":"U67BXBF99","ts":"1615586305.020900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1as","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the compiler decides which decisions would be legal at runtime"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"33579ad0-87f4-4742-83f4-65b3141d3b6a","type":"message","text":"so you’re worried that we may be building a `libatomic` that doesn’t have certain support enabled?","user":"U66GD0880","ts":"1615586326.021300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"60ykY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so you’re worried that we may be building a "},{"type":"text","text":"libatomic","style":{"code":true}},{"type":"text","text":" that doesn’t have certain support enabled?"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"74ef1f67-1fc0-4e98-97c0-70030a90248b","type":"message","text":"it is rather horrible","user":"U67BXBF99","ts":"1615586328.021500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wSH43","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is rather horrible"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"f1043f87-7b11-46e9-9cf3-3b1f6c64d676","type":"message","text":"or might have certain support enabled that should not be","user":"U67BXBF99","ts":"1615586339.021700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hhV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"or might have certain support enabled that should not be"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"299f49b8-14fd-4b63-9478-f87747df03b5","type":"message","text":"which features would be a problem?","user":"U66GD0880","ts":"1615586372.021900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gFm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"which features would be a problem?"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"11d564fd-5f18-4543-b43f-af0b731415e3","type":"message","text":"but it is also a separate dynamic library for the specific reason of ensuring you only get one copy loaded, even with `-static-gcc`","user":"U67BXBF99","ts":"1615586377.022100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"g+UV0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but it is also a separate dynamic library for the specific reason of ensuring you only get one copy loaded, even with "},{"type":"text","text":"-static-gcc","style":{"code":true}}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"8a3c8c50-5a9c-4102-a761-d295c8613021","type":"message","text":"the only configure option I see that has an `auto` option is `--enable-cet`","user":"U66GD0880","ts":"1615586418.022300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5HW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the only configure option I see that has an "},{"type":"text","text":"auto","style":{"code":true}},{"type":"text","text":" option is "},{"type":"text","text":"--enable-cet","style":{"code":true}}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"0c9b72e6-136b-41f2-8c83-77fbf0a756a2","type":"message","text":"<https://github.com/gcc-mirror/gcc/blob/master/libatomic/configure#L1459>","user":"U66GD0880","ts":"1615586419.022500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mXRP","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/gcc-mirror/gcc/blob/master/libatomic/configure#L1459"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"e7788a08-90b4-488e-9a68-a31ada7792cb","type":"message","text":"cx16 is one such feature. A compiler needs to know whether that feature will be used at runtime","user":"U67BXBF99","ts":"1615586426.022700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pWRH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cx16 is one such feature. A compiler needs to know whether that feature will be used at runtime"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"d314df99-8c63-400c-b2e1-8963d9ac54e1","type":"message","text":"When testing my atomics PR, I noticed that clang and gcc disagree about the correct implementation","user":"U67BXBF99","ts":"1615586464.022900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rbX7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When testing my atomics PR, I noticed that clang and gcc disagree about the correct implementation"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"c059044e-fbb7-4f49-8284-dfdb09382845","type":"message","text":"yeah, the configuration is defined manually, since it may be defined by a particular ABI for a particular processor, kernel, and/or environment","user":"U67BXBF99","ts":"1615586583.023100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EVNl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, the configuration is defined manually, since it may be defined by a particular ABI for a particular processor, kernel, and/or environment"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"122f4525-b20e-4b4d-83d5-6019ef15217c","type":"message","text":"Is `cx16` support the same thing as `ifunc` support?","user":"U66GD0880","ts":"1615586603.023300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gyXw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is "},{"type":"text","text":"cx16","style":{"code":true}},{"type":"text","text":" support the same thing as "},{"type":"text","text":"ifunc","style":{"code":true}},{"type":"text","text":" support?"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"50484bcc-0d90-4971-8ead-845270f32781","type":"message","text":"<https://github.com/gcc-mirror/gcc/blob/master/libatomic/config/x86/host-config.h>","user":"U67BXBF99","ts":"1615586624.023500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ntpD2","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/gcc-mirror/gcc/blob/master/libatomic/config/x86/host-config.h"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"5c951ad5-b301-43bd-89e8-ce4856359523","type":"message","text":"BUT <https://github.com/llvm-mirror/compiler-rt/blob/master/lib/builtins/atomic.c#L122-L129>","user":"U67BXBF99","ts":"1615586678.023700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t6OkO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"BUT "},{"type":"link","url":"https://github.com/llvm-mirror/compiler-rt/blob/master/lib/builtins/atomic.c#L122-L129"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"5182618f-7ae2-458e-a7aa-b4a48a1d911f","type":"message","text":"so often the way we deal with these things is to manually specify the `configure` support to ensure consistency","user":"U66GD0880","ts":"1615586767.023900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4P86h","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so often the way we deal with these things is to manually specify the "},{"type":"text","text":"configure","style":{"code":true}},{"type":"text","text":" support to ensure consistency"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"4da6d26b-d4d8-4117-9146-9622aa57b165","type":"message","text":"e.g. on `musl` we manually set `libat_cv_have_ifunc=no`","user":"U66GD0880","ts":"1615586778.024100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"18r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"e.g. on "},{"type":"text","text":"musl","style":{"code":true}},{"type":"text","text":" we manually set "},{"type":"text","text":"libat_cv_have_ifunc=no","style":{"code":true}}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"c1d45b24-193b-447d-9b57-647863f07f9b","type":"message","text":"I assume this is because of some deficiency in the `musl` loader","user":"U66GD0880","ts":"1615586787.024300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gIr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I assume this is because of some deficiency in the "},{"type":"text","text":"musl","style":{"code":true}},{"type":"text","text":" loader"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"13d00178-7620-4ac2-8a27-2e3e34123281","type":"message","text":"Is it possible for us to specify a common set of features that we ship that makes sense, even if it causes `libatomic` to be somewhat suboptimal?","user":"U66GD0880","ts":"1615586816.024500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Dy8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it possible for us to specify a common set of features that we ship that makes sense, even if it causes "},{"type":"text","text":"libatomic","style":{"code":true}},{"type":"text","text":" to be somewhat suboptimal?"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"35df11fd-ff87-4798-bf00-475f94882a00","type":"message","text":"makes sense","user":"U67BXBF99","ts":"1615586822.024700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KvJKR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"makes sense"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"dc06b844-0fa9-4159-9410-cf8445bcd57a","type":"message","text":"It seems to me that if there is truly a piece of critical functionality that depends on your microarchitecture, it must be runtime.  After all, the distros are not compiling `libatomic` on your computer, everyone’s downloading the same one","user":"U66GD0880","ts":"1615586862.024900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4XG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It seems to me that if there is truly a piece of critical functionality that depends on your microarchitecture, it must be runtime.  After all, the distros are not compiling "},{"type":"text","text":"libatomic","style":{"code":true}},{"type":"text","text":" on your computer, everyone’s downloading the same one"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"5a8f40ed-b15c-43f3-a517-0304391f4ed9","type":"message","text":"so it must be at least somewhat portable","user":"U66GD0880","ts":"1615586879.025100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yYR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so it must be at least somewhat portable"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"f7a950bf-4bf0-48d3-8179-0e399a3975d8","type":"message","text":"Our configurations tend to be fairly simple, there just usually aren’t configuration flags for it","user":"U67BXBF99","ts":"1615586889.025300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jKX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Our configurations tend to be fairly simple, there just usually aren’t configuration flags for it"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"ac42943d-163a-44e6-aeed-75f27d44e448","type":"message","text":"lolololol","user":"U67BXBF99","ts":"1615586908.025500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KsHlq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"lolololol"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"ff787955-2185-499e-82e2-a0f073675ec9","type":"message","text":"The current situation is possibly something only the c++ standards committee could have devised","user":"U67BXBF99","ts":"1615586955.025700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fzVy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The current situation is possibly something only the c++ standards committee could have devised"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99","reactions":[{"name":"joy","users":["U66GD0880"],"count":1}]},{"client_msg_id":"2856819f-1720-44f0-8fd9-ffa5a8107575","type":"message","text":"It is probably impossible to get “right”","user":"U67BXBF99","ts":"1615586979.026000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ADLj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It is probably impossible to get “right”"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"5b8e027f-b225-4a9c-abe9-f1e7ad889b44","type":"message","text":"Our `libatomic`’s come from our `GCCBootstrap` build,  right here [0] which has options set in all the lines leading up to it.\n\n[0] <https://github.com/JuliaPackaging/Yggdrasil/blob/master/0_RootFS/gcc_common.jl#L726-L739>","user":"U66GD0880","ts":"1615587036.026200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u+T","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Our "},{"type":"text","text":"libatomic","style":{"code":true}},{"type":"text","text":"’s come from our "},{"type":"text","text":"GCCBootstrap","style":{"code":true}},{"type":"text","text":" build,  right here [0] which has options set in all the lines leading up to it.\n\n[0] "},{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/blob/master/0_RootFS/gcc_common.jl#L726-L739"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"215598aa-6aed-4bbb-8bfd-cf9178900bf6","type":"message","text":"If we need to patch something or set some option, I’m happy to do that","user":"U66GD0880","ts":"1615587046.026400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x0Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If we need to patch something or set some option, I’m happy to do that"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"853df227-0cae-4841-b776-92355c85e19f","type":"message","text":"in the short term, is there a concrete issue you’re hitting on your PR?  Some difference in behavior between `clang` and `gcc`?","user":"U66GD0880","ts":"1615587064.026600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ixEq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"in the short term, is there a concrete issue you’re hitting on your PR?  Some difference in behavior between "},{"type":"text","text":"clang","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"gcc","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"162eb24e-866b-4014-981f-b4516c4fbc83","type":"message","text":"We ship mostly `gcc` libraries since there are a lot more of those","user":"U66GD0880","ts":"1615587075.026800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/IuHu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We ship mostly "},{"type":"text","text":"gcc","style":{"code":true}},{"type":"text","text":" libraries since there are a lot more of those"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"e772c754-a7b7-4acc-a62f-e5c80308016c","type":"message","text":"but we generally don’t set `clang` to use GCC’s runtime libraries","user":"U66GD0880","ts":"1615587088.027000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BqxZk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but we generally don’t set "},{"type":"text","text":"clang","style":{"code":true}},{"type":"text","text":" to use GCC’s runtime libraries"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"5be03b0a-f214-4ec5-b849-723a6e4f1832","type":"message","text":"I’m just seeing clang optimize code under the assumption it is using compiler-rt","user":"U67BXBF99","ts":"1615587106.027200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jug","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m just seeing clang optimize code under the assumption it is using compiler-rt"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"77f6e17b-e708-4db0-b884-23f6bc2ca4f5","type":"message","text":"Which is ABI-incompatible with gcc’s libatomic","user":"U67BXBF99","ts":"1615587121.027400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fxR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Which is ABI-incompatible with gcc’s libatomic"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"a8c40c7e-fd2d-4929-a3dc-ba2878b672da","type":"message","text":"When is this important?  When building Julia itself?","user":"U66GD0880","ts":"1615587137.027600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8ewu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When is this important?  When building Julia itself?"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"67ae0250-e957-4a06-814c-a9803d694b84","type":"message","text":"128-bit support","user":"U67BXBF99","ts":"1615587148.027800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iE7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"128-bit support"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"821132b1-0603-445e-a2ac-73337e2b81d9","type":"message","text":"So I just turned that off","user":"U67BXBF99","ts":"1615587155.028000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ryly5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So I just turned that off"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"aed0e202-7ee2-4b5a-8213-13b3fd4debee","type":"message","text":"But also when trying to link, we need a symlink `libatomic.so -&gt; libatomic.so.1` so that it can find the support library","user":"U67BXBF99","ts":"1615587189.028200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rdUZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But also when trying to link, we need a symlink "},{"type":"text","text":"libatomic.so -> libatomic.so.1","style":{"code":true}},{"type":"text","text":" so that it can find the support library"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"589276d6-8c4d-45e0-a693-15d7ebd1e56e","type":"message","text":"(I’ll just leave 128-bit support disabled for now also)","user":"U67BXBF99","ts":"1615587228.028400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fms","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(I’ll just leave 128-bit support disabled for now also)"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"5200c274-1812-4825-bb13-b8907e6074e8","type":"message","text":"&gt; so that it can find the support library\nI’ll see if I can get you an updated CSL that has these links","user":"U66GD0880","ts":"1615587436.028600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OCsp","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"so that it can find the support library"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI’ll see if I can get you an updated CSL that has these links"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"2e5b5e72-69d9-4b69-a2ee-113be6833e64","type":"message","text":"My guess is that they were accidentally removed by a pass that is trying to get rid of linker scripts","user":"U66GD0880","ts":"1615587447.028800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YkXgV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My guess is that they were accidentally removed by a pass that is trying to get rid of linker scripts"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"1b1dbf97-6574-4af9-bbb4-f872032c2abb","type":"message","text":"ah, possibly. seems like they’re also possibly hidden","user":"U67BXBF99","ts":"1615587740.029000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RxbV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, possibly. seems like they’re also possibly hidden"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"e752449c-1453-4aef-8ef2-8319b3a56507","type":"message","text":"we seem to have rather few `usr/lib/*.so` files","user":"U67BXBF99","ts":"1615587757.029200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QNQSw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"we seem to have rather few "},{"type":"text","text":"usr/lib/*.so","style":{"code":true}},{"type":"text","text":" files"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"1edbbfc9-3763-479e-a2b5-b70cae720e68","type":"message","text":"yeah","user":"U66GD0880","ts":"1615587760.029400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/3GZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"1804b945-d62d-4432-b08a-5392131e4fa5","type":"message","text":"all the `.so` symlinks are being ruthlessly eliminated","user":"U66GD0880","ts":"1615587775.029600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u5L/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"all the "},{"type":"text","text":".so","style":{"code":true}},{"type":"text","text":" symlinks are being ruthlessly eliminated"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"bf8cab15-28ed-485c-92ff-41d106ee4731","type":"message","text":"ah","user":"U67BXBF99","ts":"1615587779.029800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lxN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"6d096c75-3640-4b3a-9cbc-3061e3593e4a","type":"message","text":"I’ve got a fix, just testing it to make sure it doesn’t break something else","user":"U66GD0880","ts":"1615587790.030000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XG0r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’ve got a fix, just testing it to make sure it doesn’t break something else"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"2de143d0-5b13-47e4-8c91-ae61a545f5cb","type":"message","text":"That’s what `-isysroot` might help catch","user":"U67BXBF99","ts":"1615587790.030200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3CQJY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That’s what "},{"type":"text","text":"-isysroot","style":{"code":true}},{"type":"text","text":" might help catch"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"82f3f01c-5d18-4007-a5a2-1722a8d41073","type":"message","text":"<https://github.com/JuliaPackaging/Yggdrasil/pull/2682>","user":"U66GD0880","ts":"1615587908.030400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HBb","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaPackaging/Yggdrasil/pull/2682"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"e275f607-4569-4fbf-a19e-2f192c9a3671","type":"message","text":"FWIW, `realpath` is not widely available on unix","user":"U67BXBF99","ts":"1615589462.030600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"a4I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"FWIW, "},{"type":"text","text":"realpath","style":{"code":true}},{"type":"text","text":" is not widely available on unix"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"16be154c-df12-4176-b8ba-01a291ed6747","type":"message","text":"it is in our build system","user":"U66GD0880","ts":"1615589475.030800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zVUb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is in our build system"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"977c2f10-0574-45ce-ac5b-95ce42f1c0cb","type":"message","text":"so that’s good enough for me :wink:","user":"U66GD0880","ts":"1615589491.031000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h9d","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so that’s good enough for me "},{"type":"emoji","name":"wink"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"d7a4ca1b-b756-4859-ab98-3d218e1942a9","type":"message","text":"haha","user":"U67BXBF99","ts":"1615589542.031200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t2CD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"haha"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"a8cc8132-9d2e-4176-921b-8528e68373c2","type":"message","text":"You can also define the environment variable `POSIXLY_CORRECT`","user":"U67BXBF99","ts":"1615589552.031400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RVvkJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can also define the environment variable "},{"type":"text","text":"POSIXLY_CORRECT","style":{"code":true}}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"feca6e94-4e67-4b3d-bd55-1f2d757610ec","type":"message","text":"or pass `-L` flag","user":"U67BXBF99","ts":"1615589559.031600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/w4mU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"or pass "},{"type":"text","text":"-L","style":{"code":true}},{"type":"text","text":" flag"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"9d95fbc6-b7b9-4793-9c5c-2bf3bd51fb51","type":"message","text":"since apparently this behavior is not correct posixly :joy:","user":"U67BXBF99","ts":"1615589578.031800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k7v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"since apparently this behavior is not correct posixly "},{"type":"emoji","name":"joy"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"dbcf7e8c-38fd-4291-9c70-95a6875f1b82","type":"message","text":"“This program is believed to exceed the System V Interface Definition of FILE(CMD), as near as one can determine from the vague language contained therein.  ”","user":"U67BXBF99","ts":"1615589614.032000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3QR9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"“This program is believed to exceed the System V Interface Definition of FILE(CMD), as near as one can determine from the vague language contained therein.  ”"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"5839d6bb-962f-4306-95f4-5aab3aa6d946","type":"message","text":"“Its behavior is mostly compatible with the System V program of the same name.”","user":"U67BXBF99","ts":"1615589624.032200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ehZH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"“Its behavior is mostly compatible with the System V program of the same name.”"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"36a9d8f5-a369-47ab-8b2d-3f7ca96afdd5","type":"message","text":"“This version knows more magic”","user":"U67BXBF99","ts":"1615589634.032400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"siiwa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"“This version knows more magic”"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"e7e45a1c-3631-4521-95a5-47d9e2aa3804","type":"message","text":"You should be able to bump `stdlib/CSL_jll/Project.toml` to `0.4.0+1` and update the checksums to get the proper `.so` files now","user":"U66GD0880","ts":"1615589884.032600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"opbC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You should be able to bump "},{"type":"text","text":"stdlib/CSL_jll/Project.toml","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"0.4.0+1","style":{"code":true}},{"type":"text","text":" and update the checksums to get the proper "},{"type":"text","text":".so","style":{"code":true}},{"type":"text","text":" files now"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"},{"client_msg_id":"d40a52c0-23b3-46f9-9719-ab1f8007d10d","type":"message","text":"found some bugs in the refresh_checksums script, but otherwise looks good","user":"U67BXBF99","ts":"1615610690.032800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WkTEk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"found some bugs in the refresh_checksums script, but otherwise looks good"}]}]}],"thread_ts":"1615583265.014400","parent_user_id":"U67BXBF99"}]