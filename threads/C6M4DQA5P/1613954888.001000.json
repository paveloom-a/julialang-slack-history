[{"client_msg_id":"d5d31663-b3e2-4e92-81d1-06a2a4058778","type":"message","text":"This package has an invalid `subdir` parameter: <https://github.com/JuliaRegistries/General/blob/master/Y/YisyAIFramework/Package.toml>. It’s installable on Julia 1.5 for some reason (which is why it passed automerge), but not on 1.6","user":"UCZ7VBGUD","ts":"1613954888.001000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZgYE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This package has an invalid "},{"type":"text","text":"subdir","style":{"code":true}},{"type":"text","text":" parameter: "},{"type":"link","url":"https://github.com/JuliaRegistries/General/blob/master/Y/YisyAIFramework/Package.toml"},{"type":"text","text":". It’s installable on Julia 1.5 for some reason (which is why it passed automerge), but not on 1.6"}]}]}],"thread_ts":"1613954888.001000","reply_count":28,"reply_users_count":4,"latest_reply":"1613981772.007500","reply_users":["U67SCG4HG","UCZ7VBGUD","UBVE598BC","U67D54KS8"],"subscribed":false},{"client_msg_id":"3591f0f3-7560-447c-b288-e62012dd7cbd","type":"message","text":"should just be deleted","user":"U67SCG4HG","ts":"1613954984.001100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zqQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"should just be deleted"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"abb14400-d7b3-41a1-b8d1-2402e5ed5af7","type":"message","text":"agreed, but how can Pkg add it?","user":"UCZ7VBGUD","ts":"1613955041.001300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P=b","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"agreed, but how can Pkg add it?"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"7bdcad83-fe9e-4fcd-8dfb-d3be8f3cec3a","type":"message","text":"<https://github.com/JuliaRegistries/General/pull/30577>","user":"U67SCG4HG","ts":"1613955042.001500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J+1","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaRegistries/General/pull/30577"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"ccdd87f9-fa03-48a5-b79c-97fc6399e378","type":"message","text":"Pkg.add never uses that parameter anyway","user":"U67SCG4HG","ts":"1613955062.001700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dSyd4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Pkg.add never uses that parameter anyway"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"88aab163-c034-477f-a463-fc0b127c9406","type":"message","text":"oh? how does it find the package code then?","user":"UCZ7VBGUD","ts":"1613955169.001900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wdu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh? how does it find the package code then?"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"d24887b4-e9ab-445d-b75e-f0b5e2d8e85e","type":"message","text":"the tree hash","user":"U67SCG4HG","ts":"1613955190.002100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3Kn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the tree hash"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"078e76e9-2e26-4fd3-b1c1-53fc10d7067f","type":"message","text":"cool","user":"UCZ7VBGUD","ts":"1613955237.002300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SvkBI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cool"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"c7aa5d9a-9e3a-464f-976c-b0cb27db8517","type":"message","text":"interesting, well it seems like we need a different check then to ensure the subdir is valid","user":"UCZ7VBGUD","ts":"1613955267.002500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JGE5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"interesting, well it seems like we need a different check then to ensure the subdir is valid"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"c1ae9b4e-38e9-4403-b076-40372dfffee2","type":"message","text":"it is installable on 1.6 too","user":"U67SCG4HG","ts":"1613955269.002700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YSy=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it is installable on 1.6 too"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"e20ef95e-9d7e-413a-bf86-72f09776109e","type":"message","text":"I got\n```julia&gt; Pkg.add(name=\"YisyAIFramework\")\n   Resolving package versions...\n  No Changes to `/private/var/folders/jb/plyyfc_d2bz195_0rc0n_zcw0000gp/T/jl_kZmquX/Project.toml`\n  No Changes to `/private/var/folders/jb/plyyfc_d2bz195_0rc0n_zcw0000gp/T/jl_kZmquX/Manifest.toml`\n┌ Error: Pkg.precompile error\n│   exception =\n│    IOError: pwd(): no such file or directory (ENOENT)\n│    Stacktrace:\n│      [1] uv_error\n│        @ ./libuv.jl:97 [inlined]\n│      [2] pwd()\n│        @ Base.Filesystem ./file.jl:59\n│      [3] abspath\n│        @ ./path.jl:390 [inlined]\n│      [4] iterate\n│        @ ./generator.jl:47 [inlined]\n│      [5] _collect(c::Vector{String}, itr::Base.Generator{Vector{String}, typeof(abspath)}, #unused#::Base.EltypeUnknown, isz::Base.HasShape{1})\n│        @ Base ./array.jl:691\n│      [6] collect_similar\n│        @ ./array.jl:606 [inlined]\n│      [7] map\n│        @ ./abstractarray.jl:2288 [inlined]\n│      [8] create_expr_cache(pkg::Base.PkgId, input::String, output::String, concrete_deps::Vector{Pair{Base.PkgId, UInt64}}, internal_stderr::IOBuffer, internal_stdout::Base.DevNull)\n│        @ Base ./loading.jl:1224\n│      [9] compilecache(pkg::Base.PkgId, path::String, internal_stderr::IOBuffer, internal_stdout::Base.DevNull)\n│        @ Base ./loading.jl:1322\n│     [10] (::Pkg.API.var\"#212#237\"{IOBuffer, String, Base.PkgId})()\n│        @ Pkg.API /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:1132\n│     [11] with_logstate(f::Function, logstate::Any)\n│        @ Base.CoreLogging ./logging.jl:491\n│     [12] with_logger\n│        @ ./logging.jl:603 [inlined]\n│     [13] macro expansion\n│        @ /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:1131 [inlined]\n│     [14] (::Pkg.API.var\"#209#234\"{Bool, Vector{Task}, Pkg.API.var\"#handle_interrupt#227\"{Base.Event, ReentrantLock, Base.TTY}, Pkg.API.var\"#color_string#225\", Base.Event, Base.Event, ReentrantLock, Vector{Base.PkgId}, Vector{Base.PkgId}, Dict{Base.PkgId, String}, Vector{Base.PkgId}, Vector{Base.PkgId}, Dict{Base.PkgId, Bool}, Dict{Base.PkgId, Base.Event}, Dict{Base.PkgId, Bool}, Dict{Base.UUID, Pkg.Types.PackageEntry}, Vector{Base.PkgId}, Bool, Base.TTY, Base.Semaphore, String, Vector{String}, Vector{Base.PkgId}, Base.PkgId})()\n│        @ Pkg.API ./task.jl:406\n└ @ Pkg.API /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:1012```","user":"UCZ7VBGUD","ts":"1613955296.002900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B=eym","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I got\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> Pkg.add(name=\"YisyAIFramework\")\n   Resolving package versions...\n  No Changes to `/private/var/folders/jb/plyyfc_d2bz195_0rc0n_zcw0000gp/T/jl_kZmquX/Project.toml`\n  No Changes to `/private/var/folders/jb/plyyfc_d2bz195_0rc0n_zcw0000gp/T/jl_kZmquX/Manifest.toml`\n┌ Error: Pkg.precompile error\n│   exception =\n│    IOError: pwd(): no such file or directory (ENOENT)\n│    Stacktrace:\n│      [1] uv_error\n│        @ ./libuv.jl:97 [inlined]\n│      [2] pwd()\n│        @ Base.Filesystem ./file.jl:59\n│      [3] abspath\n│        @ ./path.jl:390 [inlined]\n│      [4] iterate\n│        @ ./generator.jl:47 [inlined]\n│      [5] _collect(c::Vector{String}, itr::Base.Generator{Vector{String}, typeof(abspath)}, #unused#::Base.EltypeUnknown, isz::Base.HasShape{1})\n│        @ Base ./array.jl:691\n│      [6] collect_similar\n│        @ ./array.jl:606 [inlined]\n│      [7] map\n│        @ ./abstractarray.jl:2288 [inlined]\n│      [8] create_expr_cache(pkg::Base.PkgId, input::String, output::String, concrete_deps::Vector{Pair{Base.PkgId, UInt64}}, internal_stderr::IOBuffer, internal_stdout::Base.DevNull)\n│        @ Base ./loading.jl:1224\n│      [9] compilecache(pkg::Base.PkgId, path::String, internal_stderr::IOBuffer, internal_stdout::Base.DevNull)\n│        @ Base ./loading.jl:1322\n│     [10] (::Pkg.API.var\"#212#237\"{IOBuffer, String, Base.PkgId})()\n│        @ Pkg.API /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:1132\n│     [11] with_logstate(f::Function, logstate::Any)\n│        @ Base.CoreLogging ./logging.jl:491\n│     [12] with_logger\n│        @ ./logging.jl:603 [inlined]\n│     [13] macro expansion\n│        @ /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:1131 [inlined]\n│     [14] (::Pkg.API.var\"#209#234\"{Bool, Vector{Task}, Pkg.API.var\"#handle_interrupt#227\"{Base.Event, ReentrantLock, Base.TTY}, Pkg.API.var\"#color_string#225\", Base.Event, Base.Event, ReentrantLock, Vector{Base.PkgId}, Vector{Base.PkgId}, Dict{Base.PkgId, String}, Vector{Base.PkgId}, Vector{Base.PkgId}, Dict{Base.PkgId, Bool}, Dict{Base.PkgId, Base.Event}, Dict{Base.PkgId, Bool}, Dict{Base.UUID, Pkg.Types.PackageEntry}, Vector{Base.PkgId}, Bool, Base.TTY, Base.Semaphore, String, Vector{String}, Vector{Base.PkgId}, Base.PkgId})()\n│        @ Pkg.API ./task.jl:406\n└ @ Pkg.API /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/Pkg/src/API.jl:1012"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"830255cb-61dc-47cc-8426-cf8ad79d5ab2","type":"message","text":"That just looks like pwd is deleted or something?","user":"U67SCG4HG","ts":"1613955333.003100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P9K","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That just looks like pwd is deleted or something?"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"4920a5c7-b768-48bd-8c54-d3f8e3bce553","type":"message","text":"works fine for me","user":"U67SCG4HG","ts":"1613955362.003300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/dtv+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"works fine for me"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"cc4d92d2-42fa-410a-b281-289a214436f2","type":"message","text":"ok, I think I was in a tmp folder that got deleted for some reason","user":"UCZ7VBGUD","ts":"1613955449.003500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"O/e","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, I think I was in a tmp folder that got deleted for some reason"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"b485c639-ef88-49fa-a665-833f09f80b41","type":"message","text":"is `subdir` just so that JuliaRegistrator can find the correct Project.toml?","user":"UCZ7VBGUD","ts":"1613955707.003700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wGjn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is "},{"type":"text","text":"subdir","style":{"code":true}},{"type":"text","text":" just so that JuliaRegistrator can find the correct Project.toml?"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"d54792ed-9073-46d4-be55-d87ee66ae96e","type":"message","text":"oh and I guess so JuliaRegistrator knows what to hash to get the correct tree hash?","user":"UCZ7VBGUD","ts":"1613955756.003900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"faA3S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh and I guess so JuliaRegistrator knows what to hash to get the correct tree hash?"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"8c464d8f-04e5-4e91-8dc2-60d2655f445f","type":"message","text":"Pkg.dev also uses is I b elieve","user":"U67SCG4HG","ts":"1613955875.004100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ai9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Pkg.dev also uses is I b elieve"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"016f75e3-8250-4f81-a0dc-cae7492d2144","type":"message","text":"ah ok","user":"UCZ7VBGUD","ts":"1613955936.004300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3QI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah ok"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"a2523e79-2572-4f93-aa52-15fc04866469","type":"message","text":"If it was just for registration it wouldn't have been necessary to store in in the registry","user":"U67SCG4HG","ts":"1613955964.004500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p221G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If it was just for registration it wouldn't have been necessary to store in in the registry"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD","reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"8ab027b9-3bd9-48b2-a589-6e54d14533ed","type":"message","text":"I see, yeah when I `dev` SnoopCompileCore, it clones the whole repo but adds the correct path to the subdir to my manifest","user":"UCZ7VBGUD","ts":"1613956057.004800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bPvWk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see, yeah when I "},{"type":"text","text":"dev","style":{"code":true}},{"type":"text","text":" SnoopCompileCore, it clones the whole repo but adds the correct path to the subdir to my manifest"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"7d92f3eb-b2f4-4b9d-acd5-5c5cd1eb2fc4","type":"message","text":"maybe that’s then how RegistryCI could test it? it could dev the package and see if it fails or if it gets it right","user":"UCZ7VBGUD","ts":"1613956111.005000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z+RK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"maybe that’s then how RegistryCI could test it? it could dev the package and see if it fails or if it gets it right"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"9cc6b0e5-9481-438b-82b1-b33b93e502f2","type":"message","text":"without your commit fixing things in the registry, I get\n```(jl_4zbq4I) pkg&gt; dev YisyAIFramework\n     Cloning git-repo `<https://github.com/SkyWorld117/YisyAIFramework.jl.git>`\n   Resolving package versions...\nERROR: expected package `YisyAIFramework [1833fadb]` to exist at path `/Users/eph/.julia/dev/YisyAIFramework/https:/github.com/SkyWorld117/YisyAIFramework.jl````\n","user":"UCZ7VBGUD","ts":"1613956210.005200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pxX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"without your commit fixing things in the registry, I get\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"(jl_4zbq4I) pkg> dev YisyAIFramework\n     Cloning git-repo `"},{"type":"link","url":"https://github.com/SkyWorld117/YisyAIFramework.jl.git"},{"type":"text","text":"`\n   Resolving package versions...\nERROR: expected package `YisyAIFramework [1833fadb]` to exist at path `/Users/eph/.julia/dev/YisyAIFramework/https:/github.com/SkyWorld117/YisyAIFramework.jl`"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"f703d83f-cb0f-42ef-acdd-9a7e1e9cb696","type":"message","text":"<https://github.com/JuliaRegistries/RegistryCI.jl/issues/349>","user":"UCZ7VBGUD","ts":"1613956563.005400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=nQ/","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaRegistries/RegistryCI.jl/issues/349"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"5d66bd95-6706-46cc-b444-4ef7bf3aa787","type":"message","text":"How did that bad subdir get there in the first place?","user":"UBVE598BC","ts":"1613975697.006500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/C4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How did that bad subdir get there in the first place?"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"b535ef19-23c5-45b5-946e-d8046246a735","type":"message","text":"From <https://github.com/JuliaRegistries/General/pull/30047/files>. There must be something wrong with Registrator's processing of subdir since it managed to produce that nonsense.","user":"UBVE598BC","ts":"1613977507.006700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5noS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"From "},{"type":"link","url":"https://github.com/JuliaRegistries/General/pull/30047/files"},{"type":"text","text":". There must be something wrong with Registrator's processing of subdir since it managed to produce that nonsense."}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"729b14df-4e3f-4640-b67b-51b0a3445101","type":"message","text":"It's from JuliaHub","user":"U67D54KS8","ts":"1613978915.006900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XBt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's from JuliaHub"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"5cbf72cc-7f49-4a1a-8f54-ee8144daefbf","type":"message","text":"so maybe the person erroneously put in that as the subdir?","user":"U67D54KS8","ts":"1613978928.007100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LSy4/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so maybe the person erroneously put in that as the subdir?"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"c625cefa-0443-4793-8bb5-67d4d9cce86e","type":"message","text":"So how did Registrator determine the tree hash with a broken subdir?","user":"UBVE598BC","ts":"1613981630.007300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"weg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So how did Registrator determine the tree hash with a broken subdir?"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"170998ef-143c-4915-ab21-c2cc7d98eecd","type":"message","text":"Maybe it ignored it?","user":"U67D54KS8","ts":"1613981772.007500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h6+N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe it ignored it?"}]}]}],"thread_ts":"1613954888.001000","parent_user_id":"UCZ7VBGUD"}]