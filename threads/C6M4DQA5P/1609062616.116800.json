[{"client_msg_id":"f9b194d8-9fa1-484d-a9c7-327431446306","type":"message","text":"To what extent do AutoMerge, TagBot, and related infrastructure depend on the PR being created by Registrator?","user":"UBVE598BC","ts":"1609062616.116800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G4pBJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"To what extent do AutoMerge, TagBot, and related infrastructure depend on the PR being created by Registrator?"}]}]}],"thread_ts":"1609062616.116800","reply_count":9,"reply_users_count":3,"latest_reply":"1609105467.125200","reply_users":["U6A936746","UBVE598BC","U7THT3TM3"],"subscribed":false},{"client_msg_id":"c8ab6cfe-4803-4b8f-8e6b-c9c054142170","type":"message","text":"Tagbot, not at all","user":"U6A936746","ts":"1609062755.116900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4B8J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Tagbot, not at all"}]}]}],"thread_ts":"1609062616.116800","parent_user_id":"UBVE598BC"},{"client_msg_id":"d5e77a62-a104-4c50-9093-5827df639fb6","type":"message","text":"Automerge: only will automerge if PR created by Registrator or JuliaHub.\nBecause we know they make sensible safe changes, whereas it's possible E.g. to create a PR that meets all the automerge checks but also destroys the registry","user":"U6A936746","ts":"1609062896.117100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jyNwq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Automerge: only will automerge if PR created by Registrator or JuliaHub.\nBecause we know they make sensible safe changes, whereas it's possible E.g. to create a PR that meets all the automerge checks but also destroys the registry"}]}]}],"thread_ts":"1609062616.116800","parent_user_id":"UBVE598BC","reactions":[{"name":"correct_answer","users":["U7THT3TM3"],"count":1}]},{"client_msg_id":"baa1c54f-bccf-424f-9ff3-4050dccfc72c","type":"message","text":"Seems like it should be possible to relax that aspect by having a stronger automerge check. Given that the change of `Versions.toml` is well-formed, you can check out the tree hash for the package and have RegistryTools reconstruct the updates of `Deps.toml` and `Compat.toml`, then just see that the PR makes identical changes.","user":"UBVE598BC","ts":"1609063825.117300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tavEM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Seems like it should be possible to relax that aspect by having a stronger automerge check. Given that the change of "},{"type":"text","text":"Versions.toml","style":{"code":true}},{"type":"text","text":" is well-formed, you can check out the tree hash for the package and have RegistryTools reconstruct the updates of "},{"type":"text","text":"Deps.toml","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"Compat.toml","style":{"code":true}},{"type":"text","text":", then just see that the PR makes identical changes."}]}]}],"thread_ts":"1609062616.116800","parent_user_id":"UBVE598BC"},{"client_msg_id":"b0d2e4fc-c8ca-4ed2-979e-d0c8bd0dca27","type":"message","text":"I suspect there are also some kind of integrity concerns since JuliaHub insists on getting enough privileges to the package repo so it can check that the registration request comes from someone it thinks should be trusted to do it.","user":"UBVE598BC","ts":"1609065460.117500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UCg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I suspect there are also some kind of integrity concerns since JuliaHub insists on getting enough privileges to the package repo so it can check that the registration request comes from someone it thinks should be trusted to do it."}]}]}],"thread_ts":"1609062616.116800","parent_user_id":"UBVE598BC"},{"client_msg_id":"BDB8A7B5-C601-463A-8357-E114B8996107","type":"message","text":"I don't think we will ever allow AutoMerge on PRs that are not from the Registrator bot","user":"U7THT3TM3","ts":"1609094145.118200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xHYf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think we will ever allow AutoMerge on PRs that are not from the Registrator bot"}]}]}],"thread_ts":"1609062616.116800","parent_user_id":"UBVE598BC"},{"client_msg_id":"A16EB1E0-1647-4372-9EF1-87CE304DFD4B","type":"message","text":"For security","user":"U7THT3TM3","ts":"1609094166.118600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ajHu=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For security"}]}]}],"thread_ts":"1609062616.116800","parent_user_id":"UBVE598BC"},{"client_msg_id":"37c87da2-49f5-4f52-8bc5-d6d3665bb4e9","type":"message","text":"I think we probably could.\nBut it would take some work.\n\nLike we can verify that it is making only the changes it says it is making.\nNo more.\nAnd those changes agree with the state of the commit of the repository being registered.\n\nThat would be more secure.\nSince it wouldn't matter then if Registror got hacked, we would be proving it's only doing the right thing\n\nLeaving aside for now the question of checking if the person has permission to make releases","user":"U6A936746","ts":"1609099347.118800","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1609100456.000000"},"blocks":[{"type":"rich_text","block_id":"E=dB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think we probably could.\nBut it would take some work.\n\nLike we can verify that it is making only the changes it says it is making.\nNo more.\nAnd those changes agree with the state of the commit of the repository being registered.\n\nThat would be more secure.\nSince it wouldn't matter then if Registror got hacked, we would be proving it's only doing the right thing\n\nLeaving aside for now the question of checking if the person has permission to make releases"}]}]}],"thread_ts":"1609062616.116800","parent_user_id":"UBVE598BC"},{"client_msg_id":"74530ee5-c7f9-46ee-b511-b1a332e9820d","type":"message","text":"Is there an interesting distinction between having permission to make releases and having the power to bump the version number in `Project.toml`?","user":"UBVE598BC","ts":"1609105425.125000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z/Oe6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there an interesting distinction between having permission to make releases and having the power to bump the version number in "},{"type":"text","text":"Project.toml","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1609062616.116800","parent_user_id":"UBVE598BC"},{"client_msg_id":"007d7fdc-5fed-4eeb-a6ab-adc09e00d3fc","type":"message","text":"There ideally would not be.\nIdk for sure if there is or not","user":"U6A936746","ts":"1609105467.125200","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1609105490.000000"},"blocks":[{"type":"rich_text","block_id":"wgU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There ideally would not be.\nIdk for sure if there is or not"}]}]}],"thread_ts":"1609062616.116800","parent_user_id":"UBVE598BC"}]