[{"client_msg_id":"b5c05c83-b034-4030-bdac-96989a6fd9d5","type":"message","text":"Is there a way for Flux to automatically know that it doesn't actually need to compute the gradient of certain expressions, or does one need to put @ignore everywhere? For example, for a function f(x, h), when there is no need for the gradient with respect to h. I thought specifying params(x) would make this automatic.","user":"UFCNUVC67","ts":"1612429138.149500","team":"T68168MUP","edited":{"user":"UFCNUVC67","ts":"1612429210.000000"},"blocks":[{"type":"rich_text","block_id":"5mk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way for Flux to automatically know that it doesn't actually need to compute the gradient of certain expressions, or does one need to put @ignore everywhere? For example, for a function f(x, h), when there is no need for the gradient with respect to h. I thought specifying params(x) would make this automatic."}]}]}],"thread_ts":"1612429138.149500","reply_count":4,"reply_users_count":3,"latest_reply":"1612534015.158500","reply_users":["UFCNUVC67","U6YRZ18GZ","U6A936746"],"subscribed":false},{"type":"message","text":"","files":[{"id":"F01MBBBMCTT","created":1612429147,"timestamp":1612429147,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"UFCNUVC67","editable":false,"size":67045,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01MBBBMCTT/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01MBBBMCTT/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01MBBBMCTT-939d0eb580/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01MBBBMCTT-939d0eb580/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01MBBBMCTT-939d0eb580/image_360.png","thumb_360_w":187,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01MBBBMCTT-939d0eb580/image_480.png","thumb_480_w":250,"thumb_480_h":480,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01MBBBMCTT-939d0eb580/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01MBBBMCTT-939d0eb580/image_720.png","thumb_720_w":375,"thumb_720_h":720,"original_w":385,"original_h":740,"thumb_tiny":"AwAwABi+Qc9acDTT16/nR9cUAOzS0gpaAG8jof0pRmmlWz1P50mG/v0ASc+lGKbg/wB6jafWgBc4P/1qUEmmnr1NAz/eoAdz6UvNNzS0Af/Z","permalink":"https://julialang.slack.com/files/UFCNUVC67/F01MBBBMCTT/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01MBBBMCTT-ce9b3659c9","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"UFCNUVC67","display_as_bot":false,"ts":"1612429151.149600","thread_ts":"1612429138.149500","parent_user_id":"UFCNUVC67"},{"client_msg_id":"d97e25d0-9fde-47ef-bf3d-0c140a863405","type":"message","text":"I think you need to use the `@ignore`","user":"U6YRZ18GZ","ts":"1612436435.150500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2pQmP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think you need to use the "},{"type":"text","text":"@ignore","style":{"code":true}}]}]}],"thread_ts":"1612429138.149500","parent_user_id":"UFCNUVC67"},{"client_msg_id":"9abf03b5-96de-4e00-9758-e1e1a1756c68","type":"message","text":"Zygote is not, yet, able to automatically ignore things that don’t interact with with paramaters.\nYou can manually do it with `@ignore` .\nand/or with wruting custom rules, including just declaring the function as `ChainRulesCore.@non_differentiable`\n\nDoing this automatically requires some careful program slicing to workout what touches what.\nWhich is particularly complicated by the fact that Zygote will give correct answers in the presence of global variables.\nSo you can have a function that has no inputs at all that still gets AD’ed because zygote things it might change a global","user":"U6A936746","ts":"1612439583.150700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZvH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Zygote is not, yet, able to automatically ignore things that don’t interact with with paramaters.\nYou can manually do it with "},{"type":"text","text":"@ignore","style":{"code":true}},{"type":"text","text":" .\nand/or with wruting custom rules, including just declaring the function as "},{"type":"text","text":"ChainRulesCore.@non_differentiable","style":{"code":true}},{"type":"text","text":"\n\nDoing this automatically requires some careful program slicing to workout what touches what.\nWhich is particularly complicated by the fact that Zygote will give correct answers in the presence of global variables.\nSo you can have a function that has no inputs at all that still gets AD’ed because zygote things it might change a global"}]}]}],"thread_ts":"1612429138.149500","parent_user_id":"UFCNUVC67","reactions":[{"name":"exploding_head","users":["UJ7DVTVQ8"],"count":1}]},{"client_msg_id":"dd4daed5-5320-4dbd-80fb-add49da83a8a","type":"message","text":"Thanks that clears it up quite well!","user":"UFCNUVC67","ts":"1612534015.158500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NOOuH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks that clears it up quite well!"}]}]}],"thread_ts":"1612429138.149500","parent_user_id":"UFCNUVC67"}]