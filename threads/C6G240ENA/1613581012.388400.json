[{"client_msg_id":"c843a6a8-1b59-46b3-8653-289ca9b9873b","type":"message","text":"I'm having a moment of confusion about callable structs and ChainRules. Trying to define a `rrule` on a callable struct (basically a Flux layer) I get an error in testing (on `test_rrule`) that explicitly disallows using callable structs. If that's the case, why do we need to use `NO_FIELDS` as first argument for `rrule`, given that only functions without internal fields are allowed?","user":"U6BJ9E351","ts":"1613581012.388400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vMSC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm having a moment of confusion about callable structs and ChainRules. Trying to define a "},{"type":"text","text":"rrule","style":{"code":true}},{"type":"text","text":" on a callable struct (basically a Flux layer) I get an error in testing (on "},{"type":"text","text":"test_rrule","style":{"code":true}},{"type":"text","text":") that explicitly disallows using callable structs. If that's the case, why do we need to use "},{"type":"text","text":"NO_FIELDS","style":{"code":true}},{"type":"text","text":" as first argument for "},{"type":"text","text":"rrule","style":{"code":true}},{"type":"text","text":", given that only functions without internal fields are allowed?"}]}]}],"thread_ts":"1613581012.388400","reply_count":1,"reply_users_count":1,"latest_reply":"1613581978.389000","reply_users":["U6A936746"],"subscribed":false},{"client_msg_id":"19c7d76a-3957-44f4-914f-2ef38293064a","type":"message","text":"They are fine in rules.\nIt is a limitation in `test_rrule` right now that it doesn’t handle them.\nIt actually should handle them.\n\nthere is an issue open about it <https://github.com/JuliaDiff/ChainRulesTestUtils.jl/issues/117>\nI don’t even think it is an incredibly hard PR.\nthough might run into trouble working out how to pass things to FiniteDifferences.jl.","user":"U6A936746","ts":"1613581978.389000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BQP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"They are fine in rules.\nIt is a limitation in "},{"type":"text","text":"test_rrule","style":{"code":true}},{"type":"text","text":" right now that it doesn’t handle them.\nIt actually should handle them.\n\nthere is an issue open about it "},{"type":"link","url":"https://github.com/JuliaDiff/ChainRulesTestUtils.jl/issues/117"},{"type":"text","text":"\nI don’t even think it is an incredibly hard PR.\nthough might run into trouble working out how to pass things to FiniteDifferences.jl."}]}]}],"thread_ts":"1613581012.388400","parent_user_id":"U6BJ9E351"}]