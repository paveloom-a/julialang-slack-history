[{"client_msg_id":"031774cf-f7b8-4535-a4f9-22e945f762c1","type":"message","text":"Is this known to be broken?\n```julia&gt; gradient(x -&gt; sum(sin, Diagonal(x)), rand(2))[1]\nERROR: ArgumentError: cannot set off-diagonal entry (1, 2) to a nonzero value (1.0)\nStacktrace:\n  [1] setindex!\n    @ ~/.julia/dev/julia/usr/share/julia/stdlib/v1.7/LinearAlgebra/src/diagonal.jl:101 [inlined]```","user":"UD0NS8PDF","ts":"1612295136.126900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"52sv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is this known to be broken?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> gradient(x -> sum(sin, Diagonal(x)), rand(2))[1]\nERROR: ArgumentError: cannot set off-diagonal entry (1, 2) to a nonzero value (1.0)\nStacktrace:\n  [1] setindex!\n    @ ~/.julia/dev/julia/usr/share/julia/stdlib/v1.7/LinearAlgebra/src/diagonal.jl:101 [inlined]"}]}]}],"thread_ts":"1612295136.126900","reply_count":9,"reply_users_count":2,"latest_reply":"1612297425.134200","reply_users":["U6A936746","UD0NS8PDF"],"subscribed":false},{"client_msg_id":"e837d66b-7fd2-4bd5-a629-ae83ca0c72ee","type":"message","text":"Gross.\nIs that the whole stack trace?","user":"U6A936746","ts":"1612295896.128900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lXXZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Gross.\nIs that the whole stack trace?"}]}]}],"thread_ts":"1612295136.126900","parent_user_id":"UD0NS8PDF"},{"client_msg_id":"a507fab4-871c-467a-bcd2-786316e91752","type":"message","text":"Oh no, it’s a few screenfuls","user":"UD0NS8PDF","ts":"1612295923.129100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NSry","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh no, it’s a few screenfuls"}]}]}],"thread_ts":"1612295136.126900","parent_user_id":"UD0NS8PDF"},{"client_msg_id":"fa867e1e-dbda-4800-84b5-88d6cc63c760","type":"message","text":"But I guess this is broadcasting’s gradient allocating similar(x) and then trying to fill it in?","user":"UD0NS8PDF","ts":"1612295962.129300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P90tR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But I guess this is broadcasting’s gradient allocating similar(x) and then trying to fill it in?"}]}]}],"thread_ts":"1612295136.126900","parent_user_id":"UD0NS8PDF"},{"client_msg_id":"0bd59a2e-0f1d-42ee-9d2a-ac69fb0911d3","type":"message","text":"Maybe. Probably something like that.\nFeels like a thing where a rule is written for AbstractArray and it should only be written for `Array`\n","user":"U6A936746","ts":"1612296062.129700","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1612296079.000000"},"blocks":[{"type":"rich_text","block_id":"8Sy7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe. Probably something like that.\nFeels like a thing where a rule is written for AbstractArray and it should only be written for "},{"type":"text","text":"Array\n","style":{"code":true}}]}]}],"thread_ts":"1612295136.126900","parent_user_id":"UD0NS8PDF"},{"client_msg_id":"a52376a9-6a4d-4ba7-a748-bbd48b3a28ec","type":"message","text":"Cos (pun not intended) that should be applied to the Vector that the Diagonal wraps","user":"U6A936746","ts":"1612296122.130100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"nL+7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Cos (pun not intended) that should be applied to the Vector that the Diagonal wraps"}]}]}],"thread_ts":"1612295136.126900","parent_user_id":"UD0NS8PDF"},{"client_msg_id":"11f63cbe-6a73-49ec-92d4-feaf9217f6e5","type":"message","text":"I have less faith than you in that falling though to magically do the right thing","user":"UD0NS8PDF","ts":"1612296376.130900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VwM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have less faith than you in that falling though to magically do the right thing"}]}]}],"thread_ts":"1612295136.126900","parent_user_id":"UD0NS8PDF"},{"client_msg_id":"a3aff3d4-8bd0-44d1-ba4e-54bc7656a944","type":"message","text":"but I’m not sure I ever had all the details of the gradient of broadcasting in my head","user":"UD0NS8PDF","ts":"1612296413.131100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6LIf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but I’m not sure I ever had all the details of the gradient of broadcasting in my head"}]}]}],"thread_ts":"1612295136.126900","parent_user_id":"UD0NS8PDF"},{"client_msg_id":"02fc0e08-dc1d-46d8-a364-f2ab96d87789","type":"message","text":"[sorry, have cleaned up]","user":"UD0NS8PDF","ts":"1612296808.133000","team":"T68168MUP","edited":{"user":"UD0NS8PDF","ts":"1612296881.000000"},"blocks":[{"type":"rich_text","block_id":"xvbYX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"[sorry, have cleaned up]"}]}]}],"thread_ts":"1612295136.126900","parent_user_id":"UD0NS8PDF"},{"client_msg_id":"150421b6-a49e-4855-83b8-e6528cfbf8c7","type":"message","text":"I have a fair bit of faith in this.","user":"U6A936746","ts":"1612297425.134200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JJwJS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a fair bit of faith in this."}]}]}],"thread_ts":"1612295136.126900","parent_user_id":"UD0NS8PDF"}]