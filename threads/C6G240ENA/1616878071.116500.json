[{"client_msg_id":"a4a3a36d-79a4-4979-b35e-38ac6dfce2e9","type":"message","text":"hi, could someone help me understand what is the issue here with ForwardDiff?\n```MethodError: no method matching Float64(::ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4})\nClosest candidates are:\n  Float64(::Real, ::RoundingMode) where T&lt;:AbstractFloat at rounding.jl:200\n  Float64(::T) where T&lt;:Number at boot.jl:716\n  Float64(::Irrational{:catalan}) at irrationals.jl:189\n  ...```","user":"U01A38DLY8N","ts":"1616878071.116500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oiY=m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hi, could someone help me understand what is the issue here with ForwardDiff?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"MethodError: no method matching Float64(::ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4})\nClosest candidates are:\n  Float64(::Real, ::RoundingMode) where T<:AbstractFloat at rounding.jl:200\n  Float64(::T) where T<:Number at boot.jl:716\n  Float64(::Irrational{:catalan}) at irrationals.jl:189\n  ..."}]}]}],"thread_ts":"1616878071.116500","reply_count":7,"reply_users_count":3,"latest_reply":"1616878677.118000","reply_users":["U01A38DLY8N","U7QLM6E2E","UHDQQ4GN6"],"is_locked":false,"subscribed":false,"reactions":[{"name":"pray","users":["U01HA6ZBSN6"],"count":1}]},{"client_msg_id":"e5220f56-7df2-48e1-9549-cbd1b9bde3c2","type":"message","text":"MWE:\n```x0 = [1, 2, 3.0, 4.0]\n\nfunction f!(y, x)\n    y[1] = 1.0\n    y[2] = 1.0 * x[2]\n    y[3] = 1.0\n    return x[3]\nend\n\ny0 = [1, 2, 3.0]\n\nForwardDiff.gradient(x-&gt; f!(y0, x), x0)```","user":"U01A38DLY8N","ts":"1616878082.116600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4Es","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"MWE:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"x0 = [1, 2, 3.0, 4.0]\n\nfunction f!(y, x)\n    y[1] = 1.0\n    y[2] = 1.0 * x[2]\n    y[3] = 1.0\n    return x[3]\nend\n\ny0 = [1, 2, 3.0]\n\nForwardDiff.gradient(x-> f!(y0, x), x0)"}]}]}],"thread_ts":"1616878071.116500","parent_user_id":"U01A38DLY8N"},{"client_msg_id":"e16ea810-f096-441d-825b-c21150bc6d78","type":"message","text":"Full Stacktrace:\n```MethodError: no method matching Float64(::ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4})\nClosest candidates are:\n  Float64(::Real, ::RoundingMode) where T&lt;:AbstractFloat at rounding.jl:200\n  Float64(::T) where T&lt;:Number at boot.jl:716\n  Float64(::Irrational{:catalan}) at irrationals.jl:189\n  ...\n\nStacktrace:\n [1] convert(::Type{Float64}, ::ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4}) at ./number.jl:7\n [2] setindex!(::Array{Float64,1}, ::ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4}, ::Int64) at ./array.jl:847\n [3] f!(::Array{Float64,1}, ::Array{ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4},1}) at ./In[4]:6\n [4] (::var\"#5#6\")(::Array{ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4},1}) at ./In[4]:17\n [5] vector_mode_dual_eval at /Users/devanshagrawal/.julia/packages/ForwardDiff/sqhTO/src/apiutils.jl:37 [inlined]\n [6] vector_mode_gradient(::var\"#5#6\", ::Array{Float64,1}, ::ForwardDiff.GradientConfig{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4,Array{ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4},1}}) at /Users/devanshagrawal/.julia/packages/ForwardDiff/sqhTO/src/gradient.jl:106\n [7] gradient(::Function, ::Array{Float64,1}, ::ForwardDiff.GradientConfig{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4,Array{ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4},1}}, ::Val{true}) at /Users/devanshagrawal/.julia/packages/ForwardDiff/sqhTO/src/gradient.jl:19\n [8] gradient(::Function, ::Array{Float64,1}, ::ForwardDiff.GradientConfig{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4,Array{ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4},1}}) at /Users/devanshagrawal/.julia/packages/ForwardDiff/sqhTO/src/gradient.jl:17 (repeats 2 times)\n [9] top-level scope at In[4]:17\n [10] include_string(::Function, ::Module, ::String, ::String) at ./loading.jl:1091```","user":"U01A38DLY8N","ts":"1616878098.116800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TRK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Full Stacktrace:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"MethodError: no method matching Float64(::ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4})\nClosest candidates are:\n  Float64(::Real, ::RoundingMode) where T<:AbstractFloat at rounding.jl:200\n  Float64(::T) where T<:Number at boot.jl:716\n  Float64(::Irrational{:catalan}) at irrationals.jl:189\n  ...\n\nStacktrace:\n [1] convert(::Type{Float64}, ::ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4}) at ./number.jl:7\n [2] setindex!(::Array{Float64,1}, ::ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4}, ::Int64) at ./array.jl:847\n [3] f!(::Array{Float64,1}, ::Array{ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4},1}) at ./In[4]:6\n [4] (::var\"#5#6\")(::Array{ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4},1}) at ./In[4]:17\n [5] vector_mode_dual_eval at /Users/devanshagrawal/.julia/packages/ForwardDiff/sqhTO/src/apiutils.jl:37 [inlined]\n [6] vector_mode_gradient(::var\"#5#6\", ::Array{Float64,1}, ::ForwardDiff.GradientConfig{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4,Array{ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4},1}}) at /Users/devanshagrawal/.julia/packages/ForwardDiff/sqhTO/src/gradient.jl:106\n [7] gradient(::Function, ::Array{Float64,1}, ::ForwardDiff.GradientConfig{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4,Array{ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4},1}}, ::Val{true}) at /Users/devanshagrawal/.julia/packages/ForwardDiff/sqhTO/src/gradient.jl:19\n [8] gradient(::Function, ::Array{Float64,1}, ::ForwardDiff.GradientConfig{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4,Array{ForwardDiff.Dual{ForwardDiff.Tag{var\"#5#6\",Float64},Float64,4},1}}) at /Users/devanshagrawal/.julia/packages/ForwardDiff/sqhTO/src/gradient.jl:17 (repeats 2 times)\n [9] top-level scope at In[4]:17\n [10] include_string(::Function, ::Module, ::String, ::String) at ./loading.jl:1091"}]}]}],"thread_ts":"1616878071.116500","parent_user_id":"U01A38DLY8N"},{"client_msg_id":"82d57d1c-7544-4717-aa9c-74a747f51dec","type":"message","text":"this is Julia 1.5.1","user":"U01A38DLY8N","ts":"1616878106.117000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VHGB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this is Julia 1.5.1"}]}]}],"thread_ts":"1616878071.116500","parent_user_id":"U01A38DLY8N"},{"client_msg_id":"1157a5ce-67d7-409b-88df-af47b485cb17","type":"message","text":"essentially the function f! modifies y, and returns a number, in this case x[3], and i want the gradient of the returned value with respect to x, not the jacobian of the modified variable y wrt x","user":"U01A38DLY8N","ts":"1616878177.117200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/uYd8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"essentially the function f! modifies y, and returns a number, in this case x[3], and i want the gradient of the returned value with respect to x, not the jacobian of the modified variable y wrt x"}]}]}],"thread_ts":"1616878071.116500","parent_user_id":"U01A38DLY8N"},{"client_msg_id":"1ef99e75-99e8-4ff5-9135-a3f3fb5118b0","type":"message","text":"any advice would be helpful!","user":"U01A38DLY8N","ts":"1616878314.117400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AA4A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"any advice would be helpful!"}]}]}],"thread_ts":"1616878071.116500","parent_user_id":"U01A38DLY8N"},{"client_msg_id":"202a82c3-a635-41e4-a120-9d8a1850eb6f","type":"message","text":"x[2] is a Dual number that you try to attribute to a vector of Float64 (y[2]), that 's why it errors","user":"U7QLM6E2E","ts":"1616878555.117700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aiJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"x[2] is a Dual number that you try to attribute to a vector of Float64 (y[2]), that 's why it errors"}]}]}],"thread_ts":"1616878071.116500","parent_user_id":"U01A38DLY8N"},{"client_msg_id":"cf219ba4-c078-45cc-9988-e203ba56fc12","type":"message","text":"Also the gradient is `[0.0, 0.0, 1.0]` .","user":"UHDQQ4GN6","ts":"1616878677.118000","team":"T68168MUP","edited":{"user":"UHDQQ4GN6","ts":"1616878761.000000"},"blocks":[{"type":"rich_text","block_id":"aKQ+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also the gradient is "},{"type":"text","text":"[0.0, 0.0, 1.0]","style":{"code":true}},{"type":"text","text":" ."}]}]}],"thread_ts":"1616878071.116500","parent_user_id":"U01A38DLY8N","reactions":[{"name":"thumbsup_all","users":["U01SFUPBJ9E","U01A38DLY8N"],"count":2}]}]