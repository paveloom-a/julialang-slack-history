[{"client_msg_id":"9569cf85-5059-4061-af71-472a808eaaf2","type":"message","text":"Does anyone know the schedule of Diffractor.jl and when will it be released?","user":"UE6BDNM9B","ts":"1609520585.302600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QFC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does anyone know the schedule of Diffractor.jl and when will it be released?"}]}]}],"thread_ts":"1609520585.302600","reply_count":26,"reply_users_count":8,"latest_reply":"1609753031.318900","reply_users":["U6A936746","UE6BDNM9B","U69BL50BF","UC6SUUPRC","U67461GUB","UMY1LV01G","UKA81L34J","U6YRZ18GZ"],"subscribed":false},{"client_msg_id":"8cc7e2ed-1af2-4bc0-8b21-460db53f8bc3","type":"message","text":"Not til sometimes after the optical closure PR is merged into Julia itself","user":"U6A936746","ts":"1609520667.302700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"11e","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Not til sometimes after the optical closure PR is merged into Julia itself"}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"4b89f5f5-7b04-4ae5-a3b0-eee099d790f9","type":"message","text":"I would guess sometime in next 6 months.","user":"U6A936746","ts":"1609520693.302900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ta6dc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would guess sometime in next 6 months."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"2c12dd5a-b7e6-45d7-a94f-f888237d767b","type":"message","text":"I am not sure there even is a private Diffractor.jl repo.\nI think is might be a scattered collection of scripts and proof of concept snippets","user":"U6A936746","ts":"1609520765.303100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LeFoB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am not sure there even is a private Diffractor.jl repo.\nI think is might be a scattered collection of scripts and proof of concept snippets"}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"eecacf65-1789-4739-a5f8-4d3697399962","type":"message","text":"I think is might be a  proof of concept snippets","user":"UE6BDNM9B","ts":"1609520844.303300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AvHZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think is might be a  proof of concept snippets"}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"76c9d752-c02c-4c9e-97e0-142eee23c28c","type":"message","text":"I had trouble using Zygote, so I looked up some information on Diffractor","user":"UE6BDNM9B","ts":"1609520962.303500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BL+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I had trouble using Zygote, so I looked up some information on Diffractor"}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"598c0938-3d32-4250-bda1-328c33662e3d","type":"message","text":"it won't be generally usable until Julia v1.7 is released","user":"U69BL50BF","ts":"1609522368.303800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yri","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it won't be generally usable until Julia v1.7 is released"}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"6ebbf672-836a-47c5-9ec1-395e44e20254","type":"message","text":"there will be earlier versions, and we plan to start testing it in SciML projects internally with alpha versions in like March or April. But I wouldn't expect most people to use it until way later. That timeline would be hard to guess, but maybe a GSoC summer push might be what it needs.","user":"U69BL50BF","ts":"1609522472.304000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KKri","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there will be earlier versions, and we plan to start testing it in SciML projects internally with alpha versions in like March or April. But I wouldn't expect most people to use it until way later. That timeline would be hard to guess, but maybe a GSoC summer push might be what it needs."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"bb0d3e8d-ab08-4baa-86fa-8a1f5485f4a6","type":"message","text":"&gt; I had trouble using Zygote, so I looked up some information on Diffractor\n\nDiffractor won't be much easier to use than Zygote.\nMostly it will just be faster.","user":"U6A936746","ts":"1609523193.304200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EJpW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"> I had trouble using Zygote, so I looked up some information on Diffractor\n\nDiffractor won't be much easier to use than Zygote.\nMostly it will just be faster."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"3E51FB51-6435-42E2-8749-17E324A0156C","type":"message","text":"I guess Diffractor is built on CodeInfo directly? I guess at least you get rid of some latency between translating two IRs comparing to Zygote. Still hoping some day we can have IRCode level AD tho.","user":"UC6SUUPRC","ts":"1609524412.306600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/=H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess Diffractor is built on CodeInfo directly? I guess at least you get rid of some latency between translating two IRs comparing to Zygote. Still hoping some day we can have IRCode level AD tho."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"3D3BA307-9F1F-4F79-8658-1469A0778324","type":"message","text":"Sometimes Zygote has quite long compilation time...","user":"UC6SUUPRC","ts":"1609524523.308700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z+S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sometimes Zygote has quite long compilation time..."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B","reactions":[{"name":"point_up","users":["UMY1LV01G"],"count":1}]},{"client_msg_id":"7f6b3abe-1b67-4c1e-8d19-98c620824c41","type":"message","text":"<@U674T3KB3> should provide the actual timelines, but my expectation for the PR being merged is much sooner. The mental model I have is that it is an almost drop-in zygote replacement, will leverage ChainRules.jl etc., but solving many of the issues like compile time. So hopefully, people here can start trying things on master after merging, and a first usable version can start becoming available for 1.7.","user":"U67461GUB","ts":"1609525023.308900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GeRs","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U674T3KB3"},{"type":"text","text":" should provide the actual timelines, but my expectation for the PR being merged is much sooner. The mental model I have is that it is an almost drop-in zygote replacement, will leverage ChainRules.jl etc., but solving many of the issues like compile time. So hopefully, people here can start trying things on master after merging, and a first usable version can start becoming available for 1.7."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"4c5e6809-d0da-4e92-afa8-c89e89a72f26","type":"message","text":"There was perhaps a bit of an unfortunate miscommunication where some questions/concerns about Zygote were answered by \"wait for Diffractor (coming out soon)\". Does that mean there will be no ramping down of activity on Zygote as mentioned a couple months back for quite some time?","user":"UMY1LV01G","ts":"1609527242.309200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XGYi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There was perhaps a bit of an unfortunate miscommunication where some questions/concerns about Zygote were answered by \"wait for Diffractor (coming out soon)\". Does that mean there will be no ramping down of activity on Zygote as mentioned a couple months back for quite some time?"}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"2663480f-2988-44c5-8727-db49d3df8e7f","type":"message","text":"The rough timeline I gave was just what was discussed on the last ML call before the holidays so I assume not much changed in the meantime.\n\nBut to most users the difference between Zygote and Diffractor won't be really anything. It should mostly be transparent, with all of the same rules, and so if you have an issue with Zygote then you'll want to open it now since Diffractor will use the same rule set. There's no ramping down on Zygote because most of the work is in the rules which will be shared anyways.","user":"U69BL50BF","ts":"1609527272.309400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sDXmD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The rough timeline I gave was just what was discussed on the last ML call before the holidays so I assume not much changed in the meantime.\n\nBut to most users the difference between Zygote and Diffractor won't be really anything. It should mostly be transparent, with all of the same rules, and so if you have an issue with Zygote then you'll want to open it now since Diffractor will use the same rule set. There's no ramping down on Zygote because most of the work is in the rules which will be shared anyways."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"97fbf3e5-5b11-4877-ae06-e588b004be1a","type":"message","text":"If your issue is nested AD, then sure wait (that's one of the things Diffractor fixes). Some adjoint not defined? That's an issue that will be the same in both systems.","user":"U69BL50BF","ts":"1609527317.309600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+N6xV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If your issue is nested AD, then sure wait (that's one of the things Diffractor fixes). Some adjoint not defined? That's an issue that will be the same in both systems."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"82e4cfd5-457d-4c7a-8ea7-237fa26450e0","type":"message","text":"I recall both \"soon\" and \"maintenance mode\" being mentioned wrt the transition. This was back when there was still talk of everything landing in 1.6 though.","user":"UMY1LV01G","ts":"1609527493.309800","team":"T68168MUP","edited":{"user":"UMY1LV01G","ts":"1609527560.000000"},"blocks":[{"type":"rich_text","block_id":"7xB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I recall both \"soon\" and \"maintenance mode\" being mentioned wrt the transition. This was back when there was still talk of everything landing in 1.6 though."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"adc7d1d7-36a3-480b-9d16-d2607dc0367c","type":"message","text":"My only issues are compile times and latency :smile:","user":"UMY1LV01G","ts":"1609527529.310000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2pH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"My only issues are compile times and latency "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"87f1abda-e8ad-4b54-b735-57dc1f143a14","type":"message","text":"This update I'm giving is from the \"just before the holiday\" call, so it should be the most up to date. \"maintenance mode\" on the compiler of Zygote? Sure, I wouldn't spend any of my own time digging through IRTools stuff right now. Latency and compile times falls into this category, moreso because it'll be a whole new compilation mechanism so I don't think optimizing Zygote will help Diffractor at all in this domain.\n\nBut most of the user issues are related to adjoint definitions, so most of the work will keep on going as normal and carry on over. In fact, more and more of that should be shifting over to ChainRules anyways. There will be a good amount of work to upstream some remaining rules into ChainRules that currently exist as `ZygoteRules.@adjoint` definitions","user":"U69BL50BF","ts":"1609527868.310300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oQ8IQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This update I'm giving is from the \"just before the holiday\" call, so it should be the most up to date. \"maintenance mode\" on the compiler of Zygote? Sure, I wouldn't spend any of my own time digging through IRTools stuff right now. Latency and compile times falls into this category, moreso because it'll be a whole new compilation mechanism so I don't think optimizing Zygote will help Diffractor at all in this domain.\n\nBut most of the user issues are related to adjoint definitions, so most of the work will keep on going as normal and carry on over. In fact, more and more of that should be shifting over to ChainRules anyways. There will be a good amount of work to upstream some remaining rules into ChainRules that currently exist as "},{"type":"text","text":"ZygoteRules.@adjoint","style":{"code":true}},{"type":"text","text":" definitions"}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"33cdc470-1d16-4682-aa4b-e0c94a66312b","type":"message","text":"A lot of great work has already been happening to push a bunch of things into ChainRules; <@UUJ6L8N8P> recently moved NNLib over.\nMoving to ChainRules will also be a win even if we never get Diffractor.\nNabla is almost moved over (PR passes all tests, has for months, just need to find time for some polish. Also maybe doing something about its massive increase to load times).\nWe’re also still working on  the PR for Zygote to get it to use ChainRules types internally, which will allow us to add inplace accumulation of gradients to rules and have Zygote use them (ChainRules already defines a bunch of inplace ones that Nabla uses) which will massively cut down on allocations.\nCan’t define inplace accumulation in ZygoteRules.","user":"U6A936746","ts":"1609528634.310500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LvU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"A lot of great work has already been happening to push a bunch of things into ChainRules; "},{"type":"user","user_id":"UUJ6L8N8P"},{"type":"text","text":" recently moved NNLib over.\nMoving to ChainRules will also be a win even if we never get Diffractor.\nNabla is almost moved over (PR passes all tests, has for months, just need to find time for some polish. Also maybe doing something about its massive increase to load times).\nWe’re also still working on  the PR for Zygote to get it to use ChainRules types internally, which will allow us to add inplace accumulation of gradients to rules and have Zygote use them (ChainRules already defines a bunch of inplace ones that Nabla uses) which will massively cut down on allocations.\nCan’t define inplace accumulation in ZygoteRules."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B","reactions":[{"name":"+1","users":["UMY1LV01G"],"count":1}]},{"client_msg_id":"b139f296-4d6e-4c9d-ad5c-972d08d2e0ab","type":"message","text":"I just noticed there were some rules that haven't moved though, like the FFT rules. So there's still more to do.","user":"U69BL50BF","ts":"1609529020.310700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sOp/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I just noticed there were some rules that haven't moved though, like the FFT rules. So there's still more to do."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"3f60d643-81f2-4ab8-a950-39460ff2ff40","type":"message","text":"Yeah, there are still lots. Progress is being made though","user":"U6A936746","ts":"1609529193.310900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8siaT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, there are still lots. Progress is being made though"}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B","reactions":[{"name":"100","users":["U67461GUB","UKG4WF8PJ","U6QGE7S86"],"count":3}]},{"client_msg_id":"1af24677-047f-4f7a-b17a-6791756d72ef","type":"message","text":"From Julia Computing side, we’ll keep supporting Zygote until Diffractor is ready. Don’t do crazy new projects with Zygote that depend on the details of its implementations and internals, as Chris said. But building new things with Zygote’s API should continue, and things will generally become better.","user":"U67461GUB","ts":"1609529625.311100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+GI8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"From Julia Computing side, we’ll keep supporting Zygote until Diffractor is ready. Don’t do crazy new projects with Zygote that depend on the details of its implementations and internals, as Chris said. But building new things with Zygote’s API should continue, and things will generally become better."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B","reactions":[{"name":"100","users":["U6A936746","UKA81L34J"],"count":2}]},{"client_msg_id":"9ece50d5-2b50-48c3-95e7-c051edc54d1f","type":"message","text":"Also join the <#C01J3R4FHB3|enzyme> channel if you want to experiment with new AD to complement the upcoming capabilities.","user":"UKA81L34J","ts":"1609555282.311900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"shZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also join the "},{"type":"channel","channel_id":"C01J3R4FHB3"},{"type":"text","text":" channel if you want to experiment with new AD to complement the upcoming capabilities."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"4c65bbaf-84cb-48ba-bf02-f37e6309951d","type":"message","text":"<@U67461GUB> Would any funding help to speed-up the development? I do not want to promis anything at the moment, but I might be able to get something from Avast.","user":"U6YRZ18GZ","ts":"1609680574.316800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OI0kW","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U67461GUB"},{"type":"text","text":" Would any funding help to speed-up the development? I do not want to promis anything at the moment, but I might be able to get something from Avast."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"},{"client_msg_id":"dd0168c3-d9a1-4751-9514-0eab7b5da8a7","type":"message","text":"That’s a great question to ask. At the moment, at Julia Computing, the Diffractor work is funded for the foreseeable future. What slows it is that it is intertwined with Julia Base and the same set of people are stretched across too many things - compiler bugs, type inference, multi-threading, making releases, GPUs, buildbot/pkgeval, etc. Thinking out aloud, where funding would help is supporting more folks in the community (even part time) who can help out more on the general Julia compiler and CI/buildbot infrastructure side. Second way to speed up this work could be more folks (possibly funded projects?) working closely with the upcoming tools to mature them faster.","user":"U67461GUB","ts":"1609685172.317000","team":"T68168MUP","edited":{"user":"U67461GUB","ts":"1609685203.000000"},"blocks":[{"type":"rich_text","block_id":"Qz7+A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That’s a great question to ask. At the moment, at Julia Computing, the Diffractor work is funded for the foreseeable future. What slows it is that it is intertwined with Julia Base and the same set of people are stretched across too many things - compiler bugs, type inference, multi-threading, making releases, GPUs, buildbot/pkgeval, etc. Thinking out aloud, where funding would help is supporting more folks in the community (even part time) who can help out more on the general Julia compiler and CI/buildbot infrastructure side. Second way to speed up this work could be more folks (possibly funded projects?) working closely with the upcoming tools to mature them faster."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B","reactions":[{"name":"+1","users":["U6A936746","UAEJRV3KJ"],"count":2}]},{"client_msg_id":"039d8fd6-e97d-465f-b880-95f1609d2156","type":"message","text":"One thing that would help is that, if you are or know of any CI/buildbot infrastructure people, please let me know. The Julia Lab is starting its search for a new devops person, and that always frees up the developer time. Donated money can be used in other ways too, like student programs in JSoC are always a huge push for the community.","user":"U69BL50BF","ts":"1609690709.317400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8Z6S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"One thing that would help is that, if you are or know of any CI/buildbot infrastructure people, please let me know. The Julia Lab is starting its search for a new devops person, and that always frees up the developer time. Donated money can be used in other ways too, like student programs in JSoC are always a huge push for the community."}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B","reactions":[{"name":"100","users":["U67461GUB"],"count":1}]},{"client_msg_id":"cb15ae11-d0c1-4de7-b29e-e7f3dc5a64b0","type":"message","text":"I will, what can be done. But to be hones, we are struggling with hiring CI people as well.\n<@U67461GUB> What upcoming tools do you have exactly in mind?","user":"U6YRZ18GZ","ts":"1609753031.318900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9SXwS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I will, what can be done. But to be hones, we are struggling with hiring CI people as well.\n"},{"type":"user","user_id":"U67461GUB"},{"type":"text","text":" What upcoming tools do you have exactly in mind?"}]}]}],"thread_ts":"1609520585.302600","parent_user_id":"UE6BDNM9B"}]