[{"client_msg_id":"a037a7db-3ecd-4ded-b01f-4815996145cd","type":"message","text":"if I'm ADing back through a function that uses a for loop to index into an array is it faster to rewrite it as a `mapreduce`?","user":"ULA52A5B5","ts":"1616685915.067000","team":"T68168MUP","edited":{"user":"ULA52A5B5","ts":"1616685939.000000"},"blocks":[{"type":"rich_text","block_id":"=4UXp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if I'm ADing back through a function that uses a for loop to index into an array is it faster to rewrite it as a "},{"type":"text","text":"mapreduce","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1616685915.067000","reply_count":9,"reply_users_count":2,"latest_reply":"1616690262.071900","reply_users":["ULA52A5B5","U6A936746"],"is_locked":false,"subscribed":false},{"client_msg_id":"fbb079b9-2a46-4e3a-8294-8c6e24c8ff8d","type":"message","text":"ie. I have some code that does something like this:\n\n```function propagator(x, H0, U0, dt)\n    U = U0\n    for i =1:length(x)\n        H = H0 + x[i] * sx\n        U = exp(-1.0im * H * dt) * U\n    end\n    U\nend```","user":"ULA52A5B5","ts":"1616685948.067400","team":"T68168MUP","edited":{"user":"ULA52A5B5","ts":"1616689531.000000"},"blocks":[{"type":"rich_text","block_id":"1E10O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ie. I have some code that does something like this:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function propagator(x, H0, U0, dt)\n    U = U0\n    for i =1:length(x)\n        H = H0 +"},{"type":"text","text":" x[i] "},{"type":"text","text":"* sx\n        U = exp(-1.0im * H * dt) * U\n    end\n    U\nend"}]}]}],"thread_ts":"1616685915.067000","parent_user_id":"ULA52A5B5"},{"client_msg_id":"09a79471-edb0-4598-b6bb-cd9795607ec6","type":"message","text":"where x is the vector that I take the gradient of, is it better to write it as a mapreduce?","user":"ULA52A5B5","ts":"1616686159.068000","team":"T68168MUP","edited":{"user":"ULA52A5B5","ts":"1616686171.000000"},"blocks":[{"type":"rich_text","block_id":"sHII","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"where x is the vector that I take the gradient of, is it better to write it as a mapreduce?"}]}]}],"thread_ts":"1616685915.067000","parent_user_id":"ULA52A5B5"},{"client_msg_id":"97c0e541-1ff1-464b-b49f-b20a86c61e18","type":"message","text":"What AD package?","user":"U6A936746","ts":"1616689269.068300","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1616689274.000000"},"blocks":[{"type":"rich_text","block_id":"8x7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What AD package?"}]}]}],"thread_ts":"1616685915.067000","parent_user_id":"ULA52A5B5"},{"client_msg_id":"759c0238-ae41-4f86-83c2-a7eaecb6a875","type":"message","text":"also the code you posted doesn’t index into an array, but your original question did.\nI think you forgot to define `sx`","user":"U6A936746","ts":"1616689355.068600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Khhl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"also the code you posted doesn’t index into an array, but your original question did.\nI think you forgot to define "},{"type":"text","text":"sx","style":{"code":true}}]}]}],"thread_ts":"1616685915.067000","parent_user_id":"ULA52A5B5"},{"client_msg_id":"D1EE2D7F-AE40-4291-9788-D17BC8C2DAE5","type":"message","text":"With Zygote, SX is a [0 1, 1 0] but it’s complex valued ","user":"ULA52A5B5","ts":"1616689518.070300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"E7k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"With Zygote, SX is a [0 1, 1 0] but it’s complex valued "}]}]}],"thread_ts":"1616685915.067000","parent_user_id":"ULA52A5B5"},{"client_msg_id":"3923A651-72E4-434E-8B47-AEE0501615A8","type":"message","text":"Fixed my code sorry for that!","user":"ULA52A5B5","ts":"1616689539.070800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bfj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Fixed my code sorry for that!"}]}]}],"thread_ts":"1616685915.067000","parent_user_id":"ULA52A5B5"},{"client_msg_id":"0ba65ee0-a440-47f9-acb0-eef6985dcd96","type":"message","text":"I suggest benchmarking it.\nBut with Zygote avoiding loops and indexing is normally good\n(we’re working on it)","user":"U6A936746","ts":"1616689590.071000","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1616689627.000000"},"blocks":[{"type":"rich_text","block_id":"3ib4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I suggest benchmarking it.\nBut with Zygote avoiding loops and indexing is normally good\n(we’re working on it)"}]}]}],"thread_ts":"1616685915.067000","parent_user_id":"ULA52A5B5"},{"client_msg_id":"ECC60BFD-5B45-4A05-895A-D98E3AEFD6F3","type":"message","text":"Alright! Thanks a lot!","user":"ULA52A5B5","ts":"1616690025.071700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zp79B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Alright! Thanks a lot!"}]}]}],"thread_ts":"1616685915.067000","parent_user_id":"ULA52A5B5"},{"client_msg_id":"c3dac9b9-9219-4564-867e-3ce54b2c12cf","type":"message","text":"n.p.","user":"U6A936746","ts":"1616690262.071900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Y2L9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"n.p."}]}]}],"thread_ts":"1616685915.067000","parent_user_id":"ULA52A5B5"}]