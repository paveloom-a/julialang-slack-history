[{"client_msg_id":"186b3d8e-7b85-4f24-98d9-f7bd1dc8053f","type":"message","text":"I have a matrix `X` and I want to compute the gradient of each column given a fixed function `f`. To avoid splitting things up I use the following ;\n```gradient(X) do X\n   sum(f, eachcol(X))\nend```\nwhich works appropriately but I was wondering if I could find some speedup since the gradient function is basically always the same","user":"U7QLM6E2E","ts":"1612364185.140100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v3V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a matrix "},{"type":"text","text":"X","style":{"code":true}},{"type":"text","text":" and I want to compute the gradient of each column given a fixed function "},{"type":"text","text":"f","style":{"code":true}},{"type":"text","text":". To avoid splitting things up I use the following ;\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"gradient(X) do X\n   sum(f, eachcol(X))\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"which works appropriately but I was wondering if I could find some speedup since the gradient function is basically always the same"}]}]}],"thread_ts":"1612364185.140100","reply_count":14,"reply_users_count":4,"latest_reply":"1612446397.151300","reply_users":["U6A936746","U7QLM6E2E","UD0NS8PDF","UC4QQPG4A"],"subscribed":false},{"client_msg_id":"a2bd80c7-ffaa-4caf-918e-25c8115bf225","type":"message","text":"what package are you using?\nIn general Zygote will cache much (all?) of the gradient function (pullback) in the compile-cache and won’t recompute it.","user":"U6A936746","ts":"1612364553.140300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WTL9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what package are you using?\nIn general Zygote will cache much (all?) of the gradient function (pullback) in the compile-cache and won’t recompute it."}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"95af6bde-5e78-43e7-820f-647bd3df17d4","type":"message","text":"Currently ReverseDiff","user":"U7QLM6E2E","ts":"1612364633.140600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AZniQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Currently ReverseDiff"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"2281340b-9273-4b40-88a5-c2e2d52a7e72","type":"message","text":"let me see if I get a speed up just using Zygote","user":"U7QLM6E2E","ts":"1612364747.140800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"c/W","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"let me see if I get a speed up just using Zygote"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"bdbce171-68ca-4370-9db3-be262384c276","type":"message","text":"Oh wow Zygote is 3 times faster and allocate 6 times less than ReverseDiff for my usecase :star-struck:","user":"U7QLM6E2E","ts":"1612364975.141000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/dXYI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh wow Zygote is 3 times faster and allocate 6 times less than ReverseDiff for my usecase "},{"type":"emoji","name":"star-struck"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"647c4436-161a-48e6-ab69-4889a1b71021","type":"message","text":"Thanks I did not imagine there would be such a difference!","user":"U7QLM6E2E","ts":"1612365042.141200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1faP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks I did not imagine there would be such a difference!"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"38c9adca-af68-49cf-b699-7f911b76a09b","type":"message","text":"Wow. Zygote being faster *and* less allocating than ReverseDiff?\nThis is kinda surprising to me.","user":"U6A936746","ts":"1612365782.141500","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1612365804.000000"},"blocks":[{"type":"rich_text","block_id":"TKEJc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Wow. Zygote being faster "},{"type":"text","text":"and","style":{"bold":true}},{"type":"text","text":" less allocating than ReverseDiff?\nThis is kinda surprising to me."}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"549ae919-2823-4204-9f4e-4bd106978453","type":"message","text":"<https://github.com/TuringLang/AdvancedVI.jl/issues/23>","user":"U7QLM6E2E","ts":"1612365801.141700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PjqO1","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/TuringLang/AdvancedVI.jl/issues/23"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"8980be4a-a2af-4e6f-bf57-027d37b3a05c","type":"message","text":"I think for ReverseDiff you need to compile the tape.\nI have no idea how to do that.\n(I never actually use ReverseDiff)","user":"U6A936746","ts":"1612365820.142000","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1612365838.000000"},"blocks":[{"type":"rich_text","block_id":"DLH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think for ReverseDiff you need to compile the tape.\nI have no idea how to do that.\n(I never actually use ReverseDiff)"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"5212341d-1c24-4144-9056-2b06d41c5e94","type":"message","text":"I am just trying again in a fresh session to see if it's not an artifact","user":"U7QLM6E2E","ts":"1612365876.142300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5vJjY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am just trying again in a fresh session to see if it's not an artifact"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"0ed83808-397a-4e0d-b359-9016a8f00bba","type":"message","text":"Trying again I get a 10x speedup XD","user":"U7QLM6E2E","ts":"1612365965.142500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HT0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Trying again I get a 10x speedup XD"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"bf8caba4-845f-41b1-b147-9b63671da79a","type":"message","text":":sonic:","user":"U6A936746","ts":"1612365974.142700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dv1+","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"sonic"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"12393f98-05c5-44b9-83f3-2677205f73cb","type":"message","text":"Perhaps this is an opportunity to beta-test  <https://github.com/FluxML/Zygote.jl/pull/896> ?","user":"UD0NS8PDF","ts":"1612382495.145500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ned","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Perhaps this is an opportunity to beta-test  "},{"type":"link","url":"https://github.com/FluxML/Zygote.jl/pull/896"},{"type":"text","text":" ?"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E","reactions":[{"name":"+1","users":["U7QLM6E2E"],"count":1}]},{"client_msg_id":"9be4f50c-480c-4ed3-b8e4-989a438aba81","type":"message","text":"Zygote has seen a bunch of subtle but important pushes in the right direction wrt performance","user":"UC4QQPG4A","ts":"1612446349.150900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oEB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Zygote has seen a bunch of subtle but important pushes in the right direction wrt performance"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E","reactions":[{"name":"+1","users":["U6A936746","U7QLM6E2E"],"count":2}]},{"client_msg_id":"78684068-e73e-443d-ba83-ac05e5705afa","type":"message","text":"That's amazing :D","user":"U7QLM6E2E","ts":"1612446397.151300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yb4ZR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's amazing :D"}]}]}],"thread_ts":"1612364185.140100","parent_user_id":"U7QLM6E2E"}]