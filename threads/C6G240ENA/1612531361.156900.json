[{"client_msg_id":"941632d3-005a-4917-b021-db740fad7942","type":"message","text":"I'm getting an error `Need an adjoint for constructor UniformScaling`  when using Zygote to AD through a matrix exponential where I'm using StaticArrays, for now I can go back to v0.6.0 but I was wondering if someone can help me define the right constructor","user":"ULA52A5B5","ts":"1612531361.156900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VAM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm getting an error "},{"type":"text","text":"Need an adjoint for constructor UniformScaling","style":{"code":true}},{"type":"text","text":"  when using Zygote to AD through a matrix exponential where I'm using StaticArrays, for now I can go back to v0.6.0 but I was wondering if someone can help me define the right constructor"}]}]}],"thread_ts":"1612531361.156900","reply_count":7,"reply_users_count":2,"latest_reply":"1612533280.158300","reply_users":["U6A936746","ULA52A5B5"],"subscribed":false},{"client_msg_id":"f6554ebd-0a8c-419e-b5d4-6b50c1b7a14e","type":"message","text":"I hate those errors and wish we had a good documentation for how to define them.\nThe definition is usually really easy conceptually, but a bit fiddly to do.\n\nAnd *I*  also struggle with it, so I want that documentation for me.","user":"U6A936746","ts":"1612531684.157000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L4U","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I hate those errors and wish we had a good documentation for how to define them.\nThe definition is usually really easy conceptually, but a bit fiddly to do.\n\nAnd "},{"type":"text","text":"I","style":{"bold":true}},{"type":"text","text":"  also struggle with it, so I want that documentation for me."}]}]}],"thread_ts":"1612531361.156900","parent_user_id":"ULA52A5B5"},{"client_msg_id":"818c752e-ea27-41f0-85b1-a1e9cbc779ee","type":"message","text":"that error message normally also say “gradient is of type …”","user":"U6A936746","ts":"1612531818.157200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BeqJ8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that error message normally also say “gradient is of type …”"}]}]}],"thread_ts":"1612531361.156900","parent_user_id":"ULA52A5B5"},{"client_msg_id":"f5316c80-b90d-4742-b2da-dd6985da879e","type":"message","text":"ah yeah sorry, the gradient is of type complex, maybe thats the issue.... I should have had a line at the start of my functional to make sure that my input was only real valued","user":"ULA52A5B5","ts":"1612531868.157400","team":"T68168MUP","edited":{"user":"ULA52A5B5","ts":"1612531953.000000"},"blocks":[{"type":"rich_text","block_id":"jC2Co","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah yeah sorry, the gradient is of type complex, maybe thats the issue.... I should have had a line at the start of my functional to make sure that my input was only real valued"}]}]}],"thread_ts":"1612531361.156900","parent_user_id":"ULA52A5B5"},{"client_msg_id":"9fd9c111-c3fe-42f9-9b26-9d2058ea509e","type":"message","text":"Generally it is something like\n\n```function ChainRulesCore.rrule(::Type{&lt;:MyType}, constructor_arg1, constructor_arg2)\n    y = MyType(constructor_arg1, constructor_arg2)\n    function MyType_pullback(Δ::GradientType)\n        Δ_constructor_arg1 = ...\n        Δ_constructor_arg2 = ...\n        NO_FIELDS, Δ_constructor_arg1, Δ_constructor_arg2\n    end\nend```\nWhere `MyType` is your type\nand `GradientType` is the thing listed in the error as `gradient is of type ...`","user":"U6A936746","ts":"1612532024.157700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6lMy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Generally it is something like\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function ChainRulesCore.rrule(::Type{<:MyType}, constructor_arg1, constructor_arg2)\n    y = MyType(constructor_arg1, constructor_arg2)\n    function MyType_pullback(Δ::GradientType)\n        Δ_constructor_arg1 = ...\n        Δ_constructor_arg2 = ...\n        NO_FIELDS, Δ_constructor_arg1, Δ_constructor_arg2\n    end\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Where `MyType` is your type\nand `GradientType` is the thing listed in the error as `gradient is of type ...`"}]}]}],"thread_ts":"1612531361.156900","parent_user_id":"ULA52A5B5"},{"client_msg_id":"3592d7aa-8ae4-40b8-adf2-463bf5f23acc","type":"message","text":"`Need an adjoint for constructor UniformScaling{Complex{Float64}}. Gradient is of type Array{Complex{Float64},2}` here we are","user":"ULA52A5B5","ts":"1612532519.157900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"78BUs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Need an adjoint for constructor UniformScaling{Complex{Float64}}. Gradient is of type Array{Complex{Float64},2}","style":{"code":true}},{"type":"text","text":" here we are"}]}]}],"thread_ts":"1612531361.156900","parent_user_id":"ULA52A5B5"},{"client_msg_id":"a7898d3c-21bb-431b-8512-73576840a7f0","type":"message","text":"I'll try out defining it myself like you've suggested","user":"ULA52A5B5","ts":"1612532536.158100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wkmr4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'll try out defining it myself like you've suggested"}]}]}],"thread_ts":"1612531361.156900","parent_user_id":"ULA52A5B5"},{"client_msg_id":"c6dcf82d-2abc-491e-a183-63771fbe9531","type":"message","text":"if it works you can PR it into ChainRules.jl","user":"U6A936746","ts":"1612533280.158300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Bah","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if it works you can PR it into ChainRules.jl"}]}]}],"thread_ts":"1612531361.156900","parent_user_id":"ULA52A5B5"}]