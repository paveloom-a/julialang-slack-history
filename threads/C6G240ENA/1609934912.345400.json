[{"client_msg_id":"3f398910-e961-463e-8ccf-5e2aaee4b660","type":"message","text":"I think it boils down to Zygote doesn't really understand constructors well","user":"U6A936746","ts":"1609934912.345400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AhEu6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think it boils down to Zygote doesn't really understand constructors well"}]}]}],"thread_ts":"1609934912.345400","reply_count":24,"reply_users_count":3,"latest_reply":"1610059832.364500","reply_users":["U016VPPCQA1","U6A936746","UHDQQ4GN6"],"subscribed":false},{"client_msg_id":"527c96a1-51de-448b-ae94-5d0899981dff","type":"message","text":"Do you know of anybody who has done a simple version of this in the past? Made a rule for an constructor/initializer?","user":"U016VPPCQA1","ts":"1609937115.346500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"55J","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you know of anybody who has done a simple version of this in the past? Made a rule for an constructor/initializer?"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"0f7e52ba-a622-4bbd-9b5b-fa8de59520ad","type":"message","text":"yes, there are lots of them, in Zygote itself even\nBut wish i had a good explaination","user":"U6A936746","ts":"1609937193.346700","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1609937202.000000"},"blocks":[{"type":"rich_text","block_id":"T/WV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes, there are lots of them, in Zygote itself even\nBut wish i had a good explaination"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"1030cea3-63cf-4dc9-8c1c-7d97db5380e9","type":"message","text":"Here is one\n<https://github.com/invenia/BlockDiagonals.jl/blob/ebc7050219ce028e4315fcbdf9ec59dceb7f72e9/src/blockdiagonal.jl#L20-L23>","user":"U6A936746","ts":"1609937256.347000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8F0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here is one\n"},{"type":"link","url":"https://github.com/invenia/BlockDiagonals.jl/blob/ebc7050219ce028e4315fcbdf9ec59dceb7f72e9/src/blockdiagonal.jl#L20-L23"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"f816ee70-0f74-4570-972f-bf2066da43c6","type":"message","text":"Cool! I look a bit more into those examples, and see if it leads me closer to something functional.","user":"U016VPPCQA1","ts":"1609937401.347200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"C2W","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Cool! I look a bit more into those examples, and see if it leads me closer to something functional."}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"4ec91cf8-476c-48b3-97dd-893b86ccb812","type":"message","text":"Do you know of somebody that you would recommend me to contact about this?","user":"U016VPPCQA1","ts":"1609937552.347400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"k0kP0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you know of somebody that you would recommend me to contact about this?"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"50aea913-0441-4a83-966a-f6bc7d0e8848","type":"message","text":"<@UC4QQPG4A> and <@U6PQP41C3>.\nbut <@U6PQP41C3> is super busy this week.","user":"U6A936746","ts":"1609938354.347600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FI+N","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UC4QQPG4A"},{"type":"text","text":" and "},{"type":"user","user_id":"U6PQP41C3"},{"type":"text","text":".\nbut "},{"type":"user","user_id":"U6PQP41C3"},{"type":"text","text":" is super busy this week."}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"cd3fd9da-953e-4140-8708-1bf554009dc1","type":"message","text":"This channel is good, though.","user":"U6A936746","ts":"1609938374.347800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VlWrU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This channel is good, though."}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"94c2af11-03e6-4ea0-b406-9e731ae43b01","type":"message","text":"<@UHDQQ4GN6> had to do a bunch of this for Hankel.jl i think?","user":"U6A936746","ts":"1609938418.348000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/XL","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UHDQQ4GN6"},{"type":"text","text":" had to do a bunch of this for Hankel.jl i think?"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"2f2fc9e9-70bd-40d3-a630-2415639df3d0","type":"message","text":"I've never understood why Zygote has this issue. In Hankel.jl, the only worrying constructor was one that computed constants needed to perform the Hankel transform. In principle, a user might want to AD that constructor, but it would probably be rare, so I just made it non-differentiable to prevent Zygote from erroring.","user":"UHDQQ4GN6","ts":"1609966049.353400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lBz2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I've never understood why Zygote has this issue. In Hankel.jl, the only worrying constructor was one that computed constants needed to perform the Hankel transform. In principle, a user might want to AD that constructor, but it would probably be rare, so I just made it non-differentiable to prevent Zygote from erroring."}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"e3dacd1d-05c2-402b-9afa-643b47dca3ba","type":"message","text":"Have anyone of you had the problem where the Zygote library don't recognize the `rrule` you have written. I think i have got a `rrule` that should cover the initialization of my custom type, but get the error `Need an adjoint for constructorDerivativeOperator{Float64,1,false,Float64,StaticArrays.SArray{Tuple{5},Float64,1,5},StaticArrays.SArray{Tuple{1},StaticArrays.SArray{Tuple{4},Float64,1,4},1,1},Array{Float64,1},Array{Float64,1}}. Gradient is of type Array{Float64,2}` when running the code.","user":"U016VPPCQA1","ts":"1610058943.361400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GPY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Have anyone of you had the problem where the Zygote library don't recognize the "},{"type":"text","text":"rrule","style":{"code":true}},{"type":"text","text":" you have written. I think i have got a "},{"type":"text","text":"rrule","style":{"code":true}},{"type":"text","text":" that should cover the initialization of my custom type, but get the error "},{"type":"text","text":"Need an adjoint for constructorDerivativeOperator{Float64,1,false,Float64,StaticArrays.SArray{Tuple{5},Float64,1,5},StaticArrays.SArray{Tuple{1},StaticArrays.SArray{Tuple{4},Float64,1,4},1,1},Array{Float64,1},Array{Float64,1}}. Gradient is of type Array{Float64,2}","style":{"code":true}},{"type":"text","text":" when running the code."}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"43e2ee71-8638-4b8f-887f-a1d816677ac3","type":"message","text":"If you are interective you <http://seem.to|seem.to> needto run `Zygote.refresh()`  after defining it even post Julia 1.3. we don't really know why. It has backedges to solve it","user":"U6A936746","ts":"1610059057.361600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0f7y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you are interective you "},{"type":"link","url":"http://seem.to","text":"seem.to"},{"type":"text","text":" needto run "},{"type":"text","text":"Zygote.refresh() ","style":{"code":true}},{"type":"text","text":" after defining it even post Julia 1.3. we don't really know why. It has backedges to solve it"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"b6ddf057-b452-492c-bfcc-1365f806c0d8","type":"message","text":"Otherwise check and double check you have the argument types right","user":"U6A936746","ts":"1610059091.361800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fPu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Otherwise check and double check you have the argument types right"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"b48fdebf-e87b-4dbf-aab0-b9ba8342d801","type":"message","text":"Esp note the need with constrictors to use `Type{&lt;:MyType}` not `typeof(MyType)`","user":"U6A936746","ts":"1610059175.362000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EvL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Esp note the need with constrictors to use "},{"type":"text","text":"Type{<:MyType}","style":{"code":true}},{"type":"text","text":" not "},{"type":"text","text":"typeof(MyType)","style":{"code":true}}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"33d1b549-eaab-40c8-a076-24e50f5953ba","type":"message","text":"^^^ Still gets me from time to time","user":"UHDQQ4GN6","ts":"1610059204.362200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pn5j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"^^^ Still gets me from time to time"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"1d0b5608-df33-4ff2-a1b4-83edfef05b2f","type":"message","text":"as for now, I have used f`unction rrule(::Type{DerivativeOperator}, derivative_order, approximation_order, dx, len, stencil_length, stencil_coefs, boundary_stencil_length, boundary_point_count, low_boundary_coefs, high_boundary_coefs, coefficients, coeff_func)`","user":"U016VPPCQA1","ts":"1610059211.362400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i/Hp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"as for now, I have used f"},{"type":"text","text":"unction rrule(::Type{DerivativeOperator}, derivative_order, approximation_order, dx, len, stencil_length, stencil_coefs, boundary_stencil_length, boundary_point_count, low_boundary_coefs, high_boundary_coefs, coefficients, coeff_func)","style":{"code":true}}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"0b4fef48-f32f-4d31-9cdf-eaa79ad4a9cc","type":"message","text":"No complex type parameters here, but the number of normal arguments is at least correct","user":"U016VPPCQA1","ts":"1610059263.362600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zwn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No complex type parameters here, but the number of normal arguments is at least correct"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"d11bd378-3b07-4893-8934-ea103458e6cb","type":"message","text":"(complex in the sense of advanced)","user":"U016VPPCQA1","ts":"1610059283.362800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XAX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(complex in the sense of advanced)"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"788093d5-f65b-49fc-b236-b736d2f2efdd","type":"message","text":"I think you may need `::Type{&lt;:DerivativeOperator}`, not `::Type{DerivativeOperator}`","user":"UHDQQ4GN6","ts":"1610059304.363000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zFNRg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think you may need "},{"type":"text","text":"::Type{<:DerivativeOperator}","style":{"code":true}},{"type":"text","text":", not "},{"type":"text","text":"::Type{DerivativeOperator}","style":{"code":true}}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746","reactions":[{"name":"point_up","users":["U6A936746"],"count":1}]},{"client_msg_id":"9ab247b5-a1d1-4e73-8019-6d8dbed1dea2","type":"message","text":"Ok, stoked if this works!","user":"U016VPPCQA1","ts":"1610059321.363300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"i+0v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, stoked if this works!"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746","reactions":[{"name":"crossed_fingers","users":["UHDQQ4GN6"],"count":1}]},{"client_msg_id":"7cc6d5f5-2644-45d1-bb70-6919060cb016","type":"message","text":"I think it actually worked!!! Some other error now, but thats progres","user":"U016VPPCQA1","ts":"1610059435.363600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WgEF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think it actually worked!!! Some other error now, but thats progres"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"ae357891-e4ab-4fc3-96b8-174a75311e16","type":"message","text":"Want to give me a quick explanation of the difference between with and without `&lt;:`? Is it something with `&lt;:` accepting subtypes of the type and not just the `DerivativeOperator` type?","user":"U016VPPCQA1","ts":"1610059580.363800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z=Lx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Want to give me a quick explanation of the difference between with and without "},{"type":"text","text":"<:","style":{"code":true}},{"type":"text","text":"? Is it something with "},{"type":"text","text":"<:","style":{"code":true}},{"type":"text","text":" accepting subtypes of the type and not just the "},{"type":"text","text":"DerivativeOperator","style":{"code":true}},{"type":"text","text":" type?"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"bbb21eda-cd92-4a0a-8765-8c01dd38afd9","type":"message","text":"It's because it has type parameters.","user":"U6A936746","ts":"1610059654.364000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TWESB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's because it has type parameters."}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746"},{"client_msg_id":"017009de-8f3e-4a41-bd37-873b7d56d9b5","type":"message","text":"So yeah it basically has subtypes for the different values those parameters could be set to","user":"U6A936746","ts":"1610059711.364200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FMpSX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So yeah it basically has subtypes for the different values those parameters could be set to"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746","reactions":[{"name":"raised_hands","users":["U016VPPCQA1"],"count":1}]},{"client_msg_id":"b01855ef-6da8-47b6-9f1b-a7447f54fea4","type":"message","text":"Thanks for the help guys! The code runs now, will check if the results are correct tomorrow :sweat_smile:","user":"U016VPPCQA1","ts":"1610059832.364500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yE/E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for the help guys! The code runs now, will check if the results are correct tomorrow "},{"type":"emoji","name":"sweat_smile"}]}]}],"thread_ts":"1609934912.345400","parent_user_id":"U6A936746","reactions":[{"name":"conga_parrot","users":["UHDQQ4GN6"],"count":1}]}]