[{"client_msg_id":"129d5da5-e016-477e-add5-efa6855fdebe","type":"message","text":"```gs = gradient(inp) do hidden_out\n    tmp_gs = (gradient(ps) do\n        Flux.Losses.logitcrossentropy(tail_layers(inp), targ_c)\n    end)\n    tmp_gs[tmp_gs.params[3]][3, 6]\nend```\nBut the `getindex` of `tmp_gs` seemed unable to be differentiated.","user":"U0197S1773K","ts":"1614323389.114300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ze5mL","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"gs = gradient(inp) do hidden_out\n    tmp_gs = (gradient(ps) do\n        Flux.Losses.logitcrossentropy(tail_layers(inp), targ_c)\n    end)\n    tmp_gs[tmp_gs.params[3]][3, 6]\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"But the "},{"type":"text","text":"getindex","style":{"code":true}},{"type":"text","text":" of "},{"type":"text","text":"tmp_gs","style":{"code":true}},{"type":"text","text":" seemed unable to be differentiated."}]}]}],"thread_ts":"1614323389.114300","reply_count":7,"reply_users_count":3,"latest_reply":"1614330349.116600","reply_users":["U6A936746","U0197S1773K","U69BL50BF"],"subscribed":false},{"client_msg_id":"07a94e1e-66ec-41b1-af1a-49ebc9cac433","type":"message","text":"Use two different ADs.","user":"U6A936746","ts":"1614326933.114500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Gt5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Use two different ADs."}]}]}],"thread_ts":"1614323389.114300","parent_user_id":"U0197S1773K"},{"client_msg_id":"4f79be09-6de7-4f90-ad43-4c90891f1c24","type":"message","text":"Could you please give me more instructions?","user":"U0197S1773K","ts":"1614327080.114700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Kv2hR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could you please give me more instructions?"}]}]}],"thread_ts":"1614323389.114300","parent_user_id":"U0197S1773K"},{"client_msg_id":"1c441a77-8d3b-4dc9-80e7-aa078adf2844","type":"message","text":"Use ForwardDiff.jl or ReverseDiff.jl for one of the gradient calls.\nUse Zygote for the other.","user":"U6A936746","ts":"1614327434.114900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oCo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Use ForwardDiff.jl or ReverseDiff.jl for one of the gradient calls.\nUse Zygote for the other."}]}]}],"thread_ts":"1614323389.114300","parent_user_id":"U0197S1773K"},{"client_msg_id":"19775b51-310b-44a4-a2b9-c459e305fa50","type":"message","text":"Thanks so much! I've tried `ForwardDiff.gradient(inp)` , and it works, but `ReverseDiff` will give\n```ERROR: MethodError: no method matching meanpool!(::Array{ReverseDiff.TrackedReal{Float32, Float32, ReverseDiff.TrackedArray{Float32, Float32, 4, Array{Float32, 4}, Array{Float32, 4}}}, 5}, ::ReverseDiff.TrackedArray{Float32, Float32, 5, Array{Float32, 5}, Array{Float32, 5}}, ::PoolDims{3, (8, 8, 1), (8, 8, 1), (0, 0, 0, 0, 0, 0), (1, 1, 1)})```\n","user":"U0197S1773K","ts":"1614328339.116000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4uimk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks so much! I've tried "},{"type":"text","text":"ForwardDiff.gradient(inp)","style":{"code":true}},{"type":"text","text":" , and it works, but "},{"type":"text","text":"ReverseDiff","style":{"code":true}},{"type":"text","text":" will give\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ERROR: MethodError: no method matching meanpool!(::Array{ReverseDiff.TrackedReal{Float32, Float32, ReverseDiff.TrackedArray{Float32, Float32, 4, Array{Float32, 4}, Array{Float32, 4}}}, 5}, ::ReverseDiff.TrackedArray{Float32, Float32, 5, Array{Float32, 5}, Array{Float32, 5}}, ::PoolDims{3, (8, 8, 1), (8, 8, 1), (0, 0, 0, 0, 0, 0), (1, 1, 1)})"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1614323389.114300","parent_user_id":"U0197S1773K"},{"client_msg_id":"50a99241-e184-4e51-8b50-ac4e615a89bf","type":"message","text":"Try swapping the order","user":"U6A936746","ts":"1614328607.116200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RluS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Try swapping the order"}]}]}],"thread_ts":"1614323389.114300","parent_user_id":"U0197S1773K"},{"client_msg_id":"6bd619ae-d4ff-440a-b1a0-db9e45c04f1a","type":"message","text":"In general Zygote inside ForwardDiff outside should be fastest","user":"U6A936746","ts":"1614328629.116400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B7+ly","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In general Zygote inside ForwardDiff outside should be fastest"}]}]}],"thread_ts":"1614323389.114300","parent_user_id":"U0197S1773K"},{"client_msg_id":"972199d5-e1f4-4f5e-95ca-5d1d72f106b5","type":"message","text":"yes. There is no such think as a second order gradient, but FrowardDiff over Zygote is a good way to calculate a Hessian.","user":"U69BL50BF","ts":"1614330349.116600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JBWB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes. There is no such think as a second order gradient, but FrowardDiff over Zygote is a good way to calculate a Hessian."}]}]}],"thread_ts":"1614323389.114300","parent_user_id":"U0197S1773K"}]