[{"client_msg_id":"f23b265a-0dc9-4482-b8fb-62dbe9c9cbd4","type":"message","text":"Can I trust `@code_warntype` when using Zygote code ? My results are full of `Any` and `Union{Nothing, Tuple}`\n\nAnd if it's accurate, how do I prevent return types of Any","user":"UKJSNT1QR","ts":"1616753033.099200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sBFV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can I trust "},{"type":"text","text":"@code_warntype","style":{"code":true}},{"type":"text","text":" when using Zygote code ? My results are full of "},{"type":"text","text":"Any","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"Union{Nothing, Tuple}","style":{"code":true}},{"type":"text","text":"\n\nAnd if it's accurate, how do I prevent return types of Any"}]}]}],"thread_ts":"1616753033.099200","reply_count":4,"reply_users_count":2,"latest_reply":"1616754642.100100","reply_users":["U6A936746","UKJSNT1QR"],"is_locked":false,"subscribed":false},{"client_msg_id":"2e158154-935d-4695-9092-e8fbe89d85bf","type":"message","text":"1. Yes\n2. Difficult in general. Zygote (like Cassette) easily breaks type inference.  It's a thing Diffractor will fix one day.\nThough don't worry about the small unions. Those are fine","user":"U6A936746","ts":"1616754310.099300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UZfq2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"1. Yes\n2. Difficult in general. Zygote (like Cassette) easily breaks type inference.  It's a thing Diffractor will fix one day.\nThough don't worry about the small unions. Those are fine"}]}]}],"thread_ts":"1616753033.099200","parent_user_id":"UKJSNT1QR"},{"type":"message","text":"Well it runs reasonably well so I'm not that worried. But there's more red than blue. My monkey brain doesn't like that :slightly_smiling_face:","files":[{"id":"F01SJ3SF82F","created":1616754398,"timestamp":1616754398,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"UKJSNT1QR","editable":false,"size":93275,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01SJ3SF82F/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01SJ3SF82F/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01SJ3SF82F-874c035c99/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01SJ3SF82F-874c035c99/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01SJ3SF82F-874c035c99/image_360.png","thumb_360_w":360,"thumb_360_h":192,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01SJ3SF82F-874c035c99/image_480.png","thumb_480_w":480,"thumb_480_h":256,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01SJ3SF82F-874c035c99/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01SJ3SF82F-874c035c99/image_720.png","thumb_720_w":720,"thumb_720_h":384,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01SJ3SF82F-874c035c99/image_800.png","thumb_800_w":800,"thumb_800_h":426,"original_w":897,"original_h":478,"thumb_tiny":"AwAZADCmaQmlGD1FBUCgBufrSU7A9DSYoASilxRigBy0pB9qaOhptAC5pKKKACiiigD/2Q==","permalink":"https://julialang.slack.com/files/UKJSNT1QR/F01SJ3SF82F/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01SJ3SF82F-5092de92d3","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"jRlyc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well it runs reasonably well so I'm not that worried. But there's more red than blue. My monkey brain doesn't like that "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"user":"UKJSNT1QR","display_as_bot":false,"ts":"1616754403.099500","thread_ts":"1616753033.099200","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"fc448a0f-3ff5-4192-a8bd-f256325b1826","type":"message","text":"For relatively simple code\n\n```function batchdiv(f, x)\n    y, back = Zygote.pullback(f, x)\n    o = Zygote.@ignore fill!(similar(y), 1)\n    dfdx = back(o)[1]\n    y, dfdx\nend```","user":"UKJSNT1QR","ts":"1616754478.099900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3AlZy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For relatively simple code\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function batchdiv(f, x)\n    y, back = Zygote.pullback(f, x)\n    o = Zygote.@ignore fill!(similar(y), 1)\n    dfdx = back(o)[1]\n    y, dfdx\nend"}]}]}],"thread_ts":"1616753033.099200","parent_user_id":"UKJSNT1QR"},{"client_msg_id":"65939ca9-914f-472b-943e-ba81db70a1c6","type":"message","text":"Is there any way to help the type inference / provide hints ?","user":"UKJSNT1QR","ts":"1616754642.100100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YUT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there any way to help the type inference / provide hints ?"}]}]}],"thread_ts":"1616753033.099200","parent_user_id":"UKJSNT1QR"}]