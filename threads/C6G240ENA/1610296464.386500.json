[{"client_msg_id":"c48258d6-77dc-4416-8708-e29ffd1e641c","type":"message","text":"Has the adjoint/ChainRules rule for a 2D (more generally n-D) array comprehension been implemented for Zygote?","user":"U01G1P8A46S","ts":"1610296464.386500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IJK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Has the adjoint/ChainRules rule for a 2D (more generally n-D) array comprehension been implemented for Zygote?"}]}]}],"thread_ts":"1610296464.386500","reply_count":9,"reply_users_count":3,"latest_reply":"1610300135.388500","reply_users":["U6A936746","U01G1P8A46S","UD0NS8PDF"],"subscribed":false},{"client_msg_id":"5add2923-881c-4091-95b2-78fe79ebb2c9","type":"message","text":"Why do you ask?\nZygote can AD array comprehensions, if that is your question.","user":"U6A936746","ts":"1610296908.386700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W5bm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Why do you ask?\nZygote can AD array comprehensions, if that is your question."}]}]}],"thread_ts":"1610296464.386500","parent_user_id":"U01G1P8A46S"},{"client_msg_id":"50dec34e-e415-42ad-a1ee-abdba09d8cc4","type":"message","text":"under the hood all array comprehensions are mixtures of `Base.Generator`, `collect`,  and `product` and `Base.Flatten`\nSome of those definately have direct rules.\nOthers I am not sure about, but they are decomposable into something that has rules if they don’t themselves","user":"U6A936746","ts":"1610297090.386900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WLU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"under the hood all array comprehensions are mixtures of "},{"type":"text","text":"Base.Generator","style":{"code":true}},{"type":"text","text":", "},{"type":"text","text":"collect","style":{"code":true}},{"type":"text","text":",  and "},{"type":"text","text":"product","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"Base.Flatten","style":{"code":true}},{"type":"text","text":"\nSome of those definately have direct rules.\nOthers I am not sure about, but they are decomposable into something that has rules if they don’t themselves"}]}]}],"thread_ts":"1610296464.386500","parent_user_id":"U01G1P8A46S"},{"client_msg_id":"78487ebc-e73a-4eae-a09a-5bee9194869c","type":"message","text":"I'm facing the following error with this snippet:\n```julia&gt; test(n) = sum([ i+j for i in 1:n^2, j in 1:n ])\ntest (generic function with 1 method)\n\njulia&gt; test(5)\n2000\n\njulia&gt; gradient(test, 5)\nERROR: Need an adjoint for constructor Base.Iterators.ProductIterator{Tuple{UnitRange{Int64},UnitRange{Int64}}}. Gradient is of type Array{Tuple{Int64,Int64},2}```","user":"U01G1P8A46S","ts":"1610297898.387100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"b2ki","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm facing the following error with this snippet:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> test(n) = sum([ i+j for i in 1:n^2, j in 1:n ])\ntest (generic function with 1 method)\n\njulia> test(5)\n2000\n\njulia> gradient(test, 5)\nERROR: Need an adjoint for constructor Base.Iterators.ProductIterator{Tuple{UnitRange{Int64},UnitRange{Int64}}}. Gradient is of type Array{Tuple{Int64,Int64},2}"}]}]}],"thread_ts":"1610296464.386500","parent_user_id":"U01G1P8A46S"},{"client_msg_id":"7e032b16-5734-4829-8e5a-96c6e84bcb22","type":"message","text":"Huh lol, looks like I was wrong and not everything has it.\nin particular `product` doesn’t.","user":"U6A936746","ts":"1610297983.387400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cq2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Huh lol, looks like I was wrong and not everything has it.\nin particular "},{"type":"text","text":"product","style":{"code":true}},{"type":"text","text":" doesn’t."}]}]}],"thread_ts":"1610296464.386500","parent_user_id":"U01G1P8A46S","reactions":[{"name":"tired_face","users":["U01G1P8A46S"],"count":1}]},{"client_msg_id":"225c27e0-82a6-4a66-bca3-566ba9c55bc6","type":"message","text":"What's its adjoint? Something like a big sum over the dimensions?","user":"U01G1P8A46S","ts":"1610298512.387700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6kYS7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What's its adjoint? Something like a big sum over the dimensions?"}]}]}],"thread_ts":"1610296464.386500","parent_user_id":"U01G1P8A46S"},{"client_msg_id":"4f8229b0-d345-4591-9c13-e619456b4060","type":"message","text":"yeah","user":"U6A936746","ts":"1610298619.387900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qu2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah"}]}]}],"thread_ts":"1610296464.386500","parent_user_id":"U01G1P8A46S"},{"client_msg_id":"c334785c-9650-49d3-b1a8-e8e509afc34c","type":"message","text":"You can probably replace it with `map` if you want.","user":"U6A936746","ts":"1610298688.388100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uNXC6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can probably replace it with "},{"type":"text","text":"map","style":{"code":true}},{"type":"text","text":" if you want."}]}]}],"thread_ts":"1610296464.386500","parent_user_id":"U01G1P8A46S"},{"client_msg_id":"77d4fc5c-62e8-4533-be57-e710de4a5c8c","type":"message","text":"Won't that result in the same problem? You'll have to write `map(x -&gt; f(x[1], x[2]), product(xs, xs))`","user":"U01G1P8A46S","ts":"1610298967.388300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"K7b=9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Won't that result in the same problem? You'll have to write "},{"type":"text","text":"map(x -> f(x[1], x[2]), product(xs, xs))","style":{"code":true}}]}]}],"thread_ts":"1610296464.386500","parent_user_id":"U01G1P8A46S"},{"client_msg_id":"447a3426-b208-4869-82d6-c5da953abcfb","type":"message","text":"There’s a PR which makes some products work","user":"UD0NS8PDF","ts":"1610300135.388500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2LhOK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There’s a PR which makes some products work"}]}]}],"thread_ts":"1610296464.386500","parent_user_id":"U01G1P8A46S"}]