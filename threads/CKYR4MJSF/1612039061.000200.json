[{"type":"message","text":"Shanghai'ed from <#C6G240ENA|autodiff>","user":"UMY1LV01G","ts":"1612039061.000200","team":"T68168MUP","attachments":[{"fallback":"[January 30th, 2021 12:36 PM] brianchen.czq: Not to go too off-topic, but how much of Mjolnir is subsumed by AbstractInterpreter? I assume most of the IRTools functionality?","ts":"1612038982.097100","author_id":"UMY1LV01G","author_subname":"Brian Chen","channel_id":"C6G240ENA","channel_name":"autodiff","is_msg_unfurl":true,"is_reply_unfurl":true,"text":"Not to go too off-topic, but how much of Mjolnir is subsumed by AbstractInterpreter? I assume most of the IRTools functionality?","author_name":"Brian Chen","author_link":"https://julialang.slack.com/team/UMY1LV01G","author_icon":"https://secure.gravatar.com/avatar/1fe3b1cccafbafd8f91252f30d2b06b0.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-48.png","mrkdwn_in":["text"],"color":"D0D0D0","from_url":"https://julialang.slack.com/archives/C6G240ENA/p1612038982097100?thread_ts=1612031768084800&cid=C6G240ENA","is_share":true,"footer":"From a thread in #autodiff"}],"blocks":[{"type":"rich_text","block_id":"1q3t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Shanghai'ed from "},{"type":"channel","channel_id":"C6G240ENA"}]}]}],"thread_ts":"1612039061.000200","reply_count":28,"reply_users_count":6,"latest_reply":"1612061861.006500","reply_users":["U6A936746","U8D9768Q6","U67BJLYCS","UDGT4PM41","U6A0PD8CR","UMY1LV01G"],"subscribed":false},{"client_msg_id":"82df976e-54e0-4cde-a190-885c6b1a97d6","type":"message","text":"I have no idea about anything to do with AbstractInterpreter except that it is being used for some GPU stuff.","user":"U6A936746","ts":"1612039121.000400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J/+=c","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have no idea about anything to do with AbstractInterpreter except that it is being used for some GPU stuff."}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"f3608168-d4cd-4352-8388-9cdc35f0682d","type":"message","text":"In particular i don’t know what it can and can’t do","user":"U6A936746","ts":"1612039136.000600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LxFD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In particular i don’t know what it can and can’t do"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"f996f5ce-5991-4c90-9eac-cc724d1eb020","type":"message","text":"I think AbstractInterpreter would be the correct platform to implement Mjolnir on.","user":"U8D9768Q6","ts":"1612039170.000800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z6H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think AbstractInterpreter would be the correct platform to implement Mjolnir on."}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"4d4dcbfd-0f25-4500-98ac-fdf9c145c706","type":"message","text":"but Mjolnir is kind of abandonned when Mike left.\nIt’s cool proof of concept but anything not shown in the demo at juliacon is probably broken.\n(e.g. last i tried, tuples were broken)","user":"U6A936746","ts":"1612039194.001000","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1612039200.000000"},"blocks":[{"type":"rich_text","block_id":"FB0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but Mjolnir is kind of abandonned when Mike left.\nIt’s cool proof of concept but anything not shown in the demo at juliacon is probably broken.\n(e.g. last i tried, tuples were broken)"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"088873d9-7118-41c0-8fa4-ffd55c95f02b","type":"message","text":"Mjolnir is basically doing it's own hand rolled abstract interpretation using things like eval and code instrospection. This means it can't be used in the local scope or in like generated functions and such, so many times when you'd want to use it you can't imo.","user":"U8D9768Q6","ts":"1612039293.001300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9H7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Mjolnir is basically doing it's own hand rolled abstract interpretation using things like eval and code instrospection. This means it can't be used in the local scope or in like generated functions and such, so many times when you'd want to use it you can't imo."}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"4e62f2f2-25cb-48b3-9840-af4321ed8288","type":"message","text":"(assuming it was actually functional)","user":"U8D9768Q6","ts":"1612039317.001500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VBrF5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(assuming it was actually functional)"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"f44a98f8-b604-4a10-b291-61445f89cab1","type":"message","text":"It is semi functional","user":"U67BJLYCS","ts":"1612042749.001700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9=Cn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It is semi functional"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"e1ad7e69-ad03-45d6-a6b6-aacfbd81ebd0","type":"message","text":"the thing you can't do with AbsInt yet is to extend the lattice","user":"U67BJLYCS","ts":"1612042780.001900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BJ8A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the thing you can't do with AbsInt yet is to extend the lattice"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"1c6afb24-a853-4261-b50a-7b9a30d6cdf5","type":"message","text":"AbsInt is used for GPUCompiler, KernelCompiler, and YaoCompiler as a parameterized compiler pipeline","user":"U67BJLYCS","ts":"1612042828.002100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"j4hQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"AbsInt is used for GPUCompiler, KernelCompiler, and YaoCompiler as a parameterized compiler pipeline"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"e7115100-2f1e-40ca-a03d-88aa52dd82ff","type":"message","text":"only GPUCompiler usage is production ready I would say","user":"U67BJLYCS","ts":"1612042865.002300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"S816P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"only GPUCompiler usage is production ready I would say"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"7c38b413-cb60-4981-bc39-ab7696f0a40b","type":"message","text":"YaoCompiler has the deepest set of changes so far","user":"U67BJLYCS","ts":"1612042883.002500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"69k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"YaoCompiler has the deepest set of changes so far"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"de32213c-d284-47d6-8616-8b0f98a10e15","type":"message","text":"and KernelCompiler is a good end to end example of how to take Julia code and compile and execute it","user":"U67BJLYCS","ts":"1612042914.002700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2kk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and KernelCompiler is a good end to end example of how to take Julia code and compile and execute it"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"3c7a9ae0-bc02-4676-bc09-08cd8561ce70","type":"message","text":"but I haven't gotten around to do many of the customizations that I want to do","user":"U67BJLYCS","ts":"1612042933.002900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oR0oN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but I haven't gotten around to do many of the customizations that I want to do"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"725cb6c5-cda7-40e8-a832-a53a1cb62ccf","type":"message","text":"KernelCompiler is meant to be the CPU backend for KernelAbstractions","user":"U67BJLYCS","ts":"1612042945.003100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BYdqo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"KernelCompiler is meant to be the CPU backend for KernelAbstractions"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"30e09b6d-58f2-4e4e-8327-70ea8fda8065","type":"message","text":"&gt; It is semi functional\nI was talking about Mjolnir","user":"U8D9768Q6","ts":"1612044445.003300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=+fp","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"It is semi functional"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I was talking about Mjolnir"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"9341f65d-8ff8-49f3-a34d-41f126f1e6c6","type":"message","text":"Me too","user":"U67BJLYCS","ts":"1612044452.003500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7x+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Me too"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G","reactions":[{"name":"confusedpuppy","users":["U6A936746"],"count":1}]},{"client_msg_id":"aa950e8d-1c83-4d30-b293-0ac1df9f687b","type":"message","text":"Oh, okay","user":"U8D9768Q6","ts":"1612044466.003700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J9lg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, okay"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"7b18c137-d7af-4ce8-8a4e-85a552cdfdf7","type":"message","text":"<@U67BJLYCS> but GPUCompiler etc doesn’t use Mjolnier?\nWhich bits were you talking about Mjolnir and which bits were you talking about AbsInt?","user":"U6A936746","ts":"1612045471.003900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UlO","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U67BJLYCS"},{"type":"text","text":" but GPUCompiler etc doesn’t use Mjolnier?\nWhich bits were you talking about Mjolnir and which bits were you talking about AbsInt?"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"13e2e4d1-a869-4327-ab02-8b49470b47bd","type":"message","text":"Or was it all AbsInt, except the “It is semi functional”?","user":"U6A936746","ts":"1612045502.004200","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1612045508.000000"},"blocks":[{"type":"rich_text","block_id":"/Mx1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or was it all AbsInt, except the “It is semi functional”?"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"0b588bdd-c5dd-4c84-afb9-4fcd974b6da0","type":"message","text":"&gt; Or was it all AbsInt, except the “It is semi functional”\nJup.","user":"U67BJLYCS","ts":"1612045729.004500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/XW9","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"Or was it all AbsInt, except the “It is semi functional”"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nJup."}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"b0299036-1ef5-4301-9fd0-2587f168178c","type":"message","text":"<@U6A0PD8CR> is kernelcompiler a better target for your static compilation work ?","user":"UDGT4PM41","ts":"1612051779.004800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RQzMA","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6A0PD8CR"},{"type":"text","text":" is kernelcompiler a better target for your static compilation work ?"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"7a6e8966-a128-437d-abeb-e87ea0543673","type":"message","text":"No, KernelCompiler is a direct descendent of MCAnalyzer/(NativeTarget@GPUCompiler), but it has the inherent assumption of using OrcJIT + julia runtime being loaded.","user":"U67BJLYCS","ts":"1612051897.005200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fXtq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No, KernelCompiler is a direct descendent of MCAnalyzer/(NativeTarget@GPUCompiler), but it has the inherent assumption of using OrcJIT + julia runtime being loaded."}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G","reactions":[{"name":"+1","users":["UDGT4PM41"],"count":1}]},{"client_msg_id":"427dbccf-6398-44cf-a130-1ac2abcfcd51","type":"message","text":"Idk, probably not? Plain GPUCompiler works fine right now, but I haven't really been working on it much.","user":"U6A0PD8CR","ts":"1612051902.005400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wr8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Idk, probably not? Plain GPUCompiler works fine right now, but I haven't really been working on it much."}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"8c7c89c1-cbf9-448f-ac45-1fd919687315","type":"message","text":"What would extending the lattice allow ? This is the type lattice, right ? (Or inference lattice )","user":"UDGT4PM41","ts":"1612052053.005700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0S0MQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What would extending the lattice allow ? This is the type lattice, right ? (Or inference lattice )"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"0eed83cc-c344-4628-bb1a-e720af9ae67f","type":"message","text":"the inference lattice for examples see <https://www.di.ens.fr/~cousot/AI/#tth_sEc4>","user":"U67BJLYCS","ts":"1612052495.005900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JWE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the inference lattice for examples see "},{"type":"link","url":"https://www.di.ens.fr/~cousot/AI/#tth_sEc4"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"203b076f-2865-4969-8118-c19b141f527d","type":"message","text":"Oh cool.","user":"UDGT4PM41","ts":"1612053843.006100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sKBrA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh cool."}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"6ef570c1-8386-4431-aa31-816af7f5998e","type":"message","text":"Trying to make sense of how AbsInt might fit into partial evaluation, is it fair to say that most of the IRTools untyped IR generation can be replaced by passes like in <https://github.com/vchuravy/KernelCompiler.jl/blob/65c659e21c24ab9f3b8b5c9ec6afe73c0ce9aa86/src/optimize.jl>, but custom types like <https://github.com/FluxML/Mjolnir.jl/blob/master/docs/types.md> will still be required?","user":"UMY1LV01G","ts":"1612060772.006300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7v4Qz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Trying to make sense of how AbsInt might fit into partial evaluation, is it fair to say that most of the IRTools untyped IR generation can be replaced by passes like in "},{"type":"link","url":"https://github.com/vchuravy/KernelCompiler.jl/blob/65c659e21c24ab9f3b8b5c9ec6afe73c0ce9aa86/src/optimize.jl"},{"type":"text","text":", but custom types like "},{"type":"link","url":"https://github.com/FluxML/Mjolnir.jl/blob/master/docs/types.md"},{"type":"text","text":" will still be required?"}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"},{"client_msg_id":"9cf96a36-0c02-41af-b291-ee8178edd929","type":"message","text":"As I understand it, those types are merely part of the user facing bits.\nPartial evaluation is is just really just constant folding. (Though Mjolnir takes it a bit further, it doesn't have to)\n\nI think a relatively nice interface would be a function that takes a closure, and returns a plain function.\nSo  it forces all the closed variables down into the code so it isn't a closure anymore.","user":"U6A936746","ts":"1612061861.006500","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1612061909.000000"},"blocks":[{"type":"rich_text","block_id":"j9T6+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"As I understand it, those types are merely part of the user facing bits.\nPartial evaluation is is just really just constant folding. (Though Mjolnir takes it a bit further, it doesn't have to)\n\nI think a relatively nice interface would be a function that takes a closure, and returns a plain function.\nSo  it forces all the closed variables down into the code so it isn't a closure anymore."}]}]}],"thread_ts":"1612039061.000200","parent_user_id":"UMY1LV01G"}]