[{"client_msg_id":"a0c70155-54aa-4266-bfce-642164dc5aa1","type":"message","text":"Just out of curiosity: On the systems have access to, allocations larger than 16 KiB take two operations:\n```julia&gt; @time Vector{UInt8}(undef, 2^14 - 1);\n  0.000005 seconds (1 allocation: 16.125 KiB)\n\njulia&gt; @time Vector{UInt8}(undef, 2^14);\n  0.000006 seconds (2 allocations: 16.141 KiB)\n\njulia&gt; @time Vector{UInt8}(undef, 2^40);\n  0.008465 seconds (2 allocations: 1.000 TiB, 99.61% gc time)```\nDoes this mean that the array is no longer contiguous in memory? What sets this limit? Hardware, OS, LLVM, or julia?","user":"U01DD7Z0D89","ts":"1608742654.177700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sbMEx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Just out of curiosity: On the systems have access to, allocations larger than 16 KiB take two operations:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time Vector{UInt8}(undef, 2^14 - 1);\n  0.000005 seconds (1 allocation: 16.125 KiB)\n\njulia> @time Vector{UInt8}(undef, 2^14);\n  0.000006 seconds (2 allocations: 16.141 KiB)\n\njulia> @time Vector{UInt8}(undef, 2^40);\n  0.008465 seconds (2 allocations: 1.000 TiB, 99.61% gc time)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Does this mean that the array is no longer contiguous in memory? What sets this limit? Hardware, OS, LLVM, or julia?"}]}]}],"thread_ts":"1608742654.177700","reply_count":2,"reply_users_count":2,"latest_reply":"1608765156.178100","reply_users":["U0179G7FG4F","U67D54KS8"],"subscribed":false},{"client_msg_id":"12a06d8e-736d-4553-aa8f-938a8f1d3fd5","type":"message","text":"I think this has to do with page size. OS deals with small allocations differently than big ones. The array is still memory contiguous, it's just that the way we allocate the memory is different.","user":"U0179G7FG4F","ts":"1608742835.177800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"c7D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think this has to do with page size. OS deals with small allocations differently than big ones. The array is still memory contiguous, it's just that the way we allocate the memory is different."}]}]}],"thread_ts":"1608742654.177700","parent_user_id":"U01DD7Z0D89","reactions":[{"name":"floppy_disk","users":["U01DD7Z0D89"],"count":1}]},{"client_msg_id":"47ec54cc-5164-4fda-9e0e-d502c3057f21","type":"message","text":"<https://github.com/JuliaLang/julia/blob/46487aee8a300f0d183074b3978bae378f7c6cbc/src/options.h#L17>","user":"U67D54KS8","ts":"1608765156.178100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z4rpH","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaLang/julia/blob/46487aee8a300f0d183074b3978bae378f7c6cbc/src/options.h#L17"}]}]}],"thread_ts":"1608742654.177700","parent_user_id":"U01DD7Z0D89","reactions":[{"name":"+1","users":["U0179G7FG4F","UH8A351DJ"],"count":2}]}]