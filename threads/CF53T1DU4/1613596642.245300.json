[{"client_msg_id":"ab3f7a05-3711-42d3-b97d-9de42916424e","type":"message","text":"Does anyone have experience benchmarking code in CI? I have manual benchmarks and I would like to add performance tests, but this feels like a terrible idea due to how inconsistent the benchmarks may be. The median time per sample is about 11 microseconds and CI would be GitHub actions. I would want to write a test that verifies the median sample time is 11 +/- 1 uS and fails if it falls outside that range.","user":"U01537M2E9W","ts":"1613596642.245300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SBs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does anyone have experience benchmarking code in CI? I have manual benchmarks and I would like to add performance tests, but this feels like a terrible idea due to how inconsistent the benchmarks may be. The median time per sample is about 11 microseconds and CI would be GitHub actions. I would want to write a test that verifies the median sample time is 11 +/- 1 uS and fails if it falls outside that range."}]}]}],"thread_ts":"1613596642.245300","reply_count":6,"reply_users_count":3,"latest_reply":"1613603202.246700","reply_users":["UCZ7VBGUD","U6A936746","U01537M2E9W"],"subscribed":false},{"client_msg_id":"746bb090-ac98-42eb-962d-a8b9da0067a3","type":"message","text":"there's <https://github.com/tkf/BenchmarkCI.jl>. I saw someone saying they had pretty good luck with it. I had benchmarks run in CI for Convex.jl but I didn't have the auto-comment feature or anything, so you had to go into the logs and check and in practice I never did, so it was kind of useless and I removed it to save time","user":"UCZ7VBGUD","ts":"1613597124.245400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ao9C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there's "},{"type":"link","url":"https://github.com/tkf/BenchmarkCI.jl"},{"type":"text","text":". I saw someone saying they had pretty good luck with it. I had benchmarks run in CI for Convex.jl but I didn't have the auto-comment feature or anything, so you had to go into the logs and check and in practice I never did, so it was kind of useless and I removed it to save time"}]}]}],"thread_ts":"1613596642.245300","parent_user_id":"U01537M2E9W"},{"client_msg_id":"7c665433-04c5-424b-ba1b-931c70c0b5c5","type":"message","text":"I tend to just benchmark allocations.\nThey are a good proxy for speed","user":"U6A936746","ts":"1613600402.245600","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1613600406.000000"},"blocks":[{"type":"rich_text","block_id":"j8=8o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tend to just benchmark allocations.\nThey are a good proxy for speed"}]}]}],"thread_ts":"1613596642.245300","parent_user_id":"U01537M2E9W"},{"client_msg_id":"642f421f-5c8b-49c5-a0f0-4637d7e3ad16","type":"message","text":"This code doesn't make any allocations","user":"U01537M2E9W","ts":"1613600587.245900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Tcbal","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This code doesn't make any allocations"}]}]}],"thread_ts":"1613596642.245300","parent_user_id":"U01537M2E9W","reactions":[{"name":"+1","users":["U6A936746"],"count":1}]},{"client_msg_id":"ceaa2e74-b087-4b57-be61-4f8bd3187999","type":"message","text":"11 microseconds is many for something that doesn't allocate","user":"U6A936746","ts":"1613603038.246100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8Jv6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"11 microseconds is many for something that doesn't allocate"}]}]}],"thread_ts":"1613596642.245300","parent_user_id":"U01537M2E9W"},{"client_msg_id":"b2666659-1367-4311-b819-cd20bb69dbe6","type":"message","text":"Anyway, the benchmark test I would and have added for that case is to prove it still doesn't allocate.","user":"U6A936746","ts":"1613603084.246400","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1613603099.000000"},"blocks":[{"type":"rich_text","block_id":"07Iif","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Anyway, the benchmark test I would and have added for that case is to prove it still doesn't allocate."}]}]}],"thread_ts":"1613596642.245300","parent_user_id":"U01537M2E9W"},{"client_msg_id":"ac7424d3-6a6b-48b1-94ee-f3ce7b09e576","type":"message","text":"With more realistically sized data the runtime is closer to 35 uS. Would be much longer if it did allocate. Thanks for the advice","user":"U01537M2E9W","ts":"1613603202.246700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GeQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"With more realistically sized data the runtime is closer to 35 uS. Would be much longer if it did allocate. Thanks for the advice"}]}]}],"thread_ts":"1613596642.245300","parent_user_id":"U01537M2E9W"}]