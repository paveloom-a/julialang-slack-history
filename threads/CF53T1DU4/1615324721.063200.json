[{"client_msg_id":"10557393-6712-46e7-a0d4-a8c913bd04ba","type":"message","text":"I'm just doing something like:\n```for i in 1:length(vals)\n    old = vals[i]\n    vals[i] = MyStruct(old.a, old.b, old.c + 10)\nend```","user":"UCNPT22MQ","ts":"1615324721.063200","team":"T68168MUP","edited":{"user":"UCNPT22MQ","ts":"1615324757.000000"},"blocks":[{"type":"rich_text","block_id":"yLLr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm just doing something like:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"for i in 1:length(vals)\n    old = vals[i]\n    vals[i] = MyStruct(old.a, old.b, old.c + 10)\nend"}]}]}],"thread_ts":"1615324721.063200","reply_count":24,"reply_users_count":3,"latest_reply":"1615325657.068300","reply_users":["UH24GRBLL","UCNPT22MQ","U0179G7FG4F"],"subscribed":false},{"client_msg_id":"d5903758-313c-414e-bf91-382e10ba96db","type":"message","text":"what does `MyStruct` look like in your case?","user":"UH24GRBLL","ts":"1615324806.063400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qMoe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what does "},{"type":"text","text":"MyStruct","style":{"code":true}},{"type":"text","text":" look like in your case?"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"4708cc5b-b6f3-4f94-b6c3-967b4a4a91b7","type":"message","text":"might simply be an alignment issue","user":"UH24GRBLL","ts":"1615324812.063600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GB1Ca","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"might simply be an alignment issue"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"075cbadf-6d22-4bca-bcb3-d9e72fe32050","type":"message","text":"also, in a function or not?","user":"UH24GRBLL","ts":"1615324822.063800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6hsj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"also, in a function or not?"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"97a447b4-97fb-4985-be75-5fd5ba67808f","type":"message","text":"ah, there may simply be an `@inbounds` missing","user":"UH24GRBLL","ts":"1615324889.064000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9nn6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, there may simply be an "},{"type":"text","text":"@inbounds","style":{"code":true}},{"type":"text","text":" missing"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ","reactions":[{"name":"thumbsup_all","users":["U0179G7FG4F"],"count":1}]},{"client_msg_id":"aa9ee86e-768f-4b13-b877-f150d8a4505f","type":"message","text":"Sorry, away from desk now. MyStruct is, say, Int, Float64, Int16\nAll in a function, with @inbounds &amp; @simd","user":"UCNPT22MQ","ts":"1615324932.064200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HMmN0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sorry, away from desk now. MyStruct is, say, Int, Float64, Int16\nAll in a function, with @inbounds & @simd"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"f1f94356-e57d-483a-9827-039d194e8dce","type":"message","text":"that's 144 bits - I'm surprised C++ scatters here","user":"UH24GRBLL","ts":"1615324980.064400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SKNIW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's 144 bits - I'm surprised C++ scatters here"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"3f086d9a-fc5a-4dd6-869a-30cc579269d1","type":"message","text":"Presumably the struct would pad to a multiple of word size though?","user":"UCNPT22MQ","ts":"1615325031.064600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Pp+u=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Presumably the struct would pad to a multiple of word size though?"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"3d70cfaf-4a71-44af-ba17-3f386a170320","type":"message","text":"In both languages?","user":"UCNPT22MQ","ts":"1615325036.064800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sAdu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In both languages?"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"71237a46-fefa-427f-bb38-5e4b520a07dd","type":"message","text":"iirc there's no automatic padding in julia","user":"UH24GRBLL","ts":"1615325042.065000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r4o","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"iirc there's no automatic padding in julia"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"16584a16-1d5e-4599-abcf-4d421bf0d44c","type":"message","text":"only 85% sure though","user":"UH24GRBLL","ts":"1615325057.065200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ayowl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"only 85% sure though"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"0d677470-724c-4ed9-8e32-5f5f97cf6b5e","type":"message","text":"you could also try `@avx` form LoopVectorization","user":"UH24GRBLL","ts":"1615325065.065400","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1615325071.000000"},"blocks":[{"type":"rich_text","block_id":"fFSrP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you could also try "},{"type":"text","text":"@avx","style":{"code":true}},{"type":"text","text":" form LoopVectorization"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"2b381e51-dd31-4804-8c0f-cd3d6999dcf4","type":"message","text":"Hmm, must be for it to be accessible in an array?","user":"UCNPT22MQ","ts":"1615325073.065700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cyu8P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm, must be for it to be accessible in an array?"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"870bb6c0-d6fc-461c-acef-0d0324ea0f1d","type":"message","text":"Clang is generating `vinserti128`","user":"UCNPT22MQ","ts":"1615325099.065900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zzfT=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Clang is generating "},{"type":"text","text":"vinserti128","style":{"code":true}}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"7ced9a42-a8f2-4d00-90fc-e6b5b51582f7","type":"message","text":"Sorry, I'm talking rubbish, it only needs to be a multiple of byte to have an address...","user":"UCNPT22MQ","ts":"1615325145.066100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dK6gJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sorry, I'm talking rubbish, it only needs to be a multiple of byte to have an address..."}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"b6709097-9c31-4a9a-a788-cb9b07e28f62","type":"message","text":"<@U6QF223TN> I'm pretty sure we do pad structs automatically to a multiple of the biggest element I don't think we pad between elements, but that's not relevant here.","user":"U0179G7FG4F","ts":"1615325148.066300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uXM=","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6QF223TN"},{"type":"text","text":" I'm pretty sure we do pad structs automatically to a multiple of the biggest element I don't think we pad between elements, but that's not relevant here."}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"0879febe-e81e-41a2-8aaa-2b9c3ddf24ba","type":"message","text":"I think you pinged the wrong person","user":"UH24GRBLL","ts":"1615325471.066600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YK4Eq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think you pinged the wrong person"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"f7980a44-52fb-4d57-ab4e-686c82511114","type":"message","text":"When I get back, I'll experiment with explicit padding fields","user":"UCNPT22MQ","ts":"1615325474.066800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+gv3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"When I get back, I'll experiment with explicit padding fields"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"c265f93e-51c7-45ec-8132-1031fc3a4f8e","type":"message","text":"I definitely remember some place where explicit padding fields allowed for more SIMD because of alignment","user":"UH24GRBLL","ts":"1615325519.067000","team":"T68168MUP","edited":{"user":"UH24GRBLL","ts":"1615325524.000000"},"blocks":[{"type":"rich_text","block_id":"xGgww","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I definitely remember some place where explicit padding fields allowed for more SIMD because of alignment"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"127e205b-d594-4299-9703-eca268a0f594","type":"message","text":"Yep, it makes sense and I hadn't thought of it. Not sure what the default padding in c++ is - do you?","user":"UCNPT22MQ","ts":"1615325546.067300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TkyFE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yep, it makes sense and I hadn't thought of it. Not sure what the default padding in c++ is - do you?"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"bf33a0ab-bf2c-4a4d-8ece-8177f33e016c","type":"message","text":"depends on the compiler","user":"UH24GRBLL","ts":"1615325555.067500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/ZH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"depends on the compiler"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"4c10a9db-8096-4aec-844e-1bfd64a8712e","type":"message","text":"Thanks for your help!","user":"UCNPT22MQ","ts":"1615325555.067700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iZo=D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for your help!"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"605530e7-93a3-421b-a4c6-7d8f20a67077","type":"message","text":"Ok","user":"UCNPT22MQ","ts":"1615325560.067900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KGJXs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"5bae5415-ebe9-45fb-b9a3-462748ac3c29","type":"message","text":"you can check godbolt though","user":"UH24GRBLL","ts":"1615325574.068100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ly8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you can check godbolt though"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"},{"client_msg_id":"c23d0cb7-0e65-489d-9120-a2630c2ab122","type":"message","text":"for more specific help, I guess we'd need more code :)","user":"UH24GRBLL","ts":"1615325657.068300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JC27","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for more specific help, I guess we'd need more code :)"}]}]}],"thread_ts":"1615324721.063200","parent_user_id":"UCNPT22MQ"}]