[{"client_msg_id":"bfc17385-c387-4ebd-81a6-22d858a191c2","type":"message","text":"Ok last question for now. Does anyone have a good idea how to, given an `d x n`  matrix `X`  (basically each column is a vector in my space), the pairwise difference matrix `d x n x n`  with entries:\n```Diff[:, i, j] = X[:, i] - X[:, j]```\nWhen taking the norm (i.e. calculating `dist[i, j] = || X[:, i] - X[:, j] ||^2`) using the `Distances.jl`  package gave me a huge speedup (16-fold) over the naive implementation of preallocating `dist`  and doing it in a loop","user":"U7PD3M3L5","ts":"1613040753.170700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D697","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok last question for now. Does anyone have a good idea how to, given an "},{"type":"text","text":"d x n","style":{"code":true}},{"type":"text","text":"  matrix "},{"type":"text","text":"X","style":{"code":true}},{"type":"text","text":"  (basically each column is a vector in my space), the pairwise difference matrix "},{"type":"text","text":"d x n x n","style":{"code":true}},{"type":"text","text":"  with entries:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Diff[:, i, j] = X[:, i] - X[:, j]"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"When taking the norm (i.e. calculating "},{"type":"text","text":"dist[i, j] = || X[:, i] - X[:, j] ||^2","style":{"code":true}},{"type":"text","text":") using the "},{"type":"text","text":"Distances.jl","style":{"code":true}},{"type":"text","text":"  package gave me a huge speedup (16-fold) over the naive implementation of preallocating "},{"type":"text","text":"dist","style":{"code":true}},{"type":"text","text":"  and doing it in a loop"}]}]}],"thread_ts":"1613040753.170700","reply_count":5,"reply_users_count":2,"latest_reply":"1613041594.176000","reply_users":["UD0NS8PDF","U7PD3M3L5"],"subscribed":false},{"client_msg_id":"8fdad7ce-915d-4361-8264-0b4c5a493316","type":"message","text":"It’s unlikely you can do this much faster than broadcasting. If writing this as `@cast Diff[μ, i, j] := X[μ, i] - X[μ, j]` sounds appealing then you may like TensorCast.jl.","user":"UD0NS8PDF","ts":"1613041262.173600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zK3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It’s unlikely you can do this much faster than broadcasting. If writing this as "},{"type":"text","text":"@cast Diff[μ, i, j] := X[μ, i] - X[μ, j]","style":{"code":true}},{"type":"text","text":" sounds appealing then you may like TensorCast.jl."}]}]}],"thread_ts":"1613040753.170700","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"16090b95-16ac-4551-9725-5d2a1a041222","type":"message","text":"will that just do for loops over all of the three variables?","user":"U7PD3M3L5","ts":"1613041397.174200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yW4+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"will that just do for loops over all of the three variables?"}]}]}],"thread_ts":"1613040753.170700","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"f8f06c42-dbaa-4094-bf8f-0aa90a954e4f","type":"message","text":"Yes. Well, it just does `D = X .- reshape(X, ?, 1, ?)` and lets Julia’s broadcasting decide what loops to write.","user":"UD0NS8PDF","ts":"1613041453.174400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1ZKZB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes. Well, it just does "},{"type":"text","text":"D = X .- reshape(X, ?, 1, ?)","style":{"code":true}},{"type":"text","text":" and lets Julia’s broadcasting decide what loops to write."}]}]}],"thread_ts":"1613040753.170700","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"a3d823f1-5a95-4216-9203-70d193ebfc7e","type":"message","text":"ok, I'll compare it to my current impl. Thanks!","user":"U7PD3M3L5","ts":"1613041548.175300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Xkw1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, I'll compare it to my current impl. Thanks!"}]}]}],"thread_ts":"1613040753.170700","parent_user_id":"U7PD3M3L5"},{"client_msg_id":"dc3edd1e-1775-4bee-99cc-e1a39fa6bc6c","type":"message","text":"Looks like a very cool package, if it even is efficient then :100:","user":"U7PD3M3L5","ts":"1613041594.176000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mKd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Looks like a very cool package, if it even is efficient then "},{"type":"emoji","name":"100"}]}]}],"thread_ts":"1613040753.170700","parent_user_id":"U7PD3M3L5"}]