[{"client_msg_id":"d3602c4b-f134-468b-8116-bcb46a1c322c","type":"message","text":"<@UAUPJLBQX> I was going through <https://juliasimd.github.io/LoopVectorization.jl/stable/examples/matrix_multiplication/#Matrix-Multiplication|this>  example in the `LoopVectorization.jl`  documentation for matrix multiplication and I don't understand why, but it is not updating my `C` output matrix.\n```N = 2\nA1 = rand(N, N)\nA2 = rand(N,N)\nA3 = similar(A1)\n\nfunction A_mul_B!(C, A, B)\n    @avx for n ∈ indices((C,B), 2), m ∈ indices((C,A), 1)\n        Cmn = zero(eltype(C))\n        for k ∈ indices((A,B), (2,1))\n            Cmn += C[m,k] * B[k,n]\n        end\n        C[m,n] = Cmn\n    end\nend\n\njulia&gt; A_mul_B!(A3, A1, A2)\n\njulia&gt; A3\n2×2 Matrix{Float64}:\n 6.22527e-310  9.15541e-310\n 6.22543e-310  9.15553e-310```\nIs this a bug?","user":"U013V2CFZAN","ts":"1617969888.151700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GTw","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UAUPJLBQX"},{"type":"text","text":" I was going through "},{"type":"link","url":"https://juliasimd.github.io/LoopVectorization.jl/stable/examples/matrix_multiplication/#Matrix-Multiplication","text":"this"},{"type":"text","text":"  example in the "},{"type":"text","text":"LoopVectorization.jl","style":{"code":true}},{"type":"text","text":"  documentation for matrix multiplication and I don't understand why, but it is not updating my "},{"type":"text","text":"C","style":{"code":true}},{"type":"text","text":" output matrix.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"N = 2\nA1 = rand(N, N)\nA2 = rand(N,N)\nA3 = similar(A1)\n\nfunction A_mul_B!(C, A, B)\n    @avx for n ∈ indices((C,B), 2), m ∈ indices((C,A), 1)\n        Cmn = zero(eltype(C))\n        for k ∈ indices((A,B), (2,1))\n            Cmn += C[m,k] * B[k,n]\n        end\n        C[m,n] = Cmn\n    end\nend\n\njulia> A_mul_B!(A3, A1, A2)\n\njulia> A3\n2×2 Matrix{Float64}:\n 6.22527e-310  9.15541e-310\n 6.22543e-310  9.15553e-310"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Is this a bug?"}]}]}],"thread_ts":"1617969888.151700","reply_count":8,"reply_users_count":2,"latest_reply":"1617978111.154200","reply_users":["U013V2CFZAN","UAUPJLBQX"],"is_locked":false,"subscribed":false},{"client_msg_id":"8e05346f-4286-4afd-bf28-992f7e07b384","type":"message","text":"ah yes, this line is wrong\n`Cmn += A[m,k] * B[k,n]`","user":"U013V2CFZAN","ts":"1617970478.151800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7JP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah yes, this line is wrong\n"},{"type":"text","text":"Cmn += A[m,k] * B[k,n]","style":{"code":true}}]}]}],"thread_ts":"1617969888.151700","parent_user_id":"U013V2CFZAN"},{"client_msg_id":"b7593635-1868-47b9-8520-f3c8e5c118b9","type":"message","text":"Ah, yes, `C[m,k] * B[k,n]`.","user":"UAUPJLBQX","ts":"1617977904.153000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"C+2k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, yes, "},{"type":"text","text":"C[m,k] * B[k,n]","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1617969888.151700","parent_user_id":"U013V2CFZAN"},{"client_msg_id":"f0249c93-a3b0-47fa-982c-3c46262f89fc","type":"message","text":"I made PR with that one line fix :slightly_smiling_face:","user":"U013V2CFZAN","ts":"1617977916.153200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dDmcC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I made PR with that one line fix "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1617969888.151700","parent_user_id":"U013V2CFZAN"},{"client_msg_id":"0a620bb3-3e0d-48b4-8216-e599b9335add","type":"message","text":"Thanks for catching it, merged it!","user":"UAUPJLBQX","ts":"1617977979.153400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wzBn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for catching it, merged it!"}]}]}],"thread_ts":"1617969888.151700","parent_user_id":"U013V2CFZAN"},{"client_msg_id":"72badcb2-4b88-4960-8121-0aac7bc7ccc4","type":"message","text":"I was a bit disappointed that it wasn't faster than BLAS on my matrix size :stuck_out_tongue:","user":"U013V2CFZAN","ts":"1617977999.153600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bUA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was a bit disappointed that it wasn't faster than BLAS on my matrix size "},{"type":"emoji","name":"stuck_out_tongue"}]}]}],"thread_ts":"1617969888.151700","parent_user_id":"U013V2CFZAN"},{"client_msg_id":"957a3ccf-2d9f-49de-a714-0ca755c819ac","type":"message","text":"denormals will do that","user":"UAUPJLBQX","ts":"1617978008.153800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7B9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"denormals will do that"}]}]}],"thread_ts":"1617969888.151700","parent_user_id":"U013V2CFZAN"},{"client_msg_id":"83ef7bef-6b95-4350-9123-2b62fad2236f","type":"message","text":"What's your matrix size?","user":"UAUPJLBQX","ts":"1617978015.154000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Fi8oP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What's your matrix size?"}]}]}],"thread_ts":"1617969888.151700","parent_user_id":"U013V2CFZAN"},{"client_msg_id":"983fe156-023f-4626-99e2-be18c24ed2cf","type":"message","text":"```julia&gt; size(J)\n(190459, 45)```","user":"U013V2CFZAN","ts":"1617978111.154200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EgB","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> size(J)\n(190459, 45)"}]}]}],"thread_ts":"1617969888.151700","parent_user_id":"U013V2CFZAN"}]