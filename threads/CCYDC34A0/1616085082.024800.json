[{"client_msg_id":"0f48988d-dafd-48f9-93c0-7c61b1613f07","type":"message","text":"Is there a recommended way to deal with the integrator terminating early in a bayesian differential equation model? i.e. something similar to this <https://diffeqparamestim.sciml.ai/dev/methods/optimization_based_methods/#Note-About-Loss-Functions>","user":"U01C1H3GLLU","ts":"1616085082.024800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DhEv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a recommended way to deal with the integrator terminating early in a bayesian differential equation model? i.e. something similar to this "},{"type":"link","url":"https://diffeqparamestim.sciml.ai/dev/methods/optimization_based_methods/#Note-About-Loss-Functions"}]}]}],"thread_ts":"1616085082.024800","reply_count":2,"reply_users_count":2,"latest_reply":"1616085609.025100","reply_users":["U8T9JUA5R","U01C1H3GLLU"],"is_locked":false,"subscribed":false},{"client_msg_id":"15b929dd-8f84-4ad3-b7e5-633d9f5149df","type":"message","text":"There's nothing special about Bayesian DEs in this respect, the general recommendations from DiffEq and Turing apply there as well. DiffEqBayes handles it in the following way: <https://github.com/SciML/DiffEqBayes.jl/blob/26a14b8783b46cda4b81822873d3327a41187721/src/turing_inference.jl#L39-L44> It checks the size of the solution but alternatively you could check the return code. In Turing you can exit early with a construct such as\n```if failure\n    Turing.@addlogprob! -Inf\n    return\nend\n.... # Other part of the model```\n","user":"U8T9JUA5R","ts":"1616085478.024900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rOb3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There's nothing special about Bayesian DEs in this respect, the general recommendations from DiffEq and Turing apply there as well. DiffEqBayes handles it in the following way: "},{"type":"link","url":"https://github.com/SciML/DiffEqBayes.jl/blob/26a14b8783b46cda4b81822873d3327a41187721/src/turing_inference.jl#L39-L44"},{"type":"text","text":" "},{"type":"text","text":"It","style":{"unlink":true}},{"type":"text","text":" checks the size of the solution but alternatively you could check the return code. In Turing you can exit early with a construct such as\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"if failure\n    Turing.@addlogprob! -Inf\n    return\nend\n.... # Other part of the model"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1616085082.024800","parent_user_id":"U01C1H3GLLU"},{"client_msg_id":"b0b822ee-a5ce-4fa7-926b-c7f3ca72d9ee","type":"message","text":"Thank you!  perfect :slightly_smiling_face:","user":"U01C1H3GLLU","ts":"1616085609.025100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ejG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you!  perfect "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1616085082.024800","parent_user_id":"U01C1H3GLLU"}]