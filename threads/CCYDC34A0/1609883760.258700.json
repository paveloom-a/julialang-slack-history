[{"client_msg_id":"48f993db-3b91-4e61-a831-983951c4e64b","type":"message","text":"I am getting this error message:\n`ERROR: TypeError: in typeassert, expected Float64, got a value of type ForwardDiff.Dual{Nothing,Float64,5}`\nwhen trying to run\n`chn = sample(model(a, b, c, d), HMC(0.1, 5), Nstep)`\nIt seems to be coming from\n`function weights!(a, b, w)`\n    `p1, p2 = a`\n    `for i in 1:20`\n        `w[i] = 0.5*(1 + ((b[i] - p1)/p2))`\n    `end`\n`end`\nthat gets called from inside the model. Could this be happening because something is nondifferentiable in this function? If so, which part is it exactly?","user":"UPK2KJ95Y","ts":"1609883760.258700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NDH2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am getting this error message:\n"},{"type":"text","text":"ERROR: TypeError: in typeassert, expected Float64, got a value of type ForwardDiff.Dual{Nothing,Float64,5}","style":{"code":true}},{"type":"text","text":"\nwhen trying to run\n"},{"type":"text","text":"chn = sample(model(a, b, c, d), HMC(0.1, 5), Nstep)","style":{"code":true}},{"type":"text","text":"\nIt seems to be coming from\n"},{"type":"text","text":"function weights!(a, b, w)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    p1, p2 = a","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    for i in 1:20","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"        w[i] = 0.5*(1 + ((b[i] - p1)/p2))","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    end","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"end","style":{"code":true}},{"type":"text","text":"\nthat gets called from inside the model. Could this be happening because something is nondifferentiable in this function? If so, which part is it exactly?"}]}]}],"thread_ts":"1609883760.258700","reply_count":1,"reply_users_count":1,"latest_reply":"1609884224.258800","reply_users":["UH08DT0JU"],"subscribed":false},{"client_msg_id":"2a2274a9-828a-4277-97a2-78c641fa6d98","type":"message","text":"I cannot say for certain based on the limited information you have provided, but most likely one of your variables needs to be initialized generically so that it can be a float or Dual. For example,  try something like\n```w = zeros(typeof(theta), n)```\nwhere theta is one of your parameters. you might need to do that for b as well","user":"UH08DT0JU","ts":"1609884224.258800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u/uEe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I cannot say for certain based on the limited information you have provided, but most likely one of your variables needs to be initialized generically so that it can be a float or Dual. For example,  try something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"w = zeros(typeof(theta), n)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"where theta is one of your parameters. you might need to do that for b as well"}]}]}],"thread_ts":"1609883760.258700","parent_user_id":"UPK2KJ95Y"}]