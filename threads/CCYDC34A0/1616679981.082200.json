[{"client_msg_id":"e7357155-8fb3-4582-92d3-d0c15cb046e4","type":"message","text":"Is there anything I can do to speed sampling up here?\n```M = 10\nlength(y) == 500\nTuring.setadbackend(:zygote)\n\nTuring.@model function gp_logistic(y)\n    u ~ MvNormal(ones(M))\n    f ~ MvNormal(A' * u, K̃)\n    for i in eachindex(y)\n        y[i] ~ Bernoulli(logistic(f[i]))\n    end\nend\n\ntrue_samples = Turing.sample(gp_logistic(y_01), Turing.NUTS(0.85), 1000)```\nNote that K̃ is already defined as `PDMat` Right now the expected time is 6hours :cry:","user":"U7QLM6E2E","ts":"1616679981.082200","team":"T68168MUP","edited":{"user":"U7QLM6E2E","ts":"1616679997.000000"},"blocks":[{"type":"rich_text","block_id":"3wAUH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there anything I can do to speed sampling up here?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"M = 10\nlength(y) == 500\nTuring.setadbackend(:zygote)\n\nTuring.@model function gp_logistic(y)\n    u ~ MvNormal(ones(M))\n    f ~ MvNormal(A' * u, K̃)\n    for i in eachindex(y)\n        y[i] ~ Bernoulli(logistic(f[i]))\n    end\nend\n\ntrue_samples = Turing.sample(gp_logistic(y_01), Turing.NUTS(0.85), 1000)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Note that K̃ is already defined as "},{"type":"text","text":"PDMat","style":{"code":true}},{"type":"text","text":" Right now the expected time is 6hours "},{"type":"emoji","name":"cry"}]}]}],"thread_ts":"1616679981.082200","reply_count":14,"reply_users_count":3,"latest_reply":"1616680722.085300","reply_users":["U8T9JUA5R","U7QLM6E2E","UC0SY9JFP"],"is_locked":false,"subscribed":false},{"client_msg_id":"5188ac27-8422-4fa5-bcdc-ec7d09c8f85d","type":"message","text":"Are `M`, `Ktilde`, etc. non-constant global variables?","user":"U8T9JUA5R","ts":"1616680204.082400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UCiO=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Are "},{"type":"text","text":"M","style":{"code":true}},{"type":"text","text":", "},{"type":"text","text":"Ktilde","style":{"code":true}},{"type":"text","text":", etc. non-constant global variables?"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E","reactions":[{"name":"100","users":["U7QLM6E2E"],"count":1}]},{"client_msg_id":"e7872e48-6b8e-431b-a3b9-2157e54604b7","type":"message","text":"Yep!","user":"U7QLM6E2E","ts":"1616680222.082600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mdwAg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yep!"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"d1622d7a-81f1-4722-bce0-f165633fa314","type":"message","text":"Yeah I should pass them as arguments indeed","user":"U7QLM6E2E","ts":"1616680245.082800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yUA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah I should pass them as arguments indeed"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"209551b4-4aca-4e2f-a9a5-ffdb5a621c0b","type":"message","text":"Or make them constant, if it makes a difference :slightly_smiling_face:","user":"U8T9JUA5R","ts":"1616680264.083000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PGwM8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or make them constant, if it makes a difference "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"a30cf32f-6a65-469a-8c3f-e744907f1055","type":"message","text":"Down to 1h! I always underestimate this non-const global thing","user":"U7QLM6E2E","ts":"1616680322.083200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0RWaU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Down to 1h! I always underestimate this non-const global thing"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E","reactions":[{"name":"tada","users":["U8T9JUA5R","UC0SY9JFP"],"count":2}]},{"client_msg_id":"0951af68-8190-442e-a899-934a1d57b6fb","type":"message","text":"It's so crazy that it brings a 6x slow-down","user":"U7QLM6E2E","ts":"1616680371.083400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3vL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's so crazy that it brings a 6x slow-down"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"2fc74c66-536c-4e03-96d0-c319cfcf74b1","type":"message","text":"You could also use `BernoulliLogit` in Turing but I assume it doesn't speed up sampling since there's no custom adjoint defined for it","user":"U8T9JUA5R","ts":"1616680389.083700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MoP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You could also use "},{"type":"text","text":"BernoulliLogit","style":{"code":true}},{"type":"text","text":" in Turing but I assume it doesn't speed up sampling since there's no custom adjoint defined for it"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"e2213278-7a50-4174-99e9-f49540dec926","type":"message","text":"Thanks!","user":"U7QLM6E2E","ts":"1616680390.083900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+7go","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks!"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"4595d0aa-2d53-4856-9b04-6968d51adcb6","type":"message","text":"But is it more stable? Like does it avoid the rejection problem when logistic(f) == 1 or 0 ?","user":"U7QLM6E2E","ts":"1616680449.084200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hKdGl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But is it more stable? Like does it avoid the rejection problem when logistic(f) == 1 or 0 ?"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"e4128d10-162b-42c8-8e34-f416aca365b3","type":"message","text":"Because of numerical accuracy","user":"U7QLM6E2E","ts":"1616680460.084400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r93","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Because of numerical accuracy"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"362cd0cc-b649-4176-970c-ae080a29944c","type":"message","text":"Hmm not sure I've never used it :smile:","user":"U8T9JUA5R","ts":"1616680471.084600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Bz3Ke","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm not sure I've never used it "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"7c12645a-1309-43a5-a465-12f723c97a37","type":"message","text":"Ah yeah it does seem more stable :D","user":"U7QLM6E2E","ts":"1616680547.084800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+gUxv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah yeah it does seem more stable :D"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"d938c115-00e9-4f6d-b8d6-cfe5b63573cc","type":"message","text":"Good to know!","user":"U7QLM6E2E","ts":"1616680557.085000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BCZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Good to know!"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"6c1433bd-8f0c-4c51-9567-518c7ca36f27","type":"message","text":"Yeah, always use BernoulliLogit!","user":"UC0SY9JFP","ts":"1616680722.085300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sNjou","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, always use BernoulliLogit!"}]}]}],"thread_ts":"1616679981.082200","parent_user_id":"U7QLM6E2E","reactions":[{"name":"+1","users":["U7QLM6E2E"],"count":1}]}]