[{"client_msg_id":"a532a28b-272a-4f9d-8d89-4f61f7e48edf","type":"message","text":"multiple hierarchical models with different sample sizes","user":"U01HSP1E1NW","ts":"1613004206.084100","team":"T68168MUP","edited":{"user":"U01HSP1E1NW","ts":"1613004670.000000"},"blocks":[{"type":"rich_text","block_id":"y7F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"multiple hierarchical models with different sample sizes"}]}]}],"thread_ts":"1613004206.084100","reply_count":1,"reply_users_count":1,"latest_reply":"1613004561.084900","reply_users":["U01HSP1E1NW"],"subscribed":false},{"client_msg_id":"f96f707d-d3d1-4803-a036-aa047684a359","type":"message","text":"Hi!\nsuppose I have the following array:\n\n`x = [4,5,6]`\n`std = [2,1,1]`\n\nI can use this model:\n\n`@model function Model2(x, std)`\n    `n = size(x)[1]`\n    `theta_m ~ Normal(0, 100)`\n    `sigma_m ~ Gamma(1, 5)`\n    `theta ~ filldist(Normal(theta_m, sigma_m), n)`\n    `x ~ arraydist(Normal.(theta, std))`\n`end`\n\nBut what happens whenI have multiple item in each array with different lengths and want to use it on the same model?\n\nExample:\n`x = [2,3,4] [4,5,6,7] [1,2]`\n`std = ..`\neach item in x should have a unique set of parameters exactly like the one above\nI was thinking on something like that :\n\n`@model function Model(x, std)`\n    `n = size(x)[1]`\n    `theta_m ~ filldist(Normal(0, 100), n)`\n    `sigma_m ~ filldist(Gamma(1, 5), n)`\n    `for i in x`\n        `theta ~ filldist(arraydist(Normal.(theta_m, sigma_m)), size(i)[1])`\n        `i ~ arraydist(Normal.(theta, std))`\n    `end`\n`end`\nAny ideas of a nice way to do that?","user":"U01HSP1E1NW","ts":"1613004561.084900","team":"T68168MUP","edited":{"user":"U01HSP1E1NW","ts":"1613004821.000000"},"blocks":[{"type":"rich_text","block_id":"52=9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi!\nsuppose I have the following array:\n\n"},{"type":"text","text":"x = [4,5,6]","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"std = [2,1,1]","style":{"code":true}},{"type":"text","text":"\n\nI can use this model:\n\n"},{"type":"text","text":"@model function Model2(x, std)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    n = size(x)[1]","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    theta_m ~ Normal(0, 100)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    sigma_m ~ Gamma(1, 5)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    theta ~ filldist(Normal(theta_m, sigma_m), n)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    x ~ arraydist(Normal.(theta, std))","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"end","style":{"code":true}},{"type":"text","text":"\n\nBut what happens whenI have multiple item in each array with different lengths and want to use it on the same model?\n\nExample:\n"},{"type":"text","text":"x = [2,3,4] [4,5,6,7] [1,2]","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"std = ..","style":{"code":true}},{"type":"text","text":"\neach item in x should have a unique set of parameters exactly like the one above\nI was thinking on something like that :\n\n"},{"type":"text","text":"@model function Model(x, std)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    n = size(x)[1]","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    theta_m ~ filldist(Normal(0, 100), n)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    sigma_m ~ filldist(Gamma(1, 5), n)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    for i in x","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"        theta ~ filldist(arraydist(Normal.(theta_m, sigma_m)), size(i)[1])","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"        i ~ arraydist(Normal.(theta, std))","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    end","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"end","style":{"code":true}},{"type":"text","text":"\nAny ideas of a nice way to do that?"}]}]}],"thread_ts":"1613004206.084100","parent_user_id":"U01HSP1E1NW"}]