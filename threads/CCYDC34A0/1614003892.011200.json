[{"client_msg_id":"3f5a4d5a-b518-4a8a-abc9-eb6062f4d27d","type":"message","text":"Hi,\nI’m just running through the Bayesian Diff Eq tutorial and am getting an error with the reverse diff part:\n\n`ERROR: LoadError: UndefVarError: SensitivityInterpolation not defined`\n\nAnybody else come across this before and know how to fix? I’ll leave more detail in a comment","user":"U01M641BZEY","ts":"1614003892.011200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IfA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi,\nI’m just running through the Bayesian Diff Eq tutorial and am getting an error with the reverse diff part:\n\n"},{"type":"text","text":"ERROR: LoadError: UndefVarError: SensitivityInterpolation not defined","style":{"code":true}},{"type":"text","text":"\n\nAnybody else come across this before and know how to fix? I’ll leave more detail in a comment"}]}]}],"thread_ts":"1614003892.011200","reply_count":17,"reply_users_count":3,"latest_reply":"1614006823.014600","reply_users":["U01M641BZEY","U69BL50BF","U01H36BUDJB"],"subscribed":false},{"client_msg_id":"199f69ea-0077-4e2e-a954-c7c11af66ca0","type":"message","text":"`using Turing, Distributions, DifferentialEquations` \n`function lotka_volterra(du,u,p,t)`\n    `x, y = u`\n    `α, β, γ, δ  = p`\n    `du[1] = (α - β*y)x # dx =`\n    `du[2] = (δ*x - γ)y # dy =` \n  `end`\n\n`prob1 = ODEProblem(lotka_volterra,u0,(0.0,10.0),p)`\n`sol1 = solve(prob1,Tsit5(),saveat=0.1)`\n`odedata = Array(sol1) + 0.8 * randn(size(Array(sol1)))`\n\n`using Zygote, DiffEqSensitivity`\n`Turing.setadbackend(:zygote)`\n`prob1 = ODEProblem(lotka_volterra,u0,(0.0,10.0),p)`\n\n`@model function fitlv(data, prob)`\n    `σ ~ InverseGamma(2, 3)`\n    `α ~ truncated(Normal(1.5,0.5),0.5,2.5)`\n    `β ~ truncated(Normal(1.2,0.5),0,2)`\n    `γ ~ truncated(Normal(3.0,0.5),1,4)`\n    `δ ~ truncated(Normal(1.0,0.5),0,2)`\n    `p = [α,β,γ,δ]`\n    `prob = remake(prob, p=p)`\n    `predicted = solve(prob,saveat=0.1,sensealg=InterpolatingAdjoint(autojacvec=ReverseDiffVJP(true)))`\n    `for i = 1:length(predicted)`\n        `data[:,i] ~ MvNormal(predicted[i], σ)`\n    `end`\n`end;`\n\n`model = fitlv(odedata, prob1)`\n`chain = sample(model, NUTS(.65),1000)`","user":"U01M641BZEY","ts":"1614004064.011300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"42xa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"using Turing, Distributions, DifferentialEquations ","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"function lotka_volterra(du,u,p,t)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    x, y = u","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    α, β, γ, δ  = p","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    du[1] = (α - β*y)x # dx =","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    du[2] = (δ*x - γ)y # dy = ","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"  end","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"prob1 = ODEProblem(lotka_volterra,u0,(0.0,10.0),p)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"sol1 = solve(prob1,Tsit5(),saveat=0.1)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"odedata = Array(sol1) + 0.8 * randn(size(Array(sol1)))","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"using Zygote, DiffEqSensitivity","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"Turing.setadbackend(:zygote)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"prob1 = ODEProblem(lotka_volterra,u0,(0.0,10.0),p)","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"@model function fitlv(data, prob)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    σ ~ InverseGamma(2, 3)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    α ~ truncated(Normal(1.5,0.5),0.5,2.5)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    β ~ truncated(Normal(1.2,0.5),0,2)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    γ ~ truncated(Normal(3.0,0.5),1,4)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    δ ~ truncated(Normal(1.0,0.5),0,2)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    p = [α,β,γ,δ]","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    prob = remake(prob, p=p)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    predicted = solve(prob,saveat=0.1,sensealg=InterpolatingAdjoint(autojacvec=ReverseDiffVJP(true)))","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    for i = 1:length(predicted)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"        data[:,i] ~ MvNormal(predicted[i], σ)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"    end","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"end;","style":{"code":true}},{"type":"text","text":"\n\n"},{"type":"text","text":"model = fitlv(odedata, prob1)","style":{"code":true}},{"type":"text","text":"\n"},{"type":"text","text":"chain = sample(model, NUTS(.65),1000)","style":{"code":true}}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"035dcacc-c93e-42c0-b9f7-1bd61e2dbbb1","type":"message","text":"what version of DiffEqBase?","user":"U69BL50BF","ts":"1614005070.011500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Kw7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what version of DiffEqBase?"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"a3479742-9f44-45fe-bc67-aa60f2f56e79","type":"message","text":"what Julia version?","user":"U69BL50BF","ts":"1614005078.011700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OirlA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what Julia version?"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"0a3d8406-4794-426f-adef-b756348ae1c4","type":"message","text":"julia version is 1.5.3","user":"U01M641BZEY","ts":"1614005630.011900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2+RJ8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"julia version is 1.5.3"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"8036137b-43ea-4e77-b9df-f28607f60743","type":"message","text":"] status doesnt show DiffEqBase","user":"U01M641BZEY","ts":"1614005638.012100","team":"T68168MUP","edited":{"user":"U01M641BZEY","ts":"1614005661.000000"},"blocks":[{"type":"rich_text","block_id":"XDPm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"] status doesnt show DiffEqBase"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"c1ded179-9cc5-4703-9331-c59a98e06c59","type":"message","text":"`using DiffEqSensitivity` ?","user":"U01H36BUDJB","ts":"1614005699.012400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"23nrw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"using DiffEqSensitivity","style":{"code":true}},{"type":"text","text":" ?"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"1c098971-6e6e-4156-8ca6-732ac063583d","type":"message","text":"and also add `DiffEqBase`","user":"U01H36BUDJB","ts":"1614005724.012600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xR5R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and also add "},{"type":"text","text":"DiffEqBase","style":{"code":true}}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"1629ab3e-f017-4c40-ac9e-90770b01a573","type":"message","text":"yup, I’m using DiffEqSensitivity","user":"U01M641BZEY","ts":"1614005733.012800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vpfv5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yup, I’m using DiffEqSensitivity"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"999a141f-08db-4d8c-824c-61498712aaba","type":"message","text":"ok will do","user":"U01M641BZEY","ts":"1614005737.013000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"aTmB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok will do"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"39dbca1f-84c2-4b3a-a1ae-0c3fd67b3000","type":"message","text":"should be there already, I'd think though","user":"U01H36BUDJB","ts":"1614005740.013200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zi7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"should be there already, I'd think though"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"e5dab862-a162-426c-9d18-efc1a5d1aab3","type":"message","text":"ive just run it with `using DiffEqBase`  (v6.57.5)","user":"U01M641BZEY","ts":"1614006190.013400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ahE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ive just run it with "},{"type":"text","text":"using DiffEqBase","style":{"code":true}},{"type":"text","text":"  (v6.57.5)"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"b9af6bbf-9a24-426d-a36d-7ed490be9d23","type":"message","text":"and get the same error","user":"U01M641BZEY","ts":"1614006196.013600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MpXQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and get the same error"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"910b4794-7890-48d8-a9e4-af65d2d8a966","type":"message","text":"that might need a hotfix","user":"U69BL50BF","ts":"1614006733.013800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wnLYl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that might need a hotfix"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"460a5190-04fe-44e5-9f55-b7d52b84e917","type":"message","text":"I'll put something in in a few hours.","user":"U69BL50BF","ts":"1614006743.014000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZNtQ4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'll put something in in a few hours."}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"16a2f2e6-8f9d-44e5-ab70-2293cd9bf74b","type":"message","text":"can you try this branch? <https://github.com/SciML/DiffEqBase.jl/pull/645>","user":"U69BL50BF","ts":"1614006774.014200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QCS9y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you try this branch? "},{"type":"link","url":"https://github.com/SciML/DiffEqBase.jl/pull/645"}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"c4d98c06-ad96-4556-875d-4ba298348a73","type":"message","text":"`]add DiffEqBase#sensitivity_interpolation`","user":"U69BL50BF","ts":"1614006803.014400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bs2dM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"]add DiffEqBase#sensitivity_interpolation","style":{"code":true}}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"},{"client_msg_id":"e7ba87fb-878c-43d7-92e7-1fa4831c539a","type":"message","text":"sure thing. Will do it now.","user":"U01M641BZEY","ts":"1614006823.014600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jB825","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sure thing. Will do it now."}]}]}],"thread_ts":"1614003892.011200","parent_user_id":"U01M641BZEY"}]