[{"client_msg_id":"5fdcced9-aa47-46ff-bcd2-e2e5c8fbe98e","type":"message","text":"Could someone help with : <https://discourse.julialang.org/t/sampling-from-power-posterior/54924>","user":"U7QLM6E2E","ts":"1612881181.074600","team":"T68168MUP","attachments":[{"service_name":"JuliaLang","title":"Sampling from power posterior","title_link":"https://discourse.julialang.org/t/sampling-from-power-posterior/54924","text":"Hey, I was wondering if someone could guide me (or direct me to the relevant code) on how to sample from the power posterior given a Turing model. By power posterior, I mean the posterior to modified joint : p(x|y; b) \\propto p(y|x)^b p(x), where b \\in [0,1].","fallback":"JuliaLang: Sampling from power posterior","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/2X/1/12829a7ba92b924d4ce81099cbf99785bee9b405.png","fields":[{"title":"Reading time","value":"1 mins :clock2:","short":true},{"title":"Likes","value":"3 :heart:","short":true}],"ts":1612876144,"from_url":"https://discourse.julialang.org/t/sampling-from-power-posterior/54924","thumb_width":408,"thumb_height":263,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/sampling-from-power-posterior/54924"}],"blocks":[{"type":"rich_text","block_id":"MNZsE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could someone help with : "},{"type":"link","url":"https://discourse.julialang.org/t/sampling-from-power-posterior/54924"}]}]}],"thread_ts":"1612881181.074600","reply_count":17,"reply_users_count":3,"latest_reply":"1612894296.079800","reply_users":["UC0SY9JFP","U7QLM6E2E","U85JBUGGP"],"subscribed":false},{"client_msg_id":"4d05f432-9d6a-44d5-9dee-ac34f7600015","type":"message","text":"Does sampling from a power posterior not simply mean to multiply the log p in the `tilde_observe` functions with some factor?\n\n<https://github.com/TuringLang/DynamicPPL.jl/blob/9043d657a7d1580ba24c19e7f7128f5edd53bda5/src/context_implementations.jl#L79-L106>","user":"UC0SY9JFP","ts":"1612881553.074900","team":"T68168MUP","edited":{"user":"UC0SY9JFP","ts":"1612881627.000000"},"blocks":[{"type":"rich_text","block_id":"wpPn7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does sampling from a power posterior not simply mean to multiply the log p in the "},{"type":"text","text":"tilde_observe","style":{"code":true}},{"type":"text","text":" functions with some factor?\n\n"},{"type":"link","url":"https://github.com/TuringLang/DynamicPPL.jl/blob/9043d657a7d1580ba24c19e7f7128f5edd53bda5/src/context_implementations.jl#L79-L106"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"0580215b-9f5c-4ea6-a600-823882210c80","type":"message","text":"Yeah that does sound right! I mean I know one can even call `loglikelihood` and `logprior` but my problem is how to pass all this to a sampler.","user":"U7QLM6E2E","ts":"1612881642.075200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tlh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah that does sound right! I mean I know one can even call "},{"type":"text","text":"loglikelihood","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"logprior","style":{"code":true}},{"type":"text","text":" but my problem is how to pass all this to a sampler."}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"f7fd4677-35de-414a-9f73-276d8426c3ea","type":"message","text":"Define a context?","user":"UC0SY9JFP","ts":"1612882105.075400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BxMOr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Define a context?"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"c8a3c203-ef59-42f4-815e-309c90c583cb","type":"message","text":"Yep <@U85JBUGGP> answer seems to be what I look for. I am not familiar with context but I will figure out!","user":"U7QLM6E2E","ts":"1612882233.075600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AHka7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yep "},{"type":"user","user_id":"U85JBUGGP"},{"type":"text","text":" answer seems to be what I look for. I am not familiar with context but I will figure out!"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E","reactions":[{"name":"+1","users":["UC0SY9JFP"],"count":1}]},{"client_msg_id":"51ae1cba-e90a-4946-afda-d44fda200b2a","type":"message","text":"I am sorry but I  could not find how to define a context, is there an example somewhere?","user":"U7QLM6E2E","ts":"1612893507.077300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"O0H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am sorry but I  could not find how to define a context, is there an example somewhere?"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"806325f6-f8c3-40aa-97c1-69606386d3f8","type":"message","text":"Ah no I found it by digging in DynamicPPL","user":"U7QLM6E2E","ts":"1612893684.077500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NFWi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah no I found it by digging in DynamicPPL"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"ab5bf2b4-b657-434f-aa83-daf58d8c39e9","type":"message","text":"It's something like\n```@model function mymodel(y)\n...\nend\ny = zeros(N)\nm = mymodel(y, DynamicPPL.MiniBatchContext(;batch_size=10, npoints=100)```","user":"U7QLM6E2E","ts":"1612893753.077700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w7Okg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's something like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@model function mymodel(y)\n...\nend\ny = zeros(N)\nm = mymodel(y, DynamicPPL.MiniBatchContext(;batch_size=10, npoints=100)"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"c7a21457-8648-481a-8258-b6a61c98f793","type":"message","text":"look at the MAP code in Turing","user":"U85JBUGGP","ts":"1612894122.077900","team":"T68168MUP","edited":{"user":"U85JBUGGP","ts":"1612894167.000000"},"blocks":[{"type":"rich_text","block_id":"oVm9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"look at the MAP code in Turing"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"0266118c-ef58-4057-8cc4-21a2600bc0c9","type":"message","text":"you can set the context there","user":"U85JBUGGP","ts":"1612894128.078100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wzm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you can set the context there"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"2657c573-dc7f-4451-b5e0-ab403439ca8b","type":"message","text":"don’t set the kwargs, just use the inner constructor of MiniBatchContext and set the scalar directly","user":"U85JBUGGP","ts":"1612894159.078300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yck72","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"don’t set the kwargs, just use the inner constructor of MiniBatchContext and set the scalar directly"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"98e1b72c-4647-41e6-a4f1-f5d02f821153","type":"message","text":"I was actually planning to create an alias constructor to avoid confusion","user":"U7QLM6E2E","ts":"1612894202.078600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Smh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was actually planning to create an alias constructor to avoid confusion"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"8d531a61-d6de-458f-a099-f8e29ae01862","type":"message","text":"<https://github.com/TuringLang/Turing.jl/blob/master/src/modes/ModeEstimation.jl#L117>","user":"U85JBUGGP","ts":"1612894207.078800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DDJoT","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/TuringLang/Turing.jl/blob/master/src/modes/ModeEstimation.jl#L117"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"2c1ef3c6-a036-496c-b9b9-997a19c1bd8c","type":"message","text":"Thanks a lot!!!","user":"U7QLM6E2E","ts":"1612894215.079000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"y/kBG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks a lot!!!"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"f971c89d-8308-42c8-8820-6eb1fc5465b5","type":"message","text":"no worries :slightly_smiling_face:","user":"U85JBUGGP","ts":"1612894232.079200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oAE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no worries "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"04d6f410-c7fa-430c-b41c-3898fbafe86c","type":"message","text":"the inner constructor works though, no need for a new one","user":"U85JBUGGP","ts":"1612894246.079400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ADpW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the inner constructor works though, no need for a new one"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"},{"client_msg_id":"cb890b7f-f901-4a06-b924-7b0484dbed81","type":"message","text":"`MiniBatchContext(DefaultContext(), scalar)`","user":"U85JBUGGP","ts":"1612894261.079600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mfP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"MiniBatchContext(DefaultContext(), scalar)","style":{"code":true}}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E","reactions":[{"name":"+1","users":["U7QLM6E2E"],"count":1}]},{"client_msg_id":"e47a4e98-ed41-4fb3-b987-c5de78228dc9","type":"message","text":"this constructor is defined by default when defining the struct","user":"U85JBUGGP","ts":"1612894296.079800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"usk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this constructor is defined by default when defining the struct"}]}]}],"thread_ts":"1612881181.074600","parent_user_id":"U7QLM6E2E"}]