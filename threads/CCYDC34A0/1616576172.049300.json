[{"type":"message","text":"Apologies if this is a basic question - I am trying do do bayesian inference on a DE (with NUTS) and I am running into a problem that sometimes the sampling appears to get \"stuck\" while at other times the sampling seems to behave as expected. I've attached two screen shots at a small number of iterations showing this - The only thing I changed when running was the number of iterations. Are there any simple issues that could be the cause of this? I assume it's a modelling issue :disappointed:","files":[{"id":"F01SMF5HQ65","created":1616575876,"timestamp":1616575876,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U01C1H3GLLU","editable":false,"size":45278,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01SMF5HQ65/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01SMF5HQ65/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01SMF5HQ65-2e16f1c962/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01SMF5HQ65-2e16f1c962/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01SMF5HQ65-2e16f1c962/image_360.png","thumb_360_w":360,"thumb_360_h":91,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01SMF5HQ65-2e16f1c962/image_480.png","thumb_480_w":480,"thumb_480_h":122,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01SMF5HQ65-2e16f1c962/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01SMF5HQ65-2e16f1c962/image_720.png","thumb_720_w":720,"thumb_720_h":182,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01SMF5HQ65-2e16f1c962/image_800.png","thumb_800_w":800,"thumb_800_h":203,"thumb_960":"https://files.slack.com/files-tmb/T68168MUP-F01SMF5HQ65-2e16f1c962/image_960.png","thumb_960_w":960,"thumb_960_h":243,"original_w":1019,"original_h":258,"thumb_tiny":"AwAMADDSBoyKXFFACZoFFGKAFopPxpfxoA//2Q==","permalink":"https://julialang.slack.com/files/U01C1H3GLLU/F01SMF5HQ65/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01SMF5HQ65-d7d5b9c51f","is_starred":false,"has_rich_preview":false},{"id":"F01SYLNL08Y","created":1616575890,"timestamp":1616575890,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U01C1H3GLLU","editable":false,"size":35024,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01SYLNL08Y/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01SYLNL08Y/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01SYLNL08Y-5f7663b8db/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01SYLNL08Y-5f7663b8db/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01SYLNL08Y-5f7663b8db/image_360.png","thumb_360_w":360,"thumb_360_h":91,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01SYLNL08Y-5f7663b8db/image_480.png","thumb_480_w":480,"thumb_480_h":122,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01SYLNL08Y-5f7663b8db/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01SYLNL08Y-5f7663b8db/image_720.png","thumb_720_w":720,"thumb_720_h":182,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01SYLNL08Y-5f7663b8db/image_800.png","thumb_800_w":800,"thumb_800_h":203,"thumb_960":"https://files.slack.com/files-tmb/T68168MUP-F01SYLNL08Y-5f7663b8db/image_960.png","thumb_960_w":960,"thumb_960_h":243,"original_w":1019,"original_h":258,"thumb_tiny":"AwAMADDRJ5p1GKMUAFJnmlpD0oAWik/GgdetAH//2Q==","permalink":"https://julialang.slack.com/files/U01C1H3GLLU/F01SYLNL08Y/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01SYLNL08Y-1c818c7c96","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"CUWm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Apologies if this is a basic question - I am trying do do bayesian inference on a DE (with NUTS) and I am running into a problem that sometimes the sampling appears to get \"stuck\" while at other times the sampling seems to behave as expected. I've attached two screen shots at a small number of iterations showing this - The only thing I changed when running was the number of iterations. Are there any simple issues that could be the cause of this? I assume it's a modelling issue "},{"type":"emoji","name":"disappointed"}]}]}],"user":"U01C1H3GLLU","ts":"1616576172.049300","thread_ts":"1616576172.049300","reply_count":2,"reply_users_count":2,"latest_reply":"1616577328.055000","reply_users":["U01C2AJ9F63","UHDQQ4GN6"],"is_locked":false,"subscribed":false},{"client_msg_id":"b9caa3f5-c041-42be-9622-591dca6df5d6","type":"message","text":"Hmm, the first thing I notice is that the scales vary. The scale in the second image is much much smaller. It's essentially as if zoomed in a lot. I would try to run multiple chains as well when debugging these kind of issues, because it allows for better diagnosing of whether chains actually do get stuck, or whether it is just a product of random initialization. But regardless, I agree the second image does look a bit peculiar.","user":"U01C2AJ9F63","ts":"1616577320.054800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/8Nba","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm, the first thing I notice is that the scales vary. The scale in the second image is much much smaller. It's essentially as if zoomed in a lot. I would try to run multiple chains as well when debugging these kind of issues, because it allows for better diagnosing of whether chains actually do get stuck, or whether it is just a product of random initialization. But regardless, I agree the second image does look a bit peculiar."}]}]}],"thread_ts":"1616576172.049300","parent_user_id":"U01C1H3GLLU"},{"client_msg_id":"7b7665a2-7392-4782-986f-38177018ef08","type":"message","text":"While all MCMC methods need a warm-up phase before they start returning good samples, NUTS also uses that phase to tune step size and metric (relative scale of all variables), which drastically improves sampling quality. Depending on your model, you probably need at least 500 warm-up steps before collecting any samples. Since the number of samples you're showing is low, I'm guessing the number of warm-up steps taken was low too? With NUTS and HMC, you also want to look at the `numerical_error` parameter. What you want to see is all 0s. If any are 1, then that means either tuning went poorly, or there's problem with the model that is causing the log probability to have high curvature, which breaks most MCMC samplers.","user":"UHDQQ4GN6","ts":"1616577328.055000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wj6E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"While all MCMC methods need a warm-up phase before they start returning good samples, NUTS also uses that phase to tune step size and metric (relative scale of all variables), which drastically improves sampling quality. Depending on your model, you probably need at least 500 warm-up steps before collecting any samples. Since the number of samples you're showing is low, I'm guessing the number of warm-up steps taken was low too? With NUTS and HMC, you also want to look at the "},{"type":"text","text":"numerical_error","style":{"code":true}},{"type":"text","text":" parameter. What you want to see is all 0s. If any are 1, then that means either tuning went poorly, or there's problem with the model that is causing the log probability to have high curvature, which breaks most MCMC samplers."}]}]}],"thread_ts":"1616576172.049300","parent_user_id":"U01C1H3GLLU"}]