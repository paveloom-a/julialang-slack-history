[{"client_msg_id":"a2b9cd9a-adb1-48fa-b664-f774a6f52dab","type":"message","text":"TIL:\n\n```julia&gt; for i in 1:2\n           @time ((t, s) -&gt; @. t + 1 * s + t^5)([1], [3]);\n       end\n  0.060273 seconds (203.24 k allocations: 9.493 MiB)\n  0.000005 seconds (7 allocations: 448 bytes)```\nJulia knows that the two loops are the same and so it keeps track of that anonymous function created the first time.","user":"UBF9YRB6H","ts":"1617062428.080600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PEc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"TIL:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> for i in 1:2\n           @time ((t, s) -> @. t + 1 * s + t^5)([1], [3]);\n       end\n  0.060273 seconds (203.24 k allocations: 9.493 MiB)\n  0.000005 seconds (7 allocations: 448 bytes)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nJulia knows that the two loops are the same and so it keeps track of that anonymous function created the first time."}]}]}],"thread_ts":"1617062428.080600","reply_count":3,"reply_users_count":2,"latest_reply":"1617117906.082300","reply_users":["U67D54KS8","UBF9YRB6H"],"is_locked":false,"subscribed":false},{"client_msg_id":"9812380d-046d-4438-822a-5c94751afc2c","type":"message","text":"Anonymous funtions are (always) compiled only once for certain input types, just like normal functions. There are some docs about it here <https://docs.julialang.org/en/v1/devdocs/functions/#Closures>","user":"U67D54KS8","ts":"1617089407.081600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"padw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Anonymous funtions are (always) compiled only once for certain input types, just like normal functions. There are some docs about it here "},{"type":"link","url":"https://docs.julialang.org/en/v1/devdocs/functions/#Closures"}]}]}],"thread_ts":"1617062428.080600","parent_user_id":"UBF9YRB6H"},{"client_msg_id":"2805d916-1a6b-41ae-bc7d-dde4a9b1d744","type":"message","text":"In global scope I'm used to this behavior though\n\n```julia&gt; @time ((t, s) -&gt; @. t + 1 * s + t^5)([1], [3]);\n  0.112345 seconds (527.21 k allocations: 26.040 MiB)\n\njulia&gt; @time ((t, s) -&gt; @. t + 1 * s + t^5)([1], [3]);\n  0.079239 seconds (203.26 k allocations: 9.495 MiB)\n\njulia&gt; @time ((t, s) -&gt; @. t + 1 * s + t^5)([1], [3]);\n  0.098868 seconds (203.25 k allocations: 9.495 MiB, 16.61% gc time)\n\njulia&gt; @time ((t, s) -&gt; @. t + 1 * s + t^5)([1], [3]);\n  0.062959 seconds (203.25 k allocations: 9.495 MiB)```\nSo this was a good surprise.","user":"UBF9YRB6H","ts":"1617116498.081900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ouY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In global scope I'm used to this behavior though\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time ((t, s) -> @. t + 1 * s + t^5)([1], [3]);\n  0.112345 seconds (527.21 k allocations: 26.040 MiB)\n\njulia> @time ((t, s) -> @. t + 1 * s + t^5)([1], [3]);\n  0.079239 seconds (203.26 k allocations: 9.495 MiB)\n\njulia> @time ((t, s) -> @. t + 1 * s + t^5)([1], [3]);\n  0.098868 seconds (203.25 k allocations: 9.495 MiB, 16.61% gc time)\n\njulia> @time ((t, s) -> @. t + 1 * s + t^5)([1], [3]);\n  0.062959 seconds (203.25 k allocations: 9.495 MiB)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nSo this was a good surprise."}]}]}],"thread_ts":"1617062428.080600","parent_user_id":"UBF9YRB6H"},{"client_msg_id":"486a4bf1-991e-4ab0-a086-0f59d9c4017a","type":"message","text":"Yeah, if you \"type\" the function multiple times, it will compile multiple times.","user":"U67D54KS8","ts":"1617117906.082300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bRVb6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, if you \"type\" the function multiple times, it will compile multiple times."}]}]}],"thread_ts":"1617062428.080600","parent_user_id":"UBF9YRB6H"}]