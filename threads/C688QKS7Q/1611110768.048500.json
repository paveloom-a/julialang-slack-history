[{"client_msg_id":"edc37b5c-aa72-4005-96c9-f928e45e6437","type":"message","text":"Yeah that is not expected to work, except in **very** limited circumstances","user":"U67BJLYCS","ts":"1611110768.048500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v6eP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah that is not expected to work, except in *"},{"type":"text","text":"very","style":{"bold":true}},{"type":"text","text":"* limited circumstances"}]}]}],"thread_ts":"1611110768.048500","reply_count":6,"reply_users_count":2,"latest_reply":"1611171051.064600","reply_users":["U69KQT9DL","U67BJLYCS"],"subscribed":false},{"client_msg_id":"52024B37-CE72-437E-A55A-89DAF149BBB0","type":"message","text":"Thanks Valentine.  Given our experience, I expected that, but I’m curious what those limited circumstances are?  Is there a high level explanation of what state in Julia is not maintained/correct when called from a different external thread?\n\nI was hoping that if everything was precompiled (it is), the call would essentially be equivalent to calling into C.  And despite being called from different threads, the calls do not overlap. The only issue, I think, is that Julia was initialized in a different thread.","user":"U69KQT9DL","ts":"1611151279.060400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KBr6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks Valentine.  Given our experience, I expected that, but I’m curious what those limited circumstances are?  Is there a high level explanation of what state in Julia is not maintained/correct when called from a different external thread?\n\n"},{"type":"text","text":"I was hoping that if everything was precompiled (it is), the call would essentially be equivalent to calling into C.  And despite being called from different threads, the calls do not overlap. The only issue, I think, is that Julia was initialized in a different thread."}]}]}],"thread_ts":"1611110768.048500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"5bfb7882-ab1f-47e8-8dcb-eb4a86016852","type":"message","text":"You are not allowed to interact with the runtime if you are not running on an initialized thread","user":"U67BJLYCS","ts":"1611151567.061700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vXdmN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You are not allowed to interact with the runtime if you are not running on an initialized thread"}]}]}],"thread_ts":"1611110768.048500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"7c298766-2fa5-4ae6-b205-b2a76056338c","type":"message","text":"The issue is that your code calls other Julia code that makes assumption about thread local state","user":"U67BJLYCS","ts":"1611151601.062100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HOrfF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The issue is that your code calls other Julia code that makes assumption about thread local state"}]}]}],"thread_ts":"1611110768.048500","parent_user_id":"U67BJLYCS","reactions":[{"name":"+1","users":["U69KQT9DL","UB7JS9CHF","UKG4WF8PJ"],"count":3}]},{"client_msg_id":"0c0e6233-d17d-48a3-a828-36ac54e60efc","type":"message","text":"Is there an easy way to initialize just the thread state from a thread created externally?  (I’ll dig through the code a little to see if anything pops out.)","user":"U69KQT9DL","ts":"1611164171.062500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xfY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there an easy way to initialize just the thread state from a thread created externally?  (I’ll dig through the code a little to see if anything pops out.)"}]}]}],"thread_ts":"1611110768.048500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"e9ab695e-5db5-40d5-bd7e-c1d0cc9896cf","type":"message","text":"&gt;  easy way \nNo not that I am aware of.","user":"U67BJLYCS","ts":"1611168590.064300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CsXP","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":" easy way "}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nNo not that I am aware of."}]}]}],"thread_ts":"1611110768.048500","parent_user_id":"U67BJLYCS"},{"client_msg_id":"b0a6a167-ce9e-4545-a04a-d98883a37020","type":"message","text":"Thanks.  Yeah, I’ve been looking through the code, and while I can trace through where the initialization happens, ( `jl_start_threads` -&gt; `jl_threadfun` -&gt; `jl_init_threads` and various other init funcs), it doesn’t look like there’s a nice way to do that with externally created threads.","user":"U69KQT9DL","ts":"1611171051.064600","team":"T68168MUP","edited":{"user":"U69KQT9DL","ts":"1611171077.000000"},"blocks":[{"type":"rich_text","block_id":"tzmY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks.  Yeah, I’ve been looking through the code, and while I can trace through where the initialization happens, ( "},{"type":"text","text":"jl_start_threads","style":{"code":true}},{"type":"text","text":" -> "},{"type":"text","text":"jl_threadfun","style":{"code":true}},{"type":"text","text":" -> "},{"type":"text","text":"jl_init_threads","style":{"code":true}},{"type":"text","text":" and various other init funcs), it doesn’t look like there’s a nice way to do that with externally created threads."}]}]}],"thread_ts":"1611110768.048500","parent_user_id":"U67BJLYCS"}]