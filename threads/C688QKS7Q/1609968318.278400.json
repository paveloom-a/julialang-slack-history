[{"client_msg_id":"b90bb3fc-c803-4752-af87-84af473b2e4b","type":"message","text":"uh.. damn, yeah the new `try` block has made any assignment local\n```julia&gt; @time x = 1\n  0.000001 seconds\n1\n\njulia&gt; x\nERROR: UndefVarError: x not defined```","user":"U8MPCDJAY","ts":"1609968318.278400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AZbqY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"uh.. damn, yeah the new "},{"type":"text","text":"try","style":{"code":true}},{"type":"text","text":" block has made any assignment local\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time x = 1\n  0.000001 seconds\n1\n\njulia> x\nERROR: UndefVarError: x not defined"}]}]}],"thread_ts":"1609968318.278400","reply_count":23,"reply_users_count":3,"latest_reply":"1609971594.289500","reply_users":["UCZ7VBGUD","U8MPCDJAY","U67BXBF99"],"subscribed":false,"reactions":[{"name":"grimacing","users":["U7THT3TM3","UCZ7VBGUD","U6788D83U"],"count":3}]},{"client_msg_id":"F612FCC0-A5D1-43F1-BB49-120AE41B4F24","type":"message","text":"Oops!","user":"UCZ7VBGUD","ts":"1609968928.281500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zDO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oops!"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"9e113e5b-6216-41d7-8211-b8730bbb52c0","type":"message","text":"can you think of an easy fix? Otherwise probably best to revert this and let the beta go out","user":"U8MPCDJAY","ts":"1609969041.281800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"K7R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you think of an easy fix? Otherwise probably best to revert this and let the beta go out"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"77C925E7-05E8-4CBA-9A99-DB4580BDF5C5","type":"message","text":"Nothing simple comes to mind :/. Something complicated like recursing through the expr and adding global where needed might work? But sometimes time is called from local scope too :/","user":"UCZ7VBGUD","ts":"1609969540.283800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XCy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nothing simple comes to mind :/. Something complicated like recursing through the expr and adding global where needed might work? But sometimes time is called from local scope too :/"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"8c906459-4c11-4f86-a4b9-2eaeb4f26416","type":"message","text":"yeah, but that might make the evaluation time misrepresentative?","user":"U8MPCDJAY","ts":"1609969590.284000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x45S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, but that might make the evaluation time misrepresentative?"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"38b42541-787c-4def-8d8d-e028155c88c4","type":"message","text":"I feel like `try` just won’t work. The evaluation needs to be in the basic scope","user":"U8MPCDJAY","ts":"1609969620.284200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L2s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I feel like "},{"type":"text","text":"try","style":{"code":true}},{"type":"text","text":" just won’t work. The evaluation needs to be in the basic scope"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"e85f77cf-8ed3-44c1-a34c-40eedcd177a3","type":"message","text":"is there a way to latch onto the next error, and run the timer disable then?","user":"U8MPCDJAY","ts":"1609969668.284400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RJdl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there a way to latch onto the next error, and run the timer disable then?"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"cae79e5c-50a2-4cbe-bf71-dbb4ab0e6dec","type":"message","text":"so before the execution add it to `aterror` then after if no error remove it","user":"U8MPCDJAY","ts":"1609969719.284600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OxD/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so before the execution add it to "},{"type":"text","text":"aterror","style":{"code":true}},{"type":"text","text":" then after if no error remove it"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"ee29be93-ee64-4afc-9c0c-83c06a852c93","type":"message","text":"does anything like `aterror` exist?","user":"U8MPCDJAY","ts":"1609969734.284800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PqSb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"does anything like "},{"type":"text","text":"aterror","style":{"code":true}},{"type":"text","text":" exist?"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"2d168467-8070-4c63-8ed9-8e423bcf38e3","type":"message","text":"I have a proposal","user":"U8MPCDJAY","ts":"1609970490.285000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wufxu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a proposal"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"a87de2a9-26c1-4a30-8d48-f31a169bfdf6","type":"message","text":"just testing it","user":"U8MPCDJAY","ts":"1609970493.285200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BTf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"just testing it"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"9bdcccb7-7ef8-4b26-9f8a-1de98b57ba05","type":"message","text":"basically remove the try, and just always turn the compile timer off during `throw`","user":"U8MPCDJAY","ts":"1609970512.285400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NSb5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"basically remove the try, and just always turn the compile timer off during "},{"type":"text","text":"throw","style":{"code":true}}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"EE2CAE2B-1352-491E-B4FE-4504562719DD","type":"message","text":"During `throw`? Ah like, for any error whether or not it was called from at time?","user":"UCZ7VBGUD","ts":"1609970787.286400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"oj8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"During "},{"type":"text","text":"throw","style":{"code":true}},{"type":"text","text":"? Ah like, for any error whether or not it was called from at time?"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"291744ED-F58E-428F-9372-344FF8BE7BF4","type":"message","text":"That’s a good idea","user":"UCZ7VBGUD","ts":"1609970794.286700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ajylv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That’s a good idea"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"514b9a48-6769-4248-893e-e1cc6a838e5f","type":"message","text":"yeah","user":"U8MPCDJAY","ts":"1609970796.286900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SDWuU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"1bda3ee6-4434-48e2-996e-77eb0c521e45","type":"message","text":"it’s not exactly a performance critical time, and the overhead should be tiny","user":"U8MPCDJAY","ts":"1609970812.287100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zMD9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it’s not exactly a performance critical time, and the overhead should be tiny"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY","reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"4d9d97c8-9b77-47fe-9860-60e2104cfd7c","type":"message","text":"and it can be done at c-level","user":"U8MPCDJAY","ts":"1609970819.287400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"naG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and it can be done at c-level"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"60FE2004-3468-4DA1-B4FC-1D81B730890F","type":"message","text":"Nice, I would have never thought of that but it sounds like a great fix ","user":"UCZ7VBGUD","ts":"1609970871.288200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2ie8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nice, I would have never thought of that but it sounds like a great fix "}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"6a1aab09-f66e-4b6f-9d89-c1f578a08369","type":"message","text":"I wonder whether the throw should disable the timer for all threads.. it might not be very thread-safe","user":"U8MPCDJAY","ts":"1609970922.288400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"GjWZS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I wonder whether the throw should disable the timer for all threads.. it might not be very thread-safe"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"61968e0e-f169-451f-a652-d20b2c8dd367","type":"message","text":"if a particular thread throws, are others prevented from throwing?","user":"U8MPCDJAY","ts":"1609970936.288600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wN/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if a particular thread throws, are others prevented from throwing?"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"4799A799-2FE6-4FF6-8B02-A7F92C83B4F4","type":"message","text":"No idea :/","user":"UCZ7VBGUD","ts":"1609970974.288900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MtcYT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No idea :/"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"d13a25f2-a368-4e7d-8969-867c7793c282","type":"message","text":"throw is thread-local. Though you might want to restore the old value, and not just disable","user":"U67BXBF99","ts":"1609971352.289100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P2c","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"throw is thread-local. Though you might want to restore the old value, and not just disable"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"client_msg_id":"ec216263-1805-4760-aa8a-c6f529854739","type":"message","text":"I’m going to PR what I’ve got for now","user":"U8MPCDJAY","ts":"1609971496.289300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BnP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m going to PR what I’ve got for now"}]}]}],"thread_ts":"1609968318.278400","parent_user_id":"U8MPCDJAY"},{"type":"message","subtype":"thread_broadcast","text":"Seems to be a fix: <https://github.com/JuliaLang/julia/pull/39133>","user":"U8MPCDJAY","ts":"1609971594.289500","thread_ts":"1609968318.278400","root":{"client_msg_id":"b90bb3fc-c803-4752-af87-84af473b2e4b","type":"message","text":"uh.. damn, yeah the new `try` block has made any assignment local\n```julia&gt; @time x = 1\n  0.000001 seconds\n1\n\njulia&gt; x\nERROR: UndefVarError: x not defined```","user":"U8MPCDJAY","ts":"1609968318.278400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"AZbqY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"uh.. damn, yeah the new "},{"type":"text","text":"try","style":{"code":true}},{"type":"text","text":" block has made any assignment local\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time x = 1\n  0.000001 seconds\n1\n\njulia> x\nERROR: UndefVarError: x not defined"}]}]}],"thread_ts":"1609968318.278400","reply_count":23,"reply_users_count":3,"latest_reply":"1609971594.289500","reply_users":["UCZ7VBGUD","U8MPCDJAY","U67BXBF99"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"4qF","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Seems to be a fix: "},{"type":"link","url":"https://github.com/JuliaLang/julia/pull/39133"}]}]}],"client_msg_id":"f476cce3-571e-4fd8-ba83-dd3aabee0d8d"}]