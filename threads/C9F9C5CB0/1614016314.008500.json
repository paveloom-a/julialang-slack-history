[{"client_msg_id":"810edb5d-c7b4-4a86-972b-9a56325fba4f","type":"message","text":"This may be a little vague, but for the code for an entire (academic) paper, do you prefer to have the code in a package or just keep it all \"script\"-like where everything ends up being `include` d in a \"`main.jl`\" file that runs the analysis? (The code solves and estimates a structural life-cycle model, with some counter-factual experiments so the end outputs are well defined (e.g., latex tables, plots, and some .csv files/datasets))\n\nI'm asking because I'm rewriting my second year paper and doing some substantial modifications to the code. I figured I'd rewrite my code so that I could actually post a replication package, so now I want to do it \"all properly\" from the beginning, if that makes sense. But I've never written any packages, and frankly find it rather annoying so I want to check before I commit to doing it this way.","user":"UBTGC7HPA","ts":"1614016314.008500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tjj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This may be a little vague, but for the code for an entire (academic) paper, do you prefer to have the code in a package or just keep it all \"script\"-like where everything ends up being "},{"type":"text","text":"include","style":{"code":true}},{"type":"text","text":" d in a \""},{"type":"text","text":"main.jl","style":{"code":true}},{"type":"text","text":"\" file that runs the analysis? (The code solves and estimates a structural life-cycle model, with some counter-factual experiments so the end outputs are well defined (e.g., latex tables, plots, and some .csv files/datasets))\n\nI'm asking because I'm rewriting my second year paper and doing some substantial modifications to the code. I figured I'd rewrite my code so that I could actually post a replication package, so now I want to do it \"all properly\" from the beginning, if that makes sense. But I've never written any packages, and frankly find it rather annoying so I want to check before I commit to doing it this way."}]}]}],"thread_ts":"1614016314.008500","reply_count":26,"reply_users_count":3,"latest_reply":"1614028308.014500","reply_users":["UBF9YRB6H","U82LX4ACB","UBTGC7HPA"],"subscribed":false},{"client_msg_id":"4f85000f-7bd9-430e-be54-922e9aaafd40","type":"message","text":"I would have nothing evaluated in global scope. Keep it all in functions.\n\nBut no need to put it in a module. You can just have a top-level script that `include`s a bunch of function definitions and then calls `main`.\n\nUse `Exfiltrator.jl` to stay sane while debugging inside functions.\n\nMost important thing is to use `Manifest.toml` and make sure that you have `Pkg.activate(\".\")` and `instantiate` somewhere.","user":"UBF9YRB6H","ts":"1614016545.008600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QT79","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I would have nothing evaluated in global scope. Keep it all in functions.\n\nBut no need to put it in a module. You can just have a top-level script that `include`s a bunch of function definitions and then calls "},{"type":"text","text":"main","style":{"code":true}},{"type":"text","text":".\n\nUse "},{"type":"text","text":"Exfiltrator.jl","style":{"code":true}},{"type":"text","text":" to stay sane while debugging inside functions.\n\nMost important thing is to use "},{"type":"text","text":"Manifest.toml","style":{"code":true}},{"type":"text","text":" and make sure that you have "},{"type":"text","text":"Pkg.activate(\".\")","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"instantiate","style":{"code":true}},{"type":"text","text":" somewhere."}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"45c7e952-9d99-4d8f-bccc-72d7a765dff5","type":"message","text":"For development, you can use `includet` from Revise to get all the benefits of module-driven development without the naming issues","user":"UBF9YRB6H","ts":"1614016574.008800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SNu=S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For development, you can use "},{"type":"text","text":"includet","style":{"code":true}},{"type":"text","text":" from Revise to get all the benefits of module-driven development without the naming issues"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"e8ef8664-b266-42aa-b23e-52831c42c4b8","type":"message","text":"I think I could see either one working. For example, you could have a module with a function `replicate(path)` and it writes everything to the path (results, figures, etc.). That is geared towards reproducibility. For reproducibility, you probably want to expose the functionality such that it can be used with new data and adapted to new similar applications. In that case it might work by modifying scripts or by using exported functionality (e.g., pass new data, select different features).","user":"U82LX4ACB","ts":"1614017244.009100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZYc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think I could see either one working. For example, you could have a module with a function "},{"type":"text","text":"replicate(path)","style":{"code":true}},{"type":"text","text":" and it writes everything to the path (results, figures, etc.). That is geared towards reproducibility. For reproducibility, you probably want to expose the functionality such that it can be used with new data and adapted to new similar applications. In that case it might work by modifying scripts or by using exported functionality (e.g., pass new data, select different features)."}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"ccc8bfb4-58f2-45ac-a4bc-920cd7fb2823","type":"message","text":"If it's something that would be re-purposed with a new data set, then it should be a module and have a Project.toml etc.","user":"UBF9YRB6H","ts":"1614017604.009300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UVer","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If it's something that would be re-purposed with a new data set, then it should be a module and have a Project.toml etc."}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"cb4493b1-e54d-43dd-a1fc-58b1c62763c1","type":"message","text":"You can also have both. One which is the tool and exposes the functionality and another which records how it was used and hopefully can be used to reproduce the analysis in that paper.","user":"U82LX4ACB","ts":"1614017689.009500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OBOD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can also have both. One which is the tool and exposes the functionality and another which records how it was used and hopefully can be used to reproduce the analysis in that paper."}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA","reactions":[{"name":"+1","users":["UBF9YRB6H"],"count":1}]},{"client_msg_id":"be8ba9ec-d216-4734-bdb1-53ab07d451af","type":"message","text":"<@UBF9YRB6H> So I'm probably missing something in your reply, but I thought `Manifest.toml` and so on are only required if I write a package? Maybe I'm confused about the differences between modules and packages. Maybe all I need is a module?\n\nWhen I think about it's clear that I need a `Manifest.toml` (or something similar?) so that people use the same versions of `optim.jl` and `interpolations.jl` when they run the code (as if anybody will ever read my paper let alone run the code :tired_face:).","user":"UBTGC7HPA","ts":"1614020293.010100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jlOg","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UBF9YRB6H"},{"type":"text","text":" So I'm probably missing something in your reply, but I thought "},{"type":"text","text":"Manifest.toml","style":{"code":true}},{"type":"text","text":" and so on are only required if I write a package? Maybe I'm confused about the differences between modules and packages. Maybe all I need is a module?\n\nWhen I think about it's clear that I need a "},{"type":"text","text":"Manifest.toml","style":{"code":true}},{"type":"text","text":" (or something similar?) so that people use the same versions of "},{"type":"text","text":"optim.jl","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"interpolations.jl","style":{"code":true}},{"type":"text","text":" when they run the code (as if anybody will ever read my paper let alone run the code "},{"type":"emoji","name":"tired_face"},{"type":"text","text":")."}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"30c39edc-a123-4d14-9017-ec9f26deb843","type":"message","text":"I guess another question would be if somebody has curated a list of published economics/finance (etc) papers using Julia with replication files.","user":"UBTGC7HPA","ts":"1614020347.010300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"a/GP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess another question would be if somebody has curated a list of published economics/finance (etc) papers using Julia with replication files."}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"df31cbd4-901a-400e-ac59-c34ad5cff1d5","type":"message","text":"A module is just a namespace. Main for example is a default module. Base is also a module. A package is just a module that is meant to be shared and such. A manifest file allows Julia to know what dependencies a module needs in order to obtain and set up the environment.","user":"U82LX4ACB","ts":"1614020456.010500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LFht0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"A module is just a namespace. Main for example is a default module. Base is also a module. A package is just a module that is meant to be shared and such. A manifest file allows Julia to know what dependencies a module needs in order to obtain and set up the environment."}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"e6911494-1b16-460a-af6a-f36375ae5152","type":"message","text":"If you want anyone else to run your code ever, or even if you want to run julia code a few months from now, you need a `Manifest.toml`. Bascially, the folder structure of\n\n```Project.toml\nManifest.toml\nsrc/```\nshould exist no matter what you are doing. The only difference is that if your code is an \"end-use\" code , like data analysis, then you don't need to wrap it in a `module`.","user":"UBF9YRB6H","ts":"1614021190.010700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D4q=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you want anyone else to run your code ever, or even if you want to run julia code a few months from now, you need a "},{"type":"text","text":"Manifest.toml","style":{"code":true}},{"type":"text","text":". Bascially, the folder structure of\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Project.toml\nManifest.toml\nsrc/"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nshould exist no matter what you are doing. The only difference is that if your code is an \"end-use\" code , like data analysis, then you don't need to wrap it in a "},{"type":"text","text":"module","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"36eca026-6455-4050-924d-94addcddd0d5","type":"message","text":"if your code is \"end-use\" you an also make it be like a script, without putting everything in functions. But imo it's easiest to just have everything in functions.","user":"UBF9YRB6H","ts":"1614021418.010900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2/ED","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if your code is \"end-use\" you an also make it be like a script, without putting everything in functions. But imo it's easiest to just have everything in functions."}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"db0f5817-6f89-4475-9d2d-b3f4491f7ba2","type":"message","text":"Here's a small side project I did, maybe you can try adding it via the url and then running it? <https://gitlab.com/pdeffebach/senate-voting>","user":"UBF9YRB6H","ts":"1614022125.011100","team":"T68168MUP","attachments":[{"service_name":"GitLab","title":"Peter Deffebach / Senate Voting","title_link":"https://gitlab.com/pdeffebach/senate-voting","text":"A project exploring the gaps between the number of senators voting and the population they represent.","fallback":"GitLab: Peter Deffebach / Senate Voting","thumb_url":"https://assets.gitlab-static.net/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png","from_url":"https://gitlab.com/pdeffebach/senate-voting","thumb_width":128,"thumb_height":128,"service_icon":"https://assets.gitlab-static.net/assets/touch-icon-iphone-5a9cee0e8a51212e70b90c87c12f382c428870c0ff67d1eb034d884b78d2dae7.png","id":1,"original_url":"https://gitlab.com/pdeffebach/senate-voting"}],"blocks":[{"type":"rich_text","block_id":"6dfu","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here's a small side project I did, maybe you can try adding it via the url and then running it? "},{"type":"link","url":"https://gitlab.com/pdeffebach/senate-voting"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"8f6d4595-e7cc-49f8-b1a4-26a1003526cb","type":"message","text":"if there are nay pain points then we will both learn something!","user":"UBF9YRB6H","ts":"1614022140.011400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t82","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if there are nay pain points then we will both learn something!"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"16d4e666-e7f8-4107-8754-e5f43852921a","type":"message","text":"(This is in no way representative of my academic work, but I wanted to make some graphs over the summer)","user":"UBF9YRB6H","ts":"1614022155.011600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ipMH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(This is in no way representative of my academic work, but I wanted to make some graphs over the summer)"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"bb35ac4f-acec-4899-a2df-bfae4edec9b0","type":"message","text":"<@UBF9YRB6H> This looks exactly like what I had in mind. I'm trying to run it now, I'll ping you with issues I find:\n• For some reason the `Pkg.instantiate()` didn't install `Pipe`\n• I'll send you my email in a private message so I can try the rest of the package.\nI guess that \"the magic\" really just is:\n```# ### Activate the current environment\nimport Pkg\nPkg.activate(\".\")\n\n# ### Download necessary packages\nPkg.instantiate()```\ncombined with `manifest.toml`  and `project.toml`\n\n(I edited this post)","user":"UBTGC7HPA","ts":"1614027123.011900","team":"T68168MUP","edited":{"user":"UBTGC7HPA","ts":"1614027225.000000"},"blocks":[{"type":"rich_text","block_id":"QZLs","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"UBF9YRB6H"},{"type":"text","text":" This looks exactly like what I had in mind. I'm trying to run it now, I'll ping you with issues I find:\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For some reason the "},{"type":"text","text":"Pkg.instantiate()","style":{"code":true}},{"type":"text","text":" didn't install "},{"type":"text","text":"Pipe","style":{"code":true}}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I'll send you my email in a private message so I can try the rest of the package."}]}],"style":"bullet","indent":0},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI guess that \"the magic\" really just is:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"# ### Activate the current environment\nimport Pkg\nPkg.activate(\".\")\n\n# ### Download necessary packages\nPkg.instantiate()"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"combined with "},{"type":"text","text":"manifest.toml","style":{"code":true}},{"type":"text","text":"  and "},{"type":"text","text":"project.toml","style":{"code":true}},{"type":"text","text":"\n\n(I edited this post)"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"57f32c54-8288-4e17-94a4-8d8e68000ea5","type":"message","text":"hmmm that's not ideal. `<https://www.dropbox.com/s/p1a5kyixekze5mm/data.tar?dl=1>` is the data download link to enter when prompted","user":"UBF9YRB6H","ts":"1614027194.012100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LuG7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmmm that's not ideal. "},{"type":"link","url":"https://www.dropbox.com/s/p1a5kyixekze5mm/data.tar?dl=1","style":{"code":true}},{"type":"text","text":" is the data download link to enter when prompted"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"d2796358-cb5c-4355-bea9-de10ee8f775c","type":"message","text":":disappointed: running into errors trying to get it working on my end","user":"UBF9YRB6H","ts":"1614027373.012400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"iF2","elements":[{"type":"rich_text_section","elements":[{"type":"emoji","name":"disappointed"},{"type":"text","text":" running into errors trying to get it working on my end"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"d51b500c-b86f-4cbd-8535-6a7d3f38844a","type":"message","text":"Everything else works though!","user":"UBTGC7HPA","ts":"1614027386.012600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/BTx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Everything else works though!"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"a4b17738-6559-4766-b0ff-b24be242b823","type":"message","text":"can you delete everything and try again? Btw did you `clone` or do it via `] add`?","user":"UBF9YRB6H","ts":"1614027571.012800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"InQIl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you delete everything and try again? Btw did you "},{"type":"text","text":"clone","style":{"code":true}},{"type":"text","text":" or do it via "},{"type":"text","text":"] add","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"4255c8cc-635d-45b6-b1a9-d73b0bd10724","type":"message","text":"Sure! I did it through clone (`git clone <https://gitlab.com/pdeffebach/senate-voting.git> .`)","user":"UBTGC7HPA","ts":"1614027623.013000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4HyK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sure! I did it through clone ("},{"type":"text","text":"git clone ","style":{"code":true}},{"type":"link","url":"https://gitlab.com/pdeffebach/senate-voting.git","style":{"code":true}},{"type":"text","text":" .","style":{"code":true}},{"type":"text","text":")"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"f485d835-862d-4057-85ee-54b351363391","type":"message","text":"yeah thats fine. probably how I would expect people to do it. I'm not sure how `] add` works without a module name. It probably isn't designed for that","user":"UBF9YRB6H","ts":"1614027666.013200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VJ+G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah thats fine. probably how I would expect people to do it. I'm not sure how "},{"type":"text","text":"] add","style":{"code":true}},{"type":"text","text":" works without a module name. It probably isn't designed for that"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"053ab539-1311-408e-bd0b-ead06675f3de","type":"message","text":"yeah it doesnt work because its not all wrapped in a module","user":"UBF9YRB6H","ts":"1614028019.013500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NCG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah it doesnt work because its not all wrapped in a module"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"09a76b09-e8c9-4cfb-9efc-a2253738eb24","type":"message","text":"Yeah everything worked now (but of course I did `]add Pipe` to make it work the first time)","user":"UBTGC7HPA","ts":"1614028023.013700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bgz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah everything worked now (but of course I did "},{"type":"text","text":"]add Pipe","style":{"code":true}},{"type":"text","text":" to make it work the first time)"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"69cec584-7668-48ad-b664-0e7c5e60412c","type":"message","text":"wonderful! thanks for testing it with me","user":"UBF9YRB6H","ts":"1614028037.013900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"M4B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"wonderful! thanks for testing it with me"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"23ba11e8-ffd8-470e-bac3-f86069051066","type":"message","text":"Hey man, you're the one helping me! From the last pull message I see that you all you had to do was to add Pipe to the manifest and project `.toml` files. Did you add the four lines manually or is there some package (`PkgTemplate`?) that automates part of the process?","user":"UBTGC7HPA","ts":"1614028226.014100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"K4Ig","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey man, you're the one helping me! From the last pull message I see that you all you had to do was to add Pipe to the manifest and project "},{"type":"text","text":".toml","style":{"code":true}},{"type":"text","text":" files. Did you add the four lines manually or is there some package ("},{"type":"text","text":"PkgTemplate","style":{"code":true}},{"type":"text","text":"?) that automates part of the process?"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"1db813e7-1142-4c44-8866-73117d1bd690","type":"message","text":"no, I was in the project environment and just did `] add`. that's how you update the project.toml and manifest.toml","user":"UBF9YRB6H","ts":"1614028291.014300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wEJH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, I was in the project environment and just did "},{"type":"text","text":"] add","style":{"code":true}},{"type":"text","text":". that's how you update the project.toml and manifest.toml"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"},{"client_msg_id":"6654e09d-a8dd-4ba3-a8a6-c3af5035d7b6","type":"message","text":"always (always!) be working in a project-specific environment. no matter what you are doing","user":"UBF9YRB6H","ts":"1614028308.014500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w/aP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"always (always!) be working in a project-specific environment. no matter what you are doing"}]}]}],"thread_ts":"1614016314.008500","parent_user_id":"UBTGC7HPA"}]