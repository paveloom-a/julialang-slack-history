[{"client_msg_id":"5f941ff2-a9de-4f55-8349-557655756ddd","type":"message","text":"Is there a package or function to add a new column to a `DataFrame` with some numerical ranking based on the ordering of another column?","user":"UCAFZ51L3","ts":"1611958178.167800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BH1lm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a package or function to add a new column to a "},{"type":"text","text":"DataFrame","style":{"code":true}},{"type":"text","text":" with some numerical ranking based on the ordering of another column?"}]}]}],"thread_ts":"1611958178.167800","reply_count":9,"reply_users_count":3,"latest_reply":"1611960959.170400","reply_users":["UCZ7VBGUD","U67431ELR","UCAFZ51L3"],"subscribed":false},{"client_msg_id":"d675216c-ab41-45bc-9618-9ad9229983b8","type":"message","text":"like this?\n```julia&gt; df = DataFrame(a = rand(3))\n3×1 DataFrame\n Row │ a\n     │ Float64\n─────┼───────────\n   1 │ 0.6893\n   2 │ 0.0113881\n   3 │ 0.473888\n\njulia&gt; df.b = invperm(sortperm(df.a))\n3-element Array{Int64,1}:\n 3\n 1\n 2\n\njulia&gt; df\n3×2 DataFrame\n Row │ a          b\n     │ Float64    Int64\n─────┼──────────────────\n   1 │ 0.6893         3\n   2 │ 0.0113881      1\n   3 │ 0.473888       2```\nedit: oops, forgot the `invperm` at first","user":"UCZ7VBGUD","ts":"1611958309.167900","team":"T68168MUP","edited":{"user":"UCZ7VBGUD","ts":"1611958372.000000"},"blocks":[{"type":"rich_text","block_id":"yhId","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"like this?\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> df = DataFrame(a = rand(3))\n3×1 DataFrame\n Row │ a\n     │ Float64\n─────┼───────────\n   1 │ 0.6893\n   2 │ 0.0113881\n   3 │ 0.473888\n\njulia> df.b = invperm(sortperm(df.a))\n3-element Array{Int64,1}:\n 3\n 1\n 2\n\njulia> df\n3×2 DataFrame\n Row │ a          b\n     │ Float64    Int64\n─────┼──────────────────\n   1 │ 0.6893         3\n   2 │ 0.0113881      1\n   3 │ 0.473888       2"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"edit: oops, forgot the "},{"type":"text","text":"invperm","style":{"code":true}},{"type":"text","text":" at first"}]}]}],"thread_ts":"1611958178.167800","parent_user_id":"UCAFZ51L3"},{"client_msg_id":"b542f683-c996-473e-9ccc-0d2e5cc877d8","type":"message","text":"StatsBase also provides several rank functions.","user":"U67431ELR","ts":"1611958419.168300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3i8ei","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"StatsBase also provides several rank functions."}]}]}],"thread_ts":"1611958178.167800","parent_user_id":"UCAFZ51L3","reactions":[{"name":"+1","users":["UCZ7VBGUD","U8JAMQGQY"],"count":2}]},{"client_msg_id":"d039dd97-6642-44e8-82aa-79018acc1c12","type":"message","text":"I guess I was looking in the wrong repos. Thanks a lot","user":"UCAFZ51L3","ts":"1611958891.168600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"c9ZGT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess I was looking in the wrong repos. Thanks a lot"}]}]}],"thread_ts":"1611958178.167800","parent_user_id":"UCAFZ51L3","reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"e60b6a27-030f-465e-aa05-ce41df45d6c1","type":"message","text":"I'm almost there.\n```using DataFrames, StatsBase\ndf = DataFrame(a = repeat(1:3, inner=3), b = rand(9))\nranked_df = transform(groupby(df, [:a]), :, :b =&gt; competerank =&gt; :RANK)```\nHow can I use the keyword `rev=true` inside the `competerank` function?","user":"UCAFZ51L3","ts":"1611960413.169000","team":"T68168MUP","edited":{"user":"UCAFZ51L3","ts":"1611960584.000000"},"blocks":[{"type":"rich_text","block_id":"m0P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm almost there.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using DataFrames, StatsBase\ndf = DataFrame(a = repeat(1:3, inner=3), b = rand(9))\nranked_df = transform(groupby(df, [:a]), :, :b => competerank => :RANK)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"How can I use the keyword "},{"type":"text","text":"rev=true","style":{"code":true}},{"type":"text","text":" inside the "},{"type":"text","text":"competerank","style":{"code":true}},{"type":"text","text":" function?"}]}]}],"thread_ts":"1611958178.167800","parent_user_id":"UCAFZ51L3"},{"client_msg_id":"a2915d60-f3ee-414d-a247-d781eb51d2c0","type":"message","text":"This doesn't work.\n```df = DataFrame(a = repeat(1:3, inner=3), b = rand(9))\nranked_df = transform(groupby(df, [:a]), :, :b =&gt; competerank(rev=true) =&gt; :RANK)```\n","user":"UCAFZ51L3","ts":"1611960542.169300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JNR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This doesn't work.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"df = DataFrame(a = repeat(1:3, inner=3), b = rand(9))\nranked_df = transform(groupby(df, [:a]), :, :b => competerank(rev=true) => :RANK)"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1611958178.167800","parent_user_id":"UCAFZ51L3"},{"client_msg_id":"6e2e2f7f-09a4-418c-95e3-86cc377f58db","type":"message","text":"you should be able to use an anonymous function, like `b =&gt; (col -&gt; competerank(col, rev=true)) =&gt; :RANK`","user":"UCZ7VBGUD","ts":"1611960593.169700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hnuqy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you should be able to use an anonymous function, like "},{"type":"text","text":"b => (col -> competerank(col, rev=true)) => :RANK","style":{"code":true}}]}]}],"thread_ts":"1611958178.167800","parent_user_id":"UCAFZ51L3"},{"client_msg_id":"74523787-cb7f-4776-a912-fb379260927b","type":"message","text":"I can swear I tried that and didn't work. Maybe the parentheses? Thanks again!","user":"UCAFZ51L3","ts":"1611960706.169900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Xtj0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can swear I tried that and didn't work. Maybe the parentheses? Thanks again!"}]}]}],"thread_ts":"1611958178.167800","parent_user_id":"UCAFZ51L3"},{"client_msg_id":"55515665-fe91-46a1-94dc-a7d3fb07b42e","type":"message","text":"no problem! yeah, the parens are needed here, otherwise the parser groups it like `:b =&gt; (col -&gt; (competerank(col; rev=true) =&gt; :RANK))` . I've run into that too.","user":"UCZ7VBGUD","ts":"1611960809.170100","team":"T68168MUP","edited":{"user":"UCZ7VBGUD","ts":"1611960906.000000"},"blocks":[{"type":"rich_text","block_id":"UREh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no problem! yeah, the parens are needed here, otherwise the parser groups it like "},{"type":"text","text":":b => (col -> (competerank(col; rev=true) => :RANK))","style":{"code":true}},{"type":"text","text":" . I've run into that too."}]}]}],"thread_ts":"1611958178.167800","parent_user_id":"UCAFZ51L3"},{"client_msg_id":"f2acb42d-c66b-44fb-8930-2e170941eb0d","type":"message","text":"Yeah, that was it. Good to know","user":"UCAFZ51L3","ts":"1611960959.170400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ix/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, that was it. Good to know"}]}]}],"thread_ts":"1611958178.167800","parent_user_id":"UCAFZ51L3"}]