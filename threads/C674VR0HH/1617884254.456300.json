[{"client_msg_id":"39c15eb3-a9c6-48d8-9b9f-aa25234d66c2","type":"message","text":"Hey guys, I am a little stuck here. I have 3 annotators that are labelling the same sample of 1000 text (denoted as observations id) with 5 kinds of discrete labels (1,...5). The DataFrame looks like this:\n\n```6×3 DataFrame\n Row │ annotator  id     label \n     │ Int64      Int64  Int64 \n─────┼─────────────────────────\n   1 │         1    111      0\n   2 │         1    112      1\n   3 │         2    111      0\n   4 │         2    112      1\n   5 │         3    111      2\n   6 │         3    112      3```\nHow would I make an empirical confusion matrix by counting all the pairs of labels (a, b) that show up together and displaying as a matrix.\n\nFor instance, if three annotators provide labels (1, 1, 2), then increment count for cells (1, 1), (1, 2), (1,2).\n\nI am stuck, and would love some guidance.\n\nIn the example you'll see that annotator 1 and 2 agree with the labels of 111 and 112. But annotator 3 disagrees with both, labelling 111 as 2 and 112 as 3.\n\nPS: If it helps somehow I've made the examples using `df = DataFrame(annotator = repeat(1:3, inner=2), id = repeat(111:112, outer =3), label = [0,1,0,1,2,3])`","user":"U01QBF4PHKP","ts":"1617884254.456300","team":"T68168MUP","edited":{"user":"U01QBF4PHKP","ts":"1617884910.000000"},"blocks":[{"type":"rich_text","block_id":"Ve6af","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey guys, I am a little stuck here. I have 3 annotators that are labelling the same sample of 1000 text (denoted as observations id) with 5 kinds of discrete labels (1,...5). The DataFrame looks like this:\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"6×3 DataFrame\n Row │ annotator  id     label \n     │ Int64      Int64  Int64 \n─────┼─────────────────────────\n   1 │         1    111      0\n   2 │         1    112      1\n   3 │         2    111      0\n   4 │         2    112      1\n   5 │         3    111      2\n   6 │         3    112      3"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nHow would I make an empirical confusion matrix by counting all the pairs of labels (a, b) that show up together and displaying as a matrix.\n\nFor instance, if three annotators provide labels (1, 1, 2), then increment count for cells (1, 1), (1, 2), (1,2).\n\nI am stuck, and would love some guidance.\n\nIn the example you'll see that annotator 1 and 2 agree with the labels of 111 and 112. But annotator 3 disagrees with both, labelling 111 as 2 and 112 as 3.\n\nPS: If it helps somehow I've made the examples using "},{"type":"text","text":"df = DataFrame(annotator = repeat(1:3, inner=2), id = repeat(111:112, outer =3), label = [0,1,0,1,2,3])","style":{"code":true}}]}]}],"thread_ts":"1617884254.456300","reply_count":3,"reply_users_count":2,"latest_reply":"1617893268.459600","reply_users":["U7JQGPGCQ","U01QBF4PHKP"],"is_locked":false,"subscribed":false},{"client_msg_id":"e2dcbe49-2c64-46ae-8540-5d4abab65f37","type":"message","text":"I'm no sure if this is what you're after, but here's a way to get a count of labels for each id:\n```julia&gt; combine(groupby(df, :id), :label =&gt; countmap)\n2×2 DataFrame\n Row │ id     label_countmap   \n     │ Int64  Dict…\n─────┼─────────────────────────\n   1 │   111  Dict(0=&gt;2, 2=&gt;1)\n   2 │   112  Dict(3=&gt;1, 1=&gt;2)```","user":"U7JQGPGCQ","ts":"1617885370.456800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QbYw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm no sure if this is what you're after, but here's a way to get a count of labels for each id:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> combine(groupby(df, :id), :label => countmap)\n2×2 DataFrame\n Row │ id     label_countmap   \n     │ Int64  Dict…\n─────┼─────────────────────────\n   1 │   111  Dict(0=>2, 2=>1)\n   2 │   112  Dict(3=>1, 1=>2)"}]}]}],"thread_ts":"1617884254.456300","parent_user_id":"U01QBF4PHKP"},{"client_msg_id":"3f880073-083f-4f2a-a47f-1a27bacffdc5","type":"message","text":"Then I would need to expand this and make this matrix square. I was thinking in something using cartesian products and somehow a reduce...","user":"U01QBF4PHKP","ts":"1617886562.458700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5MOp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Then I would need to expand this and make this matrix square. I was thinking in something using cartesian products and somehow a reduce..."}]}]}],"thread_ts":"1617884254.456300","parent_user_id":"U01QBF4PHKP"},{"client_msg_id":"402266e2-320f-414b-82eb-1d8b6f839a2f","type":"message","text":"What do you mean by square here? What do you want the output to look like?","user":"U7JQGPGCQ","ts":"1617893268.459600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x052","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What do you mean by square here? What do you want the output to look like?"}]}]}],"thread_ts":"1617884254.456300","parent_user_id":"U01QBF4PHKP"}]