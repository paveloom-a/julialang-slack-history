[{"client_msg_id":"1e375059-8d78-4a34-94f6-c9eaf8b5877c","type":"message","text":"This week I have written a basic post on consequences of using of anonymous functions in top-level scope (which is quite common in workflows including DataFrames.jl): <https://bkamins.github.io/julialang/2021/02/12/fun-compile.html>. I also added hints what improvements you can expect in 1.0 in terms of compilation latency.","user":"U8JAMQGQY","ts":"1613121080.378800","team":"T68168MUP","attachments":[{"service_name":"Blog by Bogumił Kamiński","title":"Reducing compilation cost in DataFrames.jl","title_link":"https://bkamins.github.io/julialang/2021/02/12/fun-compile.html","text":"Introduction","fallback":"Blog by Bogumił Kamiński: Reducing compilation cost in DataFrames.jl","ts":1613108683,"from_url":"https://bkamins.github.io/julialang/2021/02/12/fun-compile.html","service_icon":"https://bkamins.github.io/favicon.ico","id":1,"original_url":"https://bkamins.github.io/julialang/2021/02/12/fun-compile.html"}],"blocks":[{"type":"rich_text","block_id":"yEju","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This week I have written a basic post on consequences of using of anonymous functions in top-level scope (which is quite common in workflows including DataFrames.jl): "},{"type":"link","url":"https://bkamins.github.io/julialang/2021/02/12/fun-compile.html"},{"type":"text","text":". I also added hints what improvements you can expect in 1.0 in terms of compilation latency."}]}]}],"thread_ts":"1613121080.378800","reply_count":10,"reply_users_count":4,"latest_reply":"1613306214.402300","reply_users":["UCTJ1TGBV","U8JAMQGQY","UBF9YRB6H","UK1BNFHFV"],"subscribed":false,"reactions":[{"name":"heart","users":["U7PGB5DU3","UPH1M2MB2","U82LX4ACB","UAVMYR0F4","U01C15GH58B","UBF9YRB6H","U8T0YV7QC"],"count":7}]},{"client_msg_id":"bffc6a96-c993-487c-9cdc-eb851c9d57af","type":"message","text":"Good to know! But I don't know if I'll follow the recommendation when using `filter` because I'm so used to anonymous functions when filtering.","user":"UCTJ1TGBV","ts":"1613129020.382600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CQWLU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Good to know! But I don't know if I'll follow the recommendation when using "},{"type":"text","text":"filter","style":{"code":true}},{"type":"text","text":" because I'm so used to anonymous functions when filtering."}]}]}],"thread_ts":"1613121080.378800","parent_user_id":"U8JAMQGQY"},{"client_msg_id":"1dbfad3c-efc9-4cc6-a920-7c07cced5f44","type":"message","text":"This recommendation is valid if:\n• either you want to run some operations many times (if you want to run something one time it does not matter as it has to be compiled once)\n• or if the operation you do is complex (as then there is most \"visual\" benefit)\n• and you do care about e.g. having to pay 0.1 sec for compilation (if you do not care just use anonymous function)\nIf this is not clear from the post could you please comment where I could improve it? Thank you!","user":"U8JAMQGQY","ts":"1613129280.382800","team":"T68168MUP","edited":{"user":"U8JAMQGQY","ts":"1613129316.000000"},"blocks":[{"type":"rich_text","block_id":"1ht","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This recommendation is valid if:\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"either you want to run some operations many times (if you want to run something one time it does not matter as it has to be compiled once)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"or if the operation you do is complex (as then there is most \"visual\" benefit)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and you do care about e.g. having to pay 0.1 sec for compilation (if you do not care just use anonymous function)"}]}],"style":"bullet","indent":0},{"type":"rich_text_section","elements":[{"type":"text","text":"If this is not clear from the post could you please comment where I could improve it? Thank you!"}]}]}],"thread_ts":"1613121080.378800","parent_user_id":"U8JAMQGQY"},{"client_msg_id":"597d6c64-fddb-410f-a818-d796547bdeed","type":"message","text":"The point is that for many operations on data frames compilation cost is higher than operation cost.","user":"U8JAMQGQY","ts":"1613129338.383100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"skOdZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The point is that for many operations on data frames compilation cost is higher than operation cost."}]}]}],"thread_ts":"1613121080.378800","parent_user_id":"U8JAMQGQY"},{"client_msg_id":"dd5934e7-cb27-4add-a53f-32a18392d9f0","type":"message","text":"Nono, I think its clear, the \"don't follow\" was ment as a \"I like to use anonymous functions even if they are slower because of style...\"","user":"UCTJ1TGBV","ts":"1613129399.383300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Hip","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nono, I think its clear, the \"don't follow\" was ment as a \"I like to use anonymous functions even if they are slower because of style...\""}]}]}],"thread_ts":"1613121080.378800","parent_user_id":"U8JAMQGQY","reactions":[{"name":"+1","users":["U8JAMQGQY"],"count":1}]},{"type":"message","subtype":"thread_broadcast","text":"It's worth noting that currently DataFramesMeta does not automatically realize that `:x = f(:y)` can be written as `:y =&gt; f =&gt; :y`\n\nI think the reason is that I wanted to wait for `1.6` so that I could deal with broadcasting syntax better.\n\nBut if anyone is an expert in this kind of thing I would love a PR.","user":"UBF9YRB6H","ts":"1613159896.388300","thread_ts":"1613121080.378800","root":{"client_msg_id":"1e375059-8d78-4a34-94f6-c9eaf8b5877c","type":"message","text":"This week I have written a basic post on consequences of using of anonymous functions in top-level scope (which is quite common in workflows including DataFrames.jl): <https://bkamins.github.io/julialang/2021/02/12/fun-compile.html>. I also added hints what improvements you can expect in 1.0 in terms of compilation latency.","user":"U8JAMQGQY","ts":"1613121080.378800","team":"T68168MUP","attachments":[{"service_name":"Blog by Bogumił Kamiński","title":"Reducing compilation cost in DataFrames.jl","title_link":"https://bkamins.github.io/julialang/2021/02/12/fun-compile.html","text":"Introduction","fallback":"Blog by Bogumił Kamiński: Reducing compilation cost in DataFrames.jl","ts":1613108683,"from_url":"https://bkamins.github.io/julialang/2021/02/12/fun-compile.html","service_icon":"https://bkamins.github.io/favicon.ico","id":1,"original_url":"https://bkamins.github.io/julialang/2021/02/12/fun-compile.html"}],"blocks":[{"type":"rich_text","block_id":"yEju","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This week I have written a basic post on consequences of using of anonymous functions in top-level scope (which is quite common in workflows including DataFrames.jl): "},{"type":"link","url":"https://bkamins.github.io/julialang/2021/02/12/fun-compile.html"},{"type":"text","text":". I also added hints what improvements you can expect in 1.0 in terms of compilation latency."}]}]}],"thread_ts":"1613121080.378800","reply_count":10,"reply_users_count":4,"latest_reply":"1613306214.402300","reply_users":["UCTJ1TGBV","U8JAMQGQY","UBF9YRB6H","UK1BNFHFV"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"iwv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's worth noting that currently DataFramesMeta does not automatically realize that "},{"type":"text","text":":x = f(:y)","style":{"code":true}},{"type":"text","text":" can be written as "},{"type":"text","text":":y => f => :y","style":{"code":true}},{"type":"text","text":"\n\nI think the reason is that I wanted to wait for "},{"type":"text","text":"1.6","style":{"code":true}},{"type":"text","text":" so that I could deal with broadcasting syntax better.\n\nBut if anyone is an expert in this kind of thing I would love a PR."}]}]}],"client_msg_id":"4f7b4aa1-5fd8-4c40-86e9-9f580ea6bc53"},{"client_msg_id":"d19f3ba9-ce04-40ad-b8bf-2567b797981b","type":"message","text":"Good point. In other words - for people who do not know the details of DataFramesMeta.jl - it currently always defines a fresh anonymous function (leading to compilation as explained in the post). It would be great to fix it.","user":"U8JAMQGQY","ts":"1613160236.388600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"G3q/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Good point. In other words - for people who do not know the details of DataFramesMeta.jl - it currently always defines a fresh anonymous function (leading to compilation as explained in the post). It would be great to fix it."}]}]}],"thread_ts":"1613121080.378800","parent_user_id":"U8JAMQGQY"},{"client_msg_id":"647DDF3E-BFAE-4751-8625-29BDD69BABDF","type":"message","text":"What is the difference in 1.6 with broadcasting? Isn't it just an additional ability to use broadcast symbols like .+ ","user":"UK1BNFHFV","ts":"1613167900.390000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=I0j1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What is the difference in 1.6 with broadcasting? Isn't it just an additional ability to use broadcast symbols like .+ "}]}]}],"thread_ts":"1613121080.378800","parent_user_id":"U8JAMQGQY"},{"client_msg_id":"da0db197-472f-4e4e-9f5b-4fc812701669","type":"message","text":"I think automatic wrapping of `Base.BroadcastedFum(f)` when it sees `f.(x)` is a 1.6 thing. I'm not too sure, though","user":"UBF9YRB6H","ts":"1613168027.390200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9grOe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think automatic wrapping of "},{"type":"text","text":"Base.BroadcastedFum(f)","style":{"code":true}},{"type":"text","text":" when it sees "},{"type":"text","text":"f.(x)","style":{"code":true}},{"type":"text","text":" is a 1.6 thing. I'm not too sure, though"}]}]}],"thread_ts":"1613121080.378800","parent_user_id":"U8JAMQGQY"},{"client_msg_id":"49D2D5C1-667F-4C97-8C9F-D7B30CCBA267","type":"message","text":"I made a PR :) it will give the most benefit on 1.6 though ","user":"UK1BNFHFV","ts":"1613254111.394700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"udCXQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I made a PR :) it will give the most benefit on 1.6 though "}]}]}],"thread_ts":"1613121080.378800","parent_user_id":"U8JAMQGQY","reactions":[{"name":"+1","users":["U8JAMQGQY","UBF9YRB6H"],"count":2}]},{"client_msg_id":"E018A07F-FDA1-4D85-8973-E161B17EF069","type":"message","text":"Ah I had just forgotten about ByRow, now it also works before 1.6","user":"UK1BNFHFV","ts":"1613306214.402300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"76/MW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah I had just forgotten about ByRow, now it also works before 1.6"}]}]}],"thread_ts":"1613121080.378800","parent_user_id":"U8JAMQGQY"}]