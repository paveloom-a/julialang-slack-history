[{"client_msg_id":"d24a1604-0bff-4234-9caa-bafb3c584a7b","type":"message","text":"Can I run a test suite for a DataFrames.jl installation like `pd.test()` for Pandas?","user":"U01CQTKB86N","ts":"1612947227.326200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2ry","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can I run a test suite for a DataFrames.jl installation like "},{"type":"text","text":"pd.test()","style":{"code":true}},{"type":"text","text":" for Pandas?"}]}]}],"thread_ts":"1612947227.326200","reply_count":20,"reply_users_count":3,"latest_reply":"1612956114.330200","reply_users":["U67431ELR","U01CQTKB86N","U8JAMQGQY"],"subscribed":false},{"client_msg_id":"b31ae55a-68a7-4f67-9a52-c80c95baeb90","type":"message","text":"What does `pd.test()` do?","user":"U67431ELR","ts":"1612947251.326300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5uo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What does "},{"type":"text","text":"pd.test()","style":{"code":true}},{"type":"text","text":" do?"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"e589b791-cdf9-42c6-8fbf-e7cf22daebfd","type":"message","text":"<https://pandas.pydata.org/pandas-docs/stable/getting_started/install.html#running-the-test-suite>","user":"U01CQTKB86N","ts":"1612947311.326500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OyBQF","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://pandas.pydata.org/pandas-docs/stable/getting_started/install.html#running-the-test-suite"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"ac7072ff-44ba-4c06-b2d7-690a3af2db3c","type":"message","text":"Ah. Then you can just do `]test DataFrames` or `using Pkg; Pkg.test(\"DataFrames\")`.","user":"U67431ELR","ts":"1612947345.326700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V5G6N","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah. Then you can just do "},{"type":"text","text":"]test DataFrames","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"using Pkg; Pkg.test(\"DataFrames\")","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"ee928e08-7481-4528-9eeb-f7e6b2293679","type":"message","text":"Ok, cool. Thanks!","user":"U01CQTKB86N","ts":"1612947362.326900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qEN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, cool. Thanks!"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"393a4e46-f245-4394-97d2-74603ba8e5cd","type":"message","text":"You probably know that some tests fail in `docker run -it --rm julia:1.6-buster` ? Like\n```Markdown as text/plain and as text/csv: Test Failed at /root/.julia/packages/DataFrames/oQ5c7/test/io.jl:225\n  Expression: sprint(show, \"text/plain\", df) == \"8×2 DataFrame\\n Row │ A      B\\n     │ Int64  MD…\\n─────┼──────────────────────────────────────────\\n   1 │     1    DataFrames.jl (<http://juliadat>…\\n   2 │     4    \\\\frac{x^2}{x^2+y^2}\\n   3 │     9    Header\\\\n  ≡≡≡≡≡≡≡≡\\n   4 │    16    This is very, very, very, very…\\n   5 │    25\\n   6 │    36    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\\n   7 │    49    ∫αγ∞1∫αγ∞\\\\n\\\\n    •    2∫αγ∞3∫α…\\n   8 │    64    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\"\n   Evaluated: \"8×2 DataFrame\\n Row │ A      B\\n     │ Int64  MD…\\n─────┼──────────────────────────────────────────\\n   1 │     1    DataFrames.jl (<http://juliadat>…\\n   2 │     4    \\\\frac{x^2}{x^2+y^2}\\n   3 │     9    Header\\\\n  ≡≡≡≡≡≡≡≡\\n   4 │    16    This is very, very, very, very…\\n   5 │    25\\n   6 │    36    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\\n   7 │    49    ∫αγ∞1∫αγ∞\\\\n\\\\n    •  2∫αγ∞3∫αγ∞…\\n   8 │    64    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\" == \"8×2 DataFrame\\n Row │ A      B\\n     │ Int64  MD…\\n─────┼──────────────────────────────────────────\\n   1 │     1    DataFrames.jl (<http://juliadat>…\\n   2 │     4    \\\\frac{x^2}{x^2+y^2}\\n   3 │     9    Header\\\\n  ≡≡≡≡≡≡≡≡\\n   4 │    16    This is very, very, very, very…\\n   5 │    25\\n   6 │    36    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\\n   7 │    49    ∫αγ∞1∫αγ∞\\\\n\\\\n    •    2∫αγ∞3∫α…\\n   8 │    64    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\"\nStacktrace:\n [1] macro expansion\n   @ ~/.julia/packages/DataFrames/oQ5c7/test/io.jl:225 [inlined]\n [2] macro expansion\n   @ /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v1.6/Test/src/Test.jl:1151 [inlined]\n [3] top-level scope\n   @ ~/.julia/packages/DataFrames/oQ5c7/test/io.jl:207\nTest Summary:                          | Pass  Fail  Total\nMarkdown as text/plain and as text/csv |    1     1      2\n\tFAILED: io.jl```","user":"U01CQTKB86N","ts":"1612953365.327200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VcY5H","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You probably know that some tests fail in "},{"type":"text","text":"docker run -it --rm julia:1.6-buster","style":{"code":true}},{"type":"text","text":" ? Like\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Markdown as text/plain and as text/csv: Test Failed at /root/.julia/packages/DataFrames/oQ5c7/test/io.jl:225\n  Expression: sprint(show, \"text/plain\", df) == \"8×2 DataFrame\\n Row │ A      B\\n     │ Int64  MD…\\n─────┼──────────────────────────────────────────\\n   1 │     1    DataFrames.jl ("},{"type":"link","url":"http://juliadat"},{"type":"text","text":"…\\n   2 │     4    \\\\frac{x^2}{x^2+y^2}\\n   3 │     9    Header\\\\n  ≡≡≡≡≡≡≡≡\\n   4 │    16    This is very, very, very, very…\\n   5 │    25\\n   6 │    36    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\\n   7 │    49    ∫αγ∞1∫αγ∞\\\\n\\\\n    •    2∫αγ∞3∫α…\\n   8 │    64    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\"\n   Evaluated: \"8×2 DataFrame\\n Row │ A      B\\n     │ Int64  MD…\\n─────┼──────────────────────────────────────────\\n   1 │     1    DataFrames.jl ("},{"type":"link","url":"http://juliadat"},{"type":"text","text":"…\\n   2 │     4    \\\\frac{x^2}{x^2+y^2}\\n   3 │     9    Header\\\\n  ≡≡≡≡≡≡≡≡\\n   4 │    16    This is very, very, very, very…\\n   5 │    25\\n   6 │    36    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\\n   7 │    49    ∫αγ∞1∫αγ∞\\\\n\\\\n    •  2∫αγ∞3∫αγ∞…\\n   8 │    64    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\" == \"8×2 DataFrame\\n Row │ A      B\\n     │ Int64  MD…\\n─────┼──────────────────────────────────────────\\n   1 │     1    DataFrames.jl ("},{"type":"link","url":"http://juliadat"},{"type":"text","text":"…\\n   2 │     4    \\\\frac{x^2}{x^2+y^2}\\n   3 │     9    Header\\\\n  ≡≡≡≡≡≡≡≡\\n   4 │    16    This is very, very, very, very…\\n   5 │    25\\n   6 │    36    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\\n   7 │    49    ∫αγ∞1∫αγ∞\\\\n\\\\n    •    2∫αγ∞3∫α…\\n   8 │    64    ∫αγ∞1∫αγ∞2∫αγ∞3∫αγ∞4∫αγ∞5∫αγ∞6…\"\nStacktrace:\n [1] macro expansion\n   @ ~/.julia/packages/DataFrames/oQ5c7/test/io.jl:225 [inlined]\n [2] macro expansion\n   @ /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v1.6/Test/src/Test.jl:1151 [inlined]\n [3] top-level scope\n   @ ~/.julia/packages/DataFrames/oQ5c7/test/io.jl:207\nTest Summary:                          | Pass  Fail  Total\nMarkdown as text/plain and as text/csv |    1     1      2\n\tFAILED: io.jl"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"fa306b86-df98-4dfa-8735-7126f5b3f4c3","type":"message","text":"This one looks like <https://github.com/JuliaData/DataFrames.jl/pull/2572>. It's been fixed on main but not backported to 0.22. <@U8JAMQGQY> Should I backport the commit to the 0.22 branch? It doesn't fix any feature, but passing tests sounds cleaner.","user":"U67431ELR","ts":"1612953620.327400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"umzUL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This one looks like "},{"type":"link","url":"https://github.com/JuliaData/DataFrames.jl/pull/2572"},{"type":"text","text":". It's been fixed on main but not backported to 0.22. "},{"type":"user","user_id":"U8JAMQGQY"},{"type":"text","text":" Should I backport the commit to the 0.22 branch? It doesn't fix any feature, but passing tests sounds cleaner."}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"bb89e573-cfd7-4b28-bc46-ec51653f71ad","type":"message","text":"```test constructor with vectors: Test Failed at /root/.julia/packages/DataFrames/oQ5c7/test/tables.jl:268\n  Expression: DataFrame(Any[])\n    Expected: ArgumentError\n  No exception thrown\nStacktrace:\n [1] macro expansion\n   @ ~/.julia/packages/DataFrames/oQ5c7/test/tables.jl:268 [inlined]\n [2] macro expansion\n   @ /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v1.6/Test/src/Test.jl:1151 [inlined]\n [3] top-level scope\n   @ ~/.julia/packages/DataFrames/oQ5c7/test/tables.jl:268\nTest Summary:                 | Pass  Fail  Total\ntest constructor with vectors |   17     1     18\n\tFAILED: tables.jl\nLoadError: Some tests did not pass: 17 passed, 1 failed, 0 errored, 0 broken.\nin expression starting at /root/.julia/packages/DataFrames/oQ5c7/test/tables.jl:1```","user":"U01CQTKB86N","ts":"1612953785.327600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BIww5","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"test constructor with vectors: Test Failed at /root/.julia/packages/DataFrames/oQ5c7/test/tables.jl:268\n  Expression: DataFrame(Any[])\n    Expected: ArgumentError\n  No exception thrown\nStacktrace:\n [1] macro expansion\n   @ ~/.julia/packages/DataFrames/oQ5c7/test/tables.jl:268 [inlined]\n [2] macro expansion\n   @ /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v1.6/Test/src/Test.jl:1151 [inlined]\n [3] top-level scope\n   @ ~/.julia/packages/DataFrames/oQ5c7/test/tables.jl:268\nTest Summary:                 | Pass  Fail  Total\ntest constructor with vectors |   17     1     18\n\tFAILED: tables.jl\nLoadError: Some tests did not pass: 17 passed, 1 failed, 0 errored, 0 broken.\nin expression starting at /root/.julia/packages/DataFrames/oQ5c7/test/tables.jl:1"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"fc3ae4b8-e875-4f0a-8c47-0c8b3c89d777","type":"message","text":"This one also has a PR. The failure is due to a change in Tables.jl IIRC. It's hard to keep tests fully passing in older releases, as these failures do not reflect breaking changes: they are stricter than our policy. (Here code that was previously failing would now work.)","user":"U67431ELR","ts":"1612953908.327800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4=5M5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This one also has a PR. The failure is due to a change in Tables.jl IIRC. It's hard to keep tests fully passing in older releases, as these failures do not reflect breaking changes: they are stricter than our policy. (Here code that was previously failing would now work.)"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"e2f0ec10-e679-4dfd-9bd7-a71e056539c5","type":"message","text":"```(@v1.6) pkg&gt; st\n      Status `~/.julia/environments/v1.6/Project.toml`\n  [a93c6f00] DataFrames v0.22.5```","user":"U01CQTKB86N","ts":"1612954116.328000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Kit","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"(@v1.6) pkg> st\n      Status `~/.julia/environments/v1.6/Project.toml`\n  [a93c6f00] DataFrames v0.22.5"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"740a5adc-49d7-45fc-9860-6803a949734f","type":"message","text":"I don’t personally need these fixed, as long as you’re fine.","user":"U01CQTKB86N","ts":"1612954323.328200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mUw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t personally need these fixed, as long as you’re fine."}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"846fd90a-d597-4192-a3fb-d3a792afbb53","type":"message","text":"I was actually hoping for a smaller smoke test kind of thing rather than a full test. I also tried the same for pandas. Its tests take ages, and in the end some clipboard tests continue to fail. (Whatever.)","user":"U01CQTKB86N","ts":"1612954645.328400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vyui","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was actually hoping for a smaller smoke test kind of thing rather than a full test. I also tried the same for pandas. Its tests take ages, and in the end some clipboard tests continue to fail. (Whatever.)"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"58e17417-7a83-4746-934d-90578ddd7bb3","type":"message","text":"Smoke tests should also be useful for packagecompiler?","user":"U01CQTKB86N","ts":"1612954675.328600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2Lq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Smoke tests should also be useful for packagecompiler?"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"374e8ee0-9e53-4be1-92ce-5b715b63b3ac","type":"message","text":"What's your goal exactly?","user":"U67431ELR","ts":"1612954686.328800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"c8aI4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What's your goal exactly?"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"4814e8f7-e7c1-477c-878a-3a50b592ecef","type":"message","text":"Well, I have this docker image <https://hub.docker.com/repository/docker/statisticalmice/julia-jupyter> and I was planning a derived image that would contain Pandas and DataFrames.jl, and which would have some kind of smoke test that it works. And maybe if I could figure out how to speed it up with PackageCompiler.","user":"U01CQTKB86N","ts":"1612954913.329000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sAOE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, I have this docker image "},{"type":"link","url":"https://hub.docker.com/repository/docker/statisticalmice/julia-jupyter"},{"type":"text","text":" and I was planning a derived image that would contain Pandas and DataFrames.jl, and which would have some kind of smoke test that it works. And maybe if I could figure out how to speed it up with PackageCompiler."}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"565b736c-ca49-4aae-9f3f-4843f9db9956","type":"message","text":"It might not be that useful as new versions come often.","user":"U01CQTKB86N","ts":"1612955031.329200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Kln","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It might not be that useful as new versions come often."}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"2d1ceb99-b535-4da3-bc76-82a95060200d","type":"message","text":"OK. Well if you just want a simple test you could run `using DataFrames; DataFrame(x=1)`. If you want more serious tests then in theory `Pkg.test(\"DataFrames\")` should pass. When they don't you can report it and we can fix failures.","user":"U67431ELR","ts":"1612955043.329400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7=cKh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"OK. Well if you just want a simple test you could run "},{"type":"text","text":"using DataFrames; DataFrame(x=1)","style":{"code":true}},{"type":"text","text":". If you want more serious tests then in theory "},{"type":"text","text":"Pkg.test(\"DataFrames\")","style":{"code":true}},{"type":"text","text":" should pass. When they don't you can report it and we can fix failures."}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"070d5446-2cc2-482e-918c-ef24efc463a8","type":"message","text":"In summary - I understand we do not make a patch yet for this. Anyway I hope to have 1.0 relatively soon (in Spring)","user":"U8JAMQGQY","ts":"1612955174.329600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F4g","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In summary - I understand we do not make a patch yet for this. Anyway I hope to have 1.0 relatively soon (in Spring)"}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"71da9e57-8d7b-4ef9-94b4-fd8862e1466e","type":"message","text":"It's not high priority, but backporting these patches is cheap.","user":"U67431ELR","ts":"1612956038.329800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZKp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's not high priority, but backporting these patches is cheap."}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"29b4e3d3-bb11-4b1a-95e6-db594a7731f3","type":"message","text":"Is it possible to invoke a build in my github repo if there’s a new release in DataFrames.jl repo? I’ve only been using superlinter so far.","user":"U01CQTKB86N","ts":"1612956097.330000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"o0F","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it possible to invoke a build in my github repo if there’s a new release in DataFrames.jl repo? I’ve only been using superlinter so far."}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"8f345689-09f0-4341-8bf2-a0ae284244b0","type":"message","text":"No idea.","user":"U67431ELR","ts":"1612956114.330200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gyZf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No idea."}]}]}],"thread_ts":"1612947227.326200","parent_user_id":"U01CQTKB86N"}]