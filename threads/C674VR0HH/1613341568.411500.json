[{"client_msg_id":"feff71f7-50b5-48c1-8200-b0f81757fec2","type":"message","text":"Why does this happen? Why aren't row-wise operations fast in DataFrames.jl?\n\nEdit: To give some context I'm trying to do a DataFrames.jl vs Python Pandas benchmarking\n```julia&gt; @time map(sum, eachcol(df));\n  0.000585 seconds (248 allocations: 11.875 KiB)\n\njulia&gt; @time map(sum, eachrow(df));\n  0.309704 seconds (3.47 M allocations: 68.282 MiB, 4.02% gc time)```","user":"U01FAHWCMFF","ts":"1613341568.411500","team":"T68168MUP","edited":{"user":"U01FAHWCMFF","ts":"1613341687.000000"},"blocks":[{"type":"rich_text","block_id":"Ky7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Why does this happen? Why aren't row-wise operations fast in DataFrames.jl?\n\nEdit: To give some context I'm trying to do a DataFrames.jl vs Python Pandas benchmarking\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @time map(sum, eachcol(df));\n  0.000585 seconds (248 allocations: 11.875 KiB)\n\njulia> @time map(sum, eachrow(df));\n  0.309704 seconds (3.47 M allocations: 68.282 MiB, 4.02% gc time)"}]}]}],"thread_ts":"1613341568.411500","reply_count":4,"reply_users_count":1,"latest_reply":"1613347962.412400","reply_users":["U6A936746"],"subscribed":false},{"client_msg_id":"3c086bf0-d15f-44e7-b48c-29722a542774","type":"message","text":"Because a `DataFrameRow` is a type-unstable collection.\n\nUse `Tables.namedtupleiterator` instead of  `eachrow` and you will get a type stable collection.","user":"U6A936746","ts":"1613347607.411800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"USS","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Because a "},{"type":"text","text":"DataFrameRow","style":{"code":true}},{"type":"text","text":" is a type-unstable collection.\n\nUse "},{"type":"text","text":"Tables.namedtupleiterator","style":{"code":true}},{"type":"text","text":" instead of  "},{"type":"text","text":"eachrow","style":{"code":true}},{"type":"text","text":" and you will get a type stable collection."}]}]}],"thread_ts":"1613341568.411500","parent_user_id":"U01FAHWCMFF"},{"client_msg_id":"29bc6cdf-4b2b-44e3-8331-3769073475c7","type":"message","text":"The reason this is the case is because DataFrame's have dynamic content. You can add rows or change there type.","user":"U6A936746","ts":"1613347707.412000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L=GQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The reason this is the case is because DataFrame's have dynamic content. You can add rows or change there type."}]}]}],"thread_ts":"1613341568.411500","parent_user_id":"U01FAHWCMFF"},{"client_msg_id":"7e377392-1fcd-4727-8c07-e079a157ffae","type":"message","text":"If you don't want this, there are many alternative table types that are compatible with Tables.jl\n\nAnd you can thus convert between them and DataFrames using constructor.\n`Tables.rowtable` is one.\nTypedTables is another","user":"U6A936746","ts":"1613347827.412200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QPR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you don't want this, there are many alternative table types that are compatible with Tables.jl\n\nAnd you can thus convert between them and DataFrames using constructor.\n"},{"type":"text","text":"Tables.rowtable","style":{"code":true}},{"type":"text","text":" is one.\nTypedTables is another"}]}]}],"thread_ts":"1613341568.411500","parent_user_id":"U01FAHWCMFF"},{"client_msg_id":"172bef3a-e57a-40e6-9d8d-386ac9f31c88","type":"message","text":"Aside: summing a DataFrame row is I think a pretty unrealistic benchmark.\nBecause tabular data tends to have different columns representing different things and having different types.\nSumming a subset of columns is more realistic.\nNot that that will change performance here.","user":"U6A936746","ts":"1613347962.412400","team":"T68168MUP","edited":{"user":"U6A936746","ts":"1613347980.000000"},"blocks":[{"type":"rich_text","block_id":"MG=A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Aside: summing a DataFrame row is I think a pretty unrealistic benchmark.\nBecause tabular data tends to have different columns representing different things and having different types.\nSumming a subset of columns is more realistic.\nNot that that will change performance here."}]}]}],"thread_ts":"1613341568.411500","parent_user_id":"U01FAHWCMFF"}]