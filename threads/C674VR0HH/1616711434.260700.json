[{"client_msg_id":"5997204e-5ea2-4267-9ad3-c4ac2a423007","type":"message","text":"I am using Julia 1.6 now and CategoricalArrays v0.9.3. I get this error `CategoricalArray only supports AbstractString, AbstractChar and Number element types (got element type NamedTuple{(:Arm,), Tuple{String}})` . when trying to make a dataframe where one of the columns is a NamedTuple type which is then supposed to be converted to Categorical so that it can be transferred to R for ggplot. It used to work before so what happened now? Does CategoricalArrays not support NamedTuple in a column now? The code I have was working before a few weeks ago.","user":"U01EF0QVAB0","ts":"1616711434.260700","team":"T68168MUP","edited":{"user":"U01EF0QVAB0","ts":"1616712089.000000"},"blocks":[{"type":"rich_text","block_id":"3EYrb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am using Julia 1.6 now and CategoricalArrays v0.9.3. I get this error "},{"type":"text","text":"CategoricalArray only supports AbstractString, AbstractChar and Number element types (got element type NamedTuple{(:Arm,), Tuple{String}})","style":{"code":true}},{"type":"text","text":" . when trying to make a dataframe where one of the columns is a NamedTuple type which is then supposed to be converted to Categorical so that it can be transferred to R for ggplot. It used to work before so what happened now? Does CategoricalArrays not support NamedTuple in a column now? The code I have was working before a few weeks ago."}]}]}],"thread_ts":"1616711434.260700","reply_count":8,"reply_users_count":3,"latest_reply":"1616800400.287000","reply_users":["U8JAMQGQY","U01EF0QVAB0","U67431ELR"],"is_locked":false,"subscribed":false},{"client_msg_id":"f485b7f3-a36e-40c8-8098-7493b7747e0b","type":"message","text":"Indeed the supported list of `eltype`s in CategoricalArrays.jl was significantly reduced in 0.9 release. The reason is that - unfortunately - the more flexible approach lead to a very significant number of method invalidations, which impacted interactive use experience (something Julia 1.6 release focused on a lot).","user":"U8JAMQGQY","ts":"1616713516.265300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QCWP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Indeed the supported list of "},{"type":"text","text":"eltype","style":{"code":true}},{"type":"text","text":"s in CategoricalArrays.jl was significantly reduced in 0.9 release. The reason is that - unfortunately - the more flexible approach lead to a very significant number of method invalidations, which impacted interactive use experience (something Julia 1.6 release focused on a lot)."}]}]}],"thread_ts":"1616711434.260700","parent_user_id":"U01EF0QVAB0"},{"client_msg_id":"3028beb6-b2b8-4f36-895a-7f9063b0f00e","type":"message","text":"Oh I see, hmm need to find a workaround then for stuff like this. It used to be that for some of the Julia-specific types like these you could convert to categorical, and then use @rput where it would be a factor in R, and then ggplot(). I tried converting to String instead but even still get `ERROR: MethodError: no method matching String(::NamedTuple{(:Arm,), Tuple{String}})`","user":"U01EF0QVAB0","ts":"1616714182.266000","team":"T68168MUP","edited":{"user":"U01EF0QVAB0","ts":"1616714204.000000"},"blocks":[{"type":"rich_text","block_id":"VWB3G","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh I see, hmm need to find a workaround then for stuff like this. It used to be that for some of the Julia-specific types like these you could convert to categorical, and then use @rput where it would be a factor in R, and then ggplot(). I tried converting to String instead but even still get "},{"type":"text","text":"ERROR: MethodError: no method matching String(::NamedTuple{(:Arm,), Tuple{String}})","style":{"code":true}}]}]}],"thread_ts":"1616711434.260700","parent_user_id":"U01EF0QVAB0"},{"client_msg_id":"5af76a39-3c8b-4a4c-a587-3d5b4a3e0bcb","type":"message","text":"try to use `string` not `String`.","user":"U8JAMQGQY","ts":"1616714938.266300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1qWo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"try to use "},{"type":"text","text":"string","style":{"code":true}},{"type":"text","text":" not "},{"type":"text","text":"String","style":{"code":true}},{"type":"text","text":"."}]}]}],"thread_ts":"1616711434.260700","parent_user_id":"U01EF0QVAB0"},{"client_msg_id":"37c4704c-cc34-4dbd-a06f-7dbbbbda9ba1","type":"message","text":"Thanks, that worked. I didn't even know there was a lowercase `string`. After that it looks like it can be converted to categorical (or transferred to R directly).","user":"U01EF0QVAB0","ts":"1616715361.266500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=A4Ff","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks, that worked. I didn't even know there was a lowercase "},{"type":"text","text":"string","style":{"code":true}},{"type":"text","text":". After that it looks like it can be converted to categorical (or transferred to R directly)."}]}]}],"thread_ts":"1616711434.260700","parent_user_id":"U01EF0QVAB0"},{"client_msg_id":"79517459-503c-4f5a-841a-d91c0ced8700","type":"message","text":"Yeah it's really a pity that we had to restrict supported types like this, but we got lots of complaints. Can you add a comment to present your use case at <https://github.com/JuliaData/CategoricalArrays.jl/pull/310>? That could be helpful if we find solutions to support more types (e.g. maybe we could allow tuples without introducing too many invalidations).","user":"U67431ELR","ts":"1616756622.273600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"a2zSV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah it's really a pity that we had to restrict supported types like this, but we got lots of complaints. Can you add a comment to present your use case at "},{"type":"link","url":"https://github.com/JuliaData/CategoricalArrays.jl/pull/310"},{"type":"text","text":"? That could be helpful if we find solutions to support more types (e.g. maybe we could allow tuples without introducing too many invalidations)."}]}]}],"thread_ts":"1616711434.260700","parent_user_id":"U01EF0QVAB0"},{"client_msg_id":"36171796-6330-4d16-89cf-c776b1bf0022","type":"message","text":"Sure","user":"U01EF0QVAB0","ts":"1616780180.276600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OH4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sure"}]}]}],"thread_ts":"1616711434.260700","parent_user_id":"U01EF0QVAB0"},{"client_msg_id":"fa84810e-2d34-4700-866b-6061ea0d6203","type":"message","text":"Thanks. Can you tell us more about what these named tuples represent? So you're plotting these?","user":"U67431ELR","ts":"1616783304.281600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"EM9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks. Can you tell us more about what these named tuples represent? So you're plotting these?"}]}]}],"thread_ts":"1616711434.260700","parent_user_id":"U01EF0QVAB0"},{"client_msg_id":"00329287-d61c-4199-be2b-186fec0c30ee","type":"message","text":"The named tuples in this case were just different groups. I was doing some RL bandit stuff and instead of dataframes I was hashing the dictionary by the group and tracking it's history. But in the final step, I had done a conversion of the stuff in the dict to a dataframe, and I had the namedtuple key come into a column in a DataFrame. In order to plot with ggplot2 (as well as Gadfly.jl I believe) you need to have it be categorical. I can do this via converting to string and then to categorical though it seems. The reason is R's ggplot2 and Gadfly.jl are based on Grammar of Graphics. Its just a scatterplot with different colors corresponding to the different unique namedtuple keys","user":"U01EF0QVAB0","ts":"1616800400.287000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w57","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The named tuples in this case were just different groups. I was doing some RL bandit stuff and instead of dataframes I was hashing the dictionary by the group and tracking it's history. But in the final step, I had done a conversion of the stuff in the dict to a dataframe, and I had the namedtuple key come into a column in a DataFrame. In order to plot with ggplot2 (as well as Gadfly.jl I believe) you need to have it be categorical. I can do this via converting to string and then to categorical though it seems. The reason is R's ggplot2 and Gadfly.jl are based on Grammar of Graphics. Its just a scatterplot with different colors corresponding to the different unique namedtuple keys"}]}]}],"thread_ts":"1616711434.260700","parent_user_id":"U01EF0QVAB0"}]