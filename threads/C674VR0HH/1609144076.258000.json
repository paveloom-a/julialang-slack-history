[{"client_msg_id":"743d9a60-541b-4f4b-ad21-f5420f9a20f7","type":"message","text":"Is it possible to read a bunch of Parquet files and write an Arrow file, or does it need to be Parquet -&gt; DataFrame -&gt; Arrow?","user":"U01CQTKB86N","ts":"1609144076.258000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qd0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is it possible to read a bunch of Parquet files and write an Arrow file, or does it need to be Parquet -> DataFrame -> Arrow?"}]}]}],"thread_ts":"1609144076.258000","reply_count":3,"reply_users_count":1,"latest_reply":"1609144912.258500","reply_users":["U01CQTKB86N"],"subscribed":false},{"client_msg_id":"b64235ee-59b6-4f75-b2d3-60b48b2429dc","type":"message","text":"I’m doing that in R right now, and it’s apparently reading in the whole thing in memory as well, my Mac is using 57 GB at the moment (it has 16 GB). I think it was faster yesterday, but it started running out of disk space, so I deleted that and now it’s on an external SSD that’s half-speed to the internal one.\n```library(arrow, warn.conflicts = FALSE)\nlibrary(dplyr, warn.conflicts = FALSE)\n\nsystem.time(ds &lt;- open_dataset(\"/Volumes/SanDiskSSD/TestData/nyc-taxi-parquet/\", partitioning = c(\"year\", \"month\")))\nsystem.time(write_dataset(ds, \"/Volumes/SanDiskSSD/TestData/nyc-taxi-arrow/feather\", format = \"feather\"))```","user":"U01CQTKB86N","ts":"1609144307.258100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"g3zg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m doing that in R right now, and it’s apparently reading in the whole thing in memory as well, my Mac is using 57 GB at the moment (it has 16 GB). I think it was faster yesterday, but it started running out of disk space, so I deleted that and now it’s on an external SSD that’s half-speed to the internal one.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"library(arrow, warn.conflicts = FALSE)\nlibrary(dplyr, warn.conflicts = FALSE)\n\nsystem.time(ds <- open_dataset(\"/Volumes/SanDiskSSD/TestData/nyc-taxi-parquet/\", partitioning = c(\"year\", \"month\")))\nsystem.time(write_dataset(ds, \"/Volumes/SanDiskSSD/TestData/nyc-taxi-arrow/feather\", format = \"feather\"))"}]}]}],"thread_ts":"1609144076.258000","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"c362a422-7c23-45e4-8f96-49c44493ca2c","type":"message","text":"R took 25 minutes, but it did complete, which is surprising…","user":"U01CQTKB86N","ts":"1609144723.258300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kI=0e","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"R took 25 minutes, but it did complete, which is surprising…"}]}]}],"thread_ts":"1609144076.258000","parent_user_id":"U01CQTKB86N"},{"client_msg_id":"fe346815-4923-482e-b7fa-a381b43d69e3","type":"message","text":"With Julia I got as far as reading one Parquet file as DataFrame:\n```@time df = DataFrame(read_parquet(data_path * \"/2011/01/data.parquet\"), copycols=false)```","user":"U01CQTKB86N","ts":"1609144912.258500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yWR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"With Julia I got as far as reading one Parquet file as DataFrame:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@time df = DataFrame(read_parquet(data_path * \"/2011/01/data.parquet\"), copycols=false)"}]}]}],"thread_ts":"1609144076.258000","parent_user_id":"U01CQTKB86N"}]