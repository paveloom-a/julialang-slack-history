[{"client_msg_id":"28928aca-10cb-45b6-bd9b-642c6d4928b3","type":"message","text":"Is there a way to close an Arrow file? Consider:\n```julia&gt; using Arrow\n\njulia&gt; Arrow.write(\"testarrow.arrow\", (a = rand(10), b = rand(10)))\n\"testarrow.arrow\"\n\njulia&gt; using DataFrames\n\njulia&gt; x = DataFrame(Arrow.Table(\"testarrow.arrow\"));\n\njulia&gt; Arrow.write(\"testarrow.arrow\", (a = rand(5), b = rand(5)))\nERROR: SystemError: opening file \"testarrow.arrow\": Invalid argument\n\njulia&gt; x = nothing\n\njulia&gt; Arrow.write(\"testarrow.arrow\", (a = rand(5), b = rand(5)))\nERROR: SystemError: opening file \"testarrow.arrow\": Invalid argument```\nWhich I guess is due to the memory mapping nature of an Arrow file.","user":"U7JQGPGCQ","ts":"1617885485.457800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"az3v","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way to close an Arrow file? Consider:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using Arrow\n\njulia> Arrow.write(\"testarrow.arrow\", (a = rand(10), b = rand(10)))\n\"testarrow.arrow\"\n\njulia> using DataFrames\n\njulia> x = DataFrame(Arrow.Table(\"testarrow.arrow\"));\n\njulia> Arrow.write(\"testarrow.arrow\", (a = rand(5), b = rand(5)))\nERROR: SystemError: opening file \"testarrow.arrow\": Invalid argument\n\njulia> x = nothing\n\njulia> Arrow.write(\"testarrow.arrow\", (a = rand(5), b = rand(5)))\nERROR: SystemError: opening file \"testarrow.arrow\": Invalid argument"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Which I guess is due to the memory mapping nature of an Arrow file."}]}]}],"thread_ts":"1617885485.457800","reply_count":6,"reply_users_count":3,"latest_reply":"1617893470.461800","reply_users":["U7JQGPGCQ","U8JAMQGQY","U681ELA87"],"is_locked":false,"subscribed":false},{"client_msg_id":"124c4cd7-88ee-4905-94ed-deed90682e56","type":"message","text":"Hold on actually I just realized that when I do `copycols = true` in the DataFrames constructor I can overwrite the Arrow file. Slightly confusing as yesterday I thought I had learned hat `copycols = true` is now the default behaviour, but apparently I misunderstood what had happened in the PR <@U8JAMQGQY> pointed me to.","user":"U7JQGPGCQ","ts":"1617885556.457900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3=k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hold on actually I just realized that when I do "},{"type":"text","text":"copycols = true","style":{"code":true}},{"type":"text","text":" in the DataFrames constructor I can overwrite the Arrow file. Slightly confusing as yesterday I thought I had learned hat "},{"type":"text","text":"copycols = true","style":{"code":true}},{"type":"text","text":" is now the default behaviour, but apparently I misunderstood what had happened in the PR "},{"type":"user","user_id":"U8JAMQGQY"},{"type":"text","text":" pointed me to."}]}]}],"thread_ts":"1617885485.457800","parent_user_id":"U7JQGPGCQ"},{"client_msg_id":"432799a4-be32-4046-8d0a-7232368e1076","type":"message","text":"That still leaves me with the question of what I can do if I opened an Arrow file with `copycols = false` - can I still \"close\" it to be able to overwrite it?","user":"U7JQGPGCQ","ts":"1617885592.458100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DfD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That still leaves me with the question of what I can do if I opened an Arrow file with "},{"type":"text","text":"copycols = false","style":{"code":true}},{"type":"text","text":" - can I still \"close\" it to be able to overwrite it?"}]}]}],"thread_ts":"1617885485.457800","parent_user_id":"U7JQGPGCQ"},{"client_msg_id":"9f6edc4e-cad5-40f3-8391-80f8db000969","type":"message","text":"What that PR was meant to do is to respect if `copycols` is passed explicitly but by default do not copy cols. <@U681ELA87> - can you confirm this is what you have intended?","user":"U8JAMQGQY","ts":"1617885654.458300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=j7r","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What that PR was meant to do is to respect if "},{"type":"text","text":"copycols","style":{"code":true}},{"type":"text","text":" is passed explicitly but by default do not copy cols. "},{"type":"user","user_id":"U681ELA87"},{"type":"text","text":" - can you confirm this is what you have intended?"}]}]}],"thread_ts":"1617885485.457800","parent_user_id":"U7JQGPGCQ"},{"client_msg_id":"d1ad002d-645e-43fa-9c33-074227a773e9","type":"message","text":"Ah, okay, so something **was** off when I got copying behaviour by default yesterday?","user":"U7JQGPGCQ","ts":"1617885995.458500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TrU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, okay, so something *"},{"type":"text","text":"was","style":{"bold":true}},{"type":"text","text":"* off when I got copying behaviour by default yesterday?"}]}]}],"thread_ts":"1617885485.457800","parent_user_id":"U7JQGPGCQ"},{"client_msg_id":"cbf5d3d2-f217-4eba-a401-a45f5b6c8562","type":"message","text":"yes - that is why I asked about it.","user":"U8JAMQGQY","ts":"1617887666.459100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SS+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes - that is why I asked about it."}]}]}],"thread_ts":"1617885485.457800","parent_user_id":"U7JQGPGCQ"},{"client_msg_id":"F6CFC61A-50D2-4935-BE71-0097E8653377","type":"message","text":"<@U8JAMQGQY> is correct on what the behavior should be. And no, there’s no way to close an arrow file if copycols is false. Unix systems will still let you overwrite an mmapped file, however. Windows does not.","user":"U681ELA87","ts":"1617893470.461800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Vudpz","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U8JAMQGQY"},{"type":"text","text":" is correct on what the behavior should be. And no, there’s no way to close an arrow file if copycols is false. Unix systems will still let you overwrite an mmapped file, however. Windows does not."}]}]}],"thread_ts":"1617885485.457800","parent_user_id":"U7JQGPGCQ","reactions":[{"name":"+1","users":["U7JQGPGCQ"],"count":1}]}]