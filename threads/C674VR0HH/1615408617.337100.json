[{"client_msg_id":"0263d830-da66-42ee-bfa9-08cc4a910cd4","type":"message","text":"I have an arrow file with a couple of date columns which are `String`. I now want to parse them as dates and save the file back to disk, so I do:\n```df = DataFrame(Arrow.Table(\"myarrowfile.arrow\"))\ndf.date1 = Date.(df.date1)\ndf.date2 = Date.(df.date2)\nArrow.write(\"myarrowfile_dates.arrow\", df)```\nbut now when I do:\n```Arrow.Table(\"myarrowfile_dates.arrow\")```\nI get:\n```TaskFailedException\n\n    nested task error: TaskFailedException\n    Stacktrace:\n     [1] wait\n       @ .\\task.jl:317 [inlined]\n     [2] fetch\n       @ .\\task.jl:332 [inlined]\n     [3] macro expansion\n       @ ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:198 [inlined]\n     [4] (::Arrow.var\"#82#88\"{Channel{Task}, Arrow.Table})()\n       @ Arrow .\\threadingconstructs.jl:169\n    \n        nested task error: KeyError: key 6 not found\n        Stacktrace:\n         [1] getindex\n           @ .\\dict.jl:482 [inlined]\n         [2] build(field::Arrow.Flatbuf.Field, batch::Arrow.Batch, rb::Arrow.Flatbuf.RecordBatch, de::Dict{Int64, Arrow.DictEncoding}, nodeidx::Int64, bufferidx::Int64, convert::Bool)\n           @ Arrow ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:355\n         [3] iterate(x::Arrow.VectorIterator, ::Tuple{Int64, Int64, Int64})\n           @ Arrow ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:336\n         [4] copyto!(dest::Vector{Any}, src::Arrow.VectorIterator)\n           @ Base .\\abstractarray.jl:841\n         [5] _collect\n           @ .\\array.jl:608 [inlined]\n         [6] collect\n           @ .\\array.jl:602 [inlined]\n         [7] macro expansion\n           @ ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:254 [inlined]\n         [8] (::Arrow.var\"#86#92\"{Bool, Dict{Int64, Arrow.DictEncoding}, Arrow.Batch})()\n           @ Arrow .\\threadingconstructs.jl:169\n\nStacktrace:\n [1] wait\n   @ .\\task.jl:317 [inlined]\n [2] Arrow.Table(bytes::Vector{UInt8}, off::Int64, tlen::Nothing; convert::Bool)\n   @ Arrow ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:261\n [3] Arrow.Table(str::String, pos::Int64, len::Nothing; convert::Bool)\n   @ Arrow ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:179\n [4] Table\n   @ ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:179 [inlined]\n [5] top-level scope\n   @ In[14]:1\n [6] eval\n   @ .\\boot.jl:360 [inlined]\n [7] include_string(mapexpr::typeof(REPL.softscope), mod::Module, code::String, filename::String)\n   @ Base .\\loading.jl:1090```\nAny ideas what might be going on?","user":"U7JQGPGCQ","ts":"1615408617.337100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Lrj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have an arrow file with a couple of date columns which are "},{"type":"text","text":"String","style":{"code":true}},{"type":"text","text":". I now want to parse them as dates and save the file back to disk, so I do:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"df = DataFrame(Arrow.Table(\"myarrowfile.arrow\"))\ndf.date1 = Date.(df.date1)\ndf.date2 = Date.(df.date2)\nArrow.write(\"myarrowfile_dates.arrow\", df)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"but now when I do:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Arrow.Table(\"myarrowfile_dates.arrow\")"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I get:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"TaskFailedException\n\n    nested task error: TaskFailedException\n    Stacktrace:\n     [1] wait\n       @ .\\task.jl:317 [inlined]\n     [2] fetch\n       @ .\\task.jl:332 [inlined]\n     [3] macro expansion\n       @ ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:198 [inlined]\n     [4] (::Arrow.var\"#82#88\"{Channel{Task}, Arrow.Table})()\n       @ Arrow .\\threadingconstructs.jl:169\n    \n        nested task error: KeyError: key 6 not found\n        Stacktrace:\n         [1] getindex\n           @ .\\dict.jl:482 [inlined]\n         [2] build(field::Arrow.Flatbuf.Field, batch::Arrow.Batch, rb::Arrow.Flatbuf.RecordBatch, de::Dict{Int64, Arrow.DictEncoding}, nodeidx::Int64, bufferidx::Int64, convert::Bool)\n           @ Arrow ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:355\n         [3] iterate(x::Arrow.VectorIterator, ::Tuple{Int64, Int64, Int64})\n           @ Arrow ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:336\n         [4] copyto!(dest::Vector{Any}, src::Arrow.VectorIterator)\n           @ Base .\\abstractarray.jl:841\n         [5] _collect\n           @ .\\array.jl:608 [inlined]\n         [6] collect\n           @ .\\array.jl:602 [inlined]\n         [7] macro expansion\n           @ ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:254 [inlined]\n         [8] (::Arrow.var\"#86#92\"{Bool, Dict{Int64, Arrow.DictEncoding}, Arrow.Batch})()\n           @ Arrow .\\threadingconstructs.jl:169\n\nStacktrace:\n [1] wait\n   @ .\\task.jl:317 [inlined]\n [2] Arrow.Table(bytes::Vector{UInt8}, off::Int64, tlen::Nothing; convert::Bool)\n   @ Arrow ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:261\n [3] Arrow.Table(str::String, pos::Int64, len::Nothing; convert::Bool)\n   @ Arrow ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:179\n [4] Table\n   @ ~\\.julia\\packages\\Arrow\\Re9EM\\src\\table.jl:179 [inlined]\n [5] top-level scope\n   @ In[14]:1\n [6] eval\n   @ .\\boot.jl:360 [inlined]\n [7] include_string(mapexpr::typeof(REPL.softscope), mod::Module, code::String, filename::String)\n   @ Base .\\loading.jl:1090"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Any ideas what might be going on?"}]}]}],"thread_ts":"1615408617.337100","reply_count":3,"reply_users_count":3,"latest_reply":"1615409383.337600","reply_users":["U9VG1AYSG","U681ELA87","U7JQGPGCQ"],"subscribed":false},{"client_msg_id":"493de7be-eff0-4410-bf33-68b984e07338","type":"message","text":"definitely a bug.  <@U681ELA87>","user":"U9VG1AYSG","ts":"1615409097.337200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jKMUQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"definitely a bug.  "},{"type":"user","user_id":"U681ELA87"}]}]}],"thread_ts":"1615408617.337100","parent_user_id":"U7JQGPGCQ"},{"client_msg_id":"78147343-f617-42de-81d6-82f72b51f674","type":"message","text":"yeah, looks like a bug to me. can you share a MWE in an issue?","user":"U681ELA87","ts":"1615409132.337400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QkeUW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, looks like a bug to me. can you share a MWE in an issue?"}]}]}],"thread_ts":"1615408617.337100","parent_user_id":"U7JQGPGCQ"},{"client_msg_id":"bee5317f-e2c5-4995-ba86-479d430523c9","type":"message","text":"I can try - the data is proprietary but I'll see if I can reproduce with dummy data","user":"U7JQGPGCQ","ts":"1615409383.337600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JIx2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can try - the data is proprietary but I'll see if I can reproduce with dummy data"}]}]}],"thread_ts":"1615408617.337100","parent_user_id":"U7JQGPGCQ"}]