[{"client_msg_id":"c80fb442-5ebb-446e-8737-df603c6e9d72","type":"message","text":"I am trying to record videos of plots inside a Docker container. It's based on Ubuntu 20.04, I am using GLMakie v0.1.20, and I have plotting mostly working. I can plot and save those plots as images. However, I am running into a problem trying to record plots:\n```ERROR: Screen not open!\nStacktrace:\n [1] error(::String) at ./error.jl:33\n [2] colorbuffer(::GLMakie.Screen, ::AbstractPlotting.ImageStorageFormat) at /root/.julia/packages/GLMakie/WsRKK/src/screen.jl:194\n [3] recordframe!(::VideoStream) at /root/.julia/packages/AbstractPlotting/40gRI/src/display.jl:471\n [4] Record(::LeukoPlots.var\"#11#12\"{Bool,LeukoPlots.ResultPlot}, ::Scene, ::StepRangeLen{Float64,Base.TwicePrecision{Float64},Base.TwicePrecision{Float64}}; framerate::Int64) at /root/.julia/packages/AbstractPlotting/40gRI/src/display.jl:631\n [5] #record#897 at /root/.julia/packages/AbstractPlotting/40gRI/src/display.jl:622 [inlined]\n [6] record_plot(::LeukoTypes.Result, ::Array{Array{ColorTypes.Gray{FixedPointNumbers.Normed{UInt8,8}},2},1}, ::String; desired_framerate::Int64, compression::Int64, resolution::Tuple{Int64,Int64}, yrange::Array{Int64,1}, zoomspan::Float64, showprogressbars::Bool, unset_video::Bool) at /root/.julia/packages/LeukoPlots/g7NCi/src/plotting.jl:172\n [7] record_plot(::LeukoTypes.Result, ::Array{Array{ColorTypes.Gray{FixedPointNumbers.Normed{UInt8,8}},2},1}, ::String) at /root/.julia/packages/LeukoPlots/g7NCi/src/plotting.jl:158\n [8] top-level scope at REPL[17]:1```\nI am running Julia under `xvfb-run` in the container, so it has a display. <@U66SGEWAC> Have you ever run into this issue before with your headless plotting experiments? I have recording plots working fine in our EC2 instances, so I know this is possible. I can't remember what I did to create that environment though :cry:","user":"U01537M2E9W","ts":"1608146824.198600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tSpC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am trying to record videos of plots inside a Docker container. It's based on Ubuntu 20.04, I am using GLMakie v0.1.20, and I have plotting mostly working. I can plot and save those plots as images. However, I am running into a problem trying to record plots:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ERROR: Screen not open!\nStacktrace:\n [1] error(::String) at ./error.jl:33\n [2] colorbuffer(::GLMakie.Screen, ::AbstractPlotting.ImageStorageFormat) at /root/.julia/packages/GLMakie/WsRKK/src/screen.jl:194\n [3] recordframe!(::VideoStream) at /root/.julia/packages/AbstractPlotting/40gRI/src/display.jl:471\n [4] Record(::LeukoPlots.var\"#11#12\"{Bool,LeukoPlots.ResultPlot}, ::Scene, ::StepRangeLen{Float64,Base.TwicePrecision{Float64},Base.TwicePrecision{Float64}}; framerate::Int64) at /root/.julia/packages/AbstractPlotting/40gRI/src/display.jl:631\n [5] #record#897 at /root/.julia/packages/AbstractPlotting/40gRI/src/display.jl:622 [inlined]\n [6] record_plot(::LeukoTypes.Result, ::Array{Array{ColorTypes.Gray{FixedPointNumbers.Normed{UInt8,8}},2},1}, ::String; desired_framerate::Int64, compression::Int64, resolution::Tuple{Int64,Int64}, yrange::Array{Int64,1}, zoomspan::Float64, showprogressbars::Bool, unset_video::Bool) at /root/.julia/packages/LeukoPlots/g7NCi/src/plotting.jl:172\n [7] record_plot(::LeukoTypes.Result, ::Array{Array{ColorTypes.Gray{FixedPointNumbers.Normed{UInt8,8}},2},1}, ::String) at /root/.julia/packages/LeukoPlots/g7NCi/src/plotting.jl:158\n [8] top-level scope at REPL[17]:1"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I am running Julia under "},{"type":"text","text":"xvfb-run","style":{"code":true}},{"type":"text","text":" in the container, so it has a display. "},{"type":"user","user_id":"U66SGEWAC"},{"type":"text","text":" Have you ever run into this issue before with your headless plotting experiments? I have recording plots working fine in our EC2 instances, so I know this is possible. I can't remember what I did to create that environment though "},{"type":"emoji","name":"cry"}]}]}],"thread_ts":"1608146824.198600","reply_count":52,"reply_users_count":2,"latest_reply":"1608149246.210800","reply_users":["U66SGEWAC","U01537M2E9W"],"subscribed":false},{"client_msg_id":"6365af77-dcd3-4c5a-8301-b972dadd3a7c","type":"message","text":"did you try `save(plot, \"test.png\")` as a sanity check?","user":"U66SGEWAC","ts":"1608146868.198700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Eso","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"did you try "},{"type":"text","text":"save(plot, \"test.png\")","style":{"code":true}},{"type":"text","text":" as a sanity check?"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"4d4be04d-22f3-4cb6-9fcd-6c4c926fc9b9","type":"message","text":"Yeah, that is how I know that regular plotting is working. I tried `FileIO.save(\"/stuff/test.png\", plot_and_return_scene());` and that plot looks right. (I am checking via a `-v` mapped directory).","user":"U01537M2E9W","ts":"1608146915.198900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QDrA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, that is how I know that regular plotting is working. I tried "},{"type":"text","text":"FileIO.save(\"/stuff/test.png\", plot_and_return_scene());","style":{"code":true}},{"type":"text","text":" and that plot looks right. (I am checking via a "},{"type":"text","text":"-v","style":{"code":true}},{"type":"text","text":" mapped directory)."}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"39aa11a4-3086-4413-a928-458530aac87a","type":"message","text":"ok, weird error  then :open_mouth:","user":"U66SGEWAC","ts":"1608146950.199100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Fvd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, weird error  then "},{"type":"emoji","name":"open_mouth"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"dc55e67c-f732-4b05-a218-d360981f06c3","type":"message","text":"It starts recording `Recording video...   1%|▉`\nand then immediately hits that exception. Let me know if there if anything you want me to try.","user":"U01537M2E9W","ts":"1608146984.199300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xAGJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It starts recording "},{"type":"text","text":"Recording video...   1%|▉","style":{"code":true}},{"type":"text","text":"\nand then immediately hits that exception. Let me know if there if anything you want me to try."}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"3b43850a-cf5a-48db-9fe9-f8e83cafe82c","type":"message","text":"For some extra context, I am using Julia v1.5.2, I installed the apt packages here <https://nextjournal.com/sdanisch/makie-1.0> and I have had to patch Julia's libstdc++ because of this GLFW error <https://github.com/JuliaGL/GLFW.jl/issues/198> (using the workaround in OP's issue)","user":"U01537M2E9W","ts":"1608147041.199500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dpEB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"For some extra context, I am using Julia v1.5.2, I installed the apt packages here "},{"type":"link","url":"https://nextjournal.com/sdanisch/makie-1.0"},{"type":"text","text":" and I have had to patch Julia's libstdc++ because of this GLFW error "},{"type":"link","url":"https://github.com/JuliaGL/GLFW.jl/issues/198"},{"type":"text","text":" (using the workaround in OP's issue)"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"fcc560ab-862d-4c20-84b6-e818d415c7ae","type":"message","text":"Ok, this is weird, since save also uses `colorbuffer`  but seems to work fine^^","user":"U66SGEWAC","ts":"1608147120.199700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pDH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, this is weird, since save also uses "},{"type":"text","text":"colorbuffer","style":{"code":true}},{"type":"text","text":"  but seems to work fine^^"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"080ea7e9-4bb3-4b9d-9350-d894ebb4ec98","type":"message","text":"One final weird thing it does is print the scene to the terminal, even though I put a semicolon after the call to record.\n```........\n    ├ Scene (728px, 40px)\n    └ Scene (300px, 40px)```\nNever seen it do that before.","user":"U01537M2E9W","ts":"1608147154.199900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pIw95","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"One final weird thing it does is print the scene to the terminal, even though I put a semicolon after the call to record.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"........\n    ├ Scene (728px, 40px)\n    └ Scene (300px, 40px)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Never seen it do that before."}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"d4e33122-8c17-40f9-8dd5-c11d21d078e1","type":"message","text":"can you try:\n```s = scatter(1:4)\nscreen = display(s)\n@show isopen(screen)\n@show typeof(colorbuffer(screen))```","user":"U66SGEWAC","ts":"1608147156.200100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e8EdP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you try:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"s = scatter(1:4)\nscreen = display(s)\n@show isopen(screen)\n@show typeof(colorbuffer(screen))"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"55e78a23-3bbe-4102-941e-1288e1339c02","type":"message","text":"that should be fine I think","user":"U66SGEWAC","ts":"1608147173.200300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SlQUU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that should be fine I think"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"57f4737a-36c1-4c84-bb4f-692d6828e9b7","type":"message","text":"```julia&gt; s = scatter(1:4)\nScene (960px, 540px):\n  2 Plots:\n    ├ Combined{AbstractPlotting.axis2d,Tuple{Tuple{Tuple{Float32,Float32},Tuple{Float32,Float32}}}}\n    └ Combined{AbstractPlotting.scatter,Tuple{Array{Point{2,Float32},1}}}\n  1 Child Scene:\n    └ Scene (960px, 540px)\n\njulia&gt; screen = display(s)\nScene (960px, 540px):\n  2 Plots:\n    ├ Combined{AbstractPlotting.axis2d,Tuple{Tuple{Tuple{Float32,Float32},Tuple{Float32,Float32}}}}\n    └ Combined{AbstractPlotting.scatter,Tuple{Array{Point{2,Float32},1}}}\n  1 Child Scene:\n    └ Scene (960px, 540px)\n\njulia&gt; @show isopen(screen)\nERROR: MethodError: no method matching isopen(::Nothing)\nClosest candidates are:\n  isopen(::Base.BufferStream) at stream.jl:1216\n  isopen(::IOStream) at iostream.jl:59\n  isopen(::Base.Filesystem.File) at filesystem.jl:94\n  ...\nStacktrace:\n [1] top-level scope at show.jl:641\n\njulia&gt; @show typeof(colorbuffer(screen))\nERROR: UndefVarError: colorbuffer not defined\nStacktrace:\n [1] top-level scope at show.jl:641```","user":"U01537M2E9W","ts":"1608147231.200500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KE1np","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> s = scatter(1:4)\nScene (960px, 540px):\n  2 Plots:\n    ├ Combined{AbstractPlotting.axis2d,Tuple{Tuple{Tuple{Float32,Float32},Tuple{Float32,Float32}}}}\n    └ Combined{AbstractPlotting.scatter,Tuple{Array{Point{2,Float32},1}}}\n  1 Child Scene:\n    └ Scene (960px, 540px)\n\njulia> screen = display(s)\nScene (960px, 540px):\n  2 Plots:\n    ├ Combined{AbstractPlotting.axis2d,Tuple{Tuple{Tuple{Float32,Float32},Tuple{Float32,Float32}}}}\n    └ Combined{AbstractPlotting.scatter,Tuple{Array{Point{2,Float32},1}}}\n  1 Child Scene:\n    └ Scene (960px, 540px)\n\njulia> @show isopen(screen)\nERROR: MethodError: no method matching isopen(::Nothing)\nClosest candidates are:\n  isopen(::Base.BufferStream) at stream.jl:1216\n  isopen(::IOStream) at iostream.jl:59\n  isopen(::Base.Filesystem.File) at filesystem.jl:94\n  ...\nStacktrace:\n [1] top-level scope at show.jl:641\n\njulia> @show typeof(colorbuffer(screen))\nERROR: UndefVarError: colorbuffer not defined\nStacktrace:\n [1] top-level scope at show.jl:641"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"d94de7be-27c9-4213-a7bb-0ba476cc0e4a","type":"message","text":"oh what","user":"U66SGEWAC","ts":"1608147247.200700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qyT+R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"oh what"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"2e767768-51fb-4cd2-b672-437ecac1b409","type":"message","text":"so that does actually look like you don't have glmakie loaded/","user":"U66SGEWAC","ts":"1608147267.200900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hKQl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so that does actually look like you don't have glmakie loaded/"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"18935a41-0e9b-4e26-b805-797d6d478823","type":"message","text":"?","user":"U66SGEWAC","ts":"1608147269.201100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RqX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"?"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"5460eb92-2146-4b06-b9a7-e85a488aef5f","type":"message","text":"But your original error does definitely have GLMakie loaded","user":"U66SGEWAC","ts":"1608147282.201300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LPzl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But your original error does definitely have GLMakie loaded"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"8eefdb7e-8557-4720-bfdc-bfdac064e94f","type":"message","text":"`display(s)` definitely shouldn't return nothing :smile:","user":"U66SGEWAC","ts":"1608147321.201500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OS+P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"display(s)","style":{"code":true}},{"type":"text","text":" definitely shouldn't return nothing "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"92e50cf8-b4ac-4b12-9a8a-85d809f7912d","type":"message","text":"..if you have GLMakie loaded","user":"U66SGEWAC","ts":"1608147330.201700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"W7KgI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"..if you have GLMakie loaded"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"1bfb3678-74e5-44bd-acde-bb64cc03e651","type":"message","text":"Loaded as in `using GLMakie`?","user":"U01537M2E9W","ts":"1608147339.201900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VtXd4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Loaded as in "},{"type":"text","text":"using GLMakie","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"bd1e4d00-4ebf-4793-9f3d-e219f9de66a6","type":"message","text":"yes","user":"U66SGEWAC","ts":"1608147342.202100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z6/I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"98752b74-c5e8-4be8-87ba-684ce5d93262","type":"message","text":"It is loaded, then","user":"U01537M2E9W","ts":"1608147345.202300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"883","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It is loaded, then"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"f835aeef-9500-4d06-b70f-3cc475ea1549","type":"message","text":"did you load any other backend?","user":"U66SGEWAC","ts":"1608147368.202500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3hsyt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"did you load any other backend?"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"fa3bc229-c834-4ed3-8e4f-ac03b23e7fff","type":"message","text":"No. GLMakie is the only one I installed and loaded.","user":"U01537M2E9W","ts":"1608147379.202700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TJ=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No. GLMakie is the only one I installed and loaded."}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"af61f28f-f8bc-46f0-bfeb-c62bfb8806a5","type":"message","text":"Ah, do you maybe have `inline!(true)` set or so?","user":"U66SGEWAC","ts":"1608147404.202900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+Mq8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, do you maybe have "},{"type":"text","text":"inline!(true)","style":{"code":true}},{"type":"text","text":" set or so?"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"8e359664-3695-4c24-b034-522e7dd2be09","type":"message","text":"How can I check that?","user":"U01537M2E9W","ts":"1608147421.203100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bW3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How can I check that?"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"5e0e391d-1564-49b1-8128-088dcb7acaa5","type":"message","text":"well, if you didnt set it you shouldn't have it","user":"U66SGEWAC","ts":"1608147431.203300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6iJK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well, if you didnt set it you shouldn't have it"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"35978199-78ce-47f1-bb9f-808be2621e6d","type":"message","text":"Ah, did you maybe ignore some warnings ?\nWhat does `GLMakie.WORKING_OPENGL` return?","user":"U66SGEWAC","ts":"1608147496.203500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MuTw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, did you maybe ignore some warnings ?\nWhat does "},{"type":"text","text":"GLMakie.WORKING_OPENGL","style":{"code":true}},{"type":"text","text":" return?"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"663f4448-424b-4d70-8744-a36a0797e422","type":"message","text":"I made sure there are no warnings or errors when building GLMakie.\n```julia&gt; GLMakie.WORKING_OPENGL\ntrue```","user":"U01537M2E9W","ts":"1608147521.203700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/rJPl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I made sure there are no warnings or errors when building GLMakie.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> GLMakie.WORKING_OPENGL\ntrue"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"b179136f-33cf-4ea1-bd7e-56cff782ed88","type":"message","text":"Can you try GLMakie.activate!() and then try display(s) again?","user":"U66SGEWAC","ts":"1608147584.204200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"rLD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can you try GLMakie.activate!() and then try display(s) again?"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"46c7cb0b-ed87-4320-9aa8-047c9b37dad9","type":"message","text":"Still `nothing`","user":"U01537M2E9W","ts":"1608147596.204700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/4hG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Still "},{"type":"text","text":"nothing","style":{"code":true}}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"a99d0fa6-3008-421d-a41e-f522e6ac18ff","type":"message","text":"Ok give me a second Im having dinner ;) but this sure is weird...in the same process save works and the picture looks fine??","user":"U66SGEWAC","ts":"1608147669.206200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ouVl/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok give me a second Im having dinner ;) but this sure is weird...in the same process save works and the picture looks fine??"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"847951cb-6dd4-4216-b59b-7150c446d6d1","type":"message","text":"Yeah the saved image is correct. Pretty much pixel perfect. Thanks for helping","user":"U01537M2E9W","ts":"1608147697.206400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z=uk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah the saved image is correct. Pretty much pixel perfect. Thanks for helping"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"bab22b5f-b3d1-4f53-bc13-3a20beed5c3c","type":"message","text":"Ok, can you try:\n```screen = GLMakie.global_gl_screen(size(s), true)```","user":"U66SGEWAC","ts":"1608148485.206600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8+p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok, can you try:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"screen = GLMakie.global_gl_screen(size(s), true)"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"63e288d6-8e9a-43a5-a9f7-ad86e6104fd2","type":"message","text":"```julia&gt; screen = GLMakie.global_gl_screen(size(s), true)\nGLMakie.Screen(...)```","user":"U01537M2E9W","ts":"1608148519.206800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mN=","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> screen = GLMakie.global_gl_screen(size(s), true)\nGLMakie.Screen(...)"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"e8a83053-b5b6-478d-a389-90932673e2f3","type":"message","text":"`AbstractPlotting.backend_display(screen, s)`","user":"U66SGEWAC","ts":"1608148532.207000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pLt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"AbstractPlotting.backend_display(screen, s)","style":{"code":true}}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"955667d7-e92b-4e8f-bc4a-549402e42d74","type":"message","text":"```julia&gt; AbstractPlotting.backend_display(screen, s)\n\nsignal (11): Segmentation fault\nin expression starting at REPL[70]:1\nglfwSetWindowPosCallback at /root/.julia/artifacts/48ea4f1374cd7ef7e81e416d5f3e981d444883a6/lib/libglfw.so (unknown line)\nSetWindowPosCallback at /root/.julia/packages/GLFW/CBo9c/src/callback.jl:56 [inlined]\ndisconnect! at /root/.julia/packages/GLMakie/WsRKK/src/events.jl:98\nwindow_area at /root/.julia/packages/GLMakie/WsRKK/src/events.jl:87\nwindow_area at /root/.julia/packages/GLMakie/WsRKK/src/events.jl:66 [inlined]\nregister_callbacks at /root/.julia/packages/AbstractPlotting/40gRI/src/interaction/events.jl:53\nbackend_display at /root/.julia/packages/GLMakie/WsRKK/src/screen.jl:122```","user":"U01537M2E9W","ts":"1608148548.207200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"tQt1W","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> AbstractPlotting.backend_display(screen, s)\n\nsignal (11): Segmentation fault\nin expression starting at REPL[70]:1\nglfwSetWindowPosCallback at /root/.julia/artifacts/48ea4f1374cd7ef7e81e416d5f3e981d444883a6/lib/libglfw.so (unknown line)\nSetWindowPosCallback at /root/.julia/packages/GLFW/CBo9c/src/callback.jl:56 [inlined]\ndisconnect! at /root/.julia/packages/GLMakie/WsRKK/src/events.jl:98\nwindow_area at /root/.julia/packages/GLMakie/WsRKK/src/events.jl:87\nwindow_area at /root/.julia/packages/GLMakie/WsRKK/src/events.jl:66 [inlined]\nregister_callbacks at /root/.julia/packages/AbstractPlotting/40gRI/src/interaction/events.jl:53\nbackend_display at /root/.julia/packages/GLMakie/WsRKK/src/screen.jl:122"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"31376865-2533-44f9-b3a1-76ccb33220d4","type":"message","text":"wow","user":"U66SGEWAC","ts":"1608148553.207400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r4BY4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"wow"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"7414cf69-4917-41bc-9cef-e28d1139d679","type":"message","text":"Hm...maybe it needs to be false for headless...\n```screen = GLMakie.global_gl_screen(size(s), false)\nAbstractPlotting.backend_display(screen, s)\ncolorbuffer(s)```","user":"U66SGEWAC","ts":"1608148605.207600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"hOY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hm...maybe it needs to be false for headless...\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"screen = GLMakie.global_gl_screen(size(s), false)\nAbstractPlotting.backend_display(screen, s)\ncolorbuffer(s)"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"23b70533-61c2-4ccd-8c86-eee269deeef1","type":"message","text":"```julia&gt; using GLMakie\n\njulia&gt; s = scatter(1:4)\nScene (960px, 540px):\n  2 Plots:\n    ├ Combined{AbstractPlotting.axis2d,Tuple{Tuple{Tuple{Float32,Float32},Tuple{Float32,Float32}}}}\n    └ Combined{AbstractPlotting.scatter,Tuple{Array{Point{2,Float32},1}}}\n  1 Child Scene:\n    └ Scene (960px, 540px)\n\njulia&gt; screen = GLMakie.global_gl_screen(size(s), false)\nGLMakie.Screen(...)\n\njulia&gt; AbstractPlotting.backend_display(screen, s)\n\njulia&gt; colorbuffer(s)\nERROR: UndefVarError: colorbuffer not defined\nStacktrace:\n [1] top-level scope at REPL[6]:1```","user":"U01537M2E9W","ts":"1608148661.207800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jyEZT","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> using GLMakie\n\njulia> s = scatter(1:4)\nScene (960px, 540px):\n  2 Plots:\n    ├ Combined{AbstractPlotting.axis2d,Tuple{Tuple{Tuple{Float32,Float32},Tuple{Float32,Float32}}}}\n    └ Combined{AbstractPlotting.scatter,Tuple{Array{Point{2,Float32},1}}}\n  1 Child Scene:\n    └ Scene (960px, 540px)\n\njulia> screen = GLMakie.global_gl_screen(size(s), false)\nGLMakie.Screen(...)\n\njulia> AbstractPlotting.backend_display(screen, s)\n\njulia> colorbuffer(s)\nERROR: UndefVarError: colorbuffer not defined\nStacktrace:\n [1] top-level scope at REPL[6]:1"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"522677f6-686c-4d33-af17-b01dc9fb96c3","type":"message","text":"`AbstractPlotting.colorbuffer(s)`","user":"U66SGEWAC","ts":"1608148679.208000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qS3e7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"AbstractPlotting.colorbuffer(s)","style":{"code":true}}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"bd8097cd-4491-4108-9b07-44c79c91b959","type":"message","text":"```julia&gt; AbstractPlotting.colorbuffer(s)\n540×960 PermutedDimsArray(::Array{RGB{N0f8},2}, (2, 1)) with eltype ColorTypes.RGB{FixedPointNumbers.Normed{UInt8,8}}:```","user":"U01537M2E9W","ts":"1608148708.208200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UBjJ","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> AbstractPlotting.colorbuffer(s)\n540×960 PermutedDimsArray(::Array{RGB{N0f8},2}, (2, 1)) with eltype ColorTypes.RGB{FixedPointNumbers.Normed{UInt8,8}}:"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"0146b5cc-63a4-4ca3-8de5-1196ae8020af","type":"message","text":"Well, that sounds good :smile:","user":"U66SGEWAC","ts":"1608148714.208400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"li9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Well, that sounds good "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"bae62173-f6a7-4245-92b2-b429edacfc05","type":"message","text":"isopen(screen)?","user":"U66SGEWAC","ts":"1608148724.208600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=rW+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"isopen(screen)?"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"d8ac4885-ee32-49d8-a7df-d1d6d7a81e39","type":"message","text":"```julia&gt; isopen(screen)\ntrue```","user":"U01537M2E9W","ts":"1608148732.208800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cw+","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> isopen(screen)\ntrue"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"48ce105d-a4e3-424e-a889-3110fb0328ab","type":"message","text":"```screen = AbstractPlotting.backend_display(AbstractPlotting.current_backend[], s)```","user":"U66SGEWAC","ts":"1608148807.209000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5=t=M","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"screen = AbstractPlotting.backend_display(AbstractPlotting.current_backend[], s)"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"825a65fb-f7d8-4bba-96aa-578468d7f0a0","type":"message","text":"```julia&gt; screen = AbstractPlotting.backend_display(AbstractPlotting.current_backend[], s)\nGLMakie.Screen(...)```","user":"U01537M2E9W","ts":"1608148814.209200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qR8Tw","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> screen = AbstractPlotting.backend_display(AbstractPlotting.current_backend[], s)\nGLMakie.Screen(...)"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"2725afe0-5ee8-4512-a4ee-9394e37348ca","type":"message","text":"```@show isopen(s)\n\nrecord(s, \"test.mp4\", 1:4) do i\n\nend```\n","user":"U66SGEWAC","ts":"1608148884.209400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gEmX","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@show isopen(s)\n\nrecord(s, \"test.mp4\", 1:4) do i\n\nend"}]},{"type":"rich_text_section","elements":[]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"87e7d64e-5414-48f4-898c-2dc49cadd944","type":"message","text":"```julia&gt; @show isopen(s)\nisopen(s) = false\nfalse\n\njulia&gt; record(s, \"test.mp4\", 1:4) do i\n       end\n\"test.mp4\"\n\njulia&gt; record(s, \"/stuff/test.mp4\", 1:4) do i\n       end\n\"/stuff/test.mp4\"```\nThat produced a seemingly correct mp4","user":"U01537M2E9W","ts":"1608148949.209600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NgI/","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> @show isopen(s)\nisopen(s) = false\nfalse\n\njulia> record(s, \"test.mp4\", 1:4) do i\n       end\n\"test.mp4\"\n\njulia> record(s, \"/stuff/test.mp4\", 1:4) do i\n       end\n\"/stuff/test.mp4\""}]},{"type":"rich_text_section","elements":[{"type":"text","text":"That produced a seemingly correct mp4"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"d663006b-15f3-41da-b3c7-4eec4a8b21e6","type":"message","text":"hm, so some weird edge case!?","user":"U66SGEWAC","ts":"1608148971.209800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WOVc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hm, so some weird edge case!?"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"098e0643-26e7-421d-b104-8c48b6f6cfce","type":"message","text":"hmm hold on","user":"U01537M2E9W","ts":"1608149095.210000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LKr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm hold on"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"0980b23e-5910-4de7-93c8-7b555a47d58c","type":"message","text":"Ah... I think this has all been my fault. I think my custom renderloop function was crashing and closing the screen on its way out.","user":"U01537M2E9W","ts":"1608149182.210200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9dTI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah... I think this has all been my fault. I think my custom renderloop function was crashing and closing the screen on its way out."}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"be0e83bd-753a-4d9a-8cc7-4d4f75342729","type":"message","text":"I have it all working now. Thank you so much for the help Simon.","user":"U01537M2E9W","ts":"1608149207.210400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ti6w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have it all working now. Thank you so much for the help Simon."}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"a84de199-73e6-414b-982b-104a269738f7","type":"message","text":"Lol, you should have said that you're having a custom renderloop :smile:","user":"U66SGEWAC","ts":"1608149219.210600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"C7y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Lol, you should have said that you're having a custom renderloop "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"},{"client_msg_id":"9fac3438-5613-472d-b635-afd0b8e46f7a","type":"message","text":"I suppose so. I have it because I get 100% cpu usage otherwise","user":"U01537M2E9W","ts":"1608149246.210800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NjxQy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I suppose so. I have it because I get 100% cpu usage otherwise"}]}]}],"thread_ts":"1608146824.198600","parent_user_id":"U01537M2E9W"}]