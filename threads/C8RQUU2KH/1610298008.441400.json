[{"type":"message","text":"I worked a bit on revamping the event system last week, to allow for events to be consumed. This should enable some things to be fixed, for example an `LMenu` triggering things below it, or inputs in a `LTextbox` triggering other key events. I made a translation widget for 3D plots with it now, which would trigger the camera in the old system. Here's the (somewhat unrefined) result:","files":[{"id":"F01J9NYQV4M","created":1610297800,"timestamp":1610297800,"name":"out.mp4","title":"out.mp4","mimetype":"video/mp4","filetype":"mp4","pretty_type":"MPEG 4 Video","user":"UQMHE3ER4","editable":false,"size":2038511,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01J9NYQV4M/out.mp4","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01J9NYQV4M/download/out.mp4","thumb_video":"https://files.slack.com/files-tmb/T68168MUP-F01J9NYQV4M-3ee6e3b544/out_thumb_video.jpeg","permalink":"https://julialang.slack.com/files/UQMHE3ER4/F01J9NYQV4M/out.mp4","permalink_public":"https://slack-files.com/T68168MUP-F01J9NYQV4M-bffb966a99","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"v=bR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I worked a bit on revamping the event system last week, to allow for events to be consumed. This should enable some things to be fixed, for example an "},{"type":"text","text":"LMenu","style":{"code":true}},{"type":"text","text":" triggering things below it, or inputs in a "},{"type":"text","text":"LTextbox","style":{"code":true}},{"type":"text","text":" triggering other key events. I made a translation widget for 3D plots with it now, which would trigger the camera in the old system. Here's the (somewhat unrefined) result:"}]}]}],"user":"UQMHE3ER4","display_as_bot":false,"ts":"1610298008.441400","thread_ts":"1610298008.441400","reply_count":19,"reply_users_count":4,"latest_reply":"1610395577.454200","reply_users":["UK1BNFHFV","UQMHE3ER4","U66SGEWAC","U8J1KET6K"],"subscribed":false,"reactions":[{"name":"heart","users":["U7ZNTQFLH","U7R243N1W","U01864DR1L1","US5RA4FK4","U881D0W2C","U9769MVA7","UK1BNFHFV","U9MED583T","UB197FRCL","UAH43TMUN","U66SGEWAC","U9XUKK1DH"],"count":12},{"name":"+1","users":["U66SGEWAC","U017JTQFNEQ","U9XUKK1DH"],"count":3}]},{"client_msg_id":"CE9BB5DD-2700-4372-B368-7863DC8AE865","type":"message","text":"Cool, what's the new principle and can that be integrated well with what we have now?","user":"UK1BNFHFV","ts":"1610304799.443700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4X/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Cool, what's the new principle and can that be integrated well with what we have now?"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"bb7e01cd-65c0-4ebe-b6d8-2c129f3a155c","type":"message","text":"It's similar to what you did with interactions in MakieLayout a while ago. Additionally I added a priority system, so an interaction with a priority &gt; than another will be executed first (regardless of where it's attached). I also allowed an event to be consumed by returning true from interaction processing.","user":"UQMHE3ER4","ts":"1610305218.444000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WBJ8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's similar to what you did with interactions in MakieLayout a while ago. Additionally I added a priority system, so an interaction with a priority > than another will be executed first (regardless of where it's attached). I also allowed an event to be consumed by returning true from interaction processing."}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"f026e3a9-a843-47d4-86f9-cd3ac5c12707","type":"message","text":"So here there are interactions for the camera, with some priority (I think 50?) and another interaction with a higher priority to translate a plot. Both act on `MouseMovedEvent`s, the translation acts first and consumed the event when it should. So it doesn't get passed on to camera interactions","user":"UQMHE3ER4","ts":"1610305342.444200","team":"T68168MUP","edited":{"user":"UQMHE3ER4","ts":"1610305356.000000"},"blocks":[{"type":"rich_text","block_id":"Lssh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So here there are interactions for the camera, with some priority (I think 50?) and another interaction with a higher priority to translate a plot. Both act on "},{"type":"text","text":"MouseMovedEvent","style":{"code":true}},{"type":"text","text":"s, the translation acts first and consumed the event when it should. So it doesn't get passed on to camera interactions"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"6a8dd0cf-ac71-4b86-9ed3-8d4a2683563b","type":"message","text":"It'll take a bit of thought what to do with situations like `current_pos = events(scene).mouseposition[]`, but anything like `on(some_event)` should be relatively straight forward to port, I think. And MakieLayout interactions should be really easy, it's close to the same from the outside.","user":"UQMHE3ER4","ts":"1610305604.444600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pGz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It'll take a bit of thought what to do with situations like "},{"type":"text","text":"current_pos = events(scene).mouseposition[]","style":{"code":true}},{"type":"text","text":", but anything like "},{"type":"text","text":"on(some_event)","style":{"code":true}},{"type":"text","text":" should be relatively straight forward to port, I think. And MakieLayout interactions should be really easy, it's close to the same from the outside."}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"8757a153-5045-4ee8-a3cf-8bae63082425","type":"message","text":"If the general idea of this gets a :thumbsup: I'll take some time to clean things about, do some performance testing and translate everything","user":"UQMHE3ER4","ts":"1610305727.444800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cTcO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If the general idea of this gets a "},{"type":"emoji","name":"thumbsup"},{"type":"text","text":" I'll take some time to clean things about, do some performance testing and translate everything"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"61337ef8-4fc7-4bc3-b2f1-3c6b877403a7","type":"message","text":"It's super nice to be able to do this :slightly_smiling_face:","user":"U66SGEWAC","ts":"1610365913.446300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F4LM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's super nice to be able to do this "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"3af3ea43-b1b4-46d6-a0a4-3058cc0dc34d","type":"message","text":"Of course, we'd need to figure out how breaking it is..I haven't had a chance yet to look at your prs :disappointed:","user":"U66SGEWAC","ts":"1610366594.446500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9Mm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Of course, we'd need to figure out how breaking it is..I haven't had a chance yet to look at your prs "},{"type":"emoji","name":"disappointed"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"658ccf2a-62a9-4c2e-a742-c3f7c6cb8ddc","type":"message","text":"I think the end game of this would be to replace the current `scene.events` , because anything in there would disregard priority and event consuming from the new system. So in that sense it's very breaking, I suppose.\nBut we can keep `scene.events` around for a while without hard-breaking anything and inbuilt interactivity should all be portable without major differences","user":"UQMHE3ER4","ts":"1610369506.446700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z655j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the end game of this would be to replace the current "},{"type":"text","text":"scene.events","style":{"code":true}},{"type":"text","text":" , because anything in there would disregard priority and event consuming from the new system. So in that sense it's very breaking, I suppose.\nBut we can keep "},{"type":"text","text":"scene.events","style":{"code":true}},{"type":"text","text":" around for a while without hard-breaking anything and inbuilt interactivity should all be portable without major differences"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"5c185451-7314-440b-85b4-d7b7bfe87166","type":"message","text":"Hm i was actually thinking about removing scene events...If we're lucky, my plans look similar to what you have outlined :smile:","user":"U66SGEWAC","ts":"1610370476.446900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/sqC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hm i was actually thinking about removing scene events...If we're lucky, my plans look similar to what you have outlined "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"776b4025-53e0-4219-8de3-73f8a1fa2551","type":"message","text":"Do you have something concrete in mind?","user":"UQMHE3ER4","ts":"1610370499.447100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4RWB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Do you have something concrete in mind?"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"66a8d8e4-bc5a-427c-a08c-bbb08bfe2375","type":"message","text":"well first of all, we're acting as if the window global events are lokal to the scene, which isn't true","user":"U66SGEWAC","ts":"1610370533.447300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ASvV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well first of all, we're acting as if the window global events are lokal to the scene, which isn't true"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"55503c1c-b4be-4526-be87-6a103c34974a","type":"message","text":"and then, I was also considering something more like:\n```on(scene, :mouseposition) do mp\n...\nend```\nWhich then can be implemented in the way we want...and only if someone listens to it, the mouseposition event will be sent to that scene","user":"U66SGEWAC","ts":"1610370603.447500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Ohs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and then, I was also considering something more like:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"on(scene, :mouseposition) do mp\n...\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Which then can be implemented in the way we want...and only if someone listens to it, the mouseposition event will be sent to that scene"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"cedac31f-afe8-4e89-9f15-f9b5a86cb97e","type":"message","text":"Though it would make sense to go through events in reverse render order (i.e. the thing on top gets to act first)","user":"UQMHE3ER4","ts":"1610370615.447700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZKh1t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Though it would make sense to go through events in reverse render order (i.e. the thing on top gets to act first)"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"ea5c1900-884b-46a5-a73c-029eb5375c35","type":"message","text":"In my version you may do\n```register!(scene, name[, priority]) do event::EventType, scene\n...\nend```\nso it's not too different from that","user":"UQMHE3ER4","ts":"1610370774.447900","team":"T68168MUP","edited":{"user":"UQMHE3ER4","ts":"1610370790.000000"},"blocks":[{"type":"rich_text","block_id":"FvYx","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"In my version you may do\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"register!(scene, name[, priority]) do event::EventType, scene\n...\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"so it's not too different from that"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"b7faf824-f2cc-4aed-a334-3f64a093df56","type":"message","text":"It is a bit confusing for me that the colored squares are floating instead of being projected on the axis planes","user":"U8J1KET6K","ts":"1610392912.453400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3dL","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It is a bit confusing for me that the colored squares are floating instead of being projected on the axis planes"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"56af10fa-1764-424c-bb21-219039d61225","type":"message","text":"but other than that looks great, the lines are very helpful","user":"U8J1KET6K","ts":"1610392947.453600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fwWy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but other than that looks great, the lines are very helpful"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"86a16077-98cb-4c26-91b7-814a4b2e0fd7","type":"message","text":"It's based on <https://github.com/CedricGuillemet/ImGuizmo>","user":"UQMHE3ER4","ts":"1610393004.453800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"86VwW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's based on "},{"type":"link","url":"https://github.com/CedricGuillemet/ImGuizmo"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"6f95f430-e2be-4353-850b-5770ef6de229","type":"message","text":"ah okay there it makes much more sense for the squares to be floaty","user":"U8J1KET6K","ts":"1610393056.454000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8uRTg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah okay there it makes much more sense for the squares to be floaty"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"},{"client_msg_id":"b362c27b-8b29-4059-b797-31040c995bce","type":"message","text":"Oh wow, I build something very similar for one of the first GLPlot demos!","user":"U66SGEWAC","ts":"1610395577.454200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1wTR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh wow, I build something very similar for one of the first GLPlot demos!"}]}]}],"thread_ts":"1610298008.441400","parent_user_id":"UQMHE3ER4"}]