[{"client_msg_id":"e6926a1e-cdc3-4d2f-a138-cb9919ef06ac","type":"message","text":"I don’t really when to use an `Axis` vs indexing like `fig[1,1]`. If I’m writing a function to make part of a plot, should I be passing it `fig[1,1]` or an axis? should the function be making the axis and returning it?","user":"UCZ7VBGUD","ts":"1615999589.017100","team":"T68168MUP","edited":{"user":"UCZ7VBGUD","ts":"1615999599.000000"},"blocks":[{"type":"rich_text","block_id":"rTCu9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don’t really when to use an "},{"type":"text","text":"Axis","style":{"code":true}},{"type":"text","text":" vs indexing like "},{"type":"text","text":"fig[1,1]","style":{"code":true}},{"type":"text","text":". If I’m writing a function to make part of a plot, should I be passing it "},{"type":"text","text":"fig[1,1]","style":{"code":true}},{"type":"text","text":" or an axis? should the function be making the axis and returning it?"}]}]}],"thread_ts":"1615999589.017100","reply_count":44,"reply_users_count":2,"latest_reply":"1616005261.027600","reply_users":["UK1BNFHFV","UCZ7VBGUD"],"subscribed":false},{"client_msg_id":"c1c04f1d-68ad-40c6-8eae-3b752b4bde51","type":"message","text":"`fig[1, 1]` just refers to the position in the figure. You pass this to functions that create layoutables and your input argument decides where. For example, if you have a function that creates an axis and a colorbar and a legend, you can pass any nested position in the figure, for example `make_objects(f[1:2, 3][2, 3])`","user":"UK1BNFHFV","ts":"1615999692.017300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1Lji","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"fig[1, 1]","style":{"code":true}},{"type":"text","text":" just refers to the position in the figure. You pass this to functions that create layoutables and your input argument decides where. For example, if you have a function that creates an axis and a colorbar and a legend, you can pass any nested position in the figure, for example "},{"type":"text","text":"make_objects(f[1:2, 3][2, 3])","style":{"code":true}}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"6fdaf9af-1a44-4dcd-a1f9-dfd3933f0afe","type":"message","text":"you pass the axis if your plotting function just \"plots\", so handles only functions like `scatter!` etc","user":"UK1BNFHFV","ts":"1615999726.017500","team":"T68168MUP","edited":{"user":"UK1BNFHFV","ts":"1615999743.000000"},"blocks":[{"type":"rich_text","block_id":"A+Rhw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you pass the axis if your plotting function just \"plots\", so handles only functions like "},{"type":"text","text":"scatter!","style":{"code":true}},{"type":"text","text":" etc"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"2f29a56b-bf0e-48d7-a1ab-8cb1dc5fd94d","type":"message","text":"ah ok, I think I get it. So passing the subposition means the function has the freedom to put whatever it wants there, such as a whole sublayout. Passing the axis means you can only plot into that axis, so it’s for a more restricted type of function call","user":"UCZ7VBGUD","ts":"1615999810.017800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1epzW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah ok, I think I get it. So passing the subposition means the function has the freedom to put whatever it wants there, such as a whole sublayout. Passing the axis means you can only plot into that axis, so it’s for a more restricted type of function call"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"3293e754-107a-4ac7-9c5c-fe141296a41f","type":"message","text":"yeah","user":"UK1BNFHFV","ts":"1615999838.018000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d6c","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"06cb8454-243c-4de4-8083-eee7d7fc4595","type":"message","text":"that's usually how I assemble my more complex figures. write functions that assemble things that always go together and put them in a subposition of some larger figure","user":"UK1BNFHFV","ts":"1615999920.018200","team":"T68168MUP","edited":{"user":"UK1BNFHFV","ts":"1615999946.000000"},"blocks":[{"type":"rich_text","block_id":"SoLw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's usually how I assemble my more complex figures. write functions that assemble things that always go together and put them in a subposition of some larger figure"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"c41b633c-90d6-421a-a96e-9cd7fc85367d","type":"message","text":"I have a function where I want to plot a heatmap and a colorbar next to it in `make_heatmap_with_colorbar`, and then sometimes I want to plot something below the heatmap and turn off the heatmap’s x-axis. This seems kind of tricky, because if I pass in a subposition and create a layout inside my ``make_heatmap_with_colorbar` function, then I need to pass out the axis, but not only that, I can’t actually plot my optional plot directly below the heatmap, only below the heatmap+colorbar sublayout","user":"UCZ7VBGUD","ts":"1615999954.018800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ot7k","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a function where I want to plot a heatmap and a colorbar next to it in "},{"type":"text","text":"make_heatmap_with_colorbar","style":{"code":true}},{"type":"text","text":", and then sometimes I want to plot something below the heatmap and turn off the heatmap’s x-axis. This seems kind of tricky, because if I pass in a subposition and create a layout inside my `"},{"type":"text","text":"make_heatmap_with_colorbar","style":{"code":true}},{"type":"text","text":" function, then I need to pass out the axis, but not only that, I can’t actually plot my optional plot directly below the heatmap, only below the heatmap+colorbar sublayout"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"f35364fa-a1ca-4b30-9ed8-9764db1fb67e","type":"message","text":"so I think I need to have separate `make_heatmap`, `make_colorbar`, and `make_below_plot` functions and then do the layouting in the outer level","user":"UCZ7VBGUD","ts":"1615999999.019000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SRcdW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so I think I need to have separate "},{"type":"text","text":"make_heatmap","style":{"code":true}},{"type":"text","text":", "},{"type":"text","text":"make_colorbar","style":{"code":true}},{"type":"text","text":", and "},{"type":"text","text":"make_below_plot","style":{"code":true}},{"type":"text","text":" functions and then do the layouting in the outer level"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"9210e72f-661b-4b87-b912-f846e993493b","type":"message","text":"even though I always want a colorbar with my heatmaps","user":"UCZ7VBGUD","ts":"1616000009.019200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jI1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"even though I always want a colorbar with my heatmaps"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"717e3c0f-b8b1-4319-af4b-d128c73cca44","type":"message","text":"&gt; I can’t actually plot my optional plot directly below the heatmap","user":"UK1BNFHFV","ts":"1616000047.019400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=L6","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"I can’t actually plot my optional plot directly below the heatmap"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"ace381a1-162b-46f2-b9dc-6db32b0fd8e1","type":"message","text":"I'm not sure I understand this part","user":"UK1BNFHFV","ts":"1616000073.019600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"okD3/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure I understand this part"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"d2ce5628-6588-4d72-a9b3-1ed916dd6148","type":"message","text":"&gt;  then I need to pass out the axis\nand this","user":"UK1BNFHFV","ts":"1616000103.019800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VDU","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":" then I need to pass out the axis"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and this"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"a96b0e4c-8f10-4231-a16d-e9fb12d050c2","type":"message","text":"ah, like as separate functions it would be\n```ax = make_heatmap!(fig[1,1])\nmake_colorbar!(fig[1,2])\nmake_other_plot!(fig[2,1])\nhidexdecorations!(ax)```","user":"UCZ7VBGUD","ts":"1616000156.020000","team":"T68168MUP","edited":{"user":"UCZ7VBGUD","ts":"1616000178.000000"},"blocks":[{"type":"rich_text","block_id":"FTQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah, like as separate functions it would be\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ax = make_heatmap!(fig[1,1])\nmake_colorbar!(fig[1,2])\nmake_other_plot!(fig[2,1])\nhidexdecorations!(ax)"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"71b86524-6173-4c29-9c74-a6ddd647e78a","type":"message","text":"grr, I think slack changed when you need shift-enter vs enter… Anyway, I wanted to have a `make_heatmap_with_colorbar!` function, since I always want the heatmap and colorbar together. But with such a function,\n• I’m not sure how to get the `make_other_plot!`  directly below the heatmap, i.e. in slot `[2,1]`, instead of centered below the heatmap and colorbar together.\n• I need `make_heatmap_with_colorbar!` to return an axis so I can turn off its x-decorations if I do `make_other_plot!` (because I’m going to link the axes and use the 2nd one)","user":"UCZ7VBGUD","ts":"1616000292.020500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"D5W6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"grr, I think slack changed when you need shift-enter vs enter… Anyway, I wanted to have a "},{"type":"text","text":"make_heatmap_with_colorbar!","style":{"code":true}},{"type":"text","text":" function, since I always want the heatmap and colorbar together. But with such a function,\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m not sure how to get the "},{"type":"text","text":"make_other_plot!","style":{"code":true}},{"type":"text","text":"  directly below the heatmap, i.e. in slot "},{"type":"text","text":"[2,1]","style":{"code":true}},{"type":"text","text":", instead of centered below the heatmap and colorbar together."}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I need "},{"type":"text","text":"make_heatmap_with_colorbar!","style":{"code":true}},{"type":"text","text":" to return an axis so I can turn off its x-decorations if I do "},{"type":"text","text":"make_other_plot!","style":{"code":true}},{"type":"text","text":" (because I’m going to link the axes and use the 2nd one)"}]}],"style":"bullet","indent":0}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"11da2a65-bc5c-42f8-bb1d-93edbb89a1bd","type":"message","text":"```function make_ax_colorbar_and_maybe_other(fp)\n    ax = Axis(fp[1, 1])\n    Colorbar(fp[1, 2])\n    if some_condition\n        other_plot(fp[2, 1])\n        hidexdecorations!(ax)\n    end\nend\n\nmake_ax_colorbar_and_maybe_other(fig[1, 1])```\nYou can nest the inner part by indexing into the subposition","user":"UK1BNFHFV","ts":"1616000376.020700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RW+L","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function make_ax_colorbar_and_maybe_other(fp)\n    ax = Axis(fp[1, 1])\n    Colorbar(fp[1, 2])\n    if some_condition\n        other_plot(fp[2, 1])\n        hidexdecorations!(ax)\n    end\nend\n\nmake_ax_colorbar_and_maybe_other(fig[1, 1])"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"You can nest the inner part by indexing into the subposition"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"e99d8d85-43e4-481c-90f9-bcc1420b3333","type":"message","text":"so the ax is not at [1, 1] but [1, 1][1, 1]","user":"UK1BNFHFV","ts":"1616000389.020900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QgVW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so the ax is not at [1, 1] but [1, 1][1, 1]"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"5c507662-6263-4d27-9240-635dfba9fac7","type":"message","text":"you could also do more nesting like `make_ax_colorbar_and_maybe_other(fig[1, 2][3, 4])`","user":"UK1BNFHFV","ts":"1616000447.021100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Aea","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you could also do more nesting like "},{"type":"text","text":"make_ax_colorbar_and_maybe_other(fig[1, 2][3, 4])","style":{"code":true}}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"e4b41c65-f27c-4db7-83dd-f155738cfadc","type":"message","text":"then the ax would be at `fig[1, 2][3, 4][1, 1]`","user":"UK1BNFHFV","ts":"1616000464.021300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pE3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"then the ax would be at "},{"type":"text","text":"fig[1, 2][3, 4][1, 1]","style":{"code":true}}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"9f73b7a1-b7e7-4f02-8d26-fa4935bd0a54","type":"message","text":"I wanted to avoid `make_ax_colorbar_and_maybe_other` because `heatmap_with_colorbar` might be in PkgA, and `other_plot` might be in PkgB","user":"UCZ7VBGUD","ts":"1616000645.021500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/gYWn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I wanted to avoid "},{"type":"text","text":"make_ax_colorbar_and_maybe_other","style":{"code":true}},{"type":"text","text":" because "},{"type":"text","text":"heatmap_with_colorbar","style":{"code":true}},{"type":"text","text":" might be in PkgA, and "},{"type":"text","text":"other_plot","style":{"code":true}},{"type":"text","text":" might be in PkgB"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"b043ee11-6963-45de-815a-343de2395e09","type":"message","text":"I guess my question is basically about how to make composable components that might need to interact in complicated scenarios","user":"UCZ7VBGUD","ts":"1616000688.021700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5ScW/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess my question is basically about how to make composable components that might need to interact in complicated scenarios"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"b9117fd5-7aed-4205-b271-600f4268920e","type":"message","text":"hmm it's hard to understand what exactly your ideal scenario is :)","user":"UK1BNFHFV","ts":"1616000693.021900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uCBn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hmm it's hard to understand what exactly your ideal scenario is :)"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"40021e51-512b-455e-bb9c-7ca97eb67c21","type":"message","text":"if a function from one package needs to know that it will plot something below an axis from another package, and also has to turn that axis' x ticks off, that's quite intertwined","user":"UK1BNFHFV","ts":"1616000745.022100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Aq6jr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if a function from one package needs to know that it will plot something below an axis from another package, and also has to turn that axis' x ticks off, that's quite intertwined"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"75f0e637-d48a-4172-a85c-b8dad385b637","type":"message","text":"but of course you can still plot into the sublayout created by one function if that wasn't clear","user":"UK1BNFHFV","ts":"1616000823.022500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Jkf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but of course you can still plot into the sublayout created by one function if that wasn't clear"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"7cda809b-4e9a-4eef-89e4-ac05e430eb89","type":"message","text":"I’m making a MWE that hopefully will help, but maybe there isn’t a good solution aha","user":"UCZ7VBGUD","ts":"1616000915.022700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1=O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I’m making a MWE that hopefully will help, but maybe there isn’t a good solution aha"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"2d3c65a3-e3bd-49d4-99ad-8311e5449964","type":"message","text":"```function ax_and_cb(fp)\n    ax = Axis(fp[1, 1])\n    Colorbar(fp[1, 2])\n    ax\nend\n\nfunction other_plot(fp)\n    Axis(fp)\nend\n\nfig = Figure()\nax = ax_and_cb(fig[1, 1])\nother_plot(fig[1, 1][2, 1])```","user":"UK1BNFHFV","ts":"1616001025.022900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fdi","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function ax_and_cb(fp)\n    ax = Axis(fp[1, 1])\n    Colorbar(fp[1, 2])\n    ax\nend\n\nfunction other_plot(fp)\n    Axis(fp)\nend\n\nfig = Figure()\nax = ax_and_cb(fig[1, 1])\nother_plot(fig[1, 1][2, 1])"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"26a6cdcc-2375-4828-9c62-ee7d35644cc4","type":"message","text":"ohh maybe that will work","user":"UCZ7VBGUD","ts":"1616001130.023100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3Klw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ohh maybe that will work"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"type":"message","text":"here’s what I’ve got currently:\n```using AbstractPlotting, CairoMakie\n\nfunction make_heatmap!(ax)\n    x = range(0,1; length=100)\n    y = 1:100\n    heatmap!(ax, x, y, rand(100,100))\nend\n\nfunction make_colorbar!(fig)\n    Colorbar(fig, width = 25)\nend\n\nfunction make_plot_below!(ax)\n    ax.height = 25\n    hidespines!(ax)\n    hideydecorations!(ax)\n    hidexdecorations!(ax; ticklabels=false, ticks=false, label=false)\n\n    on = sort!(rand(10))\n    off = [on[1:end-1] .+ diff(on) ./ 2; last(on)]\n    xs = Float32[]\n    for i in eachindex(on)\n        push!(xs, on[i])\n        push!(xs, off[i])\n        push!(xs, NaN)\n    end\n    ys = fill(0, length(xs))\n    lines!(ax, xs, ys)\nend\n\nfunction outer()\n    fig = Figure()\n\n    ax1 = Axis(fig[1,1])\n    make_heatmap!(ax1)\n\n    make_colorbar!(fig[1,2])\n\n    ax2 = Axis(fig[2, 1])\n    make_plot_below!(ax2)\n    linkxaxes!(ax1, ax2)\n    hidexdecorations!(ax1)\n    return fig\nend\n\nsave(\"test.png\", outer())```\nwhich produces","files":[{"id":"F01RDBH87EJ","created":1616001158,"timestamp":1616001158,"name":"test.png","title":"test.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"UCZ7VBGUD","editable":false,"size":170620,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01RDBH87EJ/test.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01RDBH87EJ/download/test.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01RDBH87EJ-23c995c34c/test_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01RDBH87EJ-23c995c34c/test_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01RDBH87EJ-23c995c34c/test_360.png","thumb_360_w":360,"thumb_360_h":203,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01RDBH87EJ-23c995c34c/test_480.png","thumb_480_w":480,"thumb_480_h":270,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01RDBH87EJ-23c995c34c/test_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01RDBH87EJ-23c995c34c/test_720.png","thumb_720_w":720,"thumb_720_h":405,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01RDBH87EJ-23c995c34c/test_800.png","thumb_800_w":800,"thumb_800_h":450,"thumb_960":"https://files.slack.com/files-tmb/T68168MUP-F01RDBH87EJ-23c995c34c/test_960.png","thumb_960_w":960,"thumb_960_h":540,"original_w":960,"original_h":540,"thumb_tiny":"AwAbADC1duyFdrEZznFV/Ol/vtU951T8aqUEvck86T++2KPOl/vmmGk7UhEnnS9nNXIGLIu4knAqhmrtt93r2FMaC5haTbsxx1qD7LKOm386vY5zRigdij9lk9F/Oj7LJ7fnV4jPWigLFH7LJn+H86sQxtH94DoBU1AGKASsf//Z","permalink":"https://julialang.slack.com/files/UCZ7VBGUD/F01RDBH87EJ/test.png","permalink_public":"https://slack-files.com/T68168MUP-F01RDBH87EJ-ddce204ed0","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"RWgj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"here’s what I’ve got currently:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using AbstractPlotting, CairoMakie\n\nfunction make_heatmap!(ax)\n    x = range(0,1; length=100)\n    y = 1:100\n    heatmap!(ax, x, y, rand(100,100))\nend\n\nfunction make_colorbar!(fig)\n    Colorbar(fig, width = 25)\nend\n\nfunction make_plot_below!(ax)\n    ax.height = 25\n    hidespines!(ax)\n    hideydecorations!(ax)\n    hidexdecorations!(ax; ticklabels=false, ticks=false, label=false)\n\n    on = sort!(rand(10))\n    off = [on[1:end-1] .+ diff(on) ./ 2; last(on)]\n    xs = Float32[]\n    for i in eachindex(on)\n        push!(xs, on[i])\n        push!(xs, off[i])\n        push!(xs, NaN)\n    end\n    ys = fill(0, length(xs))\n    lines!(ax, xs, ys)\nend\n\nfunction outer()\n    fig = Figure()\n\n    ax1 = Axis(fig[1,1])\n    make_heatmap!(ax1)\n\n    make_colorbar!(fig[1,2])\n\n    ax2 = Axis(fig[2, 1])\n    make_plot_below!(ax2)\n    linkxaxes!(ax1, ax2)\n    hidexdecorations!(ax1)\n    return fig\nend\n\nsave(\"test.png\", outer())"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"which produces"}]}]}],"user":"UCZ7VBGUD","display_as_bot":false,"ts":"1616001161.023300","thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"87016c20-f34f-4d42-a348-f35db3daf45e","type":"message","text":"(this works fine, but I was hoping to combine the heatmap and colorbar into a single function call)","user":"UCZ7VBGUD","ts":"1616001230.023700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z8La","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"(this works fine, but I was hoping to combine the heatmap and colorbar into a single function call)"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"135f3473-8821-4d13-a4fe-5e9502f240c1","type":"message","text":"cool, it works! I just add\n```function make_heatmap_with_colorbar!(fig)\n    ax = Axis(fig[1,1])\n    make_heatmap!(ax)\n    make_colorbar!(fig[1,2])\n    return ax\nend\n\nfunction outer2()\n    fig = Figure()\n    ax1 = make_heatmap_with_colorbar!(fig[1,1])\n    ax2 = Axis(fig[1,1][2, 1])\n    make_plot_below!(ax2)\n    linkxaxes!(ax1, ax2)\n    hidexdecorations!(ax1)\n    return fig\nend```\nand now `outer2` gives the same thing","user":"UCZ7VBGUD","ts":"1616001380.023900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xtj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"cool, it works! I just add\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function make_heatmap_with_colorbar!(fig)\n    ax = Axis(fig[1,1])\n    make_heatmap!(ax)\n    make_colorbar!(fig[1,2])\n    return ax\nend\n\nfunction outer2()\n    fig = Figure()\n    ax1 = make_heatmap_with_colorbar!(fig[1,1])\n    ax2 = Axis(fig[1,1][2, 1])\n    make_plot_below!(ax2)\n    linkxaxes!(ax1, ax2)\n    hidexdecorations!(ax1)\n    return fig\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and now "},{"type":"text","text":"outer2","style":{"code":true}},{"type":"text","text":" gives the same thing"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"10b301fe-91d8-4282-8261-cefe63b4e81f","type":"message","text":"to give some more context, in my use, `make_heatmap_with_colorbar!` is plotting a spectrogram, and `make_plot_below!` is adding an annotation about which bit is noisy or not (where the --- line indicates a noisy region). So to me it makes sense that the general spectrogram code might be in a completely different package than the code that’s looking for noise and annotating it.","user":"UCZ7VBGUD","ts":"1616001516.024100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0Iim8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"to give some more context, in my use, "},{"type":"text","text":"make_heatmap_with_colorbar!","style":{"code":true}},{"type":"text","text":" is plotting a spectrogram, and "},{"type":"text","text":"make_plot_below!","style":{"code":true}},{"type":"text","text":" is adding an annotation about which bit is noisy or not (where the --- line indicates a noisy region). So to me it makes sense that the general spectrogram code might be in a completely different package than the code that’s looking for noise and annotating it."}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"f152b4b6-62dc-475c-bf45-3875326df306","type":"message","text":"yeah that looks correct :) basically fig is the uppermost subposition in a way, then you can go however many levels down as you like","user":"UK1BNFHFV","ts":"1616001519.024300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DLch","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah that looks correct :) basically fig is the uppermost subposition in a way, then you can go however many levels down as you like"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"bd9be02d-ee17-443c-8640-82715249efad","type":"message","text":"ok, I think I get it :slightly_smiling_face:. Thanks!","user":"UCZ7VBGUD","ts":"1616001568.024500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r20a","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, I think I get it "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":". Thanks!"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD","reactions":[{"name":"+1","users":["UK1BNFHFV"],"count":1}]},{"client_msg_id":"cf69597c-27e0-4840-add8-fa6032e2e637","type":"message","text":"e.g.\n```myplot(location) = Axis(location)\nmyplot(fig[1, 1])\nfp = fig[1, 1])\nmyplot(fp)\nmyplot(fp[2, 3])```\netc. all work","user":"UK1BNFHFV","ts":"1616001613.024700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lAB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"e.g.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"myplot(location) = Axis(location)\nmyplot(fig[1, 1])\nfp = fig[1, 1])\nmyplot(fp)\nmyplot(fp[2, 3])"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"etc. all work"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"8728e8c7-4ddc-4df7-8bbc-88daa11e04b2","type":"message","text":"well this would also be nice on discourse, or I'll add a docs section that explores this stuff more","user":"UK1BNFHFV","ts":"1616001683.025000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zgA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"well this would also be nice on discourse, or I'll add a docs section that explores this stuff more"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"ea3818ce-f700-40f9-8e52-fc65668a91c8","type":"message","text":"ah sorry, I forgot questions were supposed to go there","user":"UCZ7VBGUD","ts":"1616001707.025200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3qkwU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah sorry, I forgot questions were supposed to go there"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"fa305f95-28e0-428c-96fd-61ecc6cb38f5","type":"message","text":"I can copy over some of this to discourse?","user":"UCZ7VBGUD","ts":"1616001715.025400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"baI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I can copy over some of this to discourse?"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"26278ee0-4525-4036-9bbe-2f77382d8535","type":"message","text":"haha yeah maybe if you have the time, I can just imagine this is one of the more interesting questions for others (and it shows off the system a bit)","user":"UK1BNFHFV","ts":"1616001908.025600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Wm8D+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"haha yeah maybe if you have the time, I can just imagine this is one of the more interesting questions for others (and it shows off the system a bit)"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"190c89bf-fdbd-45e2-86f3-3f0b75c5dc5f","type":"message","text":"I just put a short summary: <https://discourse.julialang.org/t/in-makie-when-should-a-function-accept-fig-1-1-as-input-vs-an-axis/57399>","user":"UCZ7VBGUD","ts":"1616001966.025800","team":"T68168MUP","attachments":[{"service_name":"JuliaLang","title":"In Makie, when should a function accept `fig[1,1]` as input, vs an `Axis`?","title_link":"https://discourse.julialang.org/t/in-makie-when-should-a-function-accept-fig-1-1-as-input-vs-an-axis/57399","text":"I have some code that looks like this: using AbstractPlotting, CairoMakie function make_heatmap!(ax) x = range(0,1; length=100) y = 1:100 heatmap!(ax, x, y, rand(100,100)) end function make_colorbar!(fig) Colorbar(fig, width = 25) end function make_plot_below!(ax) ax.height = 25 hidespines!(ax) hideydecorations!(ax) hidexdecorations!(ax; ticklabels=false, ticks=false, label=false) on = sort!(rand(10)) off = [on[1:end-1] .+ diff(on) ./ 2; last(on)] xs ...","fallback":"JuliaLang: In Makie, when should a function accept `fig[1,1]` as input, vs an `Axis`?","thumb_url":"https://aws1.discourse-cdn.com/business5/uploads/julialang/original/3X/1/2/12caab8b5406f3970ccf83603c02548193af7e4b.png","ts":1616001944,"from_url":"https://discourse.julialang.org/t/in-makie-when-should-a-function-accept-fig-1-1-as-input-vs-an-axis/57399","thumb_width":960,"thumb_height":540,"service_icon":"https://aws1.discourse-cdn.com/business5/uploads/julialang/optimized/2X/6/6ca888e296f59ca2a599807f7d5edd489e3d1829_2_180x180.png","id":1,"original_url":"https://discourse.julialang.org/t/in-makie-when-should-a-function-accept-fig-1-1-as-input-vs-an-axis/57399"}],"blocks":[{"type":"rich_text","block_id":"N1fc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I just put a short summary: "},{"type":"link","url":"https://discourse.julialang.org/t/in-makie-when-should-a-function-accept-fig-1-1-as-input-vs-an-axis/57399"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"0d9641a4-0548-4d36-8085-c80795086c87","type":"message","text":"ah cool thanks, that works as well","user":"UK1BNFHFV","ts":"1616002022.026100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ioZGt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah cool thanks, that works as well"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD","reactions":[{"name":"+1","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"fa757c4a-c632-4d51-8c50-6676dcc587a4","type":"message","text":"it looks like I can also do this:\n```function mk_heatmap_with_colorbar()\n    fig = Figure()\n    make_heatmap_with_colorbar!(fig[1,1])\n    return fig\nend\n\nfunction annotate!(fig)\n    ax1 = content(fig[1,1][1,1])\n    ax2 = Axis(fig[1,1][2,1])\n    make_plot_below!(ax2)\n    linkxaxes!(ax1, ax2)\n    hidexdecorations!(ax1)\nend\n\nfig = mk_heatmap_with_colorbar()\nannotate!(fig)```\nso then I don’t even need to return the axis or anything from `mk_heatmap_with_colorbar`","user":"UCZ7VBGUD","ts":"1616002474.026300","team":"T68168MUP","edited":{"user":"UCZ7VBGUD","ts":"1616002482.000000"},"blocks":[{"type":"rich_text","block_id":"ZSN3D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it looks like I can also do this:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function mk_heatmap_with_colorbar()\n    fig = Figure()\n    make_heatmap_with_colorbar!(fig[1,1])\n    return fig\nend\n\nfunction annotate!(fig)\n    ax1 = content(fig[1,1][1,1])\n    ax2 = Axis(fig[1,1][2,1])\n    make_plot_below!(ax2)\n    linkxaxes!(ax1, ax2)\n    hidexdecorations!(ax1)\nend\n\nfig = mk_heatmap_with_colorbar()\nannotate!(fig)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"so then I don’t even need to return the axis or anything from "},{"type":"text","text":"mk_heatmap_with_colorbar","style":{"code":true}}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"09c35e96-65b0-4721-8a66-8d1ea07286a4","type":"message","text":"but they are still kind of coupled in that `annotate!` depends on the internal layout chosen by `mk_heatmap_with_colorbar`. But I think that’s unavoidable to some degree","user":"UCZ7VBGUD","ts":"1616002513.026600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u4Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but they are still kind of coupled in that "},{"type":"text","text":"annotate!","style":{"code":true}},{"type":"text","text":" depends on the internal layout chosen by "},{"type":"text","text":"mk_heatmap_with_colorbar","style":{"code":true}},{"type":"text","text":". But I think that’s unavoidable to some degree"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"27ea5b9f-aa6e-46be-a554-3a0a5bd127b2","type":"message","text":"thanks a lot of the help btw!","user":"UCZ7VBGUD","ts":"1616003039.026900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"n/33x","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks a lot of the help btw!"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"b118cc03-2643-47d7-b964-49b114168dde","type":"message","text":"you can also inspect the layout and get things out with `content` or `contents`, but that might be too brittle","user":"UK1BNFHFV","ts":"1616005193.027200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Vw0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you can also inspect the layout and get things out with "},{"type":"text","text":"content","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"contents","style":{"code":true}},{"type":"text","text":", but that might be too brittle"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"a329571e-3d17-4718-97fe-88b0c00d0435","type":"message","text":"But it's nice if you want to manipulate something you might get from a function you don't control, from something like `AlgebraOfGraphics`","user":"UK1BNFHFV","ts":"1616005219.027400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IBm","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But it's nice if you want to manipulate something you might get from a function you don't control, from something like "},{"type":"text","text":"AlgebraOfGraphics","style":{"code":true}}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"},{"client_msg_id":"43f2b1f1-0639-4e21-8ea7-4c2d13e25db2","type":"message","text":"yeah, I use `content` in `annotate!`. Very helpful to have","user":"UCZ7VBGUD","ts":"1616005261.027600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6Ub","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah, I use "},{"type":"text","text":"content","style":{"code":true}},{"type":"text","text":" in "},{"type":"text","text":"annotate!","style":{"code":true}},{"type":"text","text":". Very helpful to have"}]}]}],"thread_ts":"1615999589.017100","parent_user_id":"UCZ7VBGUD"}]