[{"client_msg_id":"97e9249a-c497-40d3-b2e1-f146f9600031","type":"message","text":"is there a way to do an hist step plot in makie ? I don’t find anything in the gallery…. or documentation.","user":"UM70NJEER","ts":"1610373720.448900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pdB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"is there a way to do an hist step plot in makie ? I don’t find anything in the gallery…. or documentation."}]}]}],"thread_ts":"1610373720.448900","reply_count":18,"reply_users_count":2,"latest_reply":"1610375147.453100","reply_users":["UK1BNFHFV","UM70NJEER"],"subscribed":false},{"client_msg_id":"a9aaf32f-00ff-468c-8c91-7ae873da178d","type":"message","text":"We don't have that, yet, but it would be really simple to make I think. Just copy the histogram code and draw lines instead of rectangles?","user":"UK1BNFHFV","ts":"1610374030.449100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Qbq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We don't have that, yet, but it would be really simple to make I think. Just copy the histogram code and draw lines instead of rectangles?"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"ec8b30d0-ee4d-4d0d-a02f-c6d07d942de4","type":"message","text":"nope, it doesn’t work…","user":"UM70NJEER","ts":"1610374070.449300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"==ZA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"nope, it doesn’t work…"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"7d3f2ff2-4fe7-402f-896b-f51b9f16d788","type":"message","text":"what did you try? I'd make a new recipe","user":"UK1BNFHFV","ts":"1610374101.449500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"v1/+y","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what did you try? I'd make a new recipe"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"601ed5f7-d59b-4549-9108-dec2b721fa66","type":"message","text":"Then I went for the boxes… and want it to keep just the horizontal lines… but nope..","user":"UM70NJEER","ts":"1610374131.449700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gRf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Then I went for the boxes… and want it to keep just the horizontal lines… but nope.."}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"ac76c888-1960-498a-8e44-1b596facc446","type":"message","text":"```using StatsBase, KernelDensity, Colors\nusing Random\nusing CairoMakie,\nRandom.seed!(13)\nfig = Figure(resolution = (600, 400), font = \"sans\")\nax = Axis(fig, xlabel = \"value\", ylabel = \"samples\" )\nb = randn(1000)\nh = fit(Histogram, b, nbins = 50)\n#h = normalize(h)\n#histogram\nplot!(ax, h, color = (:orangered, 0.5), strokecolor = :black, strokewidth = 0.5)\n\nfig[1,1] = ax\nfig```","user":"UM70NJEER","ts":"1610374191.450300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"sCiu","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using StatsBase, KernelDensity, Colors\nusing Random\nusing CairoMakie,\nRandom.seed!(13)\nfig = Figure(resolution = (600, 400), font = \"sans\")\nax = Axis(fig, xlabel = \"value\", ylabel = \"samples\" )\nb = randn(1000)\nh = fit(Histogram, b, nbins = 50)\n#h = normalize(h)\n#histogram\nplot!(ax, h, color = (:orangered, 0.5), strokecolor = :black, strokewidth = 0.5)\n\nfig[1,1] = ax\nfig"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"06b05a7c-3e1a-472f-ac92-c3c20ff107c5","type":"message","text":"this works well, but uses boxes…. which is fine more or less…","user":"UM70NJEER","ts":"1610374220.450500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"w8R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"this works well, but uses boxes…. which is fine more or less…"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"f8e47f5d-3376-4573-bc79-2ea903353cab","type":"message","text":"but I would prefer an histstep representation.","user":"UM70NJEER","ts":"1610374239.450700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"VD0ct","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but I would prefer an histstep representation."}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"a55cec20-deeb-4d03-8861-fab4588aced5","type":"message","text":"yes because that's predefined by the older StatsMakie code","user":"UK1BNFHFV","ts":"1610374240.450900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xQvIO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes because that's predefined by the older StatsMakie code"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"c1902c15-502c-44a3-a75a-bce629e05d12","type":"message","text":"and with boxes… is like","user":"UM70NJEER","ts":"1610374286.451100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jgF8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"and with boxes… is like"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"598cae29-160f-454f-9dfc-294b92a1c3ee","type":"message","text":"I'm not sure how we'd do the same plotting method with different primitives in Makie, I think one would need a completely separate recipe","user":"UK1BNFHFV","ts":"1610374287.451300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vgD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not sure how we'd do the same plotting method with different primitives in Makie, I think one would need a completely separate recipe"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"a5456308-f4bb-41c9-8e26-dff983e7a48b","type":"message","text":"```Random.seed!(13)\nfig = Figure(resolution = (600, 400), font = \"sans\")\nax = Axis(fig, xlabel = \"value\", ylabel = \"samples\" )\nb = randn(1000)\nh = fit(Histogram, b, nbins = 50)\n#h = normalize(h)\nedg = collect(h.edges[1])\ncentros = (edg[2:end] .+ edg[1:end-1])/2\ncentros, h.weights\nbarplot!(centros, h.weights, width = edg[2] - edg[1], color = (:black, 0.5), \n    strokecolor = :black, strokewidth = 0.5)\n#plot!(ax, h)\n\n#limits!(ax,0,2,-5,5)\nfig[1,1] = ax\nfig```","user":"UM70NJEER","ts":"1610374290.451500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WzFX","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Random.seed!(13)\nfig = Figure(resolution = (600, 400), font = \"sans\")\nax = Axis(fig, xlabel = \"value\", ylabel = \"samples\" )\nb = randn(1000)\nh = fit(Histogram, b, nbins = 50)\n#h = normalize(h)\nedg = collect(h.edges[1])\ncentros = (edg[2:end] .+ edg[1:end-1])/2\ncentros, h.weights\nbarplot!(centros, h.weights, width = edg[2] - edg[1], color = (:black, 0.5), \n    strokecolor = :black, strokewidth = 0.5)\n#plot!(ax, h)\n\n#limits!(ax,0,2,-5,5)\nfig[1,1] = ax\nfig"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"e13b0428-5430-4414-a00e-1f93dc4cbd6c","type":"message","text":"yeah probably… I was thinking on doing a mix of vertical and horizontal lines… but hlines! is not working properly …","user":"UM70NJEER","ts":"1610374347.451700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Q4bI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yeah probably… I was thinking on doing a mix of vertical and horizontal lines… but hlines! is not working properly …"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"5f1565f4-33c7-4f4b-8b81-1bb592575aea","type":"message","text":"hlines, vlines with xmin, xmax, ymin, ymax… and that would do it…I think.","user":"UM70NJEER","ts":"1610374383.451900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5BX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hlines, vlines with xmin, xmax, ymin, ymax… and that would do it…I think."}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"4e877680-358c-4447-b838-ab1de316d851","type":"message","text":"```@recipe(Histstep, values) do scene\n    Attributes(\n        bins = 15, # Int or iterable of edges\n        normalization = :none\n    )\nend\n\nfunction AbstractPlotting.plot!(plot::Histstep)\n\n    values = plot[:values]\n\n    edges = lift(values, plot.bins) do vals, bins\n        if bins isa Int\n            mi, ma = float.(extrema(vals))\n            ma = nextfloat(ma) # hist is right-open, so to include the upper data point, make the last bin a tiny bit bigger\n            return range(mi, ma, length = bins+1)\n        else\n            if !issorted(bins)\n                error(\"Histogram bins are not sorted: $bins\")\n            end\n            return bins\n        end\n    end\n\n    points = lift(edges, plot.normalization) do edges, normalization\n        h = AbstractPlotting.StatsBase.fit(AbstractPlotting.StatsBase.Histogram, values[], edges)\n        h_norm = AbstractPlotting.StatsBase.normalize(h, mode = normalization)\n        weights = h_norm.weights\n\n        ps = Vector{Point2f0}(undef, 2 * (length(edges) - 1))\n        for (i, (e1, e2, w)) in enumerate(zip(edges[1:end-1], edges[2:end], weights))\n            ps[i*2-1] = Point2f0(e1, w)\n            ps[i*2] = Point2f0(e2, w)\n        end\n        return ps\n    end\n\n    widths = lift(diff, edges)\n\n    # plot the values, not the observables, to be in control of updating\n    bp = lines!(plot, points[]; width = widths[], plot.attributes...)\n\n\n    # update the barplot points without triggering, then trigger with `width`\n    on(widths) do w\n        setindex!(bp[1], points[], notify = _ -&gt; false)\n        bp.width = w\n    end\n\n    plot\nend\n\n\nhiststep(randn(200))```","user":"UK1BNFHFV","ts":"1610374697.452100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kMh","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@recipe(Histstep, values) do scene\n    Attributes(\n        bins = 15, # Int or iterable of edges\n        normalization = :none\n    )\nend\n\nfunction AbstractPlotting.plot!(plot::Histstep)\n\n    values = plot[:values]\n\n    edges = lift(values, plot.bins) do vals, bins\n        if bins isa Int\n            mi, ma = float.(extrema(vals))\n            ma = nextfloat(ma) # hist is right-open, so to include the upper data point, make the last bin a tiny bit bigger\n            return range(mi, ma, length = bins+1)\n        else\n            if !issorted(bins)\n                error(\"Histogram bins are not sorted: $bins\")\n            end\n            return bins\n        end\n    end\n\n    points = lift(edges, plot.normalization) do edges, normalization\n        h = AbstractPlotting.StatsBase.fit(AbstractPlotting.StatsBase.Histogram, values[], edges)\n        h_norm = AbstractPlotting.StatsBase.normalize(h, mode = normalization)\n        weights = h_norm.weights\n\n        ps = Vector{Point2f0}(undef, 2 * (length(edges) - 1))\n        for (i, (e1, e2, w)) in enumerate(zip(edges[1:end-1], edges[2:end], weights))\n            ps[i*2-1] = Point2f0(e1, w)\n            ps[i*2] = Point2f0(e2, w)\n        end\n        return ps\n    end\n\n    widths = lift(diff, edges)\n\n    # plot the values, not the observables, to be in control of updating\n    bp = lines!(plot, points[]; width = widths[], plot.attributes...)\n\n\n    # update the barplot points without triggering, then trigger with `width`\n    on(widths) do w\n        setindex!(bp[1], points[], notify = _ -> false)\n        bp.width = w\n    end\n\n    plot\nend\n\n\nhiststep(randn(200))"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"type":"message","text":"","files":[{"id":"F01HZMGN54P","created":1610374709,"timestamp":1610374709,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"UK1BNFHFV","editable":false,"size":35283,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01HZMGN54P/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01HZMGN54P/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01HZMGN54P-2007dffaf4/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01HZMGN54P-2007dffaf4/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01HZMGN54P-2007dffaf4/image_360.png","thumb_360_w":360,"thumb_360_h":354,"thumb_480":"https://files.slack.com/files-tmb/T68168MUP-F01HZMGN54P-2007dffaf4/image_480.png","thumb_480_w":480,"thumb_480_h":472,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01HZMGN54P-2007dffaf4/image_160.png","thumb_720":"https://files.slack.com/files-tmb/T68168MUP-F01HZMGN54P-2007dffaf4/image_720.png","thumb_720_w":720,"thumb_720_h":709,"thumb_800":"https://files.slack.com/files-tmb/T68168MUP-F01HZMGN54P-2007dffaf4/image_800.png","thumb_800_w":800,"thumb_800_h":787,"original_w":884,"original_h":870,"thumb_tiny":"AwAvADDSPWjH+c0fxUtACEcUgx3NKc80EcE0AGP85oxgilpD2oAP4qWk/ipT0oAQd6D0NKOgoPIoAKQ9qB1oPagA/ioznpQRmjBxwaAFHSikwfWgA9zQAEZo9PrRg+tGPegD/9k=","permalink":"https://julialang.slack.com/files/UK1BNFHFV/F01HZMGN54P/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01HZMGN54P-f3d7fdea43","is_starred":false,"has_rich_preview":false}],"upload":false,"user":"UK1BNFHFV","display_as_bot":false,"ts":"1610374711.452300","thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"7852b39b-47a9-40db-bebf-86f6395d7178","type":"message","text":"so that was just a slightly changed version of the Histogram recipe","user":"UK1BNFHFV","ts":"1610374747.452700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XR9p","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"so that was just a slightly changed version of the Histogram recipe"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"2b0d1a8d-ff3a-4ae2-8439-a3784b04b27b","type":"message","text":"nice! thanks!","user":"UM70NJEER","ts":"1610375022.452900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"00t3a","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"nice! thanks!"}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"},{"client_msg_id":"133f794f-ed37-427c-9da1-8de8556cb2c3","type":"message","text":"now, it would be great to have this available by default.","user":"UM70NJEER","ts":"1610375147.453100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DCW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"now, it would be great to have this available by default."}]}]}],"thread_ts":"1610373720.448900","parent_user_id":"UM70NJEER"}]