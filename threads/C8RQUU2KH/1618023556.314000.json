[{"client_msg_id":"dbc8e60d-9712-4d23-8e33-9156ffc57878","type":"message","text":"Is there a way to get both the \"top\" side and \"bottom\" side of a surface to look the same with light bouncing off it correctly? Right now I have a non-orientable surface, so the surface normals can't continuously change over the whole surface so at these discontinuities the light bouncing effect is off. It seems like the surface normals determine how light might bounce off it, so the top side with the \"correct\" surface normal looks great, but the bottom side looks flat with no shading/light highlights. (EDIT: I am currently using `surface` )\n(EDIT: Alternatively, is there a way to manually edit the surface normals of a surface? I could fake the effect to hide the surface-normal discontinuities. I found surface_normals but it doesn't seem to be what I'm looking for)","user":"U0138UTB7A4","ts":"1618023556.314000","team":"T68168MUP","edited":{"user":"U0138UTB7A4","ts":"1618024714.000000"},"blocks":[{"type":"rich_text","block_id":"tCa1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there a way to get both the \"top\" side and \"bottom\" side of a surface to look the same with light bouncing off it correctly? Right now I have a non-orientable surface, so the surface normals can't continuously change over the whole surface so at these discontinuities the light bouncing effect is off. It seems like the surface normals determine how light might bounce off it, so the top side with the \"correct\" surface normal looks great, but the bottom side looks flat with no shading/light highlights. (EDIT: I am currently using "},{"type":"text","text":"surface","style":{"code":true}},{"type":"text","text":" )\n(EDIT: Alternatively, is there a way to manually edit the surface normals of a surface? I could fake the effect to hide the surface-normal discontinuities. I found surface_normals but it doesn't seem to be what I'm looking for)"}]}]}],"thread_ts":"1618023556.314000","reply_count":17,"reply_users_count":2,"latest_reply":"1618092926.318400","reply_users":["UQMHE3ER4","U0138UTB7A4"],"is_locked":false,"subscribed":false},{"client_msg_id":"9be11eb2-85dd-4006-b96b-89abd4accd4d","type":"message","text":"I think we added `backlight` for something like this. Try `backlight = 1f0` in `surface`","user":"UQMHE3ER4","ts":"1618050807.314900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5k57A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think we added "},{"type":"text","text":"backlight","style":{"code":true}},{"type":"text","text":" for something like this. Try "},{"type":"text","text":"backlight = 1f0","style":{"code":true}},{"type":"text","text":" in "},{"type":"text","text":"surface","style":{"code":true}}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"3ac69eba-e397-4f22-ae7b-a15f85a17a80","type":"message","text":"Thank you! The `backlight` option worked to make everything look the same. But `1f0` was too strong for me, everything was washed out to white (including the front/top side). So now I'm just tryint to play around with the value to try to get it weaker","user":"U0138UTB7A4","ts":"1618071593.315200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"c+M","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you! The "},{"type":"text","text":"backlight","style":{"code":true}},{"type":"text","text":" option worked to make everything look the same. But "},{"type":"text","text":"1f0","style":{"code":true}},{"type":"text","text":" was too strong for me, everything was washed out to white (including the front/top side). So now I'm just tryint to play around with the value to try to get it weaker"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"db5b56c2-5757-4016-83dc-d6513375a2a6","type":"message","text":"You can also mess with `ambient`, `diffuse` and `specular` to adjust brightness if you don't want the back to be less bright than the front. They're all Vec3f0's that apply to r/g/b","user":"UQMHE3ER4","ts":"1618071804.315400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"q87w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You can also mess with "},{"type":"text","text":"ambient","style":{"code":true}},{"type":"text","text":", "},{"type":"text","text":"diffuse","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"specular","style":{"code":true}},{"type":"text","text":" to adjust brightness if you don't want the back to be less bright than the front. They're all Vec3f0's that apply to r/g/b"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"e6558d09-271e-4f2f-bf3b-11012d0013a3","type":"message","text":"Does ambient diffuse and specular just affect the front?\n\nHmm what is `backlight` controlling exactly? I'm trying to reduce the value but it seems to affect both the front and back at the same time. Playing around with it, it seems to control overall brightness for me?","user":"U0138UTB7A4","ts":"1618075396.315600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"BLao+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Does ambient diffuse and specular just affect the front?\n\nHmm what is `backlight` controlling exactly? I'm trying to reduce the value but it seems to affect both the front and back at the same time. Playing around with it, it seems to control overall brightness for me?"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"85fdd104-dce0-46a8-89f5-d999b0a2cfd4","type":"message","text":"The code that's executed is:\n```vec3 L      = normalize(o_lightdir);\nvec3 N      = normalize(o_normal);\nvec3 light1 = blinnphong(N, o_camdir, L, color.rgb);\ncolor       = vec4(light1, color.a) + \n    backlight * vec4(blinnphong(N, o_camdir, -L, color.rgb), color.a);```\nwith blinnphong being defined here:\n<https://github.com/JuliaPlots/GLMakie.jl/blob/2717d812fdc66b283f63d5d97237e8d69e2c1f25/assets/shader/standard.frag#L69>\n\nambient etc (as attributes) should affect both. And now that I look at it I get why things get brighter. diffuse and specular only change the color once (because only one of `dot(N, +-L) &gt; 0`), but ambient is added in both cases.\n\nSo with `ambient = Vec3f0(0.5 * 0.55)` and `backlight = 1f0` you should end up with the same brightness as before","user":"UQMHE3ER4","ts":"1618076022.315800","team":"T68168MUP","edited":{"user":"UQMHE3ER4","ts":"1618076155.000000"},"blocks":[{"type":"rich_text","block_id":"FXVn6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The code that's executed is:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"vec3 L      = normalize(o_lightdir);\nvec3 N      = normalize(o_normal);\nvec3 light1 = blinnphong(N, o_camdir, L, color.rgb);\ncolor       = vec4(light1, color.a) + \n    backlight * vec4(blinnphong(N, o_camdir, -L, color.rgb), color.a);"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"with blinnphong being defined here:\n"},{"type":"link","url":"https://github.com/JuliaPlots/GLMakie.jl/blob/2717d812fdc66b283f63d5d97237e8d69e2c1f25/assets/shader/standard.frag#L69"},{"type":"text","text":"\n\nambient etc (as attributes) should affect both. And now that I look at it I get why things get brighter. diffuse and specular only change the color once (because only one of "},{"type":"text","text":"dot(N, +-L) > 0","style":{"code":true}},{"type":"text","text":"), but ambient is added in both cases.\n\nSo with "},{"type":"text","text":"ambient = Vec3f0(0.5 * 0.55)","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"backlight = 1f0","style":{"code":true}},{"type":"text","text":" you should end up with the same brightness as before"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"ee431759-79ed-4435-a7cc-a4b56481cd39","type":"message","text":"Wow thank you so much for the detailed response!! I'll have to think about this some more into interpretting that shading/shader/rendering code snippet. \n\nI'll also give your suggestion a try.","user":"U0138UTB7A4","ts":"1618079329.316100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lma5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Wow thank you so much for the detailed response!! I'll have to think about this some more into interpretting that shading/shader/rendering code snippet. \n\nI'll also give your suggestion a try."}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"ab96bfdc-8c5f-44e3-8f50-aed2aab15f0f","type":"message","text":"This should fix the brightness issue:\n<https://github.com/JuliaPlots/GLMakie.jl/pull/178>","user":"UQMHE3ER4","ts":"1618079467.316300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/J/e","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This should fix the brightness issue:\n"},{"type":"link","url":"https://github.com/JuliaPlots/GLMakie.jl/pull/178"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"0561e79f-f6d5-4fa0-bafa-64c43fd7f491","type":"message","text":"You're probably fine if you just throw `backlight = 1f0, ambient = Vec3f0(0.5 * 0.55)` in your plot call","user":"UQMHE3ER4","ts":"1618079618.316500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"5rO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You're probably fine if you just throw "},{"type":"text","text":"backlight = 1f0, ambient = Vec3f0(0.5 * 0.55)","style":{"code":true}},{"type":"text","text":" in your plot call"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"1287f72d-7322-48c7-9e2b-ab6c5d491af2","type":"message","text":"Or wait for the pr","user":"UQMHE3ER4","ts":"1618079641.316700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2EgP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or wait for the pr"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"b36ae124-6655-4029-be32-cc6785e6aad8","type":"message","text":"TIL this was a bug lol. Thanks for filing an issue!","user":"U0138UTB7A4","ts":"1618079710.316900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NEp=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"TIL this was a bug lol. Thanks for filing an issue!"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"e7a79958-0557-473d-8805-87d82bf5928f","type":"message","text":"So I guess backlight truly is just supposed to act as the light for the back side?","user":"U0138UTB7A4","ts":"1618079728.317100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"L2FP+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So I guess backlight truly is just supposed to act as the light for the back side?"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"acfc24bc-a9e7-4149-978c-0508618576a5","type":"message","text":"Yea, that's all it's supposed to do","user":"UQMHE3ER4","ts":"1618079742.317300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"K6ghI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yea, that's all it's supposed to do"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"b19bfa9a-33dc-45db-a047-5a1d92babe6c","type":"message","text":"Ah I see that makes sense. Thank you! For the suggestion and for filing the issue for the future","user":"U0138UTB7A4","ts":"1618079765.317500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zxW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah I see that makes sense. Thank you! For the suggestion and for filing the issue for the future"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"731cf3a8-dafb-4cbc-9966-4def6482291c","type":"message","text":"`ambient` is supposed to be the base light level of the scene, it shouldn't be applied multiple times. `diffuse` and `specular` are about light reflecting, so those should apply once per light source","user":"UQMHE3ER4","ts":"1618079821.317700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=Auyq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ambient","style":{"code":true}},{"type":"text","text":" is supposed to be the base light level of the scene, it shouldn't be applied multiple times. "},{"type":"text","text":"diffuse","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"specular","style":{"code":true}},{"type":"text","text":" are about light reflecting, so those should apply once per light source"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"f00007cc-3420-4e7b-9f84-1010afebef97","type":"message","text":"It's a pull request, not an issue btw","user":"UQMHE3ER4","ts":"1618079846.317900","team":"T68168MUP","edited":{"user":"UQMHE3ER4","ts":"1618079867.000000"},"blocks":[{"type":"rich_text","block_id":"UAJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It's a pull request, not an issue btw"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"0a031ead-f609-434c-82b5-9097f327951b","type":"message","text":"Oh wow! Did not notice it was a PR. Thanks again. And yes that makes a lot more sense for what ambient, diffuse, specular, and backlight should do now","user":"U0138UTB7A4","ts":"1618079973.318200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3VLK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh wow! Did not notice it was a PR. Thanks again. And yes that makes a lot more sense for what ambient, diffuse, specular, and backlight should do now"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4"},{"client_msg_id":"605faadd-6121-4a19-95ab-fa44df7e2500","type":"message","text":"I tried exactly as you mentioned `backlight = 1f0, ambient = Vec3f0(0.5 * 0.55)` and it worked perfectly!! The backside and the front side look pretty much identical, allowing me to animate my non-orientable klein bottle surface! Thank you!","user":"U0138UTB7A4","ts":"1618092926.318400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"At0C","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tried exactly as you mentioned "},{"type":"text","text":"backlight = 1f0, ambient = Vec3f0(0.5 * 0.55)","style":{"code":true}},{"type":"text","text":" and it worked perfectly!! The backside and the front side look pretty much identical, allowing me to animate my non-orientable klein bottle surface! Thank you!"}]}]}],"thread_ts":"1618023556.314000","parent_user_id":"U0138UTB7A4","reactions":[{"name":"+1","users":["UQMHE3ER4"],"count":1}]}]