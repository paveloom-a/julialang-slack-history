[{"client_msg_id":"5414cd0b-f24f-489e-8d79-a5943410bfb5","type":"message","text":"I am trying to define a simple plots recipe trying to follow the step in the <http://makie.juliaplots.org/stable/recipes.html|docs>. But, it seems that the theme is not defined properly. Here is the case\n```using Makie\n\n@recipe(MyPlot, x, y, z) do scene\n    Theme(\n        plot_color =&gt; :red\n    )\nend\n\nfunction AbstractPlotting.plot!(myplot::MyPlot)\n    lines!(myplot, rand(10), color=myplot[:plot_color])\n    plot!(myplot, myplot[:x], myplot[:y])\n    myplot\nend\nmyplot(rand(10), rand(10), rand(10))```\nThe error complain is about the `plot_color` attribute.\n```ERROR: LoadError: UndefVarError: plot_color not defined\nStacktrace:\n  [1] (::var\"#17#18\")(scene::Scene)\n    @ Main ~/.julia/dev/FractalTools/example/mesh/makie_recipe.jl:4\n  [2] default_theme(scene::Scene, #unused#::Type{Combined{myplot, Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}}})\n    @ Main ~/.julia/packages/AbstractPlotting/50gu0/src/recipes.jl:133\n  [3] (::AbstractPlotting.var\"#187#189\"{Scene, DataType})()\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/interfaces.jl:448\n  [4] merged_get!(defaults::AbstractPlotting.var\"#187#189\"{Scene, DataType}, key::Symbol, scene::Scene, input::Attributes)\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/utilities/utilities.jl:208\n  [5] Combined{myplot, Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}}(scene::Scene, attributes::Attributes, input::Tuple{Observable{Vector{Float64}}, Observable{Vector{Float64}}, Observable{Vector{Float64}}}, args::Observable{Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}})\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/interfaces.jl:447\n  [6] plot!(scene::Scene, P::Type{Combined{myplot, Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}}}, attributes::Attributes, input::Tuple{Observable{Vector{Float64}}, Observable{Vector{Float64}}, Observable{Vector{Float64}}}, args::Observable{Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}})\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/interfaces.jl:680\n  [7] plot!(::Scene, ::Type{Combined{myplot, ArgType} where ArgType}, ::Attributes, ::Vector{Float64}, ::Vararg{Vector{Float64}, N} where N; kw_attributes::Base.Iterators.Pairs{Symbol, Bool, Tuple{Symbol}, NamedTuple{(:show_axis,), Tuple{Bool}}})\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/interfaces.jl:622\n  [8] plot(::Type{Combined{myplot, ArgType} where ArgType}, ::Vector{Float64}, ::Vararg{Vector{Float64}, N} where N; axis::NamedTuple{(), Tuple{}}, figure::NamedTuple{(), Tuple{}}, kw_attributes::Base.Iterators.Pairs{Union{}, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/figureplotting.jl:21\n  [9] plot(::Type{Combined{myplot, ArgType} where ArgType}, ::Vector{Float64}, ::Vector{Float64}, ::Vararg{Vector{Float64}, N} where N)\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/figureplotting.jl:18\n [10] myplot(::Vector{Float64}, ::Vararg{Vector{Float64}, N} where N; attributes::Base.Iterators.Pairs{Union{}, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})\n    @ Main ~/.julia/packages/AbstractPlotting/50gu0/src/recipes.jl:12\n [11] myplot(::Vector{Float64}, ::Vararg{Vector{Float64}, N} where N)\n    @ Main ~/.julia/packages/AbstractPlotting/50gu0/src/recipes.jl:12\n [12] top-level scope\n    @ ~/.julia/dev/FractalTools/example/mesh/makie_recipe.jl:14\nin expression starting at /home/sari/.julia/dev/FractalTools/example/mesh/makie_recipe.jl:14```\nAny ideas how to fix this?","user":"UTX7DAUBE","ts":"1612791465.412700","team":"T68168MUP","edited":{"user":"UTX7DAUBE","ts":"1612791632.000000"},"blocks":[{"type":"rich_text","block_id":"uBr=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I am trying to define a simple plots recipe trying to follow the step in the "},{"type":"link","url":"http://makie.juliaplots.org/stable/recipes.html","text":"docs"},{"type":"text","text":". But, it seems that the theme is not defined properly. Here is the case\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Makie\n\n@recipe(MyPlot, x, y, z) do scene\n    Theme(\n        plot_color => :red\n    )\nend\n\nfunction AbstractPlotting.plot!(myplot::MyPlot)\n    lines!(myplot, rand(10), color=myplot[:plot_color])\n    plot!(myplot, myplot[:x], myplot[:y])\n    myplot\nend\nmyplot(rand(10), rand(10), rand(10))"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"The error complain is about the "},{"type":"text","text":"plot_color","style":{"code":true}},{"type":"text","text":" attribute.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ERROR: LoadError: UndefVarError: plot_color not defined\nStacktrace:\n  [1] (::var\"#17#18\")(scene::Scene)\n    @ Main ~/.julia/dev/FractalTools/example/mesh/makie_recipe.jl:4\n  [2] default_theme(scene::Scene, #unused#::Type{Combined{myplot, Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}}})\n    @ Main ~/.julia/packages/AbstractPlotting/50gu0/src/recipes.jl:133\n  [3] (::AbstractPlotting.var\"#187#189\"{Scene, DataType})()\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/interfaces.jl:448\n  [4] merged_get!(defaults::AbstractPlotting.var\"#187#189\"{Scene, DataType}, key::Symbol, scene::Scene, input::Attributes)\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/utilities/utilities.jl:208\n  [5] Combined{myplot, Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}}(scene::Scene, attributes::Attributes, input::Tuple{Observable{Vector{Float64}}, Observable{Vector{Float64}}, Observable{Vector{Float64}}}, args::Observable{Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}})\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/interfaces.jl:447\n  [6] plot!(scene::Scene, P::Type{Combined{myplot, Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}}}, attributes::Attributes, input::Tuple{Observable{Vector{Float64}}, Observable{Vector{Float64}}, Observable{Vector{Float64}}}, args::Observable{Tuple{Vector{Float64}, Vector{Float64}, Vector{Float64}}})\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/interfaces.jl:680\n  [7] plot!(::Scene, ::Type{Combined{myplot, ArgType} where ArgType}, ::Attributes, ::Vector{Float64}, ::Vararg{Vector{Float64}, N} where N; kw_attributes::Base.Iterators.Pairs{Symbol, Bool, Tuple{Symbol}, NamedTuple{(:show_axis,), Tuple{Bool}}})\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/interfaces.jl:622\n  [8] plot(::Type{Combined{myplot, ArgType} where ArgType}, ::Vector{Float64}, ::Vararg{Vector{Float64}, N} where N; axis::NamedTuple{(), Tuple{}}, figure::NamedTuple{(), Tuple{}}, kw_attributes::Base.Iterators.Pairs{Union{}, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/figureplotting.jl:21\n  [9] plot(::Type{Combined{myplot, ArgType} where ArgType}, ::Vector{Float64}, ::Vector{Float64}, ::Vararg{Vector{Float64}, N} where N)\n    @ AbstractPlotting ~/.julia/packages/AbstractPlotting/50gu0/src/figureplotting.jl:18\n [10] myplot(::Vector{Float64}, ::Vararg{Vector{Float64}, N} where N; attributes::Base.Iterators.Pairs{Union{}, Union{}, Tuple{}, NamedTuple{(), Tuple{}}})\n    @ Main ~/.julia/packages/AbstractPlotting/50gu0/src/recipes.jl:12\n [11] myplot(::Vector{Float64}, ::Vararg{Vector{Float64}, N} where N)\n    @ Main ~/.julia/packages/AbstractPlotting/50gu0/src/recipes.jl:12\n [12] top-level scope\n    @ ~/.julia/dev/FractalTools/example/mesh/makie_recipe.jl:14\nin expression starting at /home/sari/.julia/dev/FractalTools/example/mesh/makie_recipe.jl:14"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Any ideas how to fix this?"}]}]}],"thread_ts":"1612791465.412700","reply_count":6,"reply_users_count":2,"latest_reply":"1612804704.424600","reply_users":["UK1BNFHFV","UTX7DAUBE"],"subscribed":false},{"client_msg_id":"AF9924AA-C8FA-4074-B98B-12C1FA7D62CB","type":"message","text":"That looks like a bug in the docs. If you use the =&gt; pair syntax both parts need to be symbols with a : and if you use the keyword argument syntax the keyword doesn't need the :","user":"UK1BNFHFV","ts":"1612794638.416000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=MaJG","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That looks like a bug in the docs. If you use the => pair syntax both parts need to be symbols with a : and if you use the keyword argument syntax the keyword doesn't need the :"}]}]}],"thread_ts":"1612791465.412700","parent_user_id":"UTX7DAUBE"},{"client_msg_id":"DC6B2B32-0F0E-451E-9021-5A90D3767042","type":"message","text":"So either plot_color = :red or :plot_color =&gt; :red","user":"UK1BNFHFV","ts":"1612794672.417000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"A2P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So either plot_color = :red or :plot_color => :red"}]}]}],"thread_ts":"1612791465.412700","parent_user_id":"UTX7DAUBE","reactions":[{"name":"+1","users":["UTX7DAUBE"],"count":1}]},{"client_msg_id":"c0a39308-2099-4e68-80f9-4918fdb72865","type":"message","text":"Thanks for the quick replay <@UK1BNFHFV> :slightly_smiling_face:","user":"UTX7DAUBE","ts":"1612804632.424000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NVhTn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for the quick replay "},{"type":"user","user_id":"UK1BNFHFV"},{"type":"text","text":" "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1612791465.412700","parent_user_id":"UTX7DAUBE"},{"client_msg_id":"44ef305e-52b4-4839-8033-ee23c9a1c30e","type":"message","text":"I was not careful about the syntax.","user":"UTX7DAUBE","ts":"1612804653.424200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"up+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I was not careful about the syntax."}]}]}],"thread_ts":"1612791465.412700","parent_user_id":"UTX7DAUBE"},{"client_msg_id":"2604064c-fe3d-4a68-b93b-01f0cb30a150","type":"message","text":"I think the `plot!` method should not be there, otherwise a MethodError is thrown.","user":"UTX7DAUBE","ts":"1612804667.424400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uNeqw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the "},{"type":"text","text":"plot!","style":{"code":true}},{"type":"text","text":" method should not be there, otherwise a MethodError is thrown."}]}]}],"thread_ts":"1612791465.412700","parent_user_id":"UTX7DAUBE"},{"client_msg_id":"87a301e6-cd30-4eab-b480-d3019573149d","type":"message","text":"Here is the final solution.\n```using Makie \n\n@recipe(MyPlot, x, y) do scene \n    Attributes(\n        plot_color = :red,\n    )\nend \n\nfunction AbstractPlotting.plot!(myplot::MyPlot) \n    data = rand(10) \n    lines!(myplot, data, color=myplot.plot_color)\n    scatter!(myplot, data, color=myplot.plot_color) \n    myplot\nend\n\nmyplot(rand(10), rand(10), plot_color=:black)```","user":"UTX7DAUBE","ts":"1612804704.424600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ixcIq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here is the final solution.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using Makie \n\n@recipe(MyPlot, x, y) do scene \n    Attributes(\n        plot_color = :red,\n    )\nend \n\nfunction AbstractPlotting.plot!(myplot::MyPlot) \n    data = rand(10) \n    lines!(myplot, data, color=myplot.plot_color)\n    scatter!(myplot, data, color=myplot.plot_color) \n    myplot\nend\n\nmyplot(rand(10), rand(10), plot_color=:black)"}]}]}],"thread_ts":"1612791465.412700","parent_user_id":"UTX7DAUBE"}]