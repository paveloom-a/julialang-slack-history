[{"client_msg_id":"afd780f3-1c5e-4bca-9032-af9dc9b34e2a","type":"message","text":"But, since my approach for manual \"forced\" union splitting is mostly based on the continuation-passing style which could hurt performance on GPU  (due to thread divergence), I wonder if we can enable different optimizations/lowering of small Union. Can we have a custom pass on Julia's SSA IR in GPUCompiler? (cc <@U68A3ASP9> <@U67BJLYCS>)","user":"UC7AF7NSU","ts":"1615327192.006300","team":"T68168MUP","edited":{"user":"UC7AF7NSU","ts":"1615327245.000000"},"blocks":[{"type":"rich_text","block_id":"zIHl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But, since my approach for manual \"forced\" union splitting is mostly based on the continuation-passing style which could hurt performance on GPU  (due to thread divergence), I wonder if we can enable different optimizations/lowering of small Union. Can we have a custom pass on Julia's SSA IR in GPUCompiler? (cc "},{"type":"user","user_id":"U68A3ASP9"},{"type":"text","text":" "},{"type":"user","user_id":"U67BJLYCS"},{"type":"text","text":")"}]}]}],"thread_ts":"1615327192.006300","reply_count":3,"reply_users_count":2,"latest_reply":"1615328312.007000","reply_users":["U6A0PD8CR","U67BJLYCS"],"subscribed":false},{"client_msg_id":"87179d8e-5226-4d65-902c-735ab53b2163","type":"message","text":"We don't currently have a Julia IR pass manager in GPUCompiler.","user":"U6A0PD8CR","ts":"1615328172.006600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"e4V","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"We don't currently have a Julia IR pass manager in GPUCompiler."}]}]}],"thread_ts":"1615327192.006300","parent_user_id":"UC7AF7NSU"},{"client_msg_id":"bb2ff869-b481-4d1a-a32e-a9cab7238b2a","type":"message","text":"I think Tim and Valentin were discussing how to do composable IR transforms over Julia IR, but I don't know if that ended up with a solution.","user":"U6A0PD8CR","ts":"1615328235.006800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mgO6t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think Tim and Valentin were discussing how to do composable IR transforms over Julia IR, but I don't know if that ended up with a solution."}]}]}],"thread_ts":"1615327192.006300","parent_user_id":"UC7AF7NSU"},{"client_msg_id":"46b2e648-b480-4262-8cf9-5f803cbbcf21","type":"message","text":"<https://github.com/vchuravy/KernelCompiler.jl/blob/main/src/optimize.jl>","user":"U67BJLYCS","ts":"1615328312.007000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6IO","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/vchuravy/KernelCompiler.jl/blob/main/src/optimize.jl"}]}]}],"thread_ts":"1615327192.006300","parent_user_id":"UC7AF7NSU"}]