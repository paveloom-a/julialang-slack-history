[{"client_msg_id":"816d950e-4cb0-45de-8ce3-7afd0019c5da","type":"message","text":"unless you're running with `-g0`","user":"U68A3ASP9","ts":"1610049497.156100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YTn+D","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"unless you're running with "},{"type":"text","text":"-g0","style":{"code":true}}]}]}],"thread_ts":"1610049497.156100","reply_count":14,"reply_users_count":2,"latest_reply":"1610050910.160100","reply_users":["UM30MT6RF","U68A3ASP9"],"subscribed":false},{"client_msg_id":"a2fbfa52-7592-41e5-93b3-0b33d2a79cc8","type":"message","text":"I don't think I am, but I don't have a build with any assertions either","user":"UM30MT6RF","ts":"1610049918.157500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qVv1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't think I am, but I don't have a build with any assertions either"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"e15c0b9d-8d52-4054-8496-b82ce4a0dc3e","type":"message","text":"that's not necessary","user":"U68A3ASP9","ts":"1610050599.157700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dWzk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that's not necessary"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"3be221ef-bbc1-47e5-8926-1cfa60c07989","type":"message","text":"can you try calling `synchronize()`?","user":"U68A3ASP9","ts":"1610050621.157900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"T03u","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you try calling "},{"type":"text","text":"synchronize()","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"95c75a43-bd2e-4c89-a390-b0857363fcab","type":"message","text":"maybe CUDA's printf buffer isn't being flushed","user":"U68A3ASP9","ts":"1610050630.158100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"WFcs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"maybe CUDA's printf buffer isn't being flushed"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"b81b2be3-be40-4370-9703-e9486b9bf73f","type":"message","text":"the exception state is detected by a pinned memory change","user":"U68A3ASP9","ts":"1610050646.158300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UtXf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the exception state is detected by a pinned memory change"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"b055cc8f-7df3-4a01-a3c6-0563386a8921","type":"message","text":"Now I get:\n```julia&gt; CUDA.synchronize()\nERROR: CUDA error: unspecified launch failure (code 719, ERROR_LAUNCH_FAILED)\nStacktrace:\n [1] throw_api_error(res::CUDA.cudaError_enum)\n   @ CUDA /local/scratch/ssd/sschaub/.julia/packages/CUDA/tZgkK/lib/cudadrv/error.jl:97\n [2] macro expansion\n   @ /local/scratch/ssd/sschaub/.julia/packages/CUDA/tZgkK/lib/cudadrv/error.jl:104 [inlined]\n [3] cuCtxSynchronize\n   @ /local/scratch/ssd/sschaub/.julia/packages/CUDA/tZgkK/lib/utils/call.jl:26 [inlined]\n [4] synchronize()\n   @ CUDA /local/scratch/ssd/sschaub/.julia/packages/CUDA/tZgkK/lib/cudadrv/context.jl:173\n [5] top-level scope\n   @ REPL[6]:1\n [6] eval\n   @ ./boot.jl:369 [inlined]```","user":"UM30MT6RF","ts":"1610050684.158500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6Ikyz","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Now I get:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia> CUDA.synchronize()\nERROR: CUDA error: unspecified launch failure (code 719, ERROR_LAUNCH_FAILED)\nStacktrace:\n [1] throw_api_error(res::CUDA.cudaError_enum)\n   @ CUDA /local/scratch/ssd/sschaub/.julia/packages/CUDA/tZgkK/lib/cudadrv/error.jl:97\n [2] macro expansion\n   @ /local/scratch/ssd/sschaub/.julia/packages/CUDA/tZgkK/lib/cudadrv/error.jl:104 [inlined]\n [3] cuCtxSynchronize\n   @ /local/scratch/ssd/sschaub/.julia/packages/CUDA/tZgkK/lib/utils/call.jl:26 [inlined]\n [4] synchronize()\n   @ CUDA /local/scratch/ssd/sschaub/.julia/packages/CUDA/tZgkK/lib/cudadrv/context.jl:173\n [5] top-level scope\n   @ REPL[6]:1\n [6] eval\n   @ ./boot.jl:369 [inlined]"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"ba82db30-8229-4175-83eb-0f3daddee3e8","type":"message","text":"lots of stuff can cause that, sadly","user":"U68A3ASP9","ts":"1610050792.158700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qFpi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"lots of stuff can cause that, sadly"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"b825d0cc-0691-483a-bc00-d0f313f33e3c","type":"message","text":"but it's likely unrelated to the device side exception causing the KernelException","user":"U68A3ASP9","ts":"1610050820.158900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"1N0X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but it's likely unrelated to the device side exception causing the KernelException"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"7921b5e9-60f2-4fbd-a0d1-9533b557b8a0","type":"message","text":"The problem is probably sthg with KernelAbstractions, so I am probably better off looking at the lowered code it produces instead. Just wanted to make sure I wasn't missing something obvious just from the stacktrace","user":"UM30MT6RF","ts":"1610050826.159100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7Tq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"The problem is probably sthg with KernelAbstractions, so I am probably better off looking at the lowered code it produces instead. Just wanted to make sure I wasn't missing something obvious just from the stacktrace"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"0f057092-34a0-4f34-b232-208835d1537c","type":"message","text":"no, the KernelException just detects upon the next API call that the previous kernel execution had an exception","user":"U68A3ASP9","ts":"1610050859.159300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RVLX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no, the KernelException just detects upon the next API call that the previous kernel execution had an exception"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"873fd036-6093-462c-ad85-108520418354","type":"message","text":"but its stacktrace doesn't tell you anything","user":"U68A3ASP9","ts":"1610050864.159500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2pZym","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"but its stacktrace doesn't tell you anything"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"00e7ab9a-9290-4133-a9ce-4dc02ae52cdf","type":"message","text":"similarly how to that LAUNCH_FAILED doesn't, because it's only caught by the next API call","user":"U68A3ASP9","ts":"1610050880.159700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"t=A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"similarly how to that LAUNCH_FAILED doesn't, because it's only caught by the next API call"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"6cba3381-894f-4543-80bd-55c0ee514217","type":"message","text":"a similar mechanism, the one by CUDA.jl, the other by CUDA itself","user":"U68A3ASP9","ts":"1610050893.159900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NjK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"a similar mechanism, the one by CUDA.jl, the other by CUDA itself"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"},{"client_msg_id":"c9a23568-1703-4617-bdf7-21924a69fdae","type":"message","text":"Ah, I see","user":"UM30MT6RF","ts":"1610050910.160100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"HSK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, I see"}]}]}],"thread_ts":"1610049497.156100","parent_user_id":"U68A3ASP9"}]