[{"client_msg_id":"fa32bb49-12e5-4ea1-adb1-96bd0fda928d","type":"message","text":"Quasi-static implies (/requires) inference.","user":"U69BL50BF","ts":"1616170054.024100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JeBY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Quasi-static implies (/requires) inference."}]}]}],"thread_ts":"1616170054.024100","reply_count":13,"reply_users_count":2,"latest_reply":"1616171304.026800","reply_users":["U66N673NV","U69BL50BF"],"subscribed":false},{"type":"message","subtype":"thread_broadcast","text":"So yes, the options are to either fall back to a super slow version or error out, correct? What does MTK do?","user":"U66N673NV","ts":"1616170243.024200","thread_ts":"1616170054.024100","root":{"client_msg_id":"fa32bb49-12e5-4ea1-adb1-96bd0fda928d","type":"message","text":"Quasi-static implies (/requires) inference.","user":"U69BL50BF","ts":"1616170054.024100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JeBY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Quasi-static implies (/requires) inference."}]}]}],"thread_ts":"1616170054.024100","reply_count":13,"reply_users_count":2,"latest_reply":"1616171304.026800","reply_users":["U66N673NV","U69BL50BF"],"subscribed":false},"blocks":[{"type":"rich_text","block_id":"Eds","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So yes, the options are to either fall back to a super slow version or error out, correct? What does MTK do?"}]}]}],"client_msg_id":"b1ba2b9f-92d6-4039-9143-b6fd8890866f"},{"client_msg_id":"51f15a4e-3952-4aee-8a75-3bfc83d8e87d","type":"message","text":"Somewhat \"error out\", but that misses the fact that you don't need inference to do abstract tracing, and the code it generates will be inferred.","user":"U69BL50BF","ts":"1616170298.024500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0+ep=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Somewhat \"error out\", but that misses the fact that you don't need inference to do abstract tracing, and the code it generates will be inferred."}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"bce8739d-885c-481b-bd4d-6e125f2dbd5b","type":"message","text":"I guess linear algebra is a nice counter example of where inference can fail (because of `\\` returns) but where MTK can trace and do codegen to generate an inferable program.","user":"U69BL50BF","ts":"1616170333.024700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"eOP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess linear algebra is a nice counter example of where inference can fail (because of "},{"type":"text","text":"\\","style":{"code":true}},{"type":"text","text":" returns) but where MTK can trace and do codegen to generate an inferable program."}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"aaed526f-e007-47e4-8c74-0424fd658207","type":"message","text":"But generating code that does a fast path for linear and quadratic expressions needs inference, abstract tracing isn't sufficient","user":"U66N673NV","ts":"1616170435.024900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"a4q=","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But generating code that does a fast path for linear and quadratic expressions needs inference, abstract tracing isn't sufficient"}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"f0b9f9cb-5288-4616-b620-dbd24694b1fe","type":"message","text":"If you symbolically know exactly the linear and quadratic expressions, what is a code you cannot create for it?","user":"U69BL50BF","ts":"1616170473.025100","team":"T68168MUP","edited":{"user":"U69BL50BF","ts":"1616170476.000000"},"blocks":[{"type":"rich_text","block_id":"byIi","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If you symbolically know exactly the linear and quadratic expressions, what is a code you cannot create for it?"}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"1a7dd792-1b08-40e0-bafd-c66ce62d5866","type":"message","text":"sum(a[i] * b[i] * c[i] for i in 1:10000000)","user":"U66N673NV","ts":"1616170613.025400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DQlN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"sum(a[i] * b[i] * c[i] for i in 1:10000000)"}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"af67e52f-7c4d-44fd-bc2d-9951305f7be0","type":"message","text":"That's linear or quadratic if one of the terms is a number.","user":"U66N673NV","ts":"1616170637.025600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"c0u4m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"That's linear or quadratic if one of the terms is a number."}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"4422a749-0a50-4f12-9339-15236f81c5ca","type":"message","text":"how is that a counter example? That's precisely one of the cases it handles, current via scalarization but Shashi is working on the array symbolics to not expand it?","user":"U69BL50BF","ts":"1616170697.025800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"s7yNU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how is that a counter example? That's precisely one of the cases it handles, current via scalarization but Shashi is working on the array symbolics to not expand it?"}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"07efd0ba-8684-4eb5-83fc-c4204ed69e72","type":"message","text":"What do you do if you can't infer the element types of the arrays?","user":"U66N673NV","ts":"1616170738.026000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TUJUt","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What do you do if you can't infer the element types of the arrays?"}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"82c6090a-7c64-4367-89ee-c767e5472b25","type":"message","text":"if that's your function then you infer it","user":"U69BL50BF","ts":"1616170788.026200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/TA//","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if that's your function then you infer it"}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"ea2b0bb0-3eb4-4f0e-b014-95274b68258b","type":"message","text":"can you give a full example?","user":"U69BL50BF","ts":"1616170799.026400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7No3c","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you give a full example?"}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"d01317c4-5afb-42dd-be5a-996973f5c942","type":"message","text":"MTK generates code that's dependent on the inputs.","user":"U69BL50BF","ts":"1616170837.026600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Or8vo","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"MTK generates code that's dependent on the inputs."}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"},{"client_msg_id":"04b12827-7ec9-4908-bda5-969cec999fc3","type":"message","text":"`a = [type_unstable_function(i) for i in 1:10000000];@variable(m, b[1:10000000]); @variable(m, c[1:10000000]); @constraint(m, sum(a[i] * b[i] * c[i] for i in 1:10000000) &lt;= 1)`","user":"U66N673NV","ts":"1616171304.026800","team":"T68168MUP","edited":{"user":"U66N673NV","ts":"1616171317.000000"},"blocks":[{"type":"rich_text","block_id":"Oqa","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"a = [type_unstable_function(i) for i in 1:10000000];@variable(m, b[1:10000000]); @variable(m, c[1:10000000]); @constraint(m, sum(a[i] * b[i] * c[i] for i in 1:10000000) <= 1)","style":{"code":true}}]}]}],"thread_ts":"1616170054.024100","parent_user_id":"U69BL50BF"}]