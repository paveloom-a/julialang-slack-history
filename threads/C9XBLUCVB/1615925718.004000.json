[{"client_msg_id":"a03a294a-fabd-4f5e-abb2-d0272d9dd7f4","type":"message","text":"Anyone know of a way, for a single shapefile, to intersect its elements (polygons) and count the number of overlaps in each new polygon? e.g., the desired method would, for two polygons A and B that partially overlap, return 3 polygons:\n• One for the section of A that does not intersect B, with a value of 1 (since only one polygon intersects that section),\n• One for the intersection of A and B, with a value of 2\n• Once for the section of B that does not intersect A, with a value of 1\nI need to do this for 1000 polygons in a single shapefile. There is a function in R that does this, `sf::st_intersection()` but it's really slow, and I have not found any suitable GDAL/OGR replacements. Thanks for any ideas!","user":"U011NV8FNF7","ts":"1615925718.004000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"bK+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Anyone know of a way, for a single shapefile, to intersect its elements (polygons) and count the number of overlaps in each new polygon? e.g., the desired method would, for two polygons A and B that partially overlap, return 3 polygons:\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"One for the section of A that does not intersect B, with a value of 1 (since only one polygon intersects that section),"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"One for the intersection of A and B, with a value of 2"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Once for the section of B that does not intersect A, with a value of 1"}]}],"style":"bullet","indent":0},{"type":"rich_text_section","elements":[{"type":"text","text":"I need to do this for 1000 polygons in a single shapefile. There is a function in R that does this, "},{"type":"text","text":"sf::st_intersection()","style":{"code":true}},{"type":"text","text":" but it's really slow, and I have not found any suitable GDAL/OGR replacements. Thanks for any ideas!"}]}]}],"thread_ts":"1615925718.004000","reply_count":7,"reply_users_count":4,"latest_reply":"1616484256.002500","reply_users":["UGXP1QV41","U011NV8FNF7","U821PV38V","U88813859"],"subscribed":false},{"client_msg_id":"4e878710-142b-4d0b-ac32-52e689ec2f8a","type":"message","text":"This might be the best bet in Julia: <https://github.com/JuliaGeometry/Clipper.jl/>","user":"UGXP1QV41","ts":"1615932711.004100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zNeP0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"This might be the best bet in Julia: "},{"type":"link","url":"https://github.com/JuliaGeometry/Clipper.jl/"}]}]}],"thread_ts":"1615925718.004000","parent_user_id":"U011NV8FNF7"},{"client_msg_id":"e45400d3-6840-47a5-8407-6b0c6c97d89d","type":"message","text":"Thanks! I'll check that out","user":"U011NV8FNF7","ts":"1615932770.004300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"=2Wj","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks! I'll check that out"}]}]}],"thread_ts":"1615925718.004000","parent_user_id":"U011NV8FNF7"},{"client_msg_id":"AADE60C5-3806-4C25-9AD6-3DC7C590E5DD","type":"message","text":"<https://github.com/JuliaGeo/LibGEOS.jl|https://github.com/JuliaGeo/LibGEOS.jl> is the same GEOS-library as used by  `sf::st_intersection()`","user":"U821PV38V","ts":"1615937691.001500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J3n","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaGeo/LibGEOS.jl","text":"https://github.com/JuliaGeo/LibGEOS.jl"},{"type":"text","text":" is the same GEOS-library as used by  "},{"type":"text","text":"sf::st_intersection()","style":{"code":true}}]}]}],"thread_ts":"1615925718.004000","parent_user_id":"U011NV8FNF7"},{"client_msg_id":"d6794355-a58c-481b-bef5-c89419aaa203","type":"message","text":"Also check first if they intersect with `intersects` and only then do the actual intersection.","user":"U88813859","ts":"1616447135.001800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"d=VC","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Also check first if they intersect with "},{"type":"text","text":"intersects","style":{"code":true}},{"type":"text","text":" and only then do the actual intersection."}]}]}],"thread_ts":"1615925718.004000","parent_user_id":"U011NV8FNF7"},{"client_msg_id":"5e2ba691-e8e5-43ee-8bac-a2ffa4d7ef8c","type":"message","text":"Some things that should be possible but are way harder in Julia at the moment, use prepared geometries and/or a spatial index. And you're looking for the combinations of all polygon in a shapefile if I'm not mistaken, that grows quite quickly.","user":"U88813859","ts":"1616447348.002000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Z57g","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Some things that should be possible but are way harder in Julia at the moment, use prepared geometries and/or a spatial index. And you're looking for the combinations of all polygon in a shapefile if I'm not mistaken, that grows quite quickly."}]}]}],"thread_ts":"1615925718.004000","parent_user_id":"U011NV8FNF7","reactions":[{"name":"+1::skin-tone-2","users":["U011NV8FNF7"],"count":1}]},{"client_msg_id":"4983016a-c4b4-4106-95e4-9702132a35aa","type":"message","text":"Yeah -- the errors from the R approach turned out to be due to LibGEOS itself (same error in LibGEOS  method when run from GIS), so I did not end up pursuing a solution in Julia since it would likely be subject to the same error.\n\nI ended up using Google Earth Engine.... an approach that rasterized each feature then summed the results, then converted back to vectors.","user":"U011NV8FNF7","ts":"1616453791.002200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8A1WE","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah -- the errors from the R approach turned out to be due to LibGEOS itself (same error in LibGEOS  method when run from GIS), so I did not end up pursuing a solution in Julia since it would likely be subject to the same error.\n\nI ended up using Google Earth Engine.... an approach that rasterized each feature then summed the results, then converted back to vectors."}]}]}],"thread_ts":"1615925718.004000","parent_user_id":"U011NV8FNF7"},{"client_msg_id":"a42aa526-b8a2-436b-ac71-2c3d42d3098e","type":"message","text":"Ugly but pragmatic! :slightly_smiling_face: Still uses GDAL underneath as well.","user":"U88813859","ts":"1616484256.002500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vcY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ugly but pragmatic! "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" Still uses GDAL underneath as well."}]}]}],"thread_ts":"1615925718.004000","parent_user_id":"U011NV8FNF7","reactions":[{"name":"+1::skin-tone-2","users":["U011NV8FNF7"],"count":1}]}]