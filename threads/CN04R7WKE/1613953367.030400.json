[{"client_msg_id":"1cb73592-57c3-4cfc-a781-f2b7d516a6bc","type":"message","text":"care you share something like it?","user":"U69BL50BF","ts":"1613953367.030400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XTgw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"care you share something like it?"}]}]}],"thread_ts":"1613953367.030400","reply_count":5,"reply_users_count":2,"latest_reply":"1613962709.034900","reply_users":["U01N8RAGPRA","U69BL50BF"],"subscribed":false},{"client_msg_id":"00f8053e-10b3-4240-9304-416df44756bd","type":"message","text":"```function optimized_unknown!(du, u, p, t)\n    U4_1 = @view u[4:end-1]\n    U3_2 = @view u[3:end-2]\n    U2_3 = @view u[2:end-3]\n    U5_0 = @view u[5:end]\n    U1_4 = @view u[1:end-4]\n    dU12 = @view du[1:2]\n    dUend = @view du[end-1:end]\n    dUmid = @view du[3:end-2] \n    @. dU12 = zro_mat\n    @. dUend = zro_mat\n    @. dUmid = 1.0*((p[1]*U4_1.^3 - p[2]*U4_1.^2 + p[3]*U4_1 - p[4] \n                     - 2.0*(p[1]*U3_2.^3 - p[2]*U3_2.^2 + p[3]*U3_2 - p[4])\n                     + p[1]*U2_3.^3 - p[2]*U2_3.^2 + p[3]*U2_3 - p[4])/dx2 \n                    - 0.1*(U5_0 - 4.0*U4_1 + 6.0*U3_2 - 4.0*U2_3 + U1_4)/dx4)\nend\n\npinit = [22.0, 28.0, 13.0, 0.7]\n\nprob = ODEProblem(optimized_unknown!, u0, tspan, pinit)\n\nfunction loss(p)\n    tmp_prob = remake(prob,p=p)\n    tmp_sol = solve(tmp_prob,CVODE_BDF(),saveat=tsteps)\n    sum(abs2, Array(tmp_sol) - true_data)\nend\n\nfunction unknown_cb(p,l)\n    @show l, p\n    false\nend\n\nres = DiffEqFlux.sciml_train(loss,pinit,ADAM(0.1),cb=unknown_cb, maxiters=500)```","user":"U01N8RAGPRA","ts":"1613959007.032300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f/i","elements":[{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function optimized_unknown!(du, u, p, t)\n    U4_1 = @view u[4:end-1]\n    U3_2 = @view u[3:end-2]\n    U2_3 = @view u[2:end-3]\n    U5_0 = @view u[5:end]\n    U1_4 = @view u[1:end-4]\n    dU12 = @view du[1:2]\n    dUend = @view du[end-1:end]\n    dUmid = @view du[3:end-2] \n    @. dU12 = zro_mat\n    @. dUend = zro_mat\n    @. dUmid = 1.0*((p[1]*U4_1.^3 - p[2]*U4_1.^2 + p[3]*U4_1 - p[4] \n                     - 2.0*(p[1]*U3_2.^3 - p[2]*U3_2.^2 + p[3]*U3_2 - p[4])\n                     + p[1]*U2_3.^3 - p[2]*U2_3.^2 + p[3]*U2_3 - p[4])/dx2 \n                    - 0.1*(U5_0 - 4.0*U4_1 + 6.0*U3_2 - 4.0*U2_3 + U1_4)/dx4)\nend\n\npinit = [22.0, 28.0, 13.0, 0.7]\n\nprob = ODEProblem(optimized_unknown!, u0, tspan, pinit)\n\nfunction loss(p)\n    tmp_prob = remake(prob,p=p)\n    tmp_sol = solve(tmp_prob,CVODE_BDF(),saveat=tsteps)\n    sum(abs2, Array(tmp_sol) - true_data)\nend\n\nfunction unknown_cb(p,l)\n    @show l, p\n    false\nend\n\nres = DiffEqFlux.sciml_train(loss,pinit,ADAM(0.1),cb=unknown_cb, maxiters=500)"}]}]}],"thread_ts":"1613953367.030400","parent_user_id":"U69BL50BF"},{"client_msg_id":"8d923e85-397b-40bf-81ee-ab2a9854bbb8","type":"message","text":"Here is part of the code, the ODE function has a finite difference for a 2nd a 4th derivative (the system is stiff) and the state vector has length 1001","user":"U01N8RAGPRA","ts":"1613959148.032500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"07i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here is part of the code, the ODE function has a finite difference for a 2nd a 4th derivative (the system is stiff) and the state vector has length 1001"}]}]}],"thread_ts":"1613953367.030400","parent_user_id":"U69BL50BF"},{"client_msg_id":"a5681a60-37d2-4da2-8ecf-3cb131229679","type":"message","text":"doing this out-of-place and allocating and using `autojacvec=ZygoteVJP()` might be faster","user":"U69BL50BF","ts":"1613962689.034500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vOLTd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"doing this out-of-place and allocating and using "},{"type":"text","text":"autojacvec=ZygoteVJP()","style":{"code":true}},{"type":"text","text":" might be faster"}]}]}],"thread_ts":"1613953367.030400","parent_user_id":"U69BL50BF"},{"client_msg_id":"c6e86ef5-ef22-4358-9f36-1be4ef6cfe5f","type":"message","text":"or `QuadratureAdjoint(autojacvec=ReverseDiffVJP(true))`","user":"U69BL50BF","ts":"1613962706.034700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Xp3R","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"or "},{"type":"text","text":"QuadratureAdjoint(autojacvec=ReverseDiffVJP(true))","style":{"code":true}}]}]}],"thread_ts":"1613953367.030400","parent_user_id":"U69BL50BF"},{"client_msg_id":"f07c877f-670d-4eab-9073-91c5417d663b","type":"message","text":"for the sensealg.","user":"U69BL50BF","ts":"1613962709.034900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MsU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for the sensealg."}]}]}],"thread_ts":"1613953367.030400","parent_user_id":"U69BL50BF"}]