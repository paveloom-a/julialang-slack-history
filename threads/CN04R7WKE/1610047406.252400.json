[{"client_msg_id":"0246ce59-ba65-493a-baae-36d39fc82961","type":"message","text":"Hey! How are you guys doing?\nIm playing a little bit with Universal Odes. In particular with the lotka-volterra ode.\n\nI´m creating data from this system adding a silly “human hunt” part in the equation (It is not really a new component of the equation, but rather a constant that subtracts from the birth rate. Perhaps here is the problem? )\n```function lotka_volterra_hunt(du,u,p,t)\n    #Lotka-Volterra function with humans that hunt\n    pray, pred  = u\n    birth_pray, mort_pray, birth_pred, mort_pred, hunt_pray, hunt_pred = p\n\n    du[1]  = (birth_pray - mort_pray * pred - hunt_pray)*pray\n    du[2]  = (birth_pred * pray - mort_pred - hunt_pred)*pred\nend```\nAnd i want a NN to recover that specific part doing:\n```L = FastChain(FastDense(2, 32, tanh),FastDense(32, 32, tanh), FastDense(32, 2))\np = initial_params(L)\n\nfunction dudt_(u, p,t)\n    x, y = u\n    z = L(u,p)\n    [p_[1]*x + p_[2]*x*y + z[1],\n    -p_[4]*y + p_[3]*x*y + z[2]]\nend```\nThe problem is that when i try to solve this system doing: `sol_nn = solve(prob_nn, Tsit5(), u0 = u0, p = p, saveat = solution.t)` I get this error\n```ERROR: MethodError: no method matching iterate(::DataStructures.BinaryHeap{Float32,DataStructures.LessThan})\nClosest candidates are:\n  iterate(::Base.AsyncGenerator, ::Base.AsyncGeneratorState) at asyncmap.jl:382\n  iterate(::Base.AsyncGenerator) at asyncmap.jl:382\n  iterate(::Combinatorics.Combinations)```\nAny help will be appreciated!","user":"U01A0BP074P","ts":"1610047406.252400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Mc5b","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey! How are you guys doing?\nIm playing a little bit with Universal Odes. In particular with the lotka-volterra ode.\n\nI´m creating data from this system adding a silly “human hunt” part in the equation (It is not really a new component of the equation, but rather a constant that subtracts from the birth rate. Perhaps here is the problem? )\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function lotka_volterra_hunt(du,u,p,t)\n    #Lotka-Volterra function with humans that hunt\n    pray, pred  = u\n    birth_pray, mort_pray, birth_pred, mort_pred, hunt_pray, hunt_pred = p\n\n    du[1]  = (birth_pray - mort_pray * pred - hunt_pray)*pray\n    du[2]  = (birth_pred * pray - mort_pred - hunt_pred)*pred\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nAnd i want a NN to recover that specific part doing:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"L = FastChain(FastDense(2, 32, tanh),FastDense(32, 32, tanh), FastDense(32, 2))\np = initial_params(L)\n\nfunction dudt_(u, p,t)\n    x, y = u\n    z = L(u,p)\n    [p_[1]*x + p_[2]*x*y + z[1],\n    -p_[4]*y + p_[3]*x*y + z[2]]\nend"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nThe problem is that when i try to solve this system doing: "},{"type":"text","text":"sol_nn = solve(prob_nn, Tsit5(), u0 = u0, p = p, saveat = solution.t)","style":{"code":true}},{"type":"text","text":" I get this error\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"ERROR: MethodError: no method matching iterate(::DataStructures.BinaryHeap{Float32,DataStructures.LessThan})\nClosest candidates are:\n  iterate(::Base.AsyncGenerator, ::Base.AsyncGeneratorState) at asyncmap.jl:382\n  iterate(::Base.AsyncGenerator) at asyncmap.jl:382\n  iterate(::Combinatorics.Combinations)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nAny help will be appreciated!"}]}]}],"thread_ts":"1610047406.252400","reply_count":5,"reply_users_count":3,"latest_reply":"1610401594.279300","reply_users":["U6QF223TN","U01A0BP074P","U69BL50BF"],"subscribed":false},{"client_msg_id":"21897845-b196-419e-a2c5-f03f0edb0bf4","type":"message","text":"It might be because of older version of packages, can you `]up` and try from a new session? (Also post the `]st` here)","user":"U6QF223TN","ts":"1610082062.252900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cp1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It might be because of older version of packages, can you "},{"type":"text","text":"]up","style":{"code":true}},{"type":"text","text":" and try from a new session? (Also post the "},{"type":"text","text":"]st","style":{"code":true}},{"type":"text","text":" here)"}]}]}],"thread_ts":"1610047406.252400","parent_user_id":"U01A0BP074P"},{"client_msg_id":"21e3cf9c-9617-4b54-a05f-020c7e8a1a9b","type":"message","text":"Im using the same environment of this example:\n<https://github.com/ChrisRackauckas/universal_differential_equations/blob/master/DelayLotkaVolterra/VolterraExp.jl>\n\nHere is “]st”\n\n```(VolterraExp) pkg&gt; st\nProject VolterraExp v0.1.0\nStatus `~/Desktop/universal_ode/Project.toml`\n  [2445eb08] DataDrivenDiffEq v0.4.0 `<https://github.com/SciML/DataDrivenDiffEq.jl.git#master>`\n  [aae7a2af] DiffEqFlux v1.21.0\n  [41bf760c] DiffEqSensitivity v6.31.1\n  [0c46a032] DifferentialEquations v6.15.0\n  [587475ba] Flux v0.11.1\n  [033835bb] JLD2 v0.1.14\n  [e5e0dc1b] Juno v0.8.3\n  [b4fcebef] Lasso v0.5.2\n  [961ee093] ModelingToolkit v3.17.0\n  [429524aa] Optim v0.22.0\n  [1dea7af3] OrdinaryDiffEq v5.42.3\n  [91a5bcdd] Plots v1.6.0\n  [9f7883ad] Tracker v0.2.11```\nI also tried creating a new environment and adding each package in its last version. Still doesnt work","user":"U01A0BP074P","ts":"1610122867.258200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"yiy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Im using the same environment of this example:\n"},{"type":"link","url":"https://github.com/ChrisRackauckas/universal_differential_equations/blob/master/DelayLotkaVolterra/VolterraExp.jl"},{"type":"text","text":"\n\nHere is “]st”\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"(VolterraExp) pkg> st\nProject VolterraExp v0.1.0\nStatus `~/Desktop/universal_ode/Project.toml`\n  [2445eb08] DataDrivenDiffEq v0.4.0 `"},{"type":"link","url":"https://github.com/SciML/DataDrivenDiffEq.jl.git#master"},{"type":"text","text":"`\n  [aae7a2af] DiffEqFlux v1.21.0\n  [41bf760c] DiffEqSensitivity v6.31.1\n  [0c46a032] DifferentialEquations v6.15.0\n  [587475ba] Flux v0.11.1\n  [033835bb] JLD2 v0.1.14\n  [e5e0dc1b] Juno v0.8.3\n  [b4fcebef] Lasso v0.5.2\n  [961ee093] ModelingToolkit v3.17.0\n  [429524aa] Optim v0.22.0\n  [1dea7af3] OrdinaryDiffEq v5.42.3\n  [91a5bcdd] Plots v1.6.0\n  [9f7883ad] Tracker v0.2.11"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nI also tried creating a new environment and adding each package in its last version. Still doesnt work"}]}]}],"thread_ts":"1610047406.252400","parent_user_id":"U01A0BP074P"},{"client_msg_id":"6bf43d9c-7b70-4141-a43f-a4e3fe45f6be","type":"message","text":"did you activate the manifest in the repo?","user":"U69BL50BF","ts":"1610284193.275100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"CdDv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"did you activate the manifest in the repo?"}]}]}],"thread_ts":"1610047406.252400","parent_user_id":"U01A0BP074P"},{"client_msg_id":"4311e7a0-bf98-4aef-963f-82e74cbfcc10","type":"message","text":"I already found the problem! The model were not well define:\n```p_[1]*x + p_[2]*x*y + z[1]```\nand it should be:\n```p_[1]*x - p_[2]*x*y + z[1]```\nThank you all and sorry for the inconvenience!!","user":"U01A0BP074P","ts":"1610401580.279100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"NQN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I already found the problem! The model were not well define:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"p_[1]*x + p_[2]*x*y + z[1]"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"and it should be:\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"p_[1]*x - p_[2]*x*y + z[1]"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Thank you all and sorry for the inconvenience!!"}]}]}],"thread_ts":"1610047406.252400","parent_user_id":"U01A0BP074P"},{"client_msg_id":"6379dec6-299d-4c8c-913b-a176bf36053c","type":"message","text":"no problem!","user":"U69BL50BF","ts":"1610401594.279300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+O3s8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no problem!"}]}]}],"thread_ts":"1610047406.252400","parent_user_id":"U01A0BP074P","reactions":[{"name":"grinning","users":["U01A0BP074P"],"count":1}]}]