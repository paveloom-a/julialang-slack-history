[{"client_msg_id":"81bb58fe-5e10-4063-be05-4a50dd31c172","type":"message","text":"it would be good to have that MWE. Did you try decreasing the tolerance?","user":"U69BL50BF","ts":"1613741553.196500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IYho","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it would be good to have that MWE. Did you try decreasing the tolerance?"}]}]}],"thread_ts":"1613741553.196500","reply_count":23,"reply_users_count":2,"latest_reply":"1613775225.210600","reply_users":["UNYPJU8DT","U69BL50BF"],"subscribed":false},{"client_msg_id":"efd19eb5-92f3-4461-9f72-9ef1ba69e91e","type":"message","text":"I tried reducing the solvers tolerances and switching solvers ( tbh just between Tsit5 and Vern7),\n\nHere is the output of InterpolatingAdjoint\n\n```Current loss after 10 iterations: 3.7916336\nCurrent loss after 15 iterations: 3.8265803\nCurrent loss after 20 iterations: 4.248312\nCurrent loss after 25 iterations: 5.2048836\nCurrent loss after 30 iterations: 6.7590575\nCurrent loss after 35 iterations: 8.936239\nCurrent loss after 40 iterations: 11.712459\nCurrent loss after 45 iterations: 15.040681\nCurrent loss after 50 iterations: 18.978754\nCurrent loss after 55 iterations: 24.01397\nCurrent loss after 60 iterations: 30.052452\nCurrent loss after 65 iterations: 36.789646\nCurrent loss after 70 iterations: 44.402405\nCurrent loss after 75 iterations: 53.119667```","user":"UNYPJU8DT","ts":"1613741808.196600","team":"T68168MUP","edited":{"user":"UNYPJU8DT","ts":"1613741894.000000"},"blocks":[{"type":"rich_text","block_id":"st8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I tried reducing the solvers tolerances and switching solvers ( tbh just between Tsit5 and Vern7),\n\nHere is the output of InterpolatingAdjoint\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Current loss after 10 iterations: 3.7916336\nCurrent loss after 15 iterations: 3.8265803\nCurrent loss after 20 iterations: 4.248312\nCurrent loss after 25 iterations: 5.2048836\nCurrent loss after 30 iterations: 6.7590575\nCurrent loss after 35 iterations: 8.936239\nCurrent loss after 40 iterations: 11.712459\nCurrent loss after 45 iterations: 15.040681\nCurrent loss after 50 iterations: 18.978754\nCurrent loss after 55 iterations: 24.01397\nCurrent loss after 60 iterations: 30.052452\nCurrent loss after 65 iterations: 36.789646\nCurrent loss after 70 iterations: 44.402405\nCurrent loss after 75 iterations: 53.119667"}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"16ba1bf2-efe0-4898-af56-3597f9d21a03","type":"message","text":"And here for ForwardDiff\n\n```Current loss after 10 iterations: 2.2449033\nCurrent loss after 15 iterations: 1.7244092\nCurrent loss after 20 iterations: 1.3741846\nCurrent loss after 25 iterations: 1.1303108\nCurrent loss after 30 iterations: 0.96091557\nCurrent loss after 35 iterations: 0.8533482\nCurrent loss after 40 iterations: 0.79444784\nCurrent loss after 45 iterations: 0.761086\nCurrent loss after 50 iterations: 0.7315743\nCurrent loss after 55 iterations: 0.69985354\nCurrent loss after 60 iterations: 0.66999364\nCurrent loss after 65 iterations: 0.6446655\nCurrent loss after 70 iterations: 0.6225286```","user":"UNYPJU8DT","ts":"1613741866.196800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"6Zy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"And here for ForwardDiff\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Current loss after 10 iterations: 2.2449033\nCurrent loss after 15 iterations: 1.7244092\nCurrent loss after 20 iterations: 1.3741846\nCurrent loss after 25 iterations: 1.1303108\nCurrent loss after 30 iterations: 0.96091557\nCurrent loss after 35 iterations: 0.8533482\nCurrent loss after 40 iterations: 0.79444784\nCurrent loss after 45 iterations: 0.761086\nCurrent loss after 50 iterations: 0.7315743\nCurrent loss after 55 iterations: 0.69985354\nCurrent loss after 60 iterations: 0.66999364\nCurrent loss after 65 iterations: 0.6446655\nCurrent loss after 70 iterations: 0.6225286"}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"3d1c0080-990d-4742-b036-fda59c81518c","type":"message","text":"make an MWE. Same for QuadratureAdjoint?","user":"U69BL50BF","ts":"1613741903.197100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/=T","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"make an MWE. Same for QuadratureAdjoint?"}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"3688e91f-e40c-49d4-acb6-47855c4c591e","type":"message","text":"Nope, this works.","user":"UNYPJU8DT","ts":"1613741947.197300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U/A","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Nope, this works."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"9e9e6c3e-856b-485c-a83c-78c5bf3cb3ff","type":"message","text":"what about really low tolerances?","user":"U69BL50BF","ts":"1613742040.197500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XaTO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what about really low tolerances?"}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"7ca96d3e-94bb-4b18-a0f0-39859f565bcb","type":"message","text":"Hmmmm. I think this is related to the loss. Really breaking it down does help. The InterpolatingAdjoint does increase really fast at the beginning, but takes a turn in the right direction afterwards.","user":"UNYPJU8DT","ts":"1613742411.197700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"RsP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmmmm. I think this is related to the loss. Really breaking it down does help. The InterpolatingAdjoint does increase really fast at the beginning, but takes a turn in the right direction afterwards."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"3b611eb3-9ae2-4d3b-9005-ff59587ca0b3","type":"message","text":"So L2-Error works fine and a batching of the data makes the system explode.","user":"UNYPJU8DT","ts":"1613742467.197900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QTy","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So L2-Error works fine and a batching of the data makes the system explode."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"af040847-910d-4093-9d34-9765d5dab2c4","type":"message","text":"Even at 1e-14 abstol/reltol?","user":"U69BL50BF","ts":"1613742533.198100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dzceW","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Even at 1e-14 abstol/reltol?"}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"type":"message","text":"Here is the Loss for the first 100 iterations with abs and reltol to 1e-2","files":[{"id":"F01N90EE823","mode":"tombstone"}],"upload":false,"blocks":[{"type":"rich_text","block_id":"HRQ9E","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Here is the Loss for the first 100 iterations with abs and reltol to 1e-2"}]}]}],"user":"UNYPJU8DT","display_as_bot":false,"ts":"1613742656.198300","thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"5ee86f35-0689-4891-835d-3007b82236dd","type":"message","text":"1e-12 is running now.","user":"UNYPJU8DT","ts":"1613742671.198700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"zaQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"1e-12 is running now."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"type":"message","text":"With 1e-7. Did not change much.","files":[{"id":"F01NH21C7ML","mode":"tombstone"}],"upload":false,"blocks":[{"type":"rich_text","block_id":"I9Q3","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"With 1e-7. Did not change much."}]}]}],"user":"UNYPJU8DT","display_as_bot":false,"ts":"1613743439.198900","thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"2733cc8e-e972-489b-863a-8410600f0244","type":"message","text":"all with the same random seed?","user":"U69BL50BF","ts":"1613744337.199300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"49Qji","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"all with the same random seed?"}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"c4478bc5-6a6a-40f9-8cb9-a9883a13865c","type":"message","text":"Jupp.","user":"UNYPJU8DT","ts":"1613744349.199500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZQb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Jupp."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"7f442b0f-0639-41ba-8437-591ca491f991","type":"message","text":"how is the starting point so different?","user":"U69BL50BF","ts":"1613744360.199700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F4+l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"how is the starting point so different?"}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"235c7e73-4607-463c-a664-c67902efb5bd","type":"message","text":"also, try ReverseDiffAdjoint.","user":"U69BL50BF","ts":"1613744368.199900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"na0s","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"also, try ReverseDiffAdjoint."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"144f4588-0995-4c3b-b0a4-cfa160449f4a","type":"message","text":"Ah, the losses is due to the iterations. Sorry. Right now, with maxiters = n in sciml_train I get n+1 iterations callbacks, so the length is different.","user":"UNYPJU8DT","ts":"1613744828.202000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"l0VV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, the losses is due to the iterations. Sorry. Right now, with maxiters = n in sciml_train I get n+1 iterations callbacks, so the length is different."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"f60bff47-d7cf-408d-abcd-c9448222bc0c","type":"message","text":"<@U69BL50BF> I created a mwe here <https://fmbcloud.ovgu.de/s/km5soLnHZT87MAt>\n\nI did set the tol to 1e-7, since I am working with Float32 right now, but overall there is not much change.","user":"UNYPJU8DT","ts":"1613759365.209200","team":"T68168MUP","attachments":[{"service_name":"FMBCloud","title":"MWEs","title_link":"https://fmbcloud.ovgu.de/s/km5soLnHZT87MAt","text":"FMBCloud - FMBCloud - Die Cloud der FMB","fallback":"FMBCloud: MWEs","from_url":"https://fmbcloud.ovgu.de/s/km5soLnHZT87MAt","thumb_url":"https://fmbcloud.ovgu.de/core/img/favicon-fb.png","thumb_width":200,"thumb_height":200,"service_icon":"https://fmbcloud.ovgu.de/themes/fmbcloud.ovgu.de/core/img/favicon-touch.png","id":1,"original_url":"https://fmbcloud.ovgu.de/s/km5soLnHZT87MAt"}],"blocks":[{"type":"rich_text","block_id":"zT39","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U69BL50BF"},{"type":"text","text":" I created a mwe here "},{"type":"link","url":"https://fmbcloud.ovgu.de/s/km5soLnHZT87MAt"},{"type":"text","text":"\n\nI did set the tol to 1e-7, since I am working with Float32 right now, but overall there is not much change."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"51a717ca-60d8-4a8e-b35e-570d1d0833a7","type":"message","text":"1e-7 is high","user":"U69BL50BF","ts":"1613759387.209500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/UT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"1e-7 is high"}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"c2f08679-9f62-4772-8ecb-165be67b861d","type":"message","text":"can you try Float64 tol=1e-14?","user":"U69BL50BF","ts":"1613759397.209700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0VD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"can you try Float64 tol=1e-14?"}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"109d3563-0c62-420b-9d63-00d6109412de","type":"message","text":"Sorry for the delay, my environment crashed :sweat_smile:","user":"UNYPJU8DT","ts":"1613759401.209900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZKa7w","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sorry for the delay, my environment crashed "},{"type":"emoji","name":"sweat_smile"}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"bb9aa939-df9b-447b-a2a4-8039b1c7e98d","type":"message","text":"Will do.","user":"UNYPJU8DT","ts":"1613759404.210100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"P4X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Will do."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"2b8d3755-a3df-4af7-84d6-281edb147bbb","type":"message","text":"Changes nothing, except the magnitude of the final loss.","user":"UNYPJU8DT","ts":"1613770166.210300","team":"T68168MUP","edited":{"user":"UNYPJU8DT","ts":"1613770368.000000"},"blocks":[{"type":"rich_text","block_id":"KK9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Changes nothing, except the magnitude of the final loss."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"},{"client_msg_id":"897e2b70-5abf-4a63-abcc-1df575b2d1dc","type":"message","text":"interesting.","user":"U69BL50BF","ts":"1613775225.210600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"mA8l","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"interesting."}]}]}],"thread_ts":"1613741553.196500","parent_user_id":"U69BL50BF"}]