[{"client_msg_id":"2cf052dd-2bc4-4329-9817-2d66a9769867","type":"message","text":"what is the franklin/js function that builds the unordered list of search results in franklin? The default behaviour adds a comma after each element in the list and I'd like to remove that","user":"U012RPHRSP3","ts":"1612107457.092200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UXA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what is the franklin/js function that builds the unordered list of search results in franklin? The default behaviour adds a comma after each element in the list and I'd like to remove that"}]}]}],"thread_ts":"1612107457.092200","reply_count":14,"reply_users_count":2,"latest_reply":"1612127070.096400","reply_users":["U012RPHRSP3","UDP5WL2RX"],"subscribed":false},{"client_msg_id":"d26fc5f4-ae54-41dc-9dd6-8a6d9354b01e","type":"message","text":"ok I think it is in either `build_index.js` or `lunrclient.js` , but I haven't found (yet) the line of code adding the comma","user":"U012RPHRSP3","ts":"1612108225.092300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"F00","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok I think it is in either "},{"type":"text","text":"build_index.js","style":{"code":true}},{"type":"text","text":" or "},{"type":"text","text":"lunrclient.js","style":{"code":true}},{"type":"text","text":" , but I haven't found (yet) the line of code adding the comma"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"18f11dcd-58a3-485f-b327-39df1f71c556","type":"message","text":"try changing `html.join(\"\");` to something else in lunrclient (I'm not sure, you'd have to try) + don't forget to edit the minified version (<https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join>)\n\nbut the current one with `\"\"` should not lead to `,` :thinking_face:","user":"UDP5WL2RX","ts":"1612111136.092900","team":"T68168MUP","edited":{"user":"UDP5WL2RX","ts":"1612111309.000000"},"attachments":[{"title":"Array.prototype.join() - JavaScript | MDN","title_link":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join","text":"The join() method creates and returns a new string by concatenating all of the elements in an array (or an array-like object), separated by commas or a specified separator string. If the array has only one item, then that item will be returned without using the separator.","fallback":"Array.prototype.join() - JavaScript | MDN","from_url":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join","service_icon":"https://developer.mozilla.org/favicon144.png","service_name":"developer.mozilla.org","id":1,"original_url":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join"}],"blocks":[{"type":"rich_text","block_id":"GOxI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"try changing "},{"type":"text","text":"html.join(\"\");","style":{"code":true}},{"type":"text","text":" to something else in lunrclient (I'm not sure, you'd have to try) + don't forget to edit the minified version ("},{"type":"link","url":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join"},{"type":"text","text":")\n\nbut the current one with "},{"type":"text","text":"\"\"","style":{"code":true}},{"type":"text","text":" should not lead to "},{"type":"text","text":",","style":{"code":true}},{"type":"text","text":" "},{"type":"emoji","name":"thinking_face"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"5ccbafde-d89e-447c-8b2e-4ddfcd994a1e","type":"message","text":"that what I was wondering, the `lunrclient` didn't have a single comma inside a string :rolling_on_the_floor_laughing: . But yeah I'll try modifying that line","user":"U012RPHRSP3","ts":"1612111388.093400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jTe","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"that what I was wondering, the "},{"type":"text","text":"lunrclient","style":{"code":true}},{"type":"text","text":" didn't have a single comma inside a string "},{"type":"emoji","name":"rolling_on_the_floor_laughing"},{"type":"text","text":" . But yeah I'll try modifying that line"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"f567bc2f-1387-4a34-be36-5e064930095a","type":"message","text":"let me know if it works!\n\nBtw if you're building a lunr index, there's an open issue to investigate how to get that thing to build as part of the github deployment. It shouldn't be very difficult but I haven't had the occasion to look into it, you might be interested in giving this a shot? (essentially it's about running the JS command inside the `.github/workflows/deploy.yml` )","user":"UDP5WL2RX","ts":"1612111577.093600","team":"T68168MUP","edited":{"user":"UDP5WL2RX","ts":"1612111600.000000"},"blocks":[{"type":"rich_text","block_id":"v+4DH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"let me know if it works!\n\nBtw if you're building a lunr index, there's an open issue to investigate how to get that thing to build as part of the github deployment. It shouldn't be very difficult but I haven't had the occasion to look into it, you might be interested in giving this a shot? (essentially it's about running the JS command inside the "},{"type":"text","text":".github/workflows/deploy.yml","style":{"code":true}},{"type":"text","text":" )"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"512f1875-96bc-40fd-aa55-66e57dc37d89","type":"message","text":"I haven't tried it yet, but could a simple `lunr()`  after `using Franklin;` in the deploy file work?","user":"U012RPHRSP3","ts":"1612111756.093900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kE5mR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I haven't tried it yet, but could a simple "},{"type":"text","text":"lunr()","style":{"code":true}},{"type":"text","text":"  after "},{"type":"text","text":"using Franklin;","style":{"code":true}},{"type":"text","text":" in the deploy file work?"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"b9338ad4-4370-41a7-ba5a-bcfe9cf1fc81","type":"message","text":"yes pretty much, just check it works as expected :slightly_smiling_face: (you'll need to install the lib as well)","user":"UDP5WL2RX","ts":"1612113748.094100","team":"T68168MUP","edited":{"user":"UDP5WL2RX","ts":"1612113854.000000"},"blocks":[{"type":"rich_text","block_id":"aek6h","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes pretty much, just check it works as expected "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" (you'll need to install the lib as well)"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"e20a5a2a-4209-4711-911d-cedc21745918","type":"message","text":"`\n```  code: 'MODULE_NOT_FOUND',\n  requireStack: [\n    '/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/_libs/lunr/build_index.js'\n  ]\n}\n┌ Warning: There was an error building the Lunr index.\n└ @ Franklin ~/.julia/packages/Franklin/eCeWy/src/manager/extras.jl:33```","user":"U012RPHRSP3","ts":"1612114588.094400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"ZUQK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"`\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"  code: 'MODULE_NOT_FOUND',\n  requireStack: [\n    '/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/_libs/lunr/build_index.js'\n  ]\n}\n┌ Warning: There was an error building the Lunr index.\n└ @ Franklin ~/.julia/packages/Franklin/eCeWy/src/manager/extras.jl:33"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"a8e4ae7d-7a12-47e4-9f1d-c5741d7b918e","type":"message","text":"lol yes :stuck_out_tongue: you need to make sure the lib is installed (use NodeJS for that)","user":"UDP5WL2RX","ts":"1612114681.094600","team":"T68168MUP","edited":{"user":"UDP5WL2RX","ts":"1612114696.000000"},"blocks":[{"type":"rich_text","block_id":"i+Caf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"lol yes "},{"type":"emoji","name":"stuck_out_tongue"},{"type":"text","text":" you need to make sure the lib is installed (use NodeJS for that)"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"7c0a5e00-53d8-4982-80bc-73df906a1a1f","type":"message","text":"ah wait, you anticipated it :speak_no_evil: . I guess I need to install lunr and cheerio in the deploy file","user":"U012RPHRSP3","ts":"1612114715.094900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h1m","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ah wait, you anticipated it "},{"type":"emoji","name":"speak_no_evil"},{"type":"text","text":" . I guess I need to install lunr and cheerio in the deploy file"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"40b074ec-7a20-4f58-ad91-b8295fbd316a","type":"message","text":"ok new try. I'll push this as soon as the current deploy finishes\n`\n```julia -e '\n            using Pkg; Pkg.activate(\".\"); Pkg.instantiate();\n            using NodeJS; run(`$(npm_cmd()) install highlight.js`);\n            run(`$(npm_cmd()) install lunr`);\n            run(`$(npm_cmd()) install ceerio`);\n            using Franklin; lunr();\n            optimize()'```","user":"U012RPHRSP3","ts":"1612114887.095500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"X/ES","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok new try. I'll push this as soon as the current deploy finishes\n`\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"julia -e '\n            using Pkg; Pkg.activate(\".\"); Pkg.instantiate();\n            using NodeJS; run(`$(npm_cmd()) install highlight.js`);\n            run(`$(npm_cmd()) install lunr`);\n            run(`$(npm_cmd()) install ceerio`);\n            using Franklin; lunr();\n            optimize()'"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"ae39cf77-39af-4829-9ba9-fcc137b03cf1","type":"message","text":"there seems to be a small issue\n\n```→ Building the Lunr index...       Could not find folder:  ../../__site\n/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/_libs/lunr/build_index.js:89\n    for (var i = 0; i &lt; files.length; i++) {\n                              ^\n\nTypeError: Cannot read property 'length' of undefined\n    at main ```\nI don't get this when I run `lunr()` locally. There were also a few warnings, but maybe they are not so dangerous. Here's the full log of the lunr and cheerio part\n\n```+ lunr@2.3.9\nadded 1 package from 1 contributor and audited 2 packages in 0.388s\nfound 0 vulnerabilities\n\nnpm WARN deprecated cheerio-select-tmp@0.1.1: Use cheerio-select instead\nnpm WARN saveError ENOENT: no such file or directory, open '/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/package.json'\nnpm WARN <http://juliaintervals.github.io|juliaintervals.github.io> No description\nnpm WARN <http://juliaintervals.github.io|juliaintervals.github.io> No repository field.\nnpm WARN <http://juliaintervals.github.io|juliaintervals.github.io> No README data\nnpm WARN <http://juliaintervals.github.io|juliaintervals.github.io> No license field.\n\n+ cheerio@1.0.0-rc.5\nadded 14 packages from 4 contributors and audited 16 packages in 0.927s\nfound 0 vulnerabilities\n\n→ Building the Lunr index...       Could not find folder:  ../../__site\n/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/_libs/lunr/build_index.js:89\n    for (var i = 0; i &lt; files.length; i++) {\n                              ^\n\nTypeError: Cannot read property 'length' of undefined\n    at main (/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/_libs/lunr/build_index.js:89:31)\n    at Object.&lt;anonymous&gt; (/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/_libs/lunr/build_index.js:103:1)\n    at Module._compile (internal/modules/cjs/loader.js:959:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:995:10)\n    at Module.load (internal/modules/cjs/loader.js:815:32)\n    at Function.Module._load (internal/modules/cjs/loader.js:727:14)\n    at Function.Module.runMain (internal/modules/cjs/loader.js:1047:10)\n    at internal/main/run_main_module.js:17:11\n┌ Warning: There was an error building the Lunr index.\n└ @ Franklin ~/.julia/packages/Franklin/eCeWy/src/manager/extras.jl:33```","user":"U012RPHRSP3","ts":"1612119520.095700","team":"T68168MUP","edited":{"user":"U012RPHRSP3","ts":"1612119549.000000"},"blocks":[{"type":"rich_text","block_id":"NQY6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"there seems to be a small issue\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"→ Building the Lunr index...       Could not find folder:  ../../__site\n/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/_libs/lunr/build_index.js:89\n    for (var i = 0; i < files.length; i++) {\n                              ^\n\nTypeError: Cannot read property 'length' of undefined\n    at main "}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I don't get this when I run "},{"type":"text","text":"lunr()","style":{"code":true}},{"type":"text","text":" locally. There were also a few warnings, but maybe they are not so dangerous. Here's the full log of the lunr and cheerio part\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"+ lunr@2.3.9\nadded 1 package from 1 contributor and audited 2 packages in 0.388s\nfound 0 vulnerabilities\n\nnpm WARN deprecated cheerio-select-tmp@0.1.1: Use cheerio-select instead\nnpm WARN saveError ENOENT: no such file or directory, open '/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/package.json'\nnpm WARN juliaintervals.github.io No description\nnpm WARN juliaintervals.github.io No repository field.\nnpm WARN juliaintervals.github.io No README data\nnpm WARN juliaintervals.github.io No license field.\n\n+ cheerio@1.0.0-rc.5\nadded 14 packages from 4 contributors and audited 16 packages in 0.927s\nfound 0 vulnerabilities\n\n→ Building the Lunr index...       Could not find folder:  ../../__site\n/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/_libs/lunr/build_index.js:89\n    for (var i = 0; i < files.length; i++) {\n                              ^\n\nTypeError: Cannot read property 'length' of undefined\n    at main (/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/_libs/lunr/build_index.js:89:31)\n    at Object.<anonymous> (/home/runner/work/juliaintervals.github.io/juliaintervals.github.io/_libs/lunr/build_index.js:103:1)\n    at Module._compile (internal/modules/cjs/loader.js:959:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:995:10)\n    at Module.load (internal/modules/cjs/loader.js:815:32)\n    at Function.Module._load (internal/modules/cjs/loader.js:727:14)\n    at Function.Module.runMain (internal/modules/cjs/loader.js:1047:10)\n    at internal/main/run_main_module.js:17:11\n┌ Warning: There was an error building the Lunr index.\n└ @ Franklin ~/.julia/packages/Franklin/eCeWy/src/manager/extras.jl:33"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"0907b170-c5d9-4f70-a916-02246981d49c","type":"message","text":"<@U012RPHRSP3> would you mind copy pasting this + your comments in <https://github.com/tlienart/Franklin.jl/issues/754> ? that would be great and we can investigate there :slightly_smiling_face: thanks!","user":"UDP5WL2RX","ts":"1612120324.096000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pqQ","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U012RPHRSP3"},{"type":"text","text":" would you mind copy pasting this + your comments in "},{"type":"link","url":"https://github.com/tlienart/Franklin.jl/issues/754"},{"type":"text","text":" ? that would be great and we can investigate there "},{"type":"emoji","name":"slightly_smiling_face"},{"type":"text","text":" thanks!"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"600bfd26-e7c9-42e3-8e7e-93e1c09fa446","type":"message","text":"done! I'll also try to have a look at it next week","user":"U012RPHRSP3","ts":"1612121649.096200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"IZjl","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"done! I'll also try to have a look at it next week"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"},{"client_msg_id":"cad8f4b9-3a8e-4a5c-b16e-73c1a88ca70c","type":"message","text":"thanks Luca!","user":"UDP5WL2RX","ts":"1612127070.096400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"adbJ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"thanks Luca!"}]}]}],"thread_ts":"1612107457.092200","parent_user_id":"U012RPHRSP3"}]