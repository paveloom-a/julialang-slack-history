[{"client_msg_id":"88ade8b6-8829-45cf-b713-33ee0ecabf6d","type":"message","text":"I have a question about choosing a good workflow. The blog part of my site works well with Franklin, but I had some photo galleries before which I want to add to the Franklin site as well.\n\nI have folders with \"originals\" at relatively good resolution and thought it should be reasonably straightforward to make a script that goes through these folders, computes smaller preview / thumbnail versions, and then creates the pages that show them.\n\nWhat I'm confused about is where to put the main script, where to generate the pages with images, where to best store the thumbnails (they should only be generated at deployment).\n\nCurrently I have a main `index.md` in a `photography` top folder, and in that only the command `{{ generate_galleries }}`. The images are in the `_assets` folder in one subfolder per album. Do I generate `md` files in `hfun_generate_galleries` and put them in subfolders of `photography`? I don't have a good understanding where in the build sequence I should insert my generated content. Should I generate the thumbnails into the generated `asset` folder?","user":"UK1BNFHFV","ts":"1611930483.062700","team":"T68168MUP","edited":{"user":"UK1BNFHFV","ts":"1611930540.000000"},"blocks":[{"type":"rich_text","block_id":"/0XB","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have a question about choosing a good workflow. The blog part of my site works well with Franklin, but I had some photo galleries before which I want to add to the Franklin site as well.\n\nI have folders with \"originals\" at relatively good resolution and thought it should be reasonably straightforward to make a script that goes through these folders, computes smaller preview / thumbnail versions, and then creates the pages that show them.\n\nWhat I'm confused about is where to put the main script, where to generate the pages with images, where to best store the thumbnails (they should only be generated at deployment).\n\nCurrently I have a main "},{"type":"text","text":"index.md","style":{"code":true}},{"type":"text","text":" in a "},{"type":"text","text":"photography","style":{"code":true}},{"type":"text","text":" top folder, and in that only the command "},{"type":"text","text":"{{ generate_galleries }}","style":{"code":true}},{"type":"text","text":". The images are in the "},{"type":"text","text":"_assets","style":{"code":true}},{"type":"text","text":" folder in one subfolder per album. Do I generate "},{"type":"text","text":"md","style":{"code":true}},{"type":"text","text":" files in "},{"type":"text","text":"hfun_generate_galleries","style":{"code":true}},{"type":"text","text":" and put them in subfolders of "},{"type":"text","text":"photography","style":{"code":true}},{"type":"text","text":"? I don't have a good understanding where in the build sequence I should insert my generated content. Should I generate the thumbnails into the generated "},{"type":"text","text":"asset","style":{"code":true}},{"type":"text","text":" folder?"}]}]}],"thread_ts":"1611930483.062700","reply_count":22,"reply_users_count":3,"latest_reply":"1612251289.097200","reply_users":["U67SCG4HG","UK1BNFHFV","UDP5WL2RX"],"subscribed":false},{"client_msg_id":"1e1154b8-f60e-46f2-b5b7-6a771dbb398f","type":"message","text":"I have some static data that I manage myself in a `static` folder. After the Franklin build I just move that to the deploy folder. Maybe you can do something similar?","user":"U67SCG4HG","ts":"1611930625.063000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"J4t","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I have some static data that I manage myself in a "},{"type":"text","text":"static","style":{"code":true}},{"type":"text","text":" folder. After the Franklin build I just move that to the deploy folder. Maybe you can do something similar?"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"7a430460-1724-49ed-ba22-8dd7024244cb","type":"message","text":"hm that might be more manual than what I want. The thumbnails are definitely supposed to be generated automatically so I have less of a hassle with that. One question is if it's even possible to generate md files on the fly. In a Documenter build we just did that in `make.jl` but there's no such thing for Franklin","user":"UK1BNFHFV","ts":"1611932856.063200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PBb0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"hm that might be more manual than what I want. The thumbnails are definitely supposed to be generated automatically so I have less of a hassle with that. One question is if it's even possible to generate md files on the fly. In a Documenter build we just did that in "},{"type":"text","text":"make.jl","style":{"code":true}},{"type":"text","text":" but there's no such thing for Franklin"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"f8e2222c-6aa0-424b-8b31-ae456c8cd164","type":"message","text":"it sounds like you would want to only generate these thumbnails once right? if so you should probably do that separately from Franklin?","user":"UDP5WL2RX","ts":"1611933758.065900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"r=aaO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it sounds like you would want to only generate these thumbnails once right? if so you should probably do that separately from Franklin?"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"e24b2a8a-5b68-4656-a34e-b108514581b7","type":"message","text":"IMO it would make sense to have a script `get_previews.jl` in your folder which reads through `_assets/...` executes some code to generate previews if they don't exist already, and just run this from time to time.\nYou could do this automatically with Franklin too.\n\nWith respect to the \"generate md files\" on the fly, I'm not sure I understand what you wan to do here. What's the end result that you would like? one page per photo?","user":"UDP5WL2RX","ts":"1611933904.066100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xLlZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"IMO it would make sense to have a script "},{"type":"text","text":"get_previews.jl","style":{"code":true}},{"type":"text","text":" in your folder which reads through "},{"type":"text","text":"_assets/...","style":{"code":true}},{"type":"text","text":" executes some code to generate previews if they don't exist already, and just run this from time to time.\nYou could do this automatically with Franklin too.\n\nWith respect to the \"generate md files\" on the fly, I'm not sure I understand what you wan to do here. What's the end result that you would like? one page per photo?"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"D777BEF2-73E9-4C1E-A466-751F891FAA98","type":"message","text":"I thought I'd need to generate one md file per album page so that I actually get visitable pages","user":"UK1BNFHFV","ts":"1611936593.075000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"octqr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I thought I'd need to generate one md file per album page so that I actually get visitable pages"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"C9E1B9FA-C496-4CCD-A902-26823B4C6899","type":"message","text":"So that I'd run my code before the stage that gathers all markdown files. Maybe I'm thinking about this in the wrong way. But my goal is really to have everything automatic. I don't like having to run a different script manually once in a while, then things can get out of sync ","user":"UK1BNFHFV","ts":"1611936692.077800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YtdH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So that I'd run my code before the stage that gathers all markdown files. Maybe I'm thinking about this in the wrong way. But my goal is really to have everything automatic. I don't like having to run a different script manually once in a while, then things can get out of sync "}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"DBA9FD48-08CA-4030-8124-74B705DBFDE5","type":"message","text":"Can I just run some jl files during the build? ","user":"UK1BNFHFV","ts":"1611936721.078400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"UXza","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Can I just run some jl files during the build? "}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"88ec2938-39ce-4233-847f-e20fcfecb030","type":"message","text":"ok, you can definitely do what you're talking about. It might be faster if you add me to your repo as a collaborator, I can write a demo there to get you started and you can see if that works well for you?","user":"UDP5WL2RX","ts":"1611937549.078600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"vfnb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, you can definitely do what you're talking about. It might be faster if you add me to your repo as a collaborator, I can write a demo there to get you started and you can see if that works well for you?"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"6e10e116-93ef-4e07-8441-388fe15b8268","type":"message","text":"if you want one page per photo, you don't need to go through markdown; you can just directly generate the HTML and use the `layout` elements to keep the layout\n\nSo your `hfun` would generate HTML pages in `__site` directly\n\nYou can also generate `.md` file that's fine too (it might be easier if you don't want to play with layout)","user":"UDP5WL2RX","ts":"1611937606.078800","team":"T68168MUP","edited":{"user":"UDP5WL2RX","ts":"1611937823.000000"},"blocks":[{"type":"rich_text","block_id":"4MJM","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you want one page per photo, you don't need to go through markdown; you can just directly generate the HTML and use the "},{"type":"text","text":"layout","style":{"code":true}},{"type":"text","text":" elements to keep the layout\n\nSo your "},{"type":"text","text":"hfun","style":{"code":true}},{"type":"text","text":" would generate HTML pages in "},{"type":"text","text":"__site","style":{"code":true}},{"type":"text","text":" directly\n\nYou can also generate "},{"type":"text","text":".md","style":{"code":true}},{"type":"text","text":" file that's fine too (it might be easier if you don't want to play with layout)"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"1b1ac1d2-8acc-42cd-8402-c88f6f311b84","type":"message","text":"the only thing to be a bit careful about is that your preview script only gets run if the preview image doesn't already exist, that way Franklin won't try to minimise your images every single time you serve (but that's a simple check).\n\nThere is also a question about deployment, if you do this, you would not want to deploy via GitHub, you would want to push a site \"as is\". That depends a bit on the number of images we're talking about though. If it's &lt; 50, it's fine, if it's in the 100s then it's a bit crazy to get GitHub to do that every time (GitHub would start from scratch)","user":"UDP5WL2RX","ts":"1611937719.079000","team":"T68168MUP","edited":{"user":"UDP5WL2RX","ts":"1611937867.000000"},"blocks":[{"type":"rich_text","block_id":"3k1D9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the only thing to be a bit careful about is that your preview script only gets run if the preview image doesn't already exist, that way Franklin won't try to minimise your images every single time you serve (but that's a simple check).\n\nThere is also a question about deployment, if you do this, you would not want to deploy via GitHub, you would want to push a site \"as is\". That depends a bit on the number of images we're talking about though. If it's < 50, it's fine, if it's in the 100s then it's a bit crazy to get GitHub to do that every time (GitHub would start from scratch)"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"b1d1631f-5be5-4556-a980-f1ab247bc1db","type":"message","text":"I don't really mind that much if github does this every time, it's on the order of 100-300 images maybe. But now I think the manual approach might be more reasonable. I don't update them that often, and maybe it's easier to just generate thumbnails directly into the `_assets` folder with some separate script, and then only generate the htmls for the album sites during the build by checking what's in `_assets/photography`","user":"UK1BNFHFV","ts":"1611939525.079900","team":"T68168MUP","edited":{"user":"UK1BNFHFV","ts":"1611939551.000000"},"blocks":[{"type":"rich_text","block_id":"9PmCf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I don't really mind that much if github does this every time, it's on the order of 100-300 images maybe. But now I think the manual approach might be more reasonable. I don't update them that often, and maybe it's easier to just generate thumbnails directly into the "},{"type":"text","text":"_assets","style":{"code":true}},{"type":"text","text":" folder with some separate script, and then only generate the htmls for the album sites during the build by checking what's in "},{"type":"text","text":"_assets/photography","style":{"code":true}}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"b46ee18f-af4e-43c8-bd0f-d09311e734fd","type":"message","text":"what's the easiest way to generate html sites using the existing footer / header strcture","user":"UK1BNFHFV","ts":"1611939668.080200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xEr+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"what's the easiest way to generate html sites using the existing footer / header strcture"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"bdfa4235-7c2f-470c-88ca-06bd8b090ede","type":"message","text":"I thought it would be easiest to generate md files because then I can use the existing conversion pipeline with them","user":"UK1BNFHFV","ts":"1611941945.081600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+KLR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I thought it would be easiest to generate md files because then I can use the existing conversion pipeline with them"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"605010d9-0112-431d-908b-df0662195f62","type":"message","text":"But if my function that generates them runs from an md file itself via the `{{ }}` syntax I assume the generated ones will not be processed","user":"UK1BNFHFV","ts":"1611942016.082000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KZhp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But if my function that generates them runs from an md file itself via the "},{"type":"text","text":"{{ }}","style":{"code":true}},{"type":"text","text":" syntax I assume the generated ones will not be processed"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"c076027f-ff8e-46e4-8750-f781c4dc0cf7","type":"message","text":"no no they will, the file watcher will see those as new files and will process them.\n\nwhat I’d suggest is that you tried this with a single already-compressed image, try to generate the MD, see how it works, if you have an issue open one on github and I can have a look; you can iterate from there","user":"UDP5WL2RX","ts":"1612006626.082600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"3e0re","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no no they will, the file watcher will see those as new files and will process them.\n\nwhat I’d suggest is that you tried this with a single already-compressed image, try to generate the MD, see how it works, if you have an issue open one on github and I can have a look; you can iterate from there"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"2E5CFE57-7BEB-410C-AB0A-3A056FA835B8","type":"message","text":"I will, thanks! Do I generate them somewhere into the __site folder directly?","user":"UK1BNFHFV","ts":"1612011427.084600","team":"T68168MUP","edited":{"user":"UK1BNFHFV","ts":"1612011438.000000"},"blocks":[{"type":"rich_text","block_id":"PnmFY","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I will, thanks! Do I generate them somewhere into the __site folder directly?"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"e89680b6-e541-4eba-8c0e-ab5b2c0bb7a4","type":"message","text":"if you generate `.md` files then no!","user":"UDP5WL2RX","ts":"1612011528.084900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4Il1/","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"if you generate "},{"type":"text","text":".md","style":{"code":true}},{"type":"text","text":" files then no!"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"EBECE0CD-2EEE-4CD8-9CAB-0C4B716AD297","type":"message","text":"Ok then for local testing I just git exclude the generated folders?","user":"UK1BNFHFV","ts":"1612012554.085900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"cXYKT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok then for local testing I just git exclude the generated folders?"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"9f3347c5-4846-4db6-8087-43ed352c5c97","type":"message","text":"yes you could do that","user":"UDP5WL2RX","ts":"1612012808.086100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qP0","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"yes you could do that"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"47f87ba2-95c9-486c-a718-ad7856ee4e5e","type":"message","text":"ok now I'm creating md files for every album in a folder `photography`  inside an `hfun` that is called from `photography.md` in the top folder. The overview page is generated successfully, but as I suspected the new md files are not picked up at deploy time. Probably because there is only one run checking for md files and then they are created too late? So what can I do in this situation? here's the overview page <https://jkrumbiegel.com/photography/> and here the repo <https://github.com/jkrumbiegel/jkrumbiegel.github.io/tree/master>","user":"UK1BNFHFV","ts":"1612205633.096700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Imc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok now I'm creating md files for every album in a folder "},{"type":"text","text":"photography","style":{"code":true}},{"type":"text","text":"  inside an "},{"type":"text","text":"hfun","style":{"code":true}},{"type":"text","text":" that is called from "},{"type":"text","text":"photography.md","style":{"code":true}},{"type":"text","text":" in the top folder. The overview page is generated successfully, but as I suspected the new md files are not picked up at deploy time. Probably because there is only one run checking for md files and then they are created too late? So what can I do in this situation? here's the overview page "},{"type":"link","url":"https://jkrumbiegel.com/photography/"},{"type":"text","text":" and here the repo "},{"type":"link","url":"https://github.com/jkrumbiegel/jkrumbiegel.github.io/tree/master"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"7e6bace5-3d0b-4485-8f2f-5812f1dfe102","type":"message","text":"for now I just call `optimize` a second time in the github action script, this works","user":"UK1BNFHFV","ts":"1612207395.096900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"SPSR","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"for now I just call "},{"type":"text","text":"optimize","style":{"code":true}},{"type":"text","text":" a second time in the github action script, this works"}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"},{"client_msg_id":"0d5cc967-3d0e-4764-9a58-1f263e072be1","type":"message","text":"it should work during `serve()` which continuously check for new pages but `optimize` wraps around a `serve(single=true)` where `single=true`, as you'd guess, does only a single full pass and so indeed doesn't catch those pages. A double call to optimize makes sense, you might want to replace that with `serve(single=true); optimize()` to prevent unnecessarily doing the minifying and prerendering twice.","user":"UDP5WL2RX","ts":"1612251289.097200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"U/sq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it should work during "},{"type":"text","text":"serve()","style":{"code":true}},{"type":"text","text":" which continuously check for new pages but "},{"type":"text","text":"optimize","style":{"code":true}},{"type":"text","text":" wraps around a "},{"type":"text","text":"serve(single=true)","style":{"code":true}},{"type":"text","text":" where "},{"type":"text","text":"single=true","style":{"code":true}},{"type":"text","text":", as you'd guess, does only a single full pass and so indeed doesn't catch those pages. A double call to optimize makes sense, you might want to replace that with "},{"type":"text","text":"serve(single=true); optimize()","style":{"code":true}},{"type":"text","text":" to prevent unnecessarily doing the minifying and prerendering twice."}]}]}],"thread_ts":"1611930483.062700","parent_user_id":"UK1BNFHFV"}]