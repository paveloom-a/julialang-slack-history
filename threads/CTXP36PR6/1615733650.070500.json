[{"client_msg_id":"111514b2-e52d-4d32-bb0e-031d34b5d2ad","type":"message","text":"Is there any documentation on `on_write` somewhere? I currently move a function to move from `blog/2021-03-04-post1` to `__site/blog/post1` and then have a `hfun` function to make a list of the newest posts. Unfortunately the `ALL_PAGE_VARS` has only the latest post and when restarting `serve` it sometimes gets the all posts but mostly only the latest.\nI thought `ALL_PAGE_VARS` should get all the vars and evaluate them for pages that haven't been crawled yet or something :smile:","user":"U7K185TUN","ts":"1615733650.070500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MdO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is there any documentation on "},{"type":"text","text":"on_write","style":{"code":true}},{"type":"text","text":" somewhere? I currently move a function to move from "},{"type":"text","text":"blog/2021-03-04-post1","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"__site/blog/post1","style":{"code":true}},{"type":"text","text":" and then have a "},{"type":"text","text":"hfun","style":{"code":true}},{"type":"text","text":" function to make a list of the newest posts. Unfortunately the "},{"type":"text","text":"ALL_PAGE_VARS","style":{"code":true}},{"type":"text","text":" has only the latest post and when restarting "},{"type":"text","text":"serve","style":{"code":true}},{"type":"text","text":" it sometimes gets the all posts but mostly only the latest.\nI thought "},{"type":"text","text":"ALL_PAGE_VARS","style":{"code":true}},{"type":"text","text":" should get all the vars and evaluate them for pages that haven't been crawled yet or something "},{"type":"emoji","name":"smile"}]}]}],"thread_ts":"1615733650.070500","reply_count":1,"reply_users_count":1,"latest_reply":"1615795382.071100","reply_users":["UDP5WL2RX"],"subscribed":false},{"client_msg_id":"d42cf671-d311-44b4-9d03-eb9f8b02aa1b","type":"message","text":"I'm not 100% sure on what you want to do but `ALL_PAGE_VARS` contains all page vars that _have been seen_ ; it does not guarantee to actually contain all your site's page var (sorry if the name is ambiguous, but on the other hand it's internal :stuck_out_tongue: ); if you use `pagevar(name, rpath)` then you're sure to get the page variable `name` from the page at path `rpath` no matter whether the page has been evaluated or not.\n\nRe `on_write` , it's a function that gets called at the end of one page build that gets access to both the page itself (like the string corresponding to the HTML of the page) as well as the variables that that page has access to. You can use this for post-processing.","user":"UDP5WL2RX","ts":"1615795382.071100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"jkg1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I'm not 100% sure on what you want to do but "},{"type":"text","text":"ALL_PAGE_VARS","style":{"code":true}},{"type":"text","text":" contains all page vars that "},{"type":"text","text":"have been seen","style":{"italic":true}},{"type":"text","text":" ; it does not guarantee to actually contain all your site's page var (sorry if the name is ambiguous, but on the other hand it's internal "},{"type":"emoji","name":"stuck_out_tongue"},{"type":"text","text":" ); if you use "},{"type":"text","text":"pagevar(name, rpath)","style":{"code":true}},{"type":"text","text":" then you're sure to get the page variable "},{"type":"text","text":"name","style":{"code":true}},{"type":"text","text":" from the page at path "},{"type":"text","text":"rpath","style":{"code":true}},{"type":"text","text":" no matter whether the page has been evaluated or not.\n\nRe "},{"type":"text","text":"on_write","style":{"code":true}},{"type":"text","text":" , it's a function that gets called at the end of one page build that gets access to both the page itself (like the string corresponding to the HTML of the page) as well as the variables that that page has access to. You can use this for post-processing."}]}]}],"thread_ts":"1615733650.070500","parent_user_id":"U7K185TUN"}]