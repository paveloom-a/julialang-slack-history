[{"client_msg_id":"bc59bd2c-dcfc-4c71-8fa0-b061ea491a01","type":"message","text":"Hello, I need help to deploy a PkgPage.jl land page and a Documenter.jl documentation site in the same repository with github actions. Is this possible? I managed to successfully deploy each one separately, but when combining the two jobs, the action from PkgPage.jl clears everything saved by Documenter.jl in the gh-pages branch. Any workaround?","user":"U014PNZLM26","ts":"1615437130.063400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8M6","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hello, I need help to deploy a PkgPage.jl land page and a Documenter.jl documentation site in the same repository with github actions. Is this possible? I managed to successfully deploy each one separately, but when combining the two jobs, the action from PkgPage.jl clears everything saved by Documenter.jl in the gh-pages branch. Any workaround?"}]}]}],"thread_ts":"1615437130.063400","reply_count":9,"reply_users_count":2,"latest_reply":"1615534686.065900","reply_users":["U014PNZLM26","UDP5WL2RX"],"subscribed":false},{"client_msg_id":"491cf49d-67f1-4163-a11e-2fdda40c3ea3","type":"message","text":"I changed the deployment folder in PkgPage.jl to page/ directory in gh-pages. This works fine, but it's still erasing everything else outside this folder (thus deleting Documenter.jl folders)","user":"U014PNZLM26","ts":"1615437406.063500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"V2oJn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I changed the deployment folder in PkgPage.jl to page/ directory in gh-pages. This works fine, but it's still erasing everything else outside this folder (thus deleting Documenter.jl folders)"}]}]}],"thread_ts":"1615437130.063400","parent_user_id":"U014PNZLM26"},{"client_msg_id":"9422eda7-224e-438a-8d1b-27cd9b1f34a3","type":"message","text":"could you point me to your repo?\n\nYou _should_ be able to change the L41 of the deploy script `PkgPage.optimize(input=\"page\", output=\"some_other_dir\")` and it would deploy to `some_other_dir` see these comments: <https://github.com/tlienart/PkgPage.jl/blob/7993cc04e359348c8d09f70ce44344a1e5d4e4a9/.github/workflows/DeployPage.yml#L29-L34>\n\nIs that what you did which cleared everything?\n\nAlso you might want to merge the PkgPage and Documenter script into one so that you build the docs, then build the landing page, then put the output in relevant folders on `gh-pages` manually (i.e. by adding a few lines of code there: <https://github.com/tlienart/PkgPage.jl/blob/7993cc04e359348c8d09f70ce44344a1e5d4e4a9/.github/workflows/DeployPage.yml#L41> where you'd call the documenter build, and potentially `mv` a folder around)","user":"UDP5WL2RX","ts":"1615447794.063700","team":"T68168MUP","edited":{"user":"UDP5WL2RX","ts":"1615447879.000000"},"blocks":[{"type":"rich_text","block_id":"23va","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"could you point me to your repo?\n\nYou "},{"type":"text","text":"should","style":{"italic":true}},{"type":"text","text":" be able to change the L41 of the deploy script "},{"type":"text","text":"PkgPage.optimize(input=\"page\", output=\"some_other_dir\")","style":{"code":true}},{"type":"text","text":" and it would deploy to "},{"type":"text","text":"some_other_dir","style":{"code":true}},{"type":"text","text":" see these comments: "},{"type":"link","url":"https://github.com/tlienart/PkgPage.jl/blob/7993cc04e359348c8d09f70ce44344a1e5d4e4a9/.github/workflows/DeployPage.yml#L29-L34"},{"type":"text","text":"\n\nIs that what you did which cleared everything?\n\nAlso you might want to merge the PkgPage and Documenter script into one so that you build the docs, then build the landing page, then put the output in relevant folders on "},{"type":"text","text":"gh-pages","style":{"code":true}},{"type":"text","text":" manually (i.e. by adding a few lines of code there: "},{"type":"link","url":"https://github.com/tlienart/PkgPage.jl/blob/7993cc04e359348c8d09f70ce44344a1e5d4e4a9/.github/workflows/DeployPage.yml#L41"},{"type":"text","text":" where you'd call the documenter build, and potentially "},{"type":"text","text":"mv","style":{"code":true}},{"type":"text","text":" a folder around)"}]}]}],"thread_ts":"1615437130.063400","parent_user_id":"U014PNZLM26"},{"client_msg_id":"42111754-676f-4e4b-a0ea-1e416da57210","type":"message","text":"Sure, the repo is <https://github.com/rafaelchp/Documentacion-Julia|https://github.com/rafaelchp/Documentacion-Julia> (sorry, it's in spanish, we're trying it for work) \n\nMy bad, I used the same directory `page` in the output directory in `PkgPage.optimize`\n\nI will try to merge both scripts into one as suggested. Thank you!\n\nedit: repository is corrected.","user":"U014PNZLM26","ts":"1615481425.064200","team":"T68168MUP","edited":{"user":"U014PNZLM26","ts":"1615487662.000000"},"blocks":[{"type":"rich_text","block_id":"LnO+O","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Sure, the repo is "},{"type":"link","url":"https://github.com/rafaelchp/Documentacion-Julia","text":"https://github.com/rafaelchp/Documentacion-Julia"},{"type":"text","text":" (sorry, it's in spanish, we're trying it for work) \n\nMy bad, I used the same directory "},{"type":"text","text":"page","style":{"code":true}},{"type":"text","text":" in the output directory in "},{"type":"text","text":"PkgPage.optimize","style":{"code":true}},{"type":"text","text":"\n\nI will try to merge both scripts into one as suggested. Thank you!\n\nedit: repository is corrected."}]}]}],"thread_ts":"1615437130.063400","parent_user_id":"U014PNZLM26"},{"client_msg_id":"af5432a8-63d5-4c63-821e-fdeeedf7e423","type":"message","text":"I think it might be a private repo as I don't have access to it but glad that you semed to figure some of it out :slightly_smiling_face:","user":"UDP5WL2RX","ts":"1615481476.064500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YeYFb","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think it might be a private repo as I don't have access to it but glad that you semed to figure some of it out "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615437130.063400","parent_user_id":"U014PNZLM26"},{"client_msg_id":"6dbd9eb7-7e12-4a02-becb-e9680e0ece91","type":"message","text":"Hmm... That's weird, I'm pretty sure it is public. I'll try later to tweak it and post here. Thanks again!","user":"U014PNZLM26","ts":"1615481601.064700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"JRle","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hmm... That's weird, I'm pretty sure it is public. I'll try later to tweak it and post here. Thanks again!"}]}]}],"thread_ts":"1615437130.063400","parent_user_id":"U014PNZLM26","reactions":[{"name":"+1","users":["UDP5WL2RX"],"count":1}]},{"client_msg_id":"cc645d39-08a3-46de-addc-0207c223b48b","type":"message","text":"I think the `รณ` caused trouble, I checked from your login and found the repo :slightly_smiling_face:","user":"UDP5WL2RX","ts":"1615481731.065000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"wYn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the "},{"type":"text","text":"รณ","style":{"code":true}},{"type":"text","text":" caused trouble, I checked from your login and found the repo "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1615437130.063400","parent_user_id":"U014PNZLM26"},{"client_msg_id":"86956dfd-f45c-42ce-a2ac-b8b581b619c0","type":"message","text":"Hi! I tried to merge both scripts into one. I'm not sure how did you think about the `mv` . Move which folder to where? Can you take a look? For now, I got the PkgPage site on web/ and the dev/ folder from Documenter, both in gh-pages branch. I also tried the option `clean`  from the `JamesIves/github-pages-deploy-action` but not sure if it worked.\n<https://github.com/rafaelchp/Documentacion-Julia/blob/9437fce943ab6b8ddf8af5f813391d5b623036a0/.github/workflows/DeployPage.yml#L41-L49>","user":"U014PNZLM26","ts":"1615526622.065500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LNST8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hi! I tried to merge both scripts into one. I'm not sure how did you think about the "},{"type":"text","text":"mv","style":{"code":true}},{"type":"text","text":" . Move which folder to where? Can you take a look? For now, I got the PkgPage site on web/ and the dev/ folder from Documenter, both in gh-pages branch. I also tried the option "},{"type":"text","text":"clean","style":{"code":true}},{"type":"text","text":"  from the "},{"type":"text","text":"JamesIves/github-pages-deploy-action","style":{"code":true}},{"type":"text","text":" but not sure if it worked.\n"},{"type":"link","url":"https://github.com/rafaelchp/Documentacion-Julia/blob/9437fce943ab6b8ddf8af5f813391d5b623036a0/.github/workflows/DeployPage.yml#L41-L49"}]}]}],"thread_ts":"1615437130.063400","parent_user_id":"U014PNZLM26"},{"client_msg_id":"0b76039e-0c26-44f3-945f-4bfb533ee265","type":"message","text":"What I would like is the PkgPage site on <https://rafaelchp.github.io/Documentacion-Julia/> and the Documenter in respective /stable/ and /dev. Thanks in advance for your help :grin:","user":"U014PNZLM26","ts":"1615526722.065700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"XSO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What I would like is the PkgPage site on "},{"type":"link","url":"https://rafaelchp.github.io/Documentacion-Julia/"},{"type":"text","text":" and the Documenter in respective /stable/ and /dev. Thanks in advance for your help "},{"type":"emoji","name":"grin"}]}]}],"thread_ts":"1615437130.063400","parent_user_id":"U014PNZLM26"},{"client_msg_id":"2b67f0b6-cf14-4c1d-8ba9-126458826033","type":"message","text":"There's a fairly easy shortcut from where you got (`/web/` and `/dev/`  and `/stable/`): you can just add a redirect page from the landing page you want `/Documentacion-Julia/` to `/Documentacion-Julia/web/` ; to do that you would just add a couple of lines of Julia code in the `deploy.yml` script writing this to an `index.html` that sits at the top level of the `gh-pages` (so you'd have there `index.html`, `/dev/`, `/stable/` and `/web/`)\n```<!doctype html>&lt;html&gt;&lt;head&gt;\n&lt;meta http-equiv=\"refresh\" content='0; url=\"/Documentacion-Julia/web/\"'&gt;\n&lt;/head&gt;&lt;/html&gt;```\nThat will mean that users entering `/Documentacion-Julia/` will directly go to `/Documentacion-Julia/web/` which is where your PkgPage resides.\n\nThe alternative is to leave PkgPage do its thing as you were before and to build the documentation after but *in the same deploy script* so basically add the line where you call `docs/make.jl` at the end of the deploy script. It should not be two separate scripts as otherwise one of the two might clean up the `gh-pages` branch before adding new things.","user":"UDP5WL2RX","ts":"1615534686.065900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0eI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"There's a fairly easy shortcut from where you got ("},{"type":"text","text":"/web/","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"/dev/","style":{"code":true}},{"type":"text","text":"  and "},{"type":"text","text":"/stable/","style":{"code":true}},{"type":"text","text":"): you can just add a redirect page from the landing page you want "},{"type":"text","text":"/Documentacion-Julia/","style":{"code":true}},{"type":"text","text":" to "},{"type":"text","text":"/Documentacion-Julia/web/","style":{"code":true}},{"type":"text","text":" ; to do that you would just add a couple of lines of Julia code in the "},{"type":"text","text":"deploy.yml","style":{"code":true}},{"type":"text","text":" script writing this to an "},{"type":"text","text":"index.html","style":{"code":true}},{"type":"text","text":" that sits at the top level of the "},{"type":"text","text":"gh-pages","style":{"code":true}},{"type":"text","text":" (so you'd have there "},{"type":"text","text":"index.html","style":{"code":true}},{"type":"text","text":", "},{"type":"text","text":"/dev/","style":{"code":true}},{"type":"text","text":", "},{"type":"text","text":"/stable/","style":{"code":true}},{"type":"text","text":" and "},{"type":"text","text":"/web/","style":{"code":true}},{"type":"text","text":")\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"<!doctype html><html><head>\n<meta http-equiv=\"refresh\" content='0; url=\"/Documentacion-Julia/web/\"'>\n</head></html>"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"That will mean that users entering "},{"type":"text","text":"/Documentacion-Julia/","style":{"code":true}},{"type":"text","text":" will directly go to "},{"type":"text","text":"/Documentacion-Julia/web/","style":{"code":true}},{"type":"text","text":" which is where your PkgPage resides.\n\nThe alternative is to leave PkgPage do its thing as you were before and to build the documentation after but "},{"type":"text","text":"in the same deploy script","style":{"bold":true}},{"type":"text","text":" so basically add the line where you call "},{"type":"text","text":"docs/make.jl","style":{"code":true}},{"type":"text","text":" at the end of the deploy script. It should not be two separate scripts as otherwise one of the two might clean up the "},{"type":"text","text":"gh-pages","style":{"code":true}},{"type":"text","text":" branch before adding new things."}]}]}],"thread_ts":"1615437130.063400","parent_user_id":"U014PNZLM26"}]