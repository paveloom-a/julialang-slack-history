[{"type":"message","text":"Hey guys. How do you test random generation and optimization functionality in packages?\nThe tests always work on my PC, but fail in github/ci :disappointed:\nSome randomness is involved when <https://github.com/mmikhasenko/AlgebraPDF.jl/blob/master/test/runtests.jl#L282|data set is generated>","files":[{"id":"F01MZE0RRFF","created":1613333129,"timestamp":1613333129,"name":"image.png","title":"image.png","mimetype":"image/png","filetype":"png","pretty_type":"PNG","user":"U01087W46CF","editable":false,"size":24533,"mode":"hosted","is_external":false,"external_type":"","is_public":true,"public_url_shared":false,"display_as_bot":false,"username":"","url_private":"https://files.slack.com/files-pri/T68168MUP-F01MZE0RRFF/image.png","url_private_download":"https://files.slack.com/files-pri/T68168MUP-F01MZE0RRFF/download/image.png","thumb_64":"https://files.slack.com/files-tmb/T68168MUP-F01MZE0RRFF-0d9abd5f69/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T68168MUP-F01MZE0RRFF-0d9abd5f69/image_80.png","thumb_360":"https://files.slack.com/files-tmb/T68168MUP-F01MZE0RRFF-0d9abd5f69/image_360.png","thumb_360_w":304,"thumb_360_h":360,"thumb_160":"https://files.slack.com/files-tmb/T68168MUP-F01MZE0RRFF-0d9abd5f69/image_160.png","original_w":394,"original_h":466,"thumb_tiny":"AwAwACjQHVvnzz+XtTv+BU0dW+Tv+dOP+7QAnf71H/AqP+AUv/AaAFooHTpiigBgxlvnPX8qU4/vYo+bJ+UdeOaXn0H50AJkZ+/Rkf3qX5vQfnRz6CgBR0ooHvRQAwbctyevNKMZ6mj58nOOvFL82e1ADfl9TS8ccml+b2o+bHagAXHYk0tJzntiloA//9k=","permalink":"https://julialang.slack.com/files/U01087W46CF/F01MZE0RRFF/image.png","permalink_public":"https://slack-files.com/T68168MUP-F01MZE0RRFF-2ed8d76b3a","is_starred":false,"has_rich_preview":false}],"upload":false,"blocks":[{"type":"rich_text","block_id":"GZq","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hey guys. How do you test random generation and optimization functionality in packages?\nThe tests always work on my PC, but fail in github/ci "},{"type":"emoji","name":"disappointed"},{"type":"text","text":"\nSome randomness is involved when "},{"type":"link","url":"https://github.com/mmikhasenko/AlgebraPDF.jl/blob/master/test/runtests.jl#L282","text":"data set is generated"}]}]}],"user":"U01087W46CF","display_as_bot":false,"ts":"1613333543.087600","thread_ts":"1613333543.087600","reply_count":6,"reply_users_count":4,"latest_reply":"1613387961.089100","reply_users":["U01087W46CF","U6QF223TN","U80UK1NSJ","U6CJRSR63"],"subscribed":false},{"client_msg_id":"905eeef9-c999-4e49-b266-01ffd1c42457","type":"message","text":"I guess\n• not testing, or\n• fixing seed\nsome other thicks?","user":"U01087W46CF","ts":"1613333617.087900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uXaD4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I guess\n"}]},{"type":"rich_text_list","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not testing, or"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"fixing seed"}]}],"style":"bullet","indent":0},{"type":"rich_text_section","elements":[{"type":"text","text":"\nsome other thicks?"}]}]}],"thread_ts":"1613333543.087600","parent_user_id":"U01087W46CF"},{"client_msg_id":"e84e0a4a-d411-4ec5-9697-0a407f04ea79","type":"message","text":"Is Optim.BFGS fully deterministic?","user":"U01087W46CF","ts":"1613333769.088100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"9Lp9","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Is Optim.BFGS fully deterministic?"}]}]}],"thread_ts":"1613333543.087600","parent_user_id":"U01087W46CF"},{"client_msg_id":"35734c34-a673-4b64-a646-5bc8af723a5c","type":"message","text":"Yeah you should be setting a seed in testing if there is any stochasticity in your tests.\n\n&gt; Is Optim.BFGS fully deterministic?\nI think so, unless someone contradicts","user":"U6QF223TN","ts":"1613366334.088300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"xmI89","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah you should be setting a seed in testing if there is any stochasticity in your tests.\n\n"}]},{"type":"rich_text_quote","elements":[{"type":"text","text":"Is Optim.BFGS fully deterministic?"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"I think so, unless someone contradicts"}]}]}],"thread_ts":"1613333543.087600","parent_user_id":"U01087W46CF"},{"client_msg_id":"0ed55115-5da8-4c15-bc93-438c19793226","type":"message","text":"Use StableRNGs.jl","user":"U80UK1NSJ","ts":"1613373520.088500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"+Kf","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Use StableRNGs.jl"}]}]}],"thread_ts":"1613333543.087600","parent_user_id":"U01087W46CF","reactions":[{"name":"point_up::skin-tone-4","users":["U6QF223TN"],"count":1},{"name":"point_up","users":["U82LX4ACB"],"count":1}]},{"client_msg_id":"975d8276-1dd6-4532-8d80-fd842ad2b39c","type":"message","text":"It should be. Are you finding it not to be? If that's the case there could either a) be a bug in your code or b) be an initialization bug in BFGS which should be fixed, so please provide the example so I can try to fix it. I just fixed an bug in LBFGS that could cause it to be non-deterministic if no improvement could be made on the m-1'th iteration where m is the total memory length.","user":"U6CJRSR63","ts":"1613378642.088800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"53q9i","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"It should be. Are you finding it not to be? If that's the case there could either a) be a bug in your code or b) be an initialization bug in BFGS which should be fixed, so please provide the example so I can try to fix it. I just fixed an bug in LBFGS that could cause it to be non-deterministic if no improvement could be made on the m-1'th iteration where m is the total memory length."}]}]}],"thread_ts":"1613333543.087600","parent_user_id":"U01087W46CF"},{"client_msg_id":"c91bc693-543e-47fc-b50a-897cb967249e","type":"message","text":"ok, thanks.","user":"U01087W46CF","ts":"1613387961.089100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"DyN","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"ok, thanks."}]}]}],"thread_ts":"1613333543.087600","parent_user_id":"U01087W46CF"}]