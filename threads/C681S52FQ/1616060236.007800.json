[{"client_msg_id":"6d20a49e-fc09-457a-9c82-f4c13544dddf","type":"message","text":"Hello everyone! I have a question regarding parallelization of a combinatorial operation, let me know if my question is better suited for another channel.\n\nI am using the `Combinatorics.jl` package. I have to perform an operation on two matrices for each `permutations(1:N, 4)` where `N` should go up to 100.  For now I wrote it like this,\n\n```function Δfe(M::Matrix, i, j, k, l)\n    first = M[i, j] - M[i, k]\n    second = M[l, j] - M[l, k]\n\n    return first - second\nend\n\nfunction computeU(X, U, tetrads)\n    u = 0.\n\n    for t in tetrads\n        u += Δfe(X, t...) * Δfe(U, t...)\n    end\n\n    return u / length(tetrads)\n\nend\n\nN = 100\n\nX, U = # NxN matrices\ntetrads = permutations(1:N, 4)\ncomputeU(X, U, tetrads)```\nThis is currently very slow. I would like to know if there is any way to parallelize the `for t in tetrads` or a way of restructuring this to make it faster.","user":"U01FPHR7WKB","ts":"1616060236.007800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"pVK","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hello everyone! I have a question regarding parallelization of a combinatorial operation, let me know if my question is better suited for another channel.\n\nI am using the "},{"type":"text","text":"Combinatorics.jl","style":{"code":true}},{"type":"text","text":" package. I have to perform an operation on two matrices for each "},{"type":"text","text":"permutations(1:N, 4)","style":{"code":true}},{"type":"text","text":" where "},{"type":"text","text":"N","style":{"code":true}},{"type":"text","text":" should go up to 100.  For now I wrote it like this,\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"function Δfe(M::Matrix, i, j, k, l)\n    first = M[i, j] - M[i, k]\n    second = M[l, j] - M[l, k]\n\n    return first - second\nend\n\nfunction computeU(X, U, tetrads)\n    u = 0.\n\n    for t in tetrads\n        u += Δfe(X, t...) * Δfe(U, t...)\n    end\n\n    return u / length(tetrads)\n\nend\n\nN = 100\n\nX, U = # NxN matrices\ntetrads = permutations(1:N, 4)\ncomputeU(X, U, tetrads)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nThis is currently very slow. I would like to know if there is any way to parallelize the "},{"type":"text","text":"for t in tetrads","style":{"code":true}},{"type":"text","text":" or a way of restructuring this to make it faster."}]}]}],"thread_ts":"1616060236.007800","reply_count":5,"reply_users_count":3,"latest_reply":"1616069984.008700","reply_users":["U01FPHR7WKB","U01MG0TN079","U01GMP3HF9C"],"subscribed":false},{"client_msg_id":"73efaeb7-2aed-4587-adde-8655ba672ccd","type":"message","text":"Btw, I also tried to use,\n\n```Δfe(M::Matrix) = t -&gt; Δfe(M, t...)\n\n(Δfe(X).(tetrads)' Δfe(U).(tetrads) )/ length(tetrads) ```\nwhich was of slower.","user":"U01FPHR7WKB","ts":"1616060371.007900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"izoM+","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Btw, I also tried to use,\n\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"Δfe(M::Matrix) = t -> Δfe(M, t...)\n\n(Δfe(X).(tetrads)' Δfe(U).(tetrads) )/ length(tetrads) "}]},{"type":"rich_text_section","elements":[{"type":"text","text":"\nwhich was of slower."}]}]}],"thread_ts":"1616060236.007800","parent_user_id":"U01FPHR7WKB"},{"client_msg_id":"f053d5de-f0eb-40fd-bf27-06c1ca02a698","type":"message","text":"look here maybe ? <https://docs.julialang.org/en/v1.5/manual/distributed-computing/>","user":"U01MG0TN079","ts":"1616061600.008100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FbR/I","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"look here maybe ? "},{"type":"link","url":"https://docs.julialang.org/en/v1.5/manual/distributed-computing/"}]}]}],"thread_ts":"1616060236.007800","parent_user_id":"U01FPHR7WKB"},{"client_msg_id":"b8d49b50-120b-46e0-91a7-47d270703ced","type":"message","text":"I think you'd use `@distributed`  here","user":"U01MG0TN079","ts":"1616061714.008300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f+4a","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think you'd use "},{"type":"text","text":"@distributed","style":{"code":true}},{"type":"text","text":"  here"}]}]}],"thread_ts":"1616060236.007800","parent_user_id":"U01FPHR7WKB"},{"client_msg_id":"44df1d84-1189-4704-bea7-898761954048","type":"message","text":"I cannot use `@distributed` because the permutations are a generator hence there is no `getindex` and I cannot collect them, it would be to big.","user":"U01FPHR7WKB","ts":"1616064967.008500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"z/lY8","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I cannot use "},{"type":"text","text":"@distributed","style":{"code":true}},{"type":"text","text":" because the permutations are a generator hence there is no "},{"type":"text","text":"getindex","style":{"code":true}},{"type":"text","text":" and I cannot collect them, it would be to big."}]}]}],"thread_ts":"1616060236.007800","parent_user_id":"U01FPHR7WKB"},{"client_msg_id":"197bf1fe-5242-4bea-b8d3-029fea80bfac","type":"message","text":"Then multithreading ?","user":"U01GMP3HF9C","ts":"1616069984.008700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Anvh","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Then multithreading ?"}]}]}],"thread_ts":"1616060236.007800","parent_user_id":"U01FPHR7WKB"}]