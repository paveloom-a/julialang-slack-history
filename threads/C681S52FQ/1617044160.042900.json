[{"client_msg_id":"f1a87f9e-0e61-4b63-8373-fcb5834dce4d","type":"message","text":"Dear, <#C681S52FQ|math-optimization> community. I would really appreciate some help with solving constrained nonlinear optimization problems (in particular, collocated optimal control problems). First off, I am aware of `NLOptControl.jl` and, for now, am just focusing on interacting more directly with the NLP solver. [This gist](<https://gist.github.com/avonmoll/a18b1d77e418a0eb98f854d143424a73>) describes the problems I'm having in solving very simple collocated optimal control problems. The biggest issue seems to be that `GalacticOptim`'s solvers aren't respecting the constraints I specify. As for `JuMP`, it seems difficult to express even these simple dynamics. I've had some success with `NLopt`, but it's very brittle (I get `:FORCED_STOP` without any additional info on what the actual error/problem is).","user":"U01N4PQ663W","ts":"1617044160.042900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YqZgH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Dear, "},{"type":"channel","channel_id":"C681S52FQ"},{"type":"text","text":" community. I would really appreciate some help with solving constrained nonlinear optimization problems (in particular, collocated optimal control problems). First off, I am aware of "},{"type":"text","text":"NLOptControl.jl","style":{"code":true}},{"type":"text","text":" and, for now, am just focusing on interacting more directly with the NLP solver. [This gist]("},{"type":"link","url":"https://gist.github.com/avonmoll/a18b1d77e418a0eb98f854d143424a73"},{"type":"text","text":") describes the problems I'm having in solving very simple collocated optimal control problems. The biggest issue seems to be that "},{"type":"text","text":"GalacticOptim","style":{"code":true}},{"type":"text","text":"'s solvers aren't respecting the constraints I specify. As for "},{"type":"text","text":"JuMP","style":{"code":true}},{"type":"text","text":", it seems difficult to express even these simple dynamics. I've had some success with "},{"type":"text","text":"NLopt","style":{"code":true}},{"type":"text","text":", but it's very brittle (I get "},{"type":"text","text":":FORCED_STOP","style":{"code":true}},{"type":"text","text":" without any additional info on what the actual error/problem is)."}]}]}],"thread_ts":"1617044160.042900","reply_count":10,"reply_users_count":4,"latest_reply":"1617203702.049800","reply_users":["U85JBUGGP","U01N4PQ663W","U6QF223TN","U6CJRSR63"],"is_locked":false,"subscribed":false},{"client_msg_id":"62dac6a7-b6a8-4aac-9f12-87300622cbb8","type":"message","text":"Try <https://github.com/mohamed82008/Nonconvex.jl>","user":"U85JBUGGP","ts":"1617044454.043000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"B2/4","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Try "},{"type":"link","url":"https://github.com/mohamed82008/Nonconvex.jl"}]}]}],"thread_ts":"1617044160.042900","parent_user_id":"U01N4PQ663W"},{"client_msg_id":"c2894335-54d3-49ff-acb7-28cc1e6b07d6","type":"message","text":"Ipopt there","user":"U85JBUGGP","ts":"1617044467.043200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"qdAP","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ipopt there"}]}]}],"thread_ts":"1617044160.042900","parent_user_id":"U01N4PQ663W"},{"client_msg_id":"0e2ef5cb-0a37-447f-8bd5-1bac0a8b4c95","type":"message","text":"I will give this a shot! I've been told that `GPOPS-II` uses Ipopt. In fact, that's the biggest reason I tried to use `JuMP` (being able to specify Ipopt as a solver).","user":"U01N4PQ663W","ts":"1617059600.043400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4=b","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I will give this a shot! I've been told that "},{"type":"text","text":"GPOPS-II","style":{"code":true}},{"type":"text","text":" uses Ipopt. In fact, that's the biggest reason I tried to use "},{"type":"text","text":"JuMP","style":{"code":true}},{"type":"text","text":" (being able to specify Ipopt as a solver)."}]}]}],"thread_ts":"1617044160.042900","parent_user_id":"U01N4PQ663W"},{"client_msg_id":"1c2e2aba-7050-45f8-89eb-908c4e949123","type":"message","text":"<@U01N4PQ663W> ~why do you say that constraints are not respected with IPNewton here?~ Didn't pay attention to the last loop before, sorry. And yeah, other methods used with GalacticOptim don't support constraints yet","user":"U6QF223TN","ts":"1617117850.043600","team":"T68168MUP","edited":{"user":"U6QF223TN","ts":"1617117984.000000"},"blocks":[{"type":"rich_text","block_id":"H55oK","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U01N4PQ663W"},{"type":"text","text":" "},{"type":"text","text":"why do you say that constraints are not respected with IPNewton here?","style":{"strike":true}},{"type":"text","text":" Didn't pay attention to the last loop before, sorry. And yeah, other methods used with GalacticOptim don't support constraints yet"}]}]}],"thread_ts":"1617044160.042900","parent_user_id":"U01N4PQ663W"},{"client_msg_id":"efbe1e54-7c2a-4ee3-99bb-40708b022a4f","type":"message","text":"I dont know much about how GalacticOptim is set up, but I see you use a few different methods from Optim.jl (an unrelated project as such) and most of them are unconstrained methods, so I suspect GalacticOptim.jl just ignores constraints in that case, but I'm not sure how they set it up. Did you try IPNewton directly in Optim.jl? If you return NaN outside of the constraints boundaries it should keep trying to backtrack into the feasible set","user":"U6CJRSR63","ts":"1617127042.044100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YSmp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I dont know much about how GalacticOptim is set up, but I see you use a few different methods from Optim.jl (an unrelated project as such) and most of them are unconstrained methods, so I suspect GalacticOptim.jl just ignores constraints in that case, but I'm not sure how they set it up. Did you try IPNewton directly in Optim.jl? If you return NaN outside of the constraints boundaries it should keep trying to backtrack into the feasible set"}]}]}],"thread_ts":"1617044160.042900","parent_user_id":"U01N4PQ663W"},{"client_msg_id":"2e993c18-b628-4719-84c3-d9d706eeaf62","type":"message","text":"<@U6QF223TN> -- I wondered if that was the case and I tried some stuff in <https://galacticoptim.sciml.ai/stable/tutorials/rosenbrock/> and IIRC constraints were being respected... but maybe it was just that the input bounds were respected. Also, I understand that some (maybe most?) algorithms do not support constraints. It would be nice if that were noted in a more central location :smile: .","user":"U01N4PQ663W","ts":"1617201185.049000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"f87TM","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6QF223TN"},{"type":"text","text":" -- I wondered if that was the case and I tried some stuff in "},{"type":"link","url":"https://galacticoptim.sciml.ai/stable/tutorials/rosenbrock/"},{"type":"text","text":" and IIRC constraints were being respected... but maybe it was just that the input bounds were respected. Also, I understand that some (maybe most?) algorithms do not support constraints. It would be nice if that were noted in a more central location "},{"type":"emoji","name":"smile"},{"type":"text","text":" ."}]}]}],"thread_ts":"1617044160.042900","parent_user_id":"U01N4PQ663W"},{"client_msg_id":"d0fd3e83-bc59-4c20-8295-fe81528e65e1","type":"message","text":"<@U6CJRSR63> -- I will try to work with IPNewton via Optim.jl directly.","user":"U01N4PQ663W","ts":"1617201231.049200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MV9G","elements":[{"type":"rich_text_section","elements":[{"type":"user","user_id":"U6CJRSR63"},{"type":"text","text":" -- I will try to work with IPNewton via Optim.jl directly."}]}]}],"thread_ts":"1617044160.042900","parent_user_id":"U01N4PQ663W"},{"client_msg_id":"07b99ddf-246c-45f7-aa3c-79276529e1fa","type":"message","text":"&gt; <@U6QF223TN> -- I wondered if that was the case and I tried some stuff in <https://galacticoptim.sciml.ai/stable/tutorials/rosenbrock/> and IIRC constraints were being respected... but maybe it was just that the input bounds were respected\nNo, the constraints work too we have tests for it <https://github.com/SciML/GalacticOptim.jl/blob/380e0995b85f224a3475720e0d84e30f895e4ba7/test/rosenbrock.jl#L58-L64>. The docs need a lot of work as you can see :joy: I agree it should be noted better.","user":"U6QF223TN","ts":"1617201740.049400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/DbI","elements":[{"type":"rich_text_quote","elements":[{"type":"user","user_id":"U6QF223TN"},{"type":"text","text":" -- I wondered if that was the case and I tried some stuff in "},{"type":"link","url":"https://galacticoptim.sciml.ai/stable/tutorials/rosenbrock/"},{"type":"text","text":" and IIRC constraints were being respected... but maybe it was just that the input bounds were respected"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"No, the constraints work too we have tests for it "},{"type":"link","url":"https://github.com/SciML/GalacticOptim.jl/blob/380e0995b85f224a3475720e0d84e30f895e4ba7/test/rosenbrock.jl#L58-L64"},{"type":"text","text":". The docs need a lot of work as you can see "},{"type":"emoji","name":"joy"},{"type":"text","text":" I agree it should be noted better."}]}]}],"thread_ts":"1617044160.042900","parent_user_id":"U01N4PQ663W"},{"client_msg_id":"78a4907c-0839-41cd-b1e7-0f9f342886cc","type":"message","text":"But you're saying something like `NLopt.Opt(:LN_COBYLA, ...)` should support constraints but currently does not (when calling from GalacticOptim)?","user":"U01N4PQ663W","ts":"1617202176.049600","team":"T68168MUP","edited":{"user":"U01N4PQ663W","ts":"1617204598.000000"},"blocks":[{"type":"rich_text","block_id":"ssaB2","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"But you're saying something like "},{"type":"text","text":"NLopt.Opt(:LN_COBYLA, ...)","style":{"code":true}},{"type":"text","text":" should support constraints but currently does not (when calling from GalacticOptim)?"}]}]}],"thread_ts":"1617044160.042900","parent_user_id":"U01N4PQ663W"},{"client_msg_id":"27838bbb-c33f-413e-b616-c55c9471660b","type":"message","text":"Yes correct, other than IPNewton","user":"U6QF223TN","ts":"1617203702.049800","team":"T68168MUP","edited":{"user":"U6QF223TN","ts":"1617203716.000000"},"blocks":[{"type":"rich_text","block_id":"abMx7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yes correct, other than IPNewton"}]}]}],"thread_ts":"1617044160.042900","parent_user_id":"U01N4PQ663W","reactions":[{"name":"+1::skin-tone-2","users":["U01N4PQ663W"],"count":1}]}]