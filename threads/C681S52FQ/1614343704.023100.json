[{"client_msg_id":"e4938993-74b9-4213-99af-f1c052f6a959","type":"message","text":"How can I use reverse-mode autodiff with Optim? It says in the docs it's not fully supported","user":"U7YD3DKL2","ts":"1614343704.023100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QGA+S","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"How can I use reverse-mode autodiff with Optim? It says in the docs it's not fully supported"}]}]}],"thread_ts":"1614343704.023100","reply_count":11,"reply_users_count":5,"latest_reply":"1614367851.027200","reply_users":["U01GMP3HF9C","U82RE6STE","U7YD3DKL2","U85JBUGGP","U6CJRSR63"],"subscribed":false},{"client_msg_id":"f04bd9c6-5d81-42b7-9f7f-bfaa2d048921","type":"message","text":"Once again, <@U82RE6STE> to the rescue","user":"U01GMP3HF9C","ts":"1614346130.023200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dUg","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Once again, "},{"type":"user","user_id":"U82RE6STE"},{"type":"text","text":" to the rescue"}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"},{"client_msg_id":"186586ec-35a4-4179-80c1-626bd34b5fa0","type":"message","text":"you're a scandal :joy:\nmore seriously <@U7YD3DKL2> I think Optim will use reverse autodiff by default?","user":"U82RE6STE","ts":"1614346725.023400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"2cWU","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"you're a scandal "},{"type":"emoji","name":"joy"},{"type":"text","text":"\nmore seriously "},{"type":"user","user_id":"U7YD3DKL2"},{"type":"text","text":" I think Optim will use reverse autodiff by default?"}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"},{"client_msg_id":"3a206a91-6a6d-4e24-81ac-8d1935648636","type":"message","text":"Quoting from the docs (<https://julianlsolvers.github.io/Optim.jl/stable/#user/gradientsandhessians/#automatic-differentiation>):\n&gt; Reverse-mode automatic differentiation is not supported explicitly yet (although you can use it by writing your own `g!` function).","user":"U7YD3DKL2","ts":"1614346792.023600","team":"T68168MUP","attachments":[{"title":"Optim.jl","title_link":"https://julianlsolvers.github.io/Optim.jl/stable/#user/gradientsandhessians/#automatic-differentiation","text":"Pure Julia implementations of optimization algorithms.","fallback":"Optim.jl","from_url":"https://julianlsolvers.github.io/Optim.jl/stable/#user/gradientsandhessians/#automatic-differentiation","service_name":"julianlsolvers.github.io","id":1,"original_url":"https://julianlsolvers.github.io/Optim.jl/stable/#user/gradientsandhessians/#automatic-differentiation"}],"blocks":[{"type":"rich_text","block_id":"dkn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Quoting from the docs ("},{"type":"link","url":"https://julianlsolvers.github.io/Optim.jl/stable/#user/gradientsandhessians/#automatic-differentiation"},{"type":"text","text":"):\n"}]},{"type":"rich_text_quote","elements":[{"type":"text","text":"Reverse-mode automatic differentiation is not supported explicitly yet (although you can use it by writing your own "},{"type":"text","text":"g!","style":{"code":true}},{"type":"text","text":" function)."}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"},{"client_msg_id":"4c3dec65-4cd5-4a53-b3d4-2c9c105eb045","type":"message","text":"it's not supported automatically, because it would require Optim to depend on and commit to a reverse diff package, which are more moving targets.\n```using ReverseDiff\ng!(storage, x) = ReverseDiff.gradient!(storage, x)```\nshould work","user":"U82RE6STE","ts":"1614346998.023900","team":"T68168MUP","edited":{"user":"U82RE6STE","ts":"1614347037.000000"},"blocks":[{"type":"rich_text","block_id":"ln7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's not supported automatically, because it would require Optim to depend on and commit to a reverse diff package, which are more moving targets.\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"using ReverseDiff\ng!(storage, x) = ReverseDiff.gradient!(storage, x)"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"should work"}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"},{"client_msg_id":"02f6e158-cc86-44ee-947f-4eae8eed4bf0","type":"message","text":"<https://github.com/JuliaDiff/AbstractDifferentiation.jl> should help solve this but I need to find some time to finish it off.","user":"U85JBUGGP","ts":"1614347901.024200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"25ocP","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaDiff/AbstractDifferentiation.jl"},{"type":"text","text":" should help solve this but I need to find some time to finish it off."}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"},{"client_msg_id":"d9ae1608-c824-4195-85a6-f6d7027d0ecb","type":"message","text":"Ah ok. Maybe this should be added to the Optim docs? <@U82RE6STE>","user":"U7YD3DKL2","ts":"1614351868.024400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MwoM7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah ok. Maybe this should be added to the Optim docs? "},{"type":"user","user_id":"U82RE6STE"}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"},{"client_msg_id":"839dc72b-2a2e-48b1-9552-e0c00cb2cbbd","type":"message","text":"&gt;  Ah ok. Maybe this should be added to the Optim docs?\nthis could yes, I guess pointing out ReverseDiff won't hurt","user":"U82RE6STE","ts":"1614352117.024600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"4VQD","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":" Ah ok. Maybe this should be added to the Optim docs?"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"this could yes, I guess pointing out ReverseDiff won't hurt"}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"},{"client_msg_id":"4e0287e6-cef1-4591-9482-a148a043b371","type":"message","text":"I think the Optim maintainers will welcome a PR there","user":"U82RE6STE","ts":"1614352130.024800","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LmmjI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I think the Optim maintainers will welcome a PR there"}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"},{"client_msg_id":"3408d45a-d34a-42ef-93ff-b4c8e9390419","type":"message","text":"Ok. I think I can do it","user":"U7YD3DKL2","ts":"1614354432.025000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"u3B","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ok. I think I can do it"}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"},{"client_msg_id":"02ABA873-E416-4AEF-BFD1-64B2381C5F32","type":"message","text":"I removed it many years ago because ReverseDiff was working, then it didn’t work, then it worked, then... :)","user":"U6CJRSR63","ts":"1614367825.026400","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"MCV","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I removed it many years ago because ReverseDiff was working, then it didn’t work, then it worked, then... :)"}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"},{"client_msg_id":"03C206BF-5BA7-49F4-98AB-353826B7B4AA","type":"message","text":"Or maybe it was another reverse diff package but the big one back then","user":"U6CJRSR63","ts":"1614367851.027200","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"PnBO","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Or maybe it was another reverse diff package but the big one back then"}]}]}],"thread_ts":"1614343704.023100","parent_user_id":"U7YD3DKL2"}]