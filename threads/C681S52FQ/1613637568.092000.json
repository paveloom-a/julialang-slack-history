[{"client_msg_id":"c2f44594-ed2b-424e-ab4f-2e1b08fd9fd9","type":"message","text":"If I have defined a Convex.jl problem, is there a way to ask Convex if the problem is representable on a particular form, e.g., `is_qp(problem)::Bool`?","user":"UJ7DVTVQ8","ts":"1613637568.092000","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"0GQ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"If I have defined a Convex.jl problem, is there a way to ask Convex if the problem is representable on a particular form, e.g., "},{"type":"text","text":"is_qp(problem)::Bool","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1613637568.092000","reply_count":8,"reply_users_count":3,"latest_reply":"1614167680.012100","reply_users":["UCZ7VBGUD","UJ7DVTVQ8","U66N673NV"],"subscribed":false},{"client_msg_id":"A6E4FAD9-173A-44BB-AB97-10C0E93437DC","type":"message","text":"No, but Convex reformulates all problems to have a linear objective subject to conic constraints, and what kind of cones you get is kind of in the docs","user":"UCZ7VBGUD","ts":"1613639788.093800","team":"T68168MUP","edited":{"user":"UCZ7VBGUD","ts":"1613639812.000000"},"blocks":[{"type":"rich_text","block_id":"jMsr","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"No, but Convex reformulates all problems to have a linear objective subject to conic constraints, and what kind of cones you get is kind of in the docs"}]}]}],"thread_ts":"1613637568.092000","parent_user_id":"UJ7DVTVQ8"},{"client_msg_id":"87011504-4cad-4d49-868c-12c415933bf7","type":"message","text":"So if I compose my objective and constraints of only operations from the linear and second-order cone operations, I will end up with a problem that is representable as a QCQP?","user":"UJ7DVTVQ8","ts":"1613640238.094100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dg5","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"So if I compose my objective and constraints of only operations from the linear and second-order cone operations, I will end up with a problem that is representable as a QCQP?"}]}]}],"thread_ts":"1613637568.092000","parent_user_id":"UJ7DVTVQ8"},{"client_msg_id":"8EE3F254-091A-45BE-8738-08ADBCBF4D7F","type":"message","text":"You’ll end up with a linear objective with linear and SOC constraints, not sure if that’s the same as a QCQP or not","user":"UCZ7VBGUD","ts":"1613642111.095700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"FZA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"You’ll end up with a linear objective with linear and SOC constraints, not sure if that’s the same as a QCQP or not"}]}]}],"thread_ts":"1613637568.092000","parent_user_id":"UJ7DVTVQ8"},{"client_msg_id":"ecd04b71-7301-456b-a120-1aee5ea61393","type":"message","text":"What I'm trying to figure out is if the problem I'm solving can be (perhaps manually) translated to a QP which I can solve with a custom QP solver in an industrial system. I'm using Convex to experiment with concepts, but to make use of them in practice, I'm a bit constrained w.r.t. the solver alternatives.\n\nConvex.jl works beautifully and is very performant now b.t.w., a much improved experience compared to a few years ago!","user":"UJ7DVTVQ8","ts":"1613642411.097300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"fX1","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"What I'm trying to figure out is if the problem I'm solving can be (perhaps manually) translated to a QP which I can solve with a custom QP solver in an industrial system. I'm using Convex to experiment with concepts, but to make use of them in practice, I'm a bit constrained w.r.t. the solver alternatives.\n\nConvex.jl works beautifully and is very performant now b.t.w., a much improved experience compared to a few years ago!"}]}]}],"thread_ts":"1613637568.092000","parent_user_id":"UJ7DVTVQ8","reactions":[{"name":"heart","users":["UCZ7VBGUD"],"count":1}]},{"client_msg_id":"3045B5BE-1D6B-4062-8918-F13232DB0866","type":"message","text":"I see, interesting.\n\nConvex predates MathOptInterface and does not take advantage of many MOI features, instead doing most of the reformulation itself to hit this single target (linear objective with conic constraints) to pass to MOI. Future versions of Convex might be able to lower things more directly to MOI which means we could pass quadratic objectives directly and let MOI pass them along if the solver natively supports them, or reformulate otherwise (or not, the caller gets to specify allowed bridges).\n\nSo the summary is we can’t not-reformulate currently, so it might be hard to know that. Perhaps JuMP gives more control over what bridges are allowed, and MOI itself definitely does although it’s kind of hard to write MOI code by hand","user":"UCZ7VBGUD","ts":"1613642699.104700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Svs+Z","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I see, interesting.\n\nConvex predates MathOptInterface and does not take advantage of many MOI features, instead doing most of the reformulation itself to hit this single target (linear objective with conic constraints) to pass to MOI. Future versions of Convex might be able to lower things more directly to MOI which means we could pass quadratic objectives directly and let MOI pass them along if the solver natively supports them, or reformulate otherwise (or not, the caller gets to specify allowed bridges).\n\nSo the summary is we can’t not-reformulate currently, so it might be hard to know that. Perhaps JuMP gives more control over what bridges are allowed, and MOI itself definitely does although it’s kind of hard to write MOI code by hand"}]}]}],"thread_ts":"1613637568.092000","parent_user_id":"UJ7DVTVQ8"},{"client_msg_id":"5621B4A8-48BF-4B1B-B9C2-72E1615B03CC","type":"message","text":"Depending on how much time you want to invest, you could make a mock MOI Optimizer that only supports the constraints and objectives that your industrial solver supports, and then formulate the problem in JuMP or Convex and see if it can pass the problem to that Optimizer. (Maybe <@U6E0VDGS1> knows if this a good idea)","user":"UCZ7VBGUD","ts":"1613642907.107600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YY8pT","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Depending on how much time you want to invest, you could make a mock MOI Optimizer that only supports the constraints and objectives that your industrial solver supports, and then formulate the problem in JuMP or Convex and see if it can pass the problem to that Optimizer. (Maybe "},{"type":"user","user_id":"U6E0VDGS1"},{"type":"text","text":" knows if this a good idea)"}]}]}],"thread_ts":"1613637568.092000","parent_user_id":"UJ7DVTVQ8"},{"client_msg_id":"1998ba67-48c2-40e0-8fbd-470a64aea5b6","type":"message","text":"Probably a more enlightening approach would be to check all the atoms used in the model and understand how they translate to constraints in a solver. You'll need to do this anyway if you are productionizing the model with a custom QP solver","user":"U66N673NV","ts":"1613860957.000100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"x1BdI","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Probably a more enlightening approach would be to check all the atoms used in the model and understand how they translate to constraints in a solver. You'll need to do this anyway if you are productionizing the model with a custom QP solver"}]}]}],"thread_ts":"1613637568.092000","parent_user_id":"UJ7DVTVQ8"},{"client_msg_id":"9cf07641-404d-4b81-992e-e1350f5707a0","type":"message","text":"Thanks for your input guys, it turned out to be rather straightforward to translate my model manually to a QP :slightly_smiling_face:","user":"UJ7DVTVQ8","ts":"1614167680.012100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"TXs","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Thanks for your input guys, it turned out to be rather straightforward to translate my model manually to a QP "},{"type":"emoji","name":"slightly_smiling_face"}]}]}],"thread_ts":"1613637568.092000","parent_user_id":"UJ7DVTVQ8"}]