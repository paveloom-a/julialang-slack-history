[{"client_msg_id":"44c20251-beb6-46e2-bd35-a229e2d1193b","type":"message","text":"Maybe this is a `Distributed` n00b question, but perhaps there's something happening with the `@quickactivate` macro in DrWatson.\nWhy does\n```@everywhere begin    \n    using DrWatson    \n    @quickactivate :ProjectName    \nend  ```\nyield: *ERROR:* On worker 2:\nLoadError: UndefVarError: @quickactivate not defined\n\nBut\n```@everywhere using DrWatson\n@everywhere @quickactivate :ProjectName```\nworks fine?","user":"UUTEK2XTM","ts":"1613048402.016300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"53Gk","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Maybe this is a "},{"type":"text","text":"Distributed","style":{"code":true}},{"type":"text","text":" n00b question, but perhaps there's something happening with the "},{"type":"text","text":"@quickactivate","style":{"code":true}},{"type":"text","text":" macro in DrWatson.\nWhy does\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@everywhere begin    \n    using DrWatson    \n    @quickactivate :ProjectName    \nend  "}]},{"type":"rich_text_section","elements":[{"type":"text","text":"yield: "},{"type":"text","text":"ERROR: ","style":{"bold":true}},{"type":"text","text":"On worker 2:\nLoadError: UndefVarError: @quickactivate not defined\n\nBut\n"}]},{"type":"rich_text_preformatted","elements":[{"type":"text","text":"@everywhere using DrWatson\n@everywhere @quickactivate :ProjectName"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"works fine?"}]}]}],"thread_ts":"1613048402.016300","reply_count":19,"reply_users_count":4,"latest_reply":"1613227357.020300","reply_users":["U8J1KET6K","UH24GRBLL","UUTEK2XTM","U9769MVA7"],"subscribed":false},{"client_msg_id":"233280df-4004-4b2e-bc73-c2d7da78b31f","type":"message","text":"no idea, i'm probably the biggest `Distributed` noob on this channel btw :stuck_out_tongue:","user":"U8J1KET6K","ts":"1613048469.016600","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KKXAX","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no idea, i'm probably the biggest "},{"type":"text","text":"Distributed","style":{"code":true}},{"type":"text","text":" noob on this channel btw "},{"type":"emoji","name":"stuck_out_tongue"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM","reactions":[{"name":"grin","users":["UUTEK2XTM"],"count":1}]},{"client_msg_id":"f9459a75-cc9f-41b6-8853-b620640c97b5","type":"message","text":"I suspect the `@quickactivate` macro does some `eval` shenaningans, which may be lifted outside of `@everywhere begin ... end`?","user":"UH24GRBLL","ts":"1613048522.016900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"7idp","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"I suspect the "},{"type":"text","text":"@quickactivate","style":{"code":true}},{"type":"text","text":" macro does some "},{"type":"text","text":"eval","style":{"code":true}},{"type":"text","text":" shenaningans, which may be lifted outside of "},{"type":"text","text":"@everywhere begin ... end","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"ccdb98dd-8b31-48c2-a969-63e20ba0f904","type":"message","text":"not a DrWatson expert though","user":"UH24GRBLL","ts":"1613048529.017100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"uvhn","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"not a DrWatson expert though"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"0dcc0278-82e9-48df-a8fe-94e2c8806e53","type":"message","text":"Hm, not really, it is a really simple macro:","user":"U8J1KET6K","ts":"1613048574.017300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Xclw","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Hm, not really, it is a really simple macro:"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"7efdeac0-9cfe-4dc7-b577-2bd633ad6087","type":"message","text":"<https://github.com/JuliaDynamics/DrWatson.jl/blob/master/src/project_setup.jl#L175-L181>","user":"U8J1KET6K","ts":"1613048574.017500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Cgy7v","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://github.com/JuliaDynamics/DrWatson.jl/blob/master/src/project_setup.jl#L175-L181"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"569c308c-13b4-404b-8fcc-70f9d2d63c10","type":"message","text":"Oh, I guess the interpolation `$` counts as `eval`?","user":"U8J1KET6K","ts":"1613048587.017700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"dDmxc","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Oh, I guess the interpolation "},{"type":"text","text":"$","style":{"code":true}},{"type":"text","text":" counts as "},{"type":"text","text":"eval","style":{"code":true}},{"type":"text","text":"?"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"4f323702-89e6-4ee0-be52-1fe27a5ee383","type":"message","text":"Ah, may just need an `esc` around things for hygiene.","user":"UUTEK2XTM","ts":"1613048628.017900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"/Nv","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Ah, may just need an "},{"type":"text","text":"esc","style":{"code":true}},{"type":"text","text":" around things for hygiene."}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"33e066d4-12e7-4135-b41d-5512c1fc1575","type":"message","text":"no idea what `esc` does, feel free to PR!","user":"U8J1KET6K","ts":"1613048645.018100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"lH0j","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no idea what "},{"type":"text","text":"esc","style":{"code":true}},{"type":"text","text":" does, feel free to PR!"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"ed777f87-d84f-47be-8665-21a5b2e5ba1c","type":"message","text":"Low priority! I'll play with it later when I have the time.","user":"UUTEK2XTM","ts":"1613048645.018300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"YV0DH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Low priority! I'll play with it later when I have the time."}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"db9d7efe-7195-4342-9ea3-c5f87aa733c7","type":"message","text":"&gt; feel free to PR\nWill do.","user":"UUTEK2XTM","ts":"1613048676.018500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"QQ9qj","elements":[{"type":"rich_text_quote","elements":[{"type":"text","text":"feel free to PR"}]},{"type":"rich_text_section","elements":[{"type":"text","text":"Will do."}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"1b1ae1c3-78e7-4880-a3ef-73bb717f0426","type":"message","text":"<https://docs.julialang.org/en/v1/manual/metaprogramming/#Hygiene>\n\n:)","user":"UH24GRBLL","ts":"1613049280.018700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"LHPRt","elements":[{"type":"rich_text_section","elements":[{"type":"link","url":"https://docs.julialang.org/en/v1/manual/metaprogramming/#Hygiene"},{"type":"text","text":"\n\n:)"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"c8e9fda6-92ad-48b6-a059-2890ae46abce","type":"message","text":"it's not that the interpolation counts is eval, it's that it'll be executed with the wrong qualification","user":"UH24GRBLL","ts":"1613049316.018900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"h07X","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it's not that the interpolation counts is eval, it's that it'll be executed with the wrong qualification"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"f63869ed-0539-4fa4-aa9a-5695b48b6a3b","type":"message","text":"Indeed. A simple fix I think. Just need some time to test.","user":"UUTEK2XTM","ts":"1613049381.019100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"gQYnZ","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Indeed. A simple fix I think. Just need some time to test."}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"a9d1b996-d59a-4bdb-98e2-677fce90e94c","type":"message","text":"no wait, I'm not sure that is the real problem","user":"UH24GRBLL","ts":"1613049429.019300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"p1lhA","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"no wait, I'm not sure that is the real problem"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"39849a99-633e-4813-bf18-7e1ef5e3cb52","type":"message","text":"it can't even find the `@quickactivate` macro itself","user":"UH24GRBLL","ts":"1613049446.019500","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"KcKNd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"it can't even find the "},{"type":"text","text":"@quickactivate","style":{"code":true}},{"type":"text","text":" macro itself"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"ee98ffba-dfd7-4b86-93c0-6348322caf54","type":"message","text":"since `using` only works at the top scope, I suspect the `using` silently failed on the worker, and thus the macro wasn't available","user":"UH24GRBLL","ts":"1613049509.019700","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"kwb7","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"since "},{"type":"text","text":"using","style":{"code":true}},{"type":"text","text":" only works at the top scope, I suspect the "},{"type":"text","text":"using","style":{"code":true}},{"type":"text","text":" silently failed on the worker, and thus the macro wasn't available"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"3bf8640c-aafa-4d75-9264-4024250de29f","type":"message","text":"Yeah, could be.. Well, I have some investigating to do.","user":"UUTEK2XTM","ts":"1613049568.019900","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"OvnD","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Yeah, could be.. Well, I have some investigating to do."}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"3196f397-3933-4be2-b3e5-1b3cb155367c","type":"message","text":"the `@everywhere` macro may just not see the `using` properly","user":"UH24GRBLL","ts":"1613049574.020100","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"8gd","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"the "},{"type":"text","text":"@everywhere","style":{"code":true}},{"type":"text","text":" macro may just not see the "},{"type":"text","text":"using","style":{"code":true}},{"type":"text","text":" properly"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"},{"client_msg_id":"c76d7298-491d-40a8-89f2-9d424e147bb3","type":"message","text":"Could this be because julia tries to expand the quickactivate macro before executing the first using statement?","user":"U9769MVA7","ts":"1613227357.020300","team":"T68168MUP","blocks":[{"type":"rich_text","block_id":"Fc=P","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Could this be because julia tries to expand the quickactivate macro before executing the first using statement?"}]}]}],"thread_ts":"1613048402.016300","parent_user_id":"UUTEK2XTM"}]